var U3=Object.defineProperty,O3=Object.defineProperties;var F3=Object.getOwnPropertyDescriptors;var Mp=Object.getOwnPropertySymbols,B3=Object.getPrototypeOf,eC=Object.prototype.hasOwnProperty,tC=Object.prototype.propertyIsEnumerable,q3=Reflect.get;var Gv=Math.pow,ZA=(t,e,n)=>e in t?U3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,J=(t,e)=>{for(var n in e||(e={}))eC.call(e,n)&&ZA(t,n,e[n]);if(Mp)for(var n of Mp(e))tC.call(e,n)&&ZA(t,n,e[n]);return t},pe=(t,e)=>O3(t,F3(e));var mi=(t,e)=>{var n={};for(var i in t)eC.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&Mp)for(var i of Mp(t))e.indexOf(i)<0&&tC.call(t,i)&&(n[i]=t[i]);return n};var j3=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Lr=(t,e,n)=>q3(B3(t),n,e);var A=(t,e,n)=>new Promise((i,s)=>{var r=u=>{try{c(n.next(u))}catch(h){s(h)}},a=u=>{try{c(n.throw(u))}catch(h){s(h)}},c=u=>u.done?i(u.value):Promise.resolve(u.value).then(r,a);c((n=n.apply(t,e)).next())});var mre=j3(Re=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function E2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var zv={exports:{}},ph={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nC;function G3(){if(nC)return ph;nC=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,s,r){var a=null;if(r!==void 0&&(a=""+r),s.key!==void 0&&(a=""+s.key),"key"in s){r={};for(var c in s)c!=="key"&&(r[c]=s[c])}else r=s;return s=r.ref,{$$typeof:t,type:i,key:a,ref:s!==void 0?s:null,props:r}}return ph.Fragment=e,ph.jsx=n,ph.jsxs=n,ph}var iC;function z3(){return iC||(iC=1,zv.exports=G3()),zv.exports}var y=z3(),Hv={exports:{}},it={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sC;function H3(){if(sC)return it;sC=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),x=Symbol.iterator;function T(H){return H===null||typeof H!="object"?null:(H=x&&H[x]||H["@@iterator"],typeof H=="function"?H:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,P={};function M(H,le,xe){this.props=H,this.context=le,this.refs=P,this.updater=xe||b}M.prototype.isReactComponent={},M.prototype.setState=function(H,le){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,le,"setState")},M.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function V(){}V.prototype=M.prototype;function q(H,le,xe){this.props=H,this.context=le,this.refs=P,this.updater=xe||b}var O=q.prototype=new V;O.constructor=q,S(O,M.prototype),O.isPureReactComponent=!0;var z=Array.isArray,j={H:null,A:null,T:null,S:null,V:null},W=Object.prototype.hasOwnProperty;function D(H,le,xe,ce,Ee,Fe){return xe=Fe.ref,{$$typeof:t,type:H,key:le,ref:xe!==void 0?xe:null,props:Fe}}function C(H,le){return D(H.type,le,void 0,void 0,void 0,H.props)}function R(H){return typeof H=="object"&&H!==null&&H.$$typeof===t}function L(H){var le={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(xe){return le[xe]})}var F=/\/+/g;function G(H,le){return typeof H=="object"&&H!==null&&H.key!=null?L(""+H.key):le.toString(36)}function B(){}function ye(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(B,B):(H.status="pending",H.then(function(le){H.status==="pending"&&(H.status="fulfilled",H.value=le)},function(le){H.status==="pending"&&(H.status="rejected",H.reason=le)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function Ae(H,le,xe,ce,Ee){var Fe=typeof H;(Fe==="undefined"||Fe==="boolean")&&(H=null);var Be=!1;if(H===null)Be=!0;else switch(Fe){case"bigint":case"string":case"number":Be=!0;break;case"object":switch(H.$$typeof){case t:case e:Be=!0;break;case g:return Be=H._init,Ae(Be(H._payload),le,xe,ce,Ee)}}if(Be)return Ee=Ee(H),Be=ce===""?"."+G(H,0):ce,z(Ee)?(xe="",Be!=null&&(xe=Be.replace(F,"$&/")+"/"),Ae(Ee,le,xe,"",function(Ct){return Ct})):Ee!=null&&(R(Ee)&&(Ee=C(Ee,xe+(Ee.key==null||H&&H.key===Ee.key?"":(""+Ee.key).replace(F,"$&/")+"/")+Be)),le.push(Ee)),1;Be=0;var _e=ce===""?".":ce+":";if(z(H))for(var at=0;at<H.length;at++)ce=H[at],Fe=_e+G(ce,at),Be+=Ae(ce,le,xe,Fe,Ee);else if(at=T(H),typeof at=="function")for(H=at.call(H),at=0;!(ce=H.next()).done;)ce=ce.value,Fe=_e+G(ce,at++),Be+=Ae(ce,le,xe,Fe,Ee);else if(Fe==="object"){if(typeof H.then=="function")return Ae(ye(H),le,xe,ce,Ee);throw le=String(H),Error("Objects are not valid as a React child (found: "+(le==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":le)+"). If you meant to render a collection of children, use an array instead.")}return Be}function ne(H,le,xe){if(H==null)return H;var ce=[],Ee=0;return Ae(H,ce,"","",function(Fe){return le.call(xe,Fe,Ee++)}),ce}function de(H){if(H._status===-1){var le=H._result;le=le(),le.then(function(xe){(H._status===0||H._status===-1)&&(H._status=1,H._result=xe)},function(xe){(H._status===0||H._status===-1)&&(H._status=2,H._result=xe)}),H._status===-1&&(H._status=0,H._result=le)}if(H._status===1)return H._result.default;throw H._result}var ie=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var le=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(le))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)};function Ie(){}return it.Children={map:ne,forEach:function(H,le,xe){ne(H,function(){le.apply(this,arguments)},xe)},count:function(H){var le=0;return ne(H,function(){le++}),le},toArray:function(H){return ne(H,function(le){return le})||[]},only:function(H){if(!R(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},it.Component=M,it.Fragment=n,it.Profiler=s,it.PureComponent=q,it.StrictMode=i,it.Suspense=u,it.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,it.__COMPILER_RUNTIME={__proto__:null,c:function(H){return j.H.useMemoCache(H)}},it.cache=function(H){return function(){return H.apply(null,arguments)}},it.cloneElement=function(H,le,xe){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var ce=S({},H.props),Ee=H.key,Fe=void 0;if(le!=null)for(Be in le.ref!==void 0&&(Fe=void 0),le.key!==void 0&&(Ee=""+le.key),le)!W.call(le,Be)||Be==="key"||Be==="__self"||Be==="__source"||Be==="ref"&&le.ref===void 0||(ce[Be]=le[Be]);var Be=arguments.length-2;if(Be===1)ce.children=xe;else if(1<Be){for(var _e=Array(Be),at=0;at<Be;at++)_e[at]=arguments[at+2];ce.children=_e}return D(H.type,Ee,void 0,void 0,Fe,ce)},it.createContext=function(H){return H={$$typeof:a,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:r,_context:H},H},it.createElement=function(H,le,xe){var ce,Ee={},Fe=null;if(le!=null)for(ce in le.key!==void 0&&(Fe=""+le.key),le)W.call(le,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(Ee[ce]=le[ce]);var Be=arguments.length-2;if(Be===1)Ee.children=xe;else if(1<Be){for(var _e=Array(Be),at=0;at<Be;at++)_e[at]=arguments[at+2];Ee.children=_e}if(H&&H.defaultProps)for(ce in Be=H.defaultProps,Be)Ee[ce]===void 0&&(Ee[ce]=Be[ce]);return D(H,Fe,void 0,void 0,null,Ee)},it.createRef=function(){return{current:null}},it.forwardRef=function(H){return{$$typeof:c,render:H}},it.isValidElement=R,it.lazy=function(H){return{$$typeof:g,_payload:{_status:-1,_result:H},_init:de}},it.memo=function(H,le){return{$$typeof:h,type:H,compare:le===void 0?null:le}},it.startTransition=function(H){var le=j.T,xe={};j.T=xe;try{var ce=H(),Ee=j.S;Ee!==null&&Ee(xe,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(Ie,ie)}catch(Fe){ie(Fe)}finally{j.T=le}},it.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},it.use=function(H){return j.H.use(H)},it.useActionState=function(H,le,xe){return j.H.useActionState(H,le,xe)},it.useCallback=function(H,le){return j.H.useCallback(H,le)},it.useContext=function(H){return j.H.useContext(H)},it.useDebugValue=function(){},it.useDeferredValue=function(H,le){return j.H.useDeferredValue(H,le)},it.useEffect=function(H,le,xe){var ce=j.H;if(typeof xe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ce.useEffect(H,le)},it.useId=function(){return j.H.useId()},it.useImperativeHandle=function(H,le,xe){return j.H.useImperativeHandle(H,le,xe)},it.useInsertionEffect=function(H,le){return j.H.useInsertionEffect(H,le)},it.useLayoutEffect=function(H,le){return j.H.useLayoutEffect(H,le)},it.useMemo=function(H,le){return j.H.useMemo(H,le)},it.useOptimistic=function(H,le){return j.H.useOptimistic(H,le)},it.useReducer=function(H,le,xe){return j.H.useReducer(H,le,xe)},it.useRef=function(H){return j.H.useRef(H)},it.useState=function(H){return j.H.useState(H)},it.useSyncExternalStore=function(H,le,xe){return j.H.useSyncExternalStore(H,le,xe)},it.useTransition=function(){return j.H.useTransition()},it.version="19.1.1",it}var rC;function hT(){return rC||(rC=1,Hv.exports=H3()),Hv.exports}var K=hT();const yu=E2(K);var $v={exports:{}},gh={},Kv={exports:{}},Wv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oC;function $3(){return oC||(oC=1,(function(t){function e(ne,de){var ie=ne.length;ne.push(de);e:for(;0<ie;){var Ie=ie-1>>>1,H=ne[Ie];if(0<s(H,de))ne[Ie]=de,ne[ie]=H,ie=Ie;else break e}}function n(ne){return ne.length===0?null:ne[0]}function i(ne){if(ne.length===0)return null;var de=ne[0],ie=ne.pop();if(ie!==de){ne[0]=ie;e:for(var Ie=0,H=ne.length,le=H>>>1;Ie<le;){var xe=2*(Ie+1)-1,ce=ne[xe],Ee=xe+1,Fe=ne[Ee];if(0>s(ce,ie))Ee<H&&0>s(Fe,ce)?(ne[Ie]=Fe,ne[Ee]=ie,Ie=Ee):(ne[Ie]=ce,ne[xe]=ie,Ie=xe);else if(Ee<H&&0>s(Fe,ie))ne[Ie]=Fe,ne[Ee]=ie,Ie=Ee;else break e}}return de}function s(ne,de){var ie=ne.sortIndex-de.sortIndex;return ie!==0?ie:ne.id-de.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var u=[],h=[],g=1,x=null,T=3,b=!1,S=!1,P=!1,M=!1,V=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate!="undefined"?setImmediate:null;function z(ne){for(var de=n(h);de!==null;){if(de.callback===null)i(h);else if(de.startTime<=ne)i(h),de.sortIndex=de.expirationTime,e(u,de);else break;de=n(h)}}function j(ne){if(P=!1,z(ne),!S)if(n(u)!==null)S=!0,W||(W=!0,G());else{var de=n(h);de!==null&&Ae(j,de.startTime-ne)}}var W=!1,D=-1,C=5,R=-1;function L(){return M?!0:!(t.unstable_now()-R<C)}function F(){if(M=!1,W){var ne=t.unstable_now();R=ne;var de=!0;try{e:{S=!1,P&&(P=!1,q(D),D=-1),b=!0;var ie=T;try{t:{for(z(ne),x=n(u);x!==null&&!(x.expirationTime>ne&&L());){var Ie=x.callback;if(typeof Ie=="function"){x.callback=null,T=x.priorityLevel;var H=Ie(x.expirationTime<=ne);if(ne=t.unstable_now(),typeof H=="function"){x.callback=H,z(ne),de=!0;break t}x===n(u)&&i(u),z(ne)}else i(u);x=n(u)}if(x!==null)de=!0;else{var le=n(h);le!==null&&Ae(j,le.startTime-ne),de=!1}}break e}finally{x=null,T=ie,b=!1}de=void 0}}finally{de?G():W=!1}}}var G;if(typeof O=="function")G=function(){O(F)};else if(typeof MessageChannel!="undefined"){var B=new MessageChannel,ye=B.port2;B.port1.onmessage=F,G=function(){ye.postMessage(null)}}else G=function(){V(F,0)};function Ae(ne,de){D=V(function(){ne(t.unstable_now())},de)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ne){ne.callback=null},t.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<ne?Math.floor(1e3/ne):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_next=function(ne){switch(T){case 1:case 2:case 3:var de=3;break;default:de=T}var ie=T;T=de;try{return ne()}finally{T=ie}},t.unstable_requestPaint=function(){M=!0},t.unstable_runWithPriority=function(ne,de){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var ie=T;T=ne;try{return de()}finally{T=ie}},t.unstable_scheduleCallback=function(ne,de,ie){var Ie=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?Ie+ie:Ie):ie=Ie,ne){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=ie+H,ne={id:g++,callback:de,priorityLevel:ne,startTime:ie,expirationTime:H,sortIndex:-1},ie>Ie?(ne.sortIndex=ie,e(h,ne),n(u)===null&&ne===n(h)&&(P?(q(D),D=-1):P=!0,Ae(j,ie-Ie))):(ne.sortIndex=H,e(u,ne),S||b||(S=!0,W||(W=!0,G()))),ne},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(ne){var de=T;return function(){var ie=T;T=de;try{return ne.apply(this,arguments)}finally{T=ie}}}})(Wv)),Wv}var aC;function K3(){return aC||(aC=1,Kv.exports=$3()),Kv.exports}var Yv={exports:{}},ei={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lC;function W3(){if(lC)return ei;lC=1;var t=hT();function e(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function r(u,h,g){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:x==null?null:""+x,children:u,containerInfo:h,implementation:g}}var a=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,h){if(u==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return ei.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ei.createPortal=function(u,h){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return r(u,h,null,g)},ei.flushSync=function(u){var h=a.T,g=i.p;try{if(a.T=null,i.p=2,u)return u()}finally{a.T=h,i.p=g,i.d.f()}},ei.preconnect=function(u,h){typeof u=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(u,h))},ei.prefetchDNS=function(u){typeof u=="string"&&i.d.D(u)},ei.preinit=function(u,h){if(typeof u=="string"&&h&&typeof h.as=="string"){var g=h.as,x=c(g,h.crossOrigin),T=typeof h.integrity=="string"?h.integrity:void 0,b=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;g==="style"?i.d.S(u,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:x,integrity:T,fetchPriority:b}):g==="script"&&i.d.X(u,{crossOrigin:x,integrity:T,fetchPriority:b,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},ei.preinitModule=function(u,h){if(typeof u=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var g=c(h.as,h.crossOrigin);i.d.M(u,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(u)},ei.preload=function(u,h){if(typeof u=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var g=h.as,x=c(g,h.crossOrigin);i.d.L(u,g,{crossOrigin:x,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},ei.preloadModule=function(u,h){if(typeof u=="string")if(h){var g=c(h.as,h.crossOrigin);i.d.m(u,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(u)},ei.requestFormReset=function(u){i.d.r(u)},ei.unstable_batchedUpdates=function(u,h){return u(h)},ei.useFormState=function(u,h,g){return a.H.useFormState(u,h,g)},ei.useFormStatus=function(){return a.H.useHostTransitionStatus()},ei.version="19.1.1",ei}var cC;function Y3(){if(cC)return Yv.exports;cC=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Yv.exports=W3(),Yv.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uC;function J3(){if(uC)return gh;uC=1;var t=K3(),e=hT(),n=Y3();function i(o){var l="https://react.dev/errors/"+o;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function r(o){var l=o,d=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(d=l.return),o=l.return;while(o)}return l.tag===3?d:null}function a(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function c(o){if(r(o)!==o)throw Error(i(188))}function u(o){var l=o.alternate;if(!l){if(l=r(o),l===null)throw Error(i(188));return l!==o?null:o}for(var d=o,p=l;;){var _=d.return;if(_===null)break;var w=_.alternate;if(w===null){if(p=_.return,p!==null){d=p;continue}break}if(_.child===w.child){for(w=_.child;w;){if(w===d)return c(_),o;if(w===p)return c(_),l;w=w.sibling}throw Error(i(188))}if(d.return!==p.return)d=_,p=w;else{for(var N=!1,k=_.child;k;){if(k===d){N=!0,d=_,p=w;break}if(k===p){N=!0,p=_,d=w;break}k=k.sibling}if(!N){for(k=w.child;k;){if(k===d){N=!0,d=w,p=_;break}if(k===p){N=!0,p=w,d=_;break}k=k.sibling}if(!N)throw Error(i(189))}}if(d.alternate!==p)throw Error(i(190))}if(d.tag!==3)throw Error(i(188));return d.stateNode.current===d?o:l}function h(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o;for(o=o.child;o!==null;){if(l=h(o),l!==null)return l;o=o.sibling}return null}var g=Object.assign,x=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),q=Symbol.for("react.consumer"),O=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function G(o){return o===null||typeof o!="object"?null:(o=F&&o[F]||o["@@iterator"],typeof o=="function"?o:null)}var B=Symbol.for("react.client.reference");function ye(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===B?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case S:return"Fragment";case M:return"Profiler";case P:return"StrictMode";case j:return"Suspense";case W:return"SuspenseList";case R:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case b:return"Portal";case O:return(o.displayName||"Context")+".Provider";case q:return(o._context.displayName||"Context")+".Consumer";case z:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case D:return l=o.displayName||null,l!==null?l:ye(o.type)||"Memo";case C:l=o._payload,o=o._init;try{return ye(o(l))}catch(d){}}return null}var Ae=Array.isArray,ne=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},Ie=[],H=-1;function le(o){return{current:o}}function xe(o){0>H||(o.current=Ie[H],Ie[H]=null,H--)}function ce(o,l){H++,Ie[H]=o.current,o.current=l}var Ee=le(null),Fe=le(null),Be=le(null),_e=le(null);function at(o,l){switch(ce(Be,l),ce(Fe,o),ce(Ee,null),l.nodeType){case 9:case 11:o=(o=l.documentElement)&&(o=o.namespaceURI)?CA(o):0;break;default:if(o=l.tagName,l=l.namespaceURI)l=CA(l),o=IA(l,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}xe(Ee),ce(Ee,o)}function Ct(){xe(Ee),xe(Fe),xe(Be)}function Oe(o){o.memoizedState!==null&&ce(_e,o);var l=Ee.current,d=IA(l,o.type);l!==d&&(ce(Fe,o),ce(Ee,d))}function nt(o){Fe.current===o&&(xe(Ee),xe(Fe)),_e.current===o&&(xe(_e),uh._currentValue=ie)}var et=Object.prototype.hasOwnProperty,li=t.unstable_scheduleCallback,Ti=t.unstable_cancelCallback,fs=t.unstable_shouldYield,ur=t.unstable_requestPaint,ci=t.unstable_now,dd=t.unstable_getCurrentPriorityLevel,Ta=t.unstable_ImmediatePriority,Ki=t.unstable_UserBlockingPriority,Gt=t.unstable_NormalPriority,zl=t.unstable_LowPriority,no=t.unstable_IdlePriority,wa=t.log,Hl=t.unstable_setDisableYieldValue,Bt=null,wt=null;function Pn(o){if(typeof wa=="function"&&Hl(o),wt&&typeof wt.setStrictMode=="function")try{wt.setStrictMode(Bt,o)}catch(l){}}var Dn=Math.clz32?Math.clz32:Is,io=Math.log,hd=Math.LN2;function Is(o){return o>>>=0,o===0?32:31-(io(o)/hd|0)|0}var dr=256,Me=4194304;function Ge(o){var l=o&42;if(l!==0)return l;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Ke(o,l,d){var p=o.pendingLanes;if(p===0)return 0;var _=0,w=o.suspendedLanes,N=o.pingedLanes;o=o.warmLanes;var k=p&134217727;return k!==0?(p=k&~w,p!==0?_=Ge(p):(N&=k,N!==0?_=Ge(N):d||(d=k&~o,d!==0&&(_=Ge(d))))):(k=p&~w,k!==0?_=Ge(k):N!==0?_=Ge(N):d||(d=p&~o,d!==0&&(_=Ge(d)))),_===0?0:l!==0&&l!==_&&(l&w)===0&&(w=_&-_,d=l&-l,w>=d||w===32&&(d&4194048)!==0)?l:_}function He(o,l){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&l)===0}function Ye(o,l){switch(o){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ln(){var o=dr;return dr<<=1,(dr&4194048)===0&&(dr=256),o}function Mi(){var o=Me;return Me<<=1,(Me&62914560)===0&&(Me=4194304),o}function Pi(o){for(var l=[],d=0;31>d;d++)l.push(o);return l}function hr(o,l){o.pendingLanes|=l,l!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function fd(o,l,d,p,_,w){var N=o.pendingLanes;o.pendingLanes=d,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=d,o.entangledLanes&=d,o.errorRecoveryDisabledLanes&=d,o.shellSuspendCounter=0;var k=o.entanglements,$=o.expirationTimes,te=o.hiddenUpdates;for(d=N&~d;0<d;){var ue=31-Dn(d),fe=1<<ue;k[ue]=0,$[ue]=-1;var se=te[ue];if(se!==null)for(te[ue]=null,ue=0;ue<se.length;ue++){var re=se[ue];re!==null&&(re.lane&=-536870913)}d&=~fe}p!==0&&Rs(o,p,0),w!==0&&_===0&&o.tag!==0&&(o.suspendedLanes|=w&~(N&~l))}function Rs(o,l,d){o.pendingLanes|=l,o.suspendedLanes&=~l;var p=31-Dn(l);o.entangledLanes|=l,o.entanglements[p]=o.entanglements[p]|1073741824|d&4194090}function md(o,l){var d=o.entangledLanes|=l;for(o=o.entanglements;d;){var p=31-Dn(d),_=1<<p;_&l|o[p]&l&&(o[p]|=l),d&=~_}}function so(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function $l(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function ro(){var o=de.p;return o!==0?o:(o=window.event,o===void 0?32:KA(o.type))}function um(o,l){var d=de.p;try{return de.p=o,l()}finally{de.p=d}}var zt=Math.random().toString(36).slice(2),En="__reactFiber$"+zt,gn="__reactProps$"+zt,Wi="__reactContainer$"+zt,pd="__reactEvents$"+zt,$y="__reactListeners$"+zt,oo="__reactHandles$"+zt,dm="__reactResources$"+zt,ba="__reactMarker$"+zt;function ao(o){delete o[En],delete o[gn],delete o[pd],delete o[$y],delete o[oo]}function fr(o){var l=o[En];if(l)return l;for(var d=o.parentNode;d;){if(l=d[Wi]||d[En]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(o=PA(o);o!==null;){if(d=o[En])return d;o=PA(o)}return l}o=d,d=o.parentNode}return null}function Ns(o){if(o=o[En]||o[Wi]){var l=o.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return o}return null}function Ms(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o.stateNode;throw Error(i(33))}function ui(o){var l=o[dm];return l||(l=o[dm]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function cn(o){o[ba]=!0}var gd=new Set,Kl={};function ms(o,l){mr(o,l),mr(o+"Capture",l)}function mr(o,l){for(Kl[o]=l,o=0;o<l.length;o++)gd.add(l[o])}var hm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fm={},Ea={};function mm(o){return et.call(Ea,o)?!0:et.call(fm,o)?!1:hm.test(o)?Ea[o]=!0:(fm[o]=!0,!1)}function lo(o,l,d){if(mm(l))if(d===null)o.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":o.removeAttribute(l);return;case"boolean":var p=l.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){o.removeAttribute(l);return}}o.setAttribute(l,""+d)}}function Ps(o,l,d){if(d===null)o.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttribute(l,""+d)}}function jn(o,l,d,p){if(p===null)o.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(d);return}o.setAttributeNS(l,d,""+p)}}var Sa,pm;function pr(o){if(Sa===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);Sa=l&&l[1]||"",pm=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Sa+o+pm}var Wl=!1;function Yl(o,l){if(!o||Wl)return"";Wl=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(l){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(re){var se=re}Reflect.construct(o,[],fe)}else{try{fe.call()}catch(re){se=re}o.call(fe.prototype)}}else{try{throw Error()}catch(re){se=re}(fe=o())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(re){if(re&&se&&typeof re.stack=="string")return[re.stack,se.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=p.DetermineComponentFrameRoot(),N=w[0],k=w[1];if(N&&k){var $=N.split(`
`),te=k.split(`
`);for(_=p=0;p<$.length&&!$[p].includes("DetermineComponentFrameRoot");)p++;for(;_<te.length&&!te[_].includes("DetermineComponentFrameRoot");)_++;if(p===$.length||_===te.length)for(p=$.length-1,_=te.length-1;1<=p&&0<=_&&$[p]!==te[_];)_--;for(;1<=p&&0<=_;p--,_--)if($[p]!==te[_]){if(p!==1||_!==1)do if(p--,_--,0>_||$[p]!==te[_]){var ue=`
`+$[p].replace(" at new "," at ");return o.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",o.displayName)),ue}while(1<=p&&0<=_);break}}}finally{Wl=!1,Error.prepareStackTrace=d}return(d=o?o.displayName||o.name:"")?pr(d):""}function yd(o){switch(o.tag){case 26:case 27:case 5:return pr(o.type);case 16:return pr("Lazy");case 13:return pr("Suspense");case 19:return pr("SuspenseList");case 0:case 15:return Yl(o.type,!1);case 11:return Yl(o.type.render,!1);case 1:return Yl(o.type,!0);case 31:return pr("Activity");default:return""}}function Jl(o){try{var l="";do l+=yd(o),o=o.return;while(o);return l}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function di(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function vd(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Ky(o){var l=vd(o)?"checked":"value",d=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),p=""+o[l];if(!o.hasOwnProperty(l)&&typeof d!="undefined"&&typeof d.get=="function"&&typeof d.set=="function"){var _=d.get,w=d.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return _.call(this)},set:function(N){p=""+N,w.call(this,N)}}),Object.defineProperty(o,l,{enumerable:d.enumerable}),{getValue:function(){return p},setValue:function(N){p=""+N},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function Ql(o){o._valueTracker||(o._valueTracker=Ky(o))}function xd(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var d=l.getValue(),p="";return o&&(p=vd(o)?o.checked?"true":"false":o.value),o=p,o!==d?(l.setValue(o),!0):!1}function Aa(o){if(o=o||(typeof document!="undefined"?document:void 0),typeof o=="undefined")return null;try{return o.activeElement||o.body}catch(l){return o.body}}var Wy=/[\n"\\]/g;function yn(o){return o.replace(Wy,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Di(o,l,d,p,_,w,N,k){o.name="",N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?o.type=N:o.removeAttribute("type"),l!=null?N==="number"?(l===0&&o.value===""||o.value!=l)&&(o.value=""+di(l)):o.value!==""+di(l)&&(o.value=""+di(l)):N!=="submit"&&N!=="reset"||o.removeAttribute("value"),l!=null?co(o,N,di(l)):d!=null?co(o,N,di(d)):p!=null&&o.removeAttribute("value"),_==null&&w!=null&&(o.defaultChecked=!!w),_!=null&&(o.checked=_&&typeof _!="function"&&typeof _!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?o.name=""+di(k):o.removeAttribute("name")}function Ca(o,l,d,p,_,w,N,k){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(o.type=w),l!=null||d!=null){if(!(w!=="submit"&&w!=="reset"||l!=null))return;d=d!=null?""+di(d):"",l=l!=null?""+di(l):d,k||l===o.value||(o.value=l),o.defaultValue=l}p=p!=null?p:_,p=typeof p!="function"&&typeof p!="symbol"&&!!p,o.checked=k?o.checked:!!p,o.defaultChecked=!!p,N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(o.name=N)}function co(o,l,d){l==="number"&&Aa(o.ownerDocument)===o||o.defaultValue===""+d||(o.defaultValue=""+d)}function gr(o,l,d,p){if(o=o.options,l){l={};for(var _=0;_<d.length;_++)l["$"+d[_]]=!0;for(d=0;d<o.length;d++)_=l.hasOwnProperty("$"+o[d].value),o[d].selected!==_&&(o[d].selected=_),_&&p&&(o[d].defaultSelected=!0)}else{for(d=""+di(d),l=null,_=0;_<o.length;_++){if(o[_].value===d){o[_].selected=!0,p&&(o[_].defaultSelected=!0);return}l!==null||o[_].disabled||(l=o[_])}l!==null&&(l.selected=!0)}}function Pt(o,l,d){if(l!=null&&(l=""+di(l),l!==o.value&&(o.value=l),d==null)){o.defaultValue!==l&&(o.defaultValue=l);return}o.defaultValue=d!=null?""+di(d):""}function Ia(o,l,d,p){if(l==null){if(p!=null){if(d!=null)throw Error(i(92));if(Ae(p)){if(1<p.length)throw Error(i(93));p=p[0]}d=p}d==null&&(d=""),l=d}d=di(l),o.defaultValue=d,p=o.textContent,p===d&&p!==""&&p!==null&&(o.value=p)}function Yi(o,l){if(l){var d=o.firstChild;if(d&&d===o.lastChild&&d.nodeType===3){d.nodeValue=l;return}}o.textContent=l}var Ra=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gm(o,l,d){var p=l.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?p?o.setProperty(l,""):l==="float"?o.cssFloat="":o[l]="":p?o.setProperty(l,d):typeof d!="number"||d===0||Ra.has(l)?l==="float"?o.cssFloat=d:o[l]=(""+d).trim():o[l]=d+"px"}function _d(o,l,d){if(l!=null&&typeof l!="object")throw Error(i(62));if(o=o.style,d!=null){for(var p in d)!d.hasOwnProperty(p)||l!=null&&l.hasOwnProperty(p)||(p.indexOf("--")===0?o.setProperty(p,""):p==="float"?o.cssFloat="":o[p]="");for(var _ in l)p=l[_],l.hasOwnProperty(_)&&d[_]!==p&&gm(o,_,p)}else for(var w in l)l.hasOwnProperty(w)&&gm(o,w,l[w])}function Td(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Jy=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Xl(o){return Jy.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var yr=null;function Ji(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var vr=null,xr=null;function wd(o){var l=Ns(o);if(l&&(o=l.stateNode)){var d=o[gn]||null;e:switch(o=l.stateNode,l.type){case"input":if(Di(o,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),l=d.name,d.type==="radio"&&l!=null){for(d=o;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+yn(""+l)+'"][type="radio"]'),l=0;l<d.length;l++){var p=d[l];if(p!==o&&p.form===o.form){var _=p[gn]||null;if(!_)throw Error(i(90));Di(p,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(l=0;l<d.length;l++)p=d[l],p.form===o.form&&xd(p)}break e;case"textarea":Pt(o,d.value,d.defaultValue);break e;case"select":l=d.value,l!=null&&gr(o,!!d.multiple,l,!1)}}}var Ds=!1;function ym(o,l,d){if(Ds)return o(l,d);Ds=!0;try{var p=o(l);return p}finally{if(Ds=!1,(vr!==null||xr!==null)&&(up(),vr&&(l=vr,o=xr,xr=vr=null,wd(l),o)))for(l=0;l<o.length;l++)wd(o[l])}}function Na(o,l){var d=o.stateNode;if(d===null)return null;var p=d[gn]||null;if(p===null)return null;d=p[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(o=o.type,p=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!p;break e;default:o=!1}if(o)return null;if(d&&typeof d!="function")throw Error(i(231,l,typeof d));return d}var ps=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Qi=!1;if(ps)try{var Ma={};Object.defineProperty(Ma,"passive",{get:function(){Qi=!0}}),window.addEventListener("test",Ma,Ma),window.removeEventListener("test",Ma,Ma)}catch(o){Qi=!1}var ks=null,uo=null,_r=null;function bd(){if(_r)return _r;var o,l=uo,d=l.length,p,_="value"in ks?ks.value:ks.textContent,w=_.length;for(o=0;o<d&&l[o]===_[o];o++);var N=d-o;for(p=1;p<=N&&l[d-p]===_[w-p];p++);return _r=_.slice(o,1<p?1-p:void 0)}function Vs(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function Ls(){return!0}function Ed(){return!1}function kn(o){function l(d,p,_,w,N){this._reactName=d,this._targetInst=_,this.type=p,this.nativeEvent=w,this.target=N,this.currentTarget=null;for(var k in o)o.hasOwnProperty(k)&&(d=o[k],this[k]=d?d(w):w[k]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Ls:Ed,this.isPropagationStopped=Ed,this}return g(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Ls)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Ls)},persist:function(){},isPersistent:Ls}),l}var St={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zl=kn(St),Pa=g({},St,{view:0,detail:0}),vm=kn(Pa),ec,tc,Us,Da=g({},Pa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:La,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Us&&(Us&&o.type==="mousemove"?(ec=o.screenX-Us.screenX,tc=o.screenY-Us.screenY):tc=ec=0,Us=o),ec)},movementY:function(o){return"movementY"in o?o.movementY:tc}}),Xi=kn(Da),xm=g({},Da,{dataTransfer:0}),Qy=kn(xm),ka=g({},Pa,{relatedTarget:0}),nc=kn(ka),Sd=g({},St,{animationName:0,elapsedTime:0,pseudoElement:0}),ic=kn(Sd),_m=g({},St,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),sc=kn(_m),Xy=g({},St,{data:0}),Ad=kn(Xy),Va={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cd(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=wm[o])?!!l[o]:!1}function La(){return Cd}var bm=g({},Pa,{key:function(o){if(o.key){var l=Va[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=Vs(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Tm[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:La,charCode:function(o){return o.type==="keypress"?Vs(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Vs(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),rc=kn(bm),Em=g({},Da,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Id=kn(Em),Tr=g({},Pa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:La}),Sm=kn(Tr),Am=g({},St,{propertyName:0,elapsedTime:0,pseudoElement:0}),Cm=kn(Am),Im=g({},Da,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),oc=kn(Im),hi=g({},St,{newState:0,oldState:0}),Rm=kn(hi),Nm=[9,13,27,32],Os=ps&&"CompositionEvent"in window,v=null;ps&&"documentMode"in document&&(v=document.documentMode);var E=ps&&"TextEvent"in window&&!v,I=ps&&(!Os||v&&8<v&&11>=v),U=" ",X=!1;function ae(o,l){switch(o){case"keyup":return Nm.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function we(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var mt=!1;function Sn(o,l){switch(o){case"compositionend":return we(l);case"keypress":return l.which!==32?null:(X=!0,U);case"textInput":return o=l.data,o===U&&X?null:o;default:return null}}function pt(o,l){if(mt)return o==="compositionend"||!Os&&ae(o,l)?(o=bd(),_r=uo=ks=null,mt=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return I&&l.locale!=="ko"?null:l.data;default:return null}}var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function An(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!Vn[o.type]:l==="textarea"}function wr(o,l,d,p){vr?xr?xr.push(p):xr=[p]:vr=p,l=gp(l,"onChange"),0<l.length&&(d=new Zl("onChange","change",null,d,p),o.push({event:d,listeners:l}))}var Gn=null,Fs=null;function Rd(o){wA(o,0)}function Mm(o){var l=Ms(o);if(xd(l))return o}function Gb(o,l){if(o==="change")return l}var zb=!1;if(ps){var Zy;if(ps){var e0="oninput"in document;if(!e0){var Hb=document.createElement("div");Hb.setAttribute("oninput","return;"),e0=typeof Hb.oninput=="function"}Zy=e0}else Zy=!1;zb=Zy&&(!document.documentMode||9<document.documentMode)}function $b(){Gn&&(Gn.detachEvent("onpropertychange",Kb),Fs=Gn=null)}function Kb(o){if(o.propertyName==="value"&&Mm(Fs)){var l=[];wr(l,Fs,o,Ji(o)),ym(Rd,l)}}function f4(o,l,d){o==="focusin"?($b(),Gn=l,Fs=d,Gn.attachEvent("onpropertychange",Kb)):o==="focusout"&&$b()}function m4(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Mm(Fs)}function p4(o,l){if(o==="click")return Mm(l)}function g4(o,l){if(o==="input"||o==="change")return Mm(l)}function y4(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var ki=typeof Object.is=="function"?Object.is:y4;function Nd(o,l){if(ki(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var d=Object.keys(o),p=Object.keys(l);if(d.length!==p.length)return!1;for(p=0;p<d.length;p++){var _=d[p];if(!et.call(l,_)||!ki(o[_],l[_]))return!1}return!0}function Wb(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Yb(o,l){var d=Wb(o);o=0;for(var p;d;){if(d.nodeType===3){if(p=o+d.textContent.length,o<=l&&p>=l)return{node:d,offset:l-o};o=p}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Wb(d)}}function Jb(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?Jb(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function Qb(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var l=Aa(o.document);l instanceof o.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch(p){d=!1}if(d)o=l.contentWindow;else break;l=Aa(o.document)}return l}function t0(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}var v4=ps&&"documentMode"in document&&11>=document.documentMode,ac=null,n0=null,Md=null,i0=!1;function Xb(o,l,d){var p=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;i0||ac==null||ac!==Aa(p)||(p=ac,"selectionStart"in p&&t0(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Md&&Nd(Md,p)||(Md=p,p=gp(n0,"onSelect"),0<p.length&&(l=new Zl("onSelect","select",null,l,d),o.push({event:l,listeners:p}),l.target=ac)))}function Ua(o,l){var d={};return d[o.toLowerCase()]=l.toLowerCase(),d["Webkit"+o]="webkit"+l,d["Moz"+o]="moz"+l,d}var lc={animationend:Ua("Animation","AnimationEnd"),animationiteration:Ua("Animation","AnimationIteration"),animationstart:Ua("Animation","AnimationStart"),transitionrun:Ua("Transition","TransitionRun"),transitionstart:Ua("Transition","TransitionStart"),transitioncancel:Ua("Transition","TransitionCancel"),transitionend:Ua("Transition","TransitionEnd")},s0={},Zb={};ps&&(Zb=document.createElement("div").style,"AnimationEvent"in window||(delete lc.animationend.animation,delete lc.animationiteration.animation,delete lc.animationstart.animation),"TransitionEvent"in window||delete lc.transitionend.transition);function Oa(o){if(s0[o])return s0[o];if(!lc[o])return o;var l=lc[o],d;for(d in l)if(l.hasOwnProperty(d)&&d in Zb)return s0[o]=l[d];return o}var eE=Oa("animationend"),tE=Oa("animationiteration"),nE=Oa("animationstart"),x4=Oa("transitionrun"),_4=Oa("transitionstart"),T4=Oa("transitioncancel"),iE=Oa("transitionend"),sE=new Map,r0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");r0.push("scrollEnd");function gs(o,l){sE.set(o,l),ms(l,[o])}var rE=new WeakMap;function Zi(o,l){if(typeof o=="object"&&o!==null){var d=rE.get(o);return d!==void 0?d:(l={value:o,source:l,stack:Jl(l)},rE.set(o,l),l)}return{value:o,source:l,stack:Jl(l)}}var es=[],cc=0,o0=0;function Pm(){for(var o=cc,l=o0=cc=0;l<o;){var d=es[l];es[l++]=null;var p=es[l];es[l++]=null;var _=es[l];es[l++]=null;var w=es[l];if(es[l++]=null,p!==null&&_!==null){var N=p.pending;N===null?_.next=_:(_.next=N.next,N.next=_),p.pending=_}w!==0&&oE(d,_,w)}}function Dm(o,l,d,p){es[cc++]=o,es[cc++]=l,es[cc++]=d,es[cc++]=p,o0|=p,o.lanes|=p,o=o.alternate,o!==null&&(o.lanes|=p)}function a0(o,l,d,p){return Dm(o,l,d,p),km(o)}function uc(o,l){return Dm(o,null,null,l),km(o)}function oE(o,l,d){o.lanes|=d;var p=o.alternate;p!==null&&(p.lanes|=d);for(var _=!1,w=o.return;w!==null;)w.childLanes|=d,p=w.alternate,p!==null&&(p.childLanes|=d),w.tag===22&&(o=w.stateNode,o===null||o._visibility&1||(_=!0)),o=w,w=w.return;return o.tag===3?(w=o.stateNode,_&&l!==null&&(_=31-Dn(d),o=w.hiddenUpdates,p=o[_],p===null?o[_]=[l]:p.push(l),l.lane=d|536870912),w):null}function km(o){if(50<nh)throw nh=0,fv=null,Error(i(185));for(var l=o.return;l!==null;)o=l,l=o.return;return o.tag===3?o.stateNode:null}var dc={};function w4(o,l,d,p){this.tag=o,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vi(o,l,d,p){return new w4(o,l,d,p)}function l0(o){return o=o.prototype,!(!o||!o.isReactComponent)}function br(o,l){var d=o.alternate;return d===null?(d=Vi(o.tag,l,o.key,o.mode),d.elementType=o.elementType,d.type=o.type,d.stateNode=o.stateNode,d.alternate=o,o.alternate=d):(d.pendingProps=l,d.type=o.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=o.flags&65011712,d.childLanes=o.childLanes,d.lanes=o.lanes,d.child=o.child,d.memoizedProps=o.memoizedProps,d.memoizedState=o.memoizedState,d.updateQueue=o.updateQueue,l=o.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=o.sibling,d.index=o.index,d.ref=o.ref,d.refCleanup=o.refCleanup,d}function aE(o,l){o.flags&=65011714;var d=o.alternate;return d===null?(o.childLanes=0,o.lanes=l,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=d.childLanes,o.lanes=d.lanes,o.child=d.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=d.memoizedProps,o.memoizedState=d.memoizedState,o.updateQueue=d.updateQueue,o.type=d.type,l=d.dependencies,o.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),o}function Vm(o,l,d,p,_,w){var N=0;if(p=o,typeof o=="function")l0(o)&&(N=1);else if(typeof o=="string")N=E3(o,d,Ee.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case R:return o=Vi(31,d,l,_),o.elementType=R,o.lanes=w,o;case S:return Fa(d.children,_,w,l);case P:N=8,_|=24;break;case M:return o=Vi(12,d,l,_|2),o.elementType=M,o.lanes=w,o;case j:return o=Vi(13,d,l,_),o.elementType=j,o.lanes=w,o;case W:return o=Vi(19,d,l,_),o.elementType=W,o.lanes=w,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case V:case O:N=10;break e;case q:N=9;break e;case z:N=11;break e;case D:N=14;break e;case C:N=16,p=null;break e}N=29,d=Error(i(130,o===null?"null":typeof o,"")),p=null}return l=Vi(N,d,l,_),l.elementType=o,l.type=p,l.lanes=w,l}function Fa(o,l,d,p){return o=Vi(7,o,p,l),o.lanes=d,o}function c0(o,l,d){return o=Vi(6,o,null,l),o.lanes=d,o}function u0(o,l,d){return l=Vi(4,o.children!==null?o.children:[],o.key,l),l.lanes=d,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}var hc=[],fc=0,Lm=null,Um=0,ts=[],ns=0,Ba=null,Er=1,Sr="";function qa(o,l){hc[fc++]=Um,hc[fc++]=Lm,Lm=o,Um=l}function lE(o,l,d){ts[ns++]=Er,ts[ns++]=Sr,ts[ns++]=Ba,Ba=o;var p=Er;o=Sr;var _=32-Dn(p)-1;p&=~(1<<_),d+=1;var w=32-Dn(l)+_;if(30<w){var N=_-_%5;w=(p&(1<<N)-1).toString(32),p>>=N,_-=N,Er=1<<32-Dn(l)+_|d<<_|p,Sr=w+o}else Er=1<<w|d<<_|p,Sr=o}function d0(o){o.return!==null&&(qa(o,1),lE(o,1,0))}function h0(o){for(;o===Lm;)Lm=hc[--fc],hc[fc]=null,Um=hc[--fc],hc[fc]=null;for(;o===Ba;)Ba=ts[--ns],ts[ns]=null,Sr=ts[--ns],ts[ns]=null,Er=ts[--ns],ts[ns]=null}var fi=null,tn=null,bt=!1,ja=null,Bs=!1,f0=Error(i(519));function Ga(o){var l=Error(i(418,""));throw kd(Zi(l,o)),f0}function cE(o){var l=o.stateNode,d=o.type,p=o.memoizedProps;switch(l[En]=o,l[gn]=p,d){case"dialog":ct("cancel",l),ct("close",l);break;case"iframe":case"object":case"embed":ct("load",l);break;case"video":case"audio":for(d=0;d<sh.length;d++)ct(sh[d],l);break;case"source":ct("error",l);break;case"img":case"image":case"link":ct("error",l),ct("load",l);break;case"details":ct("toggle",l);break;case"input":ct("invalid",l),Ca(l,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0),Ql(l);break;case"select":ct("invalid",l);break;case"textarea":ct("invalid",l),Ia(l,p.value,p.defaultValue,p.children),Ql(l)}d=p.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||l.textContent===""+d||p.suppressHydrationWarning===!0||AA(l.textContent,d)?(p.popover!=null&&(ct("beforetoggle",l),ct("toggle",l)),p.onScroll!=null&&ct("scroll",l),p.onScrollEnd!=null&&ct("scrollend",l),p.onClick!=null&&(l.onclick=yp),l=!0):l=!1,l||Ga(o)}function uE(o){for(fi=o.return;fi;)switch(fi.tag){case 5:case 13:Bs=!1;return;case 27:case 3:Bs=!0;return;default:fi=fi.return}}function Pd(o){if(o!==fi)return!1;if(!bt)return uE(o),bt=!0,!1;var l=o.tag,d;if((d=l!==3&&l!==27)&&((d=l===5)&&(d=o.type,d=!(d!=="form"&&d!=="button")||Rv(o.type,o.memoizedProps)),d=!d),d&&tn&&Ga(o),uE(o),l===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8)if(d=o.data,d==="/$"){if(l===0){tn=vs(o.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++;o=o.nextSibling}tn=null}}else l===27?(l=tn,Co(o.type)?(o=Dv,Dv=null,tn=o):tn=l):tn=fi?vs(o.stateNode.nextSibling):null;return!0}function Dd(){tn=fi=null,bt=!1}function dE(){var o=ja;return o!==null&&(Ei===null?Ei=o:Ei.push.apply(Ei,o),ja=null),o}function kd(o){ja===null?ja=[o]:ja.push(o)}var m0=le(null),za=null,Ar=null;function ho(o,l,d){ce(m0,l._currentValue),l._currentValue=d}function Cr(o){o._currentValue=m0.current,xe(m0)}function p0(o,l,d){for(;o!==null;){var p=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,p!==null&&(p.childLanes|=l)):p!==null&&(p.childLanes&l)!==l&&(p.childLanes|=l),o===d)break;o=o.return}}function g0(o,l,d,p){var _=o.child;for(_!==null&&(_.return=o);_!==null;){var w=_.dependencies;if(w!==null){var N=_.child;w=w.firstContext;e:for(;w!==null;){var k=w;w=_;for(var $=0;$<l.length;$++)if(k.context===l[$]){w.lanes|=d,k=w.alternate,k!==null&&(k.lanes|=d),p0(w.return,d,o),p||(N=null);break e}w=k.next}}else if(_.tag===18){if(N=_.return,N===null)throw Error(i(341));N.lanes|=d,w=N.alternate,w!==null&&(w.lanes|=d),p0(N,d,o),N=null}else N=_.child;if(N!==null)N.return=_;else for(N=_;N!==null;){if(N===o){N=null;break}if(_=N.sibling,_!==null){_.return=N.return,N=_;break}N=N.return}_=N}}function Vd(o,l,d,p){o=null;for(var _=l,w=!1;_!==null;){if(!w){if((_.flags&524288)!==0)w=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var N=_.alternate;if(N===null)throw Error(i(387));if(N=N.memoizedProps,N!==null){var k=_.type;ki(_.pendingProps.value,N.value)||(o!==null?o.push(k):o=[k])}}else if(_===_e.current){if(N=_.alternate,N===null)throw Error(i(387));N.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(o!==null?o.push(uh):o=[uh])}_=_.return}o!==null&&g0(l,o,d,p),l.flags|=262144}function Om(o){for(o=o.firstContext;o!==null;){if(!ki(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Ha(o){za=o,Ar=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Zn(o){return hE(za,o)}function Fm(o,l){return za===null&&Ha(o),hE(o,l)}function hE(o,l){var d=l._currentValue;if(l={context:l,memoizedValue:d,next:null},Ar===null){if(o===null)throw Error(i(308));Ar=l,o.dependencies={lanes:0,firstContext:l},o.flags|=524288}else Ar=Ar.next=l;return d}var b4=typeof AbortController!="undefined"?AbortController:function(){var o=[],l=this.signal={aborted:!1,addEventListener:function(d,p){o.push(p)}};this.abort=function(){l.aborted=!0,o.forEach(function(d){return d()})}},E4=t.unstable_scheduleCallback,S4=t.unstable_NormalPriority,Cn={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function y0(){return{controller:new b4,data:new Map,refCount:0}}function Ld(o){o.refCount--,o.refCount===0&&E4(S4,function(){o.controller.abort()})}var Ud=null,v0=0,mc=0,pc=null;function A4(o,l){if(Ud===null){var d=Ud=[];v0=0,mc=_v(),pc={status:"pending",value:void 0,then:function(p){d.push(p)}}}return v0++,l.then(fE,fE),l}function fE(){if(--v0===0&&Ud!==null){pc!==null&&(pc.status="fulfilled");var o=Ud;Ud=null,mc=0,pc=null;for(var l=0;l<o.length;l++)(0,o[l])()}}function C4(o,l){var d=[],p={status:"pending",value:null,reason:null,then:function(_){d.push(_)}};return o.then(function(){p.status="fulfilled",p.value=l;for(var _=0;_<d.length;_++)(0,d[_])(l)},function(_){for(p.status="rejected",p.reason=_,_=0;_<d.length;_++)(0,d[_])(void 0)}),p}var mE=ne.S;ne.S=function(o,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&A4(o,l),mE!==null&&mE(o,l)};var $a=le(null);function x0(){var o=$a.current;return o!==null?o:Ut.pooledCache}function Bm(o,l){l===null?ce($a,$a.current):ce($a,l.pool)}function pE(){var o=x0();return o===null?null:{parent:Cn._currentValue,pool:o}}var Od=Error(i(460)),gE=Error(i(474)),qm=Error(i(542)),_0={then:function(){}};function yE(o){return o=o.status,o==="fulfilled"||o==="rejected"}function jm(){}function vE(o,l,d){switch(d=o[d],d===void 0?o.push(l):d!==l&&(l.then(jm,jm),l=d),l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,_E(o),o;default:if(typeof l.status=="string")l.then(jm,jm);else{if(o=Ut,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=l,o.status="pending",o.then(function(p){if(l.status==="pending"){var _=l;_.status="fulfilled",_.value=p}},function(p){if(l.status==="pending"){var _=l;_.status="rejected",_.reason=p}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,_E(o),o}throw Fd=l,Od}}var Fd=null;function xE(){if(Fd===null)throw Error(i(459));var o=Fd;return Fd=null,o}function _E(o){if(o===Od||o===qm)throw Error(i(483))}var fo=!1;function T0(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function w0(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function mo(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function po(o,l,d){var p=o.updateQueue;if(p===null)return null;if(p=p.shared,(It&2)!==0){var _=p.pending;return _===null?l.next=l:(l.next=_.next,_.next=l),p.pending=l,l=km(o),oE(o,null,d),l}return Dm(o,p,l,d),km(o)}function Bd(o,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194048)!==0)){var p=l.lanes;p&=o.pendingLanes,d|=p,l.lanes=d,md(o,d)}}function b0(o,l){var d=o.updateQueue,p=o.alternate;if(p!==null&&(p=p.updateQueue,d===p)){var _=null,w=null;if(d=d.firstBaseUpdate,d!==null){do{var N={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};w===null?_=w=N:w=w.next=N,d=d.next}while(d!==null);w===null?_=w=l:w=w.next=l}else _=w=l;d={baseState:p.baseState,firstBaseUpdate:_,lastBaseUpdate:w,shared:p.shared,callbacks:p.callbacks},o.updateQueue=d;return}o=d.lastBaseUpdate,o===null?d.firstBaseUpdate=l:o.next=l,d.lastBaseUpdate=l}var E0=!1;function qd(){if(E0){var o=pc;if(o!==null)throw o}}function jd(o,l,d,p){E0=!1;var _=o.updateQueue;fo=!1;var w=_.firstBaseUpdate,N=_.lastBaseUpdate,k=_.shared.pending;if(k!==null){_.shared.pending=null;var $=k,te=$.next;$.next=null,N===null?w=te:N.next=te,N=$;var ue=o.alternate;ue!==null&&(ue=ue.updateQueue,k=ue.lastBaseUpdate,k!==N&&(k===null?ue.firstBaseUpdate=te:k.next=te,ue.lastBaseUpdate=$))}if(w!==null){var fe=_.baseState;N=0,ue=te=$=null,k=w;do{var se=k.lane&-536870913,re=se!==k.lane;if(re?(gt&se)===se:(p&se)===se){se!==0&&se===mc&&(E0=!0),ue!==null&&(ue=ue.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var Je=o,$e=k;se=l;var Vt=d;switch($e.tag){case 1:if(Je=$e.payload,typeof Je=="function"){fe=Je.call(Vt,fe,se);break e}fe=Je;break e;case 3:Je.flags=Je.flags&-65537|128;case 0:if(Je=$e.payload,se=typeof Je=="function"?Je.call(Vt,fe,se):Je,se==null)break e;fe=g({},fe,se);break e;case 2:fo=!0}}se=k.callback,se!==null&&(o.flags|=64,re&&(o.flags|=8192),re=_.callbacks,re===null?_.callbacks=[se]:re.push(se))}else re={lane:se,tag:k.tag,payload:k.payload,callback:k.callback,next:null},ue===null?(te=ue=re,$=fe):ue=ue.next=re,N|=se;if(k=k.next,k===null){if(k=_.shared.pending,k===null)break;re=k,k=re.next,re.next=null,_.lastBaseUpdate=re,_.shared.pending=null}}while(!0);ue===null&&($=fe),_.baseState=$,_.firstBaseUpdate=te,_.lastBaseUpdate=ue,w===null&&(_.shared.lanes=0),bo|=N,o.lanes=N,o.memoizedState=fe}}function TE(o,l){if(typeof o!="function")throw Error(i(191,o));o.call(l)}function wE(o,l){var d=o.callbacks;if(d!==null)for(o.callbacks=null,o=0;o<d.length;o++)TE(d[o],l)}var gc=le(null),Gm=le(0);function bE(o,l){o=kr,ce(Gm,o),ce(gc,l),kr=o|l.baseLanes}function S0(){ce(Gm,kr),ce(gc,gc.current)}function A0(){kr=Gm.current,xe(gc),xe(Gm)}var go=0,st=null,Dt=null,vn=null,zm=!1,yc=!1,Ka=!1,Hm=0,Gd=0,vc=null,I4=0;function un(){throw Error(i(321))}function C0(o,l){if(l===null)return!1;for(var d=0;d<l.length&&d<o.length;d++)if(!ki(o[d],l[d]))return!1;return!0}function I0(o,l,d,p,_,w){return go=w,st=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,ne.H=o===null||o.memoizedState===null?oS:aS,Ka=!1,w=d(p,_),Ka=!1,yc&&(w=SE(l,d,p,_)),EE(o),w}function EE(o){ne.H=Qm;var l=Dt!==null&&Dt.next!==null;if(go=0,vn=Dt=st=null,zm=!1,Gd=0,vc=null,l)throw Error(i(300));o===null||Ln||(o=o.dependencies,o!==null&&Om(o)&&(Ln=!0))}function SE(o,l,d,p){st=o;var _=0;do{if(yc&&(vc=null),Gd=0,yc=!1,25<=_)throw Error(i(301));if(_+=1,vn=Dt=null,o.updateQueue!=null){var w=o.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}ne.H=V4,w=l(d,p)}while(yc);return w}function R4(){var o=ne.H,l=o.useState()[0];return l=typeof l.then=="function"?zd(l):l,o=o.useState()[0],(Dt!==null?Dt.memoizedState:null)!==o&&(st.flags|=1024),l}function R0(){var o=Hm!==0;return Hm=0,o}function N0(o,l,d){l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~d}function M0(o){if(zm){for(o=o.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}zm=!1}go=0,vn=Dt=st=null,yc=!1,Gd=Hm=0,vc=null}function wi(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vn===null?st.memoizedState=vn=o:vn=vn.next=o,vn}function xn(){if(Dt===null){var o=st.alternate;o=o!==null?o.memoizedState:null}else o=Dt.next;var l=vn===null?st.memoizedState:vn.next;if(l!==null)vn=l,Dt=o;else{if(o===null)throw st.alternate===null?Error(i(467)):Error(i(310));Dt=o,o={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},vn===null?st.memoizedState=vn=o:vn=vn.next=o}return vn}function P0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zd(o){var l=Gd;return Gd+=1,vc===null&&(vc=[]),o=vE(vc,o,l),l=st,(vn===null?l.memoizedState:vn.next)===null&&(l=l.alternate,ne.H=l===null||l.memoizedState===null?oS:aS),o}function $m(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return zd(o);if(o.$$typeof===O)return Zn(o)}throw Error(i(438,String(o)))}function D0(o){var l=null,d=st.updateQueue;if(d!==null&&(l=d.memoCache),l==null){var p=st.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(l={data:p.data.map(function(_){return _.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),d===null&&(d=P0(),st.updateQueue=d),d.memoCache=l,d=l.data[l.index],d===void 0)for(d=l.data[l.index]=Array(o),p=0;p<o;p++)d[p]=L;return l.index++,d}function Ir(o,l){return typeof l=="function"?l(o):l}function Km(o){var l=xn();return k0(l,Dt,o)}function k0(o,l,d){var p=o.queue;if(p===null)throw Error(i(311));p.lastRenderedReducer=d;var _=o.baseQueue,w=p.pending;if(w!==null){if(_!==null){var N=_.next;_.next=w.next,w.next=N}l.baseQueue=_=w,p.pending=null}if(w=o.baseState,_===null)o.memoizedState=w;else{l=_.next;var k=N=null,$=null,te=l,ue=!1;do{var fe=te.lane&-536870913;if(fe!==te.lane?(gt&fe)===fe:(go&fe)===fe){var se=te.revertLane;if(se===0)$!==null&&($=$.next={lane:0,revertLane:0,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),fe===mc&&(ue=!0);else if((go&se)===se){te=te.next,se===mc&&(ue=!0);continue}else fe={lane:0,revertLane:te.revertLane,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},$===null?(k=$=fe,N=w):$=$.next=fe,st.lanes|=se,bo|=se;fe=te.action,Ka&&d(w,fe),w=te.hasEagerState?te.eagerState:d(w,fe)}else se={lane:fe,revertLane:te.revertLane,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},$===null?(k=$=se,N=w):$=$.next=se,st.lanes|=fe,bo|=fe;te=te.next}while(te!==null&&te!==l);if($===null?N=w:$.next=k,!ki(w,o.memoizedState)&&(Ln=!0,ue&&(d=pc,d!==null)))throw d;o.memoizedState=w,o.baseState=N,o.baseQueue=$,p.lastRenderedState=w}return _===null&&(p.lanes=0),[o.memoizedState,p.dispatch]}function V0(o){var l=xn(),d=l.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=o;var p=d.dispatch,_=d.pending,w=l.memoizedState;if(_!==null){d.pending=null;var N=_=_.next;do w=o(w,N.action),N=N.next;while(N!==_);ki(w,l.memoizedState)||(Ln=!0),l.memoizedState=w,l.baseQueue===null&&(l.baseState=w),d.lastRenderedState=w}return[w,p]}function AE(o,l,d){var p=st,_=xn(),w=bt;if(w){if(d===void 0)throw Error(i(407));d=d()}else d=l();var N=!ki((Dt||_).memoizedState,d);N&&(_.memoizedState=d,Ln=!0),_=_.queue;var k=RE.bind(null,p,_,o);if(Hd(2048,8,k,[o]),_.getSnapshot!==l||N||vn!==null&&vn.memoizedState.tag&1){if(p.flags|=2048,xc(9,Wm(),IE.bind(null,p,_,d,l),null),Ut===null)throw Error(i(349));w||(go&124)!==0||CE(p,l,d)}return d}function CE(o,l,d){o.flags|=16384,o={getSnapshot:l,value:d},l=st.updateQueue,l===null?(l=P0(),st.updateQueue=l,l.stores=[o]):(d=l.stores,d===null?l.stores=[o]:d.push(o))}function IE(o,l,d,p){l.value=d,l.getSnapshot=p,NE(l)&&ME(o)}function RE(o,l,d){return d(function(){NE(l)&&ME(o)})}function NE(o){var l=o.getSnapshot;o=o.value;try{var d=l();return!ki(o,d)}catch(p){return!0}}function ME(o){var l=uc(o,2);l!==null&&Bi(l,o,2)}function L0(o){var l=wi();if(typeof o=="function"){var d=o;if(o=d(),Ka){Pn(!0);try{d()}finally{Pn(!1)}}}return l.memoizedState=l.baseState=o,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ir,lastRenderedState:o},l}function PE(o,l,d,p){return o.baseState=d,k0(o,Dt,typeof p=="function"?p:Ir)}function N4(o,l,d,p,_){if(Jm(o))throw Error(i(485));if(o=l.action,o!==null){var w={payload:_,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(N){w.listeners.push(N)}};ne.T!==null?d(!0):w.isTransition=!1,p(w),d=l.pending,d===null?(w.next=l.pending=w,DE(l,w)):(w.next=d.next,l.pending=d.next=w)}}function DE(o,l){var d=l.action,p=l.payload,_=o.state;if(l.isTransition){var w=ne.T,N={};ne.T=N;try{var k=d(_,p),$=ne.S;$!==null&&$(N,k),kE(o,l,k)}catch(te){U0(o,l,te)}finally{ne.T=w}}else try{w=d(_,p),kE(o,l,w)}catch(te){U0(o,l,te)}}function kE(o,l,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(p){VE(o,l,p)},function(p){return U0(o,l,p)}):VE(o,l,d)}function VE(o,l,d){l.status="fulfilled",l.value=d,LE(l),o.state=d,l=o.pending,l!==null&&(d=l.next,d===l?o.pending=null:(d=d.next,l.next=d,DE(o,d)))}function U0(o,l,d){var p=o.pending;if(o.pending=null,p!==null){p=p.next;do l.status="rejected",l.reason=d,LE(l),l=l.next;while(l!==p)}o.action=null}function LE(o){o=o.listeners;for(var l=0;l<o.length;l++)(0,o[l])()}function UE(o,l){return l}function OE(o,l){if(bt){var d=Ut.formState;if(d!==null){e:{var p=st;if(bt){if(tn){t:{for(var _=tn,w=Bs;_.nodeType!==8;){if(!w){_=null;break t}if(_=vs(_.nextSibling),_===null){_=null;break t}}w=_.data,_=w==="F!"||w==="F"?_:null}if(_){tn=vs(_.nextSibling),p=_.data==="F!";break e}}Ga(p)}p=!1}p&&(l=d[0])}}return d=wi(),d.memoizedState=d.baseState=l,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:UE,lastRenderedState:l},d.queue=p,d=iS.bind(null,st,p),p.dispatch=d,p=L0(!1),w=j0.bind(null,st,!1,p.queue),p=wi(),_={state:l,dispatch:null,action:o,pending:null},p.queue=_,d=N4.bind(null,st,_,w,d),_.dispatch=d,p.memoizedState=o,[l,d,!1]}function FE(o){var l=xn();return BE(l,Dt,o)}function BE(o,l,d){if(l=k0(o,l,UE)[0],o=Km(Ir)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var p=zd(l)}catch(N){throw N===Od?qm:N}else p=l;l=xn();var _=l.queue,w=_.dispatch;return d!==l.memoizedState&&(st.flags|=2048,xc(9,Wm(),M4.bind(null,_,d),null)),[p,w,o]}function M4(o,l){o.action=l}function qE(o){var l=xn(),d=Dt;if(d!==null)return BE(l,d,o);xn(),l=l.memoizedState,d=xn();var p=d.queue.dispatch;return d.memoizedState=o,[l,p,!1]}function xc(o,l,d,p){return o={tag:o,create:d,deps:p,inst:l,next:null},l=st.updateQueue,l===null&&(l=P0(),st.updateQueue=l),d=l.lastEffect,d===null?l.lastEffect=o.next=o:(p=d.next,d.next=o,o.next=p,l.lastEffect=o),o}function Wm(){return{destroy:void 0,resource:void 0}}function jE(){return xn().memoizedState}function Ym(o,l,d,p){var _=wi();p=p===void 0?null:p,st.flags|=o,_.memoizedState=xc(1|l,Wm(),d,p)}function Hd(o,l,d,p){var _=xn();p=p===void 0?null:p;var w=_.memoizedState.inst;Dt!==null&&p!==null&&C0(p,Dt.memoizedState.deps)?_.memoizedState=xc(l,w,d,p):(st.flags|=o,_.memoizedState=xc(1|l,w,d,p))}function GE(o,l){Ym(8390656,8,o,l)}function zE(o,l){Hd(2048,8,o,l)}function HE(o,l){return Hd(4,2,o,l)}function $E(o,l){return Hd(4,4,o,l)}function KE(o,l){if(typeof l=="function"){o=o();var d=l(o);return function(){typeof d=="function"?d():l(null)}}if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function WE(o,l,d){d=d!=null?d.concat([o]):null,Hd(4,4,KE.bind(null,l,o),d)}function O0(){}function YE(o,l){var d=xn();l=l===void 0?null:l;var p=d.memoizedState;return l!==null&&C0(l,p[1])?p[0]:(d.memoizedState=[o,l],o)}function JE(o,l){var d=xn();l=l===void 0?null:l;var p=d.memoizedState;if(l!==null&&C0(l,p[1]))return p[0];if(p=o(),Ka){Pn(!0);try{o()}finally{Pn(!1)}}return d.memoizedState=[p,l],p}function F0(o,l,d){return d===void 0||(go&1073741824)!==0?o.memoizedState=l:(o.memoizedState=d,o=ZS(),st.lanes|=o,bo|=o,d)}function QE(o,l,d,p){return ki(d,l)?d:gc.current!==null?(o=F0(o,d,p),ki(o,l)||(Ln=!0),o):(go&42)===0?(Ln=!0,o.memoizedState=d):(o=ZS(),st.lanes|=o,bo|=o,l)}function XE(o,l,d,p,_){var w=de.p;de.p=w!==0&&8>w?w:8;var N=ne.T,k={};ne.T=k,j0(o,!1,l,d);try{var $=_(),te=ne.S;if(te!==null&&te(k,$),$!==null&&typeof $=="object"&&typeof $.then=="function"){var ue=C4($,p);$d(o,l,ue,Fi(o))}else $d(o,l,p,Fi(o))}catch(fe){$d(o,l,{then:function(){},status:"rejected",reason:fe},Fi())}finally{de.p=w,ne.T=N}}function P4(){}function B0(o,l,d,p){if(o.tag!==5)throw Error(i(476));var _=ZE(o).queue;XE(o,_,l,ie,d===null?P4:function(){return eS(o),d(p)})}function ZE(o){var l=o.memoizedState;if(l!==null)return l;l={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ir,lastRenderedState:ie},next:null};var d={};return l.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ir,lastRenderedState:d},next:null},o.memoizedState=l,o=o.alternate,o!==null&&(o.memoizedState=l),l}function eS(o){var l=ZE(o).next.queue;$d(o,l,{},Fi())}function q0(){return Zn(uh)}function tS(){return xn().memoizedState}function nS(){return xn().memoizedState}function D4(o){for(var l=o.return;l!==null;){switch(l.tag){case 24:case 3:var d=Fi();o=mo(d);var p=po(l,o,d);p!==null&&(Bi(p,l,d),Bd(p,l,d)),l={cache:y0()},o.payload=l;return}l=l.return}}function k4(o,l,d){var p=Fi();d={lane:p,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},Jm(o)?sS(l,d):(d=a0(o,l,d,p),d!==null&&(Bi(d,o,p),rS(d,l,p)))}function iS(o,l,d){var p=Fi();$d(o,l,d,p)}function $d(o,l,d,p){var _={lane:p,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(Jm(o))sS(l,_);else{var w=o.alternate;if(o.lanes===0&&(w===null||w.lanes===0)&&(w=l.lastRenderedReducer,w!==null))try{var N=l.lastRenderedState,k=w(N,d);if(_.hasEagerState=!0,_.eagerState=k,ki(k,N))return Dm(o,l,_,0),Ut===null&&Pm(),!1}catch($){}finally{}if(d=a0(o,l,_,p),d!==null)return Bi(d,o,p),rS(d,l,p),!0}return!1}function j0(o,l,d,p){if(p={lane:2,revertLane:_v(),action:p,hasEagerState:!1,eagerState:null,next:null},Jm(o)){if(l)throw Error(i(479))}else l=a0(o,d,p,2),l!==null&&Bi(l,o,2)}function Jm(o){var l=o.alternate;return o===st||l!==null&&l===st}function sS(o,l){yc=zm=!0;var d=o.pending;d===null?l.next=l:(l.next=d.next,d.next=l),o.pending=l}function rS(o,l,d){if((d&4194048)!==0){var p=l.lanes;p&=o.pendingLanes,d|=p,l.lanes=d,md(o,d)}}var Qm={readContext:Zn,use:$m,useCallback:un,useContext:un,useEffect:un,useImperativeHandle:un,useLayoutEffect:un,useInsertionEffect:un,useMemo:un,useReducer:un,useRef:un,useState:un,useDebugValue:un,useDeferredValue:un,useTransition:un,useSyncExternalStore:un,useId:un,useHostTransitionStatus:un,useFormState:un,useActionState:un,useOptimistic:un,useMemoCache:un,useCacheRefresh:un},oS={readContext:Zn,use:$m,useCallback:function(o,l){return wi().memoizedState=[o,l===void 0?null:l],o},useContext:Zn,useEffect:GE,useImperativeHandle:function(o,l,d){d=d!=null?d.concat([o]):null,Ym(4194308,4,KE.bind(null,l,o),d)},useLayoutEffect:function(o,l){return Ym(4194308,4,o,l)},useInsertionEffect:function(o,l){Ym(4,2,o,l)},useMemo:function(o,l){var d=wi();l=l===void 0?null:l;var p=o();if(Ka){Pn(!0);try{o()}finally{Pn(!1)}}return d.memoizedState=[p,l],p},useReducer:function(o,l,d){var p=wi();if(d!==void 0){var _=d(l);if(Ka){Pn(!0);try{d(l)}finally{Pn(!1)}}}else _=l;return p.memoizedState=p.baseState=_,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:_},p.queue=o,o=o.dispatch=k4.bind(null,st,o),[p.memoizedState,o]},useRef:function(o){var l=wi();return o={current:o},l.memoizedState=o},useState:function(o){o=L0(o);var l=o.queue,d=iS.bind(null,st,l);return l.dispatch=d,[o.memoizedState,d]},useDebugValue:O0,useDeferredValue:function(o,l){var d=wi();return F0(d,o,l)},useTransition:function(){var o=L0(!1);return o=XE.bind(null,st,o.queue,!0,!1),wi().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,l,d){var p=st,_=wi();if(bt){if(d===void 0)throw Error(i(407));d=d()}else{if(d=l(),Ut===null)throw Error(i(349));(gt&124)!==0||CE(p,l,d)}_.memoizedState=d;var w={value:d,getSnapshot:l};return _.queue=w,GE(RE.bind(null,p,w,o),[o]),p.flags|=2048,xc(9,Wm(),IE.bind(null,p,w,d,l),null),d},useId:function(){var o=wi(),l=Ut.identifierPrefix;if(bt){var d=Sr,p=Er;d=(p&~(1<<32-Dn(p)-1)).toString(32)+d,l=""+l+"R"+d,d=Hm++,0<d&&(l+="H"+d.toString(32)),l+=""}else d=I4++,l=""+l+"r"+d.toString(32)+"";return o.memoizedState=l},useHostTransitionStatus:q0,useFormState:OE,useActionState:OE,useOptimistic:function(o){var l=wi();l.memoizedState=l.baseState=o;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=d,l=j0.bind(null,st,!0,d),d.dispatch=l,[o,l]},useMemoCache:D0,useCacheRefresh:function(){return wi().memoizedState=D4.bind(null,st)}},aS={readContext:Zn,use:$m,useCallback:YE,useContext:Zn,useEffect:zE,useImperativeHandle:WE,useInsertionEffect:HE,useLayoutEffect:$E,useMemo:JE,useReducer:Km,useRef:jE,useState:function(){return Km(Ir)},useDebugValue:O0,useDeferredValue:function(o,l){var d=xn();return QE(d,Dt.memoizedState,o,l)},useTransition:function(){var o=Km(Ir)[0],l=xn().memoizedState;return[typeof o=="boolean"?o:zd(o),l]},useSyncExternalStore:AE,useId:tS,useHostTransitionStatus:q0,useFormState:FE,useActionState:FE,useOptimistic:function(o,l){var d=xn();return PE(d,Dt,o,l)},useMemoCache:D0,useCacheRefresh:nS},V4={readContext:Zn,use:$m,useCallback:YE,useContext:Zn,useEffect:zE,useImperativeHandle:WE,useInsertionEffect:HE,useLayoutEffect:$E,useMemo:JE,useReducer:V0,useRef:jE,useState:function(){return V0(Ir)},useDebugValue:O0,useDeferredValue:function(o,l){var d=xn();return Dt===null?F0(d,o,l):QE(d,Dt.memoizedState,o,l)},useTransition:function(){var o=V0(Ir)[0],l=xn().memoizedState;return[typeof o=="boolean"?o:zd(o),l]},useSyncExternalStore:AE,useId:tS,useHostTransitionStatus:q0,useFormState:qE,useActionState:qE,useOptimistic:function(o,l){var d=xn();return Dt!==null?PE(d,Dt,o,l):(d.baseState=o,[o,d.queue.dispatch])},useMemoCache:D0,useCacheRefresh:nS},_c=null,Kd=0;function Xm(o){var l=Kd;return Kd+=1,_c===null&&(_c=[]),vE(_c,o,l)}function Wd(o,l){l=l.props.ref,o.ref=l!==void 0?l:null}function Zm(o,l){throw l.$$typeof===x?Error(i(525)):(o=Object.prototype.toString.call(l),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o)))}function lS(o){var l=o._init;return l(o._payload)}function cS(o){function l(Q,Y){if(o){var ee=Q.deletions;ee===null?(Q.deletions=[Y],Q.flags|=16):ee.push(Y)}}function d(Q,Y){if(!o)return null;for(;Y!==null;)l(Q,Y),Y=Y.sibling;return null}function p(Q){for(var Y=new Map;Q!==null;)Q.key!==null?Y.set(Q.key,Q):Y.set(Q.index,Q),Q=Q.sibling;return Y}function _(Q,Y){return Q=br(Q,Y),Q.index=0,Q.sibling=null,Q}function w(Q,Y,ee){return Q.index=ee,o?(ee=Q.alternate,ee!==null?(ee=ee.index,ee<Y?(Q.flags|=67108866,Y):ee):(Q.flags|=67108866,Y)):(Q.flags|=1048576,Y)}function N(Q){return o&&Q.alternate===null&&(Q.flags|=67108866),Q}function k(Q,Y,ee,he){return Y===null||Y.tag!==6?(Y=c0(ee,Q.mode,he),Y.return=Q,Y):(Y=_(Y,ee),Y.return=Q,Y)}function $(Q,Y,ee,he){var Pe=ee.type;return Pe===S?ue(Q,Y,ee.props.children,he,ee.key):Y!==null&&(Y.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===C&&lS(Pe)===Y.type)?(Y=_(Y,ee.props),Wd(Y,ee),Y.return=Q,Y):(Y=Vm(ee.type,ee.key,ee.props,null,Q.mode,he),Wd(Y,ee),Y.return=Q,Y)}function te(Q,Y,ee,he){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==ee.containerInfo||Y.stateNode.implementation!==ee.implementation?(Y=u0(ee,Q.mode,he),Y.return=Q,Y):(Y=_(Y,ee.children||[]),Y.return=Q,Y)}function ue(Q,Y,ee,he,Pe){return Y===null||Y.tag!==7?(Y=Fa(ee,Q.mode,he,Pe),Y.return=Q,Y):(Y=_(Y,ee),Y.return=Q,Y)}function fe(Q,Y,ee){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=c0(""+Y,Q.mode,ee),Y.return=Q,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case T:return ee=Vm(Y.type,Y.key,Y.props,null,Q.mode,ee),Wd(ee,Y),ee.return=Q,ee;case b:return Y=u0(Y,Q.mode,ee),Y.return=Q,Y;case C:var he=Y._init;return Y=he(Y._payload),fe(Q,Y,ee)}if(Ae(Y)||G(Y))return Y=Fa(Y,Q.mode,ee,null),Y.return=Q,Y;if(typeof Y.then=="function")return fe(Q,Xm(Y),ee);if(Y.$$typeof===O)return fe(Q,Fm(Q,Y),ee);Zm(Q,Y)}return null}function se(Q,Y,ee,he){var Pe=Y!==null?Y.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return Pe!==null?null:k(Q,Y,""+ee,he);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case T:return ee.key===Pe?$(Q,Y,ee,he):null;case b:return ee.key===Pe?te(Q,Y,ee,he):null;case C:return Pe=ee._init,ee=Pe(ee._payload),se(Q,Y,ee,he)}if(Ae(ee)||G(ee))return Pe!==null?null:ue(Q,Y,ee,he,null);if(typeof ee.then=="function")return se(Q,Y,Xm(ee),he);if(ee.$$typeof===O)return se(Q,Y,Fm(Q,ee),he);Zm(Q,ee)}return null}function re(Q,Y,ee,he,Pe){if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return Q=Q.get(ee)||null,k(Y,Q,""+he,Pe);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case T:return Q=Q.get(he.key===null?ee:he.key)||null,$(Y,Q,he,Pe);case b:return Q=Q.get(he.key===null?ee:he.key)||null,te(Y,Q,he,Pe);case C:var ot=he._init;return he=ot(he._payload),re(Q,Y,ee,he,Pe)}if(Ae(he)||G(he))return Q=Q.get(ee)||null,ue(Y,Q,he,Pe,null);if(typeof he.then=="function")return re(Q,Y,ee,Xm(he),Pe);if(he.$$typeof===O)return re(Q,Y,ee,Fm(Y,he),Pe);Zm(Y,he)}return null}function Je(Q,Y,ee,he){for(var Pe=null,ot=null,qe=Y,We=Y=0,On=null;qe!==null&&We<ee.length;We++){qe.index>We?(On=qe,qe=null):On=qe.sibling;var xt=se(Q,qe,ee[We],he);if(xt===null){qe===null&&(qe=On);break}o&&qe&&xt.alternate===null&&l(Q,qe),Y=w(xt,Y,We),ot===null?Pe=xt:ot.sibling=xt,ot=xt,qe=On}if(We===ee.length)return d(Q,qe),bt&&qa(Q,We),Pe;if(qe===null){for(;We<ee.length;We++)qe=fe(Q,ee[We],he),qe!==null&&(Y=w(qe,Y,We),ot===null?Pe=qe:ot.sibling=qe,ot=qe);return bt&&qa(Q,We),Pe}for(qe=p(qe);We<ee.length;We++)On=re(qe,Q,We,ee[We],he),On!==null&&(o&&On.alternate!==null&&qe.delete(On.key===null?We:On.key),Y=w(On,Y,We),ot===null?Pe=On:ot.sibling=On,ot=On);return o&&qe.forEach(function(Po){return l(Q,Po)}),bt&&qa(Q,We),Pe}function $e(Q,Y,ee,he){if(ee==null)throw Error(i(151));for(var Pe=null,ot=null,qe=Y,We=Y=0,On=null,xt=ee.next();qe!==null&&!xt.done;We++,xt=ee.next()){qe.index>We?(On=qe,qe=null):On=qe.sibling;var Po=se(Q,qe,xt.value,he);if(Po===null){qe===null&&(qe=On);break}o&&qe&&Po.alternate===null&&l(Q,qe),Y=w(Po,Y,We),ot===null?Pe=Po:ot.sibling=Po,ot=Po,qe=On}if(xt.done)return d(Q,qe),bt&&qa(Q,We),Pe;if(qe===null){for(;!xt.done;We++,xt=ee.next())xt=fe(Q,xt.value,he),xt!==null&&(Y=w(xt,Y,We),ot===null?Pe=xt:ot.sibling=xt,ot=xt);return bt&&qa(Q,We),Pe}for(qe=p(qe);!xt.done;We++,xt=ee.next())xt=re(qe,Q,We,xt.value,he),xt!==null&&(o&&xt.alternate!==null&&qe.delete(xt.key===null?We:xt.key),Y=w(xt,Y,We),ot===null?Pe=xt:ot.sibling=xt,ot=xt);return o&&qe.forEach(function(L3){return l(Q,L3)}),bt&&qa(Q,We),Pe}function Vt(Q,Y,ee,he){if(typeof ee=="object"&&ee!==null&&ee.type===S&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case T:e:{for(var Pe=ee.key;Y!==null;){if(Y.key===Pe){if(Pe=ee.type,Pe===S){if(Y.tag===7){d(Q,Y.sibling),he=_(Y,ee.props.children),he.return=Q,Q=he;break e}}else if(Y.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===C&&lS(Pe)===Y.type){d(Q,Y.sibling),he=_(Y,ee.props),Wd(he,ee),he.return=Q,Q=he;break e}d(Q,Y);break}else l(Q,Y);Y=Y.sibling}ee.type===S?(he=Fa(ee.props.children,Q.mode,he,ee.key),he.return=Q,Q=he):(he=Vm(ee.type,ee.key,ee.props,null,Q.mode,he),Wd(he,ee),he.return=Q,Q=he)}return N(Q);case b:e:{for(Pe=ee.key;Y!==null;){if(Y.key===Pe)if(Y.tag===4&&Y.stateNode.containerInfo===ee.containerInfo&&Y.stateNode.implementation===ee.implementation){d(Q,Y.sibling),he=_(Y,ee.children||[]),he.return=Q,Q=he;break e}else{d(Q,Y);break}else l(Q,Y);Y=Y.sibling}he=u0(ee,Q.mode,he),he.return=Q,Q=he}return N(Q);case C:return Pe=ee._init,ee=Pe(ee._payload),Vt(Q,Y,ee,he)}if(Ae(ee))return Je(Q,Y,ee,he);if(G(ee)){if(Pe=G(ee),typeof Pe!="function")throw Error(i(150));return ee=Pe.call(ee),$e(Q,Y,ee,he)}if(typeof ee.then=="function")return Vt(Q,Y,Xm(ee),he);if(ee.$$typeof===O)return Vt(Q,Y,Fm(Q,ee),he);Zm(Q,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,Y!==null&&Y.tag===6?(d(Q,Y.sibling),he=_(Y,ee),he.return=Q,Q=he):(d(Q,Y),he=c0(ee,Q.mode,he),he.return=Q,Q=he),N(Q)):d(Q,Y)}return function(Q,Y,ee,he){try{Kd=0;var Pe=Vt(Q,Y,ee,he);return _c=null,Pe}catch(qe){if(qe===Od||qe===qm)throw qe;var ot=Vi(29,qe,null,Q.mode);return ot.lanes=he,ot.return=Q,ot}finally{}}}var Tc=cS(!0),uS=cS(!1),is=le(null),qs=null;function yo(o){var l=o.alternate;ce(In,In.current&1),ce(is,o),qs===null&&(l===null||gc.current!==null||l.memoizedState!==null)&&(qs=o)}function dS(o){if(o.tag===22){if(ce(In,In.current),ce(is,o),qs===null){var l=o.alternate;l!==null&&l.memoizedState!==null&&(qs=o)}}else vo()}function vo(){ce(In,In.current),ce(is,is.current)}function Rr(o){xe(is),qs===o&&(qs=null),xe(In)}var In=le(0);function ep(o){for(var l=o;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||Pv(d)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function G0(o,l,d,p){l=o.memoizedState,d=d(p,l),d=d==null?l:g({},l,d),o.memoizedState=d,o.lanes===0&&(o.updateQueue.baseState=d)}var z0={enqueueSetState:function(o,l,d){o=o._reactInternals;var p=Fi(),_=mo(p);_.payload=l,d!=null&&(_.callback=d),l=po(o,_,p),l!==null&&(Bi(l,o,p),Bd(l,o,p))},enqueueReplaceState:function(o,l,d){o=o._reactInternals;var p=Fi(),_=mo(p);_.tag=1,_.payload=l,d!=null&&(_.callback=d),l=po(o,_,p),l!==null&&(Bi(l,o,p),Bd(l,o,p))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var d=Fi(),p=mo(d);p.tag=2,l!=null&&(p.callback=l),l=po(o,p,d),l!==null&&(Bi(l,o,d),Bd(l,o,d))}};function hS(o,l,d,p,_,w,N){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(p,w,N):l.prototype&&l.prototype.isPureReactComponent?!Nd(d,p)||!Nd(_,w):!0}function fS(o,l,d,p){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,p),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,p),l.state!==o&&z0.enqueueReplaceState(l,l.state,null)}function Wa(o,l){var d=l;if("ref"in l){d={};for(var p in l)p!=="ref"&&(d[p]=l[p])}if(o=o.defaultProps){d===l&&(d=g({},d));for(var _ in o)d[_]===void 0&&(d[_]=o[_])}return d}var tp=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function mS(o){tp(o)}function pS(o){console.error(o)}function gS(o){tp(o)}function np(o,l){try{var d=o.onUncaughtError;d(l.value,{componentStack:l.stack})}catch(p){setTimeout(function(){throw p})}}function yS(o,l,d){try{var p=o.onCaughtError;p(d.value,{componentStack:d.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function H0(o,l,d){return d=mo(d),d.tag=3,d.payload={element:null},d.callback=function(){np(o,l)},d}function vS(o){return o=mo(o),o.tag=3,o}function xS(o,l,d,p){var _=d.type.getDerivedStateFromError;if(typeof _=="function"){var w=p.value;o.payload=function(){return _(w)},o.callback=function(){yS(l,d,p)}}var N=d.stateNode;N!==null&&typeof N.componentDidCatch=="function"&&(o.callback=function(){yS(l,d,p),typeof _!="function"&&(Eo===null?Eo=new Set([this]):Eo.add(this));var k=p.stack;this.componentDidCatch(p.value,{componentStack:k!==null?k:""})})}function L4(o,l,d,p,_){if(d.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(l=d.alternate,l!==null&&Vd(l,d,_,!0),d=is.current,d!==null){switch(d.tag){case 13:return qs===null?pv():d.alternate===null&&nn===0&&(nn=3),d.flags&=-257,d.flags|=65536,d.lanes=_,p===_0?d.flags|=16384:(l=d.updateQueue,l===null?d.updateQueue=new Set([p]):l.add(p),yv(o,p,_)),!1;case 22:return d.flags|=65536,p===_0?d.flags|=16384:(l=d.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([p])},d.updateQueue=l):(d=l.retryQueue,d===null?l.retryQueue=new Set([p]):d.add(p)),yv(o,p,_)),!1}throw Error(i(435,d.tag))}return yv(o,p,_),pv(),!1}if(bt)return l=is.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=_,p!==f0&&(o=Error(i(422),{cause:p}),kd(Zi(o,d)))):(p!==f0&&(l=Error(i(423),{cause:p}),kd(Zi(l,d))),o=o.current.alternate,o.flags|=65536,_&=-_,o.lanes|=_,p=Zi(p,d),_=H0(o.stateNode,p,_),b0(o,_),nn!==4&&(nn=2)),!1;var w=Error(i(520),{cause:p});if(w=Zi(w,d),th===null?th=[w]:th.push(w),nn!==4&&(nn=2),l===null)return!0;p=Zi(p,d),d=l;do{switch(d.tag){case 3:return d.flags|=65536,o=_&-_,d.lanes|=o,o=H0(d.stateNode,p,o),b0(d,o),!1;case 1:if(l=d.type,w=d.stateNode,(d.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Eo===null||!Eo.has(w))))return d.flags|=65536,_&=-_,d.lanes|=_,_=vS(_),xS(_,o,d,p),b0(d,_),!1}d=d.return}while(d!==null);return!1}var _S=Error(i(461)),Ln=!1;function zn(o,l,d,p){l.child=o===null?uS(l,null,d,p):Tc(l,o.child,d,p)}function TS(o,l,d,p,_){d=d.render;var w=l.ref;if("ref"in p){var N={};for(var k in p)k!=="ref"&&(N[k]=p[k])}else N=p;return Ha(l),p=I0(o,l,d,N,w,_),k=R0(),o!==null&&!Ln?(N0(o,l,_),Nr(o,l,_)):(bt&&k&&d0(l),l.flags|=1,zn(o,l,p,_),l.child)}function wS(o,l,d,p,_){if(o===null){var w=d.type;return typeof w=="function"&&!l0(w)&&w.defaultProps===void 0&&d.compare===null?(l.tag=15,l.type=w,bS(o,l,w,p,_)):(o=Vm(d.type,null,p,l,l.mode,_),o.ref=l.ref,o.return=l,l.child=o)}if(w=o.child,!Z0(o,_)){var N=w.memoizedProps;if(d=d.compare,d=d!==null?d:Nd,d(N,p)&&o.ref===l.ref)return Nr(o,l,_)}return l.flags|=1,o=br(w,p),o.ref=l.ref,o.return=l,l.child=o}function bS(o,l,d,p,_){if(o!==null){var w=o.memoizedProps;if(Nd(w,p)&&o.ref===l.ref)if(Ln=!1,l.pendingProps=p=w,Z0(o,_))(o.flags&131072)!==0&&(Ln=!0);else return l.lanes=o.lanes,Nr(o,l,_)}return $0(o,l,d,p,_)}function ES(o,l,d){var p=l.pendingProps,_=p.children,w=o!==null?o.memoizedState:null;if(p.mode==="hidden"){if((l.flags&128)!==0){if(p=w!==null?w.baseLanes|d:d,o!==null){for(_=l.child=o.child,w=0;_!==null;)w=w|_.lanes|_.childLanes,_=_.sibling;l.childLanes=w&~p}else l.childLanes=0,l.child=null;return SS(o,l,p,d)}if((d&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},o!==null&&Bm(l,w!==null?w.cachePool:null),w!==null?bE(l,w):S0(),dS(l);else return l.lanes=l.childLanes=536870912,SS(o,l,w!==null?w.baseLanes|d:d,d)}else w!==null?(Bm(l,w.cachePool),bE(l,w),vo(),l.memoizedState=null):(o!==null&&Bm(l,null),S0(),vo());return zn(o,l,_,d),l.child}function SS(o,l,d,p){var _=x0();return _=_===null?null:{parent:Cn._currentValue,pool:_},l.memoizedState={baseLanes:d,cachePool:_},o!==null&&Bm(l,null),S0(),dS(l),o!==null&&Vd(o,l,p,!0),null}function ip(o,l){var d=l.ref;if(d===null)o!==null&&o.ref!==null&&(l.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(i(284));(o===null||o.ref!==d)&&(l.flags|=4194816)}}function $0(o,l,d,p,_){return Ha(l),d=I0(o,l,d,p,void 0,_),p=R0(),o!==null&&!Ln?(N0(o,l,_),Nr(o,l,_)):(bt&&p&&d0(l),l.flags|=1,zn(o,l,d,_),l.child)}function AS(o,l,d,p,_,w){return Ha(l),l.updateQueue=null,d=SE(l,p,d,_),EE(o),p=R0(),o!==null&&!Ln?(N0(o,l,w),Nr(o,l,w)):(bt&&p&&d0(l),l.flags|=1,zn(o,l,d,w),l.child)}function CS(o,l,d,p,_){if(Ha(l),l.stateNode===null){var w=dc,N=d.contextType;typeof N=="object"&&N!==null&&(w=Zn(N)),w=new d(p,w),l.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=z0,l.stateNode=w,w._reactInternals=l,w=l.stateNode,w.props=p,w.state=l.memoizedState,w.refs={},T0(l),N=d.contextType,w.context=typeof N=="object"&&N!==null?Zn(N):dc,w.state=l.memoizedState,N=d.getDerivedStateFromProps,typeof N=="function"&&(G0(l,d,N,p),w.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(N=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),N!==w.state&&z0.enqueueReplaceState(w,w.state,null),jd(l,p,w,_),qd(),w.state=l.memoizedState),typeof w.componentDidMount=="function"&&(l.flags|=4194308),p=!0}else if(o===null){w=l.stateNode;var k=l.memoizedProps,$=Wa(d,k);w.props=$;var te=w.context,ue=d.contextType;N=dc,typeof ue=="object"&&ue!==null&&(N=Zn(ue));var fe=d.getDerivedStateFromProps;ue=typeof fe=="function"||typeof w.getSnapshotBeforeUpdate=="function",k=l.pendingProps!==k,ue||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(k||te!==N)&&fS(l,w,p,N),fo=!1;var se=l.memoizedState;w.state=se,jd(l,p,w,_),qd(),te=l.memoizedState,k||se!==te||fo?(typeof fe=="function"&&(G0(l,d,fe,p),te=l.memoizedState),($=fo||hS(l,d,$,p,se,te,N))?(ue||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(l.flags|=4194308)):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=p,l.memoizedState=te),w.props=p,w.state=te,w.context=N,p=$):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),p=!1)}else{w=l.stateNode,w0(o,l),N=l.memoizedProps,ue=Wa(d,N),w.props=ue,fe=l.pendingProps,se=w.context,te=d.contextType,$=dc,typeof te=="object"&&te!==null&&($=Zn(te)),k=d.getDerivedStateFromProps,(te=typeof k=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(N!==fe||se!==$)&&fS(l,w,p,$),fo=!1,se=l.memoizedState,w.state=se,jd(l,p,w,_),qd();var re=l.memoizedState;N!==fe||se!==re||fo||o!==null&&o.dependencies!==null&&Om(o.dependencies)?(typeof k=="function"&&(G0(l,d,k,p),re=l.memoizedState),(ue=fo||hS(l,d,ue,p,se,re,$)||o!==null&&o.dependencies!==null&&Om(o.dependencies))?(te||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(p,re,$),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(p,re,$)),typeof w.componentDidUpdate=="function"&&(l.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof w.componentDidUpdate!="function"||N===o.memoizedProps&&se===o.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||N===o.memoizedProps&&se===o.memoizedState||(l.flags|=1024),l.memoizedProps=p,l.memoizedState=re),w.props=p,w.state=re,w.context=$,p=ue):(typeof w.componentDidUpdate!="function"||N===o.memoizedProps&&se===o.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||N===o.memoizedProps&&se===o.memoizedState||(l.flags|=1024),p=!1)}return w=p,ip(o,l),p=(l.flags&128)!==0,w||p?(w=l.stateNode,d=p&&typeof d.getDerivedStateFromError!="function"?null:w.render(),l.flags|=1,o!==null&&p?(l.child=Tc(l,o.child,null,_),l.child=Tc(l,null,d,_)):zn(o,l,d,_),l.memoizedState=w.state,o=l.child):o=Nr(o,l,_),o}function IS(o,l,d,p){return Dd(),l.flags|=256,zn(o,l,d,p),l.child}var K0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function W0(o){return{baseLanes:o,cachePool:pE()}}function Y0(o,l,d){return o=o!==null?o.childLanes&~d:0,l&&(o|=ss),o}function RS(o,l,d){var p=l.pendingProps,_=!1,w=(l.flags&128)!==0,N;if((N=w)||(N=o!==null&&o.memoizedState===null?!1:(In.current&2)!==0),N&&(_=!0,l.flags&=-129),N=(l.flags&32)!==0,l.flags&=-33,o===null){if(bt){if(_?yo(l):vo(),bt){var k=tn,$;if($=k){e:{for($=k,k=Bs;$.nodeType!==8;){if(!k){k=null;break e}if($=vs($.nextSibling),$===null){k=null;break e}}k=$}k!==null?(l.memoizedState={dehydrated:k,treeContext:Ba!==null?{id:Er,overflow:Sr}:null,retryLane:536870912,hydrationErrors:null},$=Vi(18,null,null,0),$.stateNode=k,$.return=l,l.child=$,fi=l,tn=null,$=!0):$=!1}$||Ga(l)}if(k=l.memoizedState,k!==null&&(k=k.dehydrated,k!==null))return Pv(k)?l.lanes=32:l.lanes=536870912,null;Rr(l)}return k=p.children,p=p.fallback,_?(vo(),_=l.mode,k=sp({mode:"hidden",children:k},_),p=Fa(p,_,d,null),k.return=l,p.return=l,k.sibling=p,l.child=k,_=l.child,_.memoizedState=W0(d),_.childLanes=Y0(o,N,d),l.memoizedState=K0,p):(yo(l),J0(l,k))}if($=o.memoizedState,$!==null&&(k=$.dehydrated,k!==null)){if(w)l.flags&256?(yo(l),l.flags&=-257,l=Q0(o,l,d)):l.memoizedState!==null?(vo(),l.child=o.child,l.flags|=128,l=null):(vo(),_=p.fallback,k=l.mode,p=sp({mode:"visible",children:p.children},k),_=Fa(_,k,d,null),_.flags|=2,p.return=l,_.return=l,p.sibling=_,l.child=p,Tc(l,o.child,null,d),p=l.child,p.memoizedState=W0(d),p.childLanes=Y0(o,N,d),l.memoizedState=K0,l=_);else if(yo(l),Pv(k)){if(N=k.nextSibling&&k.nextSibling.dataset,N)var te=N.dgst;N=te,p=Error(i(419)),p.stack="",p.digest=N,kd({value:p,source:null,stack:null}),l=Q0(o,l,d)}else if(Ln||Vd(o,l,d,!1),N=(d&o.childLanes)!==0,Ln||N){if(N=Ut,N!==null&&(p=d&-d,p=(p&42)!==0?1:so(p),p=(p&(N.suspendedLanes|d))!==0?0:p,p!==0&&p!==$.retryLane))throw $.retryLane=p,uc(o,p),Bi(N,o,p),_S;k.data==="$?"||pv(),l=Q0(o,l,d)}else k.data==="$?"?(l.flags|=192,l.child=o.child,l=null):(o=$.treeContext,tn=vs(k.nextSibling),fi=l,bt=!0,ja=null,Bs=!1,o!==null&&(ts[ns++]=Er,ts[ns++]=Sr,ts[ns++]=Ba,Er=o.id,Sr=o.overflow,Ba=l),l=J0(l,p.children),l.flags|=4096);return l}return _?(vo(),_=p.fallback,k=l.mode,$=o.child,te=$.sibling,p=br($,{mode:"hidden",children:p.children}),p.subtreeFlags=$.subtreeFlags&65011712,te!==null?_=br(te,_):(_=Fa(_,k,d,null),_.flags|=2),_.return=l,p.return=l,p.sibling=_,l.child=p,p=_,_=l.child,k=o.child.memoizedState,k===null?k=W0(d):($=k.cachePool,$!==null?(te=Cn._currentValue,$=$.parent!==te?{parent:te,pool:te}:$):$=pE(),k={baseLanes:k.baseLanes|d,cachePool:$}),_.memoizedState=k,_.childLanes=Y0(o,N,d),l.memoizedState=K0,p):(yo(l),d=o.child,o=d.sibling,d=br(d,{mode:"visible",children:p.children}),d.return=l,d.sibling=null,o!==null&&(N=l.deletions,N===null?(l.deletions=[o],l.flags|=16):N.push(o)),l.child=d,l.memoizedState=null,d)}function J0(o,l){return l=sp({mode:"visible",children:l},o.mode),l.return=o,o.child=l}function sp(o,l){return o=Vi(22,o,null,l),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function Q0(o,l,d){return Tc(l,o.child,null,d),o=J0(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function NS(o,l,d){o.lanes|=l;var p=o.alternate;p!==null&&(p.lanes|=l),p0(o.return,l,d)}function X0(o,l,d,p,_){var w=o.memoizedState;w===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:p,tail:d,tailMode:_}:(w.isBackwards=l,w.rendering=null,w.renderingStartTime=0,w.last=p,w.tail=d,w.tailMode=_)}function MS(o,l,d){var p=l.pendingProps,_=p.revealOrder,w=p.tail;if(zn(o,l,p.children,d),p=In.current,(p&2)!==0)p=p&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&NS(o,d,l);else if(o.tag===19)NS(o,d,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}p&=1}switch(ce(In,p),_){case"forwards":for(d=l.child,_=null;d!==null;)o=d.alternate,o!==null&&ep(o)===null&&(_=d),d=d.sibling;d=_,d===null?(_=l.child,l.child=null):(_=d.sibling,d.sibling=null),X0(l,!1,_,d,w);break;case"backwards":for(d=null,_=l.child,l.child=null;_!==null;){if(o=_.alternate,o!==null&&ep(o)===null){l.child=_;break}o=_.sibling,_.sibling=d,d=_,_=o}X0(l,!0,d,null,w);break;case"together":X0(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Nr(o,l,d){if(o!==null&&(l.dependencies=o.dependencies),bo|=l.lanes,(d&l.childLanes)===0)if(o!==null){if(Vd(o,l,d,!1),(d&l.childLanes)===0)return null}else return null;if(o!==null&&l.child!==o.child)throw Error(i(153));if(l.child!==null){for(o=l.child,d=br(o,o.pendingProps),l.child=d,d.return=l;o.sibling!==null;)o=o.sibling,d=d.sibling=br(o,o.pendingProps),d.return=l;d.sibling=null}return l.child}function Z0(o,l){return(o.lanes&l)!==0?!0:(o=o.dependencies,!!(o!==null&&Om(o)))}function U4(o,l,d){switch(l.tag){case 3:at(l,l.stateNode.containerInfo),ho(l,Cn,o.memoizedState.cache),Dd();break;case 27:case 5:Oe(l);break;case 4:at(l,l.stateNode.containerInfo);break;case 10:ho(l,l.type,l.memoizedProps.value);break;case 13:var p=l.memoizedState;if(p!==null)return p.dehydrated!==null?(yo(l),l.flags|=128,null):(d&l.child.childLanes)!==0?RS(o,l,d):(yo(l),o=Nr(o,l,d),o!==null?o.sibling:null);yo(l);break;case 19:var _=(o.flags&128)!==0;if(p=(d&l.childLanes)!==0,p||(Vd(o,l,d,!1),p=(d&l.childLanes)!==0),_){if(p)return MS(o,l,d);l.flags|=128}if(_=l.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),ce(In,In.current),p)break;return null;case 22:case 23:return l.lanes=0,ES(o,l,d);case 24:ho(l,Cn,o.memoizedState.cache)}return Nr(o,l,d)}function PS(o,l,d){if(o!==null)if(o.memoizedProps!==l.pendingProps)Ln=!0;else{if(!Z0(o,d)&&(l.flags&128)===0)return Ln=!1,U4(o,l,d);Ln=(o.flags&131072)!==0}else Ln=!1,bt&&(l.flags&1048576)!==0&&lE(l,Um,l.index);switch(l.lanes=0,l.tag){case 16:e:{o=l.pendingProps;var p=l.elementType,_=p._init;if(p=_(p._payload),l.type=p,typeof p=="function")l0(p)?(o=Wa(p,o),l.tag=1,l=CS(null,l,p,o,d)):(l.tag=0,l=$0(null,l,p,o,d));else{if(p!=null){if(_=p.$$typeof,_===z){l.tag=11,l=TS(null,l,p,o,d);break e}else if(_===D){l.tag=14,l=wS(null,l,p,o,d);break e}}throw l=ye(p)||p,Error(i(306,l,""))}}return l;case 0:return $0(o,l,l.type,l.pendingProps,d);case 1:return p=l.type,_=Wa(p,l.pendingProps),CS(o,l,p,_,d);case 3:e:{if(at(l,l.stateNode.containerInfo),o===null)throw Error(i(387));p=l.pendingProps;var w=l.memoizedState;_=w.element,w0(o,l),jd(l,p,null,d);var N=l.memoizedState;if(p=N.cache,ho(l,Cn,p),p!==w.cache&&g0(l,[Cn],d,!0),qd(),p=N.element,w.isDehydrated)if(w={element:p,isDehydrated:!1,cache:N.cache},l.updateQueue.baseState=w,l.memoizedState=w,l.flags&256){l=IS(o,l,p,d);break e}else if(p!==_){_=Zi(Error(i(424)),l),kd(_),l=IS(o,l,p,d);break e}else{switch(o=l.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(tn=vs(o.firstChild),fi=l,bt=!0,ja=null,Bs=!0,d=uS(l,null,p,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(Dd(),p===_){l=Nr(o,l,d);break e}zn(o,l,p,d)}l=l.child}return l;case 26:return ip(o,l),o===null?(d=LA(l.type,null,l.pendingProps,null))?l.memoizedState=d:bt||(d=l.type,o=l.pendingProps,p=vp(Be.current).createElement(d),p[En]=l,p[gn]=o,$n(p,d,o),cn(p),l.stateNode=p):l.memoizedState=LA(l.type,o.memoizedProps,l.pendingProps,o.memoizedState),null;case 27:return Oe(l),o===null&&bt&&(p=l.stateNode=DA(l.type,l.pendingProps,Be.current),fi=l,Bs=!0,_=tn,Co(l.type)?(Dv=_,tn=vs(p.firstChild)):tn=_),zn(o,l,l.pendingProps.children,d),ip(o,l),o===null&&(l.flags|=4194304),l.child;case 5:return o===null&&bt&&((_=p=tn)&&(p=d3(p,l.type,l.pendingProps,Bs),p!==null?(l.stateNode=p,fi=l,tn=vs(p.firstChild),Bs=!1,_=!0):_=!1),_||Ga(l)),Oe(l),_=l.type,w=l.pendingProps,N=o!==null?o.memoizedProps:null,p=w.children,Rv(_,w)?p=null:N!==null&&Rv(_,N)&&(l.flags|=32),l.memoizedState!==null&&(_=I0(o,l,R4,null,null,d),uh._currentValue=_),ip(o,l),zn(o,l,p,d),l.child;case 6:return o===null&&bt&&((o=d=tn)&&(d=h3(d,l.pendingProps,Bs),d!==null?(l.stateNode=d,fi=l,tn=null,o=!0):o=!1),o||Ga(l)),null;case 13:return RS(o,l,d);case 4:return at(l,l.stateNode.containerInfo),p=l.pendingProps,o===null?l.child=Tc(l,null,p,d):zn(o,l,p,d),l.child;case 11:return TS(o,l,l.type,l.pendingProps,d);case 7:return zn(o,l,l.pendingProps,d),l.child;case 8:return zn(o,l,l.pendingProps.children,d),l.child;case 12:return zn(o,l,l.pendingProps.children,d),l.child;case 10:return p=l.pendingProps,ho(l,l.type,p.value),zn(o,l,p.children,d),l.child;case 9:return _=l.type._context,p=l.pendingProps.children,Ha(l),_=Zn(_),p=p(_),l.flags|=1,zn(o,l,p,d),l.child;case 14:return wS(o,l,l.type,l.pendingProps,d);case 15:return bS(o,l,l.type,l.pendingProps,d);case 19:return MS(o,l,d);case 31:return p=l.pendingProps,d=l.mode,p={mode:p.mode,children:p.children},o===null?(d=sp(p,d),d.ref=l.ref,l.child=d,d.return=l,l=d):(d=br(o.child,p),d.ref=l.ref,l.child=d,d.return=l,l=d),l;case 22:return ES(o,l,d);case 24:return Ha(l),p=Zn(Cn),o===null?(_=x0(),_===null&&(_=Ut,w=y0(),_.pooledCache=w,w.refCount++,w!==null&&(_.pooledCacheLanes|=d),_=w),l.memoizedState={parent:p,cache:_},T0(l),ho(l,Cn,_)):((o.lanes&d)!==0&&(w0(o,l),jd(l,null,null,d),qd()),_=o.memoizedState,w=l.memoizedState,_.parent!==p?(_={parent:p,cache:p},l.memoizedState=_,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=_),ho(l,Cn,p)):(p=w.cache,ho(l,Cn,p),p!==_.cache&&g0(l,[Cn],d,!0))),zn(o,l,l.pendingProps.children,d),l.child;case 29:throw l.pendingProps}throw Error(i(156,l.tag))}function Mr(o){o.flags|=4}function DS(o,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!qA(l)){if(l=is.current,l!==null&&((gt&4194048)===gt?qs!==null:(gt&62914560)!==gt&&(gt&536870912)===0||l!==qs))throw Fd=_0,gE;o.flags|=8192}}function rp(o,l){l!==null&&(o.flags|=4),o.flags&16384&&(l=o.tag!==22?Mi():536870912,o.lanes|=l,Sc|=l)}function Yd(o,l){if(!bt)switch(o.tailMode){case"hidden":l=o.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?o.tail=null:d.sibling=null;break;case"collapsed":d=o.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:p.sibling=null}}function Qt(o){var l=o.alternate!==null&&o.alternate.child===o.child,d=0,p=0;if(l)for(var _=o.child;_!==null;)d|=_.lanes|_.childLanes,p|=_.subtreeFlags&65011712,p|=_.flags&65011712,_.return=o,_=_.sibling;else for(_=o.child;_!==null;)d|=_.lanes|_.childLanes,p|=_.subtreeFlags,p|=_.flags,_.return=o,_=_.sibling;return o.subtreeFlags|=p,o.childLanes=d,l}function O4(o,l,d){var p=l.pendingProps;switch(h0(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(l),null;case 1:return Qt(l),null;case 3:return d=l.stateNode,p=null,o!==null&&(p=o.memoizedState.cache),l.memoizedState.cache!==p&&(l.flags|=2048),Cr(Cn),Ct(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(o===null||o.child===null)&&(Pd(l)?Mr(l):o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,dE())),Qt(l),null;case 26:return d=l.memoizedState,o===null?(Mr(l),d!==null?(Qt(l),DS(l,d)):(Qt(l),l.flags&=-16777217)):d?d!==o.memoizedState?(Mr(l),Qt(l),DS(l,d)):(Qt(l),l.flags&=-16777217):(o.memoizedProps!==p&&Mr(l),Qt(l),l.flags&=-16777217),null;case 27:nt(l),d=Be.current;var _=l.type;if(o!==null&&l.stateNode!=null)o.memoizedProps!==p&&Mr(l);else{if(!p){if(l.stateNode===null)throw Error(i(166));return Qt(l),null}o=Ee.current,Pd(l)?cE(l):(o=DA(_,p,d),l.stateNode=o,Mr(l))}return Qt(l),null;case 5:if(nt(l),d=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==p&&Mr(l);else{if(!p){if(l.stateNode===null)throw Error(i(166));return Qt(l),null}if(o=Ee.current,Pd(l))cE(l);else{switch(_=vp(Be.current),o){case 1:o=_.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:o=_.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":o=_.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":o=_.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":o=_.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof p.is=="string"?_.createElement("select",{is:p.is}):_.createElement("select"),p.multiple?o.multiple=!0:p.size&&(o.size=p.size);break;default:o=typeof p.is=="string"?_.createElement(d,{is:p.is}):_.createElement(d)}}o[En]=l,o[gn]=p;e:for(_=l.child;_!==null;){if(_.tag===5||_.tag===6)o.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===l)break e;for(;_.sibling===null;){if(_.return===null||_.return===l)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}l.stateNode=o;e:switch($n(o,d,p),d){case"button":case"input":case"select":case"textarea":o=!!p.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Mr(l)}}return Qt(l),l.flags&=-16777217,null;case 6:if(o&&l.stateNode!=null)o.memoizedProps!==p&&Mr(l);else{if(typeof p!="string"&&l.stateNode===null)throw Error(i(166));if(o=Be.current,Pd(l)){if(o=l.stateNode,d=l.memoizedProps,p=null,_=fi,_!==null)switch(_.tag){case 27:case 5:p=_.memoizedProps}o[En]=l,o=!!(o.nodeValue===d||p!==null&&p.suppressHydrationWarning===!0||AA(o.nodeValue,d)),o||Ga(l)}else o=vp(o).createTextNode(p),o[En]=l,l.stateNode=o}return Qt(l),null;case 13:if(p=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(_=Pd(l),p!==null&&p.dehydrated!==null){if(o===null){if(!_)throw Error(i(318));if(_=l.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(i(317));_[En]=l}else Dd(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Qt(l),_=!1}else _=dE(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=_),_=!0;if(!_)return l.flags&256?(Rr(l),l):(Rr(l),null)}if(Rr(l),(l.flags&128)!==0)return l.lanes=d,l;if(d=p!==null,o=o!==null&&o.memoizedState!==null,d){p=l.child,_=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(_=p.alternate.memoizedState.cachePool.pool);var w=null;p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(w=p.memoizedState.cachePool.pool),w!==_&&(p.flags|=2048)}return d!==o&&d&&(l.child.flags|=8192),rp(l,l.updateQueue),Qt(l),null;case 4:return Ct(),o===null&&Ev(l.stateNode.containerInfo),Qt(l),null;case 10:return Cr(l.type),Qt(l),null;case 19:if(xe(In),_=l.memoizedState,_===null)return Qt(l),null;if(p=(l.flags&128)!==0,w=_.rendering,w===null)if(p)Yd(_,!1);else{if(nn!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(w=ep(o),w!==null){for(l.flags|=128,Yd(_,!1),o=w.updateQueue,l.updateQueue=o,rp(l,o),l.subtreeFlags=0,o=d,d=l.child;d!==null;)aE(d,o),d=d.sibling;return ce(In,In.current&1|2),l.child}o=o.sibling}_.tail!==null&&ci()>lp&&(l.flags|=128,p=!0,Yd(_,!1),l.lanes=4194304)}else{if(!p)if(o=ep(w),o!==null){if(l.flags|=128,p=!0,o=o.updateQueue,l.updateQueue=o,rp(l,o),Yd(_,!0),_.tail===null&&_.tailMode==="hidden"&&!w.alternate&&!bt)return Qt(l),null}else 2*ci()-_.renderingStartTime>lp&&d!==536870912&&(l.flags|=128,p=!0,Yd(_,!1),l.lanes=4194304);_.isBackwards?(w.sibling=l.child,l.child=w):(o=_.last,o!==null?o.sibling=w:l.child=w,_.last=w)}return _.tail!==null?(l=_.tail,_.rendering=l,_.tail=l.sibling,_.renderingStartTime=ci(),l.sibling=null,o=In.current,ce(In,p?o&1|2:o&1),l):(Qt(l),null);case 22:case 23:return Rr(l),A0(),p=l.memoizedState!==null,o!==null?o.memoizedState!==null!==p&&(l.flags|=8192):p&&(l.flags|=8192),p?(d&536870912)!==0&&(l.flags&128)===0&&(Qt(l),l.subtreeFlags&6&&(l.flags|=8192)):Qt(l),d=l.updateQueue,d!==null&&rp(l,d.retryQueue),d=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),p=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==d&&(l.flags|=2048),o!==null&&xe($a),null;case 24:return d=null,o!==null&&(d=o.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),Cr(Cn),Qt(l),null;case 25:return null;case 30:return null}throw Error(i(156,l.tag))}function F4(o,l){switch(h0(l),l.tag){case 1:return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return Cr(Cn),Ct(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 26:case 27:case 5:return nt(l),null;case 13:if(Rr(l),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(i(340));Dd()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return xe(In),null;case 4:return Ct(),null;case 10:return Cr(l.type),null;case 22:case 23:return Rr(l),A0(),o!==null&&xe($a),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 24:return Cr(Cn),null;case 25:return null;default:return null}}function kS(o,l){switch(h0(l),l.tag){case 3:Cr(Cn),Ct();break;case 26:case 27:case 5:nt(l);break;case 4:Ct();break;case 13:Rr(l);break;case 19:xe(In);break;case 10:Cr(l.type);break;case 22:case 23:Rr(l),A0(),o!==null&&xe($a);break;case 24:Cr(Cn)}}function Jd(o,l){try{var d=l.updateQueue,p=d!==null?d.lastEffect:null;if(p!==null){var _=p.next;d=_;do{if((d.tag&o)===o){p=void 0;var w=d.create,N=d.inst;p=w(),N.destroy=p}d=d.next}while(d!==_)}}catch(k){Lt(l,l.return,k)}}function xo(o,l,d){try{var p=l.updateQueue,_=p!==null?p.lastEffect:null;if(_!==null){var w=_.next;p=w;do{if((p.tag&o)===o){var N=p.inst,k=N.destroy;if(k!==void 0){N.destroy=void 0,_=l;var $=d,te=k;try{te()}catch(ue){Lt(_,$,ue)}}}p=p.next}while(p!==w)}}catch(ue){Lt(l,l.return,ue)}}function VS(o){var l=o.updateQueue;if(l!==null){var d=o.stateNode;try{wE(l,d)}catch(p){Lt(o,o.return,p)}}}function LS(o,l,d){d.props=Wa(o.type,o.memoizedProps),d.state=o.memoizedState;try{d.componentWillUnmount()}catch(p){Lt(o,l,p)}}function Qd(o,l){try{var d=o.ref;if(d!==null){switch(o.tag){case 26:case 27:case 5:var p=o.stateNode;break;case 30:p=o.stateNode;break;default:p=o.stateNode}typeof d=="function"?o.refCleanup=d(p):d.current=p}}catch(_){Lt(o,l,_)}}function js(o,l){var d=o.ref,p=o.refCleanup;if(d!==null)if(typeof p=="function")try{p()}catch(_){Lt(o,l,_)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(_){Lt(o,l,_)}else d.current=null}function US(o){var l=o.type,d=o.memoizedProps,p=o.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":d.autoFocus&&p.focus();break e;case"img":d.src?p.src=d.src:d.srcSet&&(p.srcset=d.srcSet)}}catch(_){Lt(o,o.return,_)}}function ev(o,l,d){try{var p=o.stateNode;o3(p,o.type,d,l),p[gn]=l}catch(_){Lt(o,o.return,_)}}function OS(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Co(o.type)||o.tag===4}function tv(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||OS(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Co(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function nv(o,l,d){var p=o.tag;if(p===5||p===6)o=o.stateNode,l?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(o,l):(l=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,l.appendChild(o),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=yp));else if(p!==4&&(p===27&&Co(o.type)&&(d=o.stateNode,l=null),o=o.child,o!==null))for(nv(o,l,d),o=o.sibling;o!==null;)nv(o,l,d),o=o.sibling}function op(o,l,d){var p=o.tag;if(p===5||p===6)o=o.stateNode,l?d.insertBefore(o,l):d.appendChild(o);else if(p!==4&&(p===27&&Co(o.type)&&(d=o.stateNode),o=o.child,o!==null))for(op(o,l,d),o=o.sibling;o!==null;)op(o,l,d),o=o.sibling}function FS(o){var l=o.stateNode,d=o.memoizedProps;try{for(var p=o.type,_=l.attributes;_.length;)l.removeAttributeNode(_[0]);$n(l,p,d),l[En]=o,l[gn]=d}catch(w){Lt(o,o.return,w)}}var Pr=!1,dn=!1,iv=!1,BS=typeof WeakSet=="function"?WeakSet:Set,Un=null;function B4(o,l){if(o=o.containerInfo,Cv=Ep,o=Qb(o),t0(o)){if("selectionStart"in o)var d={start:o.selectionStart,end:o.selectionEnd};else e:{d=(d=o.ownerDocument)&&d.defaultView||window;var p=d.getSelection&&d.getSelection();if(p&&p.rangeCount!==0){d=p.anchorNode;var _=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{d.nodeType,w.nodeType}catch($e){d=null;break e}var N=0,k=-1,$=-1,te=0,ue=0,fe=o,se=null;t:for(;;){for(var re;fe!==d||_!==0&&fe.nodeType!==3||(k=N+_),fe!==w||p!==0&&fe.nodeType!==3||($=N+p),fe.nodeType===3&&(N+=fe.nodeValue.length),(re=fe.firstChild)!==null;)se=fe,fe=re;for(;;){if(fe===o)break t;if(se===d&&++te===_&&(k=N),se===w&&++ue===p&&($=N),(re=fe.nextSibling)!==null)break;fe=se,se=fe.parentNode}fe=re}d=k===-1||$===-1?null:{start:k,end:$}}else d=null}d=d||{start:0,end:0}}else d=null;for(Iv={focusedElem:o,selectionRange:d},Ep=!1,Un=l;Un!==null;)if(l=Un,o=l.child,(l.subtreeFlags&1024)!==0&&o!==null)o.return=l,Un=o;else for(;Un!==null;){switch(l=Un,w=l.alternate,o=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&w!==null){o=void 0,d=l,_=w.memoizedProps,w=w.memoizedState,p=d.stateNode;try{var Je=Wa(d.type,_,d.elementType===d.type);o=p.getSnapshotBeforeUpdate(Je,w),p.__reactInternalSnapshotBeforeUpdate=o}catch($e){Lt(d,d.return,$e)}}break;case 3:if((o&1024)!==0){if(o=l.stateNode.containerInfo,d=o.nodeType,d===9)Mv(o);else if(d===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Mv(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=l.sibling,o!==null){o.return=l.return,Un=o;break}Un=l.return}}function qS(o,l,d){var p=d.flags;switch(d.tag){case 0:case 11:case 15:_o(o,d),p&4&&Jd(5,d);break;case 1:if(_o(o,d),p&4)if(o=d.stateNode,l===null)try{o.componentDidMount()}catch(N){Lt(d,d.return,N)}else{var _=Wa(d.type,l.memoizedProps);l=l.memoizedState;try{o.componentDidUpdate(_,l,o.__reactInternalSnapshotBeforeUpdate)}catch(N){Lt(d,d.return,N)}}p&64&&VS(d),p&512&&Qd(d,d.return);break;case 3:if(_o(o,d),p&64&&(o=d.updateQueue,o!==null)){if(l=null,d.child!==null)switch(d.child.tag){case 27:case 5:l=d.child.stateNode;break;case 1:l=d.child.stateNode}try{wE(o,l)}catch(N){Lt(d,d.return,N)}}break;case 27:l===null&&p&4&&FS(d);case 26:case 5:_o(o,d),l===null&&p&4&&US(d),p&512&&Qd(d,d.return);break;case 12:_o(o,d);break;case 13:_o(o,d),p&4&&zS(o,d),p&64&&(o=d.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(d=Y4.bind(null,d),f3(o,d))));break;case 22:if(p=d.memoizedState!==null||Pr,!p){l=l!==null&&l.memoizedState!==null||dn,_=Pr;var w=dn;Pr=p,(dn=l)&&!w?To(o,d,(d.subtreeFlags&8772)!==0):_o(o,d),Pr=_,dn=w}break;case 30:break;default:_o(o,d)}}function jS(o){var l=o.alternate;l!==null&&(o.alternate=null,jS(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&ao(l)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Ht=null,bi=!1;function Dr(o,l,d){for(d=d.child;d!==null;)GS(o,l,d),d=d.sibling}function GS(o,l,d){if(wt&&typeof wt.onCommitFiberUnmount=="function")try{wt.onCommitFiberUnmount(Bt,d)}catch(w){}switch(d.tag){case 26:dn||js(d,l),Dr(o,l,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:dn||js(d,l);var p=Ht,_=bi;Co(d.type)&&(Ht=d.stateNode,bi=!1),Dr(o,l,d),oh(d.stateNode),Ht=p,bi=_;break;case 5:dn||js(d,l);case 6:if(p=Ht,_=bi,Ht=null,Dr(o,l,d),Ht=p,bi=_,Ht!==null)if(bi)try{(Ht.nodeType===9?Ht.body:Ht.nodeName==="HTML"?Ht.ownerDocument.body:Ht).removeChild(d.stateNode)}catch(w){Lt(d,l,w)}else try{Ht.removeChild(d.stateNode)}catch(w){Lt(d,l,w)}break;case 18:Ht!==null&&(bi?(o=Ht,MA(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,d.stateNode),mh(o)):MA(Ht,d.stateNode));break;case 4:p=Ht,_=bi,Ht=d.stateNode.containerInfo,bi=!0,Dr(o,l,d),Ht=p,bi=_;break;case 0:case 11:case 14:case 15:dn||xo(2,d,l),dn||xo(4,d,l),Dr(o,l,d);break;case 1:dn||(js(d,l),p=d.stateNode,typeof p.componentWillUnmount=="function"&&LS(d,l,p)),Dr(o,l,d);break;case 21:Dr(o,l,d);break;case 22:dn=(p=dn)||d.memoizedState!==null,Dr(o,l,d),dn=p;break;default:Dr(o,l,d)}}function zS(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{mh(o)}catch(d){Lt(l,l.return,d)}}function q4(o){switch(o.tag){case 13:case 19:var l=o.stateNode;return l===null&&(l=o.stateNode=new BS),l;case 22:return o=o.stateNode,l=o._retryCache,l===null&&(l=o._retryCache=new BS),l;default:throw Error(i(435,o.tag))}}function sv(o,l){var d=q4(o);l.forEach(function(p){var _=J4.bind(null,o,p);d.has(p)||(d.add(p),p.then(_,_))})}function Li(o,l){var d=l.deletions;if(d!==null)for(var p=0;p<d.length;p++){var _=d[p],w=o,N=l,k=N;e:for(;k!==null;){switch(k.tag){case 27:if(Co(k.type)){Ht=k.stateNode,bi=!1;break e}break;case 5:Ht=k.stateNode,bi=!1;break e;case 3:case 4:Ht=k.stateNode.containerInfo,bi=!0;break e}k=k.return}if(Ht===null)throw Error(i(160));GS(w,N,_),Ht=null,bi=!1,w=_.alternate,w!==null&&(w.return=null),_.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)HS(l,o),l=l.sibling}var ys=null;function HS(o,l){var d=o.alternate,p=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Li(l,o),Ui(o),p&4&&(xo(3,o,o.return),Jd(3,o),xo(5,o,o.return));break;case 1:Li(l,o),Ui(o),p&512&&(dn||d===null||js(d,d.return)),p&64&&Pr&&(o=o.updateQueue,o!==null&&(p=o.callbacks,p!==null&&(d=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=d===null?p:d.concat(p))));break;case 26:var _=ys;if(Li(l,o),Ui(o),p&512&&(dn||d===null||js(d,d.return)),p&4){var w=d!==null?d.memoizedState:null;if(p=o.memoizedState,d===null)if(p===null)if(o.stateNode===null){e:{p=o.type,d=o.memoizedProps,_=_.ownerDocument||_;t:switch(p){case"title":w=_.getElementsByTagName("title")[0],(!w||w[ba]||w[En]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=_.createElement(p),_.head.insertBefore(w,_.querySelector("head > title"))),$n(w,p,d),w[En]=o,cn(w),p=w;break e;case"link":var N=FA("link","href",_).get(p+(d.href||""));if(N){for(var k=0;k<N.length;k++)if(w=N[k],w.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&w.getAttribute("rel")===(d.rel==null?null:d.rel)&&w.getAttribute("title")===(d.title==null?null:d.title)&&w.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){N.splice(k,1);break t}}w=_.createElement(p),$n(w,p,d),_.head.appendChild(w);break;case"meta":if(N=FA("meta","content",_).get(p+(d.content||""))){for(k=0;k<N.length;k++)if(w=N[k],w.getAttribute("content")===(d.content==null?null:""+d.content)&&w.getAttribute("name")===(d.name==null?null:d.name)&&w.getAttribute("property")===(d.property==null?null:d.property)&&w.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&w.getAttribute("charset")===(d.charSet==null?null:d.charSet)){N.splice(k,1);break t}}w=_.createElement(p),$n(w,p,d),_.head.appendChild(w);break;default:throw Error(i(468,p))}w[En]=o,cn(w),p=w}o.stateNode=p}else BA(_,o.type,o.stateNode);else o.stateNode=OA(_,p,o.memoizedProps);else w!==p?(w===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):w.count--,p===null?BA(_,o.type,o.stateNode):OA(_,p,o.memoizedProps)):p===null&&o.stateNode!==null&&ev(o,o.memoizedProps,d.memoizedProps)}break;case 27:Li(l,o),Ui(o),p&512&&(dn||d===null||js(d,d.return)),d!==null&&p&4&&ev(o,o.memoizedProps,d.memoizedProps);break;case 5:if(Li(l,o),Ui(o),p&512&&(dn||d===null||js(d,d.return)),o.flags&32){_=o.stateNode;try{Yi(_,"")}catch(re){Lt(o,o.return,re)}}p&4&&o.stateNode!=null&&(_=o.memoizedProps,ev(o,_,d!==null?d.memoizedProps:_)),p&1024&&(iv=!0);break;case 6:if(Li(l,o),Ui(o),p&4){if(o.stateNode===null)throw Error(i(162));p=o.memoizedProps,d=o.stateNode;try{d.nodeValue=p}catch(re){Lt(o,o.return,re)}}break;case 3:if(Tp=null,_=ys,ys=xp(l.containerInfo),Li(l,o),ys=_,Ui(o),p&4&&d!==null&&d.memoizedState.isDehydrated)try{mh(l.containerInfo)}catch(re){Lt(o,o.return,re)}iv&&(iv=!1,$S(o));break;case 4:p=ys,ys=xp(o.stateNode.containerInfo),Li(l,o),Ui(o),ys=p;break;case 12:Li(l,o),Ui(o);break;case 13:Li(l,o),Ui(o),o.child.flags&8192&&o.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(uv=ci()),p&4&&(p=o.updateQueue,p!==null&&(o.updateQueue=null,sv(o,p)));break;case 22:_=o.memoizedState!==null;var $=d!==null&&d.memoizedState!==null,te=Pr,ue=dn;if(Pr=te||_,dn=ue||$,Li(l,o),dn=ue,Pr=te,Ui(o),p&8192)e:for(l=o.stateNode,l._visibility=_?l._visibility&-2:l._visibility|1,_&&(d===null||$||Pr||dn||Ya(o)),d=null,l=o;;){if(l.tag===5||l.tag===26){if(d===null){$=d=l;try{if(w=$.stateNode,_)N=w.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none";else{k=$.stateNode;var fe=$.memoizedProps.style,se=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;k.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(re){Lt($,$.return,re)}}}else if(l.tag===6){if(d===null){$=l;try{$.stateNode.nodeValue=_?"":$.memoizedProps}catch(re){Lt($,$.return,re)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===o)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break e;for(;l.sibling===null;){if(l.return===null||l.return===o)break e;d===l&&(d=null),l=l.return}d===l&&(d=null),l.sibling.return=l.return,l=l.sibling}p&4&&(p=o.updateQueue,p!==null&&(d=p.retryQueue,d!==null&&(p.retryQueue=null,sv(o,d))));break;case 19:Li(l,o),Ui(o),p&4&&(p=o.updateQueue,p!==null&&(o.updateQueue=null,sv(o,p)));break;case 30:break;case 21:break;default:Li(l,o),Ui(o)}}function Ui(o){var l=o.flags;if(l&2){try{for(var d,p=o.return;p!==null;){if(OS(p)){d=p;break}p=p.return}if(d==null)throw Error(i(160));switch(d.tag){case 27:var _=d.stateNode,w=tv(o);op(o,w,_);break;case 5:var N=d.stateNode;d.flags&32&&(Yi(N,""),d.flags&=-33);var k=tv(o);op(o,k,N);break;case 3:case 4:var $=d.stateNode.containerInfo,te=tv(o);nv(o,te,$);break;default:throw Error(i(161))}}catch(ue){Lt(o,o.return,ue)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function $S(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var l=o;$S(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),o=o.sibling}}function _o(o,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)qS(o,l.alternate,l),l=l.sibling}function Ya(o){for(o=o.child;o!==null;){var l=o;switch(l.tag){case 0:case 11:case 14:case 15:xo(4,l,l.return),Ya(l);break;case 1:js(l,l.return);var d=l.stateNode;typeof d.componentWillUnmount=="function"&&LS(l,l.return,d),Ya(l);break;case 27:oh(l.stateNode);case 26:case 5:js(l,l.return),Ya(l);break;case 22:l.memoizedState===null&&Ya(l);break;case 30:Ya(l);break;default:Ya(l)}o=o.sibling}}function To(o,l,d){for(d=d&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var p=l.alternate,_=o,w=l,N=w.flags;switch(w.tag){case 0:case 11:case 15:To(_,w,d),Jd(4,w);break;case 1:if(To(_,w,d),p=w,_=p.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(te){Lt(p,p.return,te)}if(p=w,_=p.updateQueue,_!==null){var k=p.stateNode;try{var $=_.shared.hiddenCallbacks;if($!==null)for(_.shared.hiddenCallbacks=null,_=0;_<$.length;_++)TE($[_],k)}catch(te){Lt(p,p.return,te)}}d&&N&64&&VS(w),Qd(w,w.return);break;case 27:FS(w);case 26:case 5:To(_,w,d),d&&p===null&&N&4&&US(w),Qd(w,w.return);break;case 12:To(_,w,d);break;case 13:To(_,w,d),d&&N&4&&zS(_,w);break;case 22:w.memoizedState===null&&To(_,w,d),Qd(w,w.return);break;case 30:break;default:To(_,w,d)}l=l.sibling}}function rv(o,l){var d=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==d&&(o!=null&&o.refCount++,d!=null&&Ld(d))}function ov(o,l){o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&Ld(o))}function Gs(o,l,d,p){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)KS(o,l,d,p),l=l.sibling}function KS(o,l,d,p){var _=l.flags;switch(l.tag){case 0:case 11:case 15:Gs(o,l,d,p),_&2048&&Jd(9,l);break;case 1:Gs(o,l,d,p);break;case 3:Gs(o,l,d,p),_&2048&&(o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&Ld(o)));break;case 12:if(_&2048){Gs(o,l,d,p),o=l.stateNode;try{var w=l.memoizedProps,N=w.id,k=w.onPostCommit;typeof k=="function"&&k(N,l.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch($){Lt(l,l.return,$)}}else Gs(o,l,d,p);break;case 13:Gs(o,l,d,p);break;case 23:break;case 22:w=l.stateNode,N=l.alternate,l.memoizedState!==null?w._visibility&2?Gs(o,l,d,p):Xd(o,l):w._visibility&2?Gs(o,l,d,p):(w._visibility|=2,wc(o,l,d,p,(l.subtreeFlags&10256)!==0)),_&2048&&rv(N,l);break;case 24:Gs(o,l,d,p),_&2048&&ov(l.alternate,l);break;default:Gs(o,l,d,p)}}function wc(o,l,d,p,_){for(_=_&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var w=o,N=l,k=d,$=p,te=N.flags;switch(N.tag){case 0:case 11:case 15:wc(w,N,k,$,_),Jd(8,N);break;case 23:break;case 22:var ue=N.stateNode;N.memoizedState!==null?ue._visibility&2?wc(w,N,k,$,_):Xd(w,N):(ue._visibility|=2,wc(w,N,k,$,_)),_&&te&2048&&rv(N.alternate,N);break;case 24:wc(w,N,k,$,_),_&&te&2048&&ov(N.alternate,N);break;default:wc(w,N,k,$,_)}l=l.sibling}}function Xd(o,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var d=o,p=l,_=p.flags;switch(p.tag){case 22:Xd(d,p),_&2048&&rv(p.alternate,p);break;case 24:Xd(d,p),_&2048&&ov(p.alternate,p);break;default:Xd(d,p)}l=l.sibling}}var Zd=8192;function bc(o){if(o.subtreeFlags&Zd)for(o=o.child;o!==null;)WS(o),o=o.sibling}function WS(o){switch(o.tag){case 26:bc(o),o.flags&Zd&&o.memoizedState!==null&&A3(ys,o.memoizedState,o.memoizedProps);break;case 5:bc(o);break;case 3:case 4:var l=ys;ys=xp(o.stateNode.containerInfo),bc(o),ys=l;break;case 22:o.memoizedState===null&&(l=o.alternate,l!==null&&l.memoizedState!==null?(l=Zd,Zd=16777216,bc(o),Zd=l):bc(o));break;default:bc(o)}}function YS(o){var l=o.alternate;if(l!==null&&(o=l.child,o!==null)){l.child=null;do l=o.sibling,o.sibling=null,o=l;while(o!==null)}}function eh(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var p=l[d];Un=p,QS(p,o)}YS(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)JS(o),o=o.sibling}function JS(o){switch(o.tag){case 0:case 11:case 15:eh(o),o.flags&2048&&xo(9,o,o.return);break;case 3:eh(o);break;case 12:eh(o);break;case 22:var l=o.stateNode;o.memoizedState!==null&&l._visibility&2&&(o.return===null||o.return.tag!==13)?(l._visibility&=-3,ap(o)):eh(o);break;default:eh(o)}}function ap(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var p=l[d];Un=p,QS(p,o)}YS(o)}for(o=o.child;o!==null;){switch(l=o,l.tag){case 0:case 11:case 15:xo(8,l,l.return),ap(l);break;case 22:d=l.stateNode,d._visibility&2&&(d._visibility&=-3,ap(l));break;default:ap(l)}o=o.sibling}}function QS(o,l){for(;Un!==null;){var d=Un;switch(d.tag){case 0:case 11:case 15:xo(8,d,l);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var p=d.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:Ld(d.memoizedState.cache)}if(p=d.child,p!==null)p.return=d,Un=p;else e:for(d=o;Un!==null;){p=Un;var _=p.sibling,w=p.return;if(jS(p),p===d){Un=null;break e}if(_!==null){_.return=w,Un=_;break e}Un=w}}}var j4={getCacheForType:function(o){var l=Zn(Cn),d=l.data.get(o);return d===void 0&&(d=o(),l.data.set(o,d)),d}},G4=typeof WeakMap=="function"?WeakMap:Map,It=0,Ut=null,lt=null,gt=0,Rt=0,Oi=null,wo=!1,Ec=!1,av=!1,kr=0,nn=0,bo=0,Ja=0,lv=0,ss=0,Sc=0,th=null,Ei=null,cv=!1,uv=0,lp=1/0,cp=null,Eo=null,Hn=0,So=null,Ac=null,Cc=0,dv=0,hv=null,XS=null,nh=0,fv=null;function Fi(){if((It&2)!==0&&gt!==0)return gt&-gt;if(ne.T!==null){var o=mc;return o!==0?o:_v()}return ro()}function ZS(){ss===0&&(ss=(gt&536870912)===0||bt?ln():536870912);var o=is.current;return o!==null&&(o.flags|=32),ss}function Bi(o,l,d){(o===Ut&&(Rt===2||Rt===9)||o.cancelPendingCommit!==null)&&(Ic(o,0),Ao(o,gt,ss,!1)),hr(o,d),((It&2)===0||o!==Ut)&&(o===Ut&&((It&2)===0&&(Ja|=d),nn===4&&Ao(o,gt,ss,!1)),zs(o))}function eA(o,l,d){if((It&6)!==0)throw Error(i(327));var p=!d&&(l&124)===0&&(l&o.expiredLanes)===0||He(o,l),_=p?$4(o,l):gv(o,l,!0),w=p;do{if(_===0){Ec&&!p&&Ao(o,l,0,!1);break}else{if(d=o.current.alternate,w&&!z4(d)){_=gv(o,l,!1),w=!1;continue}if(_===2){if(w=l,o.errorRecoveryDisabledLanes&w)var N=0;else N=o.pendingLanes&-536870913,N=N!==0?N:N&536870912?536870912:0;if(N!==0){l=N;e:{var k=o;_=th;var $=k.current.memoizedState.isDehydrated;if($&&(Ic(k,N).flags|=256),N=gv(k,N,!1),N!==2){if(av&&!$){k.errorRecoveryDisabledLanes|=w,Ja|=w,_=4;break e}w=Ei,Ei=_,w!==null&&(Ei===null?Ei=w:Ei.push.apply(Ei,w))}_=N}if(w=!1,_!==2)continue}}if(_===1){Ic(o,0),Ao(o,l,0,!0);break}e:{switch(p=o,w=_,w){case 0:case 1:throw Error(i(345));case 4:if((l&4194048)!==l)break;case 6:Ao(p,l,ss,!wo);break e;case 2:Ei=null;break;case 3:case 5:break;default:throw Error(i(329))}if((l&62914560)===l&&(_=uv+300-ci(),10<_)){if(Ao(p,l,ss,!wo),Ke(p,0,!0)!==0)break e;p.timeoutHandle=RA(tA.bind(null,p,d,Ei,cp,cv,l,ss,Ja,Sc,wo,w,2,-0,0),_);break e}tA(p,d,Ei,cp,cv,l,ss,Ja,Sc,wo,w,0,-0,0)}}break}while(!0);zs(o)}function tA(o,l,d,p,_,w,N,k,$,te,ue,fe,se,re){if(o.timeoutHandle=-1,fe=l.subtreeFlags,(fe&8192||(fe&16785408)===16785408)&&(ch={stylesheets:null,count:0,unsuspend:S3},WS(l),fe=C3(),fe!==null)){o.cancelPendingCommit=fe(lA.bind(null,o,l,w,d,p,_,N,k,$,ue,1,se,re)),Ao(o,w,N,!te);return}lA(o,l,w,d,p,_,N,k,$)}function z4(o){for(var l=o;;){var d=l.tag;if((d===0||d===11||d===15)&&l.flags&16384&&(d=l.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var p=0;p<d.length;p++){var _=d[p],w=_.getSnapshot;_=_.value;try{if(!ki(w(),_))return!1}catch(N){return!1}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Ao(o,l,d,p){l&=~lv,l&=~Ja,o.suspendedLanes|=l,o.pingedLanes&=~l,p&&(o.warmLanes|=l),p=o.expirationTimes;for(var _=l;0<_;){var w=31-Dn(_),N=1<<w;p[w]=-1,_&=~N}d!==0&&Rs(o,d,l)}function up(){return(It&6)===0?(ih(0),!1):!0}function mv(){if(lt!==null){if(Rt===0)var o=lt.return;else o=lt,Ar=za=null,M0(o),_c=null,Kd=0,o=lt;for(;o!==null;)kS(o.alternate,o),o=o.return;lt=null}}function Ic(o,l){var d=o.timeoutHandle;d!==-1&&(o.timeoutHandle=-1,l3(d)),d=o.cancelPendingCommit,d!==null&&(o.cancelPendingCommit=null,d()),mv(),Ut=o,lt=d=br(o.current,null),gt=l,Rt=0,Oi=null,wo=!1,Ec=He(o,l),av=!1,Sc=ss=lv=Ja=bo=nn=0,Ei=th=null,cv=!1,(l&8)!==0&&(l|=l&32);var p=o.entangledLanes;if(p!==0)for(o=o.entanglements,p&=l;0<p;){var _=31-Dn(p),w=1<<_;l|=o[_],p&=~w}return kr=l,Pm(),d}function nA(o,l){st=null,ne.H=Qm,l===Od||l===qm?(l=xE(),Rt=3):l===gE?(l=xE(),Rt=4):Rt=l===_S?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Oi=l,lt===null&&(nn=1,np(o,Zi(l,o.current)))}function iA(){var o=ne.H;return ne.H=Qm,o===null?Qm:o}function sA(){var o=ne.A;return ne.A=j4,o}function pv(){nn=4,wo||(gt&4194048)!==gt&&is.current!==null||(Ec=!0),(bo&134217727)===0&&(Ja&134217727)===0||Ut===null||Ao(Ut,gt,ss,!1)}function gv(o,l,d){var p=It;It|=2;var _=iA(),w=sA();(Ut!==o||gt!==l)&&(cp=null,Ic(o,l)),l=!1;var N=nn;e:do try{if(Rt!==0&&lt!==null){var k=lt,$=Oi;switch(Rt){case 8:mv(),N=6;break e;case 3:case 2:case 9:case 6:is.current===null&&(l=!0);var te=Rt;if(Rt=0,Oi=null,Rc(o,k,$,te),d&&Ec){N=0;break e}break;default:te=Rt,Rt=0,Oi=null,Rc(o,k,$,te)}}H4(),N=nn;break}catch(ue){nA(o,ue)}while(!0);return l&&o.shellSuspendCounter++,Ar=za=null,It=p,ne.H=_,ne.A=w,lt===null&&(Ut=null,gt=0,Pm()),N}function H4(){for(;lt!==null;)rA(lt)}function $4(o,l){var d=It;It|=2;var p=iA(),_=sA();Ut!==o||gt!==l?(cp=null,lp=ci()+500,Ic(o,l)):Ec=He(o,l);e:do try{if(Rt!==0&&lt!==null){l=lt;var w=Oi;t:switch(Rt){case 1:Rt=0,Oi=null,Rc(o,l,w,1);break;case 2:case 9:if(yE(w)){Rt=0,Oi=null,oA(l);break}l=function(){Rt!==2&&Rt!==9||Ut!==o||(Rt=7),zs(o)},w.then(l,l);break e;case 3:Rt=7;break e;case 4:Rt=5;break e;case 7:yE(w)?(Rt=0,Oi=null,oA(l)):(Rt=0,Oi=null,Rc(o,l,w,7));break;case 5:var N=null;switch(lt.tag){case 26:N=lt.memoizedState;case 5:case 27:var k=lt;if(!N||qA(N)){Rt=0,Oi=null;var $=k.sibling;if($!==null)lt=$;else{var te=k.return;te!==null?(lt=te,dp(te)):lt=null}break t}}Rt=0,Oi=null,Rc(o,l,w,5);break;case 6:Rt=0,Oi=null,Rc(o,l,w,6);break;case 8:mv(),nn=6;break e;default:throw Error(i(462))}}K4();break}catch(ue){nA(o,ue)}while(!0);return Ar=za=null,ne.H=p,ne.A=_,It=d,lt!==null?0:(Ut=null,gt=0,Pm(),nn)}function K4(){for(;lt!==null&&!fs();)rA(lt)}function rA(o){var l=PS(o.alternate,o,kr);o.memoizedProps=o.pendingProps,l===null?dp(o):lt=l}function oA(o){var l=o,d=l.alternate;switch(l.tag){case 15:case 0:l=AS(d,l,l.pendingProps,l.type,void 0,gt);break;case 11:l=AS(d,l,l.pendingProps,l.type.render,l.ref,gt);break;case 5:M0(l);default:kS(d,l),l=lt=aE(l,kr),l=PS(d,l,kr)}o.memoizedProps=o.pendingProps,l===null?dp(o):lt=l}function Rc(o,l,d,p){Ar=za=null,M0(l),_c=null,Kd=0;var _=l.return;try{if(L4(o,_,l,d,gt)){nn=1,np(o,Zi(d,o.current)),lt=null;return}}catch(w){if(_!==null)throw lt=_,w;nn=1,np(o,Zi(d,o.current)),lt=null;return}l.flags&32768?(bt||p===1?o=!0:Ec||(gt&536870912)!==0?o=!1:(wo=o=!0,(p===2||p===9||p===3||p===6)&&(p=is.current,p!==null&&p.tag===13&&(p.flags|=16384))),aA(l,o)):dp(l)}function dp(o){var l=o;do{if((l.flags&32768)!==0){aA(l,wo);return}o=l.return;var d=O4(l.alternate,l,kr);if(d!==null){lt=d;return}if(l=l.sibling,l!==null){lt=l;return}lt=l=o}while(l!==null);nn===0&&(nn=5)}function aA(o,l){do{var d=F4(o.alternate,o);if(d!==null){d.flags&=32767,lt=d;return}if(d=o.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!l&&(o=o.sibling,o!==null)){lt=o;return}lt=o=d}while(o!==null);nn=6,lt=null}function lA(o,l,d,p,_,w,N,k,$){o.cancelPendingCommit=null;do hp();while(Hn!==0);if((It&6)!==0)throw Error(i(327));if(l!==null){if(l===o.current)throw Error(i(177));if(w=l.lanes|l.childLanes,w|=o0,fd(o,d,w,N,k,$),o===Ut&&(lt=Ut=null,gt=0),Ac=l,So=o,Cc=d,dv=w,hv=_,XS=p,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,Q4(Gt,function(){return fA(),null})):(o.callbackNode=null,o.callbackPriority=0),p=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||p){p=ne.T,ne.T=null,_=de.p,de.p=2,N=It,It|=4;try{B4(o,l,d)}finally{It=N,de.p=_,ne.T=p}}Hn=1,cA(),uA(),dA()}}function cA(){if(Hn===1){Hn=0;var o=So,l=Ac,d=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||d){d=ne.T,ne.T=null;var p=de.p;de.p=2;var _=It;It|=4;try{HS(l,o);var w=Iv,N=Qb(o.containerInfo),k=w.focusedElem,$=w.selectionRange;if(N!==k&&k&&k.ownerDocument&&Jb(k.ownerDocument.documentElement,k)){if($!==null&&t0(k)){var te=$.start,ue=$.end;if(ue===void 0&&(ue=te),"selectionStart"in k)k.selectionStart=te,k.selectionEnd=Math.min(ue,k.value.length);else{var fe=k.ownerDocument||document,se=fe&&fe.defaultView||window;if(se.getSelection){var re=se.getSelection(),Je=k.textContent.length,$e=Math.min($.start,Je),Vt=$.end===void 0?$e:Math.min($.end,Je);!re.extend&&$e>Vt&&(N=Vt,Vt=$e,$e=N);var Q=Yb(k,$e),Y=Yb(k,Vt);if(Q&&Y&&(re.rangeCount!==1||re.anchorNode!==Q.node||re.anchorOffset!==Q.offset||re.focusNode!==Y.node||re.focusOffset!==Y.offset)){var ee=fe.createRange();ee.setStart(Q.node,Q.offset),re.removeAllRanges(),$e>Vt?(re.addRange(ee),re.extend(Y.node,Y.offset)):(ee.setEnd(Y.node,Y.offset),re.addRange(ee))}}}}for(fe=[],re=k;re=re.parentNode;)re.nodeType===1&&fe.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<fe.length;k++){var he=fe[k];he.element.scrollLeft=he.left,he.element.scrollTop=he.top}}Ep=!!Cv,Iv=Cv=null}finally{It=_,de.p=p,ne.T=d}}o.current=l,Hn=2}}function uA(){if(Hn===2){Hn=0;var o=So,l=Ac,d=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||d){d=ne.T,ne.T=null;var p=de.p;de.p=2;var _=It;It|=4;try{qS(o,l.alternate,l)}finally{It=_,de.p=p,ne.T=d}}Hn=3}}function dA(){if(Hn===4||Hn===3){Hn=0,ur();var o=So,l=Ac,d=Cc,p=XS;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Hn=5:(Hn=0,Ac=So=null,hA(o,o.pendingLanes));var _=o.pendingLanes;if(_===0&&(Eo=null),$l(d),l=l.stateNode,wt&&typeof wt.onCommitFiberRoot=="function")try{wt.onCommitFiberRoot(Bt,l,void 0,(l.current.flags&128)===128)}catch($){}if(p!==null){l=ne.T,_=de.p,de.p=2,ne.T=null;try{for(var w=o.onRecoverableError,N=0;N<p.length;N++){var k=p[N];w(k.value,{componentStack:k.stack})}}finally{ne.T=l,de.p=_}}(Cc&3)!==0&&hp(),zs(o),_=o.pendingLanes,(d&4194090)!==0&&(_&42)!==0?o===fv?nh++:(nh=0,fv=o):nh=0,ih(0)}}function hA(o,l){(o.pooledCacheLanes&=l)===0&&(l=o.pooledCache,l!=null&&(o.pooledCache=null,Ld(l)))}function hp(o){return cA(),uA(),dA(),fA()}function fA(){if(Hn!==5)return!1;var o=So,l=dv;dv=0;var d=$l(Cc),p=ne.T,_=de.p;try{de.p=32>d?32:d,ne.T=null,d=hv,hv=null;var w=So,N=Cc;if(Hn=0,Ac=So=null,Cc=0,(It&6)!==0)throw Error(i(331));var k=It;if(It|=4,JS(w.current),KS(w,w.current,N,d),It=k,ih(0,!1),wt&&typeof wt.onPostCommitFiberRoot=="function")try{wt.onPostCommitFiberRoot(Bt,w)}catch($){}return!0}finally{de.p=_,ne.T=p,hA(o,l)}}function mA(o,l,d){l=Zi(d,l),l=H0(o.stateNode,l,2),o=po(o,l,2),o!==null&&(hr(o,2),zs(o))}function Lt(o,l,d){if(o.tag===3)mA(o,o,d);else for(;l!==null;){if(l.tag===3){mA(l,o,d);break}else if(l.tag===1){var p=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Eo===null||!Eo.has(p))){o=Zi(d,o),d=vS(2),p=po(l,d,2),p!==null&&(xS(d,p,l,o),hr(p,2),zs(p));break}}l=l.return}}function yv(o,l,d){var p=o.pingCache;if(p===null){p=o.pingCache=new G4;var _=new Set;p.set(l,_)}else _=p.get(l),_===void 0&&(_=new Set,p.set(l,_));_.has(d)||(av=!0,_.add(d),o=W4.bind(null,o,l,d),l.then(o,o))}function W4(o,l,d){var p=o.pingCache;p!==null&&p.delete(l),o.pingedLanes|=o.suspendedLanes&d,o.warmLanes&=~d,Ut===o&&(gt&d)===d&&(nn===4||nn===3&&(gt&62914560)===gt&&300>ci()-uv?(It&2)===0&&Ic(o,0):lv|=d,Sc===gt&&(Sc=0)),zs(o)}function pA(o,l){l===0&&(l=Mi()),o=uc(o,l),o!==null&&(hr(o,l),zs(o))}function Y4(o){var l=o.memoizedState,d=0;l!==null&&(d=l.retryLane),pA(o,d)}function J4(o,l){var d=0;switch(o.tag){case 13:var p=o.stateNode,_=o.memoizedState;_!==null&&(d=_.retryLane);break;case 19:p=o.stateNode;break;case 22:p=o.stateNode._retryCache;break;default:throw Error(i(314))}p!==null&&p.delete(l),pA(o,d)}function Q4(o,l){return li(o,l)}var fp=null,Nc=null,vv=!1,mp=!1,xv=!1,Qa=0;function zs(o){o!==Nc&&o.next===null&&(Nc===null?fp=Nc=o:Nc=Nc.next=o),mp=!0,vv||(vv=!0,Z4())}function ih(o,l){if(!xv&&mp){xv=!0;do for(var d=!1,p=fp;p!==null;){if(o!==0){var _=p.pendingLanes;if(_===0)var w=0;else{var N=p.suspendedLanes,k=p.pingedLanes;w=(1<<31-Dn(42|o)+1)-1,w&=_&~(N&~k),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(d=!0,xA(p,w))}else w=gt,w=Ke(p,p===Ut?w:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(w&3)===0||He(p,w)||(d=!0,xA(p,w));p=p.next}while(d);xv=!1}}function X4(){gA()}function gA(){mp=vv=!1;var o=0;Qa!==0&&(a3()&&(o=Qa),Qa=0);for(var l=ci(),d=null,p=fp;p!==null;){var _=p.next,w=yA(p,l);w===0?(p.next=null,d===null?fp=_:d.next=_,_===null&&(Nc=d)):(d=p,(o!==0||(w&3)!==0)&&(mp=!0)),p=_}ih(o)}function yA(o,l){for(var d=o.suspendedLanes,p=o.pingedLanes,_=o.expirationTimes,w=o.pendingLanes&-62914561;0<w;){var N=31-Dn(w),k=1<<N,$=_[N];$===-1?((k&d)===0||(k&p)!==0)&&(_[N]=Ye(k,l)):$<=l&&(o.expiredLanes|=k),w&=~k}if(l=Ut,d=gt,d=Ke(o,o===l?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),p=o.callbackNode,d===0||o===l&&(Rt===2||Rt===9)||o.cancelPendingCommit!==null)return p!==null&&p!==null&&Ti(p),o.callbackNode=null,o.callbackPriority=0;if((d&3)===0||He(o,d)){if(l=d&-d,l===o.callbackPriority)return l;switch(p!==null&&Ti(p),$l(d)){case 2:case 8:d=Ki;break;case 32:d=Gt;break;case 268435456:d=no;break;default:d=Gt}return p=vA.bind(null,o),d=li(d,p),o.callbackPriority=l,o.callbackNode=d,l}return p!==null&&p!==null&&Ti(p),o.callbackPriority=2,o.callbackNode=null,2}function vA(o,l){if(Hn!==0&&Hn!==5)return o.callbackNode=null,o.callbackPriority=0,null;var d=o.callbackNode;if(hp()&&o.callbackNode!==d)return null;var p=gt;return p=Ke(o,o===Ut?p:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),p===0?null:(eA(o,p,l),yA(o,ci()),o.callbackNode!=null&&o.callbackNode===d?vA.bind(null,o):null)}function xA(o,l){if(hp())return null;eA(o,l,!0)}function Z4(){c3(function(){(It&6)!==0?li(Ta,X4):gA()})}function _v(){return Qa===0&&(Qa=ln()),Qa}function _A(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Xl(""+o)}function TA(o,l){var d=l.ownerDocument.createElement("input");return d.name=l.name,d.value=l.value,o.id&&d.setAttribute("form",o.id),l.parentNode.insertBefore(d,l),o=new FormData(o),d.parentNode.removeChild(d),o}function e3(o,l,d,p,_){if(l==="submit"&&d&&d.stateNode===_){var w=_A((_[gn]||null).action),N=p.submitter;N&&(l=(l=N[gn]||null)?_A(l.formAction):N.getAttribute("formAction"),l!==null&&(w=l,N=null));var k=new Zl("action","action",null,p,_);o.push({event:k,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(Qa!==0){var $=N?TA(_,N):new FormData(_);B0(d,{pending:!0,data:$,method:_.method,action:w},null,$)}}else typeof w=="function"&&(k.preventDefault(),$=N?TA(_,N):new FormData(_),B0(d,{pending:!0,data:$,method:_.method,action:w},w,$))},currentTarget:_}]})}}for(var Tv=0;Tv<r0.length;Tv++){var wv=r0[Tv],t3=wv.toLowerCase(),n3=wv[0].toUpperCase()+wv.slice(1);gs(t3,"on"+n3)}gs(eE,"onAnimationEnd"),gs(tE,"onAnimationIteration"),gs(nE,"onAnimationStart"),gs("dblclick","onDoubleClick"),gs("focusin","onFocus"),gs("focusout","onBlur"),gs(x4,"onTransitionRun"),gs(_4,"onTransitionStart"),gs(T4,"onTransitionCancel"),gs(iE,"onTransitionEnd"),mr("onMouseEnter",["mouseout","mouseover"]),mr("onMouseLeave",["mouseout","mouseover"]),mr("onPointerEnter",["pointerout","pointerover"]),mr("onPointerLeave",["pointerout","pointerover"]),ms("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ms("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ms("onBeforeInput",["compositionend","keypress","textInput","paste"]),ms("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ms("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ms("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),i3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(sh));function wA(o,l){l=(l&4)!==0;for(var d=0;d<o.length;d++){var p=o[d],_=p.event;p=p.listeners;e:{var w=void 0;if(l)for(var N=p.length-1;0<=N;N--){var k=p[N],$=k.instance,te=k.currentTarget;if(k=k.listener,$!==w&&_.isPropagationStopped())break e;w=k,_.currentTarget=te;try{w(_)}catch(ue){tp(ue)}_.currentTarget=null,w=$}else for(N=0;N<p.length;N++){if(k=p[N],$=k.instance,te=k.currentTarget,k=k.listener,$!==w&&_.isPropagationStopped())break e;w=k,_.currentTarget=te;try{w(_)}catch(ue){tp(ue)}_.currentTarget=null,w=$}}}}function ct(o,l){var d=l[pd];d===void 0&&(d=l[pd]=new Set);var p=o+"__bubble";d.has(p)||(bA(l,o,2,!1),d.add(p))}function bv(o,l,d){var p=0;l&&(p|=4),bA(d,o,p,l)}var pp="_reactListening"+Math.random().toString(36).slice(2);function Ev(o){if(!o[pp]){o[pp]=!0,gd.forEach(function(d){d!=="selectionchange"&&(i3.has(d)||bv(d,!1,o),bv(d,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[pp]||(l[pp]=!0,bv("selectionchange",!1,l))}}function bA(o,l,d,p){switch(KA(l)){case 2:var _=N3;break;case 8:_=M3;break;default:_=Ov}d=_.bind(null,l,d,o),_=void 0,!Qi||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(_=!0),p?_!==void 0?o.addEventListener(l,d,{capture:!0,passive:_}):o.addEventListener(l,d,!0):_!==void 0?o.addEventListener(l,d,{passive:_}):o.addEventListener(l,d,!1)}function Sv(o,l,d,p,_){var w=p;if((l&1)===0&&(l&2)===0&&p!==null)e:for(;;){if(p===null)return;var N=p.tag;if(N===3||N===4){var k=p.stateNode.containerInfo;if(k===_)break;if(N===4)for(N=p.return;N!==null;){var $=N.tag;if(($===3||$===4)&&N.stateNode.containerInfo===_)return;N=N.return}for(;k!==null;){if(N=fr(k),N===null)return;if($=N.tag,$===5||$===6||$===26||$===27){p=w=N;continue e}k=k.parentNode}}p=p.return}ym(function(){var te=w,ue=Ji(d),fe=[];e:{var se=sE.get(o);if(se!==void 0){var re=Zl,Je=o;switch(o){case"keypress":if(Vs(d)===0)break e;case"keydown":case"keyup":re=rc;break;case"focusin":Je="focus",re=nc;break;case"focusout":Je="blur",re=nc;break;case"beforeblur":case"afterblur":re=nc;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=Xi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=Qy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=Sm;break;case eE:case tE:case nE:re=ic;break;case iE:re=Cm;break;case"scroll":case"scrollend":re=vm;break;case"wheel":re=oc;break;case"copy":case"cut":case"paste":re=sc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=Id;break;case"toggle":case"beforetoggle":re=Rm}var $e=(l&4)!==0,Vt=!$e&&(o==="scroll"||o==="scrollend"),Q=$e?se!==null?se+"Capture":null:se;$e=[];for(var Y=te,ee;Y!==null;){var he=Y;if(ee=he.stateNode,he=he.tag,he!==5&&he!==26&&he!==27||ee===null||Q===null||(he=Na(Y,Q),he!=null&&$e.push(rh(Y,he,ee))),Vt)break;Y=Y.return}0<$e.length&&(se=new re(se,Je,null,d,ue),fe.push({event:se,listeners:$e}))}}if((l&7)===0){e:{if(se=o==="mouseover"||o==="pointerover",re=o==="mouseout"||o==="pointerout",se&&d!==yr&&(Je=d.relatedTarget||d.fromElement)&&(fr(Je)||Je[Wi]))break e;if((re||se)&&(se=ue.window===ue?ue:(se=ue.ownerDocument)?se.defaultView||se.parentWindow:window,re?(Je=d.relatedTarget||d.toElement,re=te,Je=Je?fr(Je):null,Je!==null&&(Vt=r(Je),$e=Je.tag,Je!==Vt||$e!==5&&$e!==27&&$e!==6)&&(Je=null)):(re=null,Je=te),re!==Je)){if($e=Xi,he="onMouseLeave",Q="onMouseEnter",Y="mouse",(o==="pointerout"||o==="pointerover")&&($e=Id,he="onPointerLeave",Q="onPointerEnter",Y="pointer"),Vt=re==null?se:Ms(re),ee=Je==null?se:Ms(Je),se=new $e(he,Y+"leave",re,d,ue),se.target=Vt,se.relatedTarget=ee,he=null,fr(ue)===te&&($e=new $e(Q,Y+"enter",Je,d,ue),$e.target=ee,$e.relatedTarget=Vt,he=$e),Vt=he,re&&Je)t:{for($e=re,Q=Je,Y=0,ee=$e;ee;ee=Mc(ee))Y++;for(ee=0,he=Q;he;he=Mc(he))ee++;for(;0<Y-ee;)$e=Mc($e),Y--;for(;0<ee-Y;)Q=Mc(Q),ee--;for(;Y--;){if($e===Q||Q!==null&&$e===Q.alternate)break t;$e=Mc($e),Q=Mc(Q)}$e=null}else $e=null;re!==null&&EA(fe,se,re,$e,!1),Je!==null&&Vt!==null&&EA(fe,Vt,Je,$e,!0)}}e:{if(se=te?Ms(te):window,re=se.nodeName&&se.nodeName.toLowerCase(),re==="select"||re==="input"&&se.type==="file")var Pe=Gb;else if(An(se))if(zb)Pe=g4;else{Pe=m4;var ot=f4}else re=se.nodeName,!re||re.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?te&&Td(te.elementType)&&(Pe=Gb):Pe=p4;if(Pe&&(Pe=Pe(o,te))){wr(fe,Pe,d,ue);break e}ot&&ot(o,se,te),o==="focusout"&&te&&se.type==="number"&&te.memoizedProps.value!=null&&co(se,"number",se.value)}switch(ot=te?Ms(te):window,o){case"focusin":(An(ot)||ot.contentEditable==="true")&&(ac=ot,n0=te,Md=null);break;case"focusout":Md=n0=ac=null;break;case"mousedown":i0=!0;break;case"contextmenu":case"mouseup":case"dragend":i0=!1,Xb(fe,d,ue);break;case"selectionchange":if(v4)break;case"keydown":case"keyup":Xb(fe,d,ue)}var qe;if(Os)e:{switch(o){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else mt?ae(o,d)&&(We="onCompositionEnd"):o==="keydown"&&d.keyCode===229&&(We="onCompositionStart");We&&(I&&d.locale!=="ko"&&(mt||We!=="onCompositionStart"?We==="onCompositionEnd"&&mt&&(qe=bd()):(ks=ue,uo="value"in ks?ks.value:ks.textContent,mt=!0)),ot=gp(te,We),0<ot.length&&(We=new Ad(We,o,null,d,ue),fe.push({event:We,listeners:ot}),qe?We.data=qe:(qe=we(d),qe!==null&&(We.data=qe)))),(qe=E?Sn(o,d):pt(o,d))&&(We=gp(te,"onBeforeInput"),0<We.length&&(ot=new Ad("onBeforeInput","beforeinput",null,d,ue),fe.push({event:ot,listeners:We}),ot.data=qe)),e3(fe,o,te,d,ue)}wA(fe,l)})}function rh(o,l,d){return{instance:o,listener:l,currentTarget:d}}function gp(o,l){for(var d=l+"Capture",p=[];o!==null;){var _=o,w=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||w===null||(_=Na(o,d),_!=null&&p.unshift(rh(o,_,w)),_=Na(o,l),_!=null&&p.push(rh(o,_,w))),o.tag===3)return p;o=o.return}return[]}function Mc(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function EA(o,l,d,p,_){for(var w=l._reactName,N=[];d!==null&&d!==p;){var k=d,$=k.alternate,te=k.stateNode;if(k=k.tag,$!==null&&$===p)break;k!==5&&k!==26&&k!==27||te===null||($=te,_?(te=Na(d,w),te!=null&&N.unshift(rh(d,te,$))):_||(te=Na(d,w),te!=null&&N.push(rh(d,te,$)))),d=d.return}N.length!==0&&o.push({event:l,listeners:N})}var s3=/\r\n?/g,r3=/\u0000|\uFFFD/g;function SA(o){return(typeof o=="string"?o:""+o).replace(s3,`
`).replace(r3,"")}function AA(o,l){return l=SA(l),SA(o)===l}function yp(){}function kt(o,l,d,p,_,w){switch(d){case"children":typeof p=="string"?l==="body"||l==="textarea"&&p===""||Yi(o,p):(typeof p=="number"||typeof p=="bigint")&&l!=="body"&&Yi(o,""+p);break;case"className":Ps(o,"class",p);break;case"tabIndex":Ps(o,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":Ps(o,d,p);break;case"style":_d(o,p,w);break;case"data":if(l!=="object"){Ps(o,"data",p);break}case"src":case"href":if(p===""&&(l!=="a"||d!=="href")){o.removeAttribute(d);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){o.removeAttribute(d);break}p=Xl(""+p),o.setAttribute(d,p);break;case"action":case"formAction":if(typeof p=="function"){o.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(d==="formAction"?(l!=="input"&&kt(o,l,"name",_.name,_,null),kt(o,l,"formEncType",_.formEncType,_,null),kt(o,l,"formMethod",_.formMethod,_,null),kt(o,l,"formTarget",_.formTarget,_,null)):(kt(o,l,"encType",_.encType,_,null),kt(o,l,"method",_.method,_,null),kt(o,l,"target",_.target,_,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){o.removeAttribute(d);break}p=Xl(""+p),o.setAttribute(d,p);break;case"onClick":p!=null&&(o.onclick=yp);break;case"onScroll":p!=null&&ct("scroll",o);break;case"onScrollEnd":p!=null&&ct("scrollend",o);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(i(61));if(d=p.__html,d!=null){if(_.children!=null)throw Error(i(60));o.innerHTML=d}}break;case"multiple":o.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":o.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){o.removeAttribute("xlink:href");break}d=Xl(""+p),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(d,""+p):o.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(d,""):o.removeAttribute(d);break;case"capture":case"download":p===!0?o.setAttribute(d,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(d,p):o.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?o.setAttribute(d,p):o.removeAttribute(d);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?o.removeAttribute(d):o.setAttribute(d,p);break;case"popover":ct("beforetoggle",o),ct("toggle",o),lo(o,"popover",p);break;case"xlinkActuate":jn(o,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":jn(o,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":jn(o,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":jn(o,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":jn(o,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":jn(o,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":jn(o,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":jn(o,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":jn(o,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":lo(o,"is",p);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=Yy.get(d)||d,lo(o,d,p))}}function Av(o,l,d,p,_,w){switch(d){case"style":_d(o,p,w);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(i(61));if(d=p.__html,d!=null){if(_.children!=null)throw Error(i(60));o.innerHTML=d}}break;case"children":typeof p=="string"?Yi(o,p):(typeof p=="number"||typeof p=="bigint")&&Yi(o,""+p);break;case"onScroll":p!=null&&ct("scroll",o);break;case"onScrollEnd":p!=null&&ct("scrollend",o);break;case"onClick":p!=null&&(o.onclick=yp);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Kl.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(_=d.endsWith("Capture"),l=d.slice(2,_?d.length-7:void 0),w=o[gn]||null,w=w!=null?w[d]:null,typeof w=="function"&&o.removeEventListener(l,w,_),typeof p=="function")){typeof w!="function"&&w!==null&&(d in o?o[d]=null:o.hasAttribute(d)&&o.removeAttribute(d)),o.addEventListener(l,p,_);break e}d in o?o[d]=p:p===!0?o.setAttribute(d,""):lo(o,d,p)}}}function $n(o,l,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ct("error",o),ct("load",o);var p=!1,_=!1,w;for(w in d)if(d.hasOwnProperty(w)){var N=d[w];if(N!=null)switch(w){case"src":p=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:kt(o,l,w,N,d,null)}}_&&kt(o,l,"srcSet",d.srcSet,d,null),p&&kt(o,l,"src",d.src,d,null);return;case"input":ct("invalid",o);var k=w=N=_=null,$=null,te=null;for(p in d)if(d.hasOwnProperty(p)){var ue=d[p];if(ue!=null)switch(p){case"name":_=ue;break;case"type":N=ue;break;case"checked":$=ue;break;case"defaultChecked":te=ue;break;case"value":w=ue;break;case"defaultValue":k=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(i(137,l));break;default:kt(o,l,p,ue,d,null)}}Ca(o,w,k,$,te,N,_,!1),Ql(o);return;case"select":ct("invalid",o),p=N=w=null;for(_ in d)if(d.hasOwnProperty(_)&&(k=d[_],k!=null))switch(_){case"value":w=k;break;case"defaultValue":N=k;break;case"multiple":p=k;default:kt(o,l,_,k,d,null)}l=w,d=N,o.multiple=!!p,l!=null?gr(o,!!p,l,!1):d!=null&&gr(o,!!p,d,!0);return;case"textarea":ct("invalid",o),w=_=p=null;for(N in d)if(d.hasOwnProperty(N)&&(k=d[N],k!=null))switch(N){case"value":p=k;break;case"defaultValue":_=k;break;case"children":w=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(i(91));break;default:kt(o,l,N,k,d,null)}Ia(o,p,_,w),Ql(o);return;case"option":for($ in d)if(d.hasOwnProperty($)&&(p=d[$],p!=null))switch($){case"selected":o.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:kt(o,l,$,p,d,null)}return;case"dialog":ct("beforetoggle",o),ct("toggle",o),ct("cancel",o),ct("close",o);break;case"iframe":case"object":ct("load",o);break;case"video":case"audio":for(p=0;p<sh.length;p++)ct(sh[p],o);break;case"image":ct("error",o),ct("load",o);break;case"details":ct("toggle",o);break;case"embed":case"source":case"link":ct("error",o),ct("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(te in d)if(d.hasOwnProperty(te)&&(p=d[te],p!=null))switch(te){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:kt(o,l,te,p,d,null)}return;default:if(Td(l)){for(ue in d)d.hasOwnProperty(ue)&&(p=d[ue],p!==void 0&&Av(o,l,ue,p,d,void 0));return}}for(k in d)d.hasOwnProperty(k)&&(p=d[k],p!=null&&kt(o,l,k,p,d,null))}function o3(o,l,d,p){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,w=null,N=null,k=null,$=null,te=null,ue=null;for(re in d){var fe=d[re];if(d.hasOwnProperty(re)&&fe!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":$=fe;default:p.hasOwnProperty(re)||kt(o,l,re,null,p,fe)}}for(var se in p){var re=p[se];if(fe=d[se],p.hasOwnProperty(se)&&(re!=null||fe!=null))switch(se){case"type":w=re;break;case"name":_=re;break;case"checked":te=re;break;case"defaultChecked":ue=re;break;case"value":N=re;break;case"defaultValue":k=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,l));break;default:re!==fe&&kt(o,l,se,re,p,fe)}}Di(o,N,k,$,te,ue,w,_);return;case"select":re=N=k=se=null;for(w in d)if($=d[w],d.hasOwnProperty(w)&&$!=null)switch(w){case"value":break;case"multiple":re=$;default:p.hasOwnProperty(w)||kt(o,l,w,null,p,$)}for(_ in p)if(w=p[_],$=d[_],p.hasOwnProperty(_)&&(w!=null||$!=null))switch(_){case"value":se=w;break;case"defaultValue":k=w;break;case"multiple":N=w;default:w!==$&&kt(o,l,_,w,p,$)}l=k,d=N,p=re,se!=null?gr(o,!!d,se,!1):!!p!=!!d&&(l!=null?gr(o,!!d,l,!0):gr(o,!!d,d?[]:"",!1));return;case"textarea":re=se=null;for(k in d)if(_=d[k],d.hasOwnProperty(k)&&_!=null&&!p.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:kt(o,l,k,null,p,_)}for(N in p)if(_=p[N],w=d[N],p.hasOwnProperty(N)&&(_!=null||w!=null))switch(N){case"value":se=_;break;case"defaultValue":re=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(i(91));break;default:_!==w&&kt(o,l,N,_,p,w)}Pt(o,se,re);return;case"option":for(var Je in d)if(se=d[Je],d.hasOwnProperty(Je)&&se!=null&&!p.hasOwnProperty(Je))switch(Je){case"selected":o.selected=!1;break;default:kt(o,l,Je,null,p,se)}for($ in p)if(se=p[$],re=d[$],p.hasOwnProperty($)&&se!==re&&(se!=null||re!=null))switch($){case"selected":o.selected=se&&typeof se!="function"&&typeof se!="symbol";break;default:kt(o,l,$,se,p,re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $e in d)se=d[$e],d.hasOwnProperty($e)&&se!=null&&!p.hasOwnProperty($e)&&kt(o,l,$e,null,p,se);for(te in p)if(se=p[te],re=d[te],p.hasOwnProperty(te)&&se!==re&&(se!=null||re!=null))switch(te){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(i(137,l));break;default:kt(o,l,te,se,p,re)}return;default:if(Td(l)){for(var Vt in d)se=d[Vt],d.hasOwnProperty(Vt)&&se!==void 0&&!p.hasOwnProperty(Vt)&&Av(o,l,Vt,void 0,p,se);for(ue in p)se=p[ue],re=d[ue],!p.hasOwnProperty(ue)||se===re||se===void 0&&re===void 0||Av(o,l,ue,se,p,re);return}}for(var Q in d)se=d[Q],d.hasOwnProperty(Q)&&se!=null&&!p.hasOwnProperty(Q)&&kt(o,l,Q,null,p,se);for(fe in p)se=p[fe],re=d[fe],!p.hasOwnProperty(fe)||se===re||se==null&&re==null||kt(o,l,fe,se,p,re)}var Cv=null,Iv=null;function vp(o){return o.nodeType===9?o:o.ownerDocument}function CA(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function IA(o,l){if(o===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&l==="foreignObject"?0:o}function Rv(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Nv=null;function a3(){var o=window.event;return o&&o.type==="popstate"?o===Nv?!1:(Nv=o,!0):(Nv=null,!1)}var RA=typeof setTimeout=="function"?setTimeout:void 0,l3=typeof clearTimeout=="function"?clearTimeout:void 0,NA=typeof Promise=="function"?Promise:void 0,c3=typeof queueMicrotask=="function"?queueMicrotask:typeof NA!="undefined"?function(o){return NA.resolve(null).then(o).catch(u3)}:RA;function u3(o){setTimeout(function(){throw o})}function Co(o){return o==="head"}function MA(o,l){var d=l,p=0,_=0;do{var w=d.nextSibling;if(o.removeChild(d),w&&w.nodeType===8)if(d=w.data,d==="/$"){if(0<p&&8>p){d=p;var N=o.ownerDocument;if(d&1&&oh(N.documentElement),d&2&&oh(N.body),d&4)for(d=N.head,oh(d),N=d.firstChild;N;){var k=N.nextSibling,$=N.nodeName;N[ba]||$==="SCRIPT"||$==="STYLE"||$==="LINK"&&N.rel.toLowerCase()==="stylesheet"||d.removeChild(N),N=k}}if(_===0){o.removeChild(w),mh(l);return}_--}else d==="$"||d==="$?"||d==="$!"?_++:p=d.charCodeAt(0)-48;else p=0;d=w}while(d);mh(l)}function Mv(o){var l=o.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var d=l;switch(l=l.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":Mv(d),ao(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}o.removeChild(d)}}function d3(o,l,d,p){for(;o.nodeType===1;){var _=d;if(o.nodeName.toLowerCase()!==l.toLowerCase()){if(!p&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(p){if(!o[ba])switch(l){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(w=o.getAttribute("rel"),w==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(w!==_.rel||o.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||o.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||o.getAttribute("title")!==(_.title==null?null:_.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(w=o.getAttribute("src"),(w!==(_.src==null?null:_.src)||o.getAttribute("type")!==(_.type==null?null:_.type)||o.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&w&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(l==="input"&&o.type==="hidden"){var w=_.name==null?null:""+_.name;if(_.type==="hidden"&&o.getAttribute("name")===w)return o}else return o;if(o=vs(o.nextSibling),o===null)break}return null}function h3(o,l,d){if(l==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!d||(o=vs(o.nextSibling),o===null))return null;return o}function Pv(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function f3(o,l){var d=o.ownerDocument;if(o.data!=="$?"||d.readyState==="complete")l();else{var p=function(){l(),d.removeEventListener("DOMContentLoaded",p)};d.addEventListener("DOMContentLoaded",p),o._reactRetry=p}}function vs(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return o}var Dv=null;function PA(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var d=o.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return o;l--}else d==="/$"&&l++}o=o.previousSibling}return null}function DA(o,l,d){switch(l=vp(d),o){case"html":if(o=l.documentElement,!o)throw Error(i(452));return o;case"head":if(o=l.head,!o)throw Error(i(453));return o;case"body":if(o=l.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function oh(o){for(var l=o.attributes;l.length;)o.removeAttributeNode(l[0]);ao(o)}var rs=new Map,kA=new Set;function xp(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Vr=de.d;de.d={f:m3,r:p3,D:g3,C:y3,L:v3,m:x3,X:T3,S:_3,M:w3};function m3(){var o=Vr.f(),l=up();return o||l}function p3(o){var l=Ns(o);l!==null&&l.tag===5&&l.type==="form"?eS(l):Vr.r(o)}var Pc=typeof document=="undefined"?null:document;function VA(o,l,d){var p=Pc;if(p&&typeof l=="string"&&l){var _=yn(l);_='link[rel="'+o+'"][href="'+_+'"]',typeof d=="string"&&(_+='[crossorigin="'+d+'"]'),kA.has(_)||(kA.add(_),o={rel:o,crossOrigin:d,href:l},p.querySelector(_)===null&&(l=p.createElement("link"),$n(l,"link",o),cn(l),p.head.appendChild(l)))}}function g3(o){Vr.D(o),VA("dns-prefetch",o,null)}function y3(o,l){Vr.C(o,l),VA("preconnect",o,l)}function v3(o,l,d){Vr.L(o,l,d);var p=Pc;if(p&&o&&l){var _='link[rel="preload"][as="'+yn(l)+'"]';l==="image"&&d&&d.imageSrcSet?(_+='[imagesrcset="'+yn(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(_+='[imagesizes="'+yn(d.imageSizes)+'"]')):_+='[href="'+yn(o)+'"]';var w=_;switch(l){case"style":w=Dc(o);break;case"script":w=kc(o)}rs.has(w)||(o=g({rel:"preload",href:l==="image"&&d&&d.imageSrcSet?void 0:o,as:l},d),rs.set(w,o),p.querySelector(_)!==null||l==="style"&&p.querySelector(ah(w))||l==="script"&&p.querySelector(lh(w))||(l=p.createElement("link"),$n(l,"link",o),cn(l),p.head.appendChild(l)))}}function x3(o,l){Vr.m(o,l);var d=Pc;if(d&&o){var p=l&&typeof l.as=="string"?l.as:"script",_='link[rel="modulepreload"][as="'+yn(p)+'"][href="'+yn(o)+'"]',w=_;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=kc(o)}if(!rs.has(w)&&(o=g({rel:"modulepreload",href:o},l),rs.set(w,o),d.querySelector(_)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(lh(w)))return}p=d.createElement("link"),$n(p,"link",o),cn(p),d.head.appendChild(p)}}}function _3(o,l,d){Vr.S(o,l,d);var p=Pc;if(p&&o){var _=ui(p).hoistableStyles,w=Dc(o);l=l||"default";var N=_.get(w);if(!N){var k={loading:0,preload:null};if(N=p.querySelector(ah(w)))k.loading=5;else{o=g({rel:"stylesheet",href:o,"data-precedence":l},d),(d=rs.get(w))&&kv(o,d);var $=N=p.createElement("link");cn($),$n($,"link",o),$._p=new Promise(function(te,ue){$.onload=te,$.onerror=ue}),$.addEventListener("load",function(){k.loading|=1}),$.addEventListener("error",function(){k.loading|=2}),k.loading|=4,_p(N,l,p)}N={type:"stylesheet",instance:N,count:1,state:k},_.set(w,N)}}}function T3(o,l){Vr.X(o,l);var d=Pc;if(d&&o){var p=ui(d).hoistableScripts,_=kc(o),w=p.get(_);w||(w=d.querySelector(lh(_)),w||(o=g({src:o,async:!0},l),(l=rs.get(_))&&Vv(o,l),w=d.createElement("script"),cn(w),$n(w,"link",o),d.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},p.set(_,w))}}function w3(o,l){Vr.M(o,l);var d=Pc;if(d&&o){var p=ui(d).hoistableScripts,_=kc(o),w=p.get(_);w||(w=d.querySelector(lh(_)),w||(o=g({src:o,async:!0,type:"module"},l),(l=rs.get(_))&&Vv(o,l),w=d.createElement("script"),cn(w),$n(w,"link",o),d.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},p.set(_,w))}}function LA(o,l,d,p){var _=(_=Be.current)?xp(_):null;if(!_)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(l=Dc(d.href),d=ui(_).hoistableStyles,p=d.get(l),p||(p={type:"style",instance:null,count:0,state:null},d.set(l,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){o=Dc(d.href);var w=ui(_).hoistableStyles,N=w.get(o);if(N||(_=_.ownerDocument||_,N={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(o,N),(w=_.querySelector(ah(o)))&&!w._p&&(N.instance=w,N.state.loading=5),rs.has(o)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},rs.set(o,d),w||b3(_,o,d,N.state))),l&&p===null)throw Error(i(528,""));return N}if(l&&p!==null)throw Error(i(529,""));return null;case"script":return l=d.async,d=d.src,typeof d=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=kc(d),d=ui(_).hoistableScripts,p=d.get(l),p||(p={type:"script",instance:null,count:0,state:null},d.set(l,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function Dc(o){return'href="'+yn(o)+'"'}function ah(o){return'link[rel="stylesheet"]['+o+"]"}function UA(o){return g({},o,{"data-precedence":o.precedence,precedence:null})}function b3(o,l,d,p){o.querySelector('link[rel="preload"][as="style"]['+l+"]")?p.loading=1:(l=o.createElement("link"),p.preload=l,l.addEventListener("load",function(){return p.loading|=1}),l.addEventListener("error",function(){return p.loading|=2}),$n(l,"link",d),cn(l),o.head.appendChild(l))}function kc(o){return'[src="'+yn(o)+'"]'}function lh(o){return"script[async]"+o}function OA(o,l,d){if(l.count++,l.instance===null)switch(l.type){case"style":var p=o.querySelector('style[data-href~="'+yn(d.href)+'"]');if(p)return l.instance=p,cn(p),p;var _=g({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return p=(o.ownerDocument||o).createElement("style"),cn(p),$n(p,"style",_),_p(p,d.precedence,o),l.instance=p;case"stylesheet":_=Dc(d.href);var w=o.querySelector(ah(_));if(w)return l.state.loading|=4,l.instance=w,cn(w),w;p=UA(d),(_=rs.get(_))&&kv(p,_),w=(o.ownerDocument||o).createElement("link"),cn(w);var N=w;return N._p=new Promise(function(k,$){N.onload=k,N.onerror=$}),$n(w,"link",p),l.state.loading|=4,_p(w,d.precedence,o),l.instance=w;case"script":return w=kc(d.src),(_=o.querySelector(lh(w)))?(l.instance=_,cn(_),_):(p=d,(_=rs.get(w))&&(p=g({},d),Vv(p,_)),o=o.ownerDocument||o,_=o.createElement("script"),cn(_),$n(_,"link",p),o.head.appendChild(_),l.instance=_);case"void":return null;default:throw Error(i(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(p=l.instance,l.state.loading|=4,_p(p,d.precedence,o));return l.instance}function _p(o,l,d){for(var p=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=p.length?p[p.length-1]:null,w=_,N=0;N<p.length;N++){var k=p[N];if(k.dataset.precedence===l)w=k;else if(w!==_)break}w?w.parentNode.insertBefore(o,w.nextSibling):(l=d.nodeType===9?d.head:d,l.insertBefore(o,l.firstChild))}function kv(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.title==null&&(o.title=l.title)}function Vv(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.integrity==null&&(o.integrity=l.integrity)}var Tp=null;function FA(o,l,d){if(Tp===null){var p=new Map,_=Tp=new Map;_.set(d,p)}else _=Tp,p=_.get(d),p||(p=new Map,_.set(d,p));if(p.has(o))return p;for(p.set(o,null),d=d.getElementsByTagName(o),_=0;_<d.length;_++){var w=d[_];if(!(w[ba]||w[En]||o==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var N=w.getAttribute(l)||"";N=o+N;var k=p.get(N);k?k.push(w):p.set(N,[w])}}return p}function BA(o,l,d){o=o.ownerDocument||o,o.head.insertBefore(d,l==="title"?o.querySelector("head > title"):null)}function E3(o,l,d){if(d===1||l.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return o=l.disabled,typeof l.precedence=="string"&&o==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function qA(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var ch=null;function S3(){}function A3(o,l,d){if(ch===null)throw Error(i(475));var p=ch;if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var _=Dc(d.href),w=o.querySelector(ah(_));if(w){o=w._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(p.count++,p=wp.bind(p),o.then(p,p)),l.state.loading|=4,l.instance=w,cn(w);return}w=o.ownerDocument||o,d=UA(d),(_=rs.get(_))&&kv(d,_),w=w.createElement("link"),cn(w);var N=w;N._p=new Promise(function(k,$){N.onload=k,N.onerror=$}),$n(w,"link",d),l.instance=w}p.stylesheets===null&&(p.stylesheets=new Map),p.stylesheets.set(l,o),(o=l.state.preload)&&(l.state.loading&3)===0&&(p.count++,l=wp.bind(p),o.addEventListener("load",l),o.addEventListener("error",l))}}function C3(){if(ch===null)throw Error(i(475));var o=ch;return o.stylesheets&&o.count===0&&Lv(o,o.stylesheets),0<o.count?function(l){var d=setTimeout(function(){if(o.stylesheets&&Lv(o,o.stylesheets),o.unsuspend){var p=o.unsuspend;o.unsuspend=null,p()}},6e4);return o.unsuspend=l,function(){o.unsuspend=null,clearTimeout(d)}}:null}function wp(){if(this.count--,this.count===0){if(this.stylesheets)Lv(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var bp=null;function Lv(o,l){o.stylesheets=null,o.unsuspend!==null&&(o.count++,bp=new Map,l.forEach(I3,o),bp=null,wp.call(o))}function I3(o,l){if(!(l.state.loading&4)){var d=bp.get(o);if(d)var p=d.get(null);else{d=new Map,bp.set(o,d);for(var _=o.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<_.length;w++){var N=_[w];(N.nodeName==="LINK"||N.getAttribute("media")!=="not all")&&(d.set(N.dataset.precedence,N),p=N)}p&&d.set(null,p)}_=l.instance,N=_.getAttribute("data-precedence"),w=d.get(N)||p,w===p&&d.set(null,_),d.set(N,_),this.count++,p=wp.bind(this),_.addEventListener("load",p),_.addEventListener("error",p),w?w.parentNode.insertBefore(_,w.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(_,o.firstChild)),l.state.loading|=4}}var uh={$$typeof:O,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function R3(o,l,d,p,_,w,N,k){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pi(0),this.hiddenUpdates=Pi(null),this.identifierPrefix=p,this.onUncaughtError=_,this.onCaughtError=w,this.onRecoverableError=N,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function jA(o,l,d,p,_,w,N,k,$,te,ue,fe){return o=new R3(o,l,d,N,k,$,te,fe),l=1,w===!0&&(l|=24),w=Vi(3,null,null,l),o.current=w,w.stateNode=o,l=y0(),l.refCount++,o.pooledCache=l,l.refCount++,w.memoizedState={element:p,isDehydrated:d,cache:l},T0(w),o}function GA(o){return o?(o=dc,o):dc}function zA(o,l,d,p,_,w){_=GA(_),p.context===null?p.context=_:p.pendingContext=_,p=mo(l),p.payload={element:d},w=w===void 0?null:w,w!==null&&(p.callback=w),d=po(o,p,l),d!==null&&(Bi(d,o,l),Bd(d,o,l))}function HA(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var d=o.retryLane;o.retryLane=d!==0&&d<l?d:l}}function Uv(o,l){HA(o,l),(o=o.alternate)&&HA(o,l)}function $A(o){if(o.tag===13){var l=uc(o,67108864);l!==null&&Bi(l,o,67108864),Uv(o,67108864)}}var Ep=!0;function N3(o,l,d,p){var _=ne.T;ne.T=null;var w=de.p;try{de.p=2,Ov(o,l,d,p)}finally{de.p=w,ne.T=_}}function M3(o,l,d,p){var _=ne.T;ne.T=null;var w=de.p;try{de.p=8,Ov(o,l,d,p)}finally{de.p=w,ne.T=_}}function Ov(o,l,d,p){if(Ep){var _=Fv(p);if(_===null)Sv(o,l,p,Sp,d),WA(o,p);else if(D3(_,o,l,d,p))p.stopPropagation();else if(WA(o,p),l&4&&-1<P3.indexOf(o)){for(;_!==null;){var w=Ns(_);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var N=Ge(w.pendingLanes);if(N!==0){var k=w;for(k.pendingLanes|=2,k.entangledLanes|=2;N;){var $=1<<31-Dn(N);k.entanglements[1]|=$,N&=~$}zs(w),(It&6)===0&&(lp=ci()+500,ih(0))}}break;case 13:k=uc(w,2),k!==null&&Bi(k,w,2),up(),Uv(w,2)}if(w=Fv(p),w===null&&Sv(o,l,p,Sp,d),w===_)break;_=w}_!==null&&p.stopPropagation()}else Sv(o,l,p,null,d)}}function Fv(o){return o=Ji(o),Bv(o)}var Sp=null;function Bv(o){if(Sp=null,o=fr(o),o!==null){var l=r(o);if(l===null)o=null;else{var d=l.tag;if(d===13){if(o=a(l),o!==null)return o;o=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null)}}return Sp=o,null}function KA(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(dd()){case Ta:return 2;case Ki:return 8;case Gt:case zl:return 32;case no:return 268435456;default:return 32}default:return 32}}var qv=!1,Io=null,Ro=null,No=null,dh=new Map,hh=new Map,Mo=[],P3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function WA(o,l){switch(o){case"focusin":case"focusout":Io=null;break;case"dragenter":case"dragleave":Ro=null;break;case"mouseover":case"mouseout":No=null;break;case"pointerover":case"pointerout":dh.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":hh.delete(l.pointerId)}}function fh(o,l,d,p,_,w){return o===null||o.nativeEvent!==w?(o={blockedOn:l,domEventName:d,eventSystemFlags:p,nativeEvent:w,targetContainers:[_]},l!==null&&(l=Ns(l),l!==null&&$A(l)),o):(o.eventSystemFlags|=p,l=o.targetContainers,_!==null&&l.indexOf(_)===-1&&l.push(_),o)}function D3(o,l,d,p,_){switch(l){case"focusin":return Io=fh(Io,o,l,d,p,_),!0;case"dragenter":return Ro=fh(Ro,o,l,d,p,_),!0;case"mouseover":return No=fh(No,o,l,d,p,_),!0;case"pointerover":var w=_.pointerId;return dh.set(w,fh(dh.get(w)||null,o,l,d,p,_)),!0;case"gotpointercapture":return w=_.pointerId,hh.set(w,fh(hh.get(w)||null,o,l,d,p,_)),!0}return!1}function YA(o){var l=fr(o.target);if(l!==null){var d=r(l);if(d!==null){if(l=d.tag,l===13){if(l=a(d),l!==null){o.blockedOn=l,um(o.priority,function(){if(d.tag===13){var p=Fi();p=so(p);var _=uc(d,p);_!==null&&Bi(_,d,p),Uv(d,p)}});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){o.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Ap(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var d=Fv(o.nativeEvent);if(d===null){d=o.nativeEvent;var p=new d.constructor(d.type,d);yr=p,d.target.dispatchEvent(p),yr=null}else return l=Ns(d),l!==null&&$A(l),o.blockedOn=d,!1;l.shift()}return!0}function JA(o,l,d){Ap(o)&&d.delete(l)}function k3(){qv=!1,Io!==null&&Ap(Io)&&(Io=null),Ro!==null&&Ap(Ro)&&(Ro=null),No!==null&&Ap(No)&&(No=null),dh.forEach(JA),hh.forEach(JA)}function Cp(o,l){o.blockedOn===l&&(o.blockedOn=null,qv||(qv=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,k3)))}var Ip=null;function QA(o){Ip!==o&&(Ip=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Ip===o&&(Ip=null);for(var l=0;l<o.length;l+=3){var d=o[l],p=o[l+1],_=o[l+2];if(typeof p!="function"){if(Bv(p||d)===null)continue;break}var w=Ns(d);w!==null&&(o.splice(l,3),l-=3,B0(w,{pending:!0,data:_,method:d.method,action:p},p,_))}}))}function mh(o){function l($){return Cp($,o)}Io!==null&&Cp(Io,o),Ro!==null&&Cp(Ro,o),No!==null&&Cp(No,o),dh.forEach(l),hh.forEach(l);for(var d=0;d<Mo.length;d++){var p=Mo[d];p.blockedOn===o&&(p.blockedOn=null)}for(;0<Mo.length&&(d=Mo[0],d.blockedOn===null);)YA(d),d.blockedOn===null&&Mo.shift();if(d=(o.ownerDocument||o).$$reactFormReplay,d!=null)for(p=0;p<d.length;p+=3){var _=d[p],w=d[p+1],N=_[gn]||null;if(typeof w=="function")N||QA(d);else if(N){var k=null;if(w&&w.hasAttribute("formAction")){if(_=w,N=w[gn]||null)k=N.formAction;else if(Bv(_)!==null)continue}else k=N.action;typeof k=="function"?d[p+1]=k:(d.splice(p,3),p-=3),QA(d)}}}function jv(o){this._internalRoot=o}Rp.prototype.render=jv.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(i(409));var d=l.current,p=Fi();zA(d,p,o,l,null,null)},Rp.prototype.unmount=jv.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;zA(o.current,2,null,o,null,null),up(),l[Wi]=null}};function Rp(o){this._internalRoot=o}Rp.prototype.unstable_scheduleHydration=function(o){if(o){var l=ro();o={blockedOn:null,target:o,priority:l};for(var d=0;d<Mo.length&&l!==0&&l<Mo[d].priority;d++);Mo.splice(d,0,o),d===0&&YA(o)}};var XA=e.version;if(XA!=="19.1.1")throw Error(i(527,XA,"19.1.1"));de.findDOMNode=function(o){var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=u(l),o=o!==null?h(o):null,o=o===null?null:o.stateNode,o};var V3={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:ne,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Np=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Np.isDisabled&&Np.supportsFiber)try{Bt=Np.inject(V3),wt=Np}catch(o){}}return gh.createRoot=function(o,l){if(!s(o))throw Error(i(299));var d=!1,p="",_=mS,w=pS,N=gS,k=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(N=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(k=l.unstable_transitionCallbacks)),l=jA(o,1,!1,null,null,d,p,_,w,N,k,null),o[Wi]=l.current,Ev(o),new jv(l)},gh.hydrateRoot=function(o,l,d){if(!s(o))throw Error(i(299));var p=!1,_="",w=mS,N=pS,k=gS,$=null,te=null;return d!=null&&(d.unstable_strictMode===!0&&(p=!0),d.identifierPrefix!==void 0&&(_=d.identifierPrefix),d.onUncaughtError!==void 0&&(w=d.onUncaughtError),d.onCaughtError!==void 0&&(N=d.onCaughtError),d.onRecoverableError!==void 0&&(k=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&($=d.unstable_transitionCallbacks),d.formState!==void 0&&(te=d.formState)),l=jA(o,1,!0,l,d!=null?d:null,p,_,w,N,k,$,te),l.context=GA(null),d=l.current,p=Fi(),p=so(p),_=mo(p),_.callback=null,po(d,_,p),d=p,l.current.lanes=d,hr(l,d),zs(l),o[Wi]=l.current,Ev(o),new Rp(l)},gh.version="19.1.1",gh}var dC;function Q3(){if(dC)return $v.exports;dC=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),$v.exports=J3(),$v.exports}var X3=Q3();const Z3=E2(X3),e5=K.createContext({}),t5=({children:t})=>{const[e,n]=K.useState({});return y.jsx(e5.Provider,{value:{cache:e,setCache:n},children:t})},n5=()=>{};var hC={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},i5=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=t[n++];e[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=t[n++],a=t[n++],c=t[n++],u=((s&7)<<18|(r&63)<<12|(a&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{const r=t[n++],a=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|a&63)}}return e.join("")},A2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const r=t[s],a=s+1<t.length,c=a?t[s+1]:0,u=s+2<t.length,h=u?t[s+2]:0,g=r>>2,x=(r&3)<<4|c>>4;let T=(c&15)<<2|h>>6,b=h&63;u||(b=64,a||(T=64)),i.push(n[g],n[x],n[T],n[b])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(S2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):i5(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const r=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const x=s<t.length?n[t.charAt(s)]:64;if(++s,r==null||c==null||h==null||x==null)throw new s5;const T=r<<2|c>>4;if(i.push(T),h!==64){const b=c<<4&240|h>>2;if(i.push(b),x!==64){const S=h<<6&192|x;i.push(S)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class s5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const r5=function(t){const e=S2(t);return A2.encodeByteArray(e,!0)},yg=function(t){return r5(t).replace(/\./g,"")},fT=function(t){try{return A2.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function vg(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!o5(n)||(t[n]=vg(t[n],e[n]));return t}function o5(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mT(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a5=()=>mT().__FIREBASE_DEFAULTS__,l5=()=>{if(typeof process=="undefined"||typeof hC=="undefined")return;const t=hC.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},c5=()=>{if(typeof document=="undefined")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const e=t&&fT(t[1]);return e&&JSON.parse(e)},pT=()=>{try{return n5()||a5()||l5()||c5()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},gT=()=>{var t;return(t=pT())==null?void 0:t.config},u5=t=>{var e;return(e=pT())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gu(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch(e){return!1}}function C2(t){return A(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h5(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=J({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t);return[yg(JSON.stringify(n)),yg(JSON.stringify(a)),""].join(".")}const Oh={};function f5(){const t={prod:[],emulator:[]};for(const e of Object.keys(Oh))Oh[e]?t.emulator.push(e):t.prod.push(e);return t}function m5(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let fC=!1;function I2(t,e){if(typeof window=="undefined"||typeof document=="undefined"||!Gu(window.location.host)||Oh[t]===e||Oh[t]||fC)return;Oh[t]=e;function n(T){return`__firebase__banner__${T}`}const i="__firebase__banner",r=f5().prod.length>0;function a(){const T=document.getElementById(i);T&&T.remove()}function c(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function u(T,b){T.setAttribute("width","24"),T.setAttribute("id",b),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function h(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{fC=!0,a()},T}function g(T,b){T.setAttribute("id",b),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function x(){const T=m5(i),b=n("text"),S=document.getElementById(b)||document.createElement("span"),P=n("learnmore"),M=document.getElementById(P)||document.createElement("a"),V=n("preprendIcon"),q=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const O=T.element;c(O),g(M,P);const z=h();u(q,V),O.append(q,S,M,z),document.body.appendChild(O)}r?(S.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function p5(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zt())}function Zg(){var e;const t=(e=pT())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch(n){return!1}}function g5(){return typeof window!="undefined"||R2()}function R2(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function y5(){return typeof navigator!="undefined"&&navigator.userAgent==="Cloudflare-Workers"}function N2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function yT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function M2(){const t=Zt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function P2(){return!Zg()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function D2(){return!Zg()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function lf(){try{return typeof indexedDB=="object"}catch(t){return!1}}function v5(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var r;e(((r=s.error)==null?void 0:r.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x5="FirebaseError";class vi extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=x5,Object.setPrototypeOf(this,vi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ll.prototype.create)}}class Ll{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,r=this.errors[e],a=r?_5(r,i):"Error",c=`${this.serviceName}: ${a} (${s}).`;return new vi(s,c,i)}}function _5(t,e){return t.replace(T5,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const T5=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function w5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Xo(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const r=t[s],a=e[s];if(pC(r)&&pC(a)){if(!Xo(r,a))return!1}else if(r!==a)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function pC(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Wc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,r]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(r)}}),e}function Rh(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function k2(t,e){const n=new b5(t,e);return n.subscribe.bind(n)}class b5{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");E5(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=Jv),s.error===void 0&&(s.error=Jv),s.complete===void 0&&(s.complete=Jv);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch(a){}}),this.observers.push(s),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console!="undefined"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function E5(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Jv(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(t){return t&&t._delegate?t._delegate:t}class or{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new d5;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch(s){}}return this.instancesDeferred.get(n).promise}getImmediate(e){var s;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(s=e==null?void 0:e.optional)!=null?s:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(C5(e))try{this.getOrInitializeService({instanceIdentifier:nl})}catch(n){}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch(r){}}}}clearInstance(e=nl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return A(this,null,function*(){const e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=nl){return this.instances.has(e)}getOptions(e=nl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[r,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(r);i===c&&a.resolve(s)}return s}onInit(e,n){var a;const i=this.normalizeInstanceIdentifier(n),s=(a=this.onInitCallbacks.get(i))!=null?a:new Set;s.add(e),this.onInitCallbacks.set(i,s);const r=this.instances.get(i);return r&&e(r,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch(r){}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:A5(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch(s){}return i||null}normalizeInstanceIdentifier(e=nl){return this.component?this.component.multipleInstances?e:nl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function A5(t){return t===nl?void 0:t}function C5(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new S5(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT=[];var ut;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ut||(ut={}));const L2={debug:ut.DEBUG,verbose:ut.VERBOSE,info:ut.INFO,warn:ut.WARN,error:ut.ERROR,silent:ut.SILENT},I5=ut.INFO,R5={[ut.DEBUG]:"log",[ut.VERBOSE]:"log",[ut.INFO]:"info",[ut.WARN]:"warn",[ut.ERROR]:"error"},N5=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=R5[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ey{constructor(e){this.name=e,this._logLevel=I5,this._logHandler=N5,this._userLogHandler=null,vT.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ut))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?L2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ut.DEBUG,...e),this._logHandler(this,ut.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ut.VERBOSE,...e),this._logHandler(this,ut.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ut.INFO,...e),this._logHandler(this,ut.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ut.WARN,...e),this._logHandler(this,ut.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ut.ERROR,...e),this._logHandler(this,ut.ERROR,...e)}}function M5(t){vT.forEach(e=>{e.setLogLevel(t)})}function P5(t,e){for(const n of vT){let i=null;e&&e.level&&(i=L2[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(s,r,...a)=>{const c=a.map(u=>{if(u==null)return null;if(typeof u=="string")return u;if(typeof u=="number"||typeof u=="boolean")return u.toString();if(u instanceof Error)return u.message;try{return JSON.stringify(u)}catch(h){return null}}).filter(u=>u).join(" ");r>=(i!=null?i:s.logLevel)&&t({level:ut[r].toLowerCase(),message:c,args:a,type:s.name})}}}const D5=(t,e)=>e.some(n=>t instanceof n);let gC,yC;function k5(){return gC||(gC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function V5(){return yC||(yC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const U2=new WeakMap,Bx=new WeakMap,O2=new WeakMap,Qv=new WeakMap,xT=new WeakMap;function L5(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",r),t.removeEventListener("error",a)},r=()=>{n($o(t.result)),s()},a=()=>{i(t.error),s()};t.addEventListener("success",r),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&U2.set(n,t)}).catch(()=>{}),xT.set(e,t),e}function U5(t){if(Bx.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",a),t.removeEventListener("abort",a)},r=()=>{n(),s()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",r),t.addEventListener("error",a),t.addEventListener("abort",a)});Bx.set(t,e)}let qx={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Bx.get(t);if(e==="objectStoreNames")return t.objectStoreNames||O2.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $o(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function O5(t){qx=t(qx)}function F5(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Xv(this),e,...n);return O2.set(i,e.sort?e.sort():[e]),$o(i)}:V5().includes(t)?function(...e){return t.apply(Xv(this),e),$o(U2.get(this))}:function(...e){return $o(t.apply(Xv(this),e))}}function B5(t){return typeof t=="function"?F5(t):(t instanceof IDBTransaction&&U5(t),D5(t,k5())?new Proxy(t,qx):t)}function $o(t){if(t instanceof IDBRequest)return L5(t);if(Qv.has(t))return Qv.get(t);const e=B5(t);return e!==t&&(Qv.set(t,e),xT.set(e,t)),e}const Xv=t=>xT.get(t);function q5(t,e,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const a=indexedDB.open(t,e),c=$o(a);return i&&a.addEventListener("upgradeneeded",u=>{i($o(a.result),u.oldVersion,u.newVersion,$o(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{r&&u.addEventListener("close",()=>r()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const j5=["get","getKey","getAll","getAllKeys","count"],G5=["put","add","delete","clear"],Zv=new Map;function vC(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Zv.get(e))return Zv.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=G5.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||j5.includes(n)))return;const r=function(a,...c){return A(this,null,function*(){const u=this.transaction(a,s?"readwrite":"readonly");let h=u.store;return i&&(h=h.index(c.shift())),(yield Promise.all([h[n](...c),s&&u.done]))[0]})};return Zv.set(e,r),r}O5(t=>pe(J({},t),{get:(e,n,i)=>vC(e,n)||t.get(e,n,i),has:(e,n)=>!!vC(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(H5(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function H5(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xg="@firebase/app",jx="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr=new ey("@firebase/app"),$5="@firebase/app-compat",K5="@firebase/analytics-compat",W5="@firebase/analytics",Y5="@firebase/app-check-compat",J5="@firebase/app-check",Q5="@firebase/auth",X5="@firebase/auth-compat",Z5="@firebase/database",eU="@firebase/data-connect",tU="@firebase/database-compat",nU="@firebase/functions",iU="@firebase/functions-compat",sU="@firebase/installations",rU="@firebase/installations-compat",oU="@firebase/messaging",aU="@firebase/messaging-compat",lU="@firebase/performance",cU="@firebase/performance-compat",uU="@firebase/remote-config",dU="@firebase/remote-config-compat",hU="@firebase/storage",fU="@firebase/storage-compat",mU="@firebase/firestore",pU="@firebase/ai",gU="@firebase/firestore-compat",yU="firebase",vU="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo="[DEFAULT]",xU={[xg]:"fire-core",[$5]:"fire-core-compat",[W5]:"fire-analytics",[K5]:"fire-analytics-compat",[J5]:"fire-app-check",[Y5]:"fire-app-check-compat",[Q5]:"fire-auth",[X5]:"fire-auth-compat",[Z5]:"fire-rtdb",[eU]:"fire-data-connect",[tU]:"fire-rtdb-compat",[nU]:"fire-fn",[iU]:"fire-fn-compat",[sU]:"fire-iid",[rU]:"fire-iid-compat",[oU]:"fire-fcm",[aU]:"fire-fcm-compat",[lU]:"fire-perf",[cU]:"fire-perf-compat",[uU]:"fire-rc",[dU]:"fire-rc-compat",[hU]:"fire-gcs",[fU]:"fire-gcs-compat",[mU]:"fire-fst",[gU]:"fire-fst-compat",[pU]:"fire-vertex","fire-js":"fire-js",[yU]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=new Map,vu=new Map,xu=new Map;function cf(t,e){try{t.container.addComponent(e)}catch(n){qr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function F2(t,e){t.container.addOrOverwriteComponent(e)}function ta(t){const e=t.name;if(xu.has(e))return qr.debug(`There were multiple attempts to register component ${e}.`),!1;xu.set(e,t);for(const n of ea.values())cf(n,t);for(const n of vu.values())cf(n,t);return!0}function B2(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function _U(t,e,n=Zo){B2(t,e).clearInstance(n)}function _T(t){return t.options!==void 0}function q2(t){return _T(t)?!1:"authIdToken"in t||"appCheckToken"in t||"releaseOnDeref"in t||"automaticDataCollectionEnabled"in t}function Kt(t){return t==null?!1:t.settings!==void 0}function TU(){xu.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hi=new Ll("app","Firebase",wU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let j2=class{constructor(e,n,i){this._isDeleted=!1,this._options=J({},e),this._config=J({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new or("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Hi.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(t,e){const n=fT(t.split(".")[1]);if(n===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(n).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const s=JSON.parse(n).exp*1e3,r=new Date().getTime();s-r<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class bU extends j2{constructor(e,n,i,s){const r=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!0,a={name:i,automaticDataCollectionEnabled:r};if(e.apiKey!==void 0)super(e,a,s);else{const c=e;super(c.options,a,s)}this._serverConfig=J({automaticDataCollectionEnabled:r},n),this._serverConfig.authIdToken&&xC(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&xC(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry!="undefined"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,bs(xg,jx,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){wT(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Hi.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa=vU;function TT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=J({name:Zo,automaticDataCollectionEnabled:!0},e),s=i.name;if(typeof s!="string"||!s)throw Hi.create("bad-app-name",{appName:String(s)});if(n||(n=gT()),!n)throw Hi.create("no-options");const r=ea.get(s);if(r){if(Xo(n,r.options)&&Xo(i,r.config))return r;throw Hi.create("duplicate-app",{appName:s})}const a=new V2(s);for(const u of xu.values())a.addComponent(u);const c=new j2(n,i,a);return ea.set(s,c),c}function EU(t,e={}){if(g5()&&!R2())throw Hi.create("invalid-server-app-environment");let n,i=e||{};if(t&&(_T(t)?n=t.options:q2(t)?i=t:n=t),i.automaticDataCollectionEnabled===void 0&&(i.automaticDataCollectionEnabled=!0),n||(n=gT()),!n)throw Hi.create("no-options");const s=J(J({},i),n);s.releaseOnDeref!==void 0&&delete s.releaseOnDeref;const r=g=>[...g].reduce((x,T)=>Math.imul(31,x)+T.charCodeAt(0)|0,0);if(i.releaseOnDeref!==void 0&&typeof FinalizationRegistry=="undefined")throw Hi.create("finalization-registry-not-supported",{});const a=""+r(JSON.stringify(s)),c=vu.get(a);if(c)return c.incRefCount(i.releaseOnDeref),c;const u=new V2(a);for(const g of xu.values())u.addComponent(g);const h=new bU(n,i,a,u);return vu.set(a,h),h}function SU(t=Zo){const e=ea.get(t);if(!e&&t===Zo&&gT())return TT();if(!e)throw Hi.create("no-app",{appName:t});return e}function AU(){return Array.from(ea.values())}function wT(t){return A(this,null,function*(){let e=!1;const n=t.name;ea.has(n)?(e=!0,ea.delete(n)):vu.has(n)&&t.decRefCount()<=0&&(vu.delete(n),e=!0),e&&(yield Promise.all(t.container.getProviders().map(i=>i.delete())),t.isDeleted=!0)})}function bs(t,e,n){var a;let i=(a=xU[t])!=null?a:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),r=e.match(/\s|\//);if(s||r){const c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&r&&c.push("and"),r&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qr.warn(c.join(" "));return}ta(new or(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function G2(t,e){if(t!==null&&typeof t!="function")throw Hi.create("invalid-log-argument");P5(t,e)}function z2(t){M5(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CU="firebase-heartbeat-database",IU=1,uf="firebase-heartbeat-store";let ex=null;function H2(){return ex||(ex=q5(CU,IU,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(uf)}catch(n){console.warn(n)}}}}).catch(t=>{throw Hi.create("idb-open",{originalErrorMessage:t.message})})),ex}function RU(t){return A(this,null,function*(){try{const n=(yield H2()).transaction(uf),i=yield n.objectStore(uf).get($2(t));return yield n.done,i}catch(e){if(e instanceof vi)qr.warn(e.message);else{const n=Hi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});qr.warn(n.message)}}})}function _C(t,e){return A(this,null,function*(){try{const i=(yield H2()).transaction(uf,"readwrite");yield i.objectStore(uf).put(e,$2(t)),yield i.done}catch(n){if(n instanceof vi)qr.warn(n.message);else{const i=Hi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});qr.warn(i.message)}}})}function $2(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NU=1024,MU=30;class PU{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new kU(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return A(this,null,function*(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=TC();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>MU){const a=VU(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){qr.warn(i)}})}getHeartbeatsHeader(){return A(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=TC(),{heartbeatsToSend:i,unsentEntries:s}=DU(this._heartbeatsCache.heartbeats),r=yg(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return qr.warn(n),""}})}}function TC(){return new Date().toISOString().substring(0,10)}function DU(t,e=NU){const n=[];let i=t.slice();for(const s of t){const r=n.find(a=>a.agent===s.agent);if(r){if(r.dates.push(s.date),wC(n)>e){r.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),wC(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class kU{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return A(this,null,function*(){return lf()?v5().then(()=>!0).catch(()=>!1):!1})}read(){return A(this,null,function*(){if(yield this._canUseIndexedDBPromise){const n=yield RU(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return A(this,null,function*(){var i;if(yield this._canUseIndexedDBPromise){const s=yield this.read();return _C(this.app,{lastSentHeartbeatDate:(i=e.lastSentHeartbeatDate)!=null?i:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return A(this,null,function*(){var i;if(yield this._canUseIndexedDBPromise){const s=yield this.read();return _C(this.app,{lastSentHeartbeatDate:(i=e.lastSentHeartbeatDate)!=null?i:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return})}}function wC(t){return yg(JSON.stringify({version:2,heartbeats:t})).length}function VU(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LU(t){ta(new or("platform-logger",e=>new z5(e),"PRIVATE")),ta(new or("heartbeat",e=>new PU(e),"PRIVATE")),bs(xg,jx,t),bs(xg,jx,"esm2020"),bs("fire-js","")}LU("");const UU=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:vi,SDK_VERSION:fa,_DEFAULT_ENTRY_NAME:Zo,_addComponent:cf,_addOrOverwriteComponent:F2,_apps:ea,_clearComponents:TU,_components:xu,_getProvider:B2,_isFirebaseApp:_T,_isFirebaseServerApp:Kt,_isFirebaseServerAppSettings:q2,_registerComponent:ta,_removeServiceInstance:_U,_serverApps:vu,deleteApp:wT,getApp:SU,getApps:AU,initializeApp:TT,initializeServerApp:EU,onLog:G2,registerVersion:bs,setLogLevel:z2},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OU{constructor(e,n){this._delegate=e,this.firebase=n,cf(e,new or("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),wT(this._delegate)))}_getService(e,n=Zo){var s;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((s=i.getComponent())==null?void 0:s.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=Zo){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){cf(this._delegate,e)}_addOrOverwriteComponent(e){F2(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FU={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},bC=new Ll("app-compat","Firebase",FU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BU(t){const e={},n={__esModule:!0,initializeApp:r,app:s,registerVersion:bs,setLogLevel:z2,onLog:G2,apps:null,SDK_VERSION:fa,INTERNAL:{registerComponent:c,removeApp:i,useAsService:u,modularAPIs:UU}};n.default=n,Object.defineProperty(n,"apps",{get:a});function i(h){delete e[h]}function s(h){if(h=h||Zo,!mC(e,h))throw bC.create("no-app",{appName:h});return e[h]}s.App=t;function r(h,g={}){const x=TT(h,g);if(mC(e,x.name))return e[x.name];const T=new t(x,n);return e[x.name]=T,T}function a(){return Object.keys(e).map(h=>e[h])}function c(h){const g=h.name,x=g.replace("-compat","");if(ta(h)&&h.type==="PUBLIC"){const T=(b=s())=>{if(typeof b[x]!="function")throw bC.create("invalid-app-argument",{appName:g});return b[x]()};h.serviceProps!==void 0&&vg(T,h.serviceProps),n[x]=T,t.prototype[x]=function(...b){return this._getService.bind(this,g).apply(this,h.multipleInstances?b:[])}}return h.type==="PUBLIC"?n[x]:null}function u(h,g){return g==="serverAuth"?null:g}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(){const t=BU(OU);t.INTERNAL=pe(J({},t.INTERNAL),{createFirebaseNamespace:K2,extendNamespace:e,createSubscribe:k2,ErrorFactory:Ll,deepExtend:vg});function e(n){vg(t,n)}return t}const qU=K2();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC=new ey("@firebase/app-compat"),jU="@firebase/app-compat",GU="0.5.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zU(t){bs(jU,GU,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=mT();if(t.firebase!==void 0){EC.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&EC.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch(t){}const _t=qU;zU();var HU="firebase",$U="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_t.registerVersion(HU,$U,"app-compat");const yh={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},Vc={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KU(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function W2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const WU=KU,YU=W2,Y2=new Ll("auth","Firebase",W2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g=new ey("@firebase/auth");function JU(t,...e){_g.logLevel<=ut.WARN&&_g.warn(`Auth (${fa}): ${t}`,...e)}function Wp(t,...e){_g.logLevel<=ut.ERROR&&_g.error(`Auth (${fa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(t,...e){throw ET(t,...e)}function Nn(t,...e){return ET(t,...e)}function bT(t,e,n){const i=pe(J({},YU()),{[e]:n});return new Ll("auth","Firebase",i).create(e,{appName:t.name})}function qn(t){return bT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Hu(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&Xn(t,"argument-error"),bT(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ET(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return Y2.create(t,...e)}function ve(t,e,...n){if(!t)throw ET(e,...n)}function Qs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Wp(e),new Error(e)}function Cs(t,e){t||Qs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(){var t;return typeof self!="undefined"&&((t=self.location)==null?void 0:t.href)||""}function ST(){return SC()==="http:"||SC()==="https:"}function SC(){var t;return typeof self!="undefined"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QU(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ST()||N2()||"connection"in navigator)?navigator.onLine:!0}function XU(){if(typeof navigator=="undefined")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,n){this.shortDelay=e,this.longDelay=n,Cs(n>e,"Short delay should be less than long delay!"),this.isMobile=p5()||yT()}get(){return QU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(t,e){Cs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;if(typeof globalThis!="undefined"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch!="undefined")return fetch;Qs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;if(typeof globalThis!="undefined"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers!="undefined")return Headers;Qs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;if(typeof globalThis!="undefined"&&globalThis.Response)return globalThis.Response;if(typeof Response!="undefined")return Response;Qs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tO=new Uf(3e4,6e4);function on(t,e){return t.tenantId&&!e.tenantId?pe(J({},e),{tenantId:t.tenantId}):e}function an(r,a,c,u){return A(this,arguments,function*(t,e,n,i,s={}){return Q2(t,s,()=>A(null,null,function*(){let h={},g={};i&&(e==="GET"?g=i:h={body:JSON.stringify(i)});const x=zu(J({key:t.config.apiKey},g)).slice(1),T=yield t._getAdditionalHeaders();T["Content-Type"]="application/json",t.languageCode&&(T["X-Firebase-Locale"]=t.languageCode);const b=J({method:e,headers:T},h);return y5()||(b.referrerPolicy="no-referrer"),t.emulatorConfig&&Gu(t.emulatorConfig.host)&&(b.credentials="include"),J2.fetch()(yield X2(t,t.config.apiHost,n,x),b)}))})}function Q2(t,e,n){return A(this,null,function*(){t._canInitEmulator=!1;const i=J(J({},ZU),e);try{const s=new iO(t),r=yield Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=yield r.json();if("needConfirmation"in a)throw Nh(t,"account-exists-with-different-credential",a);if(r.ok&&!("errorMessage"in a))return a;{const c=r.ok?a.errorMessage:a.error.message,[u,h]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nh(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Nh(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw Nh(t,"user-disabled",a);const g=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw bT(t,g,h);Xn(t,g)}}catch(s){if(s instanceof vi)throw s;Xn(t,"network-request-failed",{message:String(s)})}})}function Kr(r,a,c,u){return A(this,arguments,function*(t,e,n,i,s={}){const h=yield an(t,e,n,i,s);return"mfaPendingCredential"in h&&Xn(t,"multi-factor-auth-required",{_serverResponse:h}),h})}function X2(t,e,n,i){return A(this,null,function*(){const s=`${e}${n}?${i}`,r=t,a=r.config.emulator?AT(t.config,s):`${t.config.apiScheme}://${s}`;return eO.includes(n)&&(yield r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(a).toString():a})}function nO(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class iO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Nn(this.auth,"network-request-failed")),tO.get())})}}function Nh(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=Nn(t,e,i);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AC(t){return t!==void 0&&t.getResponse!==void 0}function CC(t){return t!==void 0&&t.enterprise!==void 0}class Z2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return nO(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sO(t){return A(this,null,function*(){return(yield an(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})}function eM(t,e){return A(this,null,function*(){return an(t,"GET","/v2/recaptchaConfig",on(t,e))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rO(t,e){return A(this,null,function*(){return an(t,"POST","/v1/accounts:delete",e)})}function oO(t,e){return A(this,null,function*(){return an(t,"POST","/v1/accounts:update",e)})}function Tg(t,e){return A(this,null,function*(){return an(t,"POST","/v1/accounts:lookup",e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}function aO(t,e=!1){return A(this,null,function*(){const n=ze(t),i=yield n.getIdToken(e),s=ty(i);ve(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,a=r==null?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:Fh(tx(s.auth_time)),issuedAtTime:Fh(tx(s.iat)),expirationTime:Fh(tx(s.exp)),signInProvider:a||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}})}function tx(t){return Number(t)*1e3}function ty(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Wp("JWT malformed, contained fewer than 3 sections"),null;try{const s=fT(n);return s?JSON.parse(s):(Wp("Failed to decode base64 JWT payload"),null)}catch(s){return Wp("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function IC(t){const e=ty(t);return ve(e,"internal-error"),ve(typeof e.exp!="undefined","internal-error"),ve(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(t,e,n=!1){return A(this,null,function*(){if(n)return e;try{return yield e}catch(i){throw i instanceof vi&&lO(i)&&t.auth.currentUser===t&&(yield t.auth.signOut()),i}})}function lO({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!=null?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(()=>A(this,null,function*(){yield this.iteration()}),n)}iteration(){return A(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fh(this.lastLoginAt),this.creationTime=Fh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(t){return A(this,null,function*(){var x;const e=t.auth,n=yield t.getIdToken(),i=yield jr(t,Tg(e,{idToken:n}));ve(i==null?void 0:i.users.length,e,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const r=(x=s.providerUserInfo)!=null&&x.length?tM(s.providerUserInfo):[],a=dO(t.providerData,r),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=c?u:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Gx(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,g)})}function uO(t){return A(this,null,function*(){const e=ze(t);yield hf(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function dO(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function tM(t){return t.map(i=>{var s=i,{providerId:e}=s,n=mi(s,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hO(t,e){return A(this,null,function*(){const n=yield Q2(t,{},()=>A(null,null,function*(){const i=zu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:r}=t.config,a=yield X2(t,s,"/v1/token",`key=${r}`),c=yield t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:i};return t.emulatorConfig&&Gu(t.emulatorConfig.host)&&(u.credentials="include"),J2.fetch()(a,u)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function fO(t,e){return A(this,null,function*(){return an(t,"POST","/v2/accounts:revokeToken",on(t,e))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ve(e.idToken,"internal-error"),ve(typeof e.idToken!="undefined","internal-error"),ve(typeof e.refreshToken!="undefined","internal-error");const n="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):IC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ve(e.length!==0,"internal-error");const n=IC(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return A(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return A(this,null,function*(){const{accessToken:i,refreshToken:s,expiresIn:r}=yield hO(e,n);this.updateTokensAndExpiration(i,s,Number(r))})}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:r}=n,a=new ru;return i&&(ve(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),s&&(ve(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),r&&(ve(typeof r=="number","internal-error",{appName:e}),a.expirationTime=r),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ru,this.toJSON())}_performRefresh(){return Qs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Do(t,e){ve(typeof t=="string"||typeof t=="undefined","internal-error",{appName:e})}class Ts{constructor(r){var a=r,{uid:e,auth:n,stsTokenManager:i}=a,s=mi(a,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Gx(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return A(this,null,function*(){const n=yield jr(this,this.stsTokenManager.getToken(this.auth,e));return ve(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return aO(this,e)}reload(){return uO(this)}_assign(e){this!==e&&(ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>J({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ts(pe(J({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return A(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&(yield hf(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return A(this,null,function*(){if(Kt(this.auth.app))return Promise.reject(qn(this.auth));const e=yield this.getIdToken();return yield jr(this,rO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return pe(J({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>J({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var q,O,z,j,W,D,C,R;const i=(q=n.displayName)!=null?q:void 0,s=(O=n.email)!=null?O:void 0,r=(z=n.phoneNumber)!=null?z:void 0,a=(j=n.photoURL)!=null?j:void 0,c=(W=n.tenantId)!=null?W:void 0,u=(D=n._redirectEventId)!=null?D:void 0,h=(C=n.createdAt)!=null?C:void 0,g=(R=n.lastLoginAt)!=null?R:void 0,{uid:x,emailVerified:T,isAnonymous:b,providerData:S,stsTokenManager:P}=n;ve(x&&P,e,"internal-error");const M=ru.fromJSON(this.name,P);ve(typeof x=="string",e,"internal-error"),Do(i,e.name),Do(s,e.name),ve(typeof T=="boolean",e,"internal-error"),ve(typeof b=="boolean",e,"internal-error"),Do(r,e.name),Do(a,e.name),Do(c,e.name),Do(u,e.name),Do(h,e.name),Do(g,e.name);const V=new Ts({uid:x,auth:e,email:s,emailVerified:T,displayName:i,isAnonymous:b,photoURL:a,phoneNumber:r,tenantId:c,stsTokenManager:M,createdAt:h,lastLoginAt:g});return S&&Array.isArray(S)&&(V.providerData=S.map(L=>J({},L))),u&&(V._redirectEventId=u),V}static _fromIdTokenResponse(e,n,i=!1){return A(this,null,function*(){const s=new ru;s.updateFromServerResponse(n);const r=new Ts({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return yield hf(r),r})}static _fromGetAccountInfoResponse(e,n,i){return A(this,null,function*(){const s=n.users[0];ve(s.localId!==void 0,"internal-error");const r=s.providerUserInfo!==void 0?tM(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(r!=null&&r.length),c=new ru;c.updateFromIdToken(i);const u=new Ts({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:a}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new Gx(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(r!=null&&r.length)};return Object.assign(u,h),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC=new Map;function zi(t){Cs(t instanceof Function,"Expected a class definition");let e=RC.get(t);return e?(Cs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,RC.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return A(this,null,function*(){return!0})}_set(e,n){return A(this,null,function*(){this.storage[e]=n})}_get(e){return A(this,null,function*(){const n=this.storage[e];return n===void 0?null:n})}_remove(e){return A(this,null,function*(){delete this.storage[e]})}_addListener(e,n){}_removeListener(e,n){}}nM.type="NONE";const _u=nM;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(t,e,n){return`firebase:${t}:${e}:${n}`}class ou{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=vl(this.userKey,s.apiKey,r),this.fullPersistenceKey=vl("persistence",s.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return A(this,null,function*(){const e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=yield Tg(this.auth,{idToken:e}).catch(()=>{});return n?Ts._fromGetAccountInfoResponse(this.auth,n,e):null}return Ts._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return A(this,null,function*(){if(this.persistence===e)return;const n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,i="authUser"){return A(this,null,function*(){if(!n.length)return new ou(zi(_u),e,i);const s=(yield Promise.all(n.map(h=>A(null,null,function*(){if(yield h._isAvailable())return h})))).filter(h=>h);let r=s[0]||zi(_u);const a=vl(i,e.config.apiKey,e.name);let c=null;for(const h of n)try{const g=yield h._get(a);if(g){let x;if(typeof g=="string"){const T=yield Tg(e,{idToken:g}).catch(()=>{});if(!T)break;x=yield Ts._fromGetAccountInfoResponse(e,T,g)}else x=Ts._fromJSON(e,g);h!==r&&(c=x),r=h;break}}catch(g){}const u=s.filter(h=>h._shouldAllowMigration);return!r._shouldAllowMigration||!u.length?new ou(r,e,i):(r=u[0],c&&(yield r._set(a,c.toJSON())),yield Promise.all(n.map(h=>A(null,null,function*(){if(h!==r)try{yield h._remove(a)}catch(g){}}))),new ou(r,e,i))})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(oM(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(iM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(aM(e))return"Blackberry";if(lM(e))return"Webos";if(sM(e))return"Safari";if((e.includes("chrome/")||rM(e))&&!e.includes("edge/"))return"Chrome";if(Of(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function iM(t=Zt()){return/firefox\//i.test(t)}function sM(t=Zt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rM(t=Zt()){return/crios\//i.test(t)}function oM(t=Zt()){return/iemobile/i.test(t)}function Of(t=Zt()){return/android/i.test(t)}function aM(t=Zt()){return/blackberry/i.test(t)}function lM(t=Zt()){return/webos/i.test(t)}function Ff(t=Zt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function mO(t=Zt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function pO(t=Zt()){var e;return Ff(t)&&!!((e=window.navigator)!=null&&e.standalone)}function gO(){return M2()&&document.documentMode===10}function cM(t=Zt()){return Ff(t)||Of(t)||lM(t)||aM(t)||/windows phone/i.test(t)||oM(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uM(t,e=[]){let n;switch(t){case"Browser":n=NC(Zt());break;case"Worker":n=`${NC(Zt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${fa}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=r=>new Promise((a,c)=>{try{const u=e(r);a(u)}catch(u){c(u)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}runMiddleware(e){return A(this,null,function*(){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)yield i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}})}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vO(n){return A(this,arguments,function*(t,e={}){return an(t,"GET","/v2/passwordPolicy",on(t,e))})}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO=6;class _O{constructor(e){var i,s,r,a;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(i=n.minPasswordLength)!=null?i:xO,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))!=null?r:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!=null?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var i,s,r,a,c,u;const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=(i=n.meetsMinPasswordLength)!=null?i:!0),n.isValid&&(n.isValid=(s=n.meetsMaxPasswordLength)!=null?s:!0),n.isValid&&(n.isValid=(r=n.containsLowercaseLetter)!=null?r:!0),n.isValid&&(n.isValid=(a=n.containsUppercaseLetter)!=null?a:!0),n.isValid&&(n.isValid=(c=n.containsNumericCharacter)!=null?c:!0),n.isValid&&(n.isValid=(u=n.containsNonAlphanumericCharacter)!=null?u:!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new MC(this),this.idTokenSubscription=new MC(this),this.beforeStateQueue=new yO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Y2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=zi(n)),this._initializationPromise=this.queue(()=>A(this,null,function*(){var i,s,r;if(!this._deleted&&(this.persistenceManager=yield ou.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch(a){}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)==null?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return A(this,null,function*(){if(this._deleted)return;const e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return A(this,null,function*(){try{const n=yield Tg(this,{idToken:e}),i=yield Ts._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return A(this,null,function*(){var r;if(Kt(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const n=yield this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)==null?void 0:r._redirectEventId,c=i==null?void 0:i._redirectEventId,u=yield this.tryRedirectSignIn(e);(!a||a===c)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ve(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return A(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(i){yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return A(this,null,function*(){try{yield hf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=XU()}_delete(){return A(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return A(this,null,function*(){if(Kt(this.app))return Promise.reject(qn(this));const n=e?ze(e):null;return n&&ve(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return A(this,null,function*(){if(!this._deleted)return e&&ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>A(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return A(this,null,function*(){return Kt(this.app)?Promise.reject(qn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Kt(this.app)?Promise.reject(qn(this)):this.queue(()=>A(this,null,function*(){yield this.assertedPersistence.setPersistence(zi(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return A(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return A(this,null,function*(){const e=yield vO(this),n=new _O(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ll("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}revokeAccessToken(e){return A(this,null,function*(){if(this.currentUser){const n=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),yield fO(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}_setRedirectUser(e,n){return A(this,null,function*(){const i=yield this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return A(this,null,function*(){if(!this.redirectPersistenceManager){const n=e&&zi(e)||this._popupRedirectResolver;ve(n,this,"argument-error"),this.redirectPersistenceManager=yield ou.create(this,[zi(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return A(this,null,function*(){var n,i;return this._isInitialized&&(yield this.queue(()=>A(this,null,function*(){}))),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return A(this,null,function*(){if(e===this.currentUser)return this.queue(()=>A(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n,i;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=(i=(n=this.currentUser)==null?void 0:n.uid)!=null?i:null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(c,this,"internal-error"),c.then(()=>{a||r(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,i,s);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}directlySetCurrentUser(e){return A(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return A(this,null,function*(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=yield(s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const i=yield this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e})}_getAppCheckToken(){return A(this,null,function*(){var n;if(Kt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=yield(n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken();return e!=null&&e.error&&JU(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token})}}function en(t){return ze(t)}class MC{constructor(e){this.auth=e,this.observer=null,this.addObserver=k2(n=>this.observer=n)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bf={loadJS(){return A(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wO(t){Bf=t}function CT(t){return Bf.loadJS(t)}function bO(){return Bf.recaptchaV2Script}function EO(){return Bf.recaptchaEnterpriseScript}function SO(){return Bf.gapiScript}function dM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO=500,CO=6e4,Pp=1e12;class IO{constructor(e){this.auth=e,this.counter=Pp,this._widgets=new Map}render(e,n){const i=this.counter;return this._widgets.set(i,new MO(e,this.auth.name,n||{})),this.counter++,i}reset(e){var i;const n=e||Pp;(i=this._widgets.get(n))==null||i.delete(),this._widgets.delete(n)}getResponse(e){var i;const n=e||Pp;return((i=this._widgets.get(n))==null?void 0:i.getResponse())||""}execute(e){return A(this,null,function*(){var i;const n=e||Pp;return(i=this._widgets.get(n))==null||i.execute(),""})}}class RO{constructor(){this.enterprise=new NO}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class NO{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class MO{constructor(e,n,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;ve(s,"argument-error",{appName:n}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=PO(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch(i){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch(i){}this.isVisible&&this.execute()},CO)},AO))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function PO(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<t;i++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const DO="recaptcha-enterprise",Bh="NO_RECAPTCHA";class hM{constructor(e){this.type=DO,this.auth=en(e)}verify(e="verify",n=!1){return A(this,null,function*(){function i(r){return A(this,null,function*(){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise((a,c)=>A(null,null,function*(){eM(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new Z2(u);return r.tenantId==null?r._agentRecaptchaConfig=h:r._tenantRecaptchaConfigs[r.tenantId]=h,a(h.siteKey)}}).catch(u=>{c(u)})}))})}function s(r,a,c){const u=window.grecaptcha;CC(u)?u.enterprise.ready(()=>{u.enterprise.execute(r,{action:e}).then(h=>{a(h)}).catch(()=>{a(Bh)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new RO().execute("siteKey",{action:"verify"}):new Promise((r,a)=>{i(this.auth).then(c=>{if(!n&&CC(window.grecaptcha))s(c,r,a);else{if(typeof window=="undefined"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=EO();u.length!==0&&(u+=c),CT(u).then(()=>{s(c,r,a)}).catch(h=>{a(h)})}}).catch(c=>{a(c)})})})}}function vh(t,e,n,i=!1,s=!1){return A(this,null,function*(){const r=new hM(t);let a;if(s)a=Bh;else try{a=yield r.verify(n)}catch(u){a=yield r.verify(n,!0)}const c=J({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,h=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return i?Object.assign(c,{captchaResp:a}):Object.assign(c,{captchaResponse:a}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c})}function Ko(t,e,n,i,s){return A(this,null,function*(){var r,a;if(s==="EMAIL_PASSWORD_PROVIDER")if((r=t._getRecaptchaConfig())!=null&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=yield vh(t,e,n,n==="getOobCode");return i(t,c)}else return i(t,e).catch(c=>A(null,null,function*(){if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=yield vh(t,e,n,n==="getOobCode");return i(t,u)}else return Promise.reject(c)}));else if(s==="PHONE_PROVIDER")if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("PHONE_PROVIDER")){const c=yield vh(t,e,n);return i(t,c).catch(u=>A(null,null,function*(){var h;if(((h=t._getRecaptchaConfig())==null?void 0:h.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const g=yield vh(t,e,n,!1,!0);return i(t,g)}return Promise.reject(u)}))}else{const c=yield vh(t,e,n,!1,!0);return i(t,c)}else return Promise.reject(s+" provider is not supported.")})}function kO(t){return A(this,null,function*(){const e=en(t),n=yield eM(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),i=new Z2(n);e.tenantId==null?e._agentRecaptchaConfig=i:e._tenantRecaptchaConfigs[e.tenantId]=i,i.isAnyProviderEnabled()&&new hM(e).verify()})}function VO(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(zi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function LO(t,e,n){const i=en(t);ve(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),r=fM(e),{host:a,port:c}=UO(e),u=c===null?"":`:${c}`,h={url:`${r}//${a}${u}/`},g=Object.freeze({host:a,port:c,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){ve(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ve(Xo(h,i.config.emulator)&&Xo(g,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=g,i.settings.appVerificationDisabledForTesting=!0,Gu(a)?(C2(`${r}//${a}${u}`),I2("Auth",!0)):s||OO()}function fM(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function UO(t){const e=fM(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:PC(i.substr(r.length+1))}}else{const[r,a]=i.split(":");return{host:r,port:PC(a)}}}function PC(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function OO(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console!="undefined"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window!="undefined"&&typeof document!="undefined"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Qs("not implemented")}_getIdTokenResponse(e){return Qs("not implemented")}_linkToIdToken(e,n){return Qs("not implemented")}_getReauthenticationResolver(e){return Qs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mM(t,e){return A(this,null,function*(){return an(t,"POST","/v1/accounts:resetPassword",on(t,e))})}function FO(t,e){return A(this,null,function*(){return an(t,"POST","/v1/accounts:update",e)})}function BO(t,e){return A(this,null,function*(){return an(t,"POST","/v1/accounts:signUp",e)})}function qO(t,e){return A(this,null,function*(){return an(t,"POST","/v1/accounts:update",on(t,e))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jO(t,e){return A(this,null,function*(){return Kr(t,"POST","/v1/accounts:signInWithPassword",on(t,e))})}function ny(t,e){return A(this,null,function*(){return an(t,"POST","/v1/accounts:sendOobCode",on(t,e))})}function GO(t,e){return A(this,null,function*(){return ny(t,e)})}function zO(t,e){return A(this,null,function*(){return ny(t,e)})}function HO(t,e){return A(this,null,function*(){return ny(t,e)})}function $O(t,e){return A(this,null,function*(){return ny(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KO(t,e){return A(this,null,function*(){return Kr(t,"POST","/v1/accounts:signInWithEmailLink",on(t,e))})}function WO(t,e){return A(this,null,function*(){return Kr(t,"POST","/v1/accounts:signInWithEmailLink",on(t,e))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff extends $u{constructor(e,n,i,s=null){super("password",i),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new ff(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new ff(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return A(this,null,function*(){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ko(e,n,"signInWithPassword",jO,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return KO(e,{email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}})}_linkToIdToken(e,n){return A(this,null,function*(){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ko(e,i,"signUpPassword",BO,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return WO(e,{idToken:n,email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(t,e){return A(this,null,function*(){return Kr(t,"POST","/v1/accounts:signInWithIdp",on(t,e))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO="http://localhost";class ar extends $u{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ar(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Xn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const c=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=c,r=mi(c,["providerId","signInMethod"]);if(!i||!s)return null;const a=new ar(i,s);return a.idToken=r.idToken||void 0,a.accessToken=r.accessToken||void 0,a.secret=r.secret,a.nonce=r.nonce,a.pendingToken=r.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Br(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Br(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Br(e,n)}buildRequest(){const e={requestUri:YO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=zu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC(t,e){return A(this,null,function*(){return an(t,"POST","/v1/accounts:sendVerificationCode",on(t,e))})}function JO(t,e){return A(this,null,function*(){return Kr(t,"POST","/v1/accounts:signInWithPhoneNumber",on(t,e))})}function QO(t,e){return A(this,null,function*(){const n=yield Kr(t,"POST","/v1/accounts:signInWithPhoneNumber",on(t,e));if(n.temporaryProof)throw Nh(t,"account-exists-with-different-credential",n);return n})}const XO={USER_NOT_FOUND:"user-not-found"};function ZO(t,e){return A(this,null,function*(){const n=pe(J({},e),{operation:"REAUTH"});return Kr(t,"POST","/v1/accounts:signInWithPhoneNumber",on(t,n),XO)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl extends $u{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new xl({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new xl({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return JO(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return QO(e,J({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return ZO(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:i,verificationCode:s}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:i,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:i,phoneNumber:s,temporaryProof:r}=e;return!i&&!n&&!s&&!r?null:new xl({verificationId:n,verificationCode:i,phoneNumber:s,temporaryProof:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eF(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function tF(t){const e=Wc(Rh(t)).link,n=e?Wc(Rh(e)).deep_link_id:null,i=Wc(Rh(t)).deep_link_id;return(i?Wc(Rh(i)).link:null)||i||n||e||t}class iy{constructor(e){var a,c,u,h,g,x;const n=Wc(Rh(e)),i=(a=n.apiKey)!=null?a:null,s=(c=n.oobCode)!=null?c:null,r=eF((u=n.mode)!=null?u:null);ve(i&&s&&r,"argument-error"),this.apiKey=i,this.operation=r,this.code=s,this.continueUrl=(h=n.continueUrl)!=null?h:null,this.languageCode=(g=n.lang)!=null?g:null,this.tenantId=(x=n.tenantId)!=null?x:null}static parseLink(e){const n=tF(e);try{return new iy(n)}catch(i){return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(){this.providerId=ma.PROVIDER_ID}static credential(e,n){return ff._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=iy.parseLink(n);return ve(i,"argument-error"),ff._fromEmailAndCode(e,i.code,i.tenantId)}}ma.PROVIDER_ID="password";ma.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ma.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku extends Wr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class au extends Ku{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return ve("providerId"in n&&"signInMethod"in n,"argument-error"),ar._fromParams(n)}credential(e){return this._credential(pe(J({},e),{nonce:e.rawNonce}))}_credential(e){return ve(e.idToken||e.accessToken,"argument-error"),ar._fromParams(pe(J({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return au.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return au.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:r,nonce:a,providerId:c}=e;if(!i&&!s&&!n&&!r||!c)return null;try{return new au(c)._credential({idToken:n,accessToken:i,nonce:a,pendingToken:r})}catch(u){return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks extends Ku{constructor(){super("facebook.com")}static credential(e){return ar._fromParams({providerId:Ks.PROVIDER_ID,signInMethod:Ks.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ks.credentialFromTaggedObject(e)}static credentialFromError(e){return Ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ks.credential(e.oauthAccessToken)}catch(n){return null}}}Ks.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ks.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws extends Ku{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ar._fromParams({providerId:Ws.PROVIDER_ID,signInMethod:Ws.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ws.credentialFromTaggedObject(e)}static credentialFromError(e){return Ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Ws.credential(n,i)}catch(s){return null}}}Ws.GOOGLE_SIGN_IN_METHOD="google.com";Ws.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys extends Ku{constructor(){super("github.com")}static credential(e){return ar._fromParams({providerId:Ys.PROVIDER_ID,signInMethod:Ys.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ys.credentialFromTaggedObject(e)}static credentialFromError(e){return Ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ys.credential(e.oauthAccessToken)}catch(n){return null}}}Ys.GITHUB_SIGN_IN_METHOD="github.com";Ys.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nF="http://localhost";class Tu extends $u{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Br(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Br(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Br(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,pendingToken:r}=n;return!i||!s||!r||i!==s?null:new Tu(i,r)}static _create(e,n){return new Tu(e,n)}buildRequest(){return{requestUri:nF,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iF="saml.";class wg extends Wr{constructor(e){ve(e.startsWith(iF),"argument-error"),super(e)}static credentialFromResult(e){return wg.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return wg.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Tu.fromJSON(e);return ve(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:i}=e;if(!n||!i)return null;try{return Tu._create(i,n)}catch(s){return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js extends Ku{constructor(){super("twitter.com")}static credential(e,n){return ar._fromParams({providerId:Js.PROVIDER_ID,signInMethod:Js.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Js.credentialFromTaggedObject(e)}static credentialFromError(e){return Js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Js.credential(n,i)}catch(s){return null}}}Js.TWITTER_SIGN_IN_METHOD="twitter.com";Js.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pM(t,e){return A(this,null,function*(){return Kr(t,"POST","/v1/accounts:signUp",on(t,e))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,i,s=!1){return A(this,null,function*(){const r=yield Ts._fromIdTokenResponse(e,i,s),a=kC(i);return new hs({user:r,providerId:a,_tokenResponse:i,operationType:n})})}static _forOperation(e,n,i){return A(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);const s=kC(i);return new hs({user:e,providerId:s,_tokenResponse:i,operationType:n})})}}function kC(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sF(t){return A(this,null,function*(){var s;if(Kt(t.app))return Promise.reject(qn(t));const e=en(t);if(yield e._initializationPromise,(s=e.currentUser)!=null&&s.isAnonymous)return new hs({user:e.currentUser,providerId:null,operationType:"signIn"});const n=yield pM(e,{returnSecureToken:!0}),i=yield hs._fromIdTokenResponse(e,"signIn",n,!0);return yield e._updateCurrentUser(i.user),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg extends vi{constructor(e,n,i,s){var r;super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,bg.prototype),this.customData={appName:e.name,tenantId:(r=e.tenantId)!=null?r:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new bg(e,n,i,s)}}function gM(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?bg._fromErrorAndOperation(t,r,e,i):r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yM(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rF(t,e){return A(this,null,function*(){const n=ze(t);yield sy(!0,n,e);const{providerUserInfo:i}=yield oO(n.auth,{idToken:yield n.getIdToken(),deleteProvider:[e]}),s=yM(i||[]);return n.providerData=n.providerData.filter(r=>s.has(r.providerId)),s.has("phone")||(n.phoneNumber=null),yield n.auth._persistUserIfCurrent(n),n})}function IT(t,e,n=!1){return A(this,null,function*(){const i=yield jr(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return hs._forOperation(t,"link",i)})}function sy(t,e,n){return A(this,null,function*(){yield hf(e);const i=yM(e.providerData),s=t===!1?"provider-already-linked":"no-such-provider";ve(i.has(n)===t,e.auth,s)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vM(t,e,n=!1){return A(this,null,function*(){const{auth:i}=t;if(Kt(i.app))return Promise.reject(qn(i));const s="reauthenticate";try{const r=yield jr(t,gM(i,s,e,t),n);ve(r.idToken,i,"internal-error");const a=ty(r.idToken);ve(a,i,"internal-error");const{sub:c}=a;return ve(t.uid===c,i,"user-mismatch"),hs._forOperation(t,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&Xn(i,"user-mismatch"),r}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xM(t,e,n=!1){return A(this,null,function*(){if(Kt(t.app))return Promise.reject(qn(t));const i="signIn",s=yield gM(t,i,e),r=yield hs._fromIdTokenResponse(t,i,s);return n||(yield t._updateCurrentUser(r.user)),r})}function ry(t,e){return A(this,null,function*(){return xM(en(t),e)})}function _M(t,e){return A(this,null,function*(){const n=ze(t);return yield sy(!1,n,e.providerId),IT(n,e)})}function TM(t,e){return A(this,null,function*(){return vM(ze(t),e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oF(t,e){return A(this,null,function*(){return Kr(t,"POST","/v1/accounts:signInWithCustomToken",on(t,e))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aF(t,e){return A(this,null,function*(){if(Kt(t.app))return Promise.reject(qn(t));const n=en(t),i=yield oF(n,{token:e,returnSecureToken:!0}),s=yield hs._fromIdTokenResponse(n,"signIn",i);return yield n._updateCurrentUser(s.user),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?RT._fromServerResponse(e,n):"totpInfo"in n?NT._fromServerResponse(e,n):Xn(e,"internal-error")}}class RT extends qf{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new RT(n)}}class NT extends qf{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new NT(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(t,e,n){var i;ve(((i=n.url)==null?void 0:i.length)>0,t,"invalid-continue-uri"),ve(typeof n.dynamicLinkDomain=="undefined"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),ve(typeof n.linkDomain=="undefined"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ve(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(ve(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MT(t){return A(this,null,function*(){const e=en(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function lF(t,e,n){return A(this,null,function*(){const i=en(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&oy(i,s,n),yield Ko(i,s,"getOobCode",zO,"EMAIL_PASSWORD_PROVIDER")})}function cF(t,e,n){return A(this,null,function*(){yield mM(ze(t),{oobCode:e,newPassword:n}).catch(i=>A(null,null,function*(){throw i.code==="auth/password-does-not-meet-requirements"&&MT(t),i}))})}function uF(t,e){return A(this,null,function*(){yield qO(ze(t),{oobCode:e})})}function wM(t,e){return A(this,null,function*(){const n=ze(t),i=yield mM(n,{oobCode:e}),s=i.requestType;switch(ve(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ve(i.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ve(i.mfaInfo,n,"internal-error");default:ve(i.email,n,"internal-error")}let r=null;return i.mfaInfo&&(r=qf._fromServerResponse(en(n),i.mfaInfo)),{data:{email:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.newEmail:i.email)||null,previousEmail:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.email:i.newEmail)||null,multiFactorInfo:r},operation:s}})}function dF(t,e){return A(this,null,function*(){const{data:n}=yield wM(ze(t),e);return n.email})}function hF(t,e,n){return A(this,null,function*(){if(Kt(t.app))return Promise.reject(qn(t));const i=en(t),a=yield Ko(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",pM,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&MT(t),u}),c=yield hs._fromIdTokenResponse(i,"signIn",a);return yield i._updateCurrentUser(c.user),c})}function fF(t,e,n){return Kt(t.app)?Promise.reject(qn(t)):ry(ze(t),ma.credential(e,n)).catch(i=>A(null,null,function*(){throw i.code==="auth/password-does-not-meet-requirements"&&MT(t),i}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mF(t,e,n){return A(this,null,function*(){const i=en(t),s={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function r(a,c){ve(c.handleCodeInApp,i,"argument-error"),c&&oy(i,a,c)}r(s,n),yield Ko(i,s,"getOobCode",HO,"EMAIL_PASSWORD_PROVIDER")})}function pF(t,e){const n=iy.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}function gF(t,e,n){return A(this,null,function*(){if(Kt(t.app))return Promise.reject(qn(t));const i=ze(t),s=ma.credentialWithLink(e,n||df());return ve(s._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),ry(i,s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yF(t,e){return A(this,null,function*(){return an(t,"POST","/v1/accounts:createAuthUri",on(t,e))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vF(t,e){return A(this,null,function*(){const n=ST()?df():"http://localhost",i={identifier:e,continueUri:n},{signinMethods:s}=yield yF(ze(t),i);return s||[]})}function xF(t,e){return A(this,null,function*(){const n=ze(t),s={requestType:"VERIFY_EMAIL",idToken:yield t.getIdToken()};e&&oy(n.auth,s,e);const{email:r}=yield GO(n.auth,s);r!==t.email&&(yield t.reload())})}function _F(t,e,n){return A(this,null,function*(){const i=ze(t),r={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield t.getIdToken(),newEmail:e};n&&oy(i.auth,r,n);const{email:a}=yield $O(i.auth,r);a!==t.email&&(yield t.reload())})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TF(t,e){return A(this,null,function*(){return an(t,"POST","/v1/accounts:update",e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wF(i,s){return A(this,arguments,function*(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=ze(t),c={idToken:yield r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},u=yield jr(r,TF(r.auth,c));r.displayName=u.displayName||null,r.photoURL=u.photoUrl||null;const h=r.providerData.find(({providerId:g})=>g==="password");h&&(h.displayName=r.displayName,h.photoURL=r.photoURL),yield r._updateTokensIfNecessary(u)})}function bF(t,e){const n=ze(t);return Kt(n.auth.app)?Promise.reject(qn(n.auth)):bM(n,e,null)}function EF(t,e){return bM(ze(t),null,e)}function bM(t,e,n){return A(this,null,function*(){const{auth:i}=t,r={idToken:yield t.getIdToken(),returnSecureToken:!0};e&&(r.email=e),n&&(r.password=n);const a=yield jr(t,FO(i,r));yield t._updateTokensIfNecessary(a,!0)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SF(t){var s,r;if(!t)return null;const{providerId:e}=t,n=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},i=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(t!=null&&t.idToken)){const a=(r=(s=ty(t.idToken))==null?void 0:s.firebase)==null?void 0:r.sign_in_provider;if(a){const c=a!=="anonymous"&&a!=="custom"?a:null;return new lu(i,c)}}if(!e)return null;switch(e){case"facebook.com":return new AF(i,n);case"github.com":return new CF(i,n);case"google.com":return new IF(i,n);case"twitter.com":return new RF(i,n,t.screenName||null);case"custom":case"anonymous":return new lu(i,null);default:return new lu(i,e,n)}}class lu{constructor(e,n,i={}){this.isNewUser=e,this.providerId=n,this.profile=i}}class EM extends lu{constructor(e,n,i,s){super(e,n,i),this.username=s}}class AF extends lu{constructor(e,n){super(e,"facebook.com",n)}}class CF extends EM{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class IF extends lu{constructor(e,n){super(e,"google.com",n)}}class RF extends EM{constructor(e,n,i){super(e,"twitter.com",n,i)}}function NF(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:SF(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,n,i){this.type=e,this.credential=n,this.user=i}static _fromIdtoken(e,n){return new dl("enroll",e,n)}static _fromMfaPendingCredential(e){return new dl("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,i;if(e!=null&&e.multiFactorSession){if((n=e.multiFactorSession)!=null&&n.pendingCredential)return dl._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if((i=e.multiFactorSession)!=null&&i.idToken)return dl._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e,n,i){this.session=e,this.hints=n,this.signInResolver=i}static _fromError(e,n){const i=en(e),s=n.customData._serverResponse,r=(s.mfaInfo||[]).map(c=>qf._fromServerResponse(i,c));ve(s.mfaPendingCredential,i,"internal-error");const a=dl._fromMfaPendingCredential(s.mfaPendingCredential);return new PT(a,r,c=>A(null,null,function*(){const u=yield c._process(i,a);delete s.mfaInfo,delete s.mfaPendingCredential;const h=pe(J({},s),{idToken:u.idToken,refreshToken:u.refreshToken});switch(n.operationType){case"signIn":const g=yield hs._fromIdTokenResponse(i,n.operationType,h);return yield i._updateCurrentUser(g.user),g;case"reauthenticate":return ve(n.user,i,"internal-error"),hs._forOperation(n.user,n.operationType,h);default:Xn(i,"internal-error")}}))}resolveSignIn(e){return A(this,null,function*(){const n=e;return this.signInResolver(n)})}}function MF(t,e){var s;const n=ze(t),i=e;return ve(e.customData.operationType,n,"argument-error"),ve((s=i.customData._serverResponse)==null?void 0:s.mfaPendingCredential,n,"argument-error"),PT._fromError(n,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VC(t,e){return an(t,"POST","/v2/accounts/mfaEnrollment:start",on(t,e))}function PF(t,e){return an(t,"POST","/v2/accounts/mfaEnrollment:finalize",on(t,e))}function DF(t,e){return an(t,"POST","/v2/accounts/mfaEnrollment:withdraw",on(t,e))}class DT{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(i=>qf._fromServerResponse(e.auth,i)))})}static _fromUser(e){return new DT(e)}getSession(){return A(this,null,function*(){return dl._fromIdtoken(yield this.user.getIdToken(),this.user)})}enroll(e,n){return A(this,null,function*(){const i=e,s=yield this.getSession(),r=yield jr(this.user,i._process(this.user.auth,s,n));return yield this.user._updateTokensIfNecessary(r),this.user.reload()})}unenroll(e){return A(this,null,function*(){const n=typeof e=="string"?e:e.uid,i=yield this.user.getIdToken();try{const s=yield jr(this.user,DF(this.user.auth,{idToken:i,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:r})=>r!==n),yield this.user._updateTokensIfNecessary(s),yield this.user.reload()}catch(s){throw s}})}}const nx=new WeakMap;function kF(t){const e=ze(t);return nx.has(e)||nx.set(e,DT._fromUser(e)),nx.get(e)}const Eg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Eg,"1"),this.storage.removeItem(Eg),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VF=1e3,LF=10;class cu extends SM{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=cM(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},r=this.storage.getItem(i);gO()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,LF):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},VF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(e,n){return A(this,null,function*(){yield Lr(cu.prototype,this,"_set").call(this,e,n),this.localCache[e]=JSON.stringify(n)})}_get(e){return A(this,null,function*(){const n=yield Lr(cu.prototype,this,"_get").call(this,e);return this.localCache[e]=JSON.stringify(n),n})}_remove(e){return A(this,null,function*(){yield Lr(cu.prototype,this,"_remove").call(this,e),delete this.localCache[e]})}}cu.type="LOCAL";const kT=cu;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM extends SM{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}AM.type="SESSION";const bl=AM;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UF(t){return Promise.all(t.map(e=>A(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new ay(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}handleEvent(e){return A(this,null,function*(){const n=e,{eventId:i,eventType:s,data:r}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const c=Array.from(a).map(h=>A(this,null,function*(){return h(n.origin,r)})),u=yield UF(c);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ay.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,i=50){return A(this,null,function*(){const s=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,a;return new Promise((c,u)=>{const h=jf("",20);s.port1.start();const g=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:s,onMessage(x){const T=x;if(T.data.eventId===h)switch(T.data.status){case"ack":clearTimeout(g),r=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),c(T.data.response);break;default:clearTimeout(g),clearTimeout(r),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(){return window}function FF(t){wn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VT(){return typeof wn().WorkerGlobalScope!="undefined"&&typeof wn().importScripts=="function"}function BF(){return A(this,null,function*(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(t){return null}})}function qF(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function jF(){return VT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM="firebaseLocalStorageDb",GF=1,Sg="firebaseLocalStorage",IM="fbase_key";class Gf{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ly(t,e){return t.transaction([Sg],e?"readwrite":"readonly").objectStore(Sg)}function zF(){const t=indexedDB.deleteDatabase(CM);return new Gf(t).toPromise()}function zx(){const t=indexedDB.open(CM,GF);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Sg,{keyPath:IM})}catch(s){n(s)}}),t.addEventListener("success",()=>A(null,null,function*(){const i=t.result;i.objectStoreNames.contains(Sg)?e(i):(i.close(),yield zF(),e(yield zx()))}))})}function LC(t,e,n){return A(this,null,function*(){const i=ly(t,!0).put({[IM]:e,value:n});return new Gf(i).toPromise()})}function HF(t,e){return A(this,null,function*(){const n=ly(t,!1).get(e),i=yield new Gf(n).toPromise();return i===void 0?null:i.value})}function UC(t,e){const n=ly(t,!0).delete(e);return new Gf(n).toPromise()}const $F=800,KF=3;class RM{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return A(this,null,function*(){return this.db?this.db:(this.db=yield zx(),this.db)})}_withRetries(e){return A(this,null,function*(){let n=0;for(;;)try{const i=yield this._openDb();return yield e(i)}catch(i){if(n++>KF)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return A(this,null,function*(){return VT()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return A(this,null,function*(){this.receiver=ay._getInstance(jF()),this.receiver._subscribe("keyChanged",(e,n)=>A(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(n.key)}})),this.receiver._subscribe("ping",(e,n)=>A(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return A(this,null,function*(){var n,i;if(this.activeServiceWorker=yield BF(),!this.activeServiceWorker)return;this.sender=new OF(this.activeServiceWorker);const e=yield this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(e){return A(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||qF()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(n){}})}_isAvailable(){return A(this,null,function*(){try{if(!indexedDB)return!1;const e=yield zx();return yield LC(e,Eg,"1"),yield UC(e,Eg),!0}catch(e){}return!1})}_withPendingWrite(e){return A(this,null,function*(){this.pendingWrites++;try{yield e()}finally{this.pendingWrites--}})}_set(e,n){return A(this,null,function*(){return this._withPendingWrite(()=>A(this,null,function*(){return yield this._withRetries(i=>LC(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)}))})}_get(e){return A(this,null,function*(){const n=yield this._withRetries(i=>HF(i,e));return this.localCache[e]=n,n})}_remove(e){return A(this,null,function*(){return this._withPendingWrite(()=>A(this,null,function*(){return yield this._withRetries(n=>UC(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)}))})}_poll(){return A(this,null,function*(){const e=yield this._withRetries(s=>{const r=ly(s,!1).getAll();return new Gf(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:r}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n})}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>A(this,null,function*(){return this._poll()}),$F)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}RM.type="LOCAL";const mf=RM;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OC(t,e){return an(t,"POST","/v2/accounts/mfaSignIn:start",on(t,e))}function WF(t,e){return an(t,"POST","/v2/accounts/mfaSignIn:finalize",on(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix=dM("rcb"),YF=new Uf(3e4,6e4);class JF{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=wn().grecaptcha)!=null&&e.render)}load(e,n=""){return ve(QF(n),e,"argument-error"),this.shouldResolveImmediately(n)&&AC(wn().grecaptcha)?Promise.resolve(wn().grecaptcha):new Promise((i,s)=>{const r=wn().setTimeout(()=>{s(Nn(e,"network-request-failed"))},YF.get());wn()[ix]=()=>{wn().clearTimeout(r),delete wn()[ix];const c=wn().grecaptcha;if(!c||!AC(c)){s(Nn(e,"internal-error"));return}const u=c.render;c.render=(h,g)=>{const x=u(h,g);return this.counter++,x},this.hostLanguage=n,i(c)};const a=`${bO()}?${zu({onload:ix,render:"explicit",hl:n})}`;CT(a).catch(()=>{clearTimeout(r),s(Nn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!((n=wn().grecaptcha)!=null&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function QF(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class XF{load(e){return A(this,null,function*(){return new IO(e)})}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh="recaptcha",ZF={theme:"light",type:"image"};let e6=class{constructor(e,n,i=J({},ZF)){this.parameters=i,this.type=qh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=en(e),this.isInvisible=this.parameters.size==="invisible",ve(typeof document!="undefined",this.auth,"operation-not-supported-in-this-environment");const s=typeof n=="string"?document.getElementById(n):n;ve(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new XF:new JF,this.validateStartingState()}verify(){return A(this,null,function*(){this.assertNotDestroyed();const e=yield this.render(),n=this.getAssertedRecaptcha(),i=n.getResponse(e);return i||new Promise(s=>{const r=a=>{a&&(this.tokenChangeListeners.delete(r),s(a))};this.tokenChangeListeners.add(r),this.isInvisible&&n.execute(e)})})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){ve(!this.parameters.sitekey,this.auth,"argument-error"),ve(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ve(typeof document!="undefined",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(i=>i(n)),typeof e=="function")e(n);else if(typeof e=="string"){const i=wn()[e];typeof i=="function"&&i(n)}}}assertNotDestroyed(){ve(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){return A(this,null,function*(){if(yield this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId})}init(){return A(this,null,function*(){ve(ST()&&!VT(),this.auth,"internal-error"),yield t6(),this.recaptcha=yield this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=yield sO(this.auth);ve(e,this.auth,"internal-error"),this.parameters.sitekey=e})}getAssertedRecaptcha(){return ve(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function t6(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=xl._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}function n6(t,e,n){return A(this,null,function*(){if(Kt(t.app))return Promise.reject(qn(t));const i=en(t),s=yield cy(i,e,ze(n));return new LT(s,r=>ry(i,r))})}function i6(t,e,n){return A(this,null,function*(){const i=ze(t);yield sy(!1,i,"phone");const s=yield cy(i.auth,e,ze(n));return new LT(s,r=>_M(i,r))})}function s6(t,e,n){return A(this,null,function*(){const i=ze(t);if(Kt(i.auth.app))return Promise.reject(qn(i.auth));const s=yield cy(i.auth,e,ze(n));return new LT(s,r=>TM(i,r))})}function cy(t,e,n){return A(this,null,function*(){var i;if(!t._getRecaptchaConfig())try{yield kO(t)}catch(s){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const r=s.session;if("phoneNumber"in s){ve(r.type==="enroll",t,"internal-error");const a={idToken:r.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(yield Ko(t,a,"mfaSmsEnrollment",(g,x)=>A(null,null,function*(){if(x.phoneEnrollmentInfo.captchaResponse===Bh){ve((n==null?void 0:n.type)===qh,g,"argument-error");const T=yield sx(g,x,n);return VC(g,T)}return VC(g,x)}),"PHONE_PROVIDER").catch(g=>Promise.reject(g))).phoneSessionInfo.sessionInfo}else{ve(r.type==="signin",t,"internal-error");const a=((i=s.multiFactorHint)==null?void 0:i.uid)||s.multiFactorUid;ve(a,t,"missing-multi-factor-info");const c={mfaPendingCredential:r.credential,mfaEnrollmentId:a,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(yield Ko(t,c,"mfaSmsSignIn",(x,T)=>A(null,null,function*(){if(T.phoneSignInInfo.captchaResponse===Bh){ve((n==null?void 0:n.type)===qh,x,"argument-error");const b=yield sx(x,T,n);return OC(x,b)}return OC(x,T)}),"PHONE_PROVIDER").catch(x=>Promise.reject(x))).phoneResponseInfo.sessionInfo}}else{const r={phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(yield Ko(t,r,"sendVerificationCode",(h,g)=>A(null,null,function*(){if(g.captchaResponse===Bh){ve((n==null?void 0:n.type)===qh,h,"argument-error");const x=yield sx(h,g,n);return DC(h,x)}return DC(h,g)}),"PHONE_PROVIDER").catch(h=>Promise.reject(h))).sessionInfo}}finally{n==null||n._reset()}})}function r6(t,e){return A(this,null,function*(){const n=ze(t);if(Kt(n.auth.app))return Promise.reject(qn(n.auth));yield IT(n,e)})}function sx(t,e,n){return A(this,null,function*(){ve(n.type===qh,t,"argument-error");const i=yield n.verify();ve(typeof i=="string",t,"argument-error");const s=J({},e);if("phoneEnrollmentInfo"in s){const r=s.phoneEnrollmentInfo.phoneNumber,a=s.phoneEnrollmentInfo.captchaResponse,c=s.phoneEnrollmentInfo.clientType,u=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:r,recaptchaToken:i,captchaResponse:a,clientType:c,recaptchaVersion:u}}),s}else if("phoneSignInInfo"in s){const r=s.phoneSignInInfo.captchaResponse,a=s.phoneSignInInfo.clientType,c=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:i,captchaResponse:r,clientType:a,recaptchaVersion:c}}),s}else return Object.assign(s,{recaptchaToken:i}),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let El=class Yp{constructor(e){this.providerId=Yp.PROVIDER_ID,this.auth=en(e)}verifyPhoneNumber(e,n){return cy(this.auth,e,ze(n))}static credential(e,n){return xl._fromVerification(e,n)}static credentialFromResult(e){const n=e;return Yp.credentialFromTaggedObject(n)}static credentialFromError(e){return Yp.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:i}=e;return n&&i?xl._fromTokenResponse(n,i):null}};El.PROVIDER_ID="phone";El.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ul(t,e){return e?zi(e):(ve(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT extends $u{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Br(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Br(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Br(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function o6(t){return xM(t.auth,new UT(t),t.bypassAuthState)}function a6(t){const{auth:e,user:n}=t;return ve(n,e,"internal-error"),vM(n,new UT(t),t.bypassAuthState)}function l6(t){return A(this,null,function*(){const{auth:e,user:n}=t;return ve(n,e,"internal-error"),IT(n,new UT(t),t.bypassAuthState)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e,n,i,s,r=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>A(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return A(this,null,function*(){const{urlResponse:n,sessionId:i,postBody:s,tenantId:r,error:a,type:c}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(u))}catch(h){this.reject(h)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return o6;case"linkViaPopup":case"linkViaRedirect":return l6;case"reauthViaPopup":case"reauthViaRedirect":return a6;default:Xn(this.auth,"internal-error")}}resolve(e){Cs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Cs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6=new Uf(2e3,1e4);function u6(t,e,n){return A(this,null,function*(){if(Kt(t.app))return Promise.reject(Nn(t,"operation-not-supported-in-this-environment"));const i=en(t);Hu(t,e,Wr);const s=Ul(i,n);return new Or(i,"signInViaPopup",e,s).executeNotNull()})}function d6(t,e,n){return A(this,null,function*(){const i=ze(t);if(Kt(i.auth.app))return Promise.reject(Nn(i.auth,"operation-not-supported-in-this-environment"));Hu(i.auth,e,Wr);const s=Ul(i.auth,n);return new Or(i.auth,"reauthViaPopup",e,s,i).executeNotNull()})}function h6(t,e,n){return A(this,null,function*(){const i=ze(t);Hu(i.auth,e,Wr);const s=Ul(i.auth,n);return new Or(i.auth,"linkViaPopup",e,s,i).executeNotNull()})}class Or extends NM{constructor(e,n,i,s,r){super(e,n,s,r),this.provider=i,this.authWindow=null,this.pollId=null,Or.currentPopupAction&&Or.currentPopupAction.cancel(),Or.currentPopupAction=this}executeNotNull(){return A(this,null,function*(){const e=yield this.execute();return ve(e,this.auth,"internal-error"),e})}onExecution(){return A(this,null,function*(){Cs(this.filter.length===1,"Popup operations only handle one event");const e=jf();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Nn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Nn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Or.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Nn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,c6.get())};e()}}Or.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f6="pendingRedirect",jh=new Map;class Gh extends NM{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}execute(){return A(this,null,function*(){let e=jh.get(this.auth._key());if(!e){try{const i=(yield m6(this.resolver,this.auth))?yield Lr(Gh.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}jh.set(this.auth._key(),e)}return this.bypassAuthState||jh.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return A(this,null,function*(){if(e.type==="signInViaRedirect")return Lr(Gh.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Lr(Gh.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return A(this,null,function*(){})}cleanUp(){}}function m6(t,e){return A(this,null,function*(){const n=PM(e),i=MM(t);if(!(yield i._isAvailable()))return!1;const s=(yield i._get(n))==="true";return yield i._remove(n),s})}function OT(t,e){return A(this,null,function*(){return MM(t)._set(PM(e),"true")})}function p6(){jh.clear()}function FT(t,e){jh.set(t._key(),e)}function MM(t){return zi(t._redirectPersistence)}function PM(t){return vl(f6,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g6(t,e,n){return y6(t,e,n)}function y6(t,e,n){return A(this,null,function*(){if(Kt(t.app))return Promise.reject(qn(t));const i=en(t);Hu(t,e,Wr),yield i._initializationPromise;const s=Ul(i,n);return yield OT(s,i),s._openRedirect(i,e,"signInViaRedirect")})}function v6(t,e,n){return x6(t,e,n)}function x6(t,e,n){return A(this,null,function*(){const i=ze(t);if(Hu(i.auth,e,Wr),Kt(i.auth.app))return Promise.reject(qn(i.auth));yield i.auth._initializationPromise;const s=Ul(i.auth,n);yield OT(s,i.auth);const r=yield DM(i);return s._openRedirect(i.auth,e,"reauthViaRedirect",r)})}function _6(t,e,n){return T6(t,e,n)}function T6(t,e,n){return A(this,null,function*(){const i=ze(t);Hu(i.auth,e,Wr),yield i.auth._initializationPromise;const s=Ul(i.auth,n);yield sy(!1,i,e.providerId),yield OT(s,i.auth);const r=yield DM(i);return s._openRedirect(i.auth,e,"linkViaRedirect",r)})}function w6(t,e){return A(this,null,function*(){return yield en(t)._initializationPromise,uy(t,e,!1)})}function uy(t,e,n=!1){return A(this,null,function*(){if(Kt(t.app))return Promise.reject(qn(t));const i=en(t),s=Ul(i,e),a=yield new Gh(i,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,yield i._persistUserIfCurrent(a.user),yield i._setRedirectUser(null,e)),a})}function DM(t){return A(this,null,function*(){const e=jf(`${t.uid}:::`);return t._redirectEventId=e,yield t.auth._setRedirectUser(t),yield t.auth._persistUserIfCurrent(t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b6=600*1e3;class kM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!E6(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!VM(e)){const s=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Nn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=b6&&this.cachedEventUids.clear(),this.cachedEventUids.has(FC(e))}saveEventToCache(e){this.cachedEventUids.add(FC(e)),this.lastProcessedEventTime=Date.now()}}function FC(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function VM({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function E6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return VM(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LM(n){return A(this,arguments,function*(t,e={}){return an(t,"GET","/v1/projects",e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,A6=/^https?/;function C6(t){return A(this,null,function*(){if(t.config.emulator)return;const{authorizedDomains:e}=yield LM(t);for(const n of e)try{if(I6(n))return}catch(i){}Xn(t,"unauthorized-domain")})}function I6(t){const e=df(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!A6.test(n))return!1;if(S6.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R6=new Uf(3e4,6e4);function BC(){const t=wn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function N6(t){return new Promise((e,n)=>{var s,r,a;function i(){BC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{BC(),n(Nn(t,"network-request-failed"))},timeout:R6.get()})}if((r=(s=wn().gapi)==null?void 0:s.iframes)!=null&&r.Iframe)e(gapi.iframes.getContext());else if((a=wn().gapi)!=null&&a.load)i();else{const c=dM("iframefcb");return wn()[c]=()=>{gapi.load?i():n(Nn(t,"network-request-failed"))},CT(`${SO()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Jp=null,e})}let Jp=null;function M6(t){return Jp=Jp||N6(t),Jp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P6=new Uf(5e3,15e3),D6="__/auth/iframe",k6="emulator/auth/iframe",V6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},L6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function U6(t){const e=t.config;ve(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?AT(e,k6):`https://${t.config.authDomain}/${D6}`,i={apiKey:e.apiKey,appName:t.name,v:fa},s=L6.get(t.config.apiHost);s&&(i.eid=s);const r=t._getFrameworks();return r.length&&(i.fw=r.join(",")),`${n}?${zu(i).slice(1)}`}function O6(t){return A(this,null,function*(){const e=yield M6(t),n=wn().gapi;return ve(n,t,"internal-error"),e.open({where:document.body,url:U6(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:V6,dontclear:!0},i=>new Promise((s,r)=>A(null,null,function*(){yield i.restyle({setHideOnLeave:!1});const a=Nn(t,"network-request-failed"),c=wn().setTimeout(()=>{r(a)},P6.get());function u(){wn().clearTimeout(c),s(i)}i.ping(u).then(u,()=>{r(a)})})))})}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},B6=500,q6=600,j6="_blank",G6="http://localhost";class qC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function z6(t,e,n,i=B6,s=q6){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const u=pe(J({},F6),{width:i.toString(),height:s.toString(),top:r,left:a}),h=Zt().toLowerCase();n&&(c=rM(h)?j6:n),iM(h)&&(e=e||G6,u.scrollbars="yes");const g=Object.entries(u).reduce((T,[b,S])=>`${T}${b}=${S},`,"");if(pO(h)&&c!=="_self")return H6(e||"",c),new qC(null);const x=window.open(e||"",c,g);ve(x,t,"popup-blocked");try{x.focus()}catch(T){}return new qC(x)}function H6(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $6="__/auth/handler",K6="emulator/auth/handler",W6=encodeURIComponent("fac");function Hx(t,e,n,i,s,r){return A(this,null,function*(){ve(t.config.authDomain,t,"auth-domain-config-required"),ve(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:fa,eventId:s};if(e instanceof Wr){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",w5(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,x]of Object.entries(r||{}))a[g]=x}if(e instanceof Ku){const g=e.getScopes().filter(x=>x!=="");g.length>0&&(a.scopes=g.join(","))}t.tenantId&&(a.tid=t.tenantId);const c=a;for(const g of Object.keys(c))c[g]===void 0&&delete c[g];const u=yield t._getAppCheckToken(),h=u?`#${W6}=${encodeURIComponent(u)}`:"";return`${Y6(t)}?${zu(c).slice(1)}${h}`})}function Y6({config:t}){return t.emulator?AT(t,K6):`https://${t.authDomain}/${$6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx="webStorageSupport";class J6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bl,this._completeRedirectFn=uy,this._overrideRedirectResult=FT}_openPopup(e,n,i,s){return A(this,null,function*(){var a;Cs((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const r=yield Hx(e,n,i,df(),s);return z6(e,r,jf())})}_openRedirect(e,n,i,s){return A(this,null,function*(){yield this._originValidation(e);const r=yield Hx(e,n,i,df(),s);return FF(r),new Promise(()=>{})})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:r}=this.eventManagers[n];return s?Promise.resolve(s):(Cs(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}initAndGetManager(e){return A(this,null,function*(){const n=yield O6(e),i=new kM(e);return n.register("authEvent",s=>(ve(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(rx,{type:rx},s=>{var a;const r=(a=s==null?void 0:s[0])==null?void 0:a[rx];r!==void 0&&n(!!r),Xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=C6(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return cM()||sM()||Ff()}}const Q6=J6;class X6{constructor(e){this.factorId=e}_process(e,n,i){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,i);case"signin":return this._finalizeSignIn(e,n.credential);default:return Qs("unexpected MultiFactorSessionType")}}}class BT extends X6{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new BT(e)}_finalizeEnroll(e,n,i){return PF(e,{idToken:n,displayName:i,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return WF(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class UM{constructor(){}static assertion(e){return BT._fromCredential(e)}}UM.FACTOR_ID="phone";var jC="@firebase/auth",GC="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}getToken(e){return A(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function tB(t){ta(new or("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=i.options;ve(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uM(t)},h=new TO(i,s,r,u);return VO(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),ta(new or("auth-internal",e=>{const n=en(e.getProvider("auth").getImmediate());return(i=>new Z6(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),bs(jC,GC,eB(t)),bs(jC,GC,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nB=300;u5("authIdTokenMaxAge");function iB(){var t,e;return(e=(t=document.getElementsByTagName("head"))==null?void 0:t[0])!=null?e:document}wO({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const r=Nn("internal-error");r.customData=s,n(r)},i.type="text/javascript",i.charset="UTF-8",iB().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});tB("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sB=2e3;function rB(t,e,n){return A(this,null,function*(){var a;const{BuildInfo:i}=Sl();Cs(e.sessionId,"AuthEvent did not contain a session ID");const s=yield uB(e.sessionId),r={};return Ff()?r.ibi=i.packageName:Of()?r.apn=i.packageName:Xn(t,"operation-not-supported-in-this-environment"),i.displayName&&(r.appDisplayName=i.displayName),r.sessionId=s,Hx(t,n,e.type,void 0,(a=e.eventId)!=null?a:void 0,r)})}function oB(t){return A(this,null,function*(){const{BuildInfo:e}=Sl(),n={};Ff()?n.iosBundleId=e.packageName:Of()?n.androidPackageName=e.packageName:Xn(t,"operation-not-supported-in-this-environment"),yield LM(t,n)})}function aB(t){const{cordova:e}=Sl();return new Promise(n=>{e.plugins.browsertab.isAvailable(i=>{let s=null;i?e.plugins.browsertab.openUrl(t):s=e.InAppBrowser.open(t,mO()?"_blank":"_system","location=yes"),n(s)})})}function lB(t,e,n){return A(this,null,function*(){const{cordova:i}=Sl();let s=()=>{};try{yield new Promise((r,a)=>{let c=null;function u(){var T;r();const x=(T=i.plugins.browsertab)==null?void 0:T.close;typeof x=="function"&&x(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function h(){c||(c=window.setTimeout(()=>{a(Nn(t,"redirect-cancelled-by-user"))},sB))}function g(){(document==null?void 0:document.visibilityState)==="visible"&&h()}e.addPassiveListener(u),document.addEventListener("resume",h,!1),Of()&&document.addEventListener("visibilitychange",g,!1),s=()=>{e.removePassiveListener(u),document.removeEventListener("resume",h,!1),document.removeEventListener("visibilitychange",g,!1),c&&window.clearTimeout(c)}})}finally{s()}})}function cB(t){var n,i,s,r,a,c,u,h,g,x;const e=Sl();ve(typeof((n=e==null?void 0:e.universalLinks)==null?void 0:n.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ve(typeof((i=e==null?void 0:e.BuildInfo)==null?void 0:i.packageName)!="undefined",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ve(typeof((a=(r=(s=e==null?void 0:e.cordova)==null?void 0:s.plugins)==null?void 0:r.browsertab)==null?void 0:a.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ve(typeof((h=(u=(c=e==null?void 0:e.cordova)==null?void 0:c.plugins)==null?void 0:u.browsertab)==null?void 0:h.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ve(typeof((x=(g=e==null?void 0:e.cordova)==null?void 0:g.InAppBrowser)==null?void 0:x.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function uB(t){return A(this,null,function*(){const e=dB(t),n=yield crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")})}function dB(t){if(Cs(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder!="undefined")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hB=20;class fB extends kM{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}initialized(){return A(this,null,function*(){yield this.initPromise})}}function mB(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:yB(),postBody:null,tenantId:t.tenantId,error:Nn(t,"no-auth-event")}}function pB(t,e){return $x()._set(Kx(t),e)}function zC(t){return A(this,null,function*(){const e=yield $x()._get(Kx(t));return e&&(yield $x()._remove(Kx(t))),e})}function gB(t,e){var i,s;const n=xB(e);if(n.includes("/__/auth/callback")){const r=Qp(n),a=r.firebaseError?vB(decodeURIComponent(r.firebaseError)):null,c=(s=(i=a==null?void 0:a.code)==null?void 0:i.split("auth/"))==null?void 0:s[1],u=c?Nn(c):null;return u?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:n,postBody:null}}return null}function yB(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<hB;n++){const i=Math.floor(Math.random()*e.length);t.push(e.charAt(i))}return t.join("")}function $x(){return zi(kT)}function Kx(t){return vl("authEvent",t.config.apiKey,t.name)}function vB(t){try{return JSON.parse(t)}catch(e){return null}}function xB(t){const e=Qp(t),n=e.link?decodeURIComponent(e.link):void 0,i=Qp(n).link,s=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return Qp(s).link||s||i||n||t}function Qp(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return Wc(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _B=500;class TB{constructor(){this._redirectPersistence=bl,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=uy,this._overrideRedirectResult=FT}_initialize(e){return A(this,null,function*(){const n=e._key();let i=this.eventManagers.get(n);return i||(i=new fB(e),this.eventManagers.set(n,i),this.attachCallbackListeners(e,i)),i})}_openPopup(e){Xn(e,"operation-not-supported-in-this-environment")}_openRedirect(e,n,i,s){return A(this,null,function*(){cB(e);const r=yield this._initialize(e);yield r.initialized(),r.resetRedirect(),p6(),yield this._originValidation(e);const a=mB(e,i,s);yield pB(e,a);const c=yield rB(e,a,n),u=yield aB(c);return lB(e,r,u)})}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=oB(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:i,handleOpenURL:s,BuildInfo:r}=Sl(),a=setTimeout(()=>A(null,null,function*(){yield zC(e),n.onEvent(HC())}),_B),c=g=>A(null,null,function*(){clearTimeout(a);const x=yield zC(e);let T=null;x&&(g!=null&&g.url)&&(T=gB(x,g.url)),n.onEvent(T||HC())});typeof i!="undefined"&&typeof i.subscribe=="function"&&i.subscribe(null,c);const u=s,h=`${r.packageName.toLowerCase()}://`;Sl().handleOpenURL=g=>A(null,null,function*(){if(g.toLowerCase().startsWith(h)&&c({url:g}),typeof u=="function")try{u(g)}catch(x){console.error(x)}})}}const wB=TB;function HC(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Nn("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bB(t,e){en(t)._logFramework(e)}var EB="@firebase/auth-compat",SB="0.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AB=1e3;function zh(){var t;return((t=self==null?void 0:self.location)==null?void 0:t.protocol)||null}function CB(){return zh()==="http:"||zh()==="https:"}function OM(t=Zt()){return!!((zh()==="file:"||zh()==="ionic:"||zh()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function IB(){return yT()||Zg()}function RB(){return M2()&&(document==null?void 0:document.documentMode)===11}function NB(t=Zt()){return/Edge\/\d+/.test(t)}function MB(t=Zt()){return RB()||NB(t)}function FM(){try{const t=self.localStorage,e=jf();if(t)return t.setItem(e,"1"),t.removeItem(e),MB()?lf():!0}catch(t){return qT()&&lf()}return!1}function qT(){return typeof global!="undefined"&&"WorkerGlobalScope"in global&&"importScripts"in global}function ox(){return(CB()||N2()||OM())&&!IB()&&FM()&&!qT()}function BM(){return OM()&&typeof document!="undefined"}function PB(){return A(this,null,function*(){return BM()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},AB);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1})}function DB(){return typeof window!="undefined"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji={LOCAL:"local",NONE:"none",SESSION:"session"},xh=ve,qM="persistence";function kB(t,e){if(xh(Object.values(ji).includes(e),t,"invalid-persistence-type"),yT()){xh(e!==ji.SESSION,t,"unsupported-persistence-type");return}if(Zg()){xh(e===ji.NONE,t,"unsupported-persistence-type");return}if(qT()){xh(e===ji.NONE||e===ji.LOCAL&&lf(),t,"unsupported-persistence-type");return}xh(e===ji.NONE||FM(),t,"unsupported-persistence-type")}function Wx(t){return A(this,null,function*(){yield t._initializationPromise;const e=jM(),n=vl(qM,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistenceType())})}function VB(t,e){const n=jM();if(!n)return[];const i=vl(qM,t,e);switch(n.getItem(i)){case ji.NONE:return[_u];case ji.LOCAL:return[mf,bl];case ji.SESSION:return[bl];default:return[]}}function jM(){var t;try{return((t=DB())==null?void 0:t.sessionStorage)||null}catch(e){return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LB=ve;class Go{constructor(){this.browserResolver=zi(Q6),this.cordovaResolver=zi(wB),this.underlyingResolver=null,this._redirectPersistence=bl,this._completeRedirectFn=uy,this._overrideRedirectResult=FT}_initialize(e){return A(this,null,function*(){return yield this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)})}_openPopup(e,n,i,s){return A(this,null,function*(){return yield this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,i,s)})}_openRedirect(e,n,i,s){return A(this,null,function*(){return yield this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,i,s)})}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return BM()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return LB(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){return A(this,null,function*(){if(this.underlyingResolver)return;const e=yield PB();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GM(t){return t.unwrap()}function UB(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OB(t){return zM(t)}function FB(t,e){var i;const n=(i=e.customData)==null?void 0:i._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const s=e;s.resolver=new BB(t,MF(t,e))}else if(n){const s=zM(e),r=e;s&&(r.credential=s,r.tenantId=n.tenantId||void 0,r.email=n.email||void 0,r.phoneNumber=n.phoneNumber||void 0)}}function zM(t){const{_tokenResponse:e}=t instanceof vi?t.customData:t;if(!e)return null;if(!(t instanceof vi)&&"temporaryProof"in e&&"phoneNumber"in e)return El.credentialFromResult(t);const n=e.providerId;if(!n||n===yh.PASSWORD)return null;let i;switch(n){case yh.GOOGLE:i=Ws;break;case yh.FACEBOOK:i=Ks;break;case yh.GITHUB:i=Ys;break;case yh.TWITTER:i=Js;break;default:const{oauthIdToken:s,oauthAccessToken:r,oauthTokenSecret:a,pendingToken:c,nonce:u}=e;return!r&&!a&&!s&&!c?null:c?n.startsWith("saml.")?Tu._create(n,c):ar._fromParams({providerId:n,signInMethod:n,pendingToken:c,idToken:s,accessToken:r}):new au(n).credential({idToken:s,accessToken:r,rawNonce:u})}return t instanceof vi?i.credentialFromError(t):i.credentialFromResult(t)}function Ai(t,e){return e.catch(n=>{throw n instanceof vi&&FB(t,n),n}).then(n=>{const i=n.operationType,s=n.user;return{operationType:i,credential:OB(n),additionalUserInfo:NF(n),user:dy.getOrCreate(s)}})}function Yx(t,e){return A(this,null,function*(){const n=yield e;return{verificationId:n.verificationId,confirm:i=>Ai(t,n.confirm(i))}})}class BB{constructor(e,n){this.resolver=n,this.auth=UB(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Ai(GM(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dy=class Mh{constructor(e){this._delegate=e,this.multiFactor=kF(e)}static getOrCreate(e){return Mh.USER_MAP.has(e)||Mh.USER_MAP.set(e,new Mh(e)),Mh.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}linkWithCredential(e){return A(this,null,function*(){return Ai(this.auth,_M(this._delegate,e))})}linkWithPhoneNumber(e,n){return A(this,null,function*(){return Yx(this.auth,i6(this._delegate,e,n))})}linkWithPopup(e){return A(this,null,function*(){return Ai(this.auth,h6(this._delegate,e,Go))})}linkWithRedirect(e){return A(this,null,function*(){return yield Wx(en(this.auth)),_6(this._delegate,e,Go)})}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}reauthenticateWithCredential(e){return A(this,null,function*(){return Ai(this.auth,TM(this._delegate,e))})}reauthenticateWithPhoneNumber(e,n){return Yx(this.auth,s6(this._delegate,e,n))}reauthenticateWithPopup(e){return Ai(this.auth,d6(this._delegate,e,Go))}reauthenticateWithRedirect(e){return A(this,null,function*(){return yield Wx(en(this.auth)),v6(this._delegate,e,Go)})}sendEmailVerification(e){return xF(this._delegate,e)}unlink(e){return A(this,null,function*(){return yield rF(this._delegate,e),this})}updateEmail(e){return bF(this._delegate,e)}updatePassword(e){return EF(this._delegate,e)}updatePhoneNumber(e){return r6(this._delegate,e)}updateProfile(e){return wF(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return _F(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};dy.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h=ve;class Jx{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:i}=e.options;_h(i,"invalid-api-key",{appName:e.name}),_h(i,"invalid-api-key",{appName:e.name});const s=typeof window!="undefined"?Go:void 0;this._delegate=n.initialize({options:{persistence:qB(i,e.name),popupRedirectResolver:s}}),this._delegate._updateErrorMap(WU),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?dy.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){LO(this._delegate,e,n)}applyActionCode(e){return uF(this._delegate,e)}checkActionCode(e){return wM(this._delegate,e)}confirmPasswordReset(e,n){return cF(this._delegate,e,n)}createUserWithEmailAndPassword(e,n){return A(this,null,function*(){return Ai(this._delegate,hF(this._delegate,e,n))})}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return vF(this._delegate,e)}isSignInWithEmailLink(e){return pF(this._delegate,e)}getRedirectResult(){return A(this,null,function*(){_h(ox(),this._delegate,"operation-not-supported-in-this-environment");const e=yield w6(this._delegate,Go);return e?Ai(this._delegate,Promise.resolve(e)):{credential:null,user:null}})}addFrameworkForLogging(e){bB(this._delegate,e)}onAuthStateChanged(e,n,i){const{next:s,error:r,complete:a}=$C(e,n,i);return this._delegate.onAuthStateChanged(s,r,a)}onIdTokenChanged(e,n,i){const{next:s,error:r,complete:a}=$C(e,n,i);return this._delegate.onIdTokenChanged(s,r,a)}sendSignInLinkToEmail(e,n){return mF(this._delegate,e,n)}sendPasswordResetEmail(e,n){return lF(this._delegate,e,n||void 0)}setPersistence(e){return A(this,null,function*(){kB(this._delegate,e);let n;switch(e){case ji.SESSION:n=bl;break;case ji.LOCAL:n=(yield zi(mf)._isAvailable())?mf:kT;break;case ji.NONE:n=_u;break;default:return Xn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)})}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Ai(this._delegate,sF(this._delegate))}signInWithCredential(e){return Ai(this._delegate,ry(this._delegate,e))}signInWithCustomToken(e){return Ai(this._delegate,aF(this._delegate,e))}signInWithEmailAndPassword(e,n){return Ai(this._delegate,fF(this._delegate,e,n))}signInWithEmailLink(e,n){return Ai(this._delegate,gF(this._delegate,e,n))}signInWithPhoneNumber(e,n){return Yx(this._delegate,n6(this._delegate,e,n))}signInWithPopup(e){return A(this,null,function*(){return _h(ox(),this._delegate,"operation-not-supported-in-this-environment"),Ai(this._delegate,u6(this._delegate,e,Go))})}signInWithRedirect(e){return A(this,null,function*(){return _h(ox(),this._delegate,"operation-not-supported-in-this-environment"),yield Wx(this._delegate),g6(this._delegate,e,Go)})}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return dF(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}Jx.Persistence=ji;function $C(t,e,n){let i=t;typeof t!="function"&&({next:i,error:e,complete:n}=t);const s=i;return{next:a=>s(a&&dy.getOrCreate(a)),error:e,complete:n}}function qB(t,e){const n=VB(t,e);if(typeof self!="undefined"&&!n.includes(mf)&&n.push(mf),typeof window!="undefined")for(const i of[kT,bl])n.includes(i)||n.push(i);return n.includes(_u)||n.push(_u),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{static credential(e,n){return El.credential(e,n)}constructor(){this.providerId="phone",this._delegate=new El(GM(_t.auth()))}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}jT.PHONE_SIGN_IN_METHOD=El.PHONE_SIGN_IN_METHOD;jT.PROVIDER_ID=El.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jB=ve;class GB{constructor(e,n,i=_t.app()){var s;jB((s=i.options)==null?void 0:s.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new e6(i.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zB="auth-compat";function HB(t){t.INTERNAL.registerComponent(new or(zB,e=>{const n=e.getProvider("app-compat").getImmediate(),i=e.getProvider("auth");return new Jx(n,i)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Vc.EMAIL_SIGNIN,PASSWORD_RESET:Vc.PASSWORD_RESET,RECOVER_EMAIL:Vc.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Vc.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Vc.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Vc.VERIFY_EMAIL}},EmailAuthProvider:ma,FacebookAuthProvider:Ks,GithubAuthProvider:Ys,GoogleAuthProvider:Ws,OAuthProvider:au,SAMLAuthProvider:wg,PhoneAuthProvider:jT,PhoneMultiFactorGenerator:UM,RecaptchaVerifier:GB,TwitterAuthProvider:Js,Auth:Jx,AuthCredential:$u,Error:vi}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(EB,SB)}HB(_t);function $B(){return A(this,null,function*(){try{const t=new _t.auth.GoogleAuthProvider,e=yield _t.auth().signInWithPopup(t);if(e.user){const n=yield e.user.getIdToken();return{user:e.user,idToken:n}}else throw new Error("No user returned from Google sign-in")}catch(t){throw console.error("[nativeGoogleLogin.web] signIn error:",t),t}})}var dt=(t=>(t.Founder="Founder",t.Developer="Developer",t.Investor="Investor",t))(dt||{}),Te=(t=>(t.LANDING="LANDING",t.AUTH="AUTH",t.ONBOARDING="ONBOARDING",t.DASHBOARD="DASHBOARD",t.ANALYTICS="ANALYTICS",t.MESSAGES="MESSAGES",t.PEOPLE="PEOPLE",t.IDEAS="IDEAS",t.REQUESTS="REQUESTS",t.NEGOTIATIONS="NEGOTIATIONS",t))(Te||{});function Hh(t){let e=t[0],n=t[1],i=t[2];return Math.sqrt(e*e+n*n+i*i)}function Qx(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function KB(t,e,n,i){return t[0]=e,t[1]=n,t[2]=i,t}function KC(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function WC(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function WB(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function YB(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function ax(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function JB(t,e){let n=e[0]-t[0],i=e[1]-t[1],s=e[2]-t[2];return Math.sqrt(n*n+i*i+s*s)}function QB(t,e){let n=e[0]-t[0],i=e[1]-t[1],s=e[2]-t[2];return n*n+i*i+s*s}function YC(t){let e=t[0],n=t[1],i=t[2];return e*e+n*n+i*i}function XB(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function ZB(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function Xx(t,e){let n=e[0],i=e[1],s=e[2],r=n*n+i*i+s*s;return r>0&&(r=1/Math.sqrt(r)),t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function HM(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function JC(t,e,n){let i=e[0],s=e[1],r=e[2],a=n[0],c=n[1],u=n[2];return t[0]=s*u-r*c,t[1]=r*a-i*u,t[2]=i*c-s*a,t}function eq(t,e,n,i){let s=e[0],r=e[1],a=e[2];return t[0]=s+i*(n[0]-s),t[1]=r+i*(n[1]-r),t[2]=a+i*(n[2]-a),t}function tq(t,e,n,i,s){const r=Math.exp(-i*s);let a=e[0],c=e[1],u=e[2];return t[0]=n[0]+(a-n[0])*r,t[1]=n[1]+(c-n[1])*r,t[2]=n[2]+(u-n[2])*r,t}function nq(t,e,n){let i=e[0],s=e[1],r=e[2],a=n[3]*i+n[7]*s+n[11]*r+n[15];return a=a||1,t[0]=(n[0]*i+n[4]*s+n[8]*r+n[12])/a,t[1]=(n[1]*i+n[5]*s+n[9]*r+n[13])/a,t[2]=(n[2]*i+n[6]*s+n[10]*r+n[14])/a,t}function iq(t,e,n){let i=e[0],s=e[1],r=e[2],a=n[3]*i+n[7]*s+n[11]*r+n[15];return a=a||1,t[0]=(n[0]*i+n[4]*s+n[8]*r)/a,t[1]=(n[1]*i+n[5]*s+n[9]*r)/a,t[2]=(n[2]*i+n[6]*s+n[10]*r)/a,t}function sq(t,e,n){let i=e[0],s=e[1],r=e[2];return t[0]=i*n[0]+s*n[3]+r*n[6],t[1]=i*n[1]+s*n[4]+r*n[7],t[2]=i*n[2]+s*n[5]+r*n[8],t}function rq(t,e,n){let i=e[0],s=e[1],r=e[2],a=n[0],c=n[1],u=n[2],h=n[3],g=c*r-u*s,x=u*i-a*r,T=a*s-c*i,b=c*T-u*x,S=u*g-a*T,P=a*x-c*g,M=h*2;return g*=M,x*=M,T*=M,b*=2,S*=2,P*=2,t[0]=i+g+b,t[1]=s+x+S,t[2]=r+T+P,t}const oq=(function(){const t=[0,0,0],e=[0,0,0];return function(n,i){Qx(t,n),Qx(e,i),Xx(t,t),Xx(e,e);let s=HM(t,e);return s>1?0:s<-1?Math.PI:Math.acos(s)}})();function aq(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}class ws extends Array{constructor(e=0,n=e,i=e){return super(e,n,i),this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this[0]=e}set y(e){this[1]=e}set z(e){this[2]=e}set(e,n=e,i=e){return e.length?this.copy(e):(KB(this,e,n,i),this)}copy(e){return Qx(this,e),this}add(e,n){return n?KC(this,e,n):KC(this,this,e),this}sub(e,n){return n?WC(this,e,n):WC(this,this,e),this}multiply(e){return e.length?WB(this,this,e):ax(this,this,e),this}divide(e){return e.length?YB(this,this,e):ax(this,this,1/e),this}inverse(e=this){return ZB(this,e),this}len(){return Hh(this)}distance(e){return e?JB(this,e):Hh(this)}squaredLen(){return YC(this)}squaredDistance(e){return e?QB(this,e):YC(this)}negate(e=this){return XB(this,e),this}cross(e,n){return n?JC(this,e,n):JC(this,this,e),this}scale(e){return ax(this,this,e),this}normalize(){return Xx(this,this),this}dot(e){return HM(this,e)}equals(e){return aq(this,e)}applyMatrix3(e){return sq(this,this,e),this}applyMatrix4(e){return nq(this,this,e),this}scaleRotateMatrix4(e){return iq(this,this,e),this}applyQuaternion(e){return rq(this,this,e),this}angle(e){return oq(this,e)}lerp(e,n){return eq(this,this,e,n),this}smoothLerp(e,n,i){return tq(this,this,e,n,i),this}clone(){return new ws(this[0],this[1],this[2])}fromArray(e,n=0){return this[0]=e[n],this[1]=e[n+1],this[2]=e[n+2],this}toArray(e=[],n=0){return e[n]=this[0],e[n+1]=this[1],e[n+2]=this[2],e}transformDirection(e){const n=this[0],i=this[1],s=this[2];return this[0]=e[0]*n+e[4]*i+e[8]*s,this[1]=e[1]*n+e[5]*i+e[9]*s,this[2]=e[2]*n+e[6]*i+e[10]*s,this.normalize()}}const QC=new ws;let lq=1,cq=1,XC=!1;class uq{constructor(e,n={}){e.canvas||console.error("gl not passed as first argument to Geometry"),this.gl=e,this.attributes=n,this.id=lq++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state;for(let i in n)this.addAttribute(i,n[i])}addAttribute(e,n){if(this.attributes[e]=n,n.id=cq++,n.size=n.size||1,n.type=n.type||(n.data.constructor===Float32Array?this.gl.FLOAT:n.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),n.target=e==="index"?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,n.normalized=n.normalized||!1,n.stride=n.stride||0,n.offset=n.offset||0,n.count=n.count||(n.stride?n.data.byteLength/n.stride:n.data.length/n.size),n.divisor=n.instanced||0,n.needsUpdate=!1,n.usage=n.usage||this.gl.STATIC_DRAW,n.buffer||this.updateAttribute(n),n.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==n.count*n.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.instancedCount=Math.min(this.instancedCount,n.count*n.divisor);this.instancedCount=n.count*n.divisor}else e==="index"?this.drawRange.count=n.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,n.count))}updateAttribute(e){const n=!e.buffer;n&&(e.buffer=this.gl.createBuffer()),this.glState.boundBuffer!==e.buffer&&(this.gl.bindBuffer(e.target,e.buffer),this.glState.boundBuffer=e.buffer),n?this.gl.bufferData(e.target,e.data,e.usage):this.gl.bufferSubData(e.target,0,e.data),e.needsUpdate=!1}setIndex(e){this.addAttribute("index",e)}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}setInstancedCount(e){this.instancedCount=e}createVAO(e){this.VAOs[e.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.bindAttributes(e)}bindAttributes(e){e.attributeLocations.forEach((n,{name:i,type:s})=>{if(!this.attributes[i]){console.warn(`active attribute ${i} not being supplied`);return}const r=this.attributes[i];this.gl.bindBuffer(r.target,r.buffer),this.glState.boundBuffer=r.buffer;let a=1;s===35674&&(a=2),s===35675&&(a=3),s===35676&&(a=4);const c=r.size/a,u=a===1?0:a*a*4,h=a===1?0:a*4;for(let g=0;g<a;g++)this.gl.vertexAttribPointer(n+g,c,r.type,r.normalized,r.stride+u,r.offset+g*h),this.gl.enableVertexAttribArray(n+g),this.gl.renderer.vertexAttribDivisor(n+g,r.divisor)}),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}draw({program:e,mode:n=this.gl.TRIANGLES}){var s;this.gl.renderer.currentGeometry!==`${this.id}_${e.attributeOrder}`&&(this.VAOs[e.attributeOrder]||this.createVAO(e),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.gl.renderer.currentGeometry=`${this.id}_${e.attributeOrder}`),e.attributeLocations.forEach((r,{name:a})=>{const c=this.attributes[a];c.needsUpdate&&this.updateAttribute(c)});let i=2;((s=this.attributes.index)==null?void 0:s.type)===this.gl.UNSIGNED_INT&&(i=4),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(n,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*i,this.instancedCount):this.gl.renderer.drawArraysInstanced(n,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(n,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*i):this.gl.drawArrays(n,this.drawRange.start,this.drawRange.count)}getPosition(){const e=this.attributes.position;if(e.data)return e;if(!XC)return console.warn("No position buffer data found to compute bounds"),XC=!0}computeBoundingBox(e){e||(e=this.getPosition());const n=e.data,i=e.size;this.bounds||(this.bounds={min:new ws,max:new ws,center:new ws,scale:new ws,radius:1/0});const s=this.bounds.min,r=this.bounds.max,a=this.bounds.center,c=this.bounds.scale;s.set(1/0),r.set(-1/0);for(let u=0,h=n.length;u<h;u+=i){const g=n[u],x=n[u+1],T=n[u+2];s.x=Math.min(g,s.x),s.y=Math.min(x,s.y),s.z=Math.min(T,s.z),r.x=Math.max(g,r.x),r.y=Math.max(x,r.y),r.z=Math.max(T,r.z)}c.sub(r,s),a.add(s,r).divide(2)}computeBoundingSphere(e){e||(e=this.getPosition());const n=e.data,i=e.size;this.bounds||this.computeBoundingBox(e);let s=0;for(let r=0,a=n.length;r<a;r+=i)QC.fromArray(n,r),s=Math.max(s,this.bounds.center.squaredDistance(QC));this.bounds.radius=Math.sqrt(s)}remove(){for(let e in this.VAOs)this.gl.renderer.deleteVertexArray(this.VAOs[e]),delete this.VAOs[e];for(let e in this.attributes)this.gl.deleteBuffer(this.attributes[e].buffer),delete this.attributes[e]}}let dq=1;const ZC={};class hq{constructor(e,{vertex:n,fragment:i,uniforms:s={},transparent:r=!1,cullFace:a=e.BACK,frontFace:c=e.CCW,depthTest:u=!0,depthWrite:h=!0,depthFunc:g=e.LEQUAL}={}){e.canvas||console.error("gl not passed as first argument to Program"),this.gl=e,this.uniforms=s,this.id=dq++,n||console.warn("vertex shader not supplied"),i||console.warn("fragment shader not supplied"),this.transparent=r,this.cullFace=a,this.frontFace=c,this.depthTest=u,this.depthWrite=h,this.depthFunc=g,this.blendFunc={},this.blendEquation={},this.stencilFunc={},this.stencilOp={},this.transparent&&!this.blendFunc.src&&(this.gl.renderer.premultipliedAlpha?this.setBlendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.setBlendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)),this.vertexShader=e.createShader(e.VERTEX_SHADER),this.fragmentShader=e.createShader(e.FRAGMENT_SHADER),this.program=e.createProgram(),e.attachShader(this.program,this.vertexShader),e.attachShader(this.program,this.fragmentShader),this.setShaders({vertex:n,fragment:i})}setShaders({vertex:e,fragment:n}){if(e&&(this.gl.shaderSource(this.vertexShader,e),this.gl.compileShader(this.vertexShader),this.gl.getShaderInfoLog(this.vertexShader)!==""&&console.warn(`${this.gl.getShaderInfoLog(this.vertexShader)}
Vertex Shader
${eI(e)}`)),n&&(this.gl.shaderSource(this.fragmentShader,n),this.gl.compileShader(this.fragmentShader),this.gl.getShaderInfoLog(this.fragmentShader)!==""&&console.warn(`${this.gl.getShaderInfoLog(this.fragmentShader)}
Fragment Shader
${eI(n)}`)),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))return console.warn(this.gl.getProgramInfoLog(this.program));this.uniformLocations=new Map;let i=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_UNIFORMS);for(let a=0;a<i;a++){let c=this.gl.getActiveUniform(this.program,a);this.uniformLocations.set(c,this.gl.getUniformLocation(this.program,c.name));const u=c.name.match(/(\w+)/g);c.uniformName=u[0],c.nameComponents=u.slice(1)}this.attributeLocations=new Map;const s=[],r=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES);for(let a=0;a<r;a++){const c=this.gl.getActiveAttrib(this.program,a),u=this.gl.getAttribLocation(this.program,c.name);u!==-1&&(s[u]=c.name,this.attributeLocations.set(c,u))}this.attributeOrder=s.join("")}setBlendFunc(e,n,i,s){this.blendFunc.src=e,this.blendFunc.dst=n,this.blendFunc.srcAlpha=i,this.blendFunc.dstAlpha=s,e&&(this.transparent=!0)}setBlendEquation(e,n){this.blendEquation.modeRGB=e,this.blendEquation.modeAlpha=n}setStencilFunc(e,n,i){this.stencilRef=n,this.stencilFunc.func=e,this.stencilFunc.ref=n,this.stencilFunc.mask=i}setStencilOp(e,n,i){this.stencilOp.stencilFail=e,this.stencilOp.depthFail=n,this.stencilOp.depthPass=i}applyState(){this.depthTest?this.gl.renderer.enable(this.gl.DEPTH_TEST):this.gl.renderer.disable(this.gl.DEPTH_TEST),this.cullFace?this.gl.renderer.enable(this.gl.CULL_FACE):this.gl.renderer.disable(this.gl.CULL_FACE),this.blendFunc.src?this.gl.renderer.enable(this.gl.BLEND):this.gl.renderer.disable(this.gl.BLEND),this.cullFace&&this.gl.renderer.setCullFace(this.cullFace),this.gl.renderer.setFrontFace(this.frontFace),this.gl.renderer.setDepthMask(this.depthWrite),this.gl.renderer.setDepthFunc(this.depthFunc),this.blendFunc.src&&this.gl.renderer.setBlendFunc(this.blendFunc.src,this.blendFunc.dst,this.blendFunc.srcAlpha,this.blendFunc.dstAlpha),this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB,this.blendEquation.modeAlpha),this.stencilFunc.func||this.stencilOp.stencilFail?this.gl.renderer.enable(this.gl.STENCIL_TEST):this.gl.renderer.disable(this.gl.STENCIL_TEST),this.gl.renderer.setStencilFunc(this.stencilFunc.func,this.stencilFunc.ref,this.stencilFunc.mask),this.gl.renderer.setStencilOp(this.stencilOp.stencilFail,this.stencilOp.depthFail,this.stencilOp.depthPass)}use({flipFaces:e=!1}={}){let n=-1;this.gl.renderer.state.currentProgram===this.id||(this.gl.useProgram(this.program),this.gl.renderer.state.currentProgram=this.id),this.uniformLocations.forEach((s,r)=>{let a=this.uniforms[r.uniformName];for(const c of r.nameComponents){if(!a)break;if(c in a)a=a[c];else{if(Array.isArray(a.value))break;a=void 0;break}}if(!a)return tI(`Active uniform ${r.name} has not been supplied`);if(a&&a.value===void 0)return tI(`${r.name} uniform is missing a value parameter`);if(a.value.texture)return n=n+1,a.value.update(n),lx(this.gl,r.type,s,n);if(a.value.length&&a.value[0].texture){const c=[];return a.value.forEach(u=>{n=n+1,u.update(n),c.push(n)}),lx(this.gl,r.type,s,c)}lx(this.gl,r.type,s,a.value)}),this.applyState(),e&&this.gl.renderer.setFrontFace(this.frontFace===this.gl.CCW?this.gl.CW:this.gl.CCW)}remove(){this.gl.deleteProgram(this.program)}}function lx(t,e,n,i){i=i.length?fq(i):i;const s=t.renderer.state.uniformLocations.get(n);if(i.length)if(s===void 0||s.length!==i.length)t.renderer.state.uniformLocations.set(n,i.slice(0));else{if(mq(s,i))return;s.set?s.set(i):pq(s,i),t.renderer.state.uniformLocations.set(n,s)}else{if(s===i)return;t.renderer.state.uniformLocations.set(n,i)}switch(e){case 5126:return i.length?t.uniform1fv(n,i):t.uniform1f(n,i);case 35664:return t.uniform2fv(n,i);case 35665:return t.uniform3fv(n,i);case 35666:return t.uniform4fv(n,i);case 35670:case 5124:case 35678:case 36306:case 35680:case 36289:return i.length?t.uniform1iv(n,i):t.uniform1i(n,i);case 35671:case 35667:return t.uniform2iv(n,i);case 35672:case 35668:return t.uniform3iv(n,i);case 35673:case 35669:return t.uniform4iv(n,i);case 35674:return t.uniformMatrix2fv(n,!1,i);case 35675:return t.uniformMatrix3fv(n,!1,i);case 35676:return t.uniformMatrix4fv(n,!1,i)}}function eI(t){let e=t.split(`
`);for(let n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join(`
`)}function fq(t){const e=t.length,n=t[0].length;if(n===void 0)return t;const i=e*n;let s=ZC[i];s||(ZC[i]=s=new Float32Array(i));for(let r=0;r<e;r++)s.set(t[r],r*n);return s}function mq(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function pq(t,e){for(let n=0,i=t.length;n<i;n++)t[n]=e[n]}let cx=0;function tI(t){cx>100||(console.warn(t),cx++,cx>100&&console.warn("More than 100 program warnings - stopping logs."))}const ux=new ws;let gq=1;class yq{constructor({canvas:e=document.createElement("canvas"),width:n=300,height:i=150,dpr:s=1,alpha:r=!1,depth:a=!0,stencil:c=!1,antialias:u=!1,premultipliedAlpha:h=!1,preserveDrawingBuffer:g=!1,powerPreference:x="default",autoClear:T=!0,webgl:b=2}={}){const S={alpha:r,depth:a,stencil:c,antialias:u,premultipliedAlpha:h,preserveDrawingBuffer:g,powerPreference:x};this.dpr=s,this.alpha=r,this.color=!0,this.depth=a,this.stencil=c,this.premultipliedAlpha=h,this.autoClear=T,this.id=gq++,b===2&&(this.gl=e.getContext("webgl2",S)),this.isWebgl2=!!this.gl,this.gl||(this.gl=e.getContext("webgl",S)),this.gl||console.error("unable to create webgl context"),this.gl.renderer=this,this.setSize(n,i),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=!1,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LEQUAL,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={x:0,y:0,width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.state.currentProgram=null,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture"),this.getExtension("WEBGL_draw_buffers")),this.getExtension("WEBGL_compressed_texture_astc"),this.getExtension("EXT_texture_compression_bptc"),this.getExtension("WEBGL_compressed_texture_s3tc"),this.getExtension("WEBGL_compressed_texture_etc1"),this.getExtension("WEBGL_compressed_texture_pvrtc"),this.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES"),this.drawBuffers=this.getExtension("WEBGL_draw_buffers","drawBuffers","drawBuffersWEBGL"),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.parameters.maxAnisotropy=this.getExtension("EXT_texture_filter_anisotropic")?this.gl.getParameter(this.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}setSize(e,n){this.width=e,this.height=n,this.gl.canvas.width=e*this.dpr,this.gl.canvas.height=n*this.dpr,this.gl.canvas.style&&Object.assign(this.gl.canvas.style,{width:e+"px",height:n+"px"})}setViewport(e,n,i=0,s=0){this.state.viewport.width===e&&this.state.viewport.height===n||(this.state.viewport.width=e,this.state.viewport.height=n,this.state.viewport.x=i,this.state.viewport.y=s,this.gl.viewport(i,s,e,n))}setScissor(e,n,i=0,s=0){this.gl.scissor(i,s,e,n)}enable(e){this.state[e]!==!0&&(this.gl.enable(e),this.state[e]=!0)}disable(e){this.state[e]!==!1&&(this.gl.disable(e),this.state[e]=!1)}setBlendFunc(e,n,i,s){this.state.blendFunc.src===e&&this.state.blendFunc.dst===n&&this.state.blendFunc.srcAlpha===i&&this.state.blendFunc.dstAlpha===s||(this.state.blendFunc.src=e,this.state.blendFunc.dst=n,this.state.blendFunc.srcAlpha=i,this.state.blendFunc.dstAlpha=s,i!==void 0?this.gl.blendFuncSeparate(e,n,i,s):this.gl.blendFunc(e,n))}setBlendEquation(e,n){e=e||this.gl.FUNC_ADD,!(this.state.blendEquation.modeRGB===e&&this.state.blendEquation.modeAlpha===n)&&(this.state.blendEquation.modeRGB=e,this.state.blendEquation.modeAlpha=n,n!==void 0?this.gl.blendEquationSeparate(e,n):this.gl.blendEquation(e))}setCullFace(e){this.state.cullFace!==e&&(this.state.cullFace=e,this.gl.cullFace(e))}setFrontFace(e){this.state.frontFace!==e&&(this.state.frontFace=e,this.gl.frontFace(e))}setDepthMask(e){this.state.depthMask!==e&&(this.state.depthMask=e,this.gl.depthMask(e))}setDepthFunc(e){this.state.depthFunc!==e&&(this.state.depthFunc=e,this.gl.depthFunc(e))}setStencilMask(e){this.state.stencilMask!==e&&(this.state.stencilMask=e,this.gl.stencilMask(e))}setStencilFunc(e,n,i){this.state.stencilFunc===e&&this.state.stencilRef===n&&this.state.stencilFuncMask===i||(this.state.stencilFunc=e||this.gl.ALWAYS,this.state.stencilRef=n||0,this.state.stencilFuncMask=i||0,this.gl.stencilFunc(e||this.gl.ALWAYS,n||0,i||0))}setStencilOp(e,n,i){this.state.stencilFail===e&&this.state.stencilDepthFail===n&&this.state.stencilDepthPass===i||(this.state.stencilFail=e,this.state.stencilDepthFail=n,this.state.stencilDepthPass=i,this.gl.stencilOp(e,n,i))}activeTexture(e){this.state.activeTextureUnit!==e&&(this.state.activeTextureUnit=e,this.gl.activeTexture(this.gl.TEXTURE0+e))}bindFramebuffer({target:e=this.gl.FRAMEBUFFER,buffer:n=null}={}){this.state.framebuffer!==n&&(this.state.framebuffer=n,this.gl.bindFramebuffer(e,n))}getExtension(e,n,i){return n&&this.gl[n]?this.gl[n].bind(this.gl):(this.extensions[e]||(this.extensions[e]=this.gl.getExtension(e)),n?this.extensions[e]?this.extensions[e][i].bind(this.extensions[e]):null:this.extensions[e])}sortOpaque(e,n){return e.renderOrder!==n.renderOrder?e.renderOrder-n.renderOrder:e.program.id!==n.program.id?e.program.id-n.program.id:e.zDepth!==n.zDepth?e.zDepth-n.zDepth:n.id-e.id}sortTransparent(e,n){return e.renderOrder!==n.renderOrder?e.renderOrder-n.renderOrder:e.zDepth!==n.zDepth?n.zDepth-e.zDepth:n.id-e.id}sortUI(e,n){return e.renderOrder!==n.renderOrder?e.renderOrder-n.renderOrder:e.program.id!==n.program.id?e.program.id-n.program.id:n.id-e.id}getRenderList({scene:e,camera:n,frustumCull:i,sort:s}){let r=[];if(n&&i&&n.updateFrustum(),e.traverse(a=>{if(!a.visible)return!0;a.draw&&(i&&a.frustumCulled&&n&&!n.frustumIntersectsMesh(a)||r.push(a))}),s){const a=[],c=[],u=[];r.forEach(h=>{h.program.transparent?h.program.depthTest?c.push(h):u.push(h):a.push(h),h.zDepth=0,!(h.renderOrder!==0||!h.program.depthTest||!n)&&(h.worldMatrix.getTranslation(ux),ux.applyMatrix4(n.projectionViewMatrix),h.zDepth=ux.z)}),a.sort(this.sortOpaque),c.sort(this.sortTransparent),u.sort(this.sortUI),r=a.concat(c,u)}return r}render({scene:e,camera:n,target:i=null,update:s=!0,sort:r=!0,frustumCull:a=!0,clear:c}){i===null?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(i),this.setViewport(i.width,i.height)),(c||this.autoClear&&c!==!1)&&(this.depth&&(!i||i.depth)&&(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),(this.stencil||!i||i.stencil)&&(this.enable(this.gl.STENCIL_TEST),this.setStencilMask(255)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),s&&e.updateMatrixWorld(),n&&n.updateMatrixWorld(),this.getRenderList({scene:e,camera:n,frustumCull:a,sort:r}).forEach(h=>{h.draw({camera:n})})}}function vq(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function xq(t,e,n,i,s){return t[0]=e,t[1]=n,t[2]=i,t[3]=s,t}function _q(t,e){let n=e[0],i=e[1],s=e[2],r=e[3],a=n*n+i*i+s*s+r*r;return a>0&&(a=1/Math.sqrt(a)),t[0]=n*a,t[1]=i*a,t[2]=s*a,t[3]=r*a,t}function Tq(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function wq(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function bq(t,e,n){n=n*.5;let i=Math.sin(n);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(n),t}function nI(t,e,n){let i=e[0],s=e[1],r=e[2],a=e[3],c=n[0],u=n[1],h=n[2],g=n[3];return t[0]=i*g+a*c+s*h-r*u,t[1]=s*g+a*u+r*c-i*h,t[2]=r*g+a*h+i*u-s*c,t[3]=a*g-i*c-s*u-r*h,t}function Eq(t,e,n){n*=.5;let i=e[0],s=e[1],r=e[2],a=e[3],c=Math.sin(n),u=Math.cos(n);return t[0]=i*u+a*c,t[1]=s*u+r*c,t[2]=r*u-s*c,t[3]=a*u-i*c,t}function Sq(t,e,n){n*=.5;let i=e[0],s=e[1],r=e[2],a=e[3],c=Math.sin(n),u=Math.cos(n);return t[0]=i*u-r*c,t[1]=s*u+a*c,t[2]=r*u+i*c,t[3]=a*u-s*c,t}function Aq(t,e,n){n*=.5;let i=e[0],s=e[1],r=e[2],a=e[3],c=Math.sin(n),u=Math.cos(n);return t[0]=i*u+s*c,t[1]=s*u-i*c,t[2]=r*u+a*c,t[3]=a*u-r*c,t}function Cq(t,e,n,i){let s=e[0],r=e[1],a=e[2],c=e[3],u=n[0],h=n[1],g=n[2],x=n[3],T,b,S,P,M;return b=s*u+r*h+a*g+c*x,b<0&&(b=-b,u=-u,h=-h,g=-g,x=-x),1-b>1e-6?(T=Math.acos(b),S=Math.sin(T),P=Math.sin((1-i)*T)/S,M=Math.sin(i*T)/S):(P=1-i,M=i),t[0]=P*s+M*u,t[1]=P*r+M*h,t[2]=P*a+M*g,t[3]=P*c+M*x,t}function Iq(t,e){let n=e[0],i=e[1],s=e[2],r=e[3],a=n*n+i*i+s*s+r*r,c=a?1/a:0;return t[0]=-n*c,t[1]=-i*c,t[2]=-s*c,t[3]=r*c,t}function Rq(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function Nq(t,e){let n=e[0]+e[4]+e[8],i;if(n>0)i=Math.sqrt(n+1),t[3]=.5*i,i=.5/i,t[0]=(e[5]-e[7])*i,t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{let s=0;e[4]>e[0]&&(s=1),e[8]>e[s*3+s]&&(s=2);let r=(s+1)%3,a=(s+2)%3;i=Math.sqrt(e[s*3+s]-e[r*3+r]-e[a*3+a]+1),t[s]=.5*i,i=.5/i,t[3]=(e[r*3+a]-e[a*3+r])*i,t[r]=(e[r*3+s]+e[s*3+r])*i,t[a]=(e[a*3+s]+e[s*3+a])*i}return t}function Mq(t,e,n="YXZ"){let i=Math.sin(e[0]*.5),s=Math.cos(e[0]*.5),r=Math.sin(e[1]*.5),a=Math.cos(e[1]*.5),c=Math.sin(e[2]*.5),u=Math.cos(e[2]*.5);return n==="XYZ"?(t[0]=i*a*u+s*r*c,t[1]=s*r*u-i*a*c,t[2]=s*a*c+i*r*u,t[3]=s*a*u-i*r*c):n==="YXZ"?(t[0]=i*a*u+s*r*c,t[1]=s*r*u-i*a*c,t[2]=s*a*c-i*r*u,t[3]=s*a*u+i*r*c):n==="ZXY"?(t[0]=i*a*u-s*r*c,t[1]=s*r*u+i*a*c,t[2]=s*a*c+i*r*u,t[3]=s*a*u-i*r*c):n==="ZYX"?(t[0]=i*a*u-s*r*c,t[1]=s*r*u+i*a*c,t[2]=s*a*c-i*r*u,t[3]=s*a*u+i*r*c):n==="YZX"?(t[0]=i*a*u+s*r*c,t[1]=s*r*u+i*a*c,t[2]=s*a*c-i*r*u,t[3]=s*a*u-i*r*c):n==="XZY"&&(t[0]=i*a*u-s*r*c,t[1]=s*r*u-i*a*c,t[2]=s*a*c+i*r*u,t[3]=s*a*u+i*r*c),t}const Pq=vq,Dq=xq,kq=Tq,Vq=_q;class Lq extends Array{constructor(e=0,n=0,i=0,s=1){super(e,n,i,s),this.onChange=()=>{},this._target=this;const r=["0","1","2","3"];return new Proxy(this,{set(a,c){const u=Reflect.set(...arguments);return u&&r.includes(c)&&a.onChange(),u}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}get w(){return this[3]}set x(e){this._target[0]=e,this.onChange()}set y(e){this._target[1]=e,this.onChange()}set z(e){this._target[2]=e,this.onChange()}set w(e){this._target[3]=e,this.onChange()}identity(){return wq(this._target),this.onChange(),this}set(e,n,i,s){return e.length?this.copy(e):(Dq(this._target,e,n,i,s),this.onChange(),this)}rotateX(e){return Eq(this._target,this._target,e),this.onChange(),this}rotateY(e){return Sq(this._target,this._target,e),this.onChange(),this}rotateZ(e){return Aq(this._target,this._target,e),this.onChange(),this}inverse(e=this._target){return Iq(this._target,e),this.onChange(),this}conjugate(e=this._target){return Rq(this._target,e),this.onChange(),this}copy(e){return Pq(this._target,e),this.onChange(),this}normalize(e=this._target){return Vq(this._target,e),this.onChange(),this}multiply(e,n){return n?nI(this._target,e,n):nI(this._target,this._target,e),this.onChange(),this}dot(e){return kq(this._target,e)}fromMatrix3(e){return Nq(this._target,e),this.onChange(),this}fromEuler(e,n){return Mq(this._target,e,e.order),n||this.onChange(),this}fromAxisAngle(e,n){return bq(this._target,e,n),this.onChange(),this}slerp(e,n){return Cq(this._target,this._target,e,n),this.onChange(),this}fromArray(e,n=0){return this._target[0]=e[n],this._target[1]=e[n+1],this._target[2]=e[n+2],this._target[3]=e[n+3],this.onChange(),this}toArray(e=[],n=0){return e[n]=this[0],e[n+1]=this[1],e[n+2]=this[2],e[n+3]=this[3],e}}const Uq=1e-6;function Oq(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Fq(t,e,n,i,s,r,a,c,u,h,g,x,T,b,S,P,M){return t[0]=e,t[1]=n,t[2]=i,t[3]=s,t[4]=r,t[5]=a,t[6]=c,t[7]=u,t[8]=h,t[9]=g,t[10]=x,t[11]=T,t[12]=b,t[13]=S,t[14]=P,t[15]=M,t}function Bq(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function qq(t,e){let n=e[0],i=e[1],s=e[2],r=e[3],a=e[4],c=e[5],u=e[6],h=e[7],g=e[8],x=e[9],T=e[10],b=e[11],S=e[12],P=e[13],M=e[14],V=e[15],q=n*c-i*a,O=n*u-s*a,z=n*h-r*a,j=i*u-s*c,W=i*h-r*c,D=s*h-r*u,C=g*P-x*S,R=g*M-T*S,L=g*V-b*S,F=x*M-T*P,G=x*V-b*P,B=T*V-b*M,ye=q*B-O*G+z*F+j*L-W*R+D*C;return ye?(ye=1/ye,t[0]=(c*B-u*G+h*F)*ye,t[1]=(s*G-i*B-r*F)*ye,t[2]=(P*D-M*W+V*j)*ye,t[3]=(T*W-x*D-b*j)*ye,t[4]=(u*L-a*B-h*R)*ye,t[5]=(n*B-s*L+r*R)*ye,t[6]=(M*z-S*D-V*O)*ye,t[7]=(g*D-T*z+b*O)*ye,t[8]=(a*G-c*L+h*C)*ye,t[9]=(i*L-n*G-r*C)*ye,t[10]=(S*W-P*z+V*q)*ye,t[11]=(x*z-g*W-b*q)*ye,t[12]=(c*R-a*F-u*C)*ye,t[13]=(n*F-i*R+s*C)*ye,t[14]=(P*O-S*j-M*q)*ye,t[15]=(g*j-x*O+T*q)*ye,t):null}function $M(t){let e=t[0],n=t[1],i=t[2],s=t[3],r=t[4],a=t[5],c=t[6],u=t[7],h=t[8],g=t[9],x=t[10],T=t[11],b=t[12],S=t[13],P=t[14],M=t[15],V=e*a-n*r,q=e*c-i*r,O=e*u-s*r,z=n*c-i*a,j=n*u-s*a,W=i*u-s*c,D=h*S-g*b,C=h*P-x*b,R=h*M-T*b,L=g*P-x*S,F=g*M-T*S,G=x*M-T*P;return V*G-q*F+O*L+z*R-j*C+W*D}function iI(t,e,n){let i=e[0],s=e[1],r=e[2],a=e[3],c=e[4],u=e[5],h=e[6],g=e[7],x=e[8],T=e[9],b=e[10],S=e[11],P=e[12],M=e[13],V=e[14],q=e[15],O=n[0],z=n[1],j=n[2],W=n[3];return t[0]=O*i+z*c+j*x+W*P,t[1]=O*s+z*u+j*T+W*M,t[2]=O*r+z*h+j*b+W*V,t[3]=O*a+z*g+j*S+W*q,O=n[4],z=n[5],j=n[6],W=n[7],t[4]=O*i+z*c+j*x+W*P,t[5]=O*s+z*u+j*T+W*M,t[6]=O*r+z*h+j*b+W*V,t[7]=O*a+z*g+j*S+W*q,O=n[8],z=n[9],j=n[10],W=n[11],t[8]=O*i+z*c+j*x+W*P,t[9]=O*s+z*u+j*T+W*M,t[10]=O*r+z*h+j*b+W*V,t[11]=O*a+z*g+j*S+W*q,O=n[12],z=n[13],j=n[14],W=n[15],t[12]=O*i+z*c+j*x+W*P,t[13]=O*s+z*u+j*T+W*M,t[14]=O*r+z*h+j*b+W*V,t[15]=O*a+z*g+j*S+W*q,t}function jq(t,e,n){let i=n[0],s=n[1],r=n[2],a,c,u,h,g,x,T,b,S,P,M,V;return e===t?(t[12]=e[0]*i+e[4]*s+e[8]*r+e[12],t[13]=e[1]*i+e[5]*s+e[9]*r+e[13],t[14]=e[2]*i+e[6]*s+e[10]*r+e[14],t[15]=e[3]*i+e[7]*s+e[11]*r+e[15]):(a=e[0],c=e[1],u=e[2],h=e[3],g=e[4],x=e[5],T=e[6],b=e[7],S=e[8],P=e[9],M=e[10],V=e[11],t[0]=a,t[1]=c,t[2]=u,t[3]=h,t[4]=g,t[5]=x,t[6]=T,t[7]=b,t[8]=S,t[9]=P,t[10]=M,t[11]=V,t[12]=a*i+g*s+S*r+e[12],t[13]=c*i+x*s+P*r+e[13],t[14]=u*i+T*s+M*r+e[14],t[15]=h*i+b*s+V*r+e[15]),t}function Gq(t,e,n){let i=n[0],s=n[1],r=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*s,t[5]=e[5]*s,t[6]=e[6]*s,t[7]=e[7]*s,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function zq(t,e,n,i){let s=i[0],r=i[1],a=i[2],c=Math.hypot(s,r,a),u,h,g,x,T,b,S,P,M,V,q,O,z,j,W,D,C,R,L,F,G,B,ye,Ae;return Math.abs(c)<Uq?null:(c=1/c,s*=c,r*=c,a*=c,u=Math.sin(n),h=Math.cos(n),g=1-h,x=e[0],T=e[1],b=e[2],S=e[3],P=e[4],M=e[5],V=e[6],q=e[7],O=e[8],z=e[9],j=e[10],W=e[11],D=s*s*g+h,C=r*s*g+a*u,R=a*s*g-r*u,L=s*r*g-a*u,F=r*r*g+h,G=a*r*g+s*u,B=s*a*g+r*u,ye=r*a*g-s*u,Ae=a*a*g+h,t[0]=x*D+P*C+O*R,t[1]=T*D+M*C+z*R,t[2]=b*D+V*C+j*R,t[3]=S*D+q*C+W*R,t[4]=x*L+P*F+O*G,t[5]=T*L+M*F+z*G,t[6]=b*L+V*F+j*G,t[7]=S*L+q*F+W*G,t[8]=x*B+P*ye+O*Ae,t[9]=T*B+M*ye+z*Ae,t[10]=b*B+V*ye+j*Ae,t[11]=S*B+q*ye+W*Ae,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function Hq(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function KM(t,e){let n=e[0],i=e[1],s=e[2],r=e[4],a=e[5],c=e[6],u=e[8],h=e[9],g=e[10];return t[0]=Math.hypot(n,i,s),t[1]=Math.hypot(r,a,c),t[2]=Math.hypot(u,h,g),t}function $q(t){let e=t[0],n=t[1],i=t[2],s=t[4],r=t[5],a=t[6],c=t[8],u=t[9],h=t[10];const g=e*e+n*n+i*i,x=s*s+r*r+a*a,T=c*c+u*u+h*h;return Math.sqrt(Math.max(g,x,T))}const WM=(function(){const t=[1,1,1];return function(e,n){let i=t;KM(i,n);let s=1/i[0],r=1/i[1],a=1/i[2],c=n[0]*s,u=n[1]*r,h=n[2]*a,g=n[4]*s,x=n[5]*r,T=n[6]*a,b=n[8]*s,S=n[9]*r,P=n[10]*a,M=c+x+P,V=0;return M>0?(V=Math.sqrt(M+1)*2,e[3]=.25*V,e[0]=(T-S)/V,e[1]=(b-h)/V,e[2]=(u-g)/V):c>x&&c>P?(V=Math.sqrt(1+c-x-P)*2,e[3]=(T-S)/V,e[0]=.25*V,e[1]=(u+g)/V,e[2]=(b+h)/V):x>P?(V=Math.sqrt(1+x-c-P)*2,e[3]=(b-h)/V,e[0]=(u+g)/V,e[1]=.25*V,e[2]=(T+S)/V):(V=Math.sqrt(1+P-c-x)*2,e[3]=(u-g)/V,e[0]=(b+h)/V,e[1]=(T+S)/V,e[2]=.25*V),e}})();function Kq(t,e,n,i){let s=Hh([t[0],t[1],t[2]]);const r=Hh([t[4],t[5],t[6]]),a=Hh([t[8],t[9],t[10]]);$M(t)<0&&(s=-s),n[0]=t[12],n[1]=t[13],n[2]=t[14];const u=t.slice(),h=1/s,g=1/r,x=1/a;u[0]*=h,u[1]*=h,u[2]*=h,u[4]*=g,u[5]*=g,u[6]*=g,u[8]*=x,u[9]*=x,u[10]*=x,WM(e,u),i[0]=s,i[1]=r,i[2]=a}function Wq(t,e,n,i){const s=t,r=e[0],a=e[1],c=e[2],u=e[3],h=r+r,g=a+a,x=c+c,T=r*h,b=r*g,S=r*x,P=a*g,M=a*x,V=c*x,q=u*h,O=u*g,z=u*x,j=i[0],W=i[1],D=i[2];return s[0]=(1-(P+V))*j,s[1]=(b+z)*j,s[2]=(S-O)*j,s[3]=0,s[4]=(b-z)*W,s[5]=(1-(T+V))*W,s[6]=(M+q)*W,s[7]=0,s[8]=(S+O)*D,s[9]=(M-q)*D,s[10]=(1-(T+P))*D,s[11]=0,s[12]=n[0],s[13]=n[1],s[14]=n[2],s[15]=1,s}function Yq(t,e){let n=e[0],i=e[1],s=e[2],r=e[3],a=n+n,c=i+i,u=s+s,h=n*a,g=i*a,x=i*c,T=s*a,b=s*c,S=s*u,P=r*a,M=r*c,V=r*u;return t[0]=1-x-S,t[1]=g+V,t[2]=T-M,t[3]=0,t[4]=g-V,t[5]=1-h-S,t[6]=b+P,t[7]=0,t[8]=T+M,t[9]=b-P,t[10]=1-h-x,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Jq(t,e,n,i,s){let r=1/Math.tan(e/2),a=1/(i-s);return t[0]=r/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(s+i)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*s*i*a,t[15]=0,t}function Qq(t,e,n,i,s,r,a){let c=1/(e-n),u=1/(i-s),h=1/(r-a);return t[0]=-2*c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*h,t[11]=0,t[12]=(e+n)*c,t[13]=(s+i)*u,t[14]=(a+r)*h,t[15]=1,t}function Xq(t,e,n,i){let s=e[0],r=e[1],a=e[2],c=i[0],u=i[1],h=i[2],g=s-n[0],x=r-n[1],T=a-n[2],b=g*g+x*x+T*T;b===0?T=1:(b=1/Math.sqrt(b),g*=b,x*=b,T*=b);let S=u*T-h*x,P=h*g-c*T,M=c*x-u*g;return b=S*S+P*P+M*M,b===0&&(h?c+=1e-6:u?h+=1e-6:u+=1e-6,S=u*T-h*x,P=h*g-c*T,M=c*x-u*g,b=S*S+P*P+M*M),b=1/Math.sqrt(b),S*=b,P*=b,M*=b,t[0]=S,t[1]=P,t[2]=M,t[3]=0,t[4]=x*M-T*P,t[5]=T*S-g*M,t[6]=g*P-x*S,t[7]=0,t[8]=g,t[9]=x,t[10]=T,t[11]=0,t[12]=s,t[13]=r,t[14]=a,t[15]=1,t}function sI(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function rI(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function Zq(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}class Ag extends Array{constructor(e=1,n=0,i=0,s=0,r=0,a=1,c=0,u=0,h=0,g=0,x=1,T=0,b=0,S=0,P=0,M=1){return super(e,n,i,s,r,a,c,u,h,g,x,T,b,S,P,M),this}get x(){return this[12]}get y(){return this[13]}get z(){return this[14]}get w(){return this[15]}set x(e){this[12]=e}set y(e){this[13]=e}set z(e){this[14]=e}set w(e){this[15]=e}set(e,n,i,s,r,a,c,u,h,g,x,T,b,S,P,M){return e.length?this.copy(e):(Fq(this,e,n,i,s,r,a,c,u,h,g,x,T,b,S,P,M),this)}translate(e,n=this){return jq(this,n,e),this}rotate(e,n,i=this){return zq(this,i,e,n),this}scale(e,n=this){return Gq(this,n,typeof e=="number"?[e,e,e]:e),this}add(e,n){return n?sI(this,e,n):sI(this,this,e),this}sub(e,n){return n?rI(this,e,n):rI(this,this,e),this}multiply(e,n){return e.length?n?iI(this,e,n):iI(this,this,e):Zq(this,this,e),this}identity(){return Bq(this),this}copy(e){return Oq(this,e),this}fromPerspective({fov:e,aspect:n,near:i,far:s}={}){return Jq(this,e,n,i,s),this}fromOrthogonal({left:e,right:n,bottom:i,top:s,near:r,far:a}){return Qq(this,e,n,i,s,r,a),this}fromQuaternion(e){return Yq(this,e),this}setPosition(e){return this.x=e[0],this.y=e[1],this.z=e[2],this}inverse(e=this){return qq(this,e),this}compose(e,n,i){return Wq(this,e,n,i),this}decompose(e,n,i){return Kq(this,e,n,i),this}getRotation(e){return WM(e,this),this}getTranslation(e){return Hq(e,this),this}getScaling(e){return KM(e,this),this}getMaxScaleOnAxis(){return $q(this)}lookAt(e,n,i){return Xq(this,e,n,i),this}determinant(){return $M(this)}fromArray(e,n=0){return this[0]=e[n],this[1]=e[n+1],this[2]=e[n+2],this[3]=e[n+3],this[4]=e[n+4],this[5]=e[n+5],this[6]=e[n+6],this[7]=e[n+7],this[8]=e[n+8],this[9]=e[n+9],this[10]=e[n+10],this[11]=e[n+11],this[12]=e[n+12],this[13]=e[n+13],this[14]=e[n+14],this[15]=e[n+15],this}toArray(e=[],n=0){return e[n]=this[0],e[n+1]=this[1],e[n+2]=this[2],e[n+3]=this[3],e[n+4]=this[4],e[n+5]=this[5],e[n+6]=this[6],e[n+7]=this[7],e[n+8]=this[8],e[n+9]=this[9],e[n+10]=this[10],e[n+11]=this[11],e[n+12]=this[12],e[n+13]=this[13],e[n+14]=this[14],e[n+15]=this[15],e}}function e9(t,e,n="YXZ"){return n==="XYZ"?(t[1]=Math.asin(Math.min(Math.max(e[8],-1),1)),Math.abs(e[8])<.99999?(t[0]=Math.atan2(-e[9],e[10]),t[2]=Math.atan2(-e[4],e[0])):(t[0]=Math.atan2(e[6],e[5]),t[2]=0)):n==="YXZ"?(t[0]=Math.asin(-Math.min(Math.max(e[9],-1),1)),Math.abs(e[9])<.99999?(t[1]=Math.atan2(e[8],e[10]),t[2]=Math.atan2(e[1],e[5])):(t[1]=Math.atan2(-e[2],e[0]),t[2]=0)):n==="ZXY"?(t[0]=Math.asin(Math.min(Math.max(e[6],-1),1)),Math.abs(e[6])<.99999?(t[1]=Math.atan2(-e[2],e[10]),t[2]=Math.atan2(-e[4],e[5])):(t[1]=0,t[2]=Math.atan2(e[1],e[0]))):n==="ZYX"?(t[1]=Math.asin(-Math.min(Math.max(e[2],-1),1)),Math.abs(e[2])<.99999?(t[0]=Math.atan2(e[6],e[10]),t[2]=Math.atan2(e[1],e[0])):(t[0]=0,t[2]=Math.atan2(-e[4],e[5]))):n==="YZX"?(t[2]=Math.asin(Math.min(Math.max(e[1],-1),1)),Math.abs(e[1])<.99999?(t[0]=Math.atan2(-e[9],e[5]),t[1]=Math.atan2(-e[2],e[0])):(t[0]=0,t[1]=Math.atan2(e[8],e[10]))):n==="XZY"&&(t[2]=Math.asin(-Math.min(Math.max(e[4],-1),1)),Math.abs(e[4])<.99999?(t[0]=Math.atan2(e[6],e[5]),t[1]=Math.atan2(e[8],e[0])):(t[0]=Math.atan2(-e[9],e[10]),t[1]=0)),t}const oI=new Ag;class t9 extends Array{constructor(e=0,n=e,i=e,s="YXZ"){super(e,n,i),this.order=s,this.onChange=()=>{},this._target=this;const r=["0","1","2"];return new Proxy(this,{set(a,c){const u=Reflect.set(...arguments);return u&&r.includes(c)&&a.onChange(),u}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this._target[0]=e,this.onChange()}set y(e){this._target[1]=e,this.onChange()}set z(e){this._target[2]=e,this.onChange()}set(e,n=e,i=e){return e.length?this.copy(e):(this._target[0]=e,this._target[1]=n,this._target[2]=i,this.onChange(),this)}copy(e){return this._target[0]=e[0],this._target[1]=e[1],this._target[2]=e[2],this.onChange(),this}reorder(e){return this._target.order=e,this.onChange(),this}fromRotationMatrix(e,n=this.order){return e9(this._target,e,n),this.onChange(),this}fromQuaternion(e,n=this.order,i){return oI.fromQuaternion(e),this._target.fromRotationMatrix(oI,n),i||this.onChange(),this}fromArray(e,n=0){return this._target[0]=e[n],this._target[1]=e[n+1],this._target[2]=e[n+2],this}toArray(e=[],n=0){return e[n]=this[0],e[n+1]=this[1],e[n+2]=this[2],e}}class n9{constructor(){this.parent=null,this.children=[],this.visible=!0,this.matrix=new Ag,this.worldMatrix=new Ag,this.matrixAutoUpdate=!0,this.worldMatrixNeedsUpdate=!1,this.position=new ws,this.quaternion=new Lq,this.scale=new ws(1),this.rotation=new t9,this.up=new ws(0,1,0),this.rotation._target.onChange=()=>this.quaternion.fromEuler(this.rotation,!0),this.quaternion._target.onChange=()=>this.rotation.fromQuaternion(this.quaternion,void 0,!0)}setParent(e,n=!0){this.parent&&e!==this.parent&&this.parent.removeChild(this,!1),this.parent=e,n&&e&&e.addChild(this,!1)}addChild(e,n=!0){~this.children.indexOf(e)||this.children.push(e),n&&e.setParent(this,!1)}removeChild(e,n=!0){~this.children.indexOf(e)&&this.children.splice(this.children.indexOf(e),1),n&&e.setParent(null,!1)}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.worldMatrixNeedsUpdate||e)&&(this.parent===null?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiply(this.parent.worldMatrix,this.matrix),this.worldMatrixNeedsUpdate=!1,e=!0);for(let n=0,i=this.children.length;n<i;n++)this.children[n].updateMatrixWorld(e)}updateMatrix(){this.matrix.compose(this.quaternion,this.position,this.scale),this.worldMatrixNeedsUpdate=!0}traverse(e){if(!e(this))for(let n=0,i=this.children.length;n<i;n++)this.children[n].traverse(e)}decompose(){this.matrix.decompose(this.quaternion._target,this.position,this.scale),this.rotation.fromQuaternion(this.quaternion)}lookAt(e,n=!1){n?this.matrix.lookAt(this.position,e,this.up):this.matrix.lookAt(e,this.position,this.up),this.matrix.getRotation(this.quaternion._target),this.rotation.fromQuaternion(this.quaternion)}}function i9(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function s9(t,e){let n=e[0],i=e[1],s=e[2],r=e[3],a=n+n,c=i+i,u=s+s,h=n*a,g=i*a,x=i*c,T=s*a,b=s*c,S=s*u,P=r*a,M=r*c,V=r*u;return t[0]=1-x-S,t[3]=g-V,t[6]=T+M,t[1]=g+V,t[4]=1-h-S,t[7]=b-P,t[2]=T-M,t[5]=b+P,t[8]=1-h-x,t}function r9(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function o9(t,e,n,i,s,r,a,c,u,h){return t[0]=e,t[1]=n,t[2]=i,t[3]=s,t[4]=r,t[5]=a,t[6]=c,t[7]=u,t[8]=h,t}function a9(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function l9(t,e){let n=e[0],i=e[1],s=e[2],r=e[3],a=e[4],c=e[5],u=e[6],h=e[7],g=e[8],x=g*a-c*h,T=-g*r+c*u,b=h*r-a*u,S=n*x+i*T+s*b;return S?(S=1/S,t[0]=x*S,t[1]=(-g*i+s*h)*S,t[2]=(c*i-s*a)*S,t[3]=T*S,t[4]=(g*n-s*u)*S,t[5]=(-c*n+s*r)*S,t[6]=b*S,t[7]=(-h*n+i*u)*S,t[8]=(a*n-i*r)*S,t):null}function aI(t,e,n){let i=e[0],s=e[1],r=e[2],a=e[3],c=e[4],u=e[5],h=e[6],g=e[7],x=e[8],T=n[0],b=n[1],S=n[2],P=n[3],M=n[4],V=n[5],q=n[6],O=n[7],z=n[8];return t[0]=T*i+b*a+S*h,t[1]=T*s+b*c+S*g,t[2]=T*r+b*u+S*x,t[3]=P*i+M*a+V*h,t[4]=P*s+M*c+V*g,t[5]=P*r+M*u+V*x,t[6]=q*i+O*a+z*h,t[7]=q*s+O*c+z*g,t[8]=q*r+O*u+z*x,t}function c9(t,e,n){let i=e[0],s=e[1],r=e[2],a=e[3],c=e[4],u=e[5],h=e[6],g=e[7],x=e[8],T=n[0],b=n[1];return t[0]=i,t[1]=s,t[2]=r,t[3]=a,t[4]=c,t[5]=u,t[6]=T*i+b*a+h,t[7]=T*s+b*c+g,t[8]=T*r+b*u+x,t}function u9(t,e,n){let i=e[0],s=e[1],r=e[2],a=e[3],c=e[4],u=e[5],h=e[6],g=e[7],x=e[8],T=Math.sin(n),b=Math.cos(n);return t[0]=b*i+T*a,t[1]=b*s+T*c,t[2]=b*r+T*u,t[3]=b*a-T*i,t[4]=b*c-T*s,t[5]=b*u-T*r,t[6]=h,t[7]=g,t[8]=x,t}function d9(t,e,n){let i=n[0],s=n[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=s*e[3],t[4]=s*e[4],t[5]=s*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function h9(t,e){let n=e[0],i=e[1],s=e[2],r=e[3],a=e[4],c=e[5],u=e[6],h=e[7],g=e[8],x=e[9],T=e[10],b=e[11],S=e[12],P=e[13],M=e[14],V=e[15],q=n*c-i*a,O=n*u-s*a,z=n*h-r*a,j=i*u-s*c,W=i*h-r*c,D=s*h-r*u,C=g*P-x*S,R=g*M-T*S,L=g*V-b*S,F=x*M-T*P,G=x*V-b*P,B=T*V-b*M,ye=q*B-O*G+z*F+j*L-W*R+D*C;return ye?(ye=1/ye,t[0]=(c*B-u*G+h*F)*ye,t[1]=(u*L-a*B-h*R)*ye,t[2]=(a*G-c*L+h*C)*ye,t[3]=(s*G-i*B-r*F)*ye,t[4]=(n*B-s*L+r*R)*ye,t[5]=(i*L-n*G-r*C)*ye,t[6]=(P*D-M*W+V*j)*ye,t[7]=(M*z-S*D-V*O)*ye,t[8]=(S*W-P*z+V*q)*ye,t):null}class f9 extends Array{constructor(e=1,n=0,i=0,s=0,r=1,a=0,c=0,u=0,h=1){return super(e,n,i,s,r,a,c,u,h),this}set(e,n,i,s,r,a,c,u,h){return e.length?this.copy(e):(o9(this,e,n,i,s,r,a,c,u,h),this)}translate(e,n=this){return c9(this,n,e),this}rotate(e,n=this){return u9(this,n,e),this}scale(e,n=this){return d9(this,n,e),this}multiply(e,n){return n?aI(this,e,n):aI(this,this,e),this}identity(){return a9(this),this}copy(e){return r9(this,e),this}fromMatrix4(e){return i9(this,e),this}fromQuaternion(e){return s9(this,e),this}fromBasis(e,n,i){return this.set(e[0],e[1],e[2],n[0],n[1],n[2],i[0],i[1],i[2]),this}inverse(e=this){return l9(this,e),this}getNormalMatrix(e){return h9(this,e),this}}let m9=0;class p9 extends n9{constructor(e,{geometry:n,program:i,mode:s=e.TRIANGLES,frustumCulled:r=!0,renderOrder:a=0}={}){super(),e.canvas||console.error("gl not passed as first argument to Mesh"),this.gl=e,this.id=m9++,this.geometry=n,this.program=i,this.mode=s,this.frustumCulled=r,this.renderOrder=a,this.modelViewMatrix=new Ag,this.normalMatrix=new f9,this.beforeRenderCallbacks=[],this.afterRenderCallbacks=[]}onBeforeRender(e){return this.beforeRenderCallbacks.push(e),this}onAfterRender(e){return this.afterRenderCallbacks.push(e),this}draw({camera:e}={}){e&&(this.program.uniforms.modelMatrix||Object.assign(this.program.uniforms,{modelMatrix:{value:null},viewMatrix:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},cameraPosition:{value:null}}),this.program.uniforms.projectionMatrix.value=e.projectionMatrix,this.program.uniforms.cameraPosition.value=e.worldPosition,this.program.uniforms.viewMatrix.value=e.viewMatrix,this.modelViewMatrix.multiply(e.viewMatrix,this.worldMatrix),this.normalMatrix.getNormalMatrix(this.modelViewMatrix),this.program.uniforms.modelMatrix.value=this.worldMatrix,this.program.uniforms.modelViewMatrix.value=this.modelViewMatrix,this.program.uniforms.normalMatrix.value=this.normalMatrix),this.beforeRenderCallbacks.forEach(i=>i&&i({mesh:this,camera:e}));let n=this.program.cullFace&&this.worldMatrix.determinant()<0;this.program.use({flipFaces:n}),this.geometry.draw({mode:this.mode,program:this.program}),this.afterRenderCallbacks.forEach(i=>i&&i({mesh:this,camera:e}))}}class g9 extends uq{constructor(e,{attributes:n={}}={}){Object.assign(n,{position:{size:2,data:new Float32Array([-1,-1,3,-1,-1,3])},uv:{size:2,data:new Float32Array([0,0,2,0,0,2])}}),super(e,n)}}const y9="#ffffff",lI=t=>{const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?[parseInt(e[1],16)/255,parseInt(e[2],16)/255,parseInt(e[3],16)/255]:[1,1,1]},cI=(t,e,n)=>{switch(t){case"top-left":return{anchor:[0,-.2*n],dir:[0,1]};case"top-right":return{anchor:[e,-.2*n],dir:[0,1]};case"left":return{anchor:[-.2*e,.5*n],dir:[1,0]};case"right":return{anchor:[(1+.2)*e,.5*n],dir:[-1,0]};case"bottom-left":return{anchor:[0,(1+.2)*n],dir:[0,-1]};case"bottom-center":return{anchor:[.5*e,(1+.2)*n],dir:[0,-1]};case"bottom-right":return{anchor:[e,(1+.2)*n],dir:[0,-1]};default:return{anchor:[.5*e,-.2*n],dir:[0,1]}}},v9=({raysOrigin:t="top-center",raysColor:e=y9,raysSpeed:n=1,lightSpread:i=1,rayLength:s=2,pulsating:r=!1,fadeDistance:a=1,saturation:c=1,followMouse:u=!0,mouseInfluence:h=.1,noiseAmount:g=0,distortion:x=0,className:T=""})=>{const b=K.useRef(null),S=K.useRef(null),P=K.useRef(null),M=K.useRef({x:.5,y:.5}),V=K.useRef({x:.5,y:.5}),q=K.useRef(null),O=K.useRef(null),z=K.useRef(null),[j,W]=K.useState(!1),D=K.useRef(null);return K.useEffect(()=>{if(b.current)return D.current=new IntersectionObserver(C=>{const R=C[0];W(R.isIntersecting)},{threshold:.1}),D.current.observe(b.current),()=>{D.current&&(D.current.disconnect(),D.current=null)}},[]),K.useEffect(()=>!j||!b.current?void 0:(z.current&&(z.current(),z.current=null),A(null,null,function*(){if(!b.current||(yield new Promise(Ie=>setTimeout(Ie,10)),!b.current))return;const R=new yq({dpr:Math.min(window.devicePixelRatio,2),alpha:!0});P.current=R;const L=R.gl;for(L.canvas.style.width="100%",L.canvas.style.height="100%";b.current.firstChild;)b.current.removeChild(b.current.firstChild);b.current.appendChild(L.canvas);const F=`
attribute vec2 position;
varying vec2 vUv;
void main() {
  vUv = position * 0.5 + 0.5;
  gl_Position = vec4(position, 0.0, 1.0);
}`,G=`precision highp float;

uniform float iTime;
uniform vec2  iResolution;

uniform vec2  rayPos;
uniform vec2  rayDir;
uniform vec3  raysColor;
uniform float raysSpeed;
uniform float lightSpread;
uniform float rayLength;
uniform float pulsating;
uniform float fadeDistance;
uniform float saturation;
uniform vec2  mousePos;
uniform float mouseInfluence;
uniform float noiseAmount;
uniform float distortion;

varying vec2 vUv;

float noise(vec2 st) {
  return fract(sin(dot(st.xy, vec2(12.9898,78.233))) * 43758.5453123);
}

float rayStrength(vec2 raySource, vec2 rayRefDirection, vec2 coord,
                  float seedA, float seedB, float speed) {
  vec2 sourceToCoord = coord - raySource;
  vec2 dirNorm = normalize(sourceToCoord);
  float cosAngle = dot(dirNorm, rayRefDirection);

  float distortedAngle = cosAngle + distortion * sin(iTime * 2.0 + length(sourceToCoord) * 0.01) * 0.2;
  
  float spreadFactor = pow(max(distortedAngle, 0.0), 1.0 / max(lightSpread, 0.001));

  float distance = length(sourceToCoord);
  float maxDistance = iResolution.x * rayLength;
  float lengthFalloff = clamp((maxDistance - distance) / maxDistance, 0.0, 1.0);
  
  float fadeFalloff = clamp((iResolution.x * fadeDistance - distance) / (iResolution.x * fadeDistance), 0.5, 1.0);
  float pulse = pulsating > 0.5 ? (0.8 + 0.2 * sin(iTime * speed * 3.0)) : 1.0;

  float baseStrength = clamp(
    (0.45 + 0.15 * sin(distortedAngle * seedA + iTime * speed)) +
    (0.3 + 0.2 * cos(-distortedAngle * seedB + iTime * speed)),
    0.0, 1.0
  );

  return baseStrength * lengthFalloff * fadeFalloff * spreadFactor * pulse;
}

void mainImage(out vec4 fragColor, in vec2 fragCoord) {
  vec2 coord = vec2(fragCoord.x, iResolution.y - fragCoord.y);
  
  vec2 finalRayDir = rayDir;
  if (mouseInfluence > 0.0) {
    vec2 mouseScreenPos = mousePos * iResolution.xy;
    vec2 mouseDirection = normalize(mouseScreenPos - rayPos);
    finalRayDir = normalize(mix(rayDir, mouseDirection, mouseInfluence));
  }

  vec4 rays1 = vec4(1.0) *
               rayStrength(rayPos, finalRayDir, coord, 36.2214, 21.11349,
                           1.5 * raysSpeed);
  vec4 rays2 = vec4(1.0) *
               rayStrength(rayPos, finalRayDir, coord, 22.3991, 18.0234,
                           1.1 * raysSpeed);

  fragColor = rays1 * 0.5 + rays2 * 0.4;

  if (noiseAmount > 0.0) {
    float n = noise(coord * 0.01 + iTime * 0.1);
    fragColor.rgb *= (1.0 - noiseAmount + noiseAmount * n);
  }

  float brightness = 1.0 - (coord.y / iResolution.y);
  fragColor.x *= 0.1 + brightness * 0.8;
  fragColor.y *= 0.3 + brightness * 0.6;
  fragColor.z *= 0.5 + brightness * 0.5;

  if (saturation != 1.0) {
    float gray = dot(fragColor.rgb, vec3(0.299, 0.587, 0.114));
    fragColor.rgb = mix(vec3(gray), fragColor.rgb, saturation);
  }

  fragColor.rgb *= raysColor;
}

void main() {
  vec4 color;
  mainImage(color, gl_FragCoord.xy);
  gl_FragColor  = color;
}`,B={iTime:{value:0},iResolution:{value:[1,1]},rayPos:{value:[0,0]},rayDir:{value:[0,1]},raysColor:{value:lI(e)},raysSpeed:{value:n},lightSpread:{value:i},rayLength:{value:s},pulsating:{value:r?1:0},fadeDistance:{value:a},saturation:{value:c},mousePos:{value:[.5,.5]},mouseInfluence:{value:h},noiseAmount:{value:g},distortion:{value:x}};S.current=B;const ye=new g9(L),Ae=new hq(L,{vertex:F,fragment:G,uniforms:B}),ne=new p9(L,{geometry:ye,program:Ae});O.current=ne;const de=()=>{if(!b.current||!R)return;R.dpr=Math.min(window.devicePixelRatio,2);const{clientWidth:Ie,clientHeight:H}=b.current;R.setSize(Ie,H);const le=R.dpr,xe=Ie*le,ce=H*le;B.iResolution.value=[xe,ce];const{anchor:Ee,dir:Fe}=cI(t,xe,ce);B.rayPos.value=Ee,B.rayDir.value=Fe},ie=Ie=>{if(!(!P.current||!S.current||!O.current)){B.iTime.value=Ie*.001,u&&h>0&&(V.current.x=V.current.x*.92+M.current.x*(1-.92),V.current.y=V.current.y*.92+M.current.y*(1-.92),B.mousePos.value=[V.current.x,V.current.y]);try{R.render({scene:ne}),q.current=requestAnimationFrame(ie)}catch(H){console.warn("WebGL rendering error:",H);return}}};window.addEventListener("resize",de),de(),q.current=requestAnimationFrame(ie),z.current=()=>{if(q.current&&(cancelAnimationFrame(q.current),q.current=null),window.removeEventListener("resize",de),R)try{const Ie=R.gl.canvas,H=R.gl.getExtension("WEBGL_lose_context");H&&H.loseContext(),Ie&&Ie.parentNode&&Ie.parentNode.removeChild(Ie)}catch(Ie){console.warn("Error during WebGL cleanup:",Ie)}P.current=null,S.current=null,O.current=null}}),()=>{z.current&&(z.current(),z.current=null)}),[j,t,e,n,i,s,r,a,c,u,h,g,x]),K.useEffect(()=>{if(!S.current||!b.current||!P.current)return;const C=S.current,R=P.current;C.raysColor.value=lI(e),C.raysSpeed.value=n,C.lightSpread.value=i,C.rayLength.value=s,C.pulsating.value=r?1:0,C.fadeDistance.value=a,C.saturation.value=c,C.mouseInfluence.value=h,C.noiseAmount.value=g,C.distortion.value=x;const{clientWidth:L,clientHeight:F}=b.current,G=R.dpr,{anchor:B,dir:ye}=cI(t,L*G,F*G);C.rayPos.value=B,C.rayDir.value=ye},[e,n,i,t,s,r,a,c,h,g,x]),K.useEffect(()=>{const C=R=>{if(!b.current||!P.current)return;const L=b.current.getBoundingClientRect(),F=(R.clientX-L.left)/L.width,G=(R.clientY-L.top)/L.height;M.current={x:F,y:G}};if(u)return window.addEventListener("mousemove",C),()=>window.removeEventListener("mousemove",C)},[u]),y.jsx("div",{ref:b,className:`w-full h-full pointer-events-none z-[3] overflow-hidden relative ${T}`.trim()})},x9=t=>y.jsxs("svg",pe(J({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},t),{children:[y.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),y.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),y.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})),Yc=t=>y.jsxs("svg",pe(J({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},t),{children:[y.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5-10-5-10 5z",opacity:"0.6"}),y.jsx("path",{d:"M2 12l10 5 10-5-10-5-10 5z"})]})),YM=t=>y.jsx("svg",pe(J({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},t),{children:y.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})})),Xp=t=>y.jsxs("svg",pe(J({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},t),{children:[y.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),y.jsx("circle",{cx:"12",cy:"7",r:"4"})]})),JM=t=>y.jsxs("svg",pe(J({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},t),{children:[y.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),y.jsx("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]})),Yn=t=>y.jsx("svg",pe(J({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},t),{children:y.jsx("path",{d:"M9 18h6M10 22h4M12 2a7 7 0 0 0-7 7c0 3.03 1.09 5.25 3 7h8c1.91-1.75 3-3.97 3-7a7 7 0 0 0-7-7z"})})),GT=t=>y.jsxs("svg",pe(J({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},t),{children:[y.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),y.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]})),_9=t=>y.jsxs("svg",pe(J({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},t),{children:[y.jsx("path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.3.05-3.1S5.21 15.66 4.5 16.5z"}),y.jsx("path",{d:"M7.5 12.5c0-1.5-1.14-2.5-2.5-3S3.5 6.5 3.5 5c0-1.5 1.14-2.5 2.5-3S8.5 3.5 8.5 5c0 1.5-1.14 2.5-2.5 3S3.5 9.5 3.5 11"}),y.jsx("path",{d:"M14.5 6.5c1.5-1.26 2-5 2-5s-3.74.5-5 2c-.71.84-.7 2.3-.05 3.1s1.34 1.25 2.05 1.4z"}),y.jsx("path",{d:"M16.5 11.5c0 1.5 1.14 2.5 2.5 3s1.5 2.5 1.5 4c0 1.5-1.14 2.5-2.5 3s-2.5-1.5-2.5-3c0-1.5 1.14-2.5 2.5-3s1.5-2.5 1.5-4"}),y.jsx("path",{d:"M13 10.29V5a2 2 0 0 1 2-2h4"}),y.jsx("path",{d:"m5 19 4-4"})]})),Yr=t=>y.jsxs("svg",pe(J({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},t),{children:[y.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),y.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})),T9=t=>y.jsxs("svg",pe(J({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},t),{children:[y.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),y.jsx("circle",{cx:"12",cy:"10",r:"3"})]})),w9=t=>y.jsx("svg",pe(J({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},t),{children:y.jsx("path",{d:"M12 2a2.5 2.5 0 0 0-2.5 2.5v.7a1 1 0 0 1-1.2.9L7.2 6.3a2.5 2.5 0 1 0-2.9 4.4l1.3 1.6a1 1 0 0 1 0 1.4l-1.3 1.6a2.5 2.5 0 1 0 2.9 4.4l1.1-.8a1 1 0 0 1 1.2.9v.7a2.5 2.5 0 1 0 5 0v-.7a1 1 0 0 1 1.2-.9l1.1.8a2.5 2.5 0 1 0 2.9-4.4l-1.3-1.6a1 1 0 0 1 0-1.4l1.3-1.6a2.5 2.5 0 1 0-2.9-4.4l-1.1.8a1 1 0 0 1-1.2-.9v-.7A2.5 2.5 0 0 0 12 2zM4.5 12.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2zM19.5 12.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2zM12 21.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2zM12 4.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"})})),zT=t=>y.jsxs("svg",pe(J({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},t),{children:[y.jsx("polyline",{points:"16 18 22 12 16 6"}),y.jsx("polyline",{points:"8 6 2 12 8 18"})]})),b9=t=>y.jsxs("svg",pe(J({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},t),{children:[y.jsx("circle",{cx:"12",cy:"12",r:"10"}),y.jsx("circle",{cx:"12",cy:"12",r:"6"}),y.jsx("circle",{cx:"12",cy:"12",r:"2"})]})),Jc=t=>y.jsxs("svg",pe(J({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},t),{children:[y.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),y.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})),Zx=t=>y.jsx("svg",pe(J({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},t),{children:y.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})})),uu=t=>y.jsx("svg",pe(J({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},t),{children:y.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})})),Es=t=>y.jsxs("svg",pe(J({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},t),{children:[y.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),y.jsx("circle",{cx:"9",cy:"7",r:"4"}),y.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),y.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})),hl=t=>y.jsxs("svg",pe(J({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},t),{children:[y.jsx("path",{d:"M18 6 7 17l-5-5"}),y.jsx("path",{d:"m22 10-7.5 7.5L13 16"})]})),E9=t=>y.jsxs("svg",pe(J({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},t),{children:[y.jsx("path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}),y.jsx("polyline",{points:"10 17 15 12 10 7"}),y.jsx("line",{x1:"15",y1:"12",x2:"3",y2:"12"})]})),dx=t=>y.jsxs("svg",pe(J({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},t),{children:[y.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),y.jsx("polyline",{points:"16 17 21 12 16 7"}),y.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})),Cg=t=>y.jsxs("svg",pe(J({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},t),{children:[y.jsx("circle",{cx:"11",cy:"11",r:"8"}),y.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})),QM=t=>y.jsxs("svg",pe(J({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},t),{children:[y.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),y.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})),HT=t=>y.jsx("svg",pe(J({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},t),{children:y.jsx("polyline",{points:"20 6 9 17 4 12"})})),S9=t=>y.jsxs("svg",pe(J({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},t),{children:[y.jsx("circle",{cx:"12",cy:"12",r:"10"}),y.jsx("polyline",{points:"12 6 12 12 16 14"})]})),Wo=t=>y.jsxs("svg",pe(J({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},t),{children:[y.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),y.jsx("circle",{cx:"8.5",cy:"7",r:"4"}),y.jsx("line",{x1:"20",y1:"8",x2:"20",y2:"14"}),y.jsx("line",{x1:"17",y1:"11",x2:"23",y2:"11"})]})),uI=t=>y.jsxs("svg",pe(J({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},t),{children:[y.jsx("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.72"}),y.jsx("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.72-1.72"})]})),XM=t=>y.jsxs("svg",pe(J({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},t),{children:[y.jsx("polyline",{points:"3 6 5 6 21 6"}),y.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})),ZM=t=>y.jsxs("svg",pe(J({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},t),{children:[y.jsx("circle",{cx:"12",cy:"12",r:"10"}),y.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),y.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]})),A9=t=>y.jsxs("svg",pe(J({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},t),{children:[y.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),y.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),y.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})),Qc=t=>y.jsx("svg",pe(J({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},t),{children:y.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})),Xc=t=>y.jsx("svg",pe(J({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},t),{children:y.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})})),C9=t=>y.jsx("svg",pe(J({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},t),{children:y.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})})),hx=t=>y.jsxs("svg",pe(J({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},t),{children:[y.jsx("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),y.jsx("polyline",{points:"17 6 23 6 23 12"})]})),I9=t=>y.jsxs("svg",pe(J({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},t),{children:[y.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),y.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]})),eP=t=>y.jsxs("svg",pe(J({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},t),{children:[y.jsx("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),y.jsx("polyline",{points:"12 19 5 12 12 5"})]})),R9=()=>{const t=()=>{window.location.href="/Grow-With-Me-AI/auth"};return y.jsxs("div",{className:"min-h-screen w-full font-sans text-white flex flex-col overflow-hidden",children:[y.jsx("div",{className:"fixed top-0 left-0 w-screen h-screen",children:y.jsx(v9,{raysOrigin:"top-center",raysColor:"#f6f8f8ff",raysSpeed:1.5,lightSpread:.8,rayLength:3,followMouse:!0,mouseInfluence:.3,noiseAmount:.1,distortion:.05,className:"w-full h-full"})}),y.jsxs("div",{className:"relative z-10 flex flex-col items-center w-full flex-grow",children:[y.jsxs("header",{className:"w-full flex items-center justify-between px-2 md:px-12 mb-8",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Yc,{className:"w-8 h-8 text-indigo-500"}),y.jsx("span",{className:"text-md md:text-xl font-semibold text-white tracking-tight",children:"Grow With Me"})]}),y.jsx("button",{className:"bg-white text-[#18141c] rounded-2xl px-6 py-2 font-medium text-base shadow hover:bg-gray-200 transition",onClick:t,children:"Get Started"})]}),y.jsxs("main",{className:"flex flex-col items-stretch justify-start text-center max-w-3xl mx-auto w-full overflow-y-auto",children:[y.jsxs("h1",{className:"text-4xl md:text-7xl font-bold mb-6 leading-tight",children:["Find Your Perfect",y.jsx("br",{}),y.jsx("span",{className:"text-indigo-500",children:"Co-Founder"})]}),y.jsx("p",{className:"text-base md:text-lg text-gray-300 mb-8 font-light",children:"Empowering founders, innovators, and investors to connect, collaborate, and launch world-changing startups. Move your mouse to see the interactive light rays background!"}),y.jsxs("section",{className:"w-full mb-8 text-left bg-white/5 rounded-xl p-6 shadow-lg",children:[y.jsx("h2",{className:"text-2xl font-bold text-indigo-400 mb-3",children:"About Grow With Me"}),y.jsx("p",{className:"text-gray-200 text-base mb-4",children:"Grow With Me is a next-generation platform designed to break down barriers and make entrepreneurship accessible to everyone, everywhere."}),y.jsxs("ul",{className:"list-disc pl-5 text-gray-300 text-sm space-y-2",children:[y.jsx("li",{children:"AI-driven matchmaking for co-founders and teams"}),y.jsx("li",{children:"Secure, global networking and messaging"}),y.jsx("li",{children:"Real-time feedback and mentorship"}),y.jsx("li",{children:"Investor pitch and negotiation tools"})]})]}),y.jsxs("section",{className:"w-full mb-8",children:[y.jsx("h2",{className:"text-xl font-semibold text-indigo-400 mb-4 text-left",children:"Key Features"}),y.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[y.jsxs("div",{className:"bg-white/10 rounded-lg p-5 text-left",children:[y.jsx("h3",{className:"text-white font-semibold mb-2",children:"Smart Matchmaking"}),y.jsx("p",{className:"text-gray-300 text-sm",children:"Advanced algorithms analyze compatibility across skills, goals, and vision to connect you with the perfect co-founder."})]}),y.jsxs("div",{className:"bg-white/10 rounded-lg p-5 text-left",children:[y.jsx("h3",{className:"text-white font-semibold mb-2",children:"Global Community"}),y.jsx("p",{className:"text-gray-300 text-sm",children:"Connect with thousands of entrepreneurs, investors, and innovators from around the world."})]}),y.jsxs("div",{className:"bg-white/10 rounded-lg p-5 text-left",children:[y.jsx("h3",{className:"text-white font-semibold mb-2",children:"Secure Collaboration"}),y.jsx("p",{className:"text-gray-300 text-sm",children:"Bank-level encryption and privacy controls ensure your ideas and conversations remain confidential."})]}),y.jsxs("div",{className:"bg-white/10 rounded-lg p-5 text-left",children:[y.jsx("h3",{className:"text-white font-semibold mb-2",children:"Launch & Grow"}),y.jsx("p",{className:"text-gray-300 text-sm",children:"From ideation to execution, our platform provides the tools and connections to bring your vision to life."})]})]})]}),y.jsxs("section",{className:"w-full mb-8",children:[y.jsx("h2",{className:"text-xl font-semibold text-indigo-400 mb-4 text-left",children:"How It Works"}),y.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[y.jsxs("div",{className:"flex flex-col items-center",children:[y.jsx("div",{className:"bg-indigo-500 rounded-full w-10 h-10 flex items-center justify-center text-white font-bold mb-2",children:"1"}),y.jsx("span",{className:"text-gray-200 text-sm",children:"Sign Up & Create Profile"})]}),y.jsxs("div",{className:"flex flex-col items-center",children:[y.jsx("div",{className:"bg-indigo-500 rounded-full w-10 h-10 flex items-center justify-center text-white font-bold mb-2",children:"2"}),y.jsx("span",{className:"text-gray-200 text-sm",children:"Share Ideas & Connect"})]}),y.jsxs("div",{className:"flex flex-col items-center",children:[y.jsx("div",{className:"bg-indigo-500 rounded-full w-10 h-10 flex items-center justify-center text-white font-bold mb-2",children:"3"}),y.jsx("span",{className:"text-gray-200 text-sm",children:"Build Teams & Pitch"})]}),y.jsxs("div",{className:"flex flex-col items-center",children:[y.jsx("div",{className:"bg-indigo-500 rounded-full w-10 h-10 flex items-center justify-center text-white font-bold mb-2",children:"4"}),y.jsx("span",{className:"text-gray-200 text-sm",children:"Launch & Grow"})]})]})]}),y.jsxs("section",{className:"w-full mb-8",children:[y.jsx("h2",{className:"text-xl font-semibold text-indigo-400 mb-4 text-left",children:"Meet the Team"}),y.jsxs("div",{className:"flex flex-wrap gap-10 justify-center",children:[y.jsxs("div",{className:"flex flex-col items-center",children:[y.jsx("img",{src:"/team1.png",alt:"Namith KP",className:"w-16 h-16 rounded-full mb-2 border-2 border-indigo-500",onError:e=>{e.currentTarget.src="https://ui-avatars.com/api/?name=Namith+KP&background=4f46e5&color=fff"}}),y.jsx("span",{className:"text-white font-medium",children:"Namith"}),y.jsx("span",{className:"text-gray-400 text-xs",children:"Founder & Lead Developer"})]}),y.jsxs("div",{className:"flex flex-col items-center",children:[y.jsx("img",{src:"/team2.png",alt:"Co-Founder",className:"w-16 h-16 rounded-full mb-2 border-2 border-indigo-500",onError:e=>{e.currentTarget.src="https://ui-avatars.com/api/?name=Akash+Kumar&background=4f46e5&color=fff"}}),y.jsx("span",{className:"text-white font-medium",children:"Akash Kumar"}),y.jsx("span",{className:"text-gray-400 text-xs",children:"Co-Founder & Product"})]}),y.jsxs("div",{className:"flex flex-col items-center",children:[y.jsx("img",{src:"/team3.png",alt:"Marketing Specialist",className:"w-16 h-16 rounded-full mb-2 border-2 border-indigo-500",onError:e=>{e.currentTarget.src="https://ui-avatars.com/api/?name=Gagan&background=4f46e5&color=fff"}}),y.jsx("span",{className:"text-white font-medium",children:"Gagan"}),y.jsx("span",{className:"text-gray-400 text-xs",children:"Marketing Specialist"})]}),y.jsxs("div",{className:"flex flex-col items-center",children:[y.jsx("img",{src:"/team3.png",alt:"Product Analyst",className:"w-16 h-16 rounded-full mb-2 border-2 border-indigo-500",onError:e=>{e.currentTarget.src="https://ui-avatars.com/api/?name=Ujwal+Raj&background=4f46e5&color=fff"}}),y.jsx("span",{className:"text-white font-medium",children:"Ujwal Raj"}),y.jsx("span",{className:"text-gray-400 text-xs",children:"Product Analyst"})]})]})]})]})]})]})},N9=t=>y.jsxs("svg",pe(J({viewBox:"0 0 48 48"},t),{children:[y.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12s5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24s8.955,20,20,20s20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),y.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),y.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),y.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571l6.19,5.238C42.02,35.625,44,30.036,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]})),M9=()=>typeof navigator!="undefined"&&(/wv/.test(navigator.userAgent)||/Android/.test(navigator.userAgent)&&/Version\//.test(navigator.userAgent)),P9=({onGoogleLogin:t,onGuestLogin:e,error:n,authUser:i})=>{const s=()=>{M9()&&typeof window!="undefined"&&window.AndroidBridge?window.AndroidBridge.triggerGoogleSignIn():t()};return y.jsxs("div",{className:"relative min-h-screen w-full overflow-hidden bg-gradient-to-br from-slate-950 to-black",children:[y.jsxs("div",{className:"fixed inset-0 z-0",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-950 via-black to-slate-950"}),y.jsx("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 bg-slate-500/5 rounded-full blur-3xl animate-pulse-slow"}),y.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-slate-400/5 rounded-full blur-3xl animate-pulse-slow",style:{animationDelay:"2s"}}),y.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(148,163,184,0.02)_1px,transparent_1px),linear-gradient(90deg,rgba(148,163,184,0.02)_1px,transparent_1px)] bg-[size:100px_100px]"})]}),y.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center min-h-screen p-4 sm:p-6 lg:p-8",children:[y.jsxs("div",{className:"text-center mb-8 sm:mb-12",children:[y.jsxs("div",{className:"relative flex items-center justify-center mb-6",children:[y.jsx("div",{className:"absolute -inset-2 sm:-inset-3 rounded-full bg-gradient-to-br from-purple-500/20 via-fuchsia-400/15 to-blue-400/20 blur-xl animate-pulse-slow"}),y.jsx(Yc,{className:"w-16 h-16 sm:w-20 sm:h-20 lg:w-24 lg:h-24 text-emerald-400 drop-shadow-2xl z-10"})]}),y.jsxs("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-white mb-2",children:["Welcome to",y.jsx("span",{className:"text-emerald-400 font-bold",children:" Grow With Me"})]}),y.jsx("p",{className:"text-slate-400 text-sm sm:text-base lg:text-lg",children:"Connect, collaborate, and grow your network"})]}),y.jsx("div",{className:"w-full max-w-md",children:y.jsxs("div",{className:"bg-gradient-to-br from-slate-900/90 to-black/90 backdrop-blur-sm border border-slate-800/50 rounded-xl sm:rounded-2xl p-6 sm:p-8 transition-all duration-300 hover:border-slate-600/70 hover:shadow-2xl hover:shadow-slate-500/10",children:[y.jsxs("div",{className:"text-center mb-8",children:[y.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white mb-3",children:"Join the Network"}),y.jsx("p",{className:"text-slate-400 text-sm sm:text-base",children:"Sign in to save your profile and connect with others, or continue as a guest to explore the platform."})]}),y.jsxs("div",{className:"space-y-4",children:[n&&y.jsx("div",{className:"bg-red-900/30 border border-red-700/30 text-red-300 p-3 sm:p-4 rounded-lg text-sm",children:n}),!i&&y.jsxs("button",{onClick:s,className:"w-full flex items-center justify-center gap-3 bg-gradient-to-r from-slate-800/50 to-slate-700/50 hover:from-slate-700/50 hover:to-slate-600/50 text-white font-medium py-3 sm:py-4 px-6 rounded-lg sm:rounded-xl transition-all duration-300 border border-slate-700/30 hover:border-slate-600/50 text-sm sm:text-base",children:[y.jsx(N9,{className:"w-5 h-5 sm:w-6 sm:h-6"}),"Sign In with Google"]}),y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute inset-0 flex items-center",children:y.jsx("div",{className:"w-full border-t border-slate-700/30"})}),y.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:y.jsx("span",{className:"bg-gradient-to-br from-slate-900/90 to-black/90 px-2 text-slate-400",children:"or"})})]}),y.jsxs("button",{onClick:e,className:"w-full flex items-center justify-center gap-3 bg-gradient-to-r from-slate-800/50 to-slate-700/50 hover:from-slate-700/50 hover:to-slate-600/50 text-white font-medium py-3 sm:py-4 px-6 rounded-lg sm:rounded-xl transition-all duration-300 border border-slate-700/30 hover:border-slate-600/50 text-sm sm:text-base",children:[y.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Continue as Guest"]})]})]})})]})]})},D9=({onOnboardingComplete:t,userProfile:e,loading:n=!1,error:i=null})=>{const[s,r]=K.useState(1),[a,c]=K.useState({name:"",role:dt.Founder,location:"",interests:"",skills:"",experience:"",lookingFor:"",interestedDomains:"",investmentExperience:"",minBudget:"",maxBudget:"",minEquity:"",maxEquity:""});K.useEffect(()=>{var b,S,P,M,V,q;e&&c({name:e.name,role:e.role,location:e.location,interests:e.interests.join(", "),skills:e.skills.join(", "),experience:e.experience||"",lookingFor:e.lookingFor,interestedDomains:((b=e.investorProfile)==null?void 0:b.interestedDomains.join(", "))||"",investmentExperience:((S=e.investorProfile)==null?void 0:S.investmentExperience)||"",minBudget:((P=e.investorProfile)==null?void 0:P.budget.min.toString())||"",maxBudget:((M=e.investorProfile)==null?void 0:M.budget.max.toString())||"",minEquity:((V=e.investorProfile)==null?void 0:V.expectedEquity.min.toString())||"",maxEquity:((q=e.investorProfile)==null?void 0:q.expectedEquity.max.toString())||""})},[e]);const u=b=>{const{name:S,value:P}=b.target;c(M=>pe(J({},M),{[S]:P}))},h=()=>r(b=>b+1),g=()=>r(b=>b-1),x=()=>{const b={name:a.name,role:a.role,location:a.location,interests:a.interests.split(",").map(P=>P.trim()).filter(P=>P),skills:a.skills.split(",").map(P=>P.trim()).filter(P=>P),lookingFor:a.lookingFor};let S;a.role===dt.Investor?S=pe(J({},b),{investorProfile:{interestedDomains:a.interestedDomains.split(",").map(P=>P.trim()).filter(P=>P),investmentExperience:a.investmentExperience,budget:{min:parseInt(a.minBudget,10)||0,max:parseInt(a.maxBudget,10)||0},expectedEquity:{min:parseInt(a.minEquity,10)||0,max:parseInt(a.maxEquity,10)||0}}}):S=pe(J({},b),{experience:a.experience}),t(S)},T=[{title:"Basic Info",description:"Tell us about yourself",icon:y.jsx(Xp,{className:"w-5 h-5"})},{title:"Experience",description:"Share your background",icon:y.jsx(JM,{className:"w-5 h-5"})},{title:"Preferences",description:"What are you looking for?",icon:y.jsx(Yn,{className:"w-5 h-5"})},{title:"Review",description:"Review your profile",icon:y.jsx(GT,{className:"w-5 h-5"})}];return y.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center p-4",children:y.jsxs("div",{className:"w-full max-w-lg",children:[y.jsxs("div",{className:"mb-8",children:[y.jsxs("div",{className:"flex items-center justify-between mb-3",children:[y.jsxs("span",{className:"text-sm text-slate-400",children:["Step ",s," of 4"]}),y.jsxs("span",{className:"text-sm text-slate-400",children:[Math.round(s/4*100),"%"]})]}),y.jsx("div",{className:"w-full bg-slate-800 rounded-full h-1.5",children:y.jsx("div",{className:"bg-gradient-to-r from-slate-500 to-slate-400 h-1.5 rounded-full transition-all duration-500",style:{width:`${s/4*100}%`}})})]}),y.jsxs("div",{className:"text-center mb-8",children:[y.jsxs("div",{className:"flex items-center justify-center mb-3",children:[y.jsx("div",{className:"w-10 h-10 bg-slate-800 rounded-full flex items-center justify-center mr-3",children:T[s-1].icon}),y.jsx("h1",{className:"text-2xl font-bold text-white",children:T[s-1].title})]}),y.jsx("p",{className:"text-slate-400",children:T[s-1].description})]}),y.jsxs("div",{className:"space-y-4",children:[s===1&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Full Name"}),y.jsx("input",{type:"text",name:"name",value:a.name,onChange:u,className:"w-full bg-slate-800 border border-slate-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-slate-500 focus:border-slate-500 transition-all",placeholder:"Enter your full name",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Role"}),y.jsx("select",{name:"role",value:a.role,onChange:u,className:"w-full bg-slate-800 border border-slate-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-slate-500 focus:border-slate-500 transition-all",required:!0,children:Object.values(dt).map(b=>y.jsx("option",{value:b,children:b},b))})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Location"}),y.jsx("input",{type:"text",name:"location",value:a.location,onChange:u,className:"w-full bg-slate-800 border border-slate-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-slate-500 focus:border-slate-500 transition-all",placeholder:"City, Country",required:!0})]})]}),s===2&&a.role===dt.Investor&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Investment Domains"}),y.jsx("input",{type:"text",name:"interestedDomains",value:a.interestedDomains,onChange:u,className:"w-full bg-slate-800 border border-slate-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-slate-500 focus:border-slate-500 transition-all",placeholder:"e.g., SaaS, FinTech, HealthTech",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Investment Experience"}),y.jsx("textarea",{name:"investmentExperience",rows:3,value:a.investmentExperience,onChange:u,className:"w-full bg-slate-800 border border-slate-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-slate-500 focus:border-slate-500 transition-all resize-none",placeholder:"Describe your investment experience...",required:!0})]})]}),s===2&&a.role!==dt.Investor&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Skills"}),y.jsx("input",{type:"text",name:"skills",value:a.skills,onChange:u,className:"w-full bg-slate-800 border border-slate-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-slate-500 focus:border-slate-500 transition-all",placeholder:"e.g., React, Product Management, Sales",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Experience"}),y.jsx("textarea",{name:"experience",rows:3,value:a.experience,onChange:u,className:"w-full bg-slate-800 border border-slate-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-slate-500 focus:border-slate-500 transition-all resize-none",placeholder:"Describe your professional experience...",required:!0})]})]}),s===3&&a.role===dt.Investor&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Min Budget ($)"}),y.jsx("input",{type:"number",name:"minBudget",value:a.minBudget,onChange:u,className:"w-full bg-slate-800 border border-slate-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-slate-500 focus:border-slate-500 transition-all",placeholder:"25000",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Max Budget ($)"}),y.jsx("input",{type:"number",name:"maxBudget",value:a.maxBudget,onChange:u,className:"w-full bg-slate-800 border border-slate-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-slate-500 focus:border-slate-500 transition-all",placeholder:"100000",required:!0})]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Min Equity (%)"}),y.jsx("input",{type:"number",name:"minEquity",value:a.minEquity,onChange:u,className:"w-full bg-slate-800 border border-slate-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-slate-500 focus:border-slate-500 transition-all",placeholder:"5",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Max Equity (%)"}),y.jsx("input",{type:"number",name:"maxEquity",value:a.maxEquity,onChange:u,className:"w-full bg-slate-800 border border-slate-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-slate-500 focus:border-slate-500 transition-all",placeholder:"15",required:!0})]})]})]}),s===3&&a.role!==dt.Investor&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Interests"}),y.jsx("input",{type:"text",name:"interests",value:a.interests,onChange:u,className:"w-full bg-slate-800 border border-slate-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-slate-500 focus:border-slate-500 transition-all",placeholder:"e.g., AI, FinTech, Sustainable Tech",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Looking for in a co-founder"}),y.jsx("textarea",{name:"lookingFor",rows:3,value:a.lookingFor,onChange:u,className:"w-full bg-slate-800 border border-slate-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-slate-500 focus:border-slate-500 transition-all resize-none",placeholder:"Describe your ideal co-founder...",required:!0})]})]}),s===4&&y.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-6",children:[y.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Profile Summary"}),y.jsxs("div",{className:"space-y-3 text-sm",children:[y.jsxs("div",{className:"flex justify-between",children:[y.jsx("span",{className:"text-slate-400",children:"Name:"}),y.jsx("span",{className:"text-white",children:a.name})]}),y.jsxs("div",{className:"flex justify-between",children:[y.jsx("span",{className:"text-slate-400",children:"Role:"}),y.jsx("span",{className:"text-white",children:a.role})]}),y.jsxs("div",{className:"flex justify-between",children:[y.jsx("span",{className:"text-slate-400",children:"Location:"}),y.jsx("span",{className:"text-white",children:a.location})]}),a.role===dt.Investor?y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"flex justify-between",children:[y.jsx("span",{className:"text-slate-400",children:"Domains:"}),y.jsx("span",{className:"text-white",children:a.interestedDomains})]}),y.jsxs("div",{className:"flex justify-between",children:[y.jsx("span",{className:"text-slate-400",children:"Budget:"}),y.jsxs("span",{className:"text-white",children:["$",a.minBudget," - $",a.maxBudget]})]})]}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"flex justify-between",children:[y.jsx("span",{className:"text-slate-400",children:"Skills:"}),y.jsx("span",{className:"text-white",children:a.skills})]}),y.jsxs("div",{className:"flex justify-between",children:[y.jsx("span",{className:"text-slate-400",children:"Interests:"}),y.jsx("span",{className:"text-white",children:a.interests})]})]})]})]})]}),y.jsxs("div",{className:"flex justify-between mt-8",children:[y.jsx("button",{onClick:g,disabled:s===1,className:"px-6 py-2 bg-slate-800 text-white rounded-lg hover:bg-slate-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Back"}),s<4?y.jsx("button",{onClick:h,className:"px-6 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-500 transition-colors",children:"Next"}):y.jsxs("button",{onClick:x,disabled:n,className:"px-6 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-500 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[n?y.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[y.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),y.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})]}):y.jsx(_9,{className:"w-4 h-4"}),"Complete Profile"]})]}),i&&y.jsx("div",{className:"mt-4 p-3 bg-red-900/30 border border-red-700/30 text-red-300 rounded-lg text-sm text-center",children:i})]})})},Xa=({title:t,value:e,icon:n,subtext:i,trend:s})=>y.jsxs("div",{className:"group relative bg-gradient-to-br from-slate-900/90 to-black/90 backdrop-blur-sm border border-slate-800/50 rounded-xl sm:rounded-2xl p-4 sm:p-6 transition-all duration-300 hover:border-slate-600/70 hover:shadow-2xl hover:shadow-slate-500/10",children:[y.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[y.jsx("div",{className:"p-2 sm:p-3 bg-gradient-to-br from-slate-800/50 to-slate-700/50 rounded-lg sm:rounded-xl border border-slate-700/30",children:n}),s&&y.jsx("span",{className:`text-xs px-2 sm:px-3 py-1 rounded-full font-medium ${s.startsWith("+")?"bg-emerald-900/30 text-emerald-300 border border-emerald-700/30":"bg-red-900/30 text-red-300 border border-red-700/30"}`,children:s})]}),y.jsx("h3",{className:"text-slate-300 text-xs sm:text-sm font-medium mb-1 sm:mb-2",children:t}),y.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-white mb-1",children:e}),y.jsx("p",{className:"text-slate-400 text-xs sm:text-sm",children:i})]}),k9=({data:t})=>{const e=Math.max(...t.map(u=>u.users)),n=Math.min(...t.map(u=>u.users)),i=e-n,s=()=>{if(t.length<2)return"";const u=t.map((g,x)=>{const T=x/(t.length-1)*100,b=i>0?100-(g.users-n)/i*80:50;return{x:T,y:b}});let h=`M ${u[0].x},${u[0].y}`;for(let g=1;g<u.length;g++){const x=u[g-1],T=u[g],b=x.x+(T.x-x.x)*.5,S=x.y,P=T.x-(T.x-x.x)*.5,M=T.y;h+=` C ${b},${S} ${P},${M} ${T.x},${T.y}`}return h},r=()=>{if(t.length<2)return"";const u=t.map((g,x)=>{const T=x/(t.length-1)*100,b=i>0?100-(g.users-n)/i*80:50;return{x:T,y:b}});let h=`M ${u[0].x},${u[0].y}`;for(let g=1;g<u.length;g++){const x=u[g-1],T=u[g],b=x.x+(T.x-x.x)*.5,S=x.y,P=T.x-(T.x-x.x)*.5,M=T.y;h+=` C ${b},${S} ${P},${M} ${T.x},${T.y}`}return h+=` L ${u[u.length-1].x},100`,h+=` L ${u[0].x},100 Z`,h},a=s(),c=r();return y.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[y.jsxs("div",{className:"relative h-32 sm:h-40 lg:h-48 bg-gradient-to-br from-slate-800/30 to-slate-700/30 rounded-lg sm:rounded-xl border border-slate-700/30 p-3 sm:p-4",children:[y.jsx("div",{className:"absolute inset-3 sm:inset-4 flex flex-col justify-between",children:[0,1,2,3,4].map(u=>y.jsx("div",{className:"border-b border-slate-700/20"},u))}),y.jsx("div",{className:"absolute left-0 top-3 sm:top-4 bottom-3 sm:bottom-4 flex flex-col justify-between text-xs text-slate-400",children:[e,Math.round(e*.75),Math.round(e*.5),Math.round(e*.25),n].map((u,h)=>y.jsx("span",{className:"transform -translate-y-1 text-xs",children:u},h))}),y.jsx("div",{className:"absolute inset-3 sm:inset-4",children:y.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[y.jsx("defs",{children:y.jsxs("linearGradient",{id:"areaGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[y.jsx("stop",{offset:"0%",stopColor:"rgb(148 163 184)",stopOpacity:"0.3"}),y.jsx("stop",{offset:"100%",stopColor:"rgb(148 163 184)",stopOpacity:"0.05"})]})}),y.jsx("path",{d:c,fill:"url(#areaGradient)",stroke:"none"}),y.jsx("path",{d:a,fill:"none",stroke:"rgb(148 163 184)",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),t.map((u,h)=>{const g=h/(t.length-1)*100,x=i>0?100-(u.users-n)/i*80:50;return y.jsx("circle",{cx:g,cy:x,r:"1.5",fill:"rgb(148 163 184)",className:"animate-pulse"},h)})]})})]}),y.jsx("div",{className:"flex justify-between text-xs text-slate-400 px-3 sm:px-4",children:t.map((u,h)=>y.jsxs("span",{className:"text-center",children:[y.jsx("div",{className:"text-xs sm:text-sm",children:u.name}),y.jsx("div",{className:"text-white font-medium mt-1 text-xs sm:text-sm",children:u.users})]},h))})]})},tP=({data:t,founderEngagement:e,totalIdeas:n,totalNegotiations:i,totalDealsAccepted:s})=>y.jsx("div",{className:"w-full h-full bg-gradient-to-br from-slate-950 to-black overflow-auto",children:y.jsxs("div",{className:"h-full flex flex-col pt-16 sm:pt-0",children:[y.jsxs("div",{className:"flex-shrink-0 p-4 sm:p-6 border-b border-slate-800/30",children:[y.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-white mb-2",children:"Analytics Dashboard"}),y.jsx("p",{className:"text-slate-400 text-sm sm:text-base",children:"Real-time insights and performance metrics"})]}),y.jsxs("div",{className:"flex-1 overflow-auto p-3 sm:p-4 lg:p-6 space-y-4 sm:space-y-6 lg:space-y-8 pb-20 sm:pb-6",children:[y.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 sm:gap-4 lg:gap-6",children:[y.jsx(Xa,{title:"Daily Active Users",value:t.userEngagement.dailyActiveUsers,icon:y.jsx(Es,{className:"w-5 h-5 sm:w-6 sm:h-6 text-slate-300"}),subtext:"Last 24 hours",trend:"+5.2%"}),y.jsx(Xa,{title:"Match Success Rate",value:`${t.matchSuccess.successRate}%`,icon:y.jsx(hl,{className:"w-5 h-5 sm:w-6 sm:h-6 text-emerald-400"}),subtext:"Total successful connections",trend:"+2.1%"}),y.jsx(Xa,{title:"Total Ideas Posted",value:typeof n=="number"?n:0,icon:y.jsx(Yn,{className:"w-5 h-5 sm:w-6 sm:h-6 text-amber-400"}),subtext:"All time",trend:"+12.3%"}),y.jsx(Xa,{title:"Total Negotiations",value:typeof i=="number"?i:0,icon:y.jsx(YM,{className:"w-5 h-5 sm:w-6 sm:h-6 text-purple-400"}),subtext:"All time",trend:"+8.7%"}),y.jsx(Xa,{title:"Deals Accepted",value:typeof s=="number"?s:0,icon:y.jsx(hl,{className:"w-5 h-5 sm:w-6 sm:h-6 text-emerald-400"}),subtext:"All time",trend:"+15.4%"}),e&&y.jsxs(y.Fragment,{children:[y.jsx(Xa,{title:"Total Likes",value:e.totalLikes,icon:y.jsx(Qc,{className:"w-5 h-5 sm:w-6 sm:h-6 text-red-400"}),subtext:"On your ideas",trend:"+3.2%"}),y.jsx(Xa,{title:"Total Comments",value:e.totalComments,icon:y.jsx(Xc,{className:"w-5 h-5 sm:w-6 sm:h-6 text-cyan-400"}),subtext:"On your ideas",trend:"+7.8%"})]})]}),y.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 lg:gap-8",children:[y.jsxs("div",{className:"bg-gradient-to-br from-slate-900/90 to-black/90 backdrop-blur-sm border border-slate-800/50 rounded-xl sm:rounded-2xl p-4 sm:p-6 transition-all duration-300 hover:border-slate-600/70 hover:shadow-2xl hover:shadow-slate-500/10",children:[y.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 sm:mb-6 gap-2 sm:gap-0",children:[y.jsxs("div",{children:[y.jsx("h2",{className:"text-lg sm:text-xl font-bold text-white mb-1",children:"Daily Active Users"}),y.jsx("p",{className:"text-slate-400 text-xs sm:text-sm",children:"Last 7 days performance"})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"w-2 h-2 sm:w-3 sm:h-3 bg-gradient-to-r from-slate-600 to-slate-500 rounded-full"}),y.jsx("span",{className:"text-slate-300 text-xs sm:text-sm",children:"Active Users"})]})]}),y.jsx(k9,{data:t.platformPerformance.dau_data})]}),y.jsxs("div",{className:"bg-gradient-to-br from-slate-900/90 to-black/90 backdrop-blur-sm border border-slate-800/50 rounded-xl sm:rounded-2xl p-4 sm:p-6 transition-all duration-300 hover:border-slate-600/70 hover:shadow-2xl hover:shadow-slate-500/10",children:[y.jsx("h2",{className:"text-lg sm:text-xl font-bold text-white mb-4 sm:mb-6",children:"Platform Insights"}),y.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[y.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 bg-gradient-to-r from-slate-800/50 to-slate-700/50 rounded-lg sm:rounded-xl border border-slate-700/30",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-slate-300 text-xs sm:text-sm",children:"Monthly Growth"}),y.jsx("p",{className:"text-xl sm:text-2xl font-bold text-white",children:"+23.5%"})]}),y.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-slate-700 to-slate-600 rounded-lg sm:rounded-xl flex items-center justify-center border border-slate-600/30",children:y.jsx("span",{className:"text-white font-bold text-base sm:text-lg",children:""})})]}),y.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 bg-gradient-to-r from-slate-800/50 to-slate-700/50 rounded-lg sm:rounded-xl border border-slate-700/30",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-slate-300 text-xs sm:text-sm",children:"User Retention"}),y.jsx("p",{className:"text-xl sm:text-2xl font-bold text-white",children:"89.2%"})]}),y.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-emerald-700 to-emerald-600 rounded-lg sm:rounded-xl flex items-center justify-center border border-emerald-600/30",children:y.jsx("span",{className:"text-white font-bold text-base sm:text-lg",children:""})})]}),y.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 bg-gradient-to-r from-slate-800/50 to-slate-700/50 rounded-lg sm:rounded-xl border border-slate-700/30",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-slate-300 text-xs sm:text-sm",children:"Avg Session Time"}),y.jsx("p",{className:"text-xl sm:text-2xl font-bold text-white",children:"18.4m"})]}),y.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-purple-700 to-purple-600 rounded-lg sm:rounded-xl flex items-center justify-center border border-purple-600/30",children:y.jsx("span",{className:"text-white font-bold text-base sm:text-lg",children:""})})]})]})]})]}),y.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 lg:gap-6",children:[y.jsx("div",{className:"bg-gradient-to-r from-slate-800/50 to-slate-700/50 border border-slate-700/30 rounded-xl sm:rounded-2xl p-4 sm:p-6 transition-all duration-300 hover:border-slate-600/70 hover:shadow-2xl hover:shadow-slate-500/10",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-slate-300 text-xs sm:text-sm font-medium",children:"New Users Today"}),y.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-white",children:"1,247"})]}),y.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-slate-700 to-slate-600 rounded-lg sm:rounded-xl flex items-center justify-center border border-slate-600/30",children:y.jsx(Es,{className:"w-5 h-5 sm:w-6 sm:h-6 text-slate-300"})})]})}),y.jsx("div",{className:"bg-gradient-to-r from-slate-800/50 to-slate-700/50 border border-slate-700/30 rounded-xl sm:rounded-2xl p-4 sm:p-6 transition-all duration-300 hover:border-slate-600/70 hover:shadow-2xl hover:shadow-slate-500/10",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-slate-300 text-xs sm:text-sm font-medium",children:"Successful Matches"}),y.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-white",children:"892"})]}),y.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-emerald-700 to-emerald-600 rounded-lg sm:rounded-xl flex items-center justify-center border border-emerald-600/30",children:y.jsx(hl,{className:"w-5 h-5 sm:w-6 sm:h-6 text-emerald-300"})})]})}),y.jsx("div",{className:"bg-gradient-to-r from-slate-800/50 to-slate-700/50 border border-slate-700/30 rounded-xl sm:rounded-2xl p-4 sm:p-6 transition-all duration-300 hover:border-slate-600/70 hover:shadow-2xl hover:shadow-slate-500/10 lg:col-span-1",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-slate-300 text-xs sm:text-sm font-medium",children:"Revenue Generated"}),y.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-white",children:"$12.4K"})]}),y.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-purple-700 to-purple-600 rounded-lg sm:rounded-xl flex items-center justify-center border border-purple-600/30",children:y.jsx("span",{className:"text-purple-300 font-bold text-base sm:text-lg",children:"$"})})]})})]})]})]})}),$T=K.createContext({});function KT(t){const e=K.useRef(null);return e.current===null&&(e.current=t()),e.current}const WT=typeof window!="undefined",nP=WT?K.useLayoutEffect:K.useEffect,hy=K.createContext(null);function YT(t,e){t.indexOf(e)===-1&&t.push(e)}function JT(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Gr=(t,e,n)=>n>e?e:n<t?t:n;let QT=()=>{};const zr={},iP=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function sP(t){return typeof t=="object"&&t!==null}const rP=t=>/^0[^.\s]+$/u.test(t);function XT(t){let e;return()=>(e===void 0&&(e=t()),e)}const cs=t=>t,V9=(t,e)=>n=>e(t(n)),zf=(...t)=>t.reduce(V9),pf=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i};class ZT{constructor(){this.subscriptions=[]}add(e){return YT(this.subscriptions,e),()=>JT(this.subscriptions,e)}notify(e,n,i){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,i);else for(let r=0;r<s;r++){const a=this.subscriptions[r];a&&a(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const er=t=>t*1e3,tr=t=>t/1e3;function oP(t,e){return e?t*(1e3/e):0}const aP=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,L9=1e-7,U9=12;function O9(t,e,n,i,s){let r,a,c=0;do a=e+(n-e)/2,r=aP(a,i,s)-t,r>0?n=a:e=a;while(Math.abs(r)>L9&&++c<U9);return a}function Hf(t,e,n,i){if(t===e&&n===i)return cs;const s=r=>O9(r,0,1,t,n);return r=>r===0||r===1?r:aP(s(r),e,i)}const lP=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,cP=t=>e=>1-t(1-e),uP=Hf(.33,1.53,.69,.99),ew=cP(uP),dP=lP(ew),hP=t=>(t*=2)<1?.5*ew(t):.5*(2-Math.pow(2,-10*(t-1))),tw=t=>1-Math.sin(Math.acos(t)),fP=cP(tw),mP=lP(tw),F9=Hf(.42,0,1,1),B9=Hf(0,0,.58,1),pP=Hf(.42,0,.58,1),q9=t=>Array.isArray(t)&&typeof t[0]!="number",gP=t=>Array.isArray(t)&&typeof t[0]=="number",j9={linear:cs,easeIn:F9,easeInOut:pP,easeOut:B9,circIn:tw,circInOut:mP,circOut:fP,backIn:ew,backInOut:dP,backOut:uP,anticipate:hP},G9=t=>typeof t=="string",dI=t=>{if(gP(t)){QT(t.length===4);const[e,n,i,s]=t;return Hf(e,n,i,s)}else if(G9(t))return j9[t];return t},Dp=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function z9(t,e){let n=new Set,i=new Set,s=!1,r=!1;const a=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function u(g){a.has(g)&&(h.schedule(g),t()),g(c)}const h={schedule:(g,x=!1,T=!1)=>{const S=T&&s?n:i;return x&&a.add(g),S.has(g)||S.add(g),g},cancel:g=>{i.delete(g),a.delete(g)},process:g=>{if(c=g,s){r=!0;return}s=!0,[n,i]=[i,n],n.forEach(u),n.clear(),s=!1,r&&(r=!1,h.process(g))}};return h}const H9=40;function yP(t,e){let n=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},r=()=>n=!0,a=Dp.reduce((O,z)=>(O[z]=z9(r),O),{}),{setup:c,read:u,resolveKeyframes:h,preUpdate:g,update:x,preRender:T,render:b,postRender:S}=a,P=()=>{const O=zr.useManualTiming?s.timestamp:performance.now();n=!1,zr.useManualTiming||(s.delta=i?1e3/60:Math.max(Math.min(O-s.timestamp,H9),1)),s.timestamp=O,s.isProcessing=!0,c.process(s),u.process(s),h.process(s),g.process(s),x.process(s),T.process(s),b.process(s),S.process(s),s.isProcessing=!1,n&&e&&(i=!1,t(P))},M=()=>{n=!0,i=!0,s.isProcessing||t(P)};return{schedule:Dp.reduce((O,z)=>{const j=a[z];return O[z]=(W,D=!1,C=!1)=>(n||M(),j.schedule(W,D,C)),O},{}),cancel:O=>{for(let z=0;z<Dp.length;z++)a[Dp[z]].cancel(O)},state:s,steps:a}}const{schedule:Jt,cancel:na,state:Kn,steps:fx}=yP(typeof requestAnimationFrame!="undefined"?requestAnimationFrame:cs,!0);let Zp;function $9(){Zp=void 0}const Ci={now:()=>(Zp===void 0&&Ci.set(Kn.isProcessing||zr.useManualTiming?Kn.timestamp:performance.now()),Zp),set:t=>{Zp=t,queueMicrotask($9)}},vP=t=>e=>typeof e=="string"&&e.startsWith(t),nw=vP("--"),K9=vP("var(--"),iw=t=>K9(t)?W9.test(t.split("/*")[0].trim()):!1,W9=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Wu={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},gf=pe(J({},Wu),{transform:t=>Gr(0,1,t)}),kp=pe(J({},Wu),{default:1}),$h=t=>Math.round(t*1e5)/1e5,sw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Y9(t){return t==null}const J9=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,rw=(t,e)=>n=>!!(typeof n=="string"&&J9.test(n)&&n.startsWith(t)||e&&!Y9(n)&&Object.prototype.hasOwnProperty.call(n,e)),xP=(t,e,n)=>i=>{if(typeof i!="string")return i;const[s,r,a,c]=i.match(sw);return{[t]:parseFloat(s),[e]:parseFloat(r),[n]:parseFloat(a),alpha:c!==void 0?parseFloat(c):1}},Q9=t=>Gr(0,255,t),mx=pe(J({},Wu),{transform:t=>Math.round(Q9(t))}),fl={test:rw("rgb","red"),parse:xP("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+mx.transform(t)+", "+mx.transform(e)+", "+mx.transform(n)+", "+$h(gf.transform(i))+")"};function X9(t){let e="",n="",i="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,i+=i,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}}const e_={test:rw("#"),parse:X9,transform:fl.transform},$f=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Bo=$f("deg"),nr=$f("%"),Qe=$f("px"),Z9=$f("vh"),ej=$f("vw"),hI=pe(J({},nr),{parse:t=>nr.parse(t)/100,transform:t=>nr.transform(t*100)}),Zc={test:rw("hsl","hue"),parse:xP("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+nr.transform($h(e))+", "+nr.transform($h(n))+", "+$h(gf.transform(i))+")"},Tn={test:t=>fl.test(t)||e_.test(t)||Zc.test(t),parse:t=>fl.test(t)?fl.parse(t):Zc.test(t)?Zc.parse(t):e_.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?fl.transform(t):Zc.transform(t),getAnimatableNone:t=>{const e=Tn.parse(t);return e.alpha=0,Tn.transform(e)}},tj=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function nj(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(sw))==null?void 0:e.length)||0)+(((n=t.match(tj))==null?void 0:n.length)||0)>0}const _P="number",TP="color",ij="var",sj="var(",fI="${}",rj=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function yf(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},s=[];let r=0;const c=e.replace(rj,u=>(Tn.test(u)?(i.color.push(r),s.push(TP),n.push(Tn.parse(u))):u.startsWith(sj)?(i.var.push(r),s.push(ij),n.push(u)):(i.number.push(r),s.push(_P),n.push(parseFloat(u))),++r,fI)).split(fI);return{values:n,split:c,indexes:i,types:s}}function wP(t){return yf(t).values}function bP(t){const{split:e,types:n}=yf(t),i=e.length;return s=>{let r="";for(let a=0;a<i;a++)if(r+=e[a],s[a]!==void 0){const c=n[a];c===_P?r+=$h(s[a]):c===TP?r+=Tn.transform(s[a]):r+=s[a]}return r}}const oj=t=>typeof t=="number"?0:Tn.test(t)?Tn.getAnimatableNone(t):t;function aj(t){const e=wP(t);return bP(t)(e.map(oj))}const ia={test:nj,parse:wP,createTransformer:bP,getAnimatableNone:aj};function px(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function lj({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let s=0,r=0,a=0;if(!e)s=r=a=n;else{const c=n<.5?n*(1+e):n+e-n*e,u=2*n-c;s=px(u,c,t+1/3),r=px(u,c,t),a=px(u,c,t-1/3)}return{red:Math.round(s*255),green:Math.round(r*255),blue:Math.round(a*255),alpha:i}}function Ig(t,e){return n=>n>0?e:t}const Xt=(t,e,n)=>t+(e-t)*n,gx=(t,e,n)=>{const i=t*t,s=n*(e*e-i)+i;return s<0?0:Math.sqrt(s)},cj=[e_,fl,Zc],uj=t=>cj.find(e=>e.test(t));function mI(t){const e=uj(t);if(!e)return!1;let n=e.parse(t);return e===Zc&&(n=lj(n)),n}const pI=(t,e)=>{const n=mI(t),i=mI(e);if(!n||!i)return Ig(t,e);const s=J({},n);return r=>(s.red=gx(n.red,i.red,r),s.green=gx(n.green,i.green,r),s.blue=gx(n.blue,i.blue,r),s.alpha=Xt(n.alpha,i.alpha,r),fl.transform(s))},t_=new Set(["none","hidden"]);function dj(t,e){return t_.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function hj(t,e){return n=>Xt(t,e,n)}function ow(t){return typeof t=="number"?hj:typeof t=="string"?iw(t)?Ig:Tn.test(t)?pI:pj:Array.isArray(t)?EP:typeof t=="object"?Tn.test(t)?pI:fj:Ig}function EP(t,e){const n=[...t],i=n.length,s=t.map((r,a)=>ow(r)(r,e[a]));return r=>{for(let a=0;a<i;a++)n[a]=s[a](r);return n}}function fj(t,e){const n=J(J({},t),e),i={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(i[s]=ow(t[s])(t[s],e[s]));return s=>{for(const r in i)n[r]=i[r](s);return n}}function mj(t,e){var s;const n=[],i={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const a=e.types[r],c=t.indexes[a][i[a]],u=(s=t.values[c])!=null?s:0;n[r]=u,i[a]++}return n}const pj=(t,e)=>{const n=ia.createTransformer(e),i=yf(t),s=yf(e);return i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length?t_.has(t)&&!s.values.length||t_.has(e)&&!i.values.length?dj(t,e):zf(EP(mj(i,s),s.values),n):Ig(t,e)};function SP(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Xt(t,e,n):ow(t)(t,e)}const gj=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Jt.update(e,n),stop:()=>na(e),now:()=>Kn.isProcessing?Kn.timestamp:Ci.now()}},AP=(t,e,n=10)=>{let i="";const s=Math.max(Math.round(e/n),2);for(let r=0;r<s;r++)i+=Math.round(t(r/(s-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},Rg=2e4;function aw(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<Rg;)e+=n,i=t.next(e);return e>=Rg?1/0:e}function yj(t,e=100,n){const i=n(pe(J({},t),{keyframes:[0,e]})),s=Math.min(aw(i),Rg);return{type:"keyframes",ease:r=>i.next(s*r).value/e,duration:tr(s)}}const vj=5;function CP(t,e,n){const i=Math.max(e-vj,0);return oP(n-t(i),e-i)}const sn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},yx=.001;function xj({duration:t=sn.duration,bounce:e=sn.bounce,velocity:n=sn.velocity,mass:i=sn.mass}){let s,r,a=1-e;a=Gr(sn.minDamping,sn.maxDamping,a),t=Gr(sn.minDuration,sn.maxDuration,tr(t)),a<1?(s=h=>{const g=h*a,x=g*t,T=g-n,b=n_(h,a),S=Math.exp(-x);return yx-T/b*S},r=h=>{const x=h*a*t,T=x*n+n,b=Math.pow(a,2)*Math.pow(h,2)*t,S=Math.exp(-x),P=n_(Math.pow(h,2),a);return(-s(h)+yx>0?-1:1)*((T-b)*S)/P}):(s=h=>{const g=Math.exp(-h*t),x=(h-n)*t+1;return-yx+g*x},r=h=>{const g=Math.exp(-h*t),x=(n-h)*(t*t);return g*x});const c=5/t,u=Tj(s,r,c);if(t=er(t),isNaN(u))return{stiffness:sn.stiffness,damping:sn.damping,duration:t};{const h=Math.pow(u,2)*i;return{stiffness:h,damping:a*2*Math.sqrt(i*h),duration:t}}}const _j=12;function Tj(t,e,n){let i=n;for(let s=1;s<_j;s++)i=i-t(i)/e(i);return i}function n_(t,e){return t*Math.sqrt(1-e*e)}const wj=["duration","bounce"],bj=["stiffness","damping","mass"];function gI(t,e){return e.some(n=>t[n]!==void 0)}function Ej(t){let e=J({velocity:sn.velocity,stiffness:sn.stiffness,damping:sn.damping,mass:sn.mass,isResolvedFromDuration:!1},t);if(!gI(t,bj)&&gI(t,wj))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),s=i*i,r=2*Gr(.05,1,1-(t.bounce||0))*Math.sqrt(s);e=pe(J({},e),{mass:sn.mass,stiffness:s,damping:r})}else{const n=xj(t);e=pe(J(J({},e),n),{mass:sn.mass}),e.isResolvedFromDuration=!0}return e}function Ng(t=sn.visualDuration,e=sn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:s}=n;const r=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],c={done:!1,value:r},{stiffness:u,damping:h,mass:g,duration:x,velocity:T,isResolvedFromDuration:b}=Ej(pe(J({},n),{velocity:-tr(n.velocity||0)})),S=T||0,P=h/(2*Math.sqrt(u*g)),M=a-r,V=tr(Math.sqrt(u/g)),q=Math.abs(M)<5;i||(i=q?sn.restSpeed.granular:sn.restSpeed.default),s||(s=q?sn.restDelta.granular:sn.restDelta.default);let O;if(P<1){const j=n_(V,P);O=W=>{const D=Math.exp(-P*V*W);return a-D*((S+P*V*M)/j*Math.sin(j*W)+M*Math.cos(j*W))}}else if(P===1)O=j=>a-Math.exp(-V*j)*(M+(S+V*M)*j);else{const j=V*Math.sqrt(P*P-1);O=W=>{const D=Math.exp(-P*V*W),C=Math.min(j*W,300);return a-D*((S+P*V*M)*Math.sinh(C)+j*M*Math.cosh(C))/j}}const z={calculatedDuration:b&&x||null,next:j=>{const W=O(j);if(b)c.done=j>=x;else{let D=j===0?S:0;P<1&&(D=j===0?er(S):CP(O,j,W));const C=Math.abs(D)<=i,R=Math.abs(a-W)<=s;c.done=C&&R}return c.value=c.done?a:W,c},toString:()=>{const j=Math.min(aw(z),Rg),W=AP(D=>z.next(j*D).value,j,30);return j+"ms "+W},toTransition:()=>{}};return z}Ng.applyToOptions=t=>{const e=yj(t,100,Ng);return t.ease=e.ease,t.duration=er(e.duration),t.type="keyframes",t};function i_({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:r=500,modifyTarget:a,min:c,max:u,restDelta:h=.5,restSpeed:g}){const x=t[0],T={done:!1,value:x},b=C=>c!==void 0&&C<c||u!==void 0&&C>u,S=C=>c===void 0?u:u===void 0||Math.abs(c-C)<Math.abs(u-C)?c:u;let P=n*e;const M=x+P,V=a===void 0?M:a(M);V!==M&&(P=V-x);const q=C=>-P*Math.exp(-C/i),O=C=>V+q(C),z=C=>{const R=q(C),L=O(C);T.done=Math.abs(R)<=h,T.value=T.done?V:L};let j,W;const D=C=>{b(T.value)&&(j=C,W=Ng({keyframes:[T.value,S(T.value)],velocity:CP(O,C,T.value),damping:s,stiffness:r,restDelta:h,restSpeed:g}))};return D(0),{calculatedDuration:null,next:C=>{let R=!1;return!W&&j===void 0&&(R=!0,z(C),D(C)),j!==void 0&&C>=j?W.next(C-j):(!R&&z(C),T)}}}function Sj(t,e,n){const i=[],s=n||zr.mix||SP,r=t.length-1;for(let a=0;a<r;a++){let c=s(t[a],t[a+1]);if(e){const u=Array.isArray(e)?e[a]||cs:e;c=zf(u,c)}i.push(c)}return i}function Aj(t,e,{clamp:n=!0,ease:i,mixer:s}={}){const r=t.length;if(QT(r===e.length),r===1)return()=>e[0];if(r===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[r-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=Sj(e,i,s),u=c.length,h=g=>{if(a&&g<t[0])return e[0];let x=0;if(u>1)for(;x<t.length-2&&!(g<t[x+1]);x++);const T=pf(t[x],t[x+1],g);return c[x](T)};return n?g=>h(Gr(t[0],t[r-1],g)):h}function Cj(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const s=pf(0,e,i);t.push(Xt(n,1,s))}}function Ij(t){const e=[0];return Cj(e,t.length-1),e}function Rj(t,e){return t.map(n=>n*e)}function Nj(t,e){return t.map(()=>e||pP).splice(0,t.length-1)}function Kh({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const s=q9(i)?i.map(dI):dI(i),r={done:!1,value:e[0]},a=Rj(n&&n.length===e.length?n:Ij(e),t),c=Aj(a,e,{ease:Array.isArray(s)?s:Nj(e,s)});return{calculatedDuration:t,next:u=>(r.value=c(u),r.done=u>=t,r)}}const Mj=t=>t!==null;function lw(t,{repeat:e,repeatType:n="loop"},i,s=1){const r=t.filter(Mj),c=s<0||e&&n!=="loop"&&e%2===1?0:r.length-1;return!c||i===void 0?r[c]:i}const Pj={decay:i_,inertia:i_,tween:Kh,keyframes:Kh,spring:Ng};function IP(t){typeof t.type=="string"&&(t.type=Pj[t.type])}class cw{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const Dj=t=>t/100;class uw extends cw{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var i,s;const{motionValue:n}=this.options;n&&n.updatedAt!==Ci.now()&&this.tick(Ci.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(i=this.options).onStop)==null||s.call(i))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;IP(e);const{type:n=Kh,repeat:i=0,repeatDelay:s=0,repeatType:r,velocity:a=0}=e;let{keyframes:c}=e;const u=n||Kh;u!==Kh&&typeof c[0]!="number"&&(this.mixKeyframes=zf(Dj,SP(c[0],c[1])),c=[0,100]);const h=u(pe(J({},e),{keyframes:c}));r==="mirror"&&(this.mirroredGenerator=u(pe(J({},e),{keyframes:[...c].reverse(),velocity:-a}))),h.calculatedDuration===null&&(h.calculatedDuration=aw(h));const{calculatedDuration:g}=h;this.calculatedDuration=g,this.resolvedDuration=g+s,this.totalDuration=this.resolvedDuration*(i+1)-s,this.generator=h}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:i,totalDuration:s,mixKeyframes:r,mirroredGenerator:a,resolvedDuration:c,calculatedDuration:u}=this;if(this.startTime===null)return i.next(0);const{delay:h=0,keyframes:g,repeat:x,repeatType:T,repeatDelay:b,type:S,onUpdate:P,finalKeyframe:M}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const V=this.currentTime-h*(this.playbackSpeed>=0?1:-1),q=this.playbackSpeed>=0?V<0:V>s;this.currentTime=Math.max(V,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let O=this.currentTime,z=i;if(x){const C=Math.min(this.currentTime,s)/c;let R=Math.floor(C),L=C%1;!L&&C>=1&&(L=1),L===1&&R--,R=Math.min(R,x+1),!!(R%2)&&(T==="reverse"?(L=1-L,b&&(L-=b/c)):T==="mirror"&&(z=a)),O=Gr(0,1,L)*c}const j=q?{done:!1,value:g[0]}:z.next(O);r&&(j.value=r(j.value));let{done:W}=j;!q&&u!==null&&(W=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&W);return D&&S!==i_&&(j.value=lw(g,this.options,M,this.speed)),P&&P(j.value),D&&this.finish(),j}then(e,n){return this.finished.then(e,n)}get duration(){return tr(this.calculatedDuration)}get time(){return tr(this.currentTime)}set time(e){var n;e=er(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Ci.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=tr(this.currentTime))}play(){var s,r;if(this.isStopped)return;const{driver:e=gj,startTime:n}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),(r=(s=this.options).onPlay)==null||r.call(s);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=n!=null?n:i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ci.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function kj(t){var e;for(let n=1;n<t.length;n++)(e=t[n])!=null||(t[n]=t[n-1])}const ml=t=>t*180/Math.PI,s_=t=>{const e=ml(Math.atan2(t[1],t[0]));return r_(e)},Vj={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:s_,rotateZ:s_,skewX:t=>ml(Math.atan(t[1])),skewY:t=>ml(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},r_=t=>(t=t%360,t<0&&(t+=360),t),yI=s_,vI=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),xI=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Lj={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:vI,scaleY:xI,scale:t=>(vI(t)+xI(t))/2,rotateX:t=>r_(ml(Math.atan2(t[6],t[5]))),rotateY:t=>r_(ml(Math.atan2(-t[2],t[0]))),rotateZ:yI,rotate:yI,skewX:t=>ml(Math.atan(t[4])),skewY:t=>ml(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function o_(t){return t.includes("scale")?1:0}function a_(t,e){if(!t||t==="none")return o_(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,s;if(n)i=Lj,s=n;else{const c=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=Vj,s=c}if(!s)return o_(e);const r=i[e],a=s[1].split(",").map(Oj);return typeof r=="function"?r(a):a[r]}const Uj=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return a_(n,e)};function Oj(t){return parseFloat(t.trim())}const Yu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ju=new Set(Yu),_I=t=>t===Wu||t===Qe,Fj=new Set(["x","y","z"]),Bj=Yu.filter(t=>!Fj.has(t));function qj(t){const e=[];return Bj.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const _l={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>a_(e,"x"),y:(t,{transform:e})=>a_(e,"y")};_l.translateX=_l.x;_l.translateY=_l.y;const Tl=new Set;let l_=!1,c_=!1,u_=!1;function RP(){if(c_){const t=Array.from(Tl).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const s=qj(i);s.length&&(n.set(i,s),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const s=n.get(i);s&&s.forEach(([r,a])=>{var c;(c=i.getValue(r))==null||c.set(a)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}c_=!1,l_=!1,Tl.forEach(t=>t.complete(u_)),Tl.clear()}function NP(){Tl.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(c_=!0)})}function jj(){u_=!0,NP(),RP(),u_=!1}class dw{constructor(e,n,i,s,r,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=s,this.element=r,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(Tl.add(this),l_||(l_=!0,Jt.read(NP),Jt.resolveKeyframes(RP))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:s}=this;if(e[0]===null){const r=s==null?void 0:s.get(),a=e[e.length-1];if(r!==void 0)e[0]=r;else if(i&&n){const c=i.readValue(n,a);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=a),s&&r===void 0&&s.set(e[0])}kj(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Tl.delete(this)}cancel(){this.state==="scheduled"&&(Tl.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Gj=t=>t.startsWith("--");function zj(t,e,n){Gj(e)?t.style.setProperty(e,n):t.style[e]=n}const Hj=XT(()=>window.ScrollTimeline!==void 0),$j={};function Kj(t,e){const n=XT(t);return()=>{var i;return(i=$j[e])!=null?i:n()}}const MP=Kj(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(t){return!1}return!0},"linearEasing"),Ph=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,TI={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ph([0,.65,.55,1]),circOut:Ph([.55,0,1,.45]),backIn:Ph([.31,.01,.66,-.59]),backOut:Ph([.33,1.53,.69,.99])};function PP(t,e){if(t)return typeof t=="function"?MP()?AP(t,e):"ease-out":gP(t)?Ph(t):Array.isArray(t)?t.map(n=>PP(n,e)||TI.easeOut):TI[t]}function Wj(t,e,n,{delay:i=0,duration:s=300,repeat:r=0,repeatType:a="loop",ease:c="easeOut",times:u}={},h=void 0){const g={[e]:n};u&&(g.offset=u);const x=PP(c,s);Array.isArray(x)&&(g.easing=x);const T={delay:i,duration:s,easing:Array.isArray(x)?"linear":x,fill:"both",iterations:r+1,direction:a==="reverse"?"alternate":"normal"};return h&&(T.pseudoElement=h),t.animate(g,T)}function DP(t){return typeof t=="function"&&"applyToOptions"in t}function Yj(n){var i=n,{type:t}=i,e=mi(i,["type"]);var s,r;return DP(t)&&MP()?t.applyToOptions(e):((s=e.duration)!=null||(e.duration=300),(r=e.ease)!=null||(e.ease="easeOut"),e)}class Jj extends cw{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:i,keyframes:s,pseudoElement:r,allowFlatten:a=!1,finalKeyframe:c,onComplete:u}=e;this.isPseudoElement=!!r,this.allowFlatten=a,this.options=e,QT(typeof e.type!="string");const h=Yj(e);this.animation=Wj(n,i,s,h,r),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const g=lw(s,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(g):zj(n,i,g),this.animation.cancel()}u==null||u(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch(e){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,i;const e=((i=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:i.call(n).duration)||0;return tr(Number(e))}get time(){return tr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=er(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var i;return this.allowFlatten&&((i=this.animation.effect)==null||i.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&Hj()?(this.animation.timeline=e,cs):n(this)}}const kP={anticipate:hP,backInOut:dP,circInOut:mP};function Qj(t){return t in kP}function Xj(t){typeof t.ease=="string"&&Qj(t.ease)&&(t.ease=kP[t.ease])}const wI=10;class Zj extends Jj{constructor(e){Xj(e),IP(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){var g;const h=this.options,{motionValue:n,onUpdate:i,onComplete:s,element:r}=h,a=mi(h,["motionValue","onUpdate","onComplete","element"]);if(!n)return;if(e!==void 0){n.set(e);return}const c=new uw(pe(J({},a),{autoplay:!1})),u=er((g=this.finishedTime)!=null?g:this.time);n.setWithVelocity(c.sample(u-wI).value,c.sample(u).value,wI),c.stop()}}const bI=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ia.test(t)||t==="0")&&!t.startsWith("url("));function eG(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function tG(t,e,n,i){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const r=t[t.length-1],a=bI(s,e),c=bI(r,e);return!a||!c?!1:eG(t)||(n==="spring"||DP(n))&&i}function d_(t){t.duration=0,t.type}const nG=new Set(["opacity","clipPath","filter","transform"]),iG=XT(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function sG(t){var g;const{motionValue:e,name:n,repeatDelay:i,repeatType:s,damping:r,type:a}=t;if(!(((g=e==null?void 0:e.owner)==null?void 0:g.current)instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:h}=e.owner.getProps();return iG()&&n&&nG.has(n)&&(n!=="transform"||!h)&&!u&&!i&&s!=="mirror"&&r!==0&&a!=="inertia"}const rG=40;class oG extends cw{constructor(T){var b=T,{autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:s=0,repeatDelay:r=0,repeatType:a="loop",keyframes:c,name:u,motionValue:h,element:g}=b,x=mi(b,["autoplay","delay","type","repeat","repeatDelay","repeatType","keyframes","name","motionValue","element"]);var M;super(),this.stop=()=>{var V,q;this._animation&&(this._animation.stop(),(V=this.stopTimeline)==null||V.call(this)),(q=this.keyframeResolver)==null||q.cancel()},this.createdAt=Ci.now();const S=J({autoplay:e,delay:n,type:i,repeat:s,repeatDelay:r,repeatType:a,name:u,motionValue:h,element:g},x),P=(g==null?void 0:g.KeyframeResolver)||dw;this.keyframeResolver=new P(c,(V,q,O)=>this.onKeyframesResolved(V,q,S,!O),u,h,g),(M=this.keyframeResolver)==null||M.scheduleResolve()}onKeyframesResolved(e,n,i,s){this.keyframeResolver=void 0;const{name:r,type:a,velocity:c,delay:u,isHandoff:h,onUpdate:g}=i;this.resolvedAt=Ci.now(),tG(e,r,a,c)||((zr.instantAnimations||!u)&&(g==null||g(lw(e,i,n))),e[0]=e[e.length-1],d_(i),i.repeat=0);const x=s?this.resolvedAt?this.resolvedAt-this.createdAt>rG?this.resolvedAt:this.createdAt:this.createdAt:void 0,T=pe(J({startTime:x,finalKeyframe:n},i),{keyframes:e}),b=!h&&sG(T)?new Zj(pe(J({},T),{element:T.motionValue.owner.current})):new uw(T);b.finished.then(()=>this.notifyFinished()).catch(cs),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),jj()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const aG=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function lG(t){const e=aG.exec(t);if(!e)return[,];const[,n,i,s]=e;return[`--${n!=null?n:i}`,s]}function VP(t,e,n=1){const[i,s]=lG(t);if(!i)return;const r=window.getComputedStyle(e).getPropertyValue(i);if(r){const a=r.trim();return iP(a)?parseFloat(a):a}return iw(s)?VP(s,e,n+1):s}function hw(t,e){var n,i;return(i=(n=t==null?void 0:t[e])!=null?n:t==null?void 0:t.default)!=null?i:t}const LP=new Set(["width","height","top","left","right","bottom",...Yu]),cG={test:t=>t==="auto",parse:t=>t},UP=t=>e=>e.test(t),OP=[Wu,Qe,nr,Bo,ej,Z9,cG],EI=t=>OP.find(UP(t));function uG(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||rP(t):!0}const dG=new Set(["brightness","contrast","saturate","opacity"]);function hG(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(sw)||[];if(!i)return t;const s=n.replace(i,"");let r=dG.has(e)?1:0;return i!==n&&(r*=100),e+"("+r+s+")"}const fG=/\b([a-z-]*)\(.*?\)/gu,h_=pe(J({},ia),{getAnimatableNone:t=>{const e=t.match(fG);return e?e.map(hG).join(" "):t}}),SI=pe(J({},Wu),{transform:Math.round}),mG={rotate:Bo,rotateX:Bo,rotateY:Bo,rotateZ:Bo,scale:kp,scaleX:kp,scaleY:kp,scaleZ:kp,skew:Bo,skewX:Bo,skewY:Bo,distance:Qe,translateX:Qe,translateY:Qe,translateZ:Qe,x:Qe,y:Qe,z:Qe,perspective:Qe,transformPerspective:Qe,opacity:gf,originX:hI,originY:hI,originZ:Qe},fw=pe(J({borderWidth:Qe,borderTopWidth:Qe,borderRightWidth:Qe,borderBottomWidth:Qe,borderLeftWidth:Qe,borderRadius:Qe,radius:Qe,borderTopLeftRadius:Qe,borderTopRightRadius:Qe,borderBottomRightRadius:Qe,borderBottomLeftRadius:Qe,width:Qe,maxWidth:Qe,height:Qe,maxHeight:Qe,top:Qe,right:Qe,bottom:Qe,left:Qe,padding:Qe,paddingTop:Qe,paddingRight:Qe,paddingBottom:Qe,paddingLeft:Qe,margin:Qe,marginTop:Qe,marginRight:Qe,marginBottom:Qe,marginLeft:Qe,backgroundPositionX:Qe,backgroundPositionY:Qe},mG),{zIndex:SI,fillOpacity:gf,strokeOpacity:gf,numOctaves:SI}),pG=pe(J({},fw),{color:Tn,backgroundColor:Tn,outlineColor:Tn,fill:Tn,stroke:Tn,borderColor:Tn,borderTopColor:Tn,borderRightColor:Tn,borderBottomColor:Tn,borderLeftColor:Tn,filter:h_,WebkitFilter:h_}),FP=t=>pG[t];function BP(t,e){let n=FP(t);return n!==h_&&(n=ia),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const gG=new Set(["auto","none","0"]);function yG(t,e,n){let i=0,s;for(;i<t.length&&!s;){const r=t[i];typeof r=="string"&&!gG.has(r)&&yf(r).values.length&&(s=t[i]),i++}if(s&&n)for(const r of e)t[r]=BP(n,s)}class vG extends dw{constructor(e,n,i,s,r){super(e,n,i,s,r,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let h=e[u];if(typeof h=="string"&&(h=h.trim(),iw(h))){const g=VP(h,n.current);g!==void 0&&(e[u]=g),u===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!LP.has(i)||e.length!==2)return;const[s,r]=e,a=EI(s),c=EI(r);if(a!==c)if(_I(a)&&_I(c))for(let u=0;u<e.length;u++){const h=e[u];typeof h=="string"&&(e[u]=parseFloat(h))}else _l[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let s=0;s<e.length;s++)(e[s]===null||uG(e[s]))&&i.push(s);i.length&&yG(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=_l[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(i,s).jump(s,!1)}measureEndState(){var c;const{element:e,name:n,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const r=i.length-1,a=i[r];i[r]=_l[n](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(c=this.removedTransforms)!=null&&c.length&&this.removedTransforms.forEach(([u,h])=>{e.getValue(u).set(h)}),this.resolveNoneKeyframes()}}function xG(t,e,n){var i;if(t instanceof EventTarget)return[t];if(typeof t=="string"){let s=document;const r=(i=n==null?void 0:n[t])!=null?i:s.querySelectorAll(t);return r?Array.from(r):[]}return Array.from(t)}const qP=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function jP(t){return sP(t)&&"offsetHeight"in t}const AI=30,_G=t=>!isNaN(parseFloat(t));class TG{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{var r;const s=Ci.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&((r=this.events.change)==null||r.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Ci.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=_G(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new ZT);const i=this.events[e].add(n);return e==="change"?()=>{i(),Jt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ci.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>AI)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,AI);return oP(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function wu(t,e){return new TG(t,e)}const{schedule:mw}=yP(queueMicrotask,!1),xs={x:!1,y:!1};function GP(){return xs.x||xs.y}function wG(t){return t==="x"||t==="y"?xs[t]?null:(xs[t]=!0,()=>{xs[t]=!1}):xs.x||xs.y?null:(xs.x=xs.y=!0,()=>{xs.x=xs.y=!1})}function zP(t,e){const n=xG(t),i=new AbortController,s=pe(J({passive:!0},e),{signal:i.signal});return[n,s,()=>i.abort()]}function CI(t){return!(t.pointerType==="touch"||GP())}function bG(t,e,n={}){const[i,s,r]=zP(t,n),a=c=>{if(!CI(c))return;const{target:u}=c,h=e(u,c);if(typeof h!="function"||!u)return;const g=x=>{CI(x)&&(h(x),u.removeEventListener("pointerleave",g))};u.addEventListener("pointerleave",g,s)};return i.forEach(c=>{c.addEventListener("pointerenter",a,s)}),r}const HP=(t,e)=>e?t===e?!0:HP(t,e.parentElement):!1,pw=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,EG=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function SG(t){return EG.has(t.tagName)||t.tabIndex!==-1}const eg=new WeakSet;function II(t){return e=>{e.key==="Enter"&&t(e)}}function vx(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const AG=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=II(()=>{if(eg.has(n))return;vx(n,"down");const s=II(()=>{vx(n,"up")}),r=()=>vx(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",r,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function RI(t){return pw(t)&&!GP()}function CG(t,e,n={}){const[i,s,r]=zP(t,n),a=c=>{const u=c.currentTarget;if(!RI(c))return;eg.add(u);const h=e(u,c),g=(b,S)=>{window.removeEventListener("pointerup",x),window.removeEventListener("pointercancel",T),eg.has(u)&&eg.delete(u),RI(b)&&typeof h=="function"&&h(b,{success:S})},x=b=>{g(b,u===window||u===document||n.useGlobalTarget||HP(u,b.target))},T=b=>{g(b,!1)};window.addEventListener("pointerup",x,s),window.addEventListener("pointercancel",T,s)};return i.forEach(c=>{(n.useGlobalTarget?window:c).addEventListener("pointerdown",a,s),jP(c)&&(c.addEventListener("focus",h=>AG(h,s)),!SG(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),r}function $P(t){return sP(t)&&"ownerSVGElement"in t}function IG(t){return $P(t)&&t.tagName==="svg"}const si=t=>!!(t&&t.getVelocity),RG=[...OP,Tn,ia],NG=t=>RG.find(UP(t)),gw=K.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class MG extends K.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=n.offsetParent,s=jP(i)&&i.offsetWidth||0,r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft,r.right=s-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function PG({children:t,isPresent:e,anchorX:n,root:i}){const s=K.useId(),r=K.useRef(null),a=K.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=K.useContext(gw);return K.useInsertionEffect(()=>{const{width:u,height:h,top:g,left:x,right:T}=a.current;if(e||!r.current||!u||!h)return;const b=n==="left"?`left: ${x}`:`right: ${T}`;r.current.dataset.motionPopId=s;const S=document.createElement("style");c&&(S.nonce=c);const P=i!=null?i:document.head;return P.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${h}px !important;
            ${b}px !important;
            top: ${g}px !important;
          }
        `),()=>{P.contains(S)&&P.removeChild(S)}},[e]),y.jsx(MG,{isPresent:e,childRef:r,sizeRef:a,children:K.cloneElement(t,{ref:r})})}const DG=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:s,presenceAffectsLayout:r,mode:a,anchorX:c,root:u})=>{const h=KT(kG),g=K.useId();let x=!0,T=K.useMemo(()=>(x=!1,{id:g,initial:e,isPresent:n,custom:s,onExitComplete:b=>{h.set(b,!0);for(const S of h.values())if(!S)return;i&&i()},register:b=>(h.set(b,!1),()=>h.delete(b))}),[n,h,i]);return r&&x&&(T=J({},T)),K.useMemo(()=>{h.forEach((b,S)=>h.set(S,!1))},[n]),K.useEffect(()=>{!n&&!h.size&&i&&i()},[n]),a==="popLayout"&&(t=y.jsx(PG,{isPresent:n,anchorX:c,root:u,children:t})),y.jsx(hy.Provider,{value:T,children:t})};function kG(){return new Map}function KP(t=!0){const e=K.useContext(hy);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:s}=e,r=K.useId();K.useEffect(()=>{if(t)return s(r)},[t]);const a=K.useCallback(()=>t&&i&&i(r),[r,i,t]);return!n&&i?[!1,a]:[!0]}const Vp=t=>t.key||"";function NI(t){const e=[];return K.Children.forEach(t,n=>{K.isValidElement(n)&&e.push(n)}),e}const sa=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:r="sync",propagate:a=!1,anchorX:c="left",root:u})=>{const[h,g]=KP(a),x=K.useMemo(()=>NI(t),[t]),T=a&&!h?[]:x.map(Vp),b=K.useRef(!0),S=K.useRef(x),P=KT(()=>new Map),[M,V]=K.useState(x),[q,O]=K.useState(x);nP(()=>{b.current=!1,S.current=x;for(let W=0;W<q.length;W++){const D=Vp(q[W]);T.includes(D)?P.delete(D):P.get(D)!==!0&&P.set(D,!1)}},[q,T.length,T.join("-")]);const z=[];if(x!==M){let W=[...x];for(let D=0;D<q.length;D++){const C=q[D],R=Vp(C);T.includes(R)||(W.splice(D,0,C),z.push(C))}return r==="wait"&&z.length&&(W=z),O(NI(W)),V(x),null}const{forceRender:j}=K.useContext($T);return y.jsx(y.Fragment,{children:q.map(W=>{const D=Vp(W),C=a&&!h?!1:x===q||T.includes(D),R=()=>{if(P.has(D))P.set(D,!0);else return;let L=!0;P.forEach(F=>{F||(L=!1)}),L&&(j==null||j(),O(S.current),a&&(g==null||g()),i&&i())};return y.jsx(DG,{isPresent:C,initial:!b.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:r,root:u,onExitComplete:C?void 0:R,anchorX:c,children:W},D)})})},WP=K.createContext({strict:!1}),MI={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},bu={};for(const t in MI)bu[t]={isEnabled:e=>MI[t].some(n=>!!e[n])};function VG(t){for(const e in t)bu[e]=J(J({},bu[e]),t[e])}const LG=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Mg(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||LG.has(t)}let YP=t=>!Mg(t);function UG(t){typeof t=="function"&&(YP=e=>e.startsWith("on")?!Mg(e):t(e))}try{UG(require("@emotion/is-prop-valid").default)}catch(t){}function OG(t,e,n){const i={};for(const s in t)s==="values"&&typeof t.values=="object"||(YP(s)||n===!0&&Mg(s)||!e&&!Mg(s)||t.draggable&&s.startsWith("onDrag"))&&(i[s]=t[s]);return i}const fy=K.createContext({});function my(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function vf(t){return typeof t=="string"||Array.isArray(t)}const yw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],vw=["initial",...yw];function py(t){return my(t.animate)||vw.some(e=>vf(t[e]))}function JP(t){return!!(py(t)||t.variants)}function FG(t,e){if(py(t)){const{initial:n,animate:i}=t;return{initial:n===!1||vf(n)?n:void 0,animate:vf(i)?i:void 0}}return t.inherit!==!1?e:{}}function BG(t){const{initial:e,animate:n}=FG(t,K.useContext(fy));return K.useMemo(()=>({initial:e,animate:n}),[PI(e),PI(n)])}function PI(t){return Array.isArray(t)?t.join(" "):t}const xf={};function qG(t){for(const e in t)xf[e]=t[e],nw(e)&&(xf[e].isCSSVariable=!0)}function QP(t,{layout:e,layoutId:n}){return Ju.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!xf[t]||t==="opacity")}const jG={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},GG=Yu.length;function zG(t,e,n){let i="",s=!0;for(let r=0;r<GG;r++){const a=Yu[r],c=t[a];if(c===void 0)continue;let u=!0;if(typeof c=="number"?u=c===(a.startsWith("scale")?1:0):u=parseFloat(c)===0,!u||n){const h=qP(c,fw[a]);if(!u){s=!1;const g=jG[a]||a;i+=`${g}(${h}) `}n&&(e[a]=h)}}return i=i.trim(),n?i=n(e,s?"":i):s&&(i="none"),i}function xw(t,e,n){const{style:i,vars:s,transformOrigin:r}=t;let a=!1,c=!1;for(const u in e){const h=e[u];if(Ju.has(u)){a=!0;continue}else if(nw(u)){s[u]=h;continue}else{const g=qP(h,fw[u]);u.startsWith("origin")?(c=!0,r[u]=g):i[u]=g}}if(e.transform||(a||n?i.transform=zG(e,t.transform,n):i.transform&&(i.transform="none")),c){const{originX:u="50%",originY:h="50%",originZ:g=0}=r;i.transformOrigin=`${u} ${h} ${g}`}}const _w=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function XP(t,e,n){for(const i in e)!si(e[i])&&!QP(i,n)&&(t[i]=e[i])}function HG({transformTemplate:t},e){return K.useMemo(()=>{const n=_w();return xw(n,e,t),Object.assign({},n.vars,n.style)},[e])}function $G(t,e){const n=t.style||{},i={};return XP(i,n,t),Object.assign(i,HG(t,e)),i}function KG(t,e){const n={},i=$G(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}const WG={offset:"stroke-dashoffset",array:"stroke-dasharray"},YG={offset:"strokeDashoffset",array:"strokeDasharray"};function JG(t,e,n=1,i=0,s=!0){t.pathLength=1;const r=s?WG:YG;t[r.offset]=Qe.transform(-i);const a=Qe.transform(e),c=Qe.transform(n);t[r.array]=`${a} ${c}`}function ZP(t,x,u,h,g){var T=x,{attrX:e,attrY:n,attrScale:i,pathLength:s,pathSpacing:r=1,pathOffset:a=0}=T,c=mi(T,["attrX","attrY","attrScale","pathLength","pathSpacing","pathOffset"]);var P,M;if(xw(t,c,h),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:b,style:S}=t;b.transform&&(S.transform=b.transform,delete b.transform),(S.transform||b.transformOrigin)&&(S.transformOrigin=(P=b.transformOrigin)!=null?P:"50% 50%",delete b.transformOrigin),S.transform&&(S.transformBox=(M=g==null?void 0:g.transformBox)!=null?M:"fill-box",delete b.transformBox),e!==void 0&&(b.x=e),n!==void 0&&(b.y=n),i!==void 0&&(b.scale=i),s!==void 0&&JG(b,s,r,a,!1)}const eD=()=>pe(J({},_w()),{attrs:{}}),tD=t=>typeof t=="string"&&t.toLowerCase()==="svg";function QG(t,e,n,i){const s=K.useMemo(()=>{const r=eD();return ZP(r,e,tD(i),t.transformTemplate,t.style),pe(J({},r.attrs),{style:J({},r.style)})},[e]);if(t.style){const r={};XP(r,t.style,t),s.style=J(J({},r),s.style)}return s}const XG=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Tw(t){return typeof t!="string"||t.includes("-")?!1:!!(XG.indexOf(t)>-1||/[A-Z]/u.test(t))}function ZG(t,e,n,{latestValues:i},s,r=!1){const c=(Tw(t)?QG:KG)(e,i,s,t),u=OG(e,typeof t=="string",r),h=t!==K.Fragment?pe(J(J({},u),c),{ref:n}):{},{children:g}=e,x=K.useMemo(()=>si(g)?g.get():g,[g]);return K.createElement(t,pe(J({},h),{children:x}))}function DI(t){const e=[{},{}];return t==null||t.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function ww(t,e,n,i){if(typeof e=="function"){const[s,r]=DI(i);e=e(n!==void 0?n:t.custom,s,r)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,r]=DI(i);e=e(n!==void 0?n:t.custom,s,r)}return e}function tg(t){return si(t)?t.get():t}function ez({scrapeMotionValuesFromProps:t,createRenderState:e},n,i,s){return{latestValues:tz(n,i,s,t),renderState:e()}}function tz(t,e,n,i){const s={},r=i(t,{});for(const b in r)s[b]=tg(r[b]);let{initial:a,animate:c}=t;const u=py(t),h=JP(t);e&&h&&!u&&t.inherit!==!1&&(a===void 0&&(a=e.initial),c===void 0&&(c=e.animate));let g=n?n.initial===!1:!1;g=g||a===!1;const x=g?c:a;if(x&&typeof x!="boolean"&&!my(x)){const b=Array.isArray(x)?x:[x];for(let S=0;S<b.length;S++){const P=ww(t,b[S]);if(P){const T=P,{transitionEnd:M,transition:V}=T,q=mi(T,["transitionEnd","transition"]);for(const O in q){let z=q[O];if(Array.isArray(z)){const j=g?z.length-1:0;z=z[j]}z!==null&&(s[O]=z)}for(const O in M)s[O]=M[O]}}}return s}const nD=t=>(e,n)=>{const i=K.useContext(fy),s=K.useContext(hy),r=()=>ez(t,e,i,s);return n?r():KT(r)};function bw(t,e,n){var r;const{style:i}=t,s={};for(const a in i)(si(i[a])||e.style&&si(e.style[a])||QP(a,t)||((r=n==null?void 0:n.getValue(a))==null?void 0:r.liveStyle)!==void 0)&&(s[a]=i[a]);return s}const nz=nD({scrapeMotionValuesFromProps:bw,createRenderState:_w});function iD(t,e,n){const i=bw(t,e,n);for(const s in t)if(si(t[s])||si(e[s])){const r=Yu.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;i[r]=t[s]}return i}const iz=nD({scrapeMotionValuesFromProps:iD,createRenderState:eD}),sz=Symbol.for("motionComponentSymbol");function eu(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function rz(t,e,n){return K.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):eu(n)&&(n.current=i))},[e])}const Ew=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),oz="framerAppearId",sD="data-"+Ew(oz),rD=K.createContext({});function az(t,e,n,i,s){var P,M;const{visualElement:r}=K.useContext(fy),a=K.useContext(WP),c=K.useContext(hy),u=K.useContext(gw).reducedMotion,h=K.useRef(null);i=i||a.renderer,!h.current&&i&&(h.current=i(t,{visualState:e,parent:r,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const g=h.current,x=K.useContext(rD);g&&!g.projection&&s&&(g.type==="html"||g.type==="svg")&&lz(h.current,n,s,x);const T=K.useRef(!1);K.useInsertionEffect(()=>{g&&T.current&&g.update(n,c)});const b=n[sD],S=K.useRef(!!b&&!((P=window.MotionHandoffIsComplete)!=null&&P.call(window,b))&&((M=window.MotionHasOptimisedAnimation)==null?void 0:M.call(window,b)));return nP(()=>{g&&(T.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),g.scheduleRenderMicrotask(),S.current&&g.animationState&&g.animationState.animateChanges())}),K.useEffect(()=>{g&&(!S.current&&g.animationState&&g.animationState.animateChanges(),S.current&&(queueMicrotask(()=>{var V;(V=window.MotionHandoffMarkAsComplete)==null||V.call(window,b)}),S.current=!1),g.enteringChildren=void 0)}),g}function lz(t,e,n,i){const{layoutId:s,layout:r,drag:a,dragConstraints:c,layoutScroll:u,layoutRoot:h,layoutCrossfade:g}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:oD(t.parent)),t.projection.setOptions({layoutId:s,layout:r,alwaysMeasureLayout:!!a||c&&eu(c),visualElement:t,animationType:typeof r=="string"?r:"both",initialPromotionConfig:i,crossfade:g,layoutScroll:u,layoutRoot:h})}function oD(t){if(t)return t.options.allowProjection!==!1?t.projection:oD(t.parent)}function xx(t,{forwardMotionProps:e=!1}={},n,i){var c,u;n&&VG(n);const s=Tw(t)?iz:nz;function r(h,g){let x;const T=pe(J(J({},K.useContext(gw)),h),{layoutId:cz(h)}),{isStatic:b}=T,S=BG(h),P=s(h,b);if(!b&&WT){uz();const M=dz(T);x=M.MeasureLayout,S.visualElement=az(t,P,T,i,M.ProjectionNode)}return y.jsxs(fy.Provider,{value:S,children:[x&&S.visualElement?y.jsx(x,J({visualElement:S.visualElement},T)):null,ZG(t,h,rz(P,S.visualElement,g),P,b,e)]})}r.displayName=`motion.${typeof t=="string"?t:`create(${(u=(c=t.displayName)!=null?c:t.name)!=null?u:""})`}`;const a=K.forwardRef(r);return a[sz]=t,a}function cz({layoutId:t}){const e=K.useContext($T).id;return e&&t!==void 0?e+"-"+t:t}function uz(t,e){K.useContext(WP).strict}function dz(t){const{drag:e,layout:n}=bu;if(!e&&!n)return{};const i=J(J({},e),n);return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function hz(t,e){if(typeof Proxy=="undefined")return xx;const n=new Map,i=(r,a)=>xx(r,a,t,e),s=(r,a)=>i(r,a);return new Proxy(s,{get:(r,a)=>a==="create"?i:(n.has(a)||n.set(a,xx(a,void 0,t,e)),n.get(a))})}function aD({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function fz({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function mz(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function _x(t){return t===void 0||t===1}function f_({scale:t,scaleX:e,scaleY:n}){return!_x(t)||!_x(e)||!_x(n)}function il(t){return f_(t)||lD(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function lD(t){return kI(t.x)||kI(t.y)}function kI(t){return t&&t!=="0%"}function Pg(t,e,n){const i=t-n,s=e*i;return n+s}function VI(t,e,n,i,s){return s!==void 0&&(t=Pg(t,s,i)),Pg(t,n,i)+e}function m_(t,e=0,n=1,i,s){t.min=VI(t.min,e,n,i,s),t.max=VI(t.max,e,n,i,s)}function cD(t,{x:e,y:n}){m_(t.x,e.translate,e.scale,e.originPoint),m_(t.y,n.translate,n.scale,n.originPoint)}const LI=.999999999999,UI=1.0000000000001;function pz(t,e,n,i=!1){const s=n.length;if(!s)return;e.x=e.y=1;let r,a;for(let c=0;c<s;c++){r=n[c],a=r.projectionDelta;const{visualElement:u}=r.options;u&&u.props.style&&u.props.style.display==="contents"||(i&&r.options.layoutScroll&&r.scroll&&r!==r.root&&nu(t,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,cD(t,a)),i&&il(r.latestValues)&&nu(t,r.latestValues))}e.x<UI&&e.x>LI&&(e.x=1),e.y<UI&&e.y>LI&&(e.y=1)}function tu(t,e){t.min=t.min+e,t.max=t.max+e}function OI(t,e,n,i,s=.5){const r=Xt(t.min,t.max,s);m_(t,e,n,r,i)}function nu(t,e){OI(t.x,e.x,e.scaleX,e.scale,e.originX),OI(t.y,e.y,e.scaleY,e.scale,e.originY)}function uD(t,e){return aD(mz(t.getBoundingClientRect(),e))}function gz(t,e,n){const i=uD(t,n),{scroll:s}=e;return s&&(tu(i.x,s.offset.x),tu(i.y,s.offset.y)),i}const FI=()=>({translate:0,scale:1,origin:0,originPoint:0}),iu=()=>({x:FI(),y:FI()}),BI=()=>({min:0,max:0}),hn=()=>({x:BI(),y:BI()}),p_={current:null},dD={current:!1};function yz(){if(dD.current=!0,!!WT)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>p_.current=t.matches;t.addEventListener("change",e),e()}else p_.current=!1}const vz=new WeakMap;function xz(t,e,n){for(const i in e){const s=e[i],r=n[i];if(si(s))t.addValue(i,s);else if(si(r))t.addValue(i,wu(s,{owner:t}));else if(r!==s)if(t.hasValue(i)){const a=t.getValue(i);a.liveStyle===!0?a.jump(s):a.hasAnimated||a.set(s)}else{const a=t.getStaticValue(i);t.addValue(i,wu(a!==void 0?a:s,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const qI=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class _z{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:s,blockInitialAnimation:r,visualState:a},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=dw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const b=Ci.now();this.renderScheduledAt<b&&(this.renderScheduledAt=b,Jt.render(this.render,!1,!0))};const{latestValues:u,renderState:h}=a;this.latestValues=u,this.baseTarget=J({},u),this.initialValues=n.initial?J({},u):{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=c,this.blockInitialAnimation=!!r,this.isControllingVariants=py(n),this.isVariantNode=JP(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const T=this.scrapeMotionValuesFromProps(n,{},this),{willChange:g}=T,x=mi(T,["willChange"]);for(const b in x){const S=x[b];u[b]!==void 0&&si(S)&&S.set(u[b])}}mount(e){var n;this.current=e,vz.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,s)=>this.bindToMotionValue(s,i)),dD.current||yz(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:p_.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),na(this.notifyUpdate),na(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const i=this.features[n];i&&(i.unmount(),i.isMounted=!1)}this.current=null}addChild(e){var n;this.children.add(e),(n=this.enteringChildren)!=null||(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=Ju.has(e);i&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Jt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let r;window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),r&&r(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in bu){const n=bu[e];if(!n)continue;const{isEnabled:i,Feature:s}=n;if(!this.features[e]&&s&&i(this.props)&&(this.features[e]=new s(this)),this.features[e]){const r=this.features[e];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):hn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<qI.length;i++){const s=qI[i];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const r="on"+s,a=e[r];a&&(this.propEventSubscriptions[s]=this.on(s,a))}this.prevMotionValues=xz(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=wu(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){var s;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(s=this.getBaseTargetFromProps(this.props,e))!=null?s:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(iP(i)||rP(i))?i=parseFloat(i):!NG(i)&&ia.test(n)&&(i=BP(e,n)),this.setBaseTarget(e,si(i)?i.get():i)),si(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var r;const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const a=ww(this.props,n,(r=this.presenceContext)==null?void 0:r.custom);a&&(i=a[e])}if(n&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!si(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new ZT),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){mw.render(this.render)}}class hD extends _z{constructor(){super(...arguments),this.KeyframeResolver=vG}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;si(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function fD(t,{style:e,vars:n},i,s){const r=t.style;let a;for(a in e)r[a]=e[a];s==null||s.applyProjectionStyles(r,i);for(a in n)r.setProperty(a,n[a])}function Tz(t){return window.getComputedStyle(t)}class wz extends hD{constructor(){super(...arguments),this.type="html",this.renderInstance=fD}readValueFromInstance(e,n){var i;if(Ju.has(n))return(i=this.projection)!=null&&i.isProjecting?o_(n):Uj(e,n);{const s=Tz(e),r=(nw(n)?s.getPropertyValue(n):s[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return uD(e,n)}build(e,n,i){xw(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return bw(e,n,i)}}const mD=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function bz(t,e,n,i){fD(t,e,void 0,i);for(const s in e.attrs)t.setAttribute(mD.has(s)?s:Ew(s),e.attrs[s])}class Ez extends hD{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=hn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ju.has(n)){const i=FP(n);return i&&i.default||0}return n=mD.has(n)?n:Ew(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return iD(e,n,i)}build(e,n,i){ZP(e,n,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,n,i,s){bz(e,n,i,s)}mount(e){this.isSVGTag=tD(e.tagName),super.mount(e)}}const Sz=(t,e)=>Tw(t)?new Ez(e):new wz(e,{allowProjection:t!==K.Fragment});function du(t,e,n){const i=t.getProps();return ww(i,e,n!==void 0?n:i.custom,t)}const g_=t=>Array.isArray(t);function Az(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,wu(n))}function Cz(t){return g_(t)?t[t.length-1]||0:t}function Iz(t,e){let a=du(t,e)||{},{transitionEnd:i={},transition:s={}}=a,r=mi(a,["transitionEnd","transition"]);r=J(J({},r),i);for(const c in r){const u=Cz(r[c]);Az(t,c,u)}}function Rz(t){return!!(si(t)&&t.add)}function y_(t,e){const n=t.getValue("willChange");if(Rz(n))return n.add(e);if(!n&&zr.WillChange){const i=new zr.WillChange("auto");t.addValue("willChange",i),i.add(e)}}function pD(t){return t.props[sD]}const Nz=t=>t!==null;function Mz(t,{repeat:e,repeatType:n="loop"},i){const s=t.filter(Nz),r=e&&n!=="loop"&&e%2===1?0:s.length-1;return s[r]}const Pz={type:"spring",stiffness:500,damping:25,restSpeed:10},Dz=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),kz={type:"keyframes",duration:.8},Vz={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Lz=(t,{keyframes:e})=>e.length>2?kz:Ju.has(t)?t.startsWith("scale")?Dz(e[1]):Pz:Vz;function Uz(x){var T=x,{when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:s,repeat:r,repeatType:a,repeatDelay:c,from:u,elapsed:h}=T,g=mi(T,["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"]);return!!Object.keys(g).length}const Sw=(t,e,n,i={},s,r)=>a=>{const c=hw(i,t)||{},u=c.delay||i.delay||0;let{elapsed:h=0}=i;h=h-er(u);const g=pe(J({keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity()},c),{delay:-h,onUpdate:T=>{e.set(T),c.onUpdate&&c.onUpdate(T)},onComplete:()=>{a(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:r?void 0:s});Uz(c)||Object.assign(g,Lz(t,g)),g.duration&&(g.duration=er(g.duration)),g.repeatDelay&&(g.repeatDelay=er(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let x=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(d_(g),g.delay===0&&(x=!0)),(zr.instantAnimations||zr.skipAnimations)&&(x=!0,d_(g),g.delay=0),g.allowFlatten=!c.type&&!c.ease,x&&!r&&e.get()!==void 0){const T=Mz(g.keyframes,c);if(T!==void 0){Jt.update(()=>{g.onUpdate(T),g.onComplete()});return}}return c.isSync?new uw(g):new oG(g)};function Oz({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function gD(t,e,{delay:n=0,transitionOverride:i,type:s}={}){var x;let g=e,{transition:r=t.getDefaultTransition(),transitionEnd:a}=g,c=mi(g,["transition","transitionEnd"]);i&&(r=i);const u=[],h=s&&t.animationState&&t.animationState.getState()[s];for(const T in c){const b=t.getValue(T,(x=t.latestValues[T])!=null?x:null),S=c[T];if(S===void 0||h&&Oz(h,T))continue;const P=J({delay:n},hw(r||{},T)),M=b.get();if(M!==void 0&&!b.isAnimating&&!Array.isArray(S)&&S===M&&!P.velocity)continue;let V=!1;if(window.MotionHandoffAnimation){const O=pD(t);if(O){const z=window.MotionHandoffAnimation(O,T,Jt);z!==null&&(P.startTime=z,V=!0)}}y_(t,T),b.start(Sw(T,b,S,t.shouldReduceMotion&&LP.has(T)?{type:!1}:P,t,V));const q=b.animation;q&&u.push(q)}return a&&Promise.all(u).then(()=>{Jt.update(()=>{a&&Iz(t,a)})}),u}function yD(t,e,n,i=0,s=1){const r=Array.from(t).sort((h,g)=>h.sortNodePosition(g)).indexOf(e),a=t.size,c=(a-1)*i;return typeof n=="function"?n(r,a):s===1?r*i:c-r*i}function v_(t,e,n={}){var u;const i=du(t,e,n.type==="exit"?(u=t.presenceContext)==null?void 0:u.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const r=i?()=>Promise.all(gD(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:g=0,staggerChildren:x,staggerDirection:T}=s;return Fz(t,e,h,g,x,T,n)}:()=>Promise.resolve(),{when:c}=s;if(c){const[h,g]=c==="beforeChildren"?[r,a]:[a,r];return h().then(()=>g())}else return Promise.all([r(),a(n.delay)])}function Fz(t,e,n=0,i=0,s=0,r=1,a){const c=[];for(const u of t.variantChildren)u.notify("AnimationStart",e),c.push(v_(u,e,pe(J({},a),{delay:n+(typeof i=="function"?0:i)+yD(t.variantChildren,u,i,s,r)})).then(()=>u.notify("AnimationComplete",e)));return Promise.all(c)}function Bz(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const s=e.map(r=>v_(t,r,n));i=Promise.all(s)}else if(typeof e=="string")i=v_(t,e,n);else{const s=typeof e=="function"?du(t,e,n.custom):e;i=Promise.all(gD(t,s,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}function vD(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}const qz=vw.length;function xD(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?xD(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<qz;n++){const i=vw[n],s=t.props[i];(vf(s)||s===!1)&&(e[i]=s)}return e}const jz=[...yw].reverse(),Gz=yw.length;function zz(t){return e=>Promise.all(e.map(({animation:n,options:i})=>Bz(t,n,i)))}function Hz(t){let e=zz(t),n=jI(),i=!0;const s=u=>(h,g)=>{var T;const x=du(t,g,u==="exit"?(T=t.presenceContext)==null?void 0:T.custom:void 0);if(x){const b=x,{transition:S,transitionEnd:P}=b,M=mi(b,["transition","transitionEnd"]);h=J(J(J({},h),M),P)}return h};function r(u){e=u(t)}function a(u){const{props:h}=t,g=xD(t.parent)||{},x=[],T=new Set;let b={},S=1/0;for(let M=0;M<Gz;M++){const V=jz[M],q=n[V],O=h[V]!==void 0?h[V]:g[V],z=vf(O),j=V===u?q.isActive:null;j===!1&&(S=M);let W=O===g[V]&&O!==h[V]&&z;if(W&&i&&t.manuallyAnimateOnMount&&(W=!1),q.protectedKeys=J({},b),!q.isActive&&j===null||!O&&!q.prevProp||my(O)||typeof O=="boolean")continue;const D=$z(q.prevProp,O);let C=D||V===u&&q.isActive&&!W&&z||M>S&&z,R=!1;const L=Array.isArray(O)?O:[O];let F=L.reduce(s(V),{});j===!1&&(F={});const{prevResolvedValues:G={}}=q,B=J(J({},G),F),ye=de=>{C=!0,T.has(de)&&(R=!0,T.delete(de)),q.needsAnimating[de]=!0;const ie=t.getValue(de);ie&&(ie.liveStyle=!1)};for(const de in B){const ie=F[de],Ie=G[de];if(b.hasOwnProperty(de))continue;let H=!1;g_(ie)&&g_(Ie)?H=!vD(ie,Ie):H=ie!==Ie,H?ie!=null?ye(de):T.add(de):ie!==void 0&&T.has(de)?ye(de):q.protectedKeys[de]=!0}q.prevProp=O,q.prevResolvedValues=F,q.isActive&&(b=J(J({},b),F)),i&&t.blockInitialAnimation&&(C=!1);const Ae=W&&D;C&&(!Ae||R)&&x.push(...L.map(de=>{const ie={type:V};if(typeof de=="string"&&i&&!Ae&&t.manuallyAnimateOnMount&&t.parent){const{parent:Ie}=t,H=du(Ie,de);if(Ie.enteringChildren&&H){const{delayChildren:le}=H.transition||{};ie.delay=yD(Ie.enteringChildren,t,le)}}return{animation:de,options:ie}}))}if(T.size){const M={};if(typeof h.initial!="boolean"){const V=du(t,Array.isArray(h.initial)?h.initial[0]:h.initial);V&&V.transition&&(M.transition=V.transition)}T.forEach(V=>{const q=t.getBaseTarget(V),O=t.getValue(V);O&&(O.liveStyle=!0),M[V]=q!=null?q:null}),x.push({animation:M})}let P=!!x.length;return i&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(P=!1),i=!1,P?e(x):Promise.resolve()}function c(u,h){var x;if(n[u].isActive===h)return Promise.resolve();(x=t.variantChildren)==null||x.forEach(T=>{var b;return(b=T.animationState)==null?void 0:b.setActive(u,h)}),n[u].isActive=h;const g=a(u);for(const T in n)n[T].protectedKeys={};return g}return{animateChanges:a,setActive:c,setAnimateFunction:r,getState:()=>n,reset:()=>{n=jI(),i=!0}}}function $z(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!vD(e,t):!1}function Za(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function jI(){return{animate:Za(!0),whileInView:Za(),whileHover:Za(),whileTap:Za(),whileDrag:Za(),whileFocus:Za(),exit:Za()}}class pa{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Kz extends pa{constructor(e){super(e),e.animationState||(e.animationState=Hz(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();my(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let Wz=0;class Yz extends pa{constructor(){super(...arguments),this.id=Wz++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Jz={animation:{Feature:Kz},exit:{Feature:Yz}};function _f(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function Kf(t){return{point:{x:t.pageX,y:t.pageY}}}const Qz=t=>e=>pw(e)&&t(e,Kf(e));function Wh(t,e,n,i){return _f(t,e,Qz(n),i)}const _D=1e-4,Xz=1-_D,Zz=1+_D,TD=.01,e8=0-TD,t8=0+TD;function yi(t){return t.max-t.min}function n8(t,e,n){return Math.abs(t-e)<=n}function GI(t,e,n,i=.5){t.origin=i,t.originPoint=Xt(e.min,e.max,t.origin),t.scale=yi(n)/yi(e),t.translate=Xt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Xz&&t.scale<=Zz||isNaN(t.scale))&&(t.scale=1),(t.translate>=e8&&t.translate<=t8||isNaN(t.translate))&&(t.translate=0)}function Yh(t,e,n,i){GI(t.x,e.x,n.x,i?i.originX:void 0),GI(t.y,e.y,n.y,i?i.originY:void 0)}function zI(t,e,n){t.min=n.min+e.min,t.max=t.min+yi(e)}function i8(t,e,n){zI(t.x,e.x,n.x),zI(t.y,e.y,n.y)}function HI(t,e,n){t.min=e.min-n.min,t.max=t.min+yi(e)}function Jh(t,e,n){HI(t.x,e.x,n.x),HI(t.y,e.y,n.y)}function as(t){return[t("x"),t("y")]}const wD=({current:t})=>t?t.ownerDocument.defaultView:null,$I=(t,e)=>Math.abs(t-e);function s8(t,e){const n=$I(t.x,e.x),i=$I(t.y,e.y);return Math.sqrt(Gv(n,2)+Gv(i,2))}class bD{constructor(e,n,{transformPagePoint:i,contextWindow:s=window,dragSnapToOrigin:r=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=wx(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,S=s8(T.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!S)return;const{point:P}=T,{timestamp:M}=Kn;this.history.push(pe(J({},P),{timestamp:M}));const{onStart:V,onMove:q}=this.handlers;b||(V&&V(this.lastMoveEvent,T),this.startEvent=this.lastMoveEvent),q&&q(this.lastMoveEvent,T)},this.handlePointerMove=(T,b)=>{this.lastMoveEvent=T,this.lastMoveEventInfo=Tx(b,this.transformPagePoint),Jt.update(this.updatePoint,!0)},this.handlePointerUp=(T,b)=>{this.end();const{onEnd:S,onSessionEnd:P,resumeAnimation:M}=this.handlers;if(this.dragSnapToOrigin&&M&&M(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const V=wx(T.type==="pointercancel"?this.lastMoveEventInfo:Tx(b,this.transformPagePoint),this.history);this.startEvent&&S&&S(T,V),P&&P(T,V)},!pw(e))return;this.dragSnapToOrigin=r,this.handlers=n,this.transformPagePoint=i,this.distanceThreshold=a,this.contextWindow=s||window;const c=Kf(e),u=Tx(c,this.transformPagePoint),{point:h}=u,{timestamp:g}=Kn;this.history=[pe(J({},h),{timestamp:g})];const{onSessionStart:x}=n;x&&x(e,wx(u,this.history)),this.removeListeners=zf(Wh(this.contextWindow,"pointermove",this.handlePointerMove),Wh(this.contextWindow,"pointerup",this.handlePointerUp),Wh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),na(this.updatePoint)}}function Tx(t,e){return e?{point:e(t.point)}:t}function KI(t,e){return{x:t.x-e.x,y:t.y-e.y}}function wx({point:t},e){return{point:t,delta:KI(t,ED(e)),offset:KI(t,r8(e)),velocity:o8(e,.1)}}function r8(t){return t[0]}function ED(t){return t[t.length-1]}function o8(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const s=ED(t);for(;n>=0&&(i=t[n],!(s.timestamp-i.timestamp>er(e)));)n--;if(!i)return{x:0,y:0};const r=tr(s.timestamp-i.timestamp);if(r===0)return{x:0,y:0};const a={x:(s.x-i.x)/r,y:(s.y-i.y)/r};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function a8(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?Xt(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?Xt(n,t,i.max):Math.min(t,n)),t}function WI(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function l8(t,{top:e,left:n,bottom:i,right:s}){return{x:WI(t.x,n,s),y:WI(t.y,e,i)}}function YI(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function c8(t,e){return{x:YI(t.x,e.x),y:YI(t.y,e.y)}}function u8(t,e){let n=.5;const i=yi(t),s=yi(e);return s>i?n=pf(e.min,e.max-i,t.min):i>s&&(n=pf(t.min,t.max-s,e.min)),Gr(0,1,n)}function d8(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const x_=.35;function h8(t=x_){return t===!1?t=0:t===!0&&(t=x_),{x:JI(t,"left","right"),y:JI(t,"top","bottom")}}function JI(t,e,n){return{min:QI(t,e),max:QI(t,n)}}function QI(t,e){return typeof t=="number"?t:t[e]||0}const f8=new WeakMap;class m8{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=hn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:i}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const r=x=>{const{dragSnapToOrigin:T}=this.getProps();T?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Kf(x).point)},a=(x,T)=>{const{drag:b,dragPropagation:S,onDragStart:P}=this.getProps();if(b&&!S&&(this.openDragLock&&this.openDragLock(),this.openDragLock=wG(b),!this.openDragLock))return;this.latestPointerEvent=x,this.latestPanInfo=T,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),as(V=>{let q=this.getAxisMotionValue(V).get()||0;if(nr.test(q)){const{projection:O}=this.visualElement;if(O&&O.layout){const z=O.layout.layoutBox[V];z&&(q=yi(z)*(parseFloat(q)/100))}}this.originPoint[V]=q}),P&&Jt.postRender(()=>P(x,T)),y_(this.visualElement,"transform");const{animationState:M}=this.visualElement;M&&M.setActive("whileDrag",!0)},c=(x,T)=>{this.latestPointerEvent=x,this.latestPanInfo=T;const{dragPropagation:b,dragDirectionLock:S,onDirectionLock:P,onDrag:M}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:V}=T;if(S&&this.currentDirection===null){this.currentDirection=p8(V),this.currentDirection!==null&&P&&P(this.currentDirection);return}this.updateAxis("x",T.point,V),this.updateAxis("y",T.point,V),this.visualElement.render(),M&&M(x,T)},u=(x,T)=>{this.latestPointerEvent=x,this.latestPanInfo=T,this.stop(x,T),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>as(x=>{var T;return this.getAnimationState(x)==="paused"&&((T=this.getAxisMotionValue(x).animation)==null?void 0:T.play())}),{dragSnapToOrigin:g}=this.getProps();this.panSession=new bD(e,{onSessionStart:r,onStart:a,onMove:c,onSessionEnd:u,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:i,contextWindow:wD(this.visualElement)})}stop(e,n){const i=e||this.latestPointerEvent,s=n||this.latestPanInfo,r=this.isDragging;if(this.cancel(),!r||!s||!i)return;const{velocity:a}=s;this.startAnimation(a);const{onDragEnd:c}=this.getProps();c&&Jt.postRender(()=>c(i,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:s}=this.getProps();if(!i||!Lp(e,s,this.currentDirection))return;const r=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=a8(a,this.constraints[e],this.elastic[e])),r.set(a)}resolveConstraints(){var r;const{dragConstraints:e,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(r=this.visualElement.projection)==null?void 0:r.layout,s=this.constraints;e&&eu(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=l8(i.layoutBox,e):this.constraints=!1,this.elastic=h8(n),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&as(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=d8(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!eu(e))return!1;const i=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const r=gz(i,s.root,this.visualElement.getTransformPagePoint());let a=c8(s.layout.layoutBox,r);if(n){const c=n(fz(a));this.hasMutatedConstraints=!!c,c&&(a=aD(c))}return a}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:s,dragTransition:r,dragSnapToOrigin:a,onDragTransitionEnd:c}=this.getProps(),u=this.constraints||{},h=as(g=>{if(!Lp(g,n,this.currentDirection))return;let x=u&&u[g]||{};a&&(x={min:0,max:0});const T=s?200:1e6,b=s?40:1e7,S=J(J({type:"inertia",velocity:i?e[g]:0,bounceStiffness:T,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10},r),x);return this.startAxisValueAnimation(g,S)});return Promise.all(h).then(c)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return y_(this.visualElement,e),i.start(Sw(e,i,0,n,this.visualElement,!1))}stopAnimation(){as(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){as(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),s=i[n];return s||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){as(n=>{const{drag:i}=this.getProps();if(!Lp(n,i,this.currentDirection))return;const{projection:s}=this.visualElement,r=this.getAxisMotionValue(n);if(s&&s.layout){const{min:a,max:c}=s.layout.layoutBox[n];r.set(e[n]-Xt(a,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!eu(n)||!i||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};as(a=>{const c=this.getAxisMotionValue(a);if(c&&this.constraints!==!1){const u=c.get();s[a]=u8({min:u,max:u},this.constraints[a])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),as(a=>{if(!Lp(a,e,null))return;const c=this.getAxisMotionValue(a),{min:u,max:h}=this.constraints[a];c.set(Xt(u,h,s[a]))})}addListeners(){if(!this.visualElement.current)return;f8.set(this.visualElement,this);const e=this.visualElement.current,n=Wh(e,"pointerdown",u=>{const{drag:h,dragListener:g=!0}=this.getProps();h&&g&&this.start(u)}),i=()=>{const{dragConstraints:u}=this.getProps();eu(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,r=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Jt.read(i);const a=_f(window,"resize",()=>this.scalePositionWithinConstraints()),c=s.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:h})=>{this.isDragging&&h&&(as(g=>{const x=this.getAxisMotionValue(g);x&&(this.originPoint[g]+=u[g].translate,x.set(x.get()+u[g].translate))}),this.visualElement.render())}));return()=>{a(),n(),r(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:s=!1,dragConstraints:r=!1,dragElastic:a=x_,dragMomentum:c=!0}=e;return pe(J({},e),{drag:n,dragDirectionLock:i,dragPropagation:s,dragConstraints:r,dragElastic:a,dragMomentum:c})}}function Lp(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function p8(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class g8 extends pa{constructor(e){super(e),this.removeGroupControls=cs,this.removeListeners=cs,this.controls=new m8(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||cs}unmount(){this.removeGroupControls(),this.removeListeners()}}const XI=t=>(e,n)=>{t&&Jt.postRender(()=>t(e,n))};class y8 extends pa{constructor(){super(...arguments),this.removePointerDownListener=cs}onPointerDown(e){this.session=new bD(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:wD(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:s}=this.node.getProps();return{onSessionStart:XI(e),onStart:XI(n),onMove:i,onEnd:(r,a)=>{delete this.session,s&&Jt.postRender(()=>s(r,a))}}}mount(){this.removePointerDownListener=Wh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const ng={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ZI(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Th={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Qe.test(t))t=parseFloat(t);else return t;const n=ZI(t,e.target.x),i=ZI(t,e.target.y);return`${n}% ${i}%`}},v8={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,s=ia.parse(t);if(s.length>5)return i;const r=ia.createTransformer(t),a=typeof s[0]!="number"?1:0,c=n.x.scale*e.x,u=n.y.scale*e.y;s[0+a]/=c,s[1+a]/=u;const h=Xt(c,u,.5);return typeof s[2+a]=="number"&&(s[2+a]/=h),typeof s[3+a]=="number"&&(s[3+a]/=h),r(s)}};let bx=!1;class x8 extends K.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:s}=this.props,{projection:r}=e;qG(_8),r&&(n.group&&n.group.add(r),i&&i.register&&s&&i.register(r),bx&&r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions(pe(J({},r.options),{onExitComplete:()=>this.safeToRemove()}))),ng.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:s,isPresent:r}=this.props,{projection:a}=i;return a&&(a.isPresent=r,bx=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==r?a.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?a.promote():a.relegate()||Jt.postRender(()=>{const c=a.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),mw.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:s}=e;bx=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),i&&i.deregister&&i.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function SD(t){const[e,n]=KP(),i=K.useContext($T);return y.jsx(x8,pe(J({},t),{layoutGroup:i,switchLayoutGroup:K.useContext(rD),isPresent:e,safeToRemove:n}))}const _8={borderRadius:pe(J({},Th),{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:Th,borderTopRightRadius:Th,borderBottomLeftRadius:Th,borderBottomRightRadius:Th,boxShadow:v8};function T8(t,e,n){const i=si(t)?t:wu(t);return i.start(Sw("",i,e,n)),i.animation}const w8=(t,e)=>t.depth-e.depth;class b8{constructor(){this.children=[],this.isDirty=!1}add(e){YT(this.children,e),this.isDirty=!0}remove(e){JT(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(w8),this.isDirty=!1,this.children.forEach(e)}}function E8(t,e){const n=Ci.now(),i=({timestamp:s})=>{const r=s-n;r>=e&&(na(i),t(r-e))};return Jt.setup(i,!0),()=>na(i)}const AD=["TopLeft","TopRight","BottomLeft","BottomRight"],S8=AD.length,e1=t=>typeof t=="string"?parseFloat(t):t,t1=t=>typeof t=="number"||Qe.test(t);function A8(t,e,n,i,s,r){var a,c,u,h;s?(t.opacity=Xt(0,(a=n.opacity)!=null?a:1,C8(i)),t.opacityExit=Xt((c=e.opacity)!=null?c:1,0,I8(i))):r&&(t.opacity=Xt((u=e.opacity)!=null?u:1,(h=n.opacity)!=null?h:1,i));for(let g=0;g<S8;g++){const x=`border${AD[g]}Radius`;let T=n1(e,x),b=n1(n,x);if(T===void 0&&b===void 0)continue;T||(T=0),b||(b=0),T===0||b===0||t1(T)===t1(b)?(t[x]=Math.max(Xt(e1(T),e1(b),i),0),(nr.test(b)||nr.test(T))&&(t[x]+="%")):t[x]=b}(e.rotate||n.rotate)&&(t.rotate=Xt(e.rotate||0,n.rotate||0,i))}function n1(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const C8=CD(0,.5,fP),I8=CD(.5,.95,cs);function CD(t,e,n){return i=>i<t?0:i>e?1:n(pf(t,e,i))}function i1(t,e){t.min=e.min,t.max=e.max}function os(t,e){i1(t.x,e.x),i1(t.y,e.y)}function s1(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function r1(t,e,n,i,s){return t-=e,t=Pg(t,1/n,i),s!==void 0&&(t=Pg(t,1/s,i)),t}function R8(t,e=0,n=1,i=.5,s,r=t,a=t){if(nr.test(e)&&(e=parseFloat(e),e=Xt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let c=Xt(r.min,r.max,i);t===r&&(c-=e),t.min=r1(t.min,e,n,c,s),t.max=r1(t.max,e,n,c,s)}function o1(t,e,[n,i,s],r,a){R8(t,e[n],e[i],e[s],e.scale,r,a)}const N8=["x","scaleX","originX"],M8=["y","scaleY","originY"];function a1(t,e,n,i){o1(t.x,e,N8,n?n.x:void 0,i?i.x:void 0),o1(t.y,e,M8,n?n.y:void 0,i?i.y:void 0)}function l1(t){return t.translate===0&&t.scale===1}function ID(t){return l1(t.x)&&l1(t.y)}function c1(t,e){return t.min===e.min&&t.max===e.max}function P8(t,e){return c1(t.x,e.x)&&c1(t.y,e.y)}function u1(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function RD(t,e){return u1(t.x,e.x)&&u1(t.y,e.y)}function d1(t){return yi(t.x)/yi(t.y)}function h1(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class D8{constructor(){this.members=[]}add(e){YT(this.members,e),e.scheduleRender()}remove(e){if(JT(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let i;for(let s=n;s>=0;s--){const r=this.members[s];if(r.isPresent!==!1){i=r;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function k8(t,e,n){let i="";const s=t.x.translate/e.x,r=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((s||r||a)&&(i=`translate3d(${s}px, ${r}px, ${a}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:h,rotate:g,rotateX:x,rotateY:T,skewX:b,skewY:S}=n;h&&(i=`perspective(${h}px) ${i}`),g&&(i+=`rotate(${g}deg) `),x&&(i+=`rotateX(${x}deg) `),T&&(i+=`rotateY(${T}deg) `),b&&(i+=`skewX(${b}deg) `),S&&(i+=`skewY(${S}deg) `)}const c=t.x.scale*e.x,u=t.y.scale*e.y;return(c!==1||u!==1)&&(i+=`scale(${c}, ${u})`),i||"none"}const Ex=["","X","Y","Z"],V8=1e3;let L8=0;function Sx(t,e,n,i){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),i&&(i[t]=0))}function ND(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=pD(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:r}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Jt,!(s||r))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&ND(i)}function MD({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(a={},c=e==null?void 0:e()){this.id=L8++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(F8),this.nodes.forEach(G8),this.nodes.forEach(z8),this.nodes.forEach(B8)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new b8)}addEventListener(a,c){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new ZT),this.eventHandlers.get(a).add(c)}notifyListeners(a,...c){const u=this.eventHandlers.get(a);u&&u.notify(...c)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=$P(a)&&!IG(a),this.instance=a;const{layoutId:c,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||c)&&(this.isLayoutDirty=!0),t){let g,x=0;const T=()=>this.root.updateBlockedByResize=!1;Jt.read(()=>{x=window.innerWidth}),t(a,()=>{const b=window.innerWidth;b!==x&&(x=b,this.root.updateBlockedByResize=!0,g&&g(),g=E8(T,250),ng.hasAnimatedSinceResize&&(ng.hasAnimatedSinceResize=!1,this.nodes.forEach(p1)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||u)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:x,hasRelativeLayoutChanged:T,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const S=this.options.transition||h.getDefaultTransition()||Y8,{onLayoutAnimationStart:P,onLayoutAnimationComplete:M}=h.getProps(),V=!this.targetLayout||!RD(this.targetLayout,b),q=!x&&T;if(this.options.layoutRoot||this.resumeFrom||q||x&&(V||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const O=pe(J({},hw(S,"layout")),{onPlay:P,onComplete:M});(h.shouldReduceMotion||this.options.layoutRoot)&&(O.delay=0,O.type=!1),this.startAnimation(O),this.setAnimationOrigin(g,q)}else x||p1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),na(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(H8),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&ND(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const x=this.path[g];x.shouldResetTransform=!0,x.updateScroll("snapshot"),x.options.layoutRoot&&x.willUpdate(!1)}const{layoutId:c,layout:u}=this.options;if(c===void 0&&!u)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(f1);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(m1);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(j8),this.nodes.forEach(U8),this.nodes.forEach(O8)):this.nodes.forEach(m1),this.clearAllSnapshots();const c=Ci.now();Kn.delta=Gr(0,1e3/60,c-Kn.timestamp),Kn.timestamp=c,Kn.isProcessing=!0,fx.update.process(Kn),fx.preRender.process(Kn),fx.render.process(Kn),Kn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,mw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(q8),this.sharedNodes.forEach($8)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Jt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Jt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!yi(this.snapshot.measuredBox.x)&&!yi(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=hn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(c=!1),c&&this.instance){const u=i(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!ID(this.projectionDelta),u=this.getTransformTemplate(),h=u?u(this.latestValues,""):void 0,g=h!==this.prevTransformTemplateValue;a&&this.instance&&(c||il(this.latestValues)||g)&&(s(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const c=this.measurePageBox();let u=this.removeElementScroll(c);return a&&(u=this.removeTransform(u)),J8(u),{animationId:this.root.animationId,measuredBox:c,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var h;const{visualElement:a}=this.options;if(!a)return hn();const c=a.measureViewportBox();if(!(((h=this.scroll)==null?void 0:h.wasRoot)||this.path.some(Q8))){const{scroll:g}=this.root;g&&(tu(c.x,g.offset.x),tu(c.y,g.offset.y))}return c}removeElementScroll(a){var u;const c=hn();if(os(c,a),(u=this.scroll)!=null&&u.wasRoot)return c;for(let h=0;h<this.path.length;h++){const g=this.path[h],{scroll:x,options:T}=g;g!==this.root&&x&&T.layoutScroll&&(x.wasRoot&&os(c,a),tu(c.x,x.offset.x),tu(c.y,x.offset.y))}return c}applyTransform(a,c=!1){const u=hn();os(u,a);for(let h=0;h<this.path.length;h++){const g=this.path[h];!c&&g.options.layoutScroll&&g.scroll&&g!==g.root&&nu(u,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),il(g.latestValues)&&nu(u,g.latestValues)}return il(this.latestValues)&&nu(u,this.latestValues),u}removeTransform(a){const c=hn();os(c,a);for(let u=0;u<this.path.length;u++){const h=this.path[u];if(!h.instance||!il(h.latestValues))continue;f_(h.latestValues)&&h.updateSnapshot();const g=hn(),x=h.measurePageBox();os(g,x),a1(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,g)}return il(this.latestValues)&&a1(c,this.latestValues),c}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options=pe(J(J({},this.options),a),{crossfade:a.crossfade!==void 0?a.crossfade:!0})}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Kn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var T;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||(T=this.parent)!=null&&T.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:x}=this.options;if(!(!this.layout||!(g||x))){if(this.resolvedRelativeTargetAt=Kn.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=hn(),this.relativeTargetOrigin=hn(),Jh(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),os(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=hn(),this.targetWithTransforms=hn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),i8(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):os(this.target,this.layout.layoutBox),cD(this.target,this.targetDelta)):os(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=hn(),this.relativeTargetOrigin=hn(),Jh(this.relativeTargetOrigin,this.target,b.target),os(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||f_(this.parent.latestValues)||lD(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var S;const a=this.getLead(),c=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||(S=this.parent)!=null&&S.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Kn.timestamp&&(u=!1),u)return;const{layout:h,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||g))return;os(this.layoutCorrected,this.layout.layoutBox);const x=this.treeScale.x,T=this.treeScale.y;pz(this.layoutCorrected,this.treeScale,this.path,c),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=hn());const{target:b}=a;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(s1(this.prevProjectionDelta.x,this.projectionDelta.x),s1(this.prevProjectionDelta.y,this.projectionDelta.y)),Yh(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==x||this.treeScale.y!==T||!h1(this.projectionDelta.x,this.prevProjectionDelta.x)||!h1(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var c;if((c=this.options.visualElement)==null||c.scheduleRender(),a){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=iu(),this.projectionDelta=iu(),this.projectionDeltaWithTransform=iu()}setAnimationOrigin(a,c=!1){const u=this.snapshot,h=u?u.latestValues:{},g=J({},this.latestValues),x=iu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const T=hn(),b=u?u.source:void 0,S=this.layout?this.layout.source:void 0,P=b!==S,M=this.getStack(),V=!M||M.members.length<=1,q=!!(P&&!V&&this.options.crossfade===!0&&!this.path.some(W8));this.animationProgress=0;let O;this.mixTargetDelta=z=>{const j=z/1e3;g1(x.x,a.x,j),g1(x.y,a.y,j),this.setTargetDelta(x),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Jh(T,this.layout.layoutBox,this.relativeParent.layout.layoutBox),K8(this.relativeTarget,this.relativeTargetOrigin,T,j),O&&P8(this.relativeTarget,O)&&(this.isProjectionDirty=!1),O||(O=hn()),os(O,this.relativeTarget)),P&&(this.animationValues=g,A8(g,h,this.latestValues,j,q,V)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var c,u,h;this.notifyListeners("animationStart"),(c=this.currentAnimation)==null||c.stop(),(h=(u=this.resumingFrom)==null?void 0:u.currentAnimation)==null||h.stop(),this.pendingAnimation&&(na(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Jt.update(()=>{ng.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=wu(0)),this.currentAnimation=T8(this.motionValue,[0,1e3],pe(J({},a),{velocity:0,isSync:!0,onUpdate:g=>{this.mixTargetDelta(g),a.onUpdate&&a.onUpdate(g)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}})),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(V8),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:c,target:u,layout:h,latestValues:g}=a;if(!(!c||!u||!h)){if(this!==a&&this.layout&&h&&PD(this.options.animationType,this.layout.layoutBox,h.layoutBox)){u=this.target||hn();const x=yi(this.layout.layoutBox.x);u.x.min=a.target.x.min,u.x.max=u.x.min+x;const T=yi(this.layout.layoutBox.y);u.y.min=a.target.y.min,u.y.max=u.y.min+T}os(c,u),nu(c,g),Yh(this.projectionDeltaWithTransform,this.layoutCorrected,c,g)}}registerSharedNode(a,c){this.sharedNodes.has(a)||this.sharedNodes.set(a,new D8),this.sharedNodes.get(a).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var c;const{layoutId:a}=this.options;return a?((c=this.getStack())==null?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:a}=this.options;return a?(c=this.getStack())==null?void 0:c.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:c,preserveFollowOpacity:u}={}){const h=this.getStack();h&&h.promote(this,u),a&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let c=!1;const{latestValues:u}=a;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(c=!0),!c)return;const h={};u.z&&Sx("z",a,h,this.animationValues);for(let g=0;g<Ex.length;g++)Sx(`rotate${Ex[g]}`,a,h,this.animationValues),Sx(`skew${Ex[g]}`,a,h,this.animationValues);a.render();for(const g in h)a.setStaticValue(g,h[g]),this.animationValues&&(this.animationValues[g]=h[g]);a.scheduleRender()}applyProjectionStyles(a,c){var S,P;if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=tg(c==null?void 0:c.pointerEvents)||"",a.transform=u?u(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=tg(c==null?void 0:c.pointerEvents)||""),this.hasProjected&&!il(this.latestValues)&&(a.transform=u?u({},""):"none",this.hasProjected=!1);return}a.visibility="";const g=h.animationValues||h.latestValues;this.applyTransformsToTarget();let x=k8(this.projectionDeltaWithTransform,this.treeScale,g);u&&(x=u(g,x)),a.transform=x;const{x:T,y:b}=this.projectionDelta;a.transformOrigin=`${T.origin*100}% ${b.origin*100}% 0`,h.animationValues?a.opacity=h===this?(P=(S=g.opacity)!=null?S:this.latestValues.opacity)!=null?P:1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:a.opacity=h===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const M in xf){if(g[M]===void 0)continue;const{correct:V,applyTo:q,isCSSVariable:O}=xf[M],z=x==="none"?g[M]:V(g[M],h);if(q){const j=q.length;for(let W=0;W<j;W++)a[q[W]]=z}else O?this.options.visualElement.renderState.vars[M]=z:a[M]=z}this.options.layoutId&&(a.pointerEvents=h===this?tg(c==null?void 0:c.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var c;return(c=a.currentAnimation)==null?void 0:c.stop()}),this.root.nodes.forEach(f1),this.root.sharedNodes.clear()}}}function U8(t){t.updateLayout()}function O8(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:s}=t.layout,{animationType:r}=t.options,a=e.source!==t.layout.source;r==="size"?as(x=>{const T=a?e.measuredBox[x]:e.layoutBox[x],b=yi(T);T.min=i[x].min,T.max=T.min+b}):PD(r,e.layoutBox,i)&&as(x=>{const T=a?e.measuredBox[x]:e.layoutBox[x],b=yi(i[x]);T.max=T.min+b,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[x].max=t.relativeTarget[x].min+b)});const c=iu();Yh(c,i,e.layoutBox);const u=iu();a?Yh(u,t.applyTransform(s,!0),e.measuredBox):Yh(u,i,e.layoutBox);const h=!ID(c);let g=!1;if(!t.resumeFrom){const x=t.getClosestProjectingParent();if(x&&!x.resumeFrom){const{snapshot:T,layout:b}=x;if(T&&b){const S=hn();Jh(S,e.layoutBox,T.layoutBox);const P=hn();Jh(P,i,b.layoutBox),RD(S,P)||(g=!0),x.options.layoutRoot&&(t.relativeTarget=P,t.relativeTargetOrigin=S,t.relativeParent=x)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:e,delta:u,layoutDelta:c,hasLayoutChanged:h,hasRelativeLayoutChanged:g})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function F8(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function B8(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function q8(t){t.clearSnapshot()}function f1(t){t.clearMeasurements()}function m1(t){t.isLayoutDirty=!1}function j8(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function p1(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function G8(t){t.resolveTargetDelta()}function z8(t){t.calcProjection()}function H8(t){t.resetSkewAndRotation()}function $8(t){t.removeLeadSnapshot()}function g1(t,e,n){t.translate=Xt(e.translate,0,n),t.scale=Xt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function y1(t,e,n,i){t.min=Xt(e.min,n.min,i),t.max=Xt(e.max,n.max,i)}function K8(t,e,n,i){y1(t.x,e.x,n.x,i),y1(t.y,e.y,n.y,i)}function W8(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Y8={duration:.45,ease:[.4,0,.1,1]},v1=t=>typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),x1=v1("applewebkit/")&&!v1("chrome/")?Math.round:cs;function _1(t){t.min=x1(t.min),t.max=x1(t.max)}function J8(t){_1(t.x),_1(t.y)}function PD(t,e,n){return t==="position"||t==="preserve-aspect"&&!n8(d1(e),d1(n),.2)}function Q8(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const X8=MD({attachResizeListener:(t,e)=>_f(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ax={current:void 0},DD=MD({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Ax.current){const t=new X8({});t.mount(window),t.setOptions({layoutScroll:!0}),Ax.current=t}return Ax.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Z8={pan:{Feature:y8},drag:{Feature:g8,ProjectionNode:DD,MeasureLayout:SD}};function T1(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,r=i[s];r&&Jt.postRender(()=>r(e,Kf(e)))}class e7 extends pa{mount(){const{current:e}=this.node;e&&(this.unmount=bG(e,(n,i)=>(T1(this.node,i,"Start"),s=>T1(this.node,s,"End"))))}unmount(){}}class t7 extends pa{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(n){e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=zf(_f(this.node.current,"focus",()=>this.onFocus()),_f(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function w1(t,e,n){const{props:i}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),r=i[s];r&&Jt.postRender(()=>r(e,Kf(e)))}class n7 extends pa{mount(){const{current:e}=this.node;e&&(this.unmount=CG(e,(n,i)=>(w1(this.node,i,"Start"),(s,{success:r})=>w1(this.node,s,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const __=new WeakMap,Cx=new WeakMap,i7=t=>{const e=__.get(t.target);e&&e(t)},s7=t=>{t.forEach(i7)};function r7(n){var i=n,{root:t}=i,e=mi(i,["root"]);const s=t||document;Cx.has(s)||Cx.set(s,{});const r=Cx.get(s),a=JSON.stringify(e);return r[a]||(r[a]=new IntersectionObserver(s7,J({root:t},e))),r[a]}function o7(t,e,n){const i=r7(e);return __.set(t,n),i.observe(t),()=>{__.delete(t),i.unobserve(t)}}const a7={some:0,all:1};class l7 extends pa{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:s="some",once:r}=e,a={root:n?n.current:void 0,rootMargin:i,threshold:typeof s=="number"?s:a7[s]},c=u=>{const{isIntersecting:h}=u;if(this.isInView===h||(this.isInView=h,r&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:g,onViewportLeave:x}=this.node.getProps(),T=h?g:x;T&&T(u)};return o7(this.node.current,a,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver=="undefined")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(c7(e,n))&&this.startObserver()}unmount(){}}function c7({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const u7={inView:{Feature:l7},tap:{Feature:n7},focus:{Feature:t7},hover:{Feature:e7}},d7={layout:{ProjectionNode:DD,MeasureLayout:SD}},h7=J(J(J(J({},Jz),u7),Z8),d7),Ze=hz(h7,Sz);function kD(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=kD(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function f7(){for(var t,e,n=0,i="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=kD(t))&&(i&&(i+=" "),i+=e);return i}const Aw="-",m7=t=>{const e=g7(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:i}=t;return{getClassGroupId:a=>{const c=a.split(Aw);return c[0]===""&&c.length!==1&&c.shift(),VD(c,e)||p7(a)},getConflictingClassGroupIds:(a,c)=>{const u=n[a]||[];return c&&i[a]?[...u,...i[a]]:u}}},VD=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const n=t[0],i=e.nextPart.get(n),s=i?VD(t.slice(1),i):void 0;if(s)return s;if(e.validators.length===0)return;const r=t.join(Aw);return(a=e.validators.find(({validator:c})=>c(r)))==null?void 0:a.classGroupId},b1=/^\[(.+)\]$/,p7=t=>{if(b1.test(t)){const e=b1.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},g7=t=>{const{theme:e,classGroups:n}=t,i={nextPart:new Map,validators:[]};for(const s in n)T_(n[s],i,s,e);return i},T_=(t,e,n,i)=>{t.forEach(s=>{if(typeof s=="string"){const r=s===""?e:E1(e,s);r.classGroupId=n;return}if(typeof s=="function"){if(y7(s)){T_(s(i),e,n,i);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([r,a])=>{T_(a,E1(e,r),n,i)})})},E1=(t,e)=>{let n=t;return e.split(Aw).forEach(i=>{n.nextPart.has(i)||n.nextPart.set(i,{nextPart:new Map,validators:[]}),n=n.nextPart.get(i)}),n},y7=t=>t.isThemeGetter,v7=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,i=new Map;const s=(r,a)=>{n.set(r,a),e++,e>t&&(e=0,i=n,n=new Map)};return{get(r){let a=n.get(r);if(a!==void 0)return a;if((a=i.get(r))!==void 0)return s(r,a),a},set(r,a){n.has(r)?n.set(r,a):s(r,a)}}},w_="!",b_=":",x7=b_.length,_7=t=>{const{prefix:e,experimentalParseClassName:n}=t;let i=s=>{const r=[];let a=0,c=0,u=0,h;for(let S=0;S<s.length;S++){let P=s[S];if(a===0&&c===0){if(P===b_){r.push(s.slice(u,S)),u=S+x7;continue}if(P==="/"){h=S;continue}}P==="["?a++:P==="]"?a--:P==="("?c++:P===")"&&c--}const g=r.length===0?s:s.substring(u),x=T7(g),T=x!==g,b=h&&h>u?h-u:void 0;return{modifiers:r,hasImportantModifier:T,baseClassName:x,maybePostfixModifierPosition:b}};if(e){const s=e+b_,r=i;i=a=>a.startsWith(s)?r(a.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:a,maybePostfixModifierPosition:void 0}}if(n){const s=i;i=r=>n({className:r,parseClassName:s})}return i},T7=t=>t.endsWith(w_)?t.substring(0,t.length-1):t.startsWith(w_)?t.substring(1):t,w7=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(i=>[i,!0]));return i=>{if(i.length<=1)return i;const s=[];let r=[];return i.forEach(a=>{a[0]==="["||e[a]?(s.push(...r.sort(),a),r=[]):r.push(a)}),s.push(...r.sort()),s}},b7=t=>J({cache:v7(t.cacheSize),parseClassName:_7(t),sortModifiers:w7(t)},m7(t)),E7=/\s+/,S7=(t,e)=>{const{parseClassName:n,getClassGroupId:i,getConflictingClassGroupIds:s,sortModifiers:r}=e,a=[],c=t.trim().split(E7);let u="";for(let h=c.length-1;h>=0;h-=1){const g=c[h],{isExternal:x,modifiers:T,hasImportantModifier:b,baseClassName:S,maybePostfixModifierPosition:P}=n(g);if(x){u=g+(u.length>0?" "+u:u);continue}let M=!!P,V=i(M?S.substring(0,P):S);if(!V){if(!M){u=g+(u.length>0?" "+u:u);continue}if(V=i(S),!V){u=g+(u.length>0?" "+u:u);continue}M=!1}const q=r(T).join(":"),O=b?q+w_:q,z=O+V;if(a.includes(z))continue;a.push(z);const j=s(V,M);for(let W=0;W<j.length;++W){const D=j[W];a.push(O+D)}u=g+(u.length>0?" "+u:u)}return u};function A7(){let t=0,e,n,i="";for(;t<arguments.length;)(e=arguments[t++])&&(n=LD(e))&&(i&&(i+=" "),i+=n);return i}const LD=t=>{if(typeof t=="string")return t;let e,n="";for(let i=0;i<t.length;i++)t[i]&&(e=LD(t[i]))&&(n&&(n+=" "),n+=e);return n};function C7(t,...e){let n,i,s,r=a;function a(u){const h=e.reduce((g,x)=>x(g),t());return n=b7(h),i=n.cache.get,s=n.cache.set,r=c,c(u)}function c(u){const h=i(u);if(h)return h;const g=S7(u,n);return s(u,g),g}return function(){return r(A7.apply(null,arguments))}}const Rn=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},UD=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,OD=/^\((?:(\w[\w-]*):)?(.+)\)$/i,I7=/^\d+\/\d+$/,R7=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,N7=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,M7=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,P7=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,D7=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Lc=t=>I7.test(t),rt=t=>!!t&&!Number.isNaN(Number(t)),ko=t=>!!t&&Number.isInteger(Number(t)),Ix=t=>t.endsWith("%")&&rt(t.slice(0,-1)),Ur=t=>R7.test(t),k7=()=>!0,V7=t=>N7.test(t)&&!M7.test(t),FD=()=>!1,L7=t=>P7.test(t),U7=t=>D7.test(t),O7=t=>!De(t)&&!ke(t),F7=t=>Qu(t,jD,FD),De=t=>UD.test(t),el=t=>Qu(t,GD,V7),Rx=t=>Qu(t,z7,rt),S1=t=>Qu(t,BD,FD),B7=t=>Qu(t,qD,U7),Up=t=>Qu(t,zD,L7),ke=t=>OD.test(t),wh=t=>Xu(t,GD),q7=t=>Xu(t,H7),A1=t=>Xu(t,BD),j7=t=>Xu(t,jD),G7=t=>Xu(t,qD),Op=t=>Xu(t,zD,!0),Qu=(t,e,n)=>{const i=UD.exec(t);return i?i[1]?e(i[1]):n(i[2]):!1},Xu=(t,e,n=!1)=>{const i=OD.exec(t);return i?i[1]?e(i[1]):n:!1},BD=t=>t==="position"||t==="percentage",qD=t=>t==="image"||t==="url",jD=t=>t==="length"||t==="size"||t==="bg-size",GD=t=>t==="length",z7=t=>t==="number",H7=t=>t==="family-name",zD=t=>t==="shadow",$7=()=>{const t=Rn("color"),e=Rn("font"),n=Rn("text"),i=Rn("font-weight"),s=Rn("tracking"),r=Rn("leading"),a=Rn("breakpoint"),c=Rn("container"),u=Rn("spacing"),h=Rn("radius"),g=Rn("shadow"),x=Rn("inset-shadow"),T=Rn("text-shadow"),b=Rn("drop-shadow"),S=Rn("blur"),P=Rn("perspective"),M=Rn("aspect"),V=Rn("ease"),q=Rn("animate"),O=()=>["auto","avoid","all","avoid-page","page","left","right","column"],z=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],j=()=>[...z(),ke,De],W=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto","contain","none"],C=()=>[ke,De,u],R=()=>[Lc,"full","auto",...C()],L=()=>[ko,"none","subgrid",ke,De],F=()=>["auto",{span:["full",ko,ke,De]},ko,ke,De],G=()=>[ko,"auto",ke,De],B=()=>["auto","min","max","fr",ke,De],ye=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Ae=()=>["start","end","center","stretch","center-safe","end-safe"],ne=()=>["auto",...C()],de=()=>[Lc,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...C()],ie=()=>[t,ke,De],Ie=()=>[...z(),A1,S1,{position:[ke,De]}],H=()=>["no-repeat",{repeat:["","x","y","space","round"]}],le=()=>["auto","cover","contain",j7,F7,{size:[ke,De]}],xe=()=>[Ix,wh,el],ce=()=>["","none","full",h,ke,De],Ee=()=>["",rt,wh,el],Fe=()=>["solid","dashed","dotted","double"],Be=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],_e=()=>[rt,Ix,A1,S1],at=()=>["","none",S,ke,De],Ct=()=>["none",rt,ke,De],Oe=()=>["none",rt,ke,De],nt=()=>[rt,ke,De],et=()=>[Lc,"full",...C()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ur],breakpoint:[Ur],color:[k7],container:[Ur],"drop-shadow":[Ur],ease:["in","out","in-out"],font:[O7],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ur],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ur],shadow:[Ur],spacing:["px",rt],text:[Ur],"text-shadow":[Ur],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Lc,De,ke,M]}],container:["container"],columns:[{columns:[rt,De,ke,c]}],"break-after":[{"break-after":O()}],"break-before":[{"break-before":O()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:j()}],overflow:[{overflow:W()}],"overflow-x":[{"overflow-x":W()}],"overflow-y":[{"overflow-y":W()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:R()}],"inset-x":[{"inset-x":R()}],"inset-y":[{"inset-y":R()}],start:[{start:R()}],end:[{end:R()}],top:[{top:R()}],right:[{right:R()}],bottom:[{bottom:R()}],left:[{left:R()}],visibility:["visible","invisible","collapse"],z:[{z:[ko,"auto",ke,De]}],basis:[{basis:[Lc,"full","auto",c,...C()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[rt,Lc,"auto","initial","none",De]}],grow:[{grow:["",rt,ke,De]}],shrink:[{shrink:["",rt,ke,De]}],order:[{order:[ko,"first","last","none",ke,De]}],"grid-cols":[{"grid-cols":L()}],"col-start-end":[{col:F()}],"col-start":[{"col-start":G()}],"col-end":[{"col-end":G()}],"grid-rows":[{"grid-rows":L()}],"row-start-end":[{row:F()}],"row-start":[{"row-start":G()}],"row-end":[{"row-end":G()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":B()}],"auto-rows":[{"auto-rows":B()}],gap:[{gap:C()}],"gap-x":[{"gap-x":C()}],"gap-y":[{"gap-y":C()}],"justify-content":[{justify:[...ye(),"normal"]}],"justify-items":[{"justify-items":[...Ae(),"normal"]}],"justify-self":[{"justify-self":["auto",...Ae()]}],"align-content":[{content:["normal",...ye()]}],"align-items":[{items:[...Ae(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Ae(),{baseline:["","last"]}]}],"place-content":[{"place-content":ye()}],"place-items":[{"place-items":[...Ae(),"baseline"]}],"place-self":[{"place-self":["auto",...Ae()]}],p:[{p:C()}],px:[{px:C()}],py:[{py:C()}],ps:[{ps:C()}],pe:[{pe:C()}],pt:[{pt:C()}],pr:[{pr:C()}],pb:[{pb:C()}],pl:[{pl:C()}],m:[{m:ne()}],mx:[{mx:ne()}],my:[{my:ne()}],ms:[{ms:ne()}],me:[{me:ne()}],mt:[{mt:ne()}],mr:[{mr:ne()}],mb:[{mb:ne()}],ml:[{ml:ne()}],"space-x":[{"space-x":C()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":C()}],"space-y-reverse":["space-y-reverse"],size:[{size:de()}],w:[{w:[c,"screen",...de()]}],"min-w":[{"min-w":[c,"screen","none",...de()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[a]},...de()]}],h:[{h:["screen","lh",...de()]}],"min-h":[{"min-h":["screen","lh","none",...de()]}],"max-h":[{"max-h":["screen","lh",...de()]}],"font-size":[{text:["base",n,wh,el]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,ke,Rx]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Ix,De]}],"font-family":[{font:[q7,De,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,ke,De]}],"line-clamp":[{"line-clamp":[rt,"none",ke,Rx]}],leading:[{leading:[r,...C()]}],"list-image":[{"list-image":["none",ke,De]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ke,De]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:ie()}],"text-color":[{text:ie()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Fe(),"wavy"]}],"text-decoration-thickness":[{decoration:[rt,"from-font","auto",ke,el]}],"text-decoration-color":[{decoration:ie()}],"underline-offset":[{"underline-offset":[rt,"auto",ke,De]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ke,De]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ke,De]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Ie()}],"bg-repeat":[{bg:H()}],"bg-size":[{bg:le()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ko,ke,De],radial:["",ke,De],conic:[ko,ke,De]},G7,B7]}],"bg-color":[{bg:ie()}],"gradient-from-pos":[{from:xe()}],"gradient-via-pos":[{via:xe()}],"gradient-to-pos":[{to:xe()}],"gradient-from":[{from:ie()}],"gradient-via":[{via:ie()}],"gradient-to":[{to:ie()}],rounded:[{rounded:ce()}],"rounded-s":[{"rounded-s":ce()}],"rounded-e":[{"rounded-e":ce()}],"rounded-t":[{"rounded-t":ce()}],"rounded-r":[{"rounded-r":ce()}],"rounded-b":[{"rounded-b":ce()}],"rounded-l":[{"rounded-l":ce()}],"rounded-ss":[{"rounded-ss":ce()}],"rounded-se":[{"rounded-se":ce()}],"rounded-ee":[{"rounded-ee":ce()}],"rounded-es":[{"rounded-es":ce()}],"rounded-tl":[{"rounded-tl":ce()}],"rounded-tr":[{"rounded-tr":ce()}],"rounded-br":[{"rounded-br":ce()}],"rounded-bl":[{"rounded-bl":ce()}],"border-w":[{border:Ee()}],"border-w-x":[{"border-x":Ee()}],"border-w-y":[{"border-y":Ee()}],"border-w-s":[{"border-s":Ee()}],"border-w-e":[{"border-e":Ee()}],"border-w-t":[{"border-t":Ee()}],"border-w-r":[{"border-r":Ee()}],"border-w-b":[{"border-b":Ee()}],"border-w-l":[{"border-l":Ee()}],"divide-x":[{"divide-x":Ee()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Ee()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Fe(),"hidden","none"]}],"divide-style":[{divide:[...Fe(),"hidden","none"]}],"border-color":[{border:ie()}],"border-color-x":[{"border-x":ie()}],"border-color-y":[{"border-y":ie()}],"border-color-s":[{"border-s":ie()}],"border-color-e":[{"border-e":ie()}],"border-color-t":[{"border-t":ie()}],"border-color-r":[{"border-r":ie()}],"border-color-b":[{"border-b":ie()}],"border-color-l":[{"border-l":ie()}],"divide-color":[{divide:ie()}],"outline-style":[{outline:[...Fe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[rt,ke,De]}],"outline-w":[{outline:["",rt,wh,el]}],"outline-color":[{outline:ie()}],shadow:[{shadow:["","none",g,Op,Up]}],"shadow-color":[{shadow:ie()}],"inset-shadow":[{"inset-shadow":["none",x,Op,Up]}],"inset-shadow-color":[{"inset-shadow":ie()}],"ring-w":[{ring:Ee()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:ie()}],"ring-offset-w":[{"ring-offset":[rt,el]}],"ring-offset-color":[{"ring-offset":ie()}],"inset-ring-w":[{"inset-ring":Ee()}],"inset-ring-color":[{"inset-ring":ie()}],"text-shadow":[{"text-shadow":["none",T,Op,Up]}],"text-shadow-color":[{"text-shadow":ie()}],opacity:[{opacity:[rt,ke,De]}],"mix-blend":[{"mix-blend":[...Be(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Be()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[rt]}],"mask-image-linear-from-pos":[{"mask-linear-from":_e()}],"mask-image-linear-to-pos":[{"mask-linear-to":_e()}],"mask-image-linear-from-color":[{"mask-linear-from":ie()}],"mask-image-linear-to-color":[{"mask-linear-to":ie()}],"mask-image-t-from-pos":[{"mask-t-from":_e()}],"mask-image-t-to-pos":[{"mask-t-to":_e()}],"mask-image-t-from-color":[{"mask-t-from":ie()}],"mask-image-t-to-color":[{"mask-t-to":ie()}],"mask-image-r-from-pos":[{"mask-r-from":_e()}],"mask-image-r-to-pos":[{"mask-r-to":_e()}],"mask-image-r-from-color":[{"mask-r-from":ie()}],"mask-image-r-to-color":[{"mask-r-to":ie()}],"mask-image-b-from-pos":[{"mask-b-from":_e()}],"mask-image-b-to-pos":[{"mask-b-to":_e()}],"mask-image-b-from-color":[{"mask-b-from":ie()}],"mask-image-b-to-color":[{"mask-b-to":ie()}],"mask-image-l-from-pos":[{"mask-l-from":_e()}],"mask-image-l-to-pos":[{"mask-l-to":_e()}],"mask-image-l-from-color":[{"mask-l-from":ie()}],"mask-image-l-to-color":[{"mask-l-to":ie()}],"mask-image-x-from-pos":[{"mask-x-from":_e()}],"mask-image-x-to-pos":[{"mask-x-to":_e()}],"mask-image-x-from-color":[{"mask-x-from":ie()}],"mask-image-x-to-color":[{"mask-x-to":ie()}],"mask-image-y-from-pos":[{"mask-y-from":_e()}],"mask-image-y-to-pos":[{"mask-y-to":_e()}],"mask-image-y-from-color":[{"mask-y-from":ie()}],"mask-image-y-to-color":[{"mask-y-to":ie()}],"mask-image-radial":[{"mask-radial":[ke,De]}],"mask-image-radial-from-pos":[{"mask-radial-from":_e()}],"mask-image-radial-to-pos":[{"mask-radial-to":_e()}],"mask-image-radial-from-color":[{"mask-radial-from":ie()}],"mask-image-radial-to-color":[{"mask-radial-to":ie()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":z()}],"mask-image-conic-pos":[{"mask-conic":[rt]}],"mask-image-conic-from-pos":[{"mask-conic-from":_e()}],"mask-image-conic-to-pos":[{"mask-conic-to":_e()}],"mask-image-conic-from-color":[{"mask-conic-from":ie()}],"mask-image-conic-to-color":[{"mask-conic-to":ie()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Ie()}],"mask-repeat":[{mask:H()}],"mask-size":[{mask:le()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ke,De]}],filter:[{filter:["","none",ke,De]}],blur:[{blur:at()}],brightness:[{brightness:[rt,ke,De]}],contrast:[{contrast:[rt,ke,De]}],"drop-shadow":[{"drop-shadow":["","none",b,Op,Up]}],"drop-shadow-color":[{"drop-shadow":ie()}],grayscale:[{grayscale:["",rt,ke,De]}],"hue-rotate":[{"hue-rotate":[rt,ke,De]}],invert:[{invert:["",rt,ke,De]}],saturate:[{saturate:[rt,ke,De]}],sepia:[{sepia:["",rt,ke,De]}],"backdrop-filter":[{"backdrop-filter":["","none",ke,De]}],"backdrop-blur":[{"backdrop-blur":at()}],"backdrop-brightness":[{"backdrop-brightness":[rt,ke,De]}],"backdrop-contrast":[{"backdrop-contrast":[rt,ke,De]}],"backdrop-grayscale":[{"backdrop-grayscale":["",rt,ke,De]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[rt,ke,De]}],"backdrop-invert":[{"backdrop-invert":["",rt,ke,De]}],"backdrop-opacity":[{"backdrop-opacity":[rt,ke,De]}],"backdrop-saturate":[{"backdrop-saturate":[rt,ke,De]}],"backdrop-sepia":[{"backdrop-sepia":["",rt,ke,De]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":C()}],"border-spacing-x":[{"border-spacing-x":C()}],"border-spacing-y":[{"border-spacing-y":C()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ke,De]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[rt,"initial",ke,De]}],ease:[{ease:["linear","initial",V,ke,De]}],delay:[{delay:[rt,ke,De]}],animate:[{animate:["none",q,ke,De]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[P,ke,De]}],"perspective-origin":[{"perspective-origin":j()}],rotate:[{rotate:Ct()}],"rotate-x":[{"rotate-x":Ct()}],"rotate-y":[{"rotate-y":Ct()}],"rotate-z":[{"rotate-z":Ct()}],scale:[{scale:Oe()}],"scale-x":[{"scale-x":Oe()}],"scale-y":[{"scale-y":Oe()}],"scale-z":[{"scale-z":Oe()}],"scale-3d":["scale-3d"],skew:[{skew:nt()}],"skew-x":[{"skew-x":nt()}],"skew-y":[{"skew-y":nt()}],transform:[{transform:[ke,De,"","none","gpu","cpu"]}],"transform-origin":[{origin:j()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:et()}],"translate-x":[{"translate-x":et()}],"translate-y":[{"translate-y":et()}],"translate-z":[{"translate-z":et()}],"translate-none":["translate-none"],accent:[{accent:ie()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:ie()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ke,De]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ke,De]}],fill:[{fill:["none",...ie()]}],"stroke-w":[{stroke:[rt,wh,el,Rx]}],stroke:[{stroke:["none",...ie()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},K7=C7($7);function vt(...t){return K7(f7(t))}var C1=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Yo,HD;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,C){function R(){}R.prototype=C.prototype,D.D=C.prototype,D.prototype=new R,D.prototype.constructor=D,D.C=function(L,F,G){for(var B=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)B[ye-2]=arguments[ye];return C.prototype[F].apply(L,B)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(D,C,R){R||(R=0);var L=Array(16);if(typeof C=="string")for(var F=0;16>F;++F)L[F]=C.charCodeAt(R++)|C.charCodeAt(R++)<<8|C.charCodeAt(R++)<<16|C.charCodeAt(R++)<<24;else for(F=0;16>F;++F)L[F]=C[R++]|C[R++]<<8|C[R++]<<16|C[R++]<<24;C=D.g[0],R=D.g[1],F=D.g[2];var G=D.g[3],B=C+(G^R&(F^G))+L[0]+3614090360&4294967295;C=R+(B<<7&4294967295|B>>>25),B=G+(F^C&(R^F))+L[1]+3905402710&4294967295,G=C+(B<<12&4294967295|B>>>20),B=F+(R^G&(C^R))+L[2]+606105819&4294967295,F=G+(B<<17&4294967295|B>>>15),B=R+(C^F&(G^C))+L[3]+3250441966&4294967295,R=F+(B<<22&4294967295|B>>>10),B=C+(G^R&(F^G))+L[4]+4118548399&4294967295,C=R+(B<<7&4294967295|B>>>25),B=G+(F^C&(R^F))+L[5]+1200080426&4294967295,G=C+(B<<12&4294967295|B>>>20),B=F+(R^G&(C^R))+L[6]+2821735955&4294967295,F=G+(B<<17&4294967295|B>>>15),B=R+(C^F&(G^C))+L[7]+4249261313&4294967295,R=F+(B<<22&4294967295|B>>>10),B=C+(G^R&(F^G))+L[8]+1770035416&4294967295,C=R+(B<<7&4294967295|B>>>25),B=G+(F^C&(R^F))+L[9]+2336552879&4294967295,G=C+(B<<12&4294967295|B>>>20),B=F+(R^G&(C^R))+L[10]+4294925233&4294967295,F=G+(B<<17&4294967295|B>>>15),B=R+(C^F&(G^C))+L[11]+2304563134&4294967295,R=F+(B<<22&4294967295|B>>>10),B=C+(G^R&(F^G))+L[12]+1804603682&4294967295,C=R+(B<<7&4294967295|B>>>25),B=G+(F^C&(R^F))+L[13]+4254626195&4294967295,G=C+(B<<12&4294967295|B>>>20),B=F+(R^G&(C^R))+L[14]+2792965006&4294967295,F=G+(B<<17&4294967295|B>>>15),B=R+(C^F&(G^C))+L[15]+1236535329&4294967295,R=F+(B<<22&4294967295|B>>>10),B=C+(F^G&(R^F))+L[1]+4129170786&4294967295,C=R+(B<<5&4294967295|B>>>27),B=G+(R^F&(C^R))+L[6]+3225465664&4294967295,G=C+(B<<9&4294967295|B>>>23),B=F+(C^R&(G^C))+L[11]+643717713&4294967295,F=G+(B<<14&4294967295|B>>>18),B=R+(G^C&(F^G))+L[0]+3921069994&4294967295,R=F+(B<<20&4294967295|B>>>12),B=C+(F^G&(R^F))+L[5]+3593408605&4294967295,C=R+(B<<5&4294967295|B>>>27),B=G+(R^F&(C^R))+L[10]+38016083&4294967295,G=C+(B<<9&4294967295|B>>>23),B=F+(C^R&(G^C))+L[15]+3634488961&4294967295,F=G+(B<<14&4294967295|B>>>18),B=R+(G^C&(F^G))+L[4]+3889429448&4294967295,R=F+(B<<20&4294967295|B>>>12),B=C+(F^G&(R^F))+L[9]+568446438&4294967295,C=R+(B<<5&4294967295|B>>>27),B=G+(R^F&(C^R))+L[14]+3275163606&4294967295,G=C+(B<<9&4294967295|B>>>23),B=F+(C^R&(G^C))+L[3]+4107603335&4294967295,F=G+(B<<14&4294967295|B>>>18),B=R+(G^C&(F^G))+L[8]+1163531501&4294967295,R=F+(B<<20&4294967295|B>>>12),B=C+(F^G&(R^F))+L[13]+2850285829&4294967295,C=R+(B<<5&4294967295|B>>>27),B=G+(R^F&(C^R))+L[2]+4243563512&4294967295,G=C+(B<<9&4294967295|B>>>23),B=F+(C^R&(G^C))+L[7]+1735328473&4294967295,F=G+(B<<14&4294967295|B>>>18),B=R+(G^C&(F^G))+L[12]+2368359562&4294967295,R=F+(B<<20&4294967295|B>>>12),B=C+(R^F^G)+L[5]+4294588738&4294967295,C=R+(B<<4&4294967295|B>>>28),B=G+(C^R^F)+L[8]+2272392833&4294967295,G=C+(B<<11&4294967295|B>>>21),B=F+(G^C^R)+L[11]+1839030562&4294967295,F=G+(B<<16&4294967295|B>>>16),B=R+(F^G^C)+L[14]+4259657740&4294967295,R=F+(B<<23&4294967295|B>>>9),B=C+(R^F^G)+L[1]+2763975236&4294967295,C=R+(B<<4&4294967295|B>>>28),B=G+(C^R^F)+L[4]+1272893353&4294967295,G=C+(B<<11&4294967295|B>>>21),B=F+(G^C^R)+L[7]+4139469664&4294967295,F=G+(B<<16&4294967295|B>>>16),B=R+(F^G^C)+L[10]+3200236656&4294967295,R=F+(B<<23&4294967295|B>>>9),B=C+(R^F^G)+L[13]+681279174&4294967295,C=R+(B<<4&4294967295|B>>>28),B=G+(C^R^F)+L[0]+3936430074&4294967295,G=C+(B<<11&4294967295|B>>>21),B=F+(G^C^R)+L[3]+3572445317&4294967295,F=G+(B<<16&4294967295|B>>>16),B=R+(F^G^C)+L[6]+76029189&4294967295,R=F+(B<<23&4294967295|B>>>9),B=C+(R^F^G)+L[9]+3654602809&4294967295,C=R+(B<<4&4294967295|B>>>28),B=G+(C^R^F)+L[12]+3873151461&4294967295,G=C+(B<<11&4294967295|B>>>21),B=F+(G^C^R)+L[15]+530742520&4294967295,F=G+(B<<16&4294967295|B>>>16),B=R+(F^G^C)+L[2]+3299628645&4294967295,R=F+(B<<23&4294967295|B>>>9),B=C+(F^(R|~G))+L[0]+4096336452&4294967295,C=R+(B<<6&4294967295|B>>>26),B=G+(R^(C|~F))+L[7]+1126891415&4294967295,G=C+(B<<10&4294967295|B>>>22),B=F+(C^(G|~R))+L[14]+2878612391&4294967295,F=G+(B<<15&4294967295|B>>>17),B=R+(G^(F|~C))+L[5]+4237533241&4294967295,R=F+(B<<21&4294967295|B>>>11),B=C+(F^(R|~G))+L[12]+1700485571&4294967295,C=R+(B<<6&4294967295|B>>>26),B=G+(R^(C|~F))+L[3]+2399980690&4294967295,G=C+(B<<10&4294967295|B>>>22),B=F+(C^(G|~R))+L[10]+4293915773&4294967295,F=G+(B<<15&4294967295|B>>>17),B=R+(G^(F|~C))+L[1]+2240044497&4294967295,R=F+(B<<21&4294967295|B>>>11),B=C+(F^(R|~G))+L[8]+1873313359&4294967295,C=R+(B<<6&4294967295|B>>>26),B=G+(R^(C|~F))+L[15]+4264355552&4294967295,G=C+(B<<10&4294967295|B>>>22),B=F+(C^(G|~R))+L[6]+2734768916&4294967295,F=G+(B<<15&4294967295|B>>>17),B=R+(G^(F|~C))+L[13]+1309151649&4294967295,R=F+(B<<21&4294967295|B>>>11),B=C+(F^(R|~G))+L[4]+4149444226&4294967295,C=R+(B<<6&4294967295|B>>>26),B=G+(R^(C|~F))+L[11]+3174756917&4294967295,G=C+(B<<10&4294967295|B>>>22),B=F+(C^(G|~R))+L[2]+718787259&4294967295,F=G+(B<<15&4294967295|B>>>17),B=R+(G^(F|~C))+L[9]+3951481745&4294967295,D.g[0]=D.g[0]+C&4294967295,D.g[1]=D.g[1]+(F+(B<<21&4294967295|B>>>11))&4294967295,D.g[2]=D.g[2]+F&4294967295,D.g[3]=D.g[3]+G&4294967295}i.prototype.u=function(D,C){C===void 0&&(C=D.length);for(var R=C-this.blockSize,L=this.B,F=this.h,G=0;G<C;){if(F==0)for(;G<=R;)s(this,D,G),G+=this.blockSize;if(typeof D=="string"){for(;G<C;)if(L[F++]=D.charCodeAt(G++),F==this.blockSize){s(this,L),F=0;break}}else for(;G<C;)if(L[F++]=D[G++],F==this.blockSize){s(this,L),F=0;break}}this.h=F,this.o+=C},i.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var C=1;C<D.length-8;++C)D[C]=0;var R=8*this.o;for(C=D.length-8;C<D.length;++C)D[C]=R&255,R/=256;for(this.u(D),D=Array(16),C=R=0;4>C;++C)for(var L=0;32>L;L+=8)D[R++]=this.g[C]>>>L&255;return D};function r(D,C){var R=c;return Object.prototype.hasOwnProperty.call(R,D)?R[D]:R[D]=C(D)}function a(D,C){this.h=C;for(var R=[],L=!0,F=D.length-1;0<=F;F--){var G=D[F]|0;L&&G==C||(R[F]=G,L=!1)}this.g=R}var c={};function u(D){return-128<=D&&128>D?r(D,function(C){return new a([C|0],0>C?-1:0)}):new a([D|0],0>D?-1:0)}function h(D){if(isNaN(D)||!isFinite(D))return x;if(0>D)return M(h(-D));for(var C=[],R=1,L=0;D>=R;L++)C[L]=D/R|0,R*=4294967296;return new a(C,0)}function g(D,C){if(D.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(D.charAt(0)=="-")return M(g(D.substring(1),C));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=h(Math.pow(C,8)),L=x,F=0;F<D.length;F+=8){var G=Math.min(8,D.length-F),B=parseInt(D.substring(F,F+G),C);8>G?(G=h(Math.pow(C,G)),L=L.j(G).add(h(B))):(L=L.j(R),L=L.add(h(B)))}return L}var x=u(0),T=u(1),b=u(16777216);t=a.prototype,t.m=function(){if(P(this))return-M(this).m();for(var D=0,C=1,R=0;R<this.g.length;R++){var L=this.i(R);D+=(0<=L?L:4294967296+L)*C,C*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(S(this))return"0";if(P(this))return"-"+M(this).toString(D);for(var C=h(Math.pow(D,6)),R=this,L="";;){var F=z(R,C).g;R=V(R,F.j(C));var G=((0<R.g.length?R.g[0]:R.h)>>>0).toString(D);if(R=F,S(R))return G+L;for(;6>G.length;)G="0"+G;L=G+L}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function S(D){if(D.h!=0)return!1;for(var C=0;C<D.g.length;C++)if(D.g[C]!=0)return!1;return!0}function P(D){return D.h==-1}t.l=function(D){return D=V(this,D),P(D)?-1:S(D)?0:1};function M(D){for(var C=D.g.length,R=[],L=0;L<C;L++)R[L]=~D.g[L];return new a(R,~D.h).add(T)}t.abs=function(){return P(this)?M(this):this},t.add=function(D){for(var C=Math.max(this.g.length,D.g.length),R=[],L=0,F=0;F<=C;F++){var G=L+(this.i(F)&65535)+(D.i(F)&65535),B=(G>>>16)+(this.i(F)>>>16)+(D.i(F)>>>16);L=B>>>16,G&=65535,B&=65535,R[F]=B<<16|G}return new a(R,R[R.length-1]&-2147483648?-1:0)};function V(D,C){return D.add(M(C))}t.j=function(D){if(S(this)||S(D))return x;if(P(this))return P(D)?M(this).j(M(D)):M(M(this).j(D));if(P(D))return M(this.j(M(D)));if(0>this.l(b)&&0>D.l(b))return h(this.m()*D.m());for(var C=this.g.length+D.g.length,R=[],L=0;L<2*C;L++)R[L]=0;for(L=0;L<this.g.length;L++)for(var F=0;F<D.g.length;F++){var G=this.i(L)>>>16,B=this.i(L)&65535,ye=D.i(F)>>>16,Ae=D.i(F)&65535;R[2*L+2*F]+=B*Ae,q(R,2*L+2*F),R[2*L+2*F+1]+=G*Ae,q(R,2*L+2*F+1),R[2*L+2*F+1]+=B*ye,q(R,2*L+2*F+1),R[2*L+2*F+2]+=G*ye,q(R,2*L+2*F+2)}for(L=0;L<C;L++)R[L]=R[2*L+1]<<16|R[2*L];for(L=C;L<2*C;L++)R[L]=0;return new a(R,0)};function q(D,C){for(;(D[C]&65535)!=D[C];)D[C+1]+=D[C]>>>16,D[C]&=65535,C++}function O(D,C){this.g=D,this.h=C}function z(D,C){if(S(C))throw Error("division by zero");if(S(D))return new O(x,x);if(P(D))return C=z(M(D),C),new O(M(C.g),M(C.h));if(P(C))return C=z(D,M(C)),new O(M(C.g),C.h);if(30<D.g.length){if(P(D)||P(C))throw Error("slowDivide_ only works with positive integers.");for(var R=T,L=C;0>=L.l(D);)R=j(R),L=j(L);var F=W(R,1),G=W(L,1);for(L=W(L,2),R=W(R,2);!S(L);){var B=G.add(L);0>=B.l(D)&&(F=F.add(R),G=B),L=W(L,1),R=W(R,1)}return C=V(D,F.j(C)),new O(F,C)}for(F=x;0<=D.l(C);){for(R=Math.max(1,Math.floor(D.m()/C.m())),L=Math.ceil(Math.log(R)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),G=h(R),B=G.j(C);P(B)||0<B.l(D);)R-=L,G=h(R),B=G.j(C);S(G)&&(G=T),F=F.add(G),D=V(D,B)}return new O(F,D)}t.A=function(D){return z(this,D).h},t.and=function(D){for(var C=Math.max(this.g.length,D.g.length),R=[],L=0;L<C;L++)R[L]=this.i(L)&D.i(L);return new a(R,this.h&D.h)},t.or=function(D){for(var C=Math.max(this.g.length,D.g.length),R=[],L=0;L<C;L++)R[L]=this.i(L)|D.i(L);return new a(R,this.h|D.h)},t.xor=function(D){for(var C=Math.max(this.g.length,D.g.length),R=[],L=0;L<C;L++)R[L]=this.i(L)^D.i(L);return new a(R,this.h^D.h)};function j(D){for(var C=D.g.length+1,R=[],L=0;L<C;L++)R[L]=D.i(L)<<1|D.i(L-1)>>>31;return new a(R,D.h)}function W(D,C){var R=C>>5;C%=32;for(var L=D.g.length-R,F=[],G=0;G<L;G++)F[G]=0<C?D.i(G+R)>>>C|D.i(G+R+1)<<32-C:D.i(G+R);return new a(F,D.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,HD=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=g,Yo=a}).apply(typeof C1!="undefined"?C1:typeof self!="undefined"?self:typeof window!="undefined"?window:{});var Fp=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $D,Dh,KD,ig,E_,WD,YD,JD;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(v,E,I){return v==Array.prototype||v==Object.prototype||(v[E]=I.value),v};function n(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fp=="object"&&Fp];for(var E=0;E<v.length;++E){var I=v[E];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var i=n(this);function s(v,E){if(E)e:{var I=i;v=v.split(".");for(var U=0;U<v.length-1;U++){var X=v[U];if(!(X in I))break e;I=I[X]}v=v[v.length-1],U=I[v],E=E(U),E!=U&&E!=null&&e(I,v,{configurable:!0,writable:!0,value:E})}}function r(v,E){v instanceof String&&(v+="");var I=0,U=!1,X={next:function(){if(!U&&I<v.length){var ae=I++;return{value:E(ae,v[ae]),done:!1}}return U=!0,{done:!0,value:void 0}}};return X[Symbol.iterator]=function(){return X},X}s("Array.prototype.values",function(v){return v||function(){return r(this,function(E,I){return I})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function u(v){var E=typeof v;return E=E!="object"?E:v?Array.isArray(v)?"array":E:"null",E=="array"||E=="object"&&typeof v.length=="number"}function h(v){var E=typeof v;return E=="object"&&v!=null||E=="function"}function g(v,E,I){return v.call.apply(v.bind,arguments)}function x(v,E,I){if(!v)throw Error();if(2<arguments.length){var U=Array.prototype.slice.call(arguments,2);return function(){var X=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(X,U),v.apply(E,X)}}return function(){return v.apply(E,arguments)}}function T(v,E,I){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:x,T.apply(null,arguments)}function b(v,E){var I=Array.prototype.slice.call(arguments,1);return function(){var U=I.slice();return U.push.apply(U,arguments),v.apply(this,U)}}function S(v,E){function I(){}I.prototype=E.prototype,v.aa=E.prototype,v.prototype=new I,v.prototype.constructor=v,v.Qb=function(U,X,ae){for(var we=Array(arguments.length-2),mt=2;mt<arguments.length;mt++)we[mt-2]=arguments[mt];return E.prototype[X].apply(U,we)}}function P(v){const E=v.length;if(0<E){const I=Array(E);for(let U=0;U<E;U++)I[U]=v[U];return I}return[]}function M(v,E){for(let I=1;I<arguments.length;I++){const U=arguments[I];if(u(U)){const X=v.length||0,ae=U.length||0;v.length=X+ae;for(let we=0;we<ae;we++)v[X+we]=U[we]}else v.push(U)}}class V{constructor(E,I){this.i=E,this.j=I,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function q(v){return/^[\s\xa0]*$/.test(v)}function O(){var v=c.navigator;return v&&(v=v.userAgent)?v:""}function z(v){return z[" "](v),v}z[" "]=function(){};var j=O().indexOf("Gecko")!=-1&&!(O().toLowerCase().indexOf("webkit")!=-1&&O().indexOf("Edge")==-1)&&!(O().indexOf("Trident")!=-1||O().indexOf("MSIE")!=-1)&&O().indexOf("Edge")==-1;function W(v,E,I){for(const U in v)E.call(I,v[U],U,v)}function D(v,E){for(const I in v)E.call(void 0,v[I],I,v)}function C(v){const E={};for(const I in v)E[I]=v[I];return E}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(v,E){let I,U;for(let X=1;X<arguments.length;X++){U=arguments[X];for(I in U)v[I]=U[I];for(let ae=0;ae<R.length;ae++)I=R[ae],Object.prototype.hasOwnProperty.call(U,I)&&(v[I]=U[I])}}function F(v){var E=1;v=v.split(":");const I=[];for(;0<E&&v.length;)I.push(v.shift()),E--;return v.length&&I.push(v.join(":")),I}function G(v){c.setTimeout(()=>{throw v},0)}function B(){var v=Ie;let E=null;return v.g&&(E=v.g,v.g=v.g.next,v.g||(v.h=null),E.next=null),E}class ye{constructor(){this.h=this.g=null}add(E,I){const U=Ae.get();U.set(E,I),this.h?this.h.next=U:this.g=U,this.h=U}}var Ae=new V(()=>new ne,v=>v.reset());class ne{constructor(){this.next=this.g=this.h=null}set(E,I){this.h=E,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let de,ie=!1,Ie=new ye,H=()=>{const v=c.Promise.resolve(void 0);de=()=>{v.then(le)}};var le=()=>{for(var v;v=B();){try{v.h.call(v.g)}catch(I){G(I)}var E=Ae;E.j(v),100>E.h&&(E.h++,v.next=E.g,E.g=v)}ie=!1};function xe(){this.s=this.s,this.C=this.C}xe.prototype.s=!1,xe.prototype.ma=function(){this.s||(this.s=!0,this.N())},xe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ce(v,E){this.type=v,this.g=this.target=E,this.defaultPrevented=!1}ce.prototype.h=function(){this.defaultPrevented=!0};var Ee=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var v=!1,E=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const I=()=>{};c.addEventListener("test",I,E),c.removeEventListener("test",I,E)}catch(I){}return v})();function Fe(v,E){if(ce.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v){var I=this.type=v.type,U=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;if(this.target=v.target||v.srcElement,this.g=E,E=v.relatedTarget){if(j){e:{try{z(E.nodeName);var X=!0;break e}catch(ae){}X=!1}X||(E=null)}}else I=="mouseover"?E=v.fromElement:I=="mouseout"&&(E=v.toElement);this.relatedTarget=E,U?(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=typeof v.pointerType=="string"?v.pointerType:Be[v.pointerType]||"",this.state=v.state,this.i=v,v.defaultPrevented&&Fe.aa.h.call(this)}}S(Fe,ce);var Be={2:"touch",3:"pen",4:"mouse"};Fe.prototype.h=function(){Fe.aa.h.call(this);var v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var _e="closure_listenable_"+(1e6*Math.random()|0),at=0;function Ct(v,E,I,U,X){this.listener=v,this.proxy=null,this.src=E,this.type=I,this.capture=!!U,this.ha=X,this.key=++at,this.da=this.fa=!1}function Oe(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function nt(v){this.src=v,this.g={},this.h=0}nt.prototype.add=function(v,E,I,U,X){var ae=v.toString();v=this.g[ae],v||(v=this.g[ae]=[],this.h++);var we=li(v,E,U,X);return-1<we?(E=v[we],I||(E.fa=!1)):(E=new Ct(E,this.src,ae,!!U,X),E.fa=I,v.push(E)),E};function et(v,E){var I=E.type;if(I in v.g){var U=v.g[I],X=Array.prototype.indexOf.call(U,E,void 0),ae;(ae=0<=X)&&Array.prototype.splice.call(U,X,1),ae&&(Oe(E),v.g[I].length==0&&(delete v.g[I],v.h--))}}function li(v,E,I,U){for(var X=0;X<v.length;++X){var ae=v[X];if(!ae.da&&ae.listener==E&&ae.capture==!!I&&ae.ha==U)return X}return-1}var Ti="closure_lm_"+(1e6*Math.random()|0),fs={};function ur(v,E,I,U,X){if(Array.isArray(E)){for(var ae=0;ae<E.length;ae++)ur(v,E[ae],I,U,X);return null}return I=Hl(I),v&&v[_e]?v.K(E,I,h(U)?!!U.capture:!1,X):ci(v,E,I,!1,U,X)}function ci(v,E,I,U,X,ae){if(!E)throw Error("Invalid event type");var we=h(X)?!!X.capture:!!X,mt=no(v);if(mt||(v[Ti]=mt=new nt(v)),I=mt.add(E,I,U,we,ae),I.proxy)return I;if(U=dd(),I.proxy=U,U.src=v,U.listener=I,v.addEventListener)Ee||(X=we),X===void 0&&(X=!1),v.addEventListener(E.toString(),U,X);else if(v.attachEvent)v.attachEvent(Gt(E.toString()),U);else if(v.addListener&&v.removeListener)v.addListener(U);else throw Error("addEventListener and attachEvent are unavailable.");return I}function dd(){function v(I){return E.call(v.src,v.listener,I)}const E=zl;return v}function Ta(v,E,I,U,X){if(Array.isArray(E))for(var ae=0;ae<E.length;ae++)Ta(v,E[ae],I,U,X);else U=h(U)?!!U.capture:!!U,I=Hl(I),v&&v[_e]?(v=v.i,E=String(E).toString(),E in v.g&&(ae=v.g[E],I=li(ae,I,U,X),-1<I&&(Oe(ae[I]),Array.prototype.splice.call(ae,I,1),ae.length==0&&(delete v.g[E],v.h--)))):v&&(v=no(v))&&(E=v.g[E.toString()],v=-1,E&&(v=li(E,I,U,X)),(I=-1<v?E[v]:null)&&Ki(I))}function Ki(v){if(typeof v!="number"&&v&&!v.da){var E=v.src;if(E&&E[_e])et(E.i,v);else{var I=v.type,U=v.proxy;E.removeEventListener?E.removeEventListener(I,U,v.capture):E.detachEvent?E.detachEvent(Gt(I),U):E.addListener&&E.removeListener&&E.removeListener(U),(I=no(E))?(et(I,v),I.h==0&&(I.src=null,E[Ti]=null)):Oe(v)}}}function Gt(v){return v in fs?fs[v]:fs[v]="on"+v}function zl(v,E){if(v.da)v=!0;else{E=new Fe(E,this);var I=v.listener,U=v.ha||v.src;v.fa&&Ki(v),v=I.call(U,E)}return v}function no(v){return v=v[Ti],v instanceof nt?v:null}var wa="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hl(v){return typeof v=="function"?v:(v[wa]||(v[wa]=function(E){return v.handleEvent(E)}),v[wa])}function Bt(){xe.call(this),this.i=new nt(this),this.M=this,this.F=null}S(Bt,xe),Bt.prototype[_e]=!0,Bt.prototype.removeEventListener=function(v,E,I,U){Ta(this,v,E,I,U)};function wt(v,E){var I,U=v.F;if(U)for(I=[];U;U=U.F)I.push(U);if(v=v.M,U=E.type||E,typeof E=="string")E=new ce(E,v);else if(E instanceof ce)E.target=E.target||v;else{var X=E;E=new ce(U,v),L(E,X)}if(X=!0,I)for(var ae=I.length-1;0<=ae;ae--){var we=E.g=I[ae];X=Pn(we,U,!0,E)&&X}if(we=E.g=v,X=Pn(we,U,!0,E)&&X,X=Pn(we,U,!1,E)&&X,I)for(ae=0;ae<I.length;ae++)we=E.g=I[ae],X=Pn(we,U,!1,E)&&X}Bt.prototype.N=function(){if(Bt.aa.N.call(this),this.i){var v=this.i,E;for(E in v.g){for(var I=v.g[E],U=0;U<I.length;U++)Oe(I[U]);delete v.g[E],v.h--}}this.F=null},Bt.prototype.K=function(v,E,I,U){return this.i.add(String(v),E,!1,I,U)},Bt.prototype.L=function(v,E,I,U){return this.i.add(String(v),E,!0,I,U)};function Pn(v,E,I,U){if(E=v.i.g[String(E)],!E)return!0;E=E.concat();for(var X=!0,ae=0;ae<E.length;++ae){var we=E[ae];if(we&&!we.da&&we.capture==I){var mt=we.listener,Sn=we.ha||we.src;we.fa&&et(v.i,we),X=mt.call(Sn,U)!==!1&&X}}return X&&!U.defaultPrevented}function Dn(v,E,I){if(typeof v=="function")I&&(v=T(v,I));else if(v&&typeof v.handleEvent=="function")v=T(v.handleEvent,v);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:c.setTimeout(v,E||0)}function io(v){v.g=Dn(()=>{v.g=null,v.i&&(v.i=!1,io(v))},v.l);const E=v.h;v.h=null,v.m.apply(null,E)}class hd extends xe{constructor(E,I){super(),this.m=E,this.l=I,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:io(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Is(v){xe.call(this),this.h=v,this.g={}}S(Is,xe);var dr=[];function Me(v){W(v.g,function(E,I){this.g.hasOwnProperty(I)&&Ki(E)},v),v.g={}}Is.prototype.N=function(){Is.aa.N.call(this),Me(this)},Is.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ge=c.JSON.stringify,Ke=c.JSON.parse,He=class{stringify(v){return c.JSON.stringify(v,void 0)}parse(v){return c.JSON.parse(v,void 0)}};function Ye(){}Ye.prototype.h=null;function ln(v){return v.h||(v.h=v.i())}function Mi(){}var Pi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function hr(){ce.call(this,"d")}S(hr,ce);function fd(){ce.call(this,"c")}S(fd,ce);var Rs={},md=null;function so(){return md=md||new Bt}Rs.La="serverreachability";function $l(v){ce.call(this,Rs.La,v)}S($l,ce);function ro(v){const E=so();wt(E,new $l(E))}Rs.STAT_EVENT="statevent";function um(v,E){ce.call(this,Rs.STAT_EVENT,v),this.stat=E}S(um,ce);function zt(v){const E=so();wt(E,new um(E,v))}Rs.Ma="timingevent";function En(v,E){ce.call(this,Rs.Ma,v),this.size=E}S(En,ce);function gn(v,E){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){v()},E)}function Wi(){this.g=!0}Wi.prototype.xa=function(){this.g=!1};function pd(v,E,I,U,X,ae){v.info(function(){if(v.g)if(ae)for(var we="",mt=ae.split("&"),Sn=0;Sn<mt.length;Sn++){var pt=mt[Sn].split("=");if(1<pt.length){var Vn=pt[0];pt=pt[1];var An=Vn.split("_");we=2<=An.length&&An[1]=="type"?we+(Vn+"="+pt+"&"):we+(Vn+"=redacted&")}}else we=null;else we=ae;return"XMLHTTP REQ ("+U+") [attempt "+X+"]: "+E+`
`+I+`
`+we})}function $y(v,E,I,U,X,ae,we){v.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+X+"]: "+E+`
`+I+`
`+ae+" "+we})}function oo(v,E,I,U){v.info(function(){return"XMLHTTP TEXT ("+E+"): "+ba(v,I)+(U?" "+U:"")})}function dm(v,E){v.info(function(){return"TIMEOUT: "+E})}Wi.prototype.info=function(){};function ba(v,E){if(!v.g)return E;if(!E)return null;try{var I=JSON.parse(E);if(I){for(v=0;v<I.length;v++)if(Array.isArray(I[v])){var U=I[v];if(!(2>U.length)){var X=U[1];if(Array.isArray(X)&&!(1>X.length)){var ae=X[0];if(ae!="noop"&&ae!="stop"&&ae!="close")for(var we=1;we<X.length;we++)X[we]=""}}}}return Ge(I)}catch(mt){return E}}var ao={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},fr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ns;function Ms(){}S(Ms,Ye),Ms.prototype.g=function(){return new XMLHttpRequest},Ms.prototype.i=function(){return{}},Ns=new Ms;function ui(v,E,I,U){this.j=v,this.i=E,this.l=I,this.R=U||1,this.U=new Is(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new cn}function cn(){this.i=null,this.g="",this.h=!1}var gd={},Kl={};function ms(v,E,I){v.L=1,v.v=Ia(Di(E)),v.m=I,v.P=!0,mr(v,null)}function mr(v,E){v.F=Date.now(),Ea(v),v.A=Di(v.v);var I=v.A,U=v.R;Array.isArray(U)||(U=[String(U)]),wd(I.i,"t",U),v.C=0,I=v.j.J,v.h=new cn,v.g=Cm(v.j,I?E:null,!v.m),0<v.O&&(v.M=new hd(T(v.Y,v,v.g),v.O)),E=v.U,I=v.g,U=v.ca;var X="readystatechange";Array.isArray(X)||(X&&(dr[0]=X.toString()),X=dr);for(var ae=0;ae<X.length;ae++){var we=ur(I,X[ae],U||E.handleEvent,!1,E.h||E);if(!we)break;E.g[we.key]=we}E=v.H?C(v.H):{},v.m?(v.u||(v.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.A,v.u,v.m,E)):(v.u="GET",v.g.ea(v.A,v.u,null,E)),ro(),pd(v.i,v.u,v.A,v.l,v.R,v.m)}ui.prototype.ca=function(v){v=v.target;const E=this.M;E&&Xi(v)==3?E.j():this.Y(v)},ui.prototype.Y=function(v){try{if(v==this.g)e:{const An=Xi(this.g);var E=this.g.Ba();const wr=this.g.Z();if(!(3>An)&&(An!=3||this.g&&(this.h.h||this.g.oa()||xm(this.g)))){this.J||An!=4||E==7||(E==8||0>=wr?ro(3):ro(2)),lo(this);var I=this.g.Z();this.X=I;t:if(hm(this)){var U=xm(this.g);v="";var X=U.length,ae=Xi(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){jn(this),Ps(this);var we="";break t}this.h.i=new c.TextDecoder}for(E=0;E<X;E++)this.h.h=!0,v+=this.h.i.decode(U[E],{stream:!(ae&&E==X-1)});U.length=0,this.h.g+=v,this.C=0,we=this.h.g}else we=this.g.oa();if(this.o=I==200,$y(this.i,this.u,this.A,this.l,this.R,An,I),this.o){if(this.T&&!this.K){t:{if(this.g){var mt,Sn=this.g;if((mt=Sn.g?Sn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(mt)){var pt=mt;break t}}pt=null}if(I=pt)oo(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Sa(this,I);else{this.o=!1,this.s=3,zt(12),jn(this),Ps(this);break e}}if(this.P){I=!0;let Gn;for(;!this.J&&this.C<we.length;)if(Gn=fm(this,we),Gn==Kl){An==4&&(this.s=4,zt(14),I=!1),oo(this.i,this.l,null,"[Incomplete Response]");break}else if(Gn==gd){this.s=4,zt(15),oo(this.i,this.l,we,"[Invalid Chunk]"),I=!1;break}else oo(this.i,this.l,Gn,null),Sa(this,Gn);if(hm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),An!=4||we.length!=0||this.h.h||(this.s=1,zt(16),I=!1),this.o=this.o&&I,!I)oo(this.i,this.l,we,"[Invalid Chunked Response]"),jn(this),Ps(this);else if(0<we.length&&!this.W){this.W=!0;var Vn=this.j;Vn.g==this&&Vn.ba&&!Vn.M&&(Vn.j.info("Great, no buffering proxy detected. Bytes received: "+we.length),La(Vn),Vn.M=!0,zt(11))}}else oo(this.i,this.l,we,null),Sa(this,we);An==4&&jn(this),this.o&&!this.J&&(An==4?Em(this.j,this):(this.o=!1,Ea(this)))}else Qy(this.g),I==400&&0<we.indexOf("Unknown SID")?(this.s=3,zt(12)):(this.s=0,zt(13)),jn(this),Ps(this)}}}catch(An){}finally{}};function hm(v){return v.g?v.u=="GET"&&v.L!=2&&v.j.Ca:!1}function fm(v,E){var I=v.C,U=E.indexOf(`
`,I);return U==-1?Kl:(I=Number(E.substring(I,U)),isNaN(I)?gd:(U+=1,U+I>E.length?Kl:(E=E.slice(U,U+I),v.C=U+I,E)))}ui.prototype.cancel=function(){this.J=!0,jn(this)};function Ea(v){v.S=Date.now()+v.I,mm(v,v.I)}function mm(v,E){if(v.B!=null)throw Error("WatchDog timer not null");v.B=gn(T(v.ba,v),E)}function lo(v){v.B&&(c.clearTimeout(v.B),v.B=null)}ui.prototype.ba=function(){this.B=null;const v=Date.now();0<=v-this.S?(dm(this.i,this.A),this.L!=2&&(ro(),zt(17)),jn(this),this.s=2,Ps(this)):mm(this,this.S-v)};function Ps(v){v.j.G==0||v.J||Em(v.j,v)}function jn(v){lo(v);var E=v.M;E&&typeof E.ma=="function"&&E.ma(),v.M=null,Me(v.U),v.g&&(E=v.g,v.g=null,E.abort(),E.ma())}function Sa(v,E){try{var I=v.j;if(I.G!=0&&(I.g==v||yd(I.h,v))){if(!v.K&&yd(I.h,v)&&I.G==3){try{var U=I.Da.g.parse(E)}catch(pt){U=null}if(Array.isArray(U)&&U.length==3){var X=U;if(X[0]==0){e:if(!I.u){if(I.g)if(I.g.F+3e3<v.F)rc(I),ic(I);else break e;Cd(I),zt(18)}}else I.za=X[1],0<I.za-I.T&&37500>X[2]&&I.F&&I.v==0&&!I.C&&(I.C=gn(T(I.Za,I),6e3));if(1>=Yl(I.h)&&I.ca){try{I.ca()}catch(pt){}I.ca=void 0}}else Tr(I,11)}else if((v.K||I.g==v)&&rc(I),!q(E))for(X=I.Da.g.parse(E),E=0;E<X.length;E++){let pt=X[E];if(I.T=pt[0],pt=pt[1],I.G==2)if(pt[0]=="c"){I.K=pt[1],I.ia=pt[2];const Vn=pt[3];Vn!=null&&(I.la=Vn,I.j.info("VER="+I.la));const An=pt[4];An!=null&&(I.Aa=An,I.j.info("SVER="+I.Aa));const wr=pt[5];wr!=null&&typeof wr=="number"&&0<wr&&(U=1.5*wr,I.L=U,I.j.info("backChannelRequestTimeoutMs_="+U)),U=I;const Gn=v.g;if(Gn){const Fs=Gn.g?Gn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fs){var ae=U.h;ae.g||Fs.indexOf("spdy")==-1&&Fs.indexOf("quic")==-1&&Fs.indexOf("h2")==-1||(ae.j=ae.l,ae.g=new Set,ae.h&&(Jl(ae,ae.h),ae.h=null))}if(U.D){const Rd=Gn.g?Gn.g.getResponseHeader("X-HTTP-Session-Id"):null;Rd&&(U.ya=Rd,Pt(U.I,U.D,Rd))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-v.F,I.j.info("Handshake RTT: "+I.R+"ms")),U=I;var we=v;if(U.qa=Am(U,U.J?U.ia:null,U.W),we.K){di(U.h,we);var mt=we,Sn=U.L;Sn&&(mt.I=Sn),mt.B&&(lo(mt),Ea(mt)),U.g=we}else wm(U);0<I.i.length&&sc(I)}else pt[0]!="stop"&&pt[0]!="close"||Tr(I,7);else I.G==3&&(pt[0]=="stop"||pt[0]=="close"?pt[0]=="stop"?Tr(I,7):Sd(I):pt[0]!="noop"&&I.l&&I.l.ta(pt),I.v=0)}}ro(4)}catch(pt){}}var pm=class{constructor(v,E){this.g=v,this.map=E}};function pr(v){this.l=v||10,c.PerformanceNavigationTiming?(v=c.performance.getEntriesByType("navigation"),v=0<v.length&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Wl(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function Yl(v){return v.h?1:v.g?v.g.size:0}function yd(v,E){return v.h?v.h==E:v.g?v.g.has(E):!1}function Jl(v,E){v.g?v.g.add(E):v.h=E}function di(v,E){v.h&&v.h==E?v.h=null:v.g&&v.g.has(E)&&v.g.delete(E)}pr.prototype.cancel=function(){if(this.i=vd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function vd(v){if(v.h!=null)return v.i.concat(v.h.D);if(v.g!=null&&v.g.size!==0){let E=v.i;for(const I of v.g.values())E=E.concat(I.D);return E}return P(v.i)}function Ky(v){if(v.V&&typeof v.V=="function")return v.V();if(typeof Map!="undefined"&&v instanceof Map||typeof Set!="undefined"&&v instanceof Set)return Array.from(v.values());if(typeof v=="string")return v.split("");if(u(v)){for(var E=[],I=v.length,U=0;U<I;U++)E.push(v[U]);return E}E=[],I=0;for(U in v)E[I++]=v[U];return E}function Ql(v){if(v.na&&typeof v.na=="function")return v.na();if(!v.V||typeof v.V!="function"){if(typeof Map!="undefined"&&v instanceof Map)return Array.from(v.keys());if(!(typeof Set!="undefined"&&v instanceof Set)){if(u(v)||typeof v=="string"){var E=[];v=v.length;for(var I=0;I<v;I++)E.push(I);return E}E=[],I=0;for(const U in v)E[I++]=U;return E}}}function xd(v,E){if(v.forEach&&typeof v.forEach=="function")v.forEach(E,void 0);else if(u(v)||typeof v=="string")Array.prototype.forEach.call(v,E,void 0);else for(var I=Ql(v),U=Ky(v),X=U.length,ae=0;ae<X;ae++)E.call(void 0,U[ae],I&&I[ae],v)}var Aa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wy(v,E){if(v){v=v.split("&");for(var I=0;I<v.length;I++){var U=v[I].indexOf("="),X=null;if(0<=U){var ae=v[I].substring(0,U);X=v[I].substring(U+1)}else ae=v[I];E(ae,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function yn(v){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,v instanceof yn){this.h=v.h,Ca(this,v.j),this.o=v.o,this.g=v.g,co(this,v.s),this.l=v.l;var E=v.i,I=new yr;I.i=E.i,E.g&&(I.g=new Map(E.g),I.h=E.h),gr(this,I),this.m=v.m}else v&&(E=String(v).match(Aa))?(this.h=!1,Ca(this,E[1]||"",!0),this.o=Yi(E[2]||""),this.g=Yi(E[3]||"",!0),co(this,E[4]),this.l=Yi(E[5]||"",!0),gr(this,E[6]||"",!0),this.m=Yi(E[7]||"")):(this.h=!1,this.i=new yr(null,this.h))}yn.prototype.toString=function(){var v=[],E=this.j;E&&v.push(Ra(E,_d,!0),":");var I=this.g;return(I||E=="file")&&(v.push("//"),(E=this.o)&&v.push(Ra(E,_d,!0),"@"),v.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.s,I!=null&&v.push(":",String(I))),(I=this.l)&&(this.g&&I.charAt(0)!="/"&&v.push("/"),v.push(Ra(I,I.charAt(0)=="/"?Yy:Td,!0))),(I=this.i.toString())&&v.push("?",I),(I=this.m)&&v.push("#",Ra(I,Xl)),v.join("")};function Di(v){return new yn(v)}function Ca(v,E,I){v.j=I?Yi(E,!0):E,v.j&&(v.j=v.j.replace(/:$/,""))}function co(v,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);v.s=E}else v.s=null}function gr(v,E,I){E instanceof yr?(v.i=E,ym(v.i,v.h)):(I||(E=Ra(E,Jy)),v.i=new yr(E,v.h))}function Pt(v,E,I){v.i.set(E,I)}function Ia(v){return Pt(v,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),v}function Yi(v,E){return v?E?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function Ra(v,E,I){return typeof v=="string"?(v=encodeURI(v).replace(E,gm),I&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function gm(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var _d=/[#\/\?@]/g,Td=/[#\?:]/g,Yy=/[#\?]/g,Jy=/[#\?@]/g,Xl=/#/g;function yr(v,E){this.h=this.g=null,this.i=v||null,this.j=!!E}function Ji(v){v.g||(v.g=new Map,v.h=0,v.i&&Wy(v.i,function(E,I){v.add(decodeURIComponent(E.replace(/\+/g," ")),I)}))}t=yr.prototype,t.add=function(v,E){Ji(this),this.i=null,v=Ds(this,v);var I=this.g.get(v);return I||this.g.set(v,I=[]),I.push(E),this.h+=1,this};function vr(v,E){Ji(v),E=Ds(v,E),v.g.has(E)&&(v.i=null,v.h-=v.g.get(E).length,v.g.delete(E))}function xr(v,E){return Ji(v),E=Ds(v,E),v.g.has(E)}t.forEach=function(v,E){Ji(this),this.g.forEach(function(I,U){I.forEach(function(X){v.call(E,X,U,this)},this)},this)},t.na=function(){Ji(this);const v=Array.from(this.g.values()),E=Array.from(this.g.keys()),I=[];for(let U=0;U<E.length;U++){const X=v[U];for(let ae=0;ae<X.length;ae++)I.push(E[U])}return I},t.V=function(v){Ji(this);let E=[];if(typeof v=="string")xr(this,v)&&(E=E.concat(this.g.get(Ds(this,v))));else{v=Array.from(this.g.values());for(let I=0;I<v.length;I++)E=E.concat(v[I])}return E},t.set=function(v,E){return Ji(this),this.i=null,v=Ds(this,v),xr(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[E]),this.h+=1,this},t.get=function(v,E){return v?(v=this.V(v),0<v.length?String(v[0]):E):E};function wd(v,E,I){vr(v,E),0<I.length&&(v.i=null,v.g.set(Ds(v,E),P(I)),v.h+=I.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],E=Array.from(this.g.keys());for(var I=0;I<E.length;I++){var U=E[I];const ae=encodeURIComponent(String(U)),we=this.V(U);for(U=0;U<we.length;U++){var X=ae;we[U]!==""&&(X+="="+encodeURIComponent(String(we[U]))),v.push(X)}}return this.i=v.join("&")};function Ds(v,E){return E=String(E),v.j&&(E=E.toLowerCase()),E}function ym(v,E){E&&!v.j&&(Ji(v),v.i=null,v.g.forEach(function(I,U){var X=U.toLowerCase();U!=X&&(vr(this,U),wd(this,X,I))},v)),v.j=E}function Na(v,E){const I=new Wi;if(c.Image){const U=new Image;U.onload=b(Qi,I,"TestLoadImage: loaded",!0,E,U),U.onerror=b(Qi,I,"TestLoadImage: error",!1,E,U),U.onabort=b(Qi,I,"TestLoadImage: abort",!1,E,U),U.ontimeout=b(Qi,I,"TestLoadImage: timeout",!1,E,U),c.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=v}else E(!1)}function ps(v,E){const I=new Wi,U=new AbortController,X=setTimeout(()=>{U.abort(),Qi(I,"TestPingServer: timeout",!1,E)},1e4);fetch(v,{signal:U.signal}).then(ae=>{clearTimeout(X),ae.ok?Qi(I,"TestPingServer: ok",!0,E):Qi(I,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(X),Qi(I,"TestPingServer: error",!1,E)})}function Qi(v,E,I,U,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),U(I)}catch(ae){}}function Ma(){this.g=new He}function ks(v,E,I){const U=I||"";try{xd(v,function(X,ae){let we=X;h(X)&&(we=Ge(X)),E.push(U+ae+"="+encodeURIComponent(we))})}catch(X){throw E.push(U+"type="+encodeURIComponent("_badmap")),X}}function uo(v){this.l=v.Ub||null,this.j=v.eb||!1}S(uo,Ye),uo.prototype.g=function(){return new _r(this.l,this.j)},uo.prototype.i=(function(v){return function(){return v}})({});function _r(v,E){Bt.call(this),this.D=v,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(_r,Bt),t=_r.prototype,t.open=function(v,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=v,this.A=E,this.readyState=1,Ls(this)},t.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};v&&(E.body=v),(this.D||c).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Vs(this)),this.readyState=0},t.Sa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,Ls(this)),this.g&&(this.readyState=3,Ls(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream!="undefined"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;bd(this)}else v.text().then(this.Ra.bind(this),this.ga.bind(this))};function bd(v){v.j.read().then(v.Pa.bind(v)).catch(v.ga.bind(v))}t.Pa=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var E=v.value?v.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!v.done}))&&(this.response=this.responseText+=E)}v.done?Vs(this):Ls(this),this.readyState==3&&bd(this)}},t.Ra=function(v){this.g&&(this.response=this.responseText=v,Vs(this))},t.Qa=function(v){this.g&&(this.response=v,Vs(this))},t.ga=function(){this.g&&Vs(this)};function Vs(v){v.readyState=4,v.l=null,v.j=null,v.v=null,Ls(v)}t.setRequestHeader=function(v,E){this.u.append(v,E)},t.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],E=this.h.entries();for(var I=E.next();!I.done;)I=I.value,v.push(I[0]+": "+I[1]),I=E.next();return v.join(`\r
`)};function Ls(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(_r.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function Ed(v){let E="";return W(v,function(I,U){E+=U,E+=":",E+=I,E+=`\r
`}),E}function kn(v,E,I){e:{for(U in I){var U=!1;break e}U=!0}U||(I=Ed(I),typeof v=="string"?I!=null&&encodeURIComponent(String(I)):Pt(v,E,I))}function St(v){Bt.call(this),this.headers=new Map,this.o=v||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(St,Bt);var Zl=/^https?$/i,Pa=["POST","PUT"];t=St.prototype,t.Ha=function(v){this.J=v},t.ea=function(v,E,I,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);E=E?E.toUpperCase():"GET",this.D=v,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ns.g(),this.v=this.o?ln(this.o):ln(Ns),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(E,String(v),!0),this.B=!1}catch(ae){vm(this,ae);return}if(v=I||"",I=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var X in U)I.set(X,U[X]);else if(typeof U.keys=="function"&&typeof U.get=="function")for(const ae of U.keys())I.set(ae,U.get(ae));else throw Error("Unknown input type for opt_headers: "+String(U));U=Array.from(I.keys()).find(ae=>ae.toLowerCase()=="content-type"),X=c.FormData&&v instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Pa,E,void 0))||U||X||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ae,we]of I)this.g.setRequestHeader(ae,we);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Da(this),this.u=!0,this.g.send(v),this.u=!1}catch(ae){vm(this,ae)}};function vm(v,E){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=E,v.m=5,ec(v),Us(v)}function ec(v){v.A||(v.A=!0,wt(v,"complete"),wt(v,"error"))}t.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=v||7,wt(this,"complete"),wt(this,"abort"),Us(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Us(this,!0)),St.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?tc(this):this.bb())},t.bb=function(){tc(this)};function tc(v){if(v.h&&typeof a!="undefined"&&(!v.v[1]||Xi(v)!=4||v.Z()!=2)){if(v.u&&Xi(v)==4)Dn(v.Ea,0,v);else if(wt(v,"readystatechange"),Xi(v)==4){v.h=!1;try{const we=v.Z();e:switch(we){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var I;if(!(I=E)){var U;if(U=we===0){var X=String(v.D).match(Aa)[1]||null;!X&&c.self&&c.self.location&&(X=c.self.location.protocol.slice(0,-1)),U=!Zl.test(X?X.toLowerCase():"")}I=U}if(I)wt(v,"complete"),wt(v,"success");else{v.m=6;try{var ae=2<Xi(v)?v.g.statusText:""}catch(mt){ae=""}v.l=ae+" ["+v.Z()+"]",ec(v)}}finally{Us(v)}}}}function Us(v,E){if(v.g){Da(v);const I=v.g,U=v.v[0]?()=>{}:null;v.g=null,v.v=null,E||wt(v,"ready");try{I.onreadystatechange=U}catch(X){}}}function Da(v){v.I&&(c.clearTimeout(v.I),v.I=null)}t.isActive=function(){return!!this.g};function Xi(v){return v.g?v.g.readyState:0}t.Z=function(){try{return 2<Xi(this)?this.g.status:-1}catch(v){return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch(v){return""}},t.Oa=function(v){if(this.g){var E=this.g.responseText;return v&&E.indexOf(v)==0&&(E=E.substring(v.length)),Ke(E)}};function xm(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.H){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch(E){return null}}function Qy(v){const E={};v=(v.g&&2<=Xi(v)&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let U=0;U<v.length;U++){if(q(v[U]))continue;var I=F(v[U]);const X=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const ae=E[X]||[];E[X]=ae,ae.push(I)}D(E,function(U){return U.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ka(v,E,I){return I&&I.internalChannelParams&&I.internalChannelParams[v]||E}function nc(v){this.Aa=0,this.i=[],this.j=new Wi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ka("failFast",!1,v),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ka("baseRetryDelayMs",5e3,v),this.cb=ka("retryDelaySeedMs",1e4,v),this.Wa=ka("forwardChannelMaxRetries",2,v),this.wa=ka("forwardChannelRequestTimeoutMs",2e4,v),this.pa=v&&v.xmlHttpFactory||void 0,this.Xa=v&&v.Tb||void 0,this.Ca=v&&v.useFetchStreams||!1,this.L=void 0,this.J=v&&v.supportsCrossDomainXhr||!1,this.K="",this.h=new pr(v&&v.concurrentRequestLimit),this.Da=new Ma,this.P=v&&v.fastHandshake||!1,this.O=v&&v.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=v&&v.Rb||!1,v&&v.xa&&this.j.xa(),v&&v.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&v&&v.detectBufferingProxy||!1,this.ja=void 0,v&&v.longPollingTimeout&&0<v.longPollingTimeout&&(this.ja=v.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=nc.prototype,t.la=8,t.G=1,t.connect=function(v,E,I,U){zt(0),this.W=v,this.H=E||{},I&&U!==void 0&&(this.H.OSID=I,this.H.OAID=U),this.F=this.X,this.I=Am(this,null,this.W),sc(this)};function Sd(v){if(_m(v),v.G==3){var E=v.U++,I=Di(v.I);if(Pt(I,"SID",v.K),Pt(I,"RID",E),Pt(I,"TYPE","terminate"),Va(v,I),E=new ui(v,v.j,E),E.L=2,E.v=Ia(Di(I)),I=!1,c.navigator&&c.navigator.sendBeacon)try{I=c.navigator.sendBeacon(E.v.toString(),"")}catch(U){}!I&&c.Image&&(new Image().src=E.v,I=!0),I||(E.g=Cm(E.j,null),E.g.ea(E.v)),E.F=Date.now(),Ea(E)}Sm(v)}function ic(v){v.g&&(La(v),v.g.cancel(),v.g=null)}function _m(v){ic(v),v.u&&(c.clearTimeout(v.u),v.u=null),rc(v),v.h.cancel(),v.s&&(typeof v.s=="number"&&c.clearTimeout(v.s),v.s=null)}function sc(v){if(!Wl(v.h)&&!v.s){v.s=!0;var E=v.Ga;de||H(),ie||(de(),ie=!0),Ie.add(E,v),v.B=0}}function Xy(v,E){return Yl(v.h)>=v.h.j-(v.s?1:0)?!1:v.s?(v.i=E.D.concat(v.i),!0):v.G==1||v.G==2||v.B>=(v.Va?0:v.Wa)?!1:(v.s=gn(T(v.Ga,v,E),Id(v,v.B)),v.B++,!0)}t.Ga=function(v){if(this.s)if(this.s=null,this.G==1){if(!v){this.U=Math.floor(1e5*Math.random()),v=this.U++;const X=new ui(this,this.j,v);let ae=this.o;if(this.S&&(ae?(ae=C(ae),L(ae,this.S)):ae=this.S),this.m!==null||this.O||(X.H=ae,ae=null),this.P)e:{for(var E=0,I=0;I<this.i.length;I++){t:{var U=this.i[I];if("__data__"in U.map&&(U=U.map.__data__,typeof U=="string")){U=U.length;break t}U=void 0}if(U===void 0)break;if(E+=U,4096<E){E=I;break e}if(E===4096||I===this.i.length-1){E=I+1;break e}}E=1e3}else E=1e3;E=Tm(this,X,E),I=Di(this.I),Pt(I,"RID",v),Pt(I,"CVER",22),this.D&&Pt(I,"X-HTTP-Session-Id",this.D),Va(this,I),ae&&(this.O?E="headers="+encodeURIComponent(String(Ed(ae)))+"&"+E:this.m&&kn(I,this.m,ae)),Jl(this.h,X),this.Ua&&Pt(I,"TYPE","init"),this.P?(Pt(I,"$req",E),Pt(I,"SID","null"),X.T=!0,ms(X,I,null)):ms(X,I,E),this.G=2}}else this.G==3&&(v?Ad(this,v):this.i.length==0||Wl(this.h)||Ad(this))};function Ad(v,E){var I;E?I=E.l:I=v.U++;const U=Di(v.I);Pt(U,"SID",v.K),Pt(U,"RID",I),Pt(U,"AID",v.T),Va(v,U),v.m&&v.o&&kn(U,v.m,v.o),I=new ui(v,v.j,I,v.B+1),v.m===null&&(I.H=v.o),E&&(v.i=E.D.concat(v.i)),E=Tm(v,I,1e3),I.I=Math.round(.5*v.wa)+Math.round(.5*v.wa*Math.random()),Jl(v.h,I),ms(I,U,E)}function Va(v,E){v.H&&W(v.H,function(I,U){Pt(E,U,I)}),v.l&&xd({},function(I,U){Pt(E,U,I)})}function Tm(v,E,I){I=Math.min(v.i.length,I);var U=v.l?T(v.l.Na,v.l,v):null;e:{var X=v.i;let ae=-1;for(;;){const we=["count="+I];ae==-1?0<I?(ae=X[0].g,we.push("ofs="+ae)):ae=0:we.push("ofs="+ae);let mt=!0;for(let Sn=0;Sn<I;Sn++){let pt=X[Sn].g;const Vn=X[Sn].map;if(pt-=ae,0>pt)ae=Math.max(0,X[Sn].g-100),mt=!1;else try{ks(Vn,we,"req"+pt+"_")}catch(An){U&&U(Vn)}}if(mt){U=we.join("&");break e}}}return v=v.i.splice(0,I),E.D=v,U}function wm(v){if(!v.g&&!v.u){v.Y=1;var E=v.Fa;de||H(),ie||(de(),ie=!0),Ie.add(E,v),v.v=0}}function Cd(v){return v.g||v.u||3<=v.v?!1:(v.Y++,v.u=gn(T(v.Fa,v),Id(v,v.v)),v.v++,!0)}t.Fa=function(){if(this.u=null,bm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var v=2*this.R;this.j.info("BP detection timer enabled: "+v),this.A=gn(T(this.ab,this),v)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,zt(10),ic(this),bm(this))};function La(v){v.A!=null&&(c.clearTimeout(v.A),v.A=null)}function bm(v){v.g=new ui(v,v.j,"rpc",v.Y),v.m===null&&(v.g.H=v.o),v.g.O=0;var E=Di(v.qa);Pt(E,"RID","rpc"),Pt(E,"SID",v.K),Pt(E,"AID",v.T),Pt(E,"CI",v.F?"0":"1"),!v.F&&v.ja&&Pt(E,"TO",v.ja),Pt(E,"TYPE","xmlhttp"),Va(v,E),v.m&&v.o&&kn(E,v.m,v.o),v.L&&(v.g.I=v.L);var I=v.g;v=v.ia,I.L=1,I.v=Ia(Di(E)),I.m=null,I.P=!0,mr(I,v)}t.Za=function(){this.C!=null&&(this.C=null,ic(this),Cd(this),zt(19))};function rc(v){v.C!=null&&(c.clearTimeout(v.C),v.C=null)}function Em(v,E){var I=null;if(v.g==E){rc(v),La(v),v.g=null;var U=2}else if(yd(v.h,E))I=E.D,di(v.h,E),U=1;else return;if(v.G!=0){if(E.o)if(U==1){I=E.m?E.m.length:0,E=Date.now()-E.F;var X=v.B;U=so(),wt(U,new En(U,I)),sc(v)}else wm(v);else if(X=E.s,X==3||X==0&&0<E.X||!(U==1&&Xy(v,E)||U==2&&Cd(v)))switch(I&&0<I.length&&(E=v.h,E.i=E.i.concat(I)),X){case 1:Tr(v,5);break;case 4:Tr(v,10);break;case 3:Tr(v,6);break;default:Tr(v,2)}}}function Id(v,E){let I=v.Ta+Math.floor(Math.random()*v.cb);return v.isActive()||(I*=2),I*E}function Tr(v,E){if(v.j.info("Error code "+E),E==2){var I=T(v.fb,v),U=v.Xa;const X=!U;U=new yn(U||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ca(U,"https"),Ia(U),X?Na(U.toString(),I):ps(U.toString(),I)}else zt(2);v.G=0,v.l&&v.l.sa(E),Sm(v),_m(v)}t.fb=function(v){v?(this.j.info("Successfully pinged google.com"),zt(2)):(this.j.info("Failed to ping google.com"),zt(1))};function Sm(v){if(v.G=0,v.ka=[],v.l){const E=vd(v.h);(E.length!=0||v.i.length!=0)&&(M(v.ka,E),M(v.ka,v.i),v.h.i.length=0,P(v.i),v.i.length=0),v.l.ra()}}function Am(v,E,I){var U=I instanceof yn?Di(I):new yn(I);if(U.g!="")E&&(U.g=E+"."+U.g),co(U,U.s);else{var X=c.location;U=X.protocol,E=E?E+"."+X.hostname:X.hostname,X=+X.port;var ae=new yn(null);U&&Ca(ae,U),E&&(ae.g=E),X&&co(ae,X),I&&(ae.l=I),U=ae}return I=v.D,E=v.ya,I&&E&&Pt(U,I,E),Pt(U,"VER",v.la),Va(v,U),U}function Cm(v,E,I){if(E&&!v.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=v.Ca&&!v.pa?new St(new uo({eb:I})):new St(v.pa),E.Ha(v.J),E}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Im(){}t=Im.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function oc(){}oc.prototype.g=function(v,E){return new hi(v,E)};function hi(v,E){Bt.call(this),this.g=new nc(E),this.l=v,this.h=E&&E.messageUrlParams||null,v=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(v?v["X-WebChannel-Content-Type"]=E.messageContentType:v={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(v?v["X-WebChannel-Client-Profile"]=E.va:v={"X-WebChannel-Client-Profile":E.va}),this.g.S=v,(v=E&&E.Sb)&&!q(v)&&(this.g.m=v),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!q(E)&&(this.g.D=E,v=this.h,v!==null&&E in v&&(v=this.h,E in v&&delete v[E])),this.j=new Os(this)}S(hi,Bt),hi.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},hi.prototype.close=function(){Sd(this.g)},hi.prototype.o=function(v){var E=this.g;if(typeof v=="string"){var I={};I.__data__=v,v=I}else this.u&&(I={},I.__data__=Ge(v),v=I);E.i.push(new pm(E.Ya++,v)),E.G==3&&sc(E)},hi.prototype.N=function(){this.g.l=null,delete this.j,Sd(this.g),delete this.g,hi.aa.N.call(this)};function Rm(v){hr.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var E=v.__sm__;if(E){e:{for(const I in E){v=I;break e}v=void 0}(this.i=v)&&(v=this.i,E=E!==null&&v in E?E[v]:void 0),this.data=E}else this.data=v}S(Rm,hr);function Nm(){fd.call(this),this.status=1}S(Nm,fd);function Os(v){this.g=v}S(Os,Im),Os.prototype.ua=function(){wt(this.g,"a")},Os.prototype.ta=function(v){wt(this.g,new Rm(v))},Os.prototype.sa=function(v){wt(this.g,new Nm)},Os.prototype.ra=function(){wt(this.g,"b")},oc.prototype.createWebChannel=oc.prototype.g,hi.prototype.send=hi.prototype.o,hi.prototype.open=hi.prototype.m,hi.prototype.close=hi.prototype.close,JD=function(){return new oc},YD=function(){return so()},WD=Rs,E_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ao.NO_ERROR=0,ao.TIMEOUT=8,ao.HTTP_ERROR=6,ig=ao,fr.COMPLETE="complete",KD=fr,Mi.EventType=Pi,Pi.OPEN="a",Pi.CLOSE="b",Pi.ERROR="c",Pi.MESSAGE="d",Bt.prototype.listen=Bt.prototype.K,Dh=Mi,St.prototype.listenOnce=St.prototype.L,St.prototype.getLastError=St.prototype.Ka,St.prototype.getLastErrorCode=St.prototype.Ba,St.prototype.getStatus=St.prototype.Z,St.prototype.getResponseJson=St.prototype.Oa,St.prototype.getResponseText=St.prototype.oa,St.prototype.send=St.prototype.ea,St.prototype.setWithCredentials=St.prototype.Ha,$D=St}).apply(typeof Fp!="undefined"?Fp:typeof self!="undefined"?self:typeof window!="undefined"?window:{});const I1="@firebase/firestore",R1="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bn.UNAUTHENTICATED=new Bn(null),Bn.GOOGLE_CREDENTIALS=new Bn("google-credentials-uid"),Bn.FIRST_PARTY=new Bn("first-party-uid"),Bn.MOCK_USER=new Bn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zu="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra=new ey("@firebase/firestore");function Gc(){return ra.logLevel}function W7(t){ra.setLogLevel(t)}function ge(t,...e){if(ra.logLevel<=ut.DEBUG){const n=e.map(Cw);ra.debug(`Firestore (${Zu}): ${t}`,...n)}}function fn(t,...e){if(ra.logLevel<=ut.ERROR){const n=e.map(Cw);ra.error(`Firestore (${Zu}): ${t}`,...n)}}function lr(t,...e){if(ra.logLevel<=ut.WARN){const n=e.map(Cw);ra.warn(`Firestore (${Zu}): ${t}`,...n)}}function Cw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch(e){return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,QD(t,i,n)}function QD(t,e,n){let i=`FIRESTORE (${Zu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch(s){i+=" CONTEXT: "+n}throw fn(i),new Error(i)}function Ve(t,e,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,t||QD(e,s,i)}function Y7(t,e){t||Ne(57014,e)}function Ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends vi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class J7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Bn.UNAUTHENTICATED)))}shutdown(){}}class Q7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class X7{constructor(e){this.t=e,this.currentUser=Bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ve(this.o===void 0,42304);let i=this.i;const s=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let r=new Qn;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Qn,e.enqueueRetryable((()=>s(this.currentUser)))};const a=()=>{const u=r;e.enqueueRetryable((()=>A(this,null,function*(){yield u.promise,yield s(this.currentUser)})))},c=u=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((u=>c(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Qn)}}),0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ve(typeof i.accessToken=="string",31837,{l:i}),new XD(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ve(e===null||typeof e=="string",2055,{h:e}),new Bn(e)}}class Z7{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Bn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class eH{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new Z7(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Bn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class N1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tH{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Kt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ve(this.o===void 0,3512);const i=r=>{r.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const a=r.token!==this.m;return this.m=r.token,ge("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable((()=>i(r)))};const s=r=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((r=>s(r))),setTimeout((()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?s(r):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new N1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ve(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new N1(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nH(t){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=nH(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<n&&(i+=e.charAt(s[r]%62))}return i}}function Xe(t,e){return t<e?-1:t>e?1:0}function S_(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const s=t.charAt(i),r=e.charAt(i);if(s!==r)return Nx(s)===Nx(r)?Xe(s,r):Nx(s)?1:-1}return Xe(t.length,e.length)}const iH=55296,sH=57343;function Nx(t){const e=t.charCodeAt(0);return e>=iH&&e<=sH}function Eu(t,e,n){return t.length===e.length&&t.every(((i,s)=>n(i,e[s])))}function ZD(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1="__name__";class Hs{constructor(e,n,i){n===void 0?n=0:n>e.length&&Ne(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Ne(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Hs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Hs?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const r=Hs.compareSegments(e.get(s),n.get(s));if(r!==0)return r}return Xe(e.length,n.length)}static compareSegments(e,n){const i=Hs.isNumericId(e),s=Hs.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?Hs.extractNumericId(e).compare(Hs.extractNumericId(n)):S_(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Yo.fromString(e.substring(4,e.length-2))}}class ht extends Hs{construct(e,n,i){return new ht(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new me(oe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((s=>s.length>0)))}return new ht(n)}static emptyPath(){return new ht([])}}const rH=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wt extends Hs{construct(e,n,i){return new Wt(e,n,i)}static isValidIdentifier(e){return rH.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===M1}static keyField(){return new Wt([M1])}static fromServerFormat(e){const n=[];let i="",s=0;const r=()=>{if(i.length===0)throw new me(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new me(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new me(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,s+=2}else c==="`"?(a=!a,s++):c!=="."||a?(i+=c,s++):(r(),s++)}if(r(),a)throw new me(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wt(n)}static emptyPath(){return new Wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(ht.fromString(e))}static fromName(e){return new be(ht.fromString(e).popFirst(5))}static empty(){return new be(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ht.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new ht(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(t,e,n){if(!n)throw new me(oe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ek(t,e,n,i){if(e===!0&&i===!0)throw new me(oe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function P1(t){if(!be.isDocumentKey(t))throw new me(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function D1(t){if(be.isDocumentKey(t))throw new me(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function tk(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function gy(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ne(12329,{type:typeof t})}function Tt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new me(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gy(t);throw new me(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function nk(t,e){if(e<=0)throw new me(oe.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(t,e){const n={typeString:t};return e&&(n.value=e),n}function Wf(t,e){if(!tk(t))throw new me(oe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const s=e[i].typeString,r="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const a=t[i];if(s&&typeof a!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(r!==void 0&&a!==r.value){n=`Expected '${i}' field to equal '${r.value}'`;break}}if(n)throw new me(oe.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1=-62135596800,V1=1e6;class At{static now(){return At.fromMillis(Date.now())}static fromDate(e){return At.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*V1);return new At(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new me(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new me(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<k1)throw new me(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/V1}_compareTo(e){return this.seconds===e.seconds?Xe(this.nanoseconds,e.nanoseconds):Xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:At._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Wf(e,At._jsonSchema))return new At(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-k1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}At._jsonSchemaVersion="firestore/timestamp/1.0",At._jsonSchema={type:bn("string",At._jsonSchemaVersion),seconds:bn("number"),nanoseconds:bn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{static fromTimestamp(e){return new Ue(e)}static min(){return new Ue(new At(0,0))}static max(){return new Ue(new At(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Su=-1;class Dg{constructor(e,n,i,s){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=s}}function A_(t){return t.fields.find((e=>e.kind===2))}function sl(t){return t.fields.filter((e=>e.kind!==2))}Dg.UNKNOWN_ID=-1;class sg{constructor(e,n){this.fieldPath=e,this.kind=n}}class Tf{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Tf(0,$i.min())}}function ik(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=Ue.fromTimestamp(i===1e9?new At(n+1,0):new At(n,i));return new $i(s,be.empty(),e)}function sk(t){return new $i(t.readTime,t.key,Su)}class $i{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new $i(Ue.min(),be.empty(),Su)}static max(){return new $i(Ue.max(),be.empty(),Su)}}function Nw(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=be.comparator(t.documentKey,e.documentKey),n!==0?n:Xe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ok{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ga(t){return A(this,null,function*(){if(t.code!==oe.FAILED_PRECONDITION||t.message!==rk)throw t;ge("LocalStore","Unexpectedly lost primary lease")})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Z(((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(n,r).next(i,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Z?n:Z.resolve(n)}catch(n){return Z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Z.reject(n)}static resolve(e){return new Z(((n,i)=>{n(e)}))}static reject(e){return new Z(((n,i)=>{i(e)}))}static waitFor(e){return new Z(((n,i)=>{let s=0,r=0,a=!1;e.forEach((c=>{++s,c.next((()=>{++r,a&&r===s&&n()}),(u=>i(u)))})),a=!0,r===s&&n()}))}static or(e){let n=Z.resolve(!1);for(const i of e)n=n.next((s=>s?Z.resolve(s):i()));return n}static forEach(e,n){const i=[];return e.forEach(((s,r)=>{i.push(n.call(this,s,r))})),this.waitFor(i)}static mapArray(e,n){return new Z(((i,s)=>{const r=e.length,a=new Array(r);let c=0;for(let u=0;u<r;u++){const h=u;n(e[h]).next((g=>{a[h]=g,++c,c===r&&i(a)}),(g=>s(g)))}}))}static doWhile(e,n){return new Z(((i,s)=>{const r=()=>{e()===!0?n().next((()=>{r()}),s):i()};r()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi="SimpleDb";class yy{static open(e,n,i,s){try{return new yy(n,e.transaction(s,i))}catch(r){throw new Qh(n,r)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new Qn,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Qh(e,n.error)):this.S.resolve()},this.transaction.onerror=i=>{const s=Mw(i.target.error);this.S.reject(new Qh(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ge(qi,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new aH(n)}}class ir{static delete(e){return ge(qi,"Removing database:",e),ol(mT().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!lf())return!1;if(ir.F())return!0;const e=Zt(),n=ir.M(e),i=0<n&&n<10,s=ak(e),r=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||r)}static F(){var e;return typeof process!="undefined"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,n,i){this.name=e,this.version=n,this.N=i,this.B=null,ir.M(Zt())===12.2&&fn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}L(e){return A(this,null,function*(){return this.db||(ge(qi,"Opening database:",this.name),this.db=yield new Promise(((n,i)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=r=>{const a=r.target.result;n(a)},s.onblocked=()=>{i(new Qh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=r=>{const a=r.target.error;a.name==="VersionError"?i(new me(oe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?i(new me(oe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):i(new Qh(e,a))},s.onupgradeneeded=r=>{ge(qi,'Database "'+this.name+'" requires upgrade from version:',r.oldVersion);const a=r.target.result;this.N.k(a,s.transaction,r.oldVersion,this.version).next((()=>{ge(qi,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db})}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,i,s){return A(this,null,function*(){const r=n==="readonly";let a=0;for(;;){++a;try{this.db=yield this.L(e);const c=yy.open(this.db,e,r?"readonly":"readwrite",i),u=s(c).next((h=>(c.C(),h))).catch((h=>(c.abort(h),Z.reject(h)))).toPromise();return u.catch((()=>{})),yield c.D,u}catch(c){const u=c,h=u.name!=="FirebaseError"&&a<3;if(ge(qi,"Transaction failed with error:",u.message,"Retrying:",h),this.close(),!h)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}}function ak(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class oH{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return ol(this.U.delete())}}class Qh extends me{constructor(e,n){super(oe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ya(t){return t.name==="IndexedDbTransactionError"}class aH{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(ge(qi,"PUT",this.store.name,e,n),i=this.store.put(n,e)):(ge(qi,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),ol(i)}add(e){return ge(qi,"ADD",this.store.name,e,e),ol(this.store.add(e))}get(e){return ol(this.store.get(e)).next((n=>(n===void 0&&(n=null),ge(qi,"GET",this.store.name,e,n),n)))}delete(e){return ge(qi,"DELETE",this.store.name,e),ol(this.store.delete(e))}count(){return ge(qi,"COUNT",this.store.name),ol(this.store.count())}J(e,n){const i=this.options(e,n),s=i.index?this.store.index(i.index):this.store;if(typeof s.getAll=="function"){const r=s.getAll(i.range);return new Z(((a,c)=>{r.onerror=u=>{c(u.target.error)},r.onsuccess=u=>{a(u.target.result)}}))}{const r=this.cursor(i),a=[];return this.H(r,((c,u)=>{a.push(u)})).next((()=>a))}}Y(e,n){const i=this.store.getAll(e,n===null?void 0:n);return new Z(((s,r)=>{i.onerror=a=>{r(a.target.error)},i.onsuccess=a=>{s(a.target.result)}}))}Z(e,n){ge(qi,"DELETE ALL",this.store.name);const i=this.options(e,n);i.X=!1;const s=this.cursor(i);return this.H(s,((r,a,c)=>c.delete()))}ee(e,n){let i;n?i=e:(i={},n=e);const s=this.cursor(i);return this.H(s,n)}te(e){const n=this.cursor({});return new Z(((i,s)=>{n.onerror=r=>{const a=Mw(r.target.error);s(a)},n.onsuccess=r=>{const a=r.target.result;a?e(a.primaryKey,a.value).next((c=>{c?a.continue():i()})):i()}}))}H(e,n){const i=[];return new Z(((s,r)=>{e.onerror=a=>{r(a.target.error)},e.onsuccess=a=>{const c=a.target.result;if(!c)return void s();const u=new oH(c),h=n(c.primaryKey,c.value,u);if(h instanceof Z){const g=h.catch((x=>(u.done(),Z.reject(x))));i.push(g)}u.isDone?s():u.G===null?c.continue():c.continue(u.G)}})).next((()=>Z.waitFor(i)))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ol(t){return new Z(((e,n)=>{t.onsuccess=i=>{const s=i.target.result;e(s)},t.onerror=i=>{const s=Mw(i.target.error);n(s)}}))}let L1=!1;function Mw(t){const e=ir.M(Zt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const i=new me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return L1||(L1=!0,setTimeout((()=>{throw i}),0)),i}}return t}const Xh="IndexBackfiller";class lH{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ge(Xh,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(()=>A(this,null,function*(){this.task=null;try{const n=yield this.ne.ie();ge(Xh,`Documents written: ${n}`)}catch(n){ya(n)?ge(Xh,"Ignoring IndexedDB error during index backfill: ",n):yield ga(n)}yield this.re(6e4)})))}}class cH{constructor(e,n){this.localStore=e,this.persistence=n}ie(e=50){return A(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.se(n,e)))})}se(e,n){const i=new Set;let s=n,r=!0;return Z.doWhile((()=>r===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((a=>{if(a!==null&&!i.has(a))return ge(Xh,`Processing collection: ${a}`),this.oe(e,a,s).next((c=>{s-=c,i.add(a)}));r=!1})))).next((()=>n-s))}oe(e,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next((s=>this.localStore.localDocuments.getNextDocuments(e,n,s,i).next((r=>{const a=r.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next((()=>this._e(s,r))).next((c=>(ge(Xh,`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,n,c)))).next((()=>a.size))}))))}_e(e,n){let i=e;return n.changes.forEach(((s,r)=>{const a=sk(r);Nw(a,i)>0&&(i=a)})),new $i(i.readTime,i.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ii.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo=-1;function Yf(t){return t==null}function wf(t){return t===0&&1/t==-1/0}function lk(t){return typeof t=="number"&&Number.isInteger(t)&&!wf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg="";function oi(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=U1(e)),e=uH(t.get(n),e);return U1(e)}function uH(t,e){let n=e;const i=t.length;for(let s=0;s<i;s++){const r=t.charAt(s);switch(r){case"\0":n+="";break;case kg:n+="";break;default:n+=r}}return n}function U1(t){return t+kg+""}function Xs(t){const e=t.length;if(Ve(e>=2,64408,{path:t}),e===2)return Ve(t.charAt(0)===kg&&t.charAt(1)==="",56145,{path:t}),ht.emptyPath();const n=e-2,i=[];let s="";for(let r=0;r<e;){const a=t.indexOf(kg,r);switch((a<0||a>n)&&Ne(50515,{path:t}),t.charAt(a+1)){case"":const c=t.substring(r,a);let u;s.length===0?u=c:(s+=c,u=s,s=""),i.push(u);break;case"":s+=t.substring(r,a),s+="\0";break;case"":s+=t.substring(r,a+1);break;default:Ne(61167,{path:t})}r=a+2}return new ht(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rl="remoteDocuments",Jf="owner",Uc="owner",bf="mutationQueues",dH="userId",_s="mutations",O1="batchId",pl="userMutationsIndex",F1=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(t,e){return[t,oi(e)]}function ck(t,e,n){return[t,oi(e),n]}const hH={},Au="documentMutations",Vg="remoteDocumentsV14",fH=["prefixPath","collectionGroup","readTime","documentId"],og="documentKeyIndex",mH=["prefixPath","collectionGroup","documentId"],uk="collectionGroupIndex",pH=["collectionGroup","readTime","prefixPath","documentId"],Ef="remoteDocumentGlobal",C_="remoteDocumentGlobalKey",Cu="targets",dk="queryTargetsIndex",gH=["canonicalId","targetId"],Iu="targetDocuments",yH=["targetId","path"],Pw="documentTargetsIndex",vH=["path","targetId"],Lg="targetGlobalKey",wl="targetGlobal",Sf="collectionParents",xH=["collectionId","parent"],Ru="clientMetadata",_H="clientId",vy="bundles",TH="bundleId",xy="namedQueries",wH="name",Dw="indexConfiguration",bH="indexId",I_="collectionGroupIndex",EH="collectionGroup",Zh="indexState",SH=["indexId","uid"],hk="sequenceNumberIndex",AH=["uid","sequenceNumber"],ef="indexEntries",CH=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],fk="documentKeyIndex",IH=["indexId","uid","orderedDocumentKey"],_y="documentOverlays",RH=["userId","collectionPath","documentId"],R_="collectionPathOverlayIndex",NH=["userId","collectionPath","largestBatchId"],mk="collectionGroupOverlayIndex",MH=["userId","collectionGroup","largestBatchId"],kw="globals",PH="name",pk=[bf,_s,Au,rl,Cu,Jf,wl,Iu,Ru,Ef,Sf,vy,xy],DH=[...pk,_y],gk=[bf,_s,Au,Vg,Cu,Jf,wl,Iu,Ru,Ef,Sf,vy,xy,_y],yk=gk,Vw=[...yk,Dw,Zh,ef],kH=Vw,vk=[...Vw,kw],VH=vk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_ extends ok{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Mn(t,e){const n=Ce(t);return ir.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function va(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function xk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,n){this.comparator=e,this.root=n||Wn.EMPTY}insert(e,n){return new Ft(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Wn.BLACK,null,null))}remove(e){return new Ft(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bp(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bp(this.root,e,this.comparator,!0)}}class Bp{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=n?i(e.key,n):1,n&&s&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wn{constructor(e,n,i,s,r){this.key=e,this.value=n,this.color=i!=null?i:Wn.RED,this.left=s!=null?s:Wn.EMPTY,this.right=r!=null?r:Wn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,r){return new Wn(e!=null?e:this.key,n!=null?n:this.value,i!=null?i:this.color,s!=null?s:this.left,r!=null?r:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const r=i(e,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(e,n,i),null):r===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Wn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Wn.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ne(27949);return e+(this.isRed()?0:1)}}Wn.EMPTY=null,Wn.RED=!0,Wn.BLACK=!1;Wn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne(57766)}get value(){throw Ne(16141)}get color(){throw Ne(16727)}get left(){throw Ne(29726)}get right(){throw Ne(36894)}copy(e,n,i,s,r){return this}insert(e,n,i){return new Wn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.comparator=e,this.data=new Ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new q1(this.data.getIterator())}getIteratorFrom(e){return new q1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof Mt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Mt(this.comparator);return n.data=e,n}}class q1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Oc(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new Ri([])}unionWith(e){let n=new Mt(Wt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Ri(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Eu(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LH(){return typeof atob!="undefined"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(r){throw typeof DOMException!="undefined"&&r instanceof DOMException?new _k("Invalid base64 string: "+r):r}})(e);return new rn(n)}static fromUint8Array(e){const n=(function(s){let r="";for(let a=0;a<s.length;++a)r+=String.fromCharCode(s[a]);return r})(e);return new rn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rn.EMPTY_BYTE_STRING=new rn("");const UH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hr(t){if(Ve(!!t,39018),typeof t=="string"){let e=0;const n=UH.exec(t);if(Ve(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:$t(t.seconds),nanos:$t(t.nanos)}}function $t(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function $r(t){return typeof t=="string"?rn.fromBase64String(t):rn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk="server_timestamp",wk="__type__",bk="__previous_value__",Ek="__local_write_time__";function Ty(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[wk])==null?void 0:i.stringValue)===Tk}function wy(t){const e=t.mapValue.fields[bk];return Ty(e)?wy(e):e}function Af(t){const e=Hr(t.mapValue.fields[Ek].timestampValue);return new At(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OH{constructor(e,n,i,s,r,a,c,u,h,g){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=g}}const M_="(default)";class oa{constructor(e,n){this.projectId=e,this.database=n||M_}static empty(){return new oa("","")}get isDefaultDatabase(){return this.database===M_}isEqual(e){return e instanceof oa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw="__type__",Sk="__max__",zo={mapValue:{fields:{__type__:{stringValue:Sk}}}},Uw="__vector__",Nu="value",ag={nullValue:"NULL_VALUE"};function aa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ty(t)?4:Ak(t)?9007199254740991:by(t)?10:11:Ne(28295,{value:t})}function cr(t,e){if(t===e)return!0;const n=aa(t);if(n!==aa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Af(t).isEqual(Af(e));case 3:return(function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const a=Hr(s.timestampValue),c=Hr(r.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,r){return $r(s.bytesValue).isEqual($r(r.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,r){return $t(s.geoPointValue.latitude)===$t(r.geoPointValue.latitude)&&$t(s.geoPointValue.longitude)===$t(r.geoPointValue.longitude)})(t,e);case 2:return(function(s,r){if("integerValue"in s&&"integerValue"in r)return $t(s.integerValue)===$t(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const a=$t(s.doubleValue),c=$t(r.doubleValue);return a===c?wf(a)===wf(c):isNaN(a)&&isNaN(c)}return!1})(t,e);case 9:return Eu(t.arrayValue.values||[],e.arrayValue.values||[],cr);case 10:case 11:return(function(s,r){const a=s.mapValue.fields||{},c=r.mapValue.fields||{};if(B1(a)!==B1(c))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!cr(a[u],c[u])))return!1;return!0})(t,e);default:return Ne(52216,{left:t})}}function Cf(t,e){return(t.values||[]).find((n=>cr(n,e)))!==void 0}function la(t,e){if(t===e)return 0;const n=aa(t),i=aa(e);if(n!==i)return Xe(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Xe(t.booleanValue,e.booleanValue);case 2:return(function(r,a){const c=$t(r.integerValue||r.doubleValue),u=$t(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(t,e);case 3:return j1(t.timestampValue,e.timestampValue);case 4:return j1(Af(t),Af(e));case 5:return S_(t.stringValue,e.stringValue);case 6:return(function(r,a){const c=$r(r),u=$r(a);return c.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(r,a){const c=r.split("/"),u=a.split("/");for(let h=0;h<c.length&&h<u.length;h++){const g=Xe(c[h],u[h]);if(g!==0)return g}return Xe(c.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(r,a){const c=Xe($t(r.latitude),$t(a.latitude));return c!==0?c:Xe($t(r.longitude),$t(a.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return G1(t.arrayValue,e.arrayValue);case 10:return(function(r,a){var T,b,S,P;const c=r.fields||{},u=a.fields||{},h=(T=c[Nu])==null?void 0:T.arrayValue,g=(b=u[Nu])==null?void 0:b.arrayValue,x=Xe(((S=h==null?void 0:h.values)==null?void 0:S.length)||0,((P=g==null?void 0:g.values)==null?void 0:P.length)||0);return x!==0?x:G1(h,g)})(t.mapValue,e.mapValue);case 11:return(function(r,a){if(r===zo.mapValue&&a===zo.mapValue)return 0;if(r===zo.mapValue)return 1;if(a===zo.mapValue)return-1;const c=r.fields||{},u=Object.keys(c),h=a.fields||{},g=Object.keys(h);u.sort(),g.sort();for(let x=0;x<u.length&&x<g.length;++x){const T=S_(u[x],g[x]);if(T!==0)return T;const b=la(c[u[x]],h[g[x]]);if(b!==0)return b}return Xe(u.length,g.length)})(t.mapValue,e.mapValue);default:throw Ne(23264,{he:n})}}function j1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Xe(t,e);const n=Hr(t),i=Hr(e),s=Xe(n.seconds,i.seconds);return s!==0?s:Xe(n.nanos,i.nanos)}function G1(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const r=la(n[s],i[s]);if(r)return r}return Xe(n.length,i.length)}function Mu(t){return P_(t)}function P_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const i=Hr(n);return`time(${i.seconds},${i.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return $r(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return be.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let i="[",s=!0;for(const r of n.values||[])s?s=!1:i+=",",i+=P_(r);return i+"]"})(t.arrayValue):"mapValue"in t?(function(n){const i=Object.keys(n.fields||{}).sort();let s="{",r=!0;for(const a of i)r?r=!1:s+=",",s+=`${a}:${P_(n.fields[a])}`;return s+"}"})(t.mapValue):Ne(61005,{value:t})}function lg(t){switch(aa(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=wy(t);return e?16+lg(e):16;case 5:return 2*t.stringValue.length;case 6:return $r(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((s,r)=>s+lg(r)),0)})(t.arrayValue);case 10:case 11:return(function(i){let s=0;return va(i.fields,((r,a)=>{s+=r.length+lg(a)})),s})(t.mapValue);default:throw Ne(13486,{value:t})}}function Al(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function D_(t){return!!t&&"integerValue"in t}function If(t){return!!t&&"arrayValue"in t}function z1(t){return!!t&&"nullValue"in t}function H1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function cg(t){return!!t&&"mapValue"in t}function by(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Lw])==null?void 0:i.stringValue)===Uw}function tf(t){if(t.geoPointValue)return{geoPointValue:J({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:J({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return va(t.mapValue.fields,((n,i)=>e.mapValue.fields[n]=tf(i))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=tf(t.arrayValue.values[n]);return e}return J({},t)}function Ak(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Sk}const Ck={mapValue:{fields:{[Lw]:{stringValue:Uw},[Nu]:{arrayValue:{}}}}};function FH(t){return"nullValue"in t?ag:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Al(oa.empty(),be.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?by(t)?Ck:{mapValue:{}}:Ne(35942,{value:t})}function BH(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Al(oa.empty(),be.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?Ck:"mapValue"in t?by(t)?{mapValue:{}}:zo:Ne(61959,{value:t})}function $1(t,e){const n=la(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function K1(t,e){const n=la(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.value=e}static empty(){return new Jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!cg(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=tf(n)}setAll(e){let n=Wt.emptyPath(),i={},s=[];e.forEach(((a,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,i,s),i={},s=[],n=c.popLast()}a?i[c.lastSegment()]=tf(a):s.push(c.lastSegment())}));const r=this.getFieldsMap(n);this.applyChanges(r,i,s)}delete(e){const n=this.field(e.popLast());cg(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return cr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];cg(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){va(n,((s,r)=>e[s]=r));for(const s of i)delete e[s]}clone(){return new Jn(tf(this.value))}}function Ik(t){const e=[];return va(t.fields,((n,i)=>{const s=new Wt([n]);if(cg(i)){const r=Ik(i.mapValue).fields;if(r.length===0)e.push(s);else for(const a of r)e.push(s.child(a))}else e.push(s)})),new Ri(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,n,i,s,r,a,c){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=r,this.data=a,this.documentState=c}static newInvalidDocument(e){return new jt(e,0,Ue.min(),Ue.min(),Ue.min(),Jn.empty(),0)}static newFoundDocument(e,n,i,s){return new jt(e,1,n,Ue.min(),i,s,0)}static newNoDocument(e,n){return new jt(e,2,n,Ue.min(),Ue.min(),Jn.empty(),0)}static newUnknownDocument(e,n){return new jt(e,3,n,Ue.min(),Ue.min(),Jn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,n){this.position=e,this.inclusive=n}}function W1(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const r=e[s],a=t.position[s];if(r.field.isKeyField()?i=be.comparator(be.fromName(a.referenceValue),n.key):i=la(a,n.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function Y1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!cr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,n="asc"){this.field=e,this.dir=n}}function qH(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{}class ft extends Rk{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new jH(e,n,i):n==="array-contains"?new HH(e,i):n==="in"?new Vk(e,i):n==="not-in"?new $H(e,i):n==="array-contains-any"?new KH(e,i):new ft(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new GH(e,i):new zH(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(la(n,this.value)):n!==null&&aa(this.value)===aa(n)&&this.matchesComparison(la(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Nt extends Rk{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Nt(e,n)}matches(e){return Pu(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Pu(t){return t.op==="and"}function k_(t){return t.op==="or"}function Ow(t){return Nk(t)&&Pu(t)}function Nk(t){for(const e of t.filters)if(e instanceof Nt)return!1;return!0}function V_(t){if(t instanceof ft)return t.field.canonicalString()+t.op.toString()+Mu(t.value);if(Ow(t))return t.filters.map((e=>V_(e))).join(",");{const e=t.filters.map((n=>V_(n))).join(",");return`${t.op}(${e})`}}function Mk(t,e){return t instanceof ft?(function(i,s){return s instanceof ft&&i.op===s.op&&i.field.isEqual(s.field)&&cr(i.value,s.value)})(t,e):t instanceof Nt?(function(i,s){return s instanceof Nt&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce(((r,a,c)=>r&&Mk(a,s.filters[c])),!0):!1})(t,e):void Ne(19439)}function Pk(t,e){const n=t.filters.concat(e);return Nt.create(n,t.op)}function Dk(t){return t instanceof ft?(function(n){return`${n.field.canonicalString()} ${n.op} ${Mu(n.value)}`})(t):t instanceof Nt?(function(n){return n.op.toString()+" {"+n.getFilters().map(Dk).join(" ,")+"}"})(t):"Filter"}class jH extends ft{constructor(e,n,i){super(e,n,i),this.key=be.fromName(i.referenceValue)}matches(e){const n=be.comparator(e.key,this.key);return this.matchesComparison(n)}}class GH extends ft{constructor(e,n){super(e,"in",n),this.keys=kk("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class zH extends ft{constructor(e,n){super(e,"not-in",n),this.keys=kk("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function kk(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((i=>be.fromName(i.referenceValue)))}class HH extends ft{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return If(n)&&Cf(n.arrayValue,this.value)}}class Vk extends ft{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Cf(this.value.arrayValue,n)}}class $H extends ft{constructor(e,n){super(e,"not-in",n)}matches(e){if(Cf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Cf(this.value.arrayValue,n)}}class KH extends ft{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!If(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Cf(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WH{constructor(e,n=null,i=[],s=[],r=null,a=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=a,this.endAt=c,this.Te=null}}function L_(t,e=null,n=[],i=[],s=null,r=null,a=null){return new WH(t,e,n,i,s,r,a)}function Cl(t){const e=Ce(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>V_(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(r){return r.field.canonicalString()+r.dir})(i))).join(","),Yf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Mu(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Mu(i))).join(",")),e.Te=n}return e.Te}function Qf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!qH(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Mk(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Y1(t.startAt,e.startAt)&&Y1(t.endAt,e.endAt)}function Ug(t){return be.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Og(t,e){return t.filters.filter((n=>n instanceof ft&&n.field.isEqual(e)))}function J1(t,e,n){let i=ag,s=!0;for(const r of Og(t,e)){let a=ag,c=!0;switch(r.op){case"<":case"<=":a=FH(r.value);break;case"==":case"in":case">=":a=r.value;break;case">":a=r.value,c=!1;break;case"!=":case"not-in":a=ag}$1({value:i,inclusive:s},{value:a,inclusive:c})<0&&(i=a,s=c)}if(n!==null){for(let r=0;r<t.orderBy.length;++r)if(t.orderBy[r].field.isEqual(e)){const a=n.position[r];$1({value:i,inclusive:s},{value:a,inclusive:n.inclusive})<0&&(i=a,s=n.inclusive);break}}return{value:i,inclusive:s}}function Q1(t,e,n){let i=zo,s=!0;for(const r of Og(t,e)){let a=zo,c=!0;switch(r.op){case">=":case">":a=BH(r.value),c=!1;break;case"==":case"in":case"<=":a=r.value;break;case"<":a=r.value,c=!1;break;case"!=":case"not-in":a=zo}K1({value:i,inclusive:s},{value:a,inclusive:c})>0&&(i=a,s=c)}if(n!==null){for(let r=0;r<t.orderBy.length;++r)if(t.orderBy[r].field.isEqual(e)){const a=n.position[r];K1({value:i,inclusive:s},{value:a,inclusive:n.inclusive})>0&&(i=a,s=n.inclusive);break}}return{value:i,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,n=null,i=[],s=[],r=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=a,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Lk(t,e,n,i,s,r,a,c){return new Jr(t,e,n,i,s,r,a,c)}function ed(t){return new Jr(t)}function X1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Fw(t){return t.collectionGroup!==null}function hu(t){const e=Ce(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const r of e.explicitOrderBy)e.Ie.push(r),n.add(r.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new Mt(Wt.comparator);return a.filters.forEach((u=>{u.getFlattenedFilters().forEach((h=>{h.isInequality()&&(c=c.add(h.field))}))})),c})(e).forEach((r=>{n.has(r.canonicalString())||r.isKeyField()||e.Ie.push(new Rf(r,i))})),n.has(Wt.keyField().canonicalString())||e.Ie.push(new Rf(Wt.keyField(),i))}return e.Ie}function xi(t){const e=Ce(t);return e.Ee||(e.Ee=YH(e,hu(t))),e.Ee}function YH(t,e){if(t.limitType==="F")return L_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const r=s.dir==="desc"?"asc":"desc";return new Rf(s.field,r)}));const n=t.endAt?new ca(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new ca(t.startAt.position,t.startAt.inclusive):null;return L_(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function U_(t,e){const n=t.filters.concat([e]);return new Jr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Fg(t,e,n){return new Jr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Xf(t,e){return Qf(xi(t),xi(e))&&t.limitType===e.limitType}function Uk(t){return`${Cl(xi(t))}|lt:${t.limitType}`}function zc(t){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((s=>Dk(s))).join(", ")}]`),Yf(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((s=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(s))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((s=>Mu(s))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((s=>Mu(s))).join(",")),`Target(${i})`})(xi(t))}; limitType=${t.limitType})`}function Zf(t,e){return e.isFoundDocument()&&(function(i,s){const r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):be.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)})(t,e)&&(function(i,s){for(const r of hu(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0})(t,e)&&(function(i,s){for(const r of i.filters)if(!r.matches(s))return!1;return!0})(t,e)&&(function(i,s){return!(i.startAt&&!(function(a,c,u){const h=W1(a,c,u);return a.inclusive?h<=0:h<0})(i.startAt,hu(i),s)||i.endAt&&!(function(a,c,u){const h=W1(a,c,u);return a.inclusive?h>=0:h>0})(i.endAt,hu(i),s))})(t,e)}function Ok(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Fk(t){return(e,n)=>{let i=!1;for(const s of hu(t)){const r=JH(s,e,n);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function JH(t,e,n){const i=t.field.isKeyField()?be.comparator(e.key,n.key):(function(r,a,c){const u=a.data.field(r),h=c.data.field(r);return u!==null&&h!==null?la(u,h):Ne(42886)})(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Ne(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,e))return r}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return void(s[r]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){va(this.inner,((n,i)=>{for(const[s,r]of i)e(s,r)}))}isEmpty(){return xk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QH=new Ft(be.comparator);function Ni(){return QH}const Bk=new Ft(be.comparator);function kh(...t){let e=Bk;for(const n of t)e=e.insert(n.key,n);return e}function qk(t){let e=Bk;return t.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function Zs(){return nf()}function jk(){return nf()}function nf(){return new Qr((t=>t.toString()),((t,e)=>t.isEqual(e)))}const XH=new Ft(be.comparator),ZH=new Mt(be.comparator);function tt(...t){let e=ZH;for(const n of t)e=e.add(n);return e}const e$=new Mt(Xe);function Bw(){return e$}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wf(e)?"-0":e}}function Gk(t){return{integerValue:""+t}}function zk(t,e){return lk(e)?Gk(e):qw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(){this._=void 0}}function t$(t,e,n){return t instanceof Du?(function(s,r){const a={fields:{[wk]:{stringValue:Tk},[Ek]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&Ty(r)&&(r=wy(r)),r&&(a.fields[bk]=r),{mapValue:a}})(n,e):t instanceof Il?$k(t,e):t instanceof Rl?Kk(t,e):(function(s,r){const a=Hk(s,r),c=Z1(a)+Z1(s.Ae);return D_(a)&&D_(s.Ae)?Gk(c):qw(s.serializer,c)})(t,e)}function n$(t,e,n){return t instanceof Il?$k(t,e):t instanceof Rl?Kk(t,e):n}function Hk(t,e){return t instanceof ku?(function(i){return D_(i)||(function(r){return!!r&&"doubleValue"in r})(i)})(e)?e:{integerValue:0}:null}class Du extends Ey{}class Il extends Ey{constructor(e){super(),this.elements=e}}function $k(t,e){const n=Wk(e);for(const i of t.elements)n.some((s=>cr(s,i)))||n.push(i);return{arrayValue:{values:n}}}class Rl extends Ey{constructor(e){super(),this.elements=e}}function Kk(t,e){let n=Wk(e);for(const i of t.elements)n=n.filter((s=>!cr(s,i)));return{arrayValue:{values:n}}}class ku extends Ey{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Z1(t){return $t(t.integerValue||t.doubleValue)}function Wk(t){return If(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e,n){this.field=e,this.transform=n}}function i$(t,e){return t.field.isEqual(e.field)&&(function(i,s){return i instanceof Il&&s instanceof Il||i instanceof Rl&&s instanceof Rl?Eu(i.elements,s.elements,cr):i instanceof ku&&s instanceof ku?cr(i.Ae,s.Ae):i instanceof Du&&s instanceof Du})(t.transform,e.transform)}class s${constructor(e,n){this.version=e,this.transformResults=n}}class Yt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Yt}static exists(e){return new Yt(void 0,e)}static updateTime(e){return new Yt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ug(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Sy{}function Yk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new nd(t.key,Yt.none()):new td(t.key,t.data,Yt.none());{const n=t.data,i=Jn.empty();let s=new Mt(Wt.comparator);for(let r of e.fields)if(!s.has(r)){let a=n.field(r);a===null&&r.length>1&&(r=r.popLast(),a=n.field(r)),a===null?i.delete(r):i.set(r,a),s=s.add(r)}return new Xr(t.key,i,new Ri(s.toArray()),Yt.none())}}function r$(t,e,n){t instanceof td?(function(s,r,a){const c=s.value.clone(),u=tR(s.fieldTransforms,r,a.transformResults);c.setAll(u),r.convertToFoundDocument(a.version,c).setHasCommittedMutations()})(t,e,n):t instanceof Xr?(function(s,r,a){if(!ug(s.precondition,r))return void r.convertToUnknownDocument(a.version);const c=tR(s.fieldTransforms,r,a.transformResults),u=r.data;u.setAll(Jk(s)),u.setAll(c),r.convertToFoundDocument(a.version,u).setHasCommittedMutations()})(t,e,n):(function(s,r,a){r.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,n)}function sf(t,e,n,i){return t instanceof td?(function(r,a,c,u){if(!ug(r.precondition,a))return c;const h=r.value.clone(),g=nR(r.fieldTransforms,u,a);return h.setAll(g),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null})(t,e,n,i):t instanceof Xr?(function(r,a,c,u){if(!ug(r.precondition,a))return c;const h=nR(r.fieldTransforms,u,a),g=a.data;return g.setAll(Jk(r)),g.setAll(h),a.convertToFoundDocument(a.version,g).setHasLocalMutations(),c===null?null:c.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map((x=>x.field)))})(t,e,n,i):(function(r,a,c){return ug(r.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c})(t,e,n)}function o$(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),r=Hk(i.transform,s||null);r!=null&&(n===null&&(n=Jn.empty()),n.set(i.field,r))}return n||null}function eR(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Eu(i,s,((r,a)=>i$(r,a)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class td extends Sy{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Xr extends Sy{constructor(e,n,i,s,r=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function Jk(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function tR(t,e,n){const i=new Map;Ve(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const r=t[s],a=r.transform,c=e.data.field(r.field);i.set(r.field,n$(a,c,n[s]))}return i}function nR(t,e,n){const i=new Map;for(const s of t){const r=s.transform,a=n.data.field(s.field);i.set(s.field,t$(r,a,e))}return i}class nd extends Sy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jw extends Sy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(e.key)&&r$(r,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=sf(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=sf(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=jk();return this.mutations.forEach((s=>{const r=e.get(s.key),a=r.overlayedDocument;let c=this.applyToLocalView(a,r.mutatedFields);c=n.has(s.key)?null:c;const u=Yk(a,c);u!==null&&i.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(Ue.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),tt())}isEqual(e){return this.batchId===e.batchId&&Eu(this.mutations,e.mutations,((n,i)=>eR(n,i)))&&Eu(this.baseMutations,e.baseMutations,((n,i)=>eR(n,i)))}}class zw{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){Ve(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=(function(){return XH})();const r=e.mutations;for(let a=0;a<r.length;a++)s=s.insert(r[a].key,i[a].version);return new zw(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a${constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _n,yt;function Qk(t){switch(t){case oe.OK:return Ne(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return Ne(15467,{code:t})}}function Xk(t){if(t===void 0)return fn("GRPC error has no .code"),oe.UNKNOWN;switch(t){case _n.OK:return oe.OK;case _n.CANCELLED:return oe.CANCELLED;case _n.UNKNOWN:return oe.UNKNOWN;case _n.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case _n.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case _n.INTERNAL:return oe.INTERNAL;case _n.UNAVAILABLE:return oe.UNAVAILABLE;case _n.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case _n.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case _n.NOT_FOUND:return oe.NOT_FOUND;case _n.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case _n.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case _n.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case _n.ABORTED:return oe.ABORTED;case _n.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case _n.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case _n.DATA_LOSS:return oe.DATA_LOSS;default:return Ne(39323,{code:t})}}(yt=_n||(_n={}))[yt.OK=0]="OK",yt[yt.CANCELLED=1]="CANCELLED",yt[yt.UNKNOWN=2]="UNKNOWN",yt[yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yt[yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yt[yt.NOT_FOUND=5]="NOT_FOUND",yt[yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",yt[yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",yt[yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",yt[yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yt[yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yt[yt.ABORTED=10]="ABORTED",yt[yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",yt[yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",yt[yt.INTERNAL=13]="INTERNAL",yt[yt.UNAVAILABLE=14]="UNAVAILABLE",yt[yt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l$=new Yo([4294967295,4294967295],0);function iR(t){const e=Zk().encode(t),n=new HD;return n.update(e),new Uint8Array(n.digest())}function sR(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new Yo([n,i],0),new Yo([s,r],0)]}class $w{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Vh(`Invalid padding: ${n}`);if(i<0)throw new Vh(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Vh(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Vh(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Yo.fromNumber(this.ge)}ye(e,n,i){let s=e.add(n.multiply(Yo.fromNumber(i)));return s.compare(l$)===1&&(s=new Yo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=iR(e),[i,s]=sR(n);for(let r=0;r<this.hashCount;r++){const a=this.ye(i,s,r);if(!this.we(a))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),a=new $w(r,s,n);return i.forEach((c=>a.insert(c))),a}insert(e){if(this.ge===0)return;const n=iR(e),[i,s]=sR(n);for(let r=0;r<this.hashCount;r++){const a=this.ye(i,s,r);this.Se(a)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Vh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e,n,i,s,r){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,nm.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new tm(Ue.min(),s,new Ft(Xe),Ni(),tt())}}class nm{constructor(e,n,i,s,r){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new nm(i,n,tt(),tt(),tt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,n,i,s){this.be=e,this.removedTargetIds=n,this.key=i,this.De=s}}class eV{constructor(e,n){this.targetId=e,this.Ce=n}}class tV{constructor(e,n,i=rn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class rR{constructor(){this.ve=0,this.Fe=oR(),this.Me=rn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=tt(),n=tt(),i=tt();return this.Fe.forEach(((s,r)=>{switch(r){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:Ne(38017,{changeType:r})}})),new nm(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=oR()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ve(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class c${constructor(e){this.Ge=e,this.ze=new Map,this.je=Ni(),this.Je=qp(),this.He=qp(),this.Ye=new Ft(Xe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:Ne(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,i=e.Ce.count,s=this.ot(n);if(s){const r=s.target;if(Ug(r))if(i===0){const a=new be(r.path);this.et(n,a,jt.newNoDocument(a,Ue.min()))}else Ve(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const c=this.ut(e),u=c?this.ct(c,e,a):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=n;let a,c;try{a=$r(i).toUint8Array()}catch(u){if(u instanceof _k)return lr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new $w(a,s,r)}catch(u){return lr(u instanceof Vh?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let s=0;return i.forEach((r=>{const a=this.Ge.ht(),c=`projects/${a.projectId}/databases/${a.database}/documents/${r.path.canonicalString()}`;e.mightContain(c)||(this.et(n,r,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((r,a)=>{const c=this.ot(a);if(c){if(r.current&&Ug(c.target)){const u=new be(c.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,jt.newNoDocument(u,e))}r.Be&&(n.set(a,r.ke()),r.qe())}}));let i=tt();this.He.forEach(((r,a)=>{let c=!0;a.forEachWhile((u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(i=i.add(r))})),this.je.forEach(((r,a)=>a.setReadTime(e)));const s=new tm(e,n,this.Ye,this.je,i);return this.je=Ni(),this.Je=qp(),this.He=qp(),this.Ye=new Ft(Xe),s}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new rR,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Mt(Xe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Mt(Xe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ge("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new rR),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function qp(){return new Ft(be.comparator)}function oR(){return new Ft(be.comparator)}const u$={asc:"ASCENDING",desc:"DESCENDING"},d$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},h$={and:"AND",or:"OR"};class f${constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function O_(t,e){return t.useProto3Json||Yf(e)?e:{value:e}}function Vu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nV(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function m$(t,e){return Vu(t,e.toTimestamp())}function mn(t){return Ve(!!t,49232),Ue.fromTimestamp((function(n){const i=Hr(n);return new At(i.seconds,i.nanos)})(t))}function Kw(t,e){return F_(t,e).canonicalString()}function F_(t,e){const n=(function(s){return new ht(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function iV(t){const e=ht.fromString(t);return Ve(fV(e),10190,{key:e.toString()}),e}function Nf(t,e){return Kw(t.databaseId,e.path)}function sr(t,e){const n=iV(e);if(n.get(1)!==t.databaseId.projectId)throw new me(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new me(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new be(oV(n))}function sV(t,e){return Kw(t.databaseId,e)}function rV(t){const e=iV(t);return e.length===4?ht.emptyPath():oV(e)}function B_(t){return new ht(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function oV(t){return Ve(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function aR(t,e,n){return{name:Nf(t,e),fields:n.value.mapValue.fields}}function aV(t,e,n){const i=sr(t,e.name),s=mn(e.updateTime),r=e.createTime?mn(e.createTime):Ue.min(),a=new Jn({mapValue:{fields:e.fields}}),c=jt.newFoundDocument(i,s,r,a);return n&&c.setHasCommittedMutations(),n?c.setHasCommittedMutations():c}function p$(t,e){return"found"in e?(function(i,s){Ve(!!s.found,43571),s.found.name,s.found.updateTime;const r=sr(i,s.found.name),a=mn(s.found.updateTime),c=s.found.createTime?mn(s.found.createTime):Ue.min(),u=new Jn({mapValue:{fields:s.found.fields}});return jt.newFoundDocument(r,a,c,u)})(t,e):"missing"in e?(function(i,s){Ve(!!s.missing,3894),Ve(!!s.readTime,22933);const r=sr(i,s.missing),a=mn(s.readTime);return jt.newNoDocument(r,a)})(t,e):Ne(7234,{result:e})}function g$(t,e){let n;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ne(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],r=(function(h,g){return h.useProto3Json?(Ve(g===void 0||typeof g=="string",58123),rn.fromBase64String(g||"")):(Ve(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),rn.fromUint8Array(g||new Uint8Array))})(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&(function(h){const g=h.code===void 0?oe.UNKNOWN:Xk(h.code);return new me(g,h.message||"")})(a);n=new tV(i,s,r,c||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=sr(t,i.document.name),r=mn(i.document.updateTime),a=i.document.createTime?mn(i.document.createTime):Ue.min(),c=new Jn({mapValue:{fields:i.document.fields}}),u=jt.newFoundDocument(s,r,a,c),h=i.targetIds||[],g=i.removedTargetIds||[];n=new dg(h,g,u.key,u)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=sr(t,i.document),r=i.readTime?mn(i.readTime):Ue.min(),a=jt.newNoDocument(s,r),c=i.removedTargetIds||[];n=new dg([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=sr(t,i.document),r=i.removedTargetIds||[];n=new dg([],r,s,null)}else{if(!("filter"in e))return Ne(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:r}=i,a=new a$(s,r),c=i.targetId;n=new eV(c,a)}}return n}function Mf(t,e){let n;if(e instanceof td)n={update:aR(t,e.key,e.value)};else if(e instanceof nd)n={delete:Nf(t,e.key)};else if(e instanceof Xr)n={update:aR(t,e.key,e.data),updateMask:w$(e.fieldMask)};else{if(!(e instanceof jw))return Ne(16599,{Vt:e.type});n={verify:Nf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(r,a){const c=a.transform;if(c instanceof Du)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Il)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Rl)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof ku)return{fieldPath:a.field.canonicalString(),increment:c.Ae};throw Ne(20930,{transform:a.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(s,r){return r.updateTime!==void 0?{updateTime:m$(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:Ne(27497)})(t,e.precondition)),n}function q_(t,e){const n=e.currentDocument?(function(r){return r.updateTime!==void 0?Yt.updateTime(mn(r.updateTime)):r.exists!==void 0?Yt.exists(r.exists):Yt.none()})(e.currentDocument):Yt.none(),i=e.updateTransforms?e.updateTransforms.map((s=>(function(a,c){let u=null;if("setToServerValue"in c)Ve(c.setToServerValue==="REQUEST_TIME",16630,{proto:c}),u=new Du;else if("appendMissingElements"in c){const g=c.appendMissingElements.values||[];u=new Il(g)}else if("removeAllFromArray"in c){const g=c.removeAllFromArray.values||[];u=new Rl(g)}else"increment"in c?u=new ku(a,c.increment):Ne(16584,{proto:c});const h=Wt.fromServerFormat(c.fieldPath);return new em(h,u)})(t,s))):[];if(e.update){e.update.name;const s=sr(t,e.update.name),r=new Jn({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=(function(u){const h=u.fieldPaths||[];return new Ri(h.map((g=>Wt.fromServerFormat(g))))})(e.updateMask);return new Xr(s,r,a,n,i)}return new td(s,r,n,i)}if(e.delete){const s=sr(t,e.delete);return new nd(s,n)}if(e.verify){const s=sr(t,e.verify);return new jw(s,n)}return Ne(1463,{proto:e})}function y$(t,e){return t&&t.length>0?(Ve(e!==void 0,14353),t.map((n=>(function(s,r){let a=s.updateTime?mn(s.updateTime):mn(r);return a.isEqual(Ue.min())&&(a=mn(r)),new s$(a,s.transformResults||[])})(n,e)))):[]}function lV(t,e){return{documents:[sV(t,e.path)]}}function cV(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=sV(t,s);const r=(function(h){if(h.length!==0)return hV(Nt.create(h,"and"))})(e.filters);r&&(n.structuredQuery.where=r);const a=(function(h){if(h.length!==0)return h.map((g=>(function(T){return{field:Hc(T.field),direction:x$(T.dir)}})(g)))})(e.orderBy);a&&(n.structuredQuery.orderBy=a);const c=O_(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:n,parent:s}}function uV(t){let e=rV(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){Ve(i===1,65062);const g=n.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let r=[];n.where&&(r=(function(x){const T=dV(x);return T instanceof Nt&&Ow(T)?T.getFilters():[T]})(n.where));let a=[];n.orderBy&&(a=(function(x){return x.map((T=>(function(S){return new Rf($c(S.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(T)))})(n.orderBy));let c=null;n.limit&&(c=(function(x){let T;return T=typeof x=="object"?x.value:x,Yf(T)?null:T})(n.limit));let u=null;n.startAt&&(u=(function(x){const T=!!x.before,b=x.values||[];return new ca(b,T)})(n.startAt));let h=null;return n.endAt&&(h=(function(x){const T=!x.before,b=x.values||[];return new ca(b,T)})(n.endAt)),Lk(e,s,a,r,c,"F",u,h)}function v$(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function dV(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=$c(n.unaryFilter.field);return ft.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=$c(n.unaryFilter.field);return ft.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=$c(n.unaryFilter.field);return ft.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=$c(n.unaryFilter.field);return ft.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ne(61313);default:return Ne(60726)}})(t):t.fieldFilter!==void 0?(function(n){return ft.create($c(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ne(58110);default:return Ne(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Nt.create(n.compositeFilter.filters.map((i=>dV(i))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ne(1026)}})(n.compositeFilter.op))})(t):Ne(30097,{filter:t})}function x$(t){return u$[t]}function _$(t){return d$[t]}function T$(t){return h$[t]}function Hc(t){return{fieldPath:t.canonicalString()}}function $c(t){return Wt.fromServerFormat(t.fieldPath)}function hV(t){return t instanceof ft?(function(n){if(n.op==="=="){if(H1(n.value))return{unaryFilter:{field:Hc(n.field),op:"IS_NAN"}};if(z1(n.value))return{unaryFilter:{field:Hc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(H1(n.value))return{unaryFilter:{field:Hc(n.field),op:"IS_NOT_NAN"}};if(z1(n.value))return{unaryFilter:{field:Hc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hc(n.field),op:_$(n.op),value:n.value}}})(t):t instanceof Nt?(function(n){const i=n.getFilters().map((s=>hV(s)));return i.length===1?i[0]:{compositeFilter:{op:T$(n.op),filters:i}}})(t):Ne(54877,{filter:t})}function w$(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function fV(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,n,i,s,r=Ue.min(),a=Ue.min(),c=rn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new Fr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(e){this.yt=e}}function b$(t,e){let n;if(e.document)n=aV(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=be.fromSegments(e.noDocument.path),s=Ml(e.noDocument.readTime);n=jt.newNoDocument(i,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ne(56709);{const i=be.fromSegments(e.unknownDocument.path),s=Ml(e.unknownDocument.version);n=jt.newUnknownDocument(i,s)}}return e.readTime&&n.setReadTime((function(s){const r=new At(s[0],s[1]);return Ue.fromTimestamp(r)})(e.readTime)),n}function lR(t,e){const n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Bg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=(function(r,a){return{name:Nf(r,a.key),fields:a.data.value.mapValue.fields,updateTime:Vu(r,a.version.toTimestamp()),createTime:Vu(r,a.createTime.toTimestamp())}})(t.yt,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:Nl(e.version)};else{if(!e.isUnknownDocument())return Ne(57904,{document:e});i.unknownDocument={path:n.path.toArray(),version:Nl(e.version)}}return i}function Bg(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Nl(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ml(t){const e=new At(t.seconds,t.nanoseconds);return Ue.fromTimestamp(e)}function al(t,e){const n=(e.baseMutations||[]).map((r=>q_(t.yt,r)));for(let r=0;r<e.mutations.length-1;++r){const a=e.mutations[r];if(r+1<e.mutations.length&&e.mutations[r+1].transform!==void 0){const c=e.mutations[r+1];a.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}const i=e.mutations.map((r=>q_(t.yt,r))),s=At.fromMillis(e.localWriteTimeMs);return new Gw(e.batchId,s,n,i)}function Lh(t){const e=Ml(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Ml(t.lastLimboFreeSnapshotVersion):Ue.min();let i;return i=(function(r){return r.documents!==void 0})(t.query)?(function(r){const a=r.documents.length;return Ve(a===1,1966,{count:a}),xi(ed(rV(r.documents[0])))})(t.query):(function(r){return xi(uV(r))})(t.query),new Fr(i,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,rn.fromBase64String(t.resumeToken))}function pV(t,e){const n=Nl(e.snapshotVersion),i=Nl(e.lastLimboFreeSnapshotVersion);let s;s=Ug(e.target)?lV(t.yt,e.target):cV(t.yt,e.target).ft;const r=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Cl(e.target),readTime:n,resumeToken:r,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:s}}function Ww(t){const e=uV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Fg(e,e.limit,"L"):e}function Mx(t,e){return new Hw(e.largestBatchId,q_(t.yt,e.overlayMutation))}function cR(t,e){const n=e.path.lastSegment();return[t,oi(e.path.popLast()),n]}function uR(t,e,n,i){return{indexId:t,uid:e,sequenceNumber:n,readTime:Nl(i.readTime),documentKey:oi(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E${getBundleMetadata(e,n){return dR(e).get(n).next((i=>{if(i)return(function(r){return{id:r.bundleId,createTime:Ml(r.createTime),version:r.version}})(i)}))}saveBundleMetadata(e,n){return dR(e).put((function(s){return{bundleId:s.id,createTime:Nl(mn(s.createTime)),version:s.version}})(n))}getNamedQuery(e,n){return hR(e).get(n).next((i=>{if(i)return(function(r){return{name:r.name,query:Ww(r.bundledQuery),readTime:Ml(r.readTime)}})(i)}))}saveNamedQuery(e,n){return hR(e).put((function(s){return{name:s.name,readTime:Nl(mn(s.readTime)),bundledQuery:s.bundledQuery}})(n))}}function dR(t){return Mn(t,vy)}function hR(t){return Mn(t,xy)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const i=n.uid||"";return new Ay(e,i)}getOverlay(e,n){return bh(e).get(cR(this.userId,n)).next((i=>i?Mx(this.serializer,i):null))}getOverlays(e,n){const i=Zs();return Z.forEach(n,(s=>this.getOverlay(e,s).next((r=>{r!==null&&i.set(s,r)})))).next((()=>i))}saveOverlays(e,n,i){const s=[];return i.forEach(((r,a)=>{const c=new Hw(n,a);s.push(this.St(e,c))})),Z.waitFor(s)}removeOverlaysForBatchId(e,n,i){const s=new Set;n.forEach((a=>s.add(oi(a.getCollectionPath()))));const r=[];return s.forEach((a=>{const c=IDBKeyRange.bound([this.userId,a,i],[this.userId,a,i+1],!1,!0);r.push(bh(e).Z(R_,c))})),Z.waitFor(r)}getOverlaysForCollection(e,n,i){const s=Zs(),r=oi(n),a=IDBKeyRange.bound([this.userId,r,i],[this.userId,r,Number.POSITIVE_INFINITY],!0);return bh(e).J(R_,a).next((c=>{for(const u of c){const h=Mx(this.serializer,u);s.set(h.getKey(),h)}return s}))}getOverlaysForCollectionGroup(e,n,i,s){const r=Zs();let a;const c=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return bh(e).ee({index:mk,range:c},((u,h,g)=>{const x=Mx(this.serializer,h);r.size()<s||x.largestBatchId===a?(r.set(x.getKey(),x),a=x.largestBatchId):g.done()})).next((()=>r))}St(e,n){return bh(e).put((function(s,r,a){const[c,u,h]=cR(r,a.mutation.key);return{userId:r,collectionPath:u,documentId:h,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Mf(s.yt,a.mutation)}})(this.serializer,this.userId,n))}}function bh(t){return Mn(t,_y)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S${bt(e){return Mn(e,kw)}getSessionToken(e){return this.bt(e).get("sessionToken").next((n=>{const i=n==null?void 0:n.value;return i?rn.fromUint8Array(i):rn.EMPTY_BYTE_STRING}))}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt($t(e.integerValue));else if("doubleValue"in e){const i=$t(e.doubleValue);isNaN(i)?this.Ft(n,13):(this.Ft(n,15),wf(i)?n.Mt(0):n.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(n,20),typeof i=="string"&&(i=Hr(i)),n.xt(`${i.seconds||""}`),n.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt($r(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(n,45),n.Mt(i.latitude||0),n.Mt(i.longitude||0)}else"mapValue"in e?Ak(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):by(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):Ne(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const i=e.fields||{};this.Ft(n,55);for(const s of Object.keys(i))this.Ot(s,n),this.Ct(i[s],n)}kt(e,n){var a,c;const i=e.fields||{};this.Ft(n,53);const s=Nu,r=((c=(a=i[s].arrayValue)==null?void 0:a.values)==null?void 0:c.length)||0;this.Ft(n,15),n.Mt($t(r)),this.Ot(s,n),this.Ct(i[s],n)}Qt(e,n){const i=e.values||[];this.Ft(n,50);for(const s of i)this.Ct(s,n)}Lt(e,n){this.Ft(n,37),be.fromName(e).path.forEach((i=>{this.Ft(n,60),this.Ut(i,n)}))}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}ll.Kt=new ll;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fc=255;function A$(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function fR(t){const e=64-(function(i){let s=0;for(let r=0;r<8;++r){const a=A$(255&i[r]);if(s+=a,a!==8)break}return s})(t);return Math.ceil(e/8)}class C${constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.Gt(i.value),i=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.Jt(i.value),i=n.next();this.Ht()}Yt(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const s=n.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.Jt(i);else if(i<2048)this.Jt(960|i>>>6),this.Jt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i);else{const s=n.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const n=this.en(e),i=fR(n);this.tn(1+i),this.buffer[this.position++]=255&i;for(let s=n.length-i;s<n.length;++s)this.buffer[this.position++]=255&n[s]}nn(e){const n=this.en(e),i=fR(n);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let s=n.length-i;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}rn(){this.sn(Fc),this.sn(255)}_n(){this.an(Fc),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=(function(r){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,r,!1),new Uint8Array(a.buffer)})(e),i=!!(128&n[0]);n[0]^=i?255:128;for(let s=1;s<n.length;++s)n[s]^=i?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===Fc?(this.sn(Fc),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===Fc?(this.an(Fc),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);const s=new Uint8Array(i);s.set(this.buffer),this.buffer=s}}class I${constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class R${constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Eh{constructor(){this.cn=new C$,this.ln=new I$(this.cn),this.hn=new R$(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,n,i,s){this.Tn=e,this.In=n,this.En=i,this.dn=s}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,i=new Uint8Array(n);return i.set(this.dn,0),n!==e?i.set([0],this.dn.length):++i[i.length-1],new cl(this.Tn,this.In,this.En,i)}Rn(e,n,i){return{indexId:this.Tn,uid:e,arrayValue:hg(this.En),directionalValue:hg(this.dn),orderedDocumentKey:hg(n),documentKey:i.path.toArray()}}Vn(e,n,i){const s=this.Rn(e,n,i);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Vo(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=mR(t.En,e.En),n!==0?n:(n=mR(t.dn,e.dn),n!==0?n:be.comparator(t.In,e.In)))}function mR(t,e){for(let n=0;n<t.length&&n<e.length;++n){const i=t[n]-e[n];if(i!==0)return i}return t.length-e.length}function hg(t){return D2()?(function(n){let i="";for(let s=0;s<n.length;s++)i+=String.fromCharCode(n[s]);return i})(t):t}function pR(t){return typeof t!="string"?t:(function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i})(t)}class gR{constructor(e){this.mn=new Mt(((n,i)=>Wt.comparator(n.field,i.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const i=n;i.isInequality()?this.mn=this.mn.add(i):this.gn.push(i)}}get pn(){return this.mn.size>1}yn(e){if(Ve(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=A_(e);if(n!==void 0&&!this.wn(n))return!1;const i=sl(e);let s=new Set,r=0,a=0;for(;r<i.length&&this.wn(i[r]);++r)s=s.add(i[r].fieldPath.canonicalString());if(r===i.length)return!0;if(this.mn.size>0){const c=this.mn.getIterator().getNext();if(!s.has(c.field.canonicalString())){const u=i[r];if(!this.Sn(c,u)||!this.bn(this.fn[a++],u))return!1}++r}for(;r<i.length;++r){const c=i[r];if(a>=this.fn.length||!this.bn(this.fn[a++],c))return!1}return!0}Dn(){if(this.pn)return null;let e=new Mt(Wt.comparator);const n=[];for(const i of this.gn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")n.push(new sg(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),n.push(new sg(i.field,0))}for(const i of this.fn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),n.push(new sg(i.field,i.dir==="asc"?0:1)));return new Dg(Dg.UNKNOWN_ID,this.collectionId,n,Tf.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===i}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gV(t){var n,i;if(Ve(t instanceof ft||t instanceof Nt,20012),t instanceof ft){if(t instanceof Vk){const s=((i=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:i.map((r=>ft.create(t.field,"==",r))))||[];return Nt.create(s,"or")}return t}const e=t.filters.map((s=>gV(s)));return Nt.create(e,t.op)}function N$(t){if(t.getFilters().length===0)return[];const e=z_(gV(t));return Ve(yV(e),7391),j_(e)||G_(e)?[e]:e.getFilters()}function j_(t){return t instanceof ft}function G_(t){return t instanceof Nt&&Ow(t)}function yV(t){return j_(t)||G_(t)||(function(n){if(n instanceof Nt&&k_(n)){for(const i of n.getFilters())if(!j_(i)&&!G_(i))return!1;return!0}return!1})(t)}function z_(t){if(Ve(t instanceof ft||t instanceof Nt,34018),t instanceof ft)return t;if(t.filters.length===1)return z_(t.filters[0]);const e=t.filters.map((i=>z_(i)));let n=Nt.create(e,t.op);return n=qg(n),yV(n)?n:(Ve(n instanceof Nt,64498),Ve(Pu(n),40251),Ve(n.filters.length>1,57927),n.filters.reduce(((i,s)=>Yw(i,s))))}function Yw(t,e){let n;return Ve(t instanceof ft||t instanceof Nt,38388),Ve(e instanceof ft||e instanceof Nt,25473),n=t instanceof ft?e instanceof ft?(function(s,r){return Nt.create([s,r],"and")})(t,e):yR(t,e):e instanceof ft?yR(e,t):(function(s,r){if(Ve(s.filters.length>0&&r.filters.length>0,48005),Pu(s)&&Pu(r))return Pk(s,r.getFilters());const a=k_(s)?s:r,c=k_(s)?r:s,u=a.filters.map((h=>Yw(h,c)));return Nt.create(u,"or")})(t,e),qg(n)}function yR(t,e){if(Pu(e))return Pk(e,t.getFilters());{const n=e.filters.map((i=>Yw(t,i)));return Nt.create(n,"or")}}function qg(t){if(Ve(t instanceof ft||t instanceof Nt,11850),t instanceof ft)return t;const e=t.getFilters();if(e.length===1)return qg(e[0]);if(Nk(t))return t;const n=e.map((s=>qg(s))),i=[];return n.forEach((s=>{s instanceof ft?i.push(s):s instanceof Nt&&(s.op===t.op?i.push(...s.filters):i.push(s))})),i.length===1?i[0]:Nt.create(i,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M${constructor(){this.Cn=new Jw}addToCollectionParentIndex(e,n){return this.Cn.add(n),Z.resolve()}getCollectionParents(e,n){return Z.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Z.resolve()}deleteFieldIndex(e,n){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,n){return Z.resolve()}getDocumentsMatchingTarget(e,n){return Z.resolve(null)}getIndexType(e,n){return Z.resolve(0)}getFieldIndexes(e,n){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,n){return Z.resolve($i.min())}getMinOffsetFromCollectionGroup(e,n){return Z.resolve($i.min())}updateCollectionGroup(e,n,i){return Z.resolve()}updateIndexEntries(e,n){return Z.resolve()}}class Jw{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new Mt(ht.comparator),r=!s.has(i);return this.index[n]=s.add(i),r}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new Mt(ht.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR="IndexedDbIndexManager",jp=new Uint8Array(0);class P${constructor(e,n){this.databaseId=n,this.vn=new Jw,this.Fn=new Qr((i=>Cl(i)),((i,s)=>Qf(i,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const i=n.lastSegment(),s=n.popLast();e.addOnCommittedListener((()=>{this.vn.add(n)}));const r={collectionId:i,parent:oi(s)};return xR(e).put(r)}return Z.resolve()}getCollectionParents(e,n){const i=[],s=IDBKeyRange.bound([n,""],[ZD(n),""],!1,!0);return xR(e).J(s).next((r=>{for(const a of r){if(a.collectionId!==n)break;i.push(Xs(a.parent))}return i}))}addFieldIndex(e,n){const i=Sh(e),s=(function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map((u=>[u.fieldPath.canonicalString(),u.kind]))}})(n);delete s.indexId;const r=i.add(s);if(n.indexState){const a=qc(e);return r.next((c=>{a.put(uR(c,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return r.next()}deleteFieldIndex(e,n){const i=Sh(e),s=qc(e),r=Bc(e);return i.delete(n.indexId).next((()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const n=Sh(e),i=Bc(e),s=qc(e);return n.Z().next((()=>i.Z())).next((()=>s.Z()))}createTargetIndexes(e,n){return Z.forEach(this.Mn(n),(i=>this.getIndexType(e,i).next((s=>{if(s===0||s===1){const r=new gR(i).Dn();if(r!=null)return this.addFieldIndex(e,r)}}))))}getDocumentsMatchingTarget(e,n){const i=Bc(e);let s=!0;const r=new Map;return Z.forEach(this.Mn(n),(a=>this.xn(e,a).next((c=>{s&&(s=!!c),r.set(a,c)})))).next((()=>{if(s){let a=tt();const c=[];return Z.forEach(r,((u,h)=>{ge(vR,`Using index ${(function(O){return`id=${O.indexId}|cg=${O.collectionGroup}|f=${O.fields.map((z=>`${z.fieldPath}:${z.kind}`)).join(",")}`})(u)} to execute ${Cl(n)}`);const g=(function(O,z){const j=A_(z);if(j===void 0)return null;for(const W of Og(O,j.fieldPath))switch(W.op){case"array-contains-any":return W.value.arrayValue.values||[];case"array-contains":return[W.value]}return null})(h,u),x=(function(O,z){const j=new Map;for(const W of sl(z))for(const D of Og(O,W.fieldPath))switch(D.op){case"==":case"in":j.set(W.fieldPath.canonicalString(),D.value);break;case"not-in":case"!=":return j.set(W.fieldPath.canonicalString(),D.value),Array.from(j.values())}return null})(h,u),T=(function(O,z){const j=[];let W=!0;for(const D of sl(z)){const C=D.kind===0?J1(O,D.fieldPath,O.startAt):Q1(O,D.fieldPath,O.startAt);j.push(C.value),W&&(W=C.inclusive)}return new ca(j,W)})(h,u),b=(function(O,z){const j=[];let W=!0;for(const D of sl(z)){const C=D.kind===0?Q1(O,D.fieldPath,O.endAt):J1(O,D.fieldPath,O.endAt);j.push(C.value),W&&(W=C.inclusive)}return new ca(j,W)})(h,u),S=this.On(u,h,T),P=this.On(u,h,b),M=this.Nn(u,h,x),V=this.Bn(u.indexId,g,S,T.inclusive,P,b.inclusive,M);return Z.forEach(V,(q=>i.Y(q,n.limit).next((O=>{O.forEach((z=>{const j=be.fromSegments(z.documentKey);a.has(j)||(a=a.add(j),c.push(j))}))}))))})).next((()=>c))}return Z.resolve(null)}))}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=N$(Nt.create(e.filters,"and")).map((i=>L_(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,n),n)}Bn(e,n,i,s,r,a,c){const u=(n!=null?n.length:1)*Math.max(i.length,r.length),h=u/(n!=null?n.length:1),g=[];for(let x=0;x<u;++x){const T=n?this.Ln(n[x/h]):jp,b=this.kn(e,T,i[x%h],s),S=this.qn(e,T,r[x%h],a),P=c.map((M=>this.kn(e,T,M,!0)));g.push(...this.createRange(b,S,P))}return g}kn(e,n,i,s){const r=new cl(e,be.empty(),n,i);return s?r:r.An()}qn(e,n,i,s){const r=new cl(e,be.empty(),n,i);return s?r.An():r}xn(e,n){const i=new gR(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next((r=>{let a=null;for(const c of r)i.yn(c)&&(!a||c.fields.length>a.fields.length)&&(a=c);return a}))}getIndexType(e,n){let i=2;const s=this.Mn(n);return Z.forEach(s,(r=>this.xn(e,r).next((a=>{a?i!==0&&a.fields.length<(function(u){let h=new Mt(Wt.comparator),g=!1;for(const x of u.filters)for(const T of x.getFlattenedFilters())T.field.isKeyField()||(T.op==="array-contains"||T.op==="array-contains-any"?g=!0:h=h.add(T.field));for(const x of u.orderBy)x.field.isKeyField()||(h=h.add(x.field));return h.size+(g?1:0)})(r)&&(i=1):i=0})))).next((()=>(function(a){return a.limit!==null})(n)&&s.length>1&&i===2?1:i))}Qn(e,n){const i=new Eh;for(const s of sl(e)){const r=n.data.field(s.fieldPath);if(r==null)return null;const a=i.Pn(s.kind);ll.Kt.Dt(r,a)}return i.un()}Ln(e){const n=new Eh;return ll.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const i=new Eh;return ll.Kt.Dt(Al(this.databaseId,n),i.Pn((function(r){const a=sl(r);return a.length===0?0:a[a.length-1].kind})(e))),i.un()}Nn(e,n,i){if(i===null)return[];let s=[];s.push(new Eh);let r=0;for(const a of sl(e)){const c=i[r++];for(const u of s)if(this.Un(n,a.fieldPath)&&If(c))s=this.Kn(s,a,c);else{const h=u.Pn(a.kind);ll.Kt.Dt(c,h)}}return this.Wn(s)}On(e,n,i){return this.Nn(e,n,i.position)}Wn(e){const n=[];for(let i=0;i<e.length;++i)n[i]=e[i].un();return n}Kn(e,n,i){const s=[...e],r=[];for(const a of i.arrayValue.values||[])for(const c of s){const u=new Eh;u.seed(c.un()),ll.Kt.Dt(a,u.Pn(n.kind)),r.push(u)}return r}Un(e,n){return!!e.filters.find((i=>i instanceof ft&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(e,n){const i=Sh(e),s=qc(e);return(n?i.J(I_,IDBKeyRange.bound(n,n)):i.J()).next((r=>{const a=[];return Z.forEach(r,(c=>s.get([c.indexId,this.uid]).next((u=>{a.push((function(g,x){const T=x?new Tf(x.sequenceNumber,new $i(Ml(x.readTime),new be(Xs(x.documentKey)),x.largestBatchId)):Tf.empty(),b=g.fields.map((([S,P])=>new sg(Wt.fromServerFormat(S),P)));return new Dg(g.indexId,g.collectionGroup,b,T)})(c,u))})))).next((()=>a))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((n=>n.length===0?null:(n.sort(((i,s)=>{const r=i.indexState.sequenceNumber-s.indexState.sequenceNumber;return r!==0?r:Xe(i.collectionGroup,s.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(e,n,i){const s=Sh(e),r=qc(e);return this.Gn(e).next((a=>s.J(I_,IDBKeyRange.bound(n,n)).next((c=>Z.forEach(c,(u=>r.put(uR(u.indexId,this.uid,a,i))))))))}updateIndexEntries(e,n){const i=new Map;return Z.forEach(n,((s,r)=>{const a=i.get(s.collectionGroup);return(a?Z.resolve(a):this.getFieldIndexes(e,s.collectionGroup)).next((c=>(i.set(s.collectionGroup,c),Z.forEach(c,(u=>this.zn(e,s,u).next((h=>{const g=this.jn(r,u);return h.isEqual(g)?Z.resolve():this.Jn(e,r,u,h,g)})))))))}))}Hn(e,n,i,s){return Bc(e).put(s.Rn(this.uid,this.$n(i,n.key),n.key))}Yn(e,n,i,s){return Bc(e).delete(s.Vn(this.uid,this.$n(i,n.key),n.key))}zn(e,n,i){const s=Bc(e);let r=new Mt(Vo);return s.ee({index:fk,range:IDBKeyRange.only([i.indexId,this.uid,hg(this.$n(i,n))])},((a,c)=>{r=r.add(new cl(i.indexId,n,pR(c.arrayValue),pR(c.directionalValue)))})).next((()=>r))}jn(e,n){let i=new Mt(Vo);const s=this.Qn(n,e);if(s==null)return i;const r=A_(n);if(r!=null){const a=e.data.field(r.fieldPath);if(If(a))for(const c of a.arrayValue.values||[])i=i.add(new cl(n.indexId,e.key,this.Ln(c),s))}else i=i.add(new cl(n.indexId,e.key,jp,s));return i}Jn(e,n,i,s,r){ge(vR,"Updating index entries for document '%s'",n.key);const a=[];return(function(u,h,g,x,T){const b=u.getIterator(),S=h.getIterator();let P=Oc(b),M=Oc(S);for(;P||M;){let V=!1,q=!1;if(P&&M){const O=g(P,M);O<0?q=!0:O>0&&(V=!0)}else P!=null?q=!0:V=!0;V?(x(M),M=Oc(S)):q?(T(P),P=Oc(b)):(P=Oc(b),M=Oc(S))}})(s,r,Vo,(c=>{a.push(this.Hn(e,n,i,c))}),(c=>{a.push(this.Yn(e,n,i,c))})),Z.waitFor(a)}Gn(e){let n=1;return qc(e).ee({index:hk,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,s,r)=>{r.done(),n=s.sequenceNumber+1})).next((()=>n))}createRange(e,n,i){i=i.sort(((a,c)=>Vo(a,c))).filter(((a,c,u)=>!c||Vo(a,u[c-1])!==0));const s=[];s.push(e);for(const a of i){const c=Vo(a,e),u=Vo(a,n);if(c===0)s[0]=e.An();else if(c>0&&u<0)s.push(a),s.push(a.An());else if(u>0)break}s.push(n);const r=[];for(let a=0;a<s.length;a+=2){if(this.Zn(s[a],s[a+1]))return[];const c=s[a].Vn(this.uid,jp,be.empty()),u=s[a+1].Vn(this.uid,jp,be.empty());r.push(IDBKeyRange.bound(c,u))}return r}Zn(e,n){return Vo(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(_R)}getMinOffset(e,n){return Z.mapArray(this.Mn(n),(i=>this.xn(e,i).next((s=>s||Ne(44426))))).next(_R)}}function xR(t){return Mn(t,Sf)}function Bc(t){return Mn(t,ef)}function Sh(t){return Mn(t,Dw)}function qc(t){return Mn(t,Zh)}function _R(t){Ve(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){const s=t[i].indexState.offset;Nw(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new $i(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},vV=41943040;class ni{static withCacheSize(e){return new ni(e,ni.DEFAULT_COLLECTION_PERCENTILE,ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xV(t,e,n){const i=t.store(_s),s=t.store(Au),r=[],a=IDBKeyRange.only(n.batchId);let c=0;const u=i.ee({range:a},((g,x,T)=>(c++,T.delete())));r.push(u.next((()=>{Ve(c===1,47070,{batchId:n.batchId})})));const h=[];for(const g of n.mutations){const x=ck(e,g.key.path,n.batchId);r.push(s.delete(x)),h.push(g.key)}return Z.waitFor(r).next((()=>h))}function jg(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ne(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ni.DEFAULT_COLLECTION_PERCENTILE=10,ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ni.DEFAULT=new ni(vV,ni.DEFAULT_COLLECTION_PERCENTILE,ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ni.DISABLED=new ni(-1,0,0);class Cy{constructor(e,n,i,s){this.userId=e,this.serializer=n,this.indexManager=i,this.referenceDelegate=s,this.Xn={}}static wt(e,n,i,s){Ve(e.uid!=="",64387);const r=e.isAuthenticated()?e.uid:"";return new Cy(r,n,i,s)}checkEmpty(e){let n=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Lo(e).ee({index:pl,range:i},((s,r,a)=>{n=!1,a.done()})).next((()=>n))}addMutationBatch(e,n,i,s){const r=Kc(e),a=Lo(e);return a.add({}).next((c=>{Ve(typeof c=="number",49019);const u=new Gw(c,n,i,s),h=(function(b,S,P){const M=P.baseMutations.map((q=>Mf(b.yt,q))),V=P.mutations.map((q=>Mf(b.yt,q)));return{userId:S,batchId:P.batchId,localWriteTimeMs:P.localWriteTime.toMillis(),baseMutations:M,mutations:V}})(this.serializer,this.userId,u),g=[];let x=new Mt(((T,b)=>Xe(T.canonicalString(),b.canonicalString())));for(const T of s){const b=ck(this.userId,T.key.path,c);x=x.add(T.key.path.popLast()),g.push(a.put(h)),g.push(r.put(b,hH))}return x.forEach((T=>{g.push(this.indexManager.addToCollectionParentIndex(e,T))})),e.addOnCommittedListener((()=>{this.Xn[c]=u.keys()})),Z.waitFor(g).next((()=>u))}))}lookupMutationBatch(e,n){return Lo(e).get(n).next((i=>i?(Ve(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:n}),al(this.serializer,i)):null))}er(e,n){return this.Xn[n]?Z.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next((i=>{if(i){const s=i.keys();return this.Xn[n]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=IDBKeyRange.lowerBound([this.userId,i]);let r=null;return Lo(e).ee({index:pl,range:s},((a,c,u)=>{c.userId===this.userId&&(Ve(c.batchId>=i,47524,{tr:i}),r=al(this.serializer,c)),u.done()})).next((()=>r))}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=Jo;return Lo(e).ee({index:pl,range:n,reverse:!0},((s,r,a)=>{i=r.batchId,a.done()})).next((()=>i))}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Jo],[this.userId,Number.POSITIVE_INFINITY]);return Lo(e).J(pl,n).next((i=>i.map((s=>al(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,n){const i=rg(this.userId,n.path),s=IDBKeyRange.lowerBound(i),r=[];return Kc(e).ee({range:s},((a,c,u)=>{const[h,g,x]=a,T=Xs(g);if(h===this.userId&&n.path.isEqual(T))return Lo(e).get(x).next((b=>{if(!b)throw Ne(61480,{nr:a,batchId:x});Ve(b.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:b.userId,batchId:x}),r.push(al(this.serializer,b))}));u.done()})).next((()=>r))}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Mt(Xe);const s=[];return n.forEach((r=>{const a=rg(this.userId,r.path),c=IDBKeyRange.lowerBound(a),u=Kc(e).ee({range:c},((h,g,x)=>{const[T,b,S]=h,P=Xs(b);T===this.userId&&r.path.isEqual(P)?i=i.add(S):x.done()}));s.push(u)})),Z.waitFor(s).next((()=>this.rr(e,i)))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1,r=rg(this.userId,i),a=IDBKeyRange.lowerBound(r);let c=new Mt(Xe);return Kc(e).ee({range:a},((u,h,g)=>{const[x,T,b]=u,S=Xs(T);x===this.userId&&i.isPrefixOf(S)?S.length===s&&(c=c.add(b)):g.done()})).next((()=>this.rr(e,c)))}rr(e,n){const i=[],s=[];return n.forEach((r=>{s.push(Lo(e).get(r).next((a=>{if(a===null)throw Ne(35274,{batchId:r});Ve(a.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:a.userId,batchId:r}),i.push(al(this.serializer,a))})))})),Z.waitFor(s).next((()=>i))}removeMutationBatch(e,n){return xV(e.le,this.userId,n).next((i=>(e.addOnCommittedListener((()=>{this.ir(n.batchId)})),Z.forEach(i,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((n=>{if(!n)return Z.resolve();const i=IDBKeyRange.lowerBound((function(a){return[a]})(this.userId)),s=[];return Kc(e).ee({range:i},((r,a,c)=>{if(r[0]===this.userId){const u=Xs(r[1]);s.push(u)}else c.done()})).next((()=>{Ve(s.length===0,56720,{sr:s.map((r=>r.canonicalString()))})}))}))}containsKey(e,n){return _V(e,this.userId,n)}_r(e){return TV(e).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:Jo,lastStreamToken:""}))}}function _V(t,e,n){const i=rg(e,n.path),s=i[1],r=IDBKeyRange.lowerBound(i);let a=!1;return Kc(t).ee({range:r,X:!0},((c,u,h)=>{const[g,x,T]=c;g===e&&x===s&&(a=!0),h.done()})).next((()=>a))}function Lo(t){return Mn(t,_s)}function Kc(t){return Mn(t,Au)}function TV(t){return Mn(t,bf)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Pl(0)}static cr(){return new Pl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D${constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next((n=>{const i=new Pl(n.highestTargetId);return n.highestTargetId=i.next(),this.hr(e,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((n=>Ue.fromTimestamp(new At(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(e,n,i){return this.lr(e).next((s=>(s.highestListenSequenceNumber=n,i&&(s.lastRemoteSnapshotVersion=i.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.hr(e,s))))}addTargetData(e,n){return this.Pr(e,n).next((()=>this.lr(e).next((i=>(i.targetCount+=1,this.Tr(n,i),this.hr(e,i))))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next((()=>jc(e).delete(n.targetId))).next((()=>this.lr(e))).next((i=>(Ve(i.targetCount>0,8065),i.targetCount-=1,this.hr(e,i))))}removeTargets(e,n,i){let s=0;const r=[];return jc(e).ee(((a,c)=>{const u=Lh(c);u.sequenceNumber<=n&&i.get(u.targetId)===null&&(s++,r.push(this.removeTargetData(e,u)))})).next((()=>Z.waitFor(r))).next((()=>s))}forEachTarget(e,n){return jc(e).ee(((i,s)=>{const r=Lh(s);n(r)}))}lr(e){return wR(e).get(Lg).next((n=>(Ve(n!==null,2888),n)))}hr(e,n){return wR(e).put(Lg,n)}Pr(e,n){return jc(e).put(pV(this.serializer,n))}Tr(e,n){let i=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,i=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.lr(e).next((n=>n.targetCount))}getTargetData(e,n){const i=Cl(n),s=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let r=null;return jc(e).ee({range:s,index:dk},((a,c,u)=>{const h=Lh(c);Qf(n,h.target)&&(r=h,u.done())})).next((()=>r))}addMatchingKeys(e,n,i){const s=[],r=qo(e);return n.forEach((a=>{const c=oi(a.path);s.push(r.put({targetId:i,path:c})),s.push(this.referenceDelegate.addReference(e,i,a))})),Z.waitFor(s)}removeMatchingKeys(e,n,i){const s=qo(e);return Z.forEach(n,(r=>{const a=oi(r.path);return Z.waitFor([s.delete([i,a]),this.referenceDelegate.removeReference(e,i,r)])}))}removeMatchingKeysForTargetId(e,n){const i=qo(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(s)}getMatchingKeysForTargetId(e,n){const i=IDBKeyRange.bound([n],[n+1],!1,!0),s=qo(e);let r=tt();return s.ee({range:i,X:!0},((a,c,u)=>{const h=Xs(a[1]),g=new be(h);r=r.add(g)})).next((()=>r))}containsKey(e,n){const i=oi(n.path),s=IDBKeyRange.bound([i],[ZD(i)],!1,!0);let r=0;return qo(e).ee({index:Pw,X:!0,range:s},(([a,c],u,h)=>{a!==0&&(r++,h.done())})).next((()=>r>0))}At(e,n){return jc(e).get(n).next((i=>i?Lh(i):null))}}function jc(t){return Mn(t,Cu)}function wR(t){return Mn(t,wl)}function qo(t){return Mn(t,Iu)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR="LruGarbageCollector",k$=1048576;function ER([t,e],[n,i]){const s=Xe(t,n);return s===0?Xe(e,i):s}class V${constructor(e){this.Ir=e,this.buffer=new Mt(ER),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();ER(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class wV{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ge(bR,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(()=>A(this,null,function*(){this.Rr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){ya(n)?ge(bR,"Ignoring IndexedDB error during garbage collection: ",n):yield ga(n)}yield this.Vr(3e5)})))}}class L${constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return Z.resolve(Ii.ce);const i=new V$(n);return this.mr.forEachTarget(e,(s=>i.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>i.Ar(s))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(TR)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),TR):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,s,r,a,c,u,h;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),s=this.params.maximumSequenceNumbersToCollect):s=x,a=Date.now(),this.nthSequenceNumber(e,s)))).next((x=>(i=x,c=Date.now(),this.removeTargets(e,i,n)))).next((x=>(r=x,u=Date.now(),this.removeOrphanedDocuments(e,i)))).next((x=>(h=Date.now(),Gc()<=ut.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-g}ms
	Determined least recently used ${s} in `+(c-a)+`ms
	Removed ${r} targets in `+(u-c)+`ms
	Removed ${x} documents in `+(h-u)+`ms
Total Duration: ${h-g}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:x}))))}}function bV(t,e){return new L$(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U${constructor(e,n){this.db=e,this.garbageCollector=bV(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((i=>n.next((s=>i+s))))}wr(e){let n=0;return this.pr(e,(i=>{n++})).next((()=>n))}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,((i,s)=>n(s)))}addReference(e,n,i){return Gp(e,i)}removeReference(e,n,i){return Gp(e,i)}removeTargets(e,n,i){return this.db.getTargetCache().removeTargets(e,n,i)}markPotentiallyOrphaned(e,n){return Gp(e,n)}br(e,n){return(function(s,r){let a=!1;return TV(s).te((c=>_V(s,c,r).next((u=>(u&&(a=!0),Z.resolve(!u)))))).next((()=>a))})(e,n)}removeOrphanedDocuments(e,n){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let r=0;return this.Sr(e,((a,c)=>{if(c<=n){const u=this.br(e,a).next((h=>{if(!h)return r++,i.getEntry(e,a).next((()=>(i.removeEntry(a,Ue.min()),qo(e).delete((function(x){return[0,oi(x.path)]})(a)))))}));s.push(u)}})).next((()=>Z.waitFor(s))).next((()=>i.apply(e))).next((()=>r))}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,n){return Gp(e,n)}Sr(e,n){const i=qo(e);let s,r=Ii.ce;return i.ee({index:Pw},(([a,c],{path:u,sequenceNumber:h})=>{a===0?(r!==Ii.ce&&n(new be(Xs(s)),r),r=h,s=u):r=Ii.ce})).next((()=>{r!==Ii.ce&&n(new be(Xs(s)),r)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Gp(t,e){return qo(t).put((function(i,s){return{targetId:0,path:oi(i.path),sequenceNumber:s}})(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(){this.changes=new Qr((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,jt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Z.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O${constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,i){return tl(e).put(i)}removeEntry(e,n,i){return tl(e).delete((function(r,a){const c=r.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Bg(a),c[c.length-1]]})(n,i))}updateMetadata(e,n){return this.getMetadata(e).next((i=>(i.byteSize+=n,this.Dr(e,i))))}getEntry(e,n){let i=jt.newInvalidDocument(n);return tl(e).ee({index:og,range:IDBKeyRange.only(Ah(n))},((s,r)=>{i=this.Cr(n,r)})).next((()=>i))}vr(e,n){let i={size:0,document:jt.newInvalidDocument(n)};return tl(e).ee({index:og,range:IDBKeyRange.only(Ah(n))},((s,r)=>{i={document:this.Cr(n,r),size:jg(r)}})).next((()=>i))}getEntries(e,n){let i=Ni();return this.Fr(e,n,((s,r)=>{const a=this.Cr(s,r);i=i.insert(s,a)})).next((()=>i))}Mr(e,n){let i=Ni(),s=new Ft(be.comparator);return this.Fr(e,n,((r,a)=>{const c=this.Cr(r,a);i=i.insert(r,c),s=s.insert(r,jg(a))})).next((()=>({documents:i,Or:s})))}Fr(e,n,i){if(n.isEmpty())return Z.resolve();let s=new Mt(CR);n.forEach((u=>s=s.add(u)));const r=IDBKeyRange.bound(Ah(s.first()),Ah(s.last())),a=s.getIterator();let c=a.getNext();return tl(e).ee({index:og,range:r},((u,h,g)=>{const x=be.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;c&&CR(c,x)<0;)i(c,null),c=a.getNext();c&&c.isEqual(x)&&(i(c,h),c=a.hasNext()?a.getNext():null),c?g.j(Ah(c)):g.done()})).next((()=>{for(;c;)i(c,null),c=a.hasNext()?a.getNext():null}))}getDocumentsMatchingQuery(e,n,i,s,r){const a=n.path,c=[a.popLast().toArray(),a.lastSegment(),Bg(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return tl(e).J(IDBKeyRange.bound(c,u,!0)).next((h=>{r==null||r.incrementDocumentReadCount(h.length);let g=Ni();for(const x of h){const T=this.Cr(be.fromSegments(x.prefixPath.concat(x.collectionGroup,x.documentId)),x);T.isFoundDocument()&&(Zf(n,T)||s.has(T.key))&&(g=g.insert(T.key,T))}return g}))}getAllFromCollectionGroup(e,n,i,s){let r=Ni();const a=AR(n,i),c=AR(n,$i.max());return tl(e).ee({index:uk,range:IDBKeyRange.bound(a,c,!0)},((u,h,g)=>{const x=this.Cr(be.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);r=r.insert(x.key,x),r.size===s&&g.done()})).next((()=>r))}newChangeBuffer(e){return new F$(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((n=>n.byteSize))}getMetadata(e){return SR(e).get(C_).next((n=>(Ve(!!n,20021),n)))}Dr(e,n){return SR(e).put(C_,n)}Cr(e,n){if(n){const i=b$(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual(Ue.min())))return i}return jt.newInvalidDocument(e)}}function SV(t){return new O$(t)}class F$ extends EV{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Qr((i=>i.toString()),((i,s)=>i.isEqual(s)))}applyChanges(e){const n=[];let i=0,s=new Mt(((r,a)=>Xe(r.canonicalString(),a.canonicalString())));return this.changes.forEach(((r,a)=>{const c=this.Br.get(r);if(n.push(this.Nr.removeEntry(e,r,c.readTime)),a.isValidDocument()){const u=lR(this.Nr.serializer,a);s=s.add(r.path.popLast());const h=jg(u);i+=h-c.size,n.push(this.Nr.addEntry(e,r,u))}else if(i-=c.size,this.trackRemovals){const u=lR(this.Nr.serializer,a.convertToNoDocument(Ue.min()));n.push(this.Nr.addEntry(e,r,u))}})),s.forEach((r=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Nr.updateMetadata(e,i)),Z.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next((i=>(this.Br.set(n,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next((({documents:i,Or:s})=>(s.forEach(((r,a)=>{this.Br.set(r,{size:a,readTime:i.get(r).readTime})})),i)))}}function SR(t){return Mn(t,Ef)}function tl(t){return Mn(t,Vg)}function Ah(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function AR(t,e){const n=e.documentKey.path.toArray();return[t,Bg(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function CR(t,e){const n=t.path.toArray(),i=e.path.toArray();let s=0;for(let r=0;r<n.length-2&&r<i.length-2;++r)if(s=Xe(n[r],i[r]),s)return s;return s=Xe(n.length,i.length),s||(s=Xe(n[n.length-2],i[i.length-2]),s||Xe(n[n.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B${constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(i=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(i!==null&&sf(i.mutation,s,Ri.empty(),At.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,tt()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=tt()){const s=Zs();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,i).next((r=>{let a=kh();return r.forEach(((c,u)=>{a=a.insert(c,u.overlayedDocument)})),a}))))}getOverlayedDocuments(e,n){const i=Zs();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,tt())))}populateOverlays(e,n,i){const s=[];return i.forEach((r=>{n.has(r)||s.push(r)})),this.documentOverlayCache.getOverlays(e,s).next((r=>{r.forEach(((a,c)=>{n.set(a,c)}))}))}computeViews(e,n,i,s){let r=Ni();const a=nf(),c=(function(){return nf()})();return n.forEach(((u,h)=>{const g=i.get(h.key);s.has(h.key)&&(g===void 0||g.mutation instanceof Xr)?r=r.insert(h.key,h):g!==void 0?(a.set(h.key,g.mutation.getFieldMask()),sf(g.mutation,h,g.mutation.getFieldMask(),At.now())):a.set(h.key,Ri.empty())})),this.recalculateAndSaveOverlays(e,r).next((u=>(u.forEach(((h,g)=>a.set(h,g))),n.forEach(((h,g)=>{var x;return c.set(h,new B$(g,(x=a.get(h))!=null?x:null))})),c)))}recalculateAndSaveOverlays(e,n){const i=nf();let s=new Ft(((a,c)=>a-c)),r=tt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((a=>{for(const c of a)c.keys().forEach((u=>{const h=n.get(u);if(h===null)return;let g=i.get(u)||Ri.empty();g=c.applyToLocalView(h,g),i.set(u,g);const x=(s.get(c.batchId)||tt()).add(u);s=s.insert(c.batchId,x)}))})).next((()=>{const a=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),h=u.key,g=u.value,x=jk();g.forEach((T=>{if(!r.has(T)){const b=Yk(n.get(T),i.get(T));b!==null&&x.set(T,b),r=r.add(T)}})),a.push(this.documentOverlayCache.saveOverlays(e,h,x))}return Z.waitFor(a)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,s){return(function(a){return be.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Fw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next((r=>{const a=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-r.size):Z.resolve(Zs());let c=Su,u=r;return a.next((h=>Z.forEach(h,((g,x)=>(c<x.largestBatchId&&(c=x.largestBatchId),r.get(g)?Z.resolve():this.remoteDocumentCache.getEntry(e,g).next((T=>{u=u.insert(g,T)}))))).next((()=>this.populateOverlays(e,h,r))).next((()=>this.computeViews(e,u,h,tt()))).next((g=>({batchId:c,changes:qk(g)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new be(n)).next((i=>{let s=kh();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const r=n.collectionGroup;let a=kh();return this.indexManager.getCollectionParents(e,r).next((c=>Z.forEach(c,(u=>{const h=(function(x,T){return new Jr(T,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(n,u.child(r));return this.getDocumentsMatchingCollectionQuery(e,h,i,s).next((g=>{g.forEach(((x,T)=>{a=a.insert(x,T)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,n,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((a=>(r=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,r,s)))).next((a=>{r.forEach(((u,h)=>{const g=h.getKey();a.get(g)===null&&(a=a.insert(g,jt.newInvalidDocument(g)))}));let c=kh();return a.forEach(((u,h)=>{const g=r.get(u);g!==void 0&&sf(g.mutation,h,Ri.empty(),At.now()),Zf(n,h)&&(c=c.insert(u,h))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q${constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Z.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:mn(s.createTime)}})(n)),Z.resolve()}getNamedQuery(e,n){return Z.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:Ww(s.bundledQuery),readTime:mn(s.readTime)}})(n)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j${constructor(){this.overlays=new Ft(be.comparator),this.qr=new Map}getOverlay(e,n){return Z.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Zs();return Z.forEach(n,(s=>this.getOverlay(e,s).next((r=>{r!==null&&i.set(s,r)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((s,r)=>{this.St(e,n,r)})),Z.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach((r=>this.overlays=this.overlays.remove(r))),this.qr.delete(i)),Z.resolve()}getOverlaysForCollection(e,n,i){const s=Zs(),r=n.length+1,a=new be(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const u=c.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===r&&u.largestBatchId>i&&s.set(u.getKey(),u)}return Z.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let r=new Ft(((h,g)=>h-g));const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let g=r.get(h.largestBatchId);g===null&&(g=Zs(),r=r.insert(h.largestBatchId,g)),g.set(h.getKey(),h)}}const c=Zs(),u=r.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((h,g)=>c.set(h,g))),!(c.size()>=s)););return Z.resolve(c)}St(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new Hw(n,i));let r=this.qr.get(n);r===void 0&&(r=tt(),this.qr.set(n,r)),this.qr.set(n,r.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G${constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(){this.Qr=new Mt(Fn.$r),this.Ur=new Mt(Fn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new Fn(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Gr(new Fn(e,n))}zr(e,n){e.forEach((i=>this.removeReference(i,n)))}jr(e){const n=new be(new ht([])),i=new Fn(n,e),s=new Fn(n,e+1),r=[];return this.Ur.forEachInRange([i,s],(a=>{this.Gr(a),r.push(a.key)})),r}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new be(new ht([])),i=new Fn(n,e),s=new Fn(n,e+1);let r=tt();return this.Ur.forEachInRange([i,s],(a=>{r=r.add(a.key)})),r}containsKey(e){const n=new Fn(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Fn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return be.comparator(e.key,n.key)||Xe(e.Yr,n.Yr)}static Kr(e,n){return Xe(e.Yr,n.Yr)||be.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z${constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Mt(Fn.$r)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const r=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Gw(r,n,i,s);this.mutationQueue.push(a);for(const c of s)this.Zr=this.Zr.add(new Fn(c.key,r)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return Z.resolve(a)}lookupMutationBatch(e,n){return Z.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.ei(i),r=s<0?0:s;return Z.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?Jo:this.tr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Fn(n,0),s=new Fn(n,Number.POSITIVE_INFINITY),r=[];return this.Zr.forEachInRange([i,s],(a=>{const c=this.Xr(a.Yr);r.push(c)})),Z.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Mt(Xe);return n.forEach((s=>{const r=new Fn(s,0),a=new Fn(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([r,a],(c=>{i=i.add(c.Yr)}))})),Z.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let r=i;be.isDocumentKey(r)||(r=r.child(""));const a=new Fn(new be(r),0);let c=new Mt(Xe);return this.Zr.forEachWhile((u=>{const h=u.key.path;return!!i.isPrefixOf(h)&&(h.length===s&&(c=c.add(u.Yr)),!0)}),a),Z.resolve(this.ti(c))}ti(e){const n=[];return e.forEach((i=>{const s=this.Xr(i);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){Ve(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return Z.forEach(n.mutations,(s=>{const r=new Fn(s.key,n.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,n){const i=new Fn(n,0),s=this.Zr.firstAfterOrEqual(i);return Z.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H${constructor(e){this.ri=e,this.docs=(function(){return new Ft(be.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),r=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-r,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return Z.resolve(i?i.document.mutableCopy():jt.newInvalidDocument(n))}getEntries(e,n){let i=Ni();return n.forEach((s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():jt.newInvalidDocument(s))})),Z.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let r=Ni();const a=n.path,c=new be(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:h,value:{document:g}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||Nw(sk(g),i)<=0||(s.has(g.key)||Zf(n,g))&&(r=r.insert(g.key,g.mutableCopy()))}return Z.resolve(r)}getAllFromCollectionGroup(e,n,i,s){Ne(9500)}ii(e,n){return Z.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new $$(this)}getSize(e){return Z.resolve(this.size)}}class $$ extends EV{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(i)})),Z.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K${constructor(e){this.persistence=e,this.si=new Qr((n=>Cl(n)),Qf),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.oi=0,this._i=new Qw,this.targetCount=0,this.ai=Pl.ur()}forEachTarget(e,n){return this.si.forEach(((i,s)=>n(s))),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),Z.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Pl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Z.resolve()}updateTargetData(e,n){return this.Pr(n),Z.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,n,i){let s=0;const r=[];return this.si.forEach(((a,c)=>{c.sequenceNumber<=n&&i.get(c.targetId)===null&&(this.si.delete(a),r.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)})),Z.waitFor(r).next((()=>s))}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return Z.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),Z.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const s=this.persistence.referenceDelegate,r=[];return s&&n.forEach((a=>{r.push(s.markPotentiallyOrphaned(e,a))})),Z.waitFor(r)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Z.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return Z.resolve(i)}containsKey(e,n){return Z.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e,n){this.ui={},this.overlays={},this.ci=new Ii(0),this.li=!1,this.li=!0,this.hi=new G$,this.referenceDelegate=e(this),this.Pi=new K$(this),this.indexManager=new M$,this.remoteDocumentCache=(function(s){return new H$(s)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new mV(n),this.Ii=new q$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new j$,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new z$(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){ge("MemoryPersistence","Starting transaction:",e);const s=new W$(this.ci.next());return this.referenceDelegate.Ei(),i(s).next((r=>this.referenceDelegate.di(s).next((()=>r)))).toPromise().then((r=>(s.raiseOnCommittedEvent(),r)))}Ai(e,n){return Z.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,n))))}}class W$ extends ok{constructor(e){super(),this.currentSequenceNumber=e}}class Iy{constructor(e){this.persistence=e,this.Ri=new Qw,this.Vi=null}static mi(e){return new Iy(e)}get fi(){if(this.Vi)return this.Vi;throw Ne(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),Z.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),Z.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Z.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((r=>this.fi.add(r.toString())))})).next((()=>i.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.fi,(i=>{const s=be.fromPath(i);return this.gi(e,s).next((r=>{r||n.removeEntry(s,Ue.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return Z.or([()=>Z.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Gg{constructor(e,n){this.persistence=e,this.pi=new Qr((i=>oi(i.path)),((i,s)=>i.isEqual(s))),this.garbageCollector=bV(this,n)}static mi(e,n){return new Gg(e,n)}Ei(){}di(e){return Z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((s=>i+s))))}wr(e){let n=0;return this.pr(e,(i=>{n++})).next((()=>n))}pr(e,n){return Z.forEach(this.pi,((i,s)=>this.br(e,i,s).next((r=>r?Z.resolve():n(s)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),r=s.newChangeBuffer();return s.ii(e,(a=>this.br(e,a,n).next((c=>{c||(i++,r.removeEntry(a,Ue.min()))})))).next((()=>r.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),Z.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=lg(e.data.value)),n}br(e,n,i){return Z.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return Z.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y${constructor(e){this.serializer=e}k(e,n,i,s){const r=new yy("createOrUpgrade",n);i<1&&s>=1&&((function(u){u.createObjectStore(Jf)})(e),(function(u){u.createObjectStore(bf,{keyPath:dH}),u.createObjectStore(_s,{keyPath:O1,autoIncrement:!0}).createIndex(pl,F1,{unique:!0}),u.createObjectStore(Au)})(e),IR(e),(function(u){u.createObjectStore(rl)})(e));let a=Z.resolve();return i<3&&s>=3&&(i!==0&&((function(u){u.deleteObjectStore(Iu),u.deleteObjectStore(Cu),u.deleteObjectStore(wl)})(e),IR(e)),a=a.next((()=>(function(u){const h=u.store(wl),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ue.min().toTimestamp(),targetCount:0};return h.put(Lg,g)})(r)))),i<4&&s>=4&&(i!==0&&(a=a.next((()=>(function(u,h){return h.store(_s).J().next((x=>{u.deleteObjectStore(_s),u.createObjectStore(_s,{keyPath:O1,autoIncrement:!0}).createIndex(pl,F1,{unique:!0});const T=h.store(_s),b=x.map((S=>T.put(S)));return Z.waitFor(b)}))})(e,r)))),a=a.next((()=>{(function(u){u.createObjectStore(Ru,{keyPath:_H})})(e)}))),i<5&&s>=5&&(a=a.next((()=>this.yi(r)))),i<6&&s>=6&&(a=a.next((()=>((function(u){u.createObjectStore(Ef)})(e),this.wi(r))))),i<7&&s>=7&&(a=a.next((()=>this.Si(r)))),i<8&&s>=8&&(a=a.next((()=>this.bi(e,r)))),i<9&&s>=9&&(a=a.next((()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)}))),i<10&&s>=10&&(a=a.next((()=>this.Di(r)))),i<11&&s>=11&&(a=a.next((()=>{(function(u){u.createObjectStore(vy,{keyPath:TH})})(e),(function(u){u.createObjectStore(xy,{keyPath:wH})})(e)}))),i<12&&s>=12&&(a=a.next((()=>{(function(u){const h=u.createObjectStore(_y,{keyPath:RH});h.createIndex(R_,NH,{unique:!1}),h.createIndex(mk,MH,{unique:!1})})(e)}))),i<13&&s>=13&&(a=a.next((()=>(function(u){const h=u.createObjectStore(Vg,{keyPath:fH});h.createIndex(og,mH),h.createIndex(uk,pH)})(e))).next((()=>this.Ci(e,r))).next((()=>e.deleteObjectStore(rl)))),i<14&&s>=14&&(a=a.next((()=>this.Fi(e,r)))),i<15&&s>=15&&(a=a.next((()=>(function(u){u.createObjectStore(Dw,{keyPath:bH,autoIncrement:!0}).createIndex(I_,EH,{unique:!1}),u.createObjectStore(Zh,{keyPath:SH}).createIndex(hk,AH,{unique:!1}),u.createObjectStore(ef,{keyPath:CH}).createIndex(fk,IH,{unique:!1})})(e)))),i<16&&s>=16&&(a=a.next((()=>{n.objectStore(Zh).clear()})).next((()=>{n.objectStore(ef).clear()}))),i<17&&s>=17&&(a=a.next((()=>{(function(u){u.createObjectStore(kw,{keyPath:PH})})(e)}))),i<18&&s>=18&&D2()&&(a=a.next((()=>{n.objectStore(Zh).clear()})).next((()=>{n.objectStore(ef).clear()}))),a}wi(e){let n=0;return e.store(rl).ee(((i,s)=>{n+=jg(s)})).next((()=>{const i={byteSize:n};return e.store(Ef).put(C_,i)}))}yi(e){const n=e.store(bf),i=e.store(_s);return n.J().next((s=>Z.forEach(s,(r=>{const a=IDBKeyRange.bound([r.userId,Jo],[r.userId,r.lastAcknowledgedBatchId]);return i.J(pl,a).next((c=>Z.forEach(c,(u=>{Ve(u.userId===r.userId,18650,"Cannot process batch from unexpected user",{batchId:u.batchId});const h=al(this.serializer,u);return xV(e,r.userId,h).next((()=>{}))}))))}))))}Si(e){const n=e.store(Iu),i=e.store(rl);return e.store(wl).get(Lg).next((s=>{const r=[];return i.ee(((a,c)=>{const u=new ht(a),h=(function(x){return[0,oi(x)]})(u);r.push(n.get(h).next((g=>g?Z.resolve():(x=>n.put({targetId:0,path:oi(x),sequenceNumber:s.highestListenSequenceNumber}))(u))))})).next((()=>Z.waitFor(r)))}))}bi(e,n){e.createObjectStore(Sf,{keyPath:xH});const i=n.store(Sf),s=new Jw,r=a=>{if(s.add(a)){const c=a.lastSegment(),u=a.popLast();return i.put({collectionId:c,parent:oi(u)})}};return n.store(rl).ee({X:!0},((a,c)=>{const u=new ht(a);return r(u.popLast())})).next((()=>n.store(Au).ee({X:!0},(([a,c,u],h)=>{const g=Xs(c);return r(g.popLast())}))))}Di(e){const n=e.store(Cu);return n.ee(((i,s)=>{const r=Lh(s),a=pV(this.serializer,r);return n.put(a)}))}Ci(e,n){const i=n.store(rl),s=[];return i.ee(((r,a)=>{const c=n.store(Vg),u=(function(x){return x.document?new be(ht.fromString(x.document.name).popFirst(5)):x.noDocument?be.fromSegments(x.noDocument.path):x.unknownDocument?be.fromSegments(x.unknownDocument.path):Ne(36783)})(a).path.toArray(),h={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};s.push(c.put(h))})).next((()=>Z.waitFor(s)))}Fi(e,n){const i=n.store(_s),s=SV(this.serializer),r=new Xw(Iy.mi,this.serializer.yt);return i.J().next((a=>{const c=new Map;return a.forEach((u=>{var g;let h=(g=c.get(u.userId))!=null?g:tt();al(this.serializer,u).keys().forEach((x=>h=h.add(x))),c.set(u.userId,h)})),Z.forEach(c,((u,h)=>{const g=new Bn(h),x=Ay.wt(this.serializer,g),T=r.getIndexManager(g),b=Cy.wt(g,this.serializer,T,r.referenceDelegate);return new AV(s,b,x,T).recalculateAndSaveOverlaysForDocumentKeys(new N_(n,Ii.ce),u).next()}))}))}}function IR(t){t.createObjectStore(Iu,{keyPath:yH}).createIndex(Pw,vH,{unique:!0}),t.createObjectStore(Cu,{keyPath:"targetId"}).createIndex(dk,gH,{unique:!0}),t.createObjectStore(wl)}const Uo="IndexedDbPersistence",Px=18e5,Dx=5e3,kx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",CV="main";class Zw{constructor(e,n,i,s,r,a,c,u,h,g,x=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.Mi=r,this.window=a,this.document=c,this.xi=h,this.Oi=g,this.Ni=x,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=T=>Promise.resolve(),!Zw.v())throw new me(oe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new U$(this,s),this.$i=n+CV,this.serializer=new mV(u),this.Ui=new ir(this.$i,this.Ni,new Y$(this.serializer)),this.hi=new S$,this.Pi=new D$(this.referenceDelegate,this.serializer),this.remoteDocumentCache=SV(this.serializer),this.Ii=new E$,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,g===!1&&fn(Uo,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new me(oe.FAILED_PRECONDITION,kx);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Ii(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=n=>A(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((n=>A(this,null,function*(){n.newVersion===null&&(yield e())})))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((()=>A(this,null,function*(){this.started&&(yield this.Wi())}))))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>zp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((n=>this.isPrimary&&!n?this.Zi(e).next((()=>!1)):!!n&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(ya(e))return ge(Uo,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ge(Uo,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Ch(e).get(Uc).next((n=>Z.resolve(this.es(n))))}ts(e){return zp(e).delete(this.clientId)}ns(){return A(this,null,function*(){if(this.isPrimary&&!this.rs(this.qi,Px)){this.qi=Date.now();const e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const i=Mn(n,Ru);return i.J().next((s=>{const r=this.ss(s,Px),a=s.filter((c=>r.indexOf(c)===-1));return Z.forEach(a,(c=>i.delete(c.clientId))).next((()=>a))}))})).catch((()=>[]));if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}})}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?Z.resolve(!0):Ch(e).get(Uc).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Dx)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new me(oe.FAILED_PRECONDITION,kx);return!1}}return!(!this.networkEnabled||!this.inForeground)||zp(e).J().next((i=>this.ss(i,Dx).find((s=>{if(this.clientId!==s.clientId){const r=!this.networkEnabled&&s.networkEnabled,a=!this.inForeground&&s.inForeground,c=this.networkEnabled===s.networkEnabled;if(r||a&&c)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&ge(Uo,`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}shutdown(){return A(this,null,function*(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),yield this.Ui.runTransaction("shutdown","readwrite",[Jf,Ru],(e=>{const n=new N_(e,Ii.ce);return this.Zi(n).next((()=>this.ts(n)))})),this.Ui.close(),this.Ps()})}ss(e,n){return e.filter((i=>this.rs(i.updateTimeMs,n)&&!this.us(i.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>zp(e).J().next((n=>this.ss(n,Px).map((i=>i.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return Cy.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new P$(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Ay.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,i){ge(Uo,"Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",r=(function(u){return u===18?VH:u===17?vk:u===16?kH:u===15?Vw:u===14?yk:u===13?gk:u===12?DH:u===11?pk:void Ne(60245)})(this.Ni);let a;return this.Ui.runTransaction(e,s,r,(c=>(a=new N_(c,this.ci?this.ci.next():Ii.ce),n==="readwrite-primary"?this.Hi(a).next((u=>!!u||this.Yi(a))).next((u=>{if(!u)throw fn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new me(oe.FAILED_PRECONDITION,rk);return i(a)})).next((u=>this.Xi(a).next((()=>u)))):this.Is(a).next((()=>i(a)))))).then((c=>(a.raiseOnCommittedEvent(),c)))}Is(e){return Ch(e).get(Uc).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Dx)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new me(oe.FAILED_PRECONDITION,kx)}))}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ch(e).put(Uc,n)}static v(){return ir.v()}Zi(e){const n=Ch(e);return n.get(Uc).next((i=>this.es(i)?(ge(Uo,"Releasing primary lease."),n.delete(Uc)):Z.resolve()))}rs(e,n){const i=Date.now();return!(e<i-n)&&(!(e>i)||(fn(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;P2()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const i=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return ge(Uo,`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return fn(Uo,"Failed to get zombied client id.",i),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){fn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch(e){}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ch(t){return Mn(t,Jf)}function zp(t){return Mn(t,Ru)}function eb(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=s}static As(e,n){let i=tt(),s=tt();for(const r of n.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new tb(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J${constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return P2()?8:ak(Zt())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,s){const r={result:null};return this.ys(e,n).next((a=>{r.result=a})).next((()=>{if(!r.result)return this.ws(e,n,s,i).next((a=>{r.result=a}))})).next((()=>{if(r.result)return;const a=new J$;return this.Ss(e,n,a).next((c=>{if(r.result=c,this.Vs)return this.bs(e,n,a,c.size)}))})).next((()=>r.result))}bs(e,n,i,s){return i.documentReadCount<this.fs?(Gc()<=ut.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",zc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Z.resolve()):(Gc()<=ut.DEBUG&&ge("QueryEngine","Query:",zc(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(Gc()<=ut.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",zc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xi(n))):Z.resolve())}ys(e,n){if(X1(n))return Z.resolve(null);let i=xi(n);return this.indexManager.getIndexType(e,i).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=Fg(n,null,"F"),i=xi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((r=>{const a=tt(...r);return this.ps.getDocuments(e,a).next((c=>this.indexManager.getMinOffset(e,i).next((u=>{const h=this.Ds(n,c);return this.Cs(n,h,a,u.readTime)?this.ys(e,Fg(n,null,"F")):this.vs(e,h,n,u)}))))})))))}ws(e,n,i,s){return X1(n)||s.isEqual(Ue.min())?Z.resolve(null):this.ps.getDocuments(e,i).next((r=>{const a=this.Ds(n,r);return this.Cs(n,a,i,s)?Z.resolve(null):(Gc()<=ut.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),zc(n)),this.vs(e,a,n,ik(s,Su)).next((c=>c)))}))}Ds(e,n){let i=new Mt(Fk(e));return n.forEach(((s,r)=>{Zf(e,r)&&(i=i.add(r))})),i}Cs(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const r=e.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Ss(e,n,i){return Gc()<=ut.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",zc(n)),this.ps.getDocumentsMatchingQuery(e,n,$i.min(),i)}vs(e,n,i,s){return this.ps.getDocumentsMatchingQuery(e,i,s).next((r=>(n.forEach((a=>{r=r.insert(a.key,a)})),r)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nb="LocalStore",Q$=3e8;class X${constructor(e,n,i,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ft(Xe),this.xs=new Qr((r=>Cl(r)),Qf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new AV(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function RV(t,e,n,i){return new X$(t,e,n,i)}function NV(t,e){return A(this,null,function*(){const n=Ce(t);return yield n.persistence.runTransaction("Handle user change","readonly",(i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next((r=>(s=r,n.Bs(e),n.mutationQueue.getAllMutationBatches(i)))).next((r=>{const a=[],c=[];let u=tt();for(const h of s){a.push(h.batchId);for(const g of h.mutations)u=u.add(g.key)}for(const h of r){c.push(h.batchId);for(const g of h.mutations)u=u.add(g.key)}return n.localDocuments.getDocuments(i,u).next((h=>({Ls:h,removedBatchIds:a,addedBatchIds:c})))}))}))})}function Z$(t,e){const n=Ce(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const s=e.batch.keys(),r=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,u,h,g){const x=h.batch,T=x.keys();let b=Z.resolve();return T.forEach((S=>{b=b.next((()=>g.getEntry(u,S))).next((P=>{const M=h.docVersions.get(S);Ve(M!==null,48541),P.version.compareTo(M)<0&&(x.applyToRemoteDocument(P,h),P.isValidDocument()&&(P.setReadTime(h.commitVersion),g.addEntry(P)))}))})),b.next((()=>c.mutationQueue.removeMutationBatch(u,x)))})(n,i,e,r).next((()=>r.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(c){let u=tt();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(u=u.add(c.batch.mutations[h].key));return u})(e)))).next((()=>n.localDocuments.getDocuments(i,s)))}))}function MV(t){const e=Ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function eK(t,e){const n=Ce(t),i=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(r=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const c=[];e.targetChanges.forEach(((g,x)=>{const T=s.get(x);if(!T)return;c.push(n.Pi.removeMatchingKeys(r,g.removedDocuments,x).next((()=>n.Pi.addMatchingKeys(r,g.addedDocuments,x))));let b=T.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.get(x)!==null?b=b.withResumeToken(rn.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):g.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(g.resumeToken,i)),s=s.insert(x,b),(function(P,M,V){return P.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=Q$?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(T,b,g)&&c.push(n.Pi.updateTargetData(r,b))}));let u=Ni(),h=tt();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(r,g))})),c.push(PV(r,a,e.documentUpdates).next((g=>{u=g.ks,h=g.qs}))),!i.isEqual(Ue.min())){const g=n.Pi.getLastRemoteSnapshotVersion(r).next((x=>n.Pi.setTargetsMetadata(r,r.currentSequenceNumber,i)));c.push(g)}return Z.waitFor(c).next((()=>a.apply(r))).next((()=>n.localDocuments.getLocalViewOfDocuments(r,u,h))).next((()=>u))})).then((r=>(n.Ms=s,r)))}function PV(t,e,n){let i=tt(),s=tt();return n.forEach((r=>i=i.add(r))),e.getEntries(t,i).next((r=>{let a=Ni();return n.forEach(((c,u)=>{const h=r.get(c);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(Ue.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):ge(nb,"Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",u.version)})),{ks:a,qs:s}}))}function tK(t,e){const n=Ce(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Jo),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function Lu(t,e){const n=Ce(t);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let s;return n.Pi.getTargetData(i,e).next((r=>r?(s=r,Z.resolve(s)):n.Pi.allocateTargetId(i).next((a=>(s=new Fr(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,s).next((()=>s)))))))})).then((i=>{const s=n.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i}))}function Uu(t,e,n){return A(this,null,function*(){const i=Ce(t),s=i.Ms.get(e),r=n?"readwrite":"readwrite-primary";try{n||(yield i.persistence.runTransaction("Release target",r,(a=>i.persistence.referenceDelegate.removeTarget(a,s))))}catch(a){if(!ya(a))throw a;ge(nb,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ms=i.Ms.remove(e),i.xs.delete(s.target)})}function zg(t,e,n){const i=Ce(t);let s=Ue.min(),r=tt();return i.persistence.runTransaction("Execute query","readwrite",(a=>(function(u,h,g){const x=Ce(u),T=x.xs.get(g);return T!==void 0?Z.resolve(x.Ms.get(T)):x.Pi.getTargetData(h,g)})(i,a,xi(e)).next((c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,c.targetId).next((u=>{r=u}))})).next((()=>i.Fs.getDocumentsMatchingQuery(a,e,n?s:Ue.min(),n?r:tt()))).next((c=>(VV(i,Ok(e),c),{documents:c,Qs:r})))))}function DV(t,e){const n=Ce(t),i=Ce(n.Pi),s=n.Ms.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",(r=>i.At(r,e).next((a=>a?a.target:null))))}function kV(t,e){const n=Ce(t),i=n.Os.get(e)||Ue.min();return n.persistence.runTransaction("Get new document changes","readonly",(s=>n.Ns.getAllFromCollectionGroup(s,e,ik(i,Su),Number.MAX_SAFE_INTEGER))).then((s=>(VV(n,e,s),s)))}function VV(t,e,n){let i=t.Os.get(e)||Ue.min();n.forEach(((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)})),t.Os.set(e,i)}function nK(t,e,n,i){return A(this,null,function*(){const s=Ce(t);let r=tt(),a=Ni();for(const h of n){const g=e.$s(h.metadata.name);h.document&&(r=r.add(g));const x=e.Us(h);x.setReadTime(e.Ks(h.metadata.readTime)),a=a.insert(g,x)}const c=s.Ns.newChangeBuffer({trackRemovals:!0}),u=yield Lu(s,(function(g){return xi(ed(ht.fromString(`__bundle__/docs/${g}`)))})(i));return s.persistence.runTransaction("Apply bundle documents","readwrite",(h=>PV(h,c,a).next((g=>(c.apply(h),g))).next((g=>s.Pi.removeMatchingKeysForTargetId(h,u.targetId).next((()=>s.Pi.addMatchingKeys(h,r,u.targetId))).next((()=>s.localDocuments.getLocalViewOfDocuments(h,g.ks,g.qs))).next((()=>g.ks))))))})}function iK(i,s){return A(this,arguments,function*(t,e,n=tt()){const r=yield Lu(t,xi(Ww(e.bundledQuery))),a=Ce(t);return a.persistence.runTransaction("Save named query","readwrite",(c=>{const u=mn(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return a.Ii.saveNamedQuery(c,e);const h=r.withResumeToken(rn.EMPTY_BYTE_STRING,u);return a.Ms=a.Ms.insert(h.targetId,h),a.Pi.updateTargetData(c,h).next((()=>a.Pi.removeMatchingKeysForTargetId(c,r.targetId))).next((()=>a.Pi.addMatchingKeys(c,n,r.targetId))).next((()=>a.Ii.saveNamedQuery(c,e)))}))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LV="firestore_clients";function RR(t,e){return`${LV}_${t}_${e}`}const UV="firestore_mutations";function NR(t,e,n){let i=`${UV}_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}const OV="firestore_targets";function Vx(t,e){return`${OV}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s="SharedClientState";class Hg{constructor(e,n,i,s){this.user=e,this.batchId=n,this.state=i,this.error=s}static Ws(e,n,i){const s=JSON.parse(i);let r,a=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return a&&s.error&&(a=typeof s.error.message=="string"&&typeof s.error.code=="string",a&&(r=new me(s.error.code,s.error.message))),a?new Hg(e,n,s.state,r):(fn($s,`Failed to parse mutation state for ID '${n}': ${i}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class rf{constructor(e,n,i){this.targetId=e,this.state=n,this.error=i}static Ws(e,n){const i=JSON.parse(n);let s,r=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return r&&i.error&&(r=typeof i.error.message=="string"&&typeof i.error.code=="string",r&&(s=new me(i.error.code,i.error.message))),r?new rf(e,i.state,s):(fn($s,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $g{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const i=JSON.parse(n);let s=typeof i=="object"&&i.activeTargetIds instanceof Array,r=Bw();for(let a=0;s&&a<i.activeTargetIds.length;++a)s=lk(i.activeTargetIds[a]),r=r.add(i.activeTargetIds[a]);return s?new $g(e,r):(fn($s,`Failed to parse client data for instance '${e}': ${n}`),null)}}class ib{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new ib(n.clientId,n.onlineState):(fn($s,`Failed to parse online state: ${e}`),null)}}class H_{constructor(){this.activeTargetIds=Bw()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Lx{constructor(e,n,i,s,r){this.window=e,this.Mi=n,this.persistenceKey=i,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Ft(Xe),this.started=!1,this.Xs=[];const a=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=r,this.eo=RR(this.persistenceKey,this.Js),this.no=(function(u){return`firestore_sequence_number_${u}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new H_),this.ro=new RegExp(`^${LV}_${a}_([^_]*)$`),this.io=new RegExp(`^${UV}_${a}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${OV}_${a}_(\\d+)$`),this.oo=(function(u){return`firestore_online_state_${u}`})(this.persistenceKey),this._o=(function(u){return`firestore_bundle_loaded_v2_${u}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}start(){return A(this,null,function*(){const e=yield this.syncEngine.Ts();for(const i of e){if(i===this.Js)continue;const s=this.getItem(RR(this.persistenceKey,i));if(s){const r=$g.Ws(i,s);r&&(this.Zs=this.Zs.insert(r.clientId,r))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const i=this.uo(n);i&&this.co(i)}for(const i of this.Xs)this.Ys(i);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0})}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach(((i,s)=>{s.activeTargetIds.has(e)&&(n=!0)})),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,i){this.ho(e,n,i),this.Po(e)}addLocalQueryTarget(e,n=!0){let i="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Vx(this.persistenceKey,e));if(s){const r=rf.Ws(e,s);r&&(i=r.state)}}return n&&this.To.zs(e),this.ao(),i}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Vx(this.persistenceKey,e))}updateQueryState(e,n,i){this.Io(e,n,i)}handleUserChange(e,n,i){n.forEach((s=>{this.Po(s)})),this.currentUser=e,i.forEach((s=>{this.addPendingMutation(s)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return ge($s,"READ",e,n),n}setItem(e,n){ge($s,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){ge($s,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(ge($s,"EVENT",n.key,n.newValue),n.key===this.eo)return void fn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((()=>A(this,null,function*(){if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const i=this.Ro(n.key);return this.Vo(i,null)}{const i=this.mo(n.key,n.newValue);if(i)return this.Vo(i.clientId,i)}}else if(this.io.test(n.key)){if(n.newValue!==null){const i=this.fo(n.key,n.newValue);if(i)return this.po(i)}}else if(this.so.test(n.key)){if(n.newValue!==null){const i=this.yo(n.key,n.newValue);if(i)return this.wo(i)}}else if(n.key===this.oo){if(n.newValue!==null){const i=this.uo(n.newValue);if(i)return this.co(i)}}else if(n.key===this.no){const i=(function(r){let a=Ii.ce;if(r!=null)try{const c=JSON.parse(r);Ve(typeof c=="number",30636,{So:r}),a=c}catch(c){fn($s,"Failed to read sequence number from WebStorage",c)}return a})(n.newValue);i!==Ii.ce&&this.sequenceNumberHandler(i)}else if(n.key===this._o){const i=this.bo(n.newValue);yield Promise.all(i.map((s=>this.syncEngine.Do(s))))}}}else this.Xs.push(n)})))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,i){const s=new Hg(this.currentUser,e,n,i),r=NR(this.persistenceKey,this.currentUser,e);this.setItem(r,s.Gs())}Po(e){const n=NR(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,i){const s=Vx(this.persistenceKey,e),r=new rf(e,n,i);this.setItem(s,r.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const i=this.Ro(e);return $g.Ws(i,n)}fo(e,n){const i=this.io.exec(e),s=Number(i[1]),r=i[2]!==void 0?i[2]:null;return Hg.Ws(new Bn(r),s,n)}yo(e,n){const i=this.so.exec(e),s=Number(i[1]);return rf.Ws(s,n)}uo(e){return ib.Ws(e)}bo(e){return JSON.parse(e)}po(e){return A(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);ge($s,`Ignoring mutation for non-active user ${e.user.uid}`)})}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const i=n?this.Zs.insert(e,n):this.Zs.remove(e),s=this.lo(this.Zs),r=this.lo(i),a=[],c=[];return r.forEach((u=>{s.has(u)||a.push(u)})),s.forEach((u=>{r.has(u)||c.push(u)})),this.syncEngine.Fo(a,c).then((()=>{this.Zs=i}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=Bw();return e.forEach(((i,s)=>{n=n.unionWith(s.activeTargetIds)})),n}}class FV{constructor(){this.Mo=new H_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new H_,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sK{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR="ConnectivityMonitor";class PR{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ge(MR,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ge(MR,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hp=null;function $_(){return Hp===null?Hp=(function(){return 268435456+Math.round(2147483648*Math.random())})():Hp++,"0x"+Hp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux="RestConnection",rK={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class oK{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===M_?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(e,n,i,s,r){const a=$_(),c=this.zo(e,n.toUriEncodedString());ge(Ux,`Sending RPC '${e}' ${a}:`,c,i);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,r);const{host:h}=new URL(c),g=Gu(h);return this.Jo(e,c,u,i,g).then((x=>(ge(Ux,`Received RPC '${e}' ${a}: `,x),x)),(x=>{throw lr(Ux,`RPC '${e}' ${a} failed with error: `,x,"url: ",c,"request:",i),x}))}Ho(e,n,i,s,r,a){return this.Go(e,n,i,s,r)}jo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Zu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,r)=>e[r]=s)),i&&i.headers.forEach(((s,r)=>e[r]=s))}zo(e,n){const i=rK[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aK{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ti="WebChannelConnection";class lK extends oK{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,s,r){const a=$_();return new Promise(((c,u)=>{const h=new $D;h.setWithCredentials(!0),h.listenOnce(KD.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case ig.NO_ERROR:const x=h.getResponseJson();ge(ti,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(x)),c(x);break;case ig.TIMEOUT:ge(ti,`RPC '${e}' ${a} timed out`),u(new me(oe.DEADLINE_EXCEEDED,"Request time out"));break;case ig.HTTP_ERROR:const T=h.getStatus();if(ge(ti,`RPC '${e}' ${a} failed with status:`,T,"response text:",h.getResponseText()),T>0){let b=h.getResponseJson();Array.isArray(b)&&(b=b[0]);const S=b==null?void 0:b.error;if(S&&S.status&&S.message){const P=(function(V){const q=V.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(q)>=0?q:oe.UNKNOWN})(S.status);u(new me(P,S.message))}else u(new me(oe.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new me(oe.UNAVAILABLE,"Connection failed."));break;default:Ne(9055,{l_:e,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{ge(ti,`RPC '${e}' ${a} completed.`)}}));const g=JSON.stringify(s);ge(ti,`RPC '${e}' ${a} sending request:`,s),h.send(n,"POST",g,i,15)}))}T_(e,n,i){const s=$_(),r=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=JD(),c=YD(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const g=r.join("");ge(ti,`Creating RPC '${e}' stream ${s}: ${g}`,u);const x=a.createWebChannel(g,u);this.I_(x);let T=!1,b=!1;const S=new aK({Yo:M=>{b?ge(ti,`Not sending because RPC '${e}' stream ${s} is closed:`,M):(T||(ge(ti,`Opening RPC '${e}' stream ${s} transport.`),x.open(),T=!0),ge(ti,`RPC '${e}' stream ${s} sending:`,M),x.send(M))},Zo:()=>x.close()}),P=(M,V,q)=>{M.listen(V,(O=>{try{q(O)}catch(z){setTimeout((()=>{throw z}),0)}}))};return P(x,Dh.EventType.OPEN,(()=>{b||(ge(ti,`RPC '${e}' stream ${s} transport opened.`),S.o_())})),P(x,Dh.EventType.CLOSE,(()=>{b||(b=!0,ge(ti,`RPC '${e}' stream ${s} transport closed`),S.a_(),this.E_(x))})),P(x,Dh.EventType.ERROR,(M=>{b||(b=!0,lr(ti,`RPC '${e}' stream ${s} transport errored. Name:`,M.name,"Message:",M.message),S.a_(new me(oe.UNAVAILABLE,"The operation could not be completed")))})),P(x,Dh.EventType.MESSAGE,(M=>{var V;if(!b){const q=M.data[0];Ve(!!q,16349);const O=q,z=(O==null?void 0:O.error)||((V=O[0])==null?void 0:V.error);if(z){ge(ti,`RPC '${e}' stream ${s} received error:`,z);const j=z.status;let W=(function(R){const L=_n[R];if(L!==void 0)return Xk(L)})(j),D=z.message;W===void 0&&(W=oe.INTERNAL,D="Unknown error status: "+j+" with message "+z.message),b=!0,S.a_(new me(W,D)),x.close()}else ge(ti,`RPC '${e}' stream ${s} received:`,q),S.u_(q)}})),P(c,WD.STAT_EVENT,(M=>{M.stat===E_.PROXY?ge(ti,`RPC '${e}' stream ${s} detected buffering proxy`):M.stat===E_.NOPROXY&&ge(ti,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{S.__()}),0),S}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BV(){return typeof window!="undefined"?window:null}function fg(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function im(t){return new f$(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(e,n,i=1e3,s=1.5,r=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=s,this.R_=r,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-i);s>0&&ge("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR="PersistentStream";class qV{constructor(e,n,i,s,r,a,c,u){this.Mi=e,this.S_=i,this.b_=s,this.connection=r,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new sb(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}stop(){return A(this,null,function*(){this.x_()&&(yield this.close(0))})}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}k_(){return A(this,null,function*(){if(this.O_())return this.close(0)})}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,n){return A(this,null,function*(){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===oe.RESOURCE_EXHAUSTED?(fn(n.toString()),fn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.r_(n)})}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,s])=>{this.D_===n&&this.G_(i,s)}),(i=>{e((()=>{const s=new me(oe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)}))}))}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{i((()=>this.z_(s)))})),this.stream.onMessage((s=>{i((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((()=>A(this,null,function*(){this.state=0,this.start()})))}z_(e){return ge(DR,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ge(DR,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class cK extends qV{constructor(e,n,i,s,r,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=g$(this.serializer,e),i=(function(r){if(!("targetChange"in r))return Ue.min();const a=r.targetChange;return a.targetIds&&a.targetIds.length?Ue.min():a.readTime?mn(a.readTime):Ue.min()})(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=B_(this.serializer),n.addTarget=(function(r,a){let c;const u=a.target;if(c=Ug(u)?{documents:lV(r,u)}:{query:cV(r,u).ft},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=nV(r,a.resumeToken);const h=O_(r,a.expectedCount);h!==null&&(c.expectedCount=h)}else if(a.snapshotVersion.compareTo(Ue.min())>0){c.readTime=Vu(r,a.snapshotVersion.toTimestamp());const h=O_(r,a.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);const i=v$(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=B_(this.serializer),n.removeTarget=e,this.q_(n)}}class uK extends qV{constructor(e,n,i,s,r,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=y$(e.writeResults,e.commitTime),i=mn(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=B_(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>Mf(this.serializer,i)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dK{}class hK extends dK{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new me(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,a])=>this.connection.Go(e,F_(n,i),s,r,a))).catch((r=>{throw r.name==="FirebaseError"?(r.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new me(oe.UNKNOWN,r.toString())}))}Ho(e,n,i,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,c])=>this.connection.Ho(e,F_(n,i),s,a,c,r))).catch((a=>{throw a.name==="FirebaseError"?(a.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new me(oe.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class fK{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(fn(n),this.aa=!1):ge("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl="RemoteStore";class mK{constructor(e,n,i,s,r){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=r,this.Aa.Oo((a=>{i.enqueueAndForget((()=>A(this,null,function*(){xa(this)&&(ge(Dl,"Restarting streams for network reachability change."),yield(function(u){return A(this,null,function*(){const h=Ce(u);h.Ea.add(4),yield id(h),h.Ra.set("Unknown"),h.Ea.delete(4),yield sm(h)})})(this))})))})),this.Ra=new fK(i,s)}}function sm(t){return A(this,null,function*(){if(xa(t))for(const e of t.da)yield e(!0)})}function id(t){return A(this,null,function*(){for(const e of t.da)yield e(!1)})}function Ry(t,e){const n=Ce(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),ab(n)?ob(n):rd(n).O_()&&rb(n,e))}function Ou(t,e){const n=Ce(t),i=rd(n);n.Ia.delete(e),i.O_()&&jV(n,e),n.Ia.size===0&&(i.O_()?i.L_():xa(n)&&n.Ra.set("Unknown"))}function rb(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}rd(t).Y_(e)}function jV(t,e){t.Va.Ue(e),rd(t).Z_(e)}function ob(t){t.Va=new c$({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),rd(t).start(),t.Ra.ua()}function ab(t){return xa(t)&&!rd(t).x_()&&t.Ia.size>0}function xa(t){return Ce(t).Ea.size===0}function GV(t){t.Va=void 0}function pK(t){return A(this,null,function*(){t.Ra.set("Online")})}function gK(t){return A(this,null,function*(){t.Ia.forEach(((e,n)=>{rb(t,e)}))})}function yK(t,e){return A(this,null,function*(){GV(t),ab(t)?(t.Ra.ha(e),ob(t)):t.Ra.set("Unknown")})}function vK(t,e,n){return A(this,null,function*(){if(t.Ra.set("Online"),e instanceof tV&&e.state===2&&e.cause)try{yield(function(s,r){return A(this,null,function*(){const a=r.cause;for(const c of r.targetIds)s.Ia.has(c)&&(yield s.remoteSyncer.rejectListen(c,a),s.Ia.delete(c),s.Va.removeTarget(c))})})(t,e)}catch(i){ge(Dl,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield Kg(t,i)}else if(e instanceof dg?t.Va.Ze(e):e instanceof eV?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ue.min()))try{const i=yield MV(t.localStore);n.compareTo(i)>=0&&(yield(function(r,a){const c=r.Va.Tt(a);return c.targetChanges.forEach(((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const g=r.Ia.get(h);g&&r.Ia.set(h,g.withResumeToken(u.resumeToken,a))}})),c.targetMismatches.forEach(((u,h)=>{const g=r.Ia.get(u);if(!g)return;r.Ia.set(u,g.withResumeToken(rn.EMPTY_BYTE_STRING,g.snapshotVersion)),jV(r,u);const x=new Fr(g.target,u,h,g.sequenceNumber);rb(r,x)})),r.remoteSyncer.applyRemoteEvent(c)})(t,n))}catch(i){ge(Dl,"Failed to raise snapshot:",i),yield Kg(t,i)}})}function Kg(t,e,n){return A(this,null,function*(){if(!ya(e))throw e;t.Ea.add(1),yield id(t),t.Ra.set("Offline"),n||(n=()=>MV(t.localStore)),t.asyncQueue.enqueueRetryable((()=>A(null,null,function*(){ge(Dl,"Retrying IndexedDB access"),yield n(),t.Ea.delete(1),yield sm(t)})))})}function zV(t,e){return e().catch((n=>Kg(t,n,e)))}function sd(t){return A(this,null,function*(){const e=Ce(t),n=ua(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Jo;for(;xK(e);)try{const s=yield tK(e.localStore,i);if(s===null){e.Ta.length===0&&n.L_();break}i=s.batchId,_K(e,s)}catch(s){yield Kg(e,s)}HV(e)&&$V(e)})}function xK(t){return xa(t)&&t.Ta.length<10}function _K(t,e){t.Ta.push(e);const n=ua(t);n.O_()&&n.X_&&n.ea(e.mutations)}function HV(t){return xa(t)&&!ua(t).x_()&&t.Ta.length>0}function $V(t){ua(t).start()}function TK(t){return A(this,null,function*(){ua(t).ra()})}function wK(t){return A(this,null,function*(){const e=ua(t);for(const n of t.Ta)e.ea(n.mutations)})}function bK(t,e,n){return A(this,null,function*(){const i=t.Ta.shift(),s=zw.from(i,e,n);yield zV(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),yield sd(t)})}function EK(t,e){return A(this,null,function*(){e&&ua(t).X_&&(yield(function(i,s){return A(this,null,function*(){if((function(a){return Qk(a)&&a!==oe.ABORTED})(s.code)){const r=i.Ta.shift();ua(i).B_(),yield zV(i,(()=>i.remoteSyncer.rejectFailedWrite(r.batchId,s))),yield sd(i)}})})(t,e)),HV(t)&&$V(t)})}function kR(t,e){return A(this,null,function*(){const n=Ce(t);n.asyncQueue.verifyOperationInProgress(),ge(Dl,"RemoteStore received new credentials");const i=xa(n);n.Ea.add(3),yield id(n),i&&n.Ra.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),yield sm(n)})}function K_(t,e){return A(this,null,function*(){const n=Ce(t);e?(n.Ea.delete(2),yield sm(n)):e||(n.Ea.add(2),yield id(n),n.Ra.set("Unknown"))})}function rd(t){return t.ma||(t.ma=(function(n,i,s){const r=Ce(n);return r.sa(),new cK(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)})(t.datastore,t.asyncQueue,{Xo:pK.bind(null,t),t_:gK.bind(null,t),r_:yK.bind(null,t),H_:vK.bind(null,t)}),t.da.push((e=>A(null,null,function*(){e?(t.ma.B_(),ab(t)?ob(t):t.Ra.set("Unknown")):(yield t.ma.stop(),GV(t))})))),t.ma}function ua(t){return t.fa||(t.fa=(function(n,i,s){const r=Ce(n);return r.sa(),new uK(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:TK.bind(null,t),r_:EK.bind(null,t),ta:wK.bind(null,t),na:bK.bind(null,t)}),t.da.push((e=>A(null,null,function*(){e?(t.fa.B_(),yield sd(t)):(yield t.fa.stop(),t.Ta.length>0&&(ge(Dl,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,n,i,s,r){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new Qn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,r){const a=Date.now()+i,c=new lb(e,n,a,s,r);return c.start(i),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function od(t,e){if(fn("AsyncQueue",`${e}: ${t}`),ya(t))return new me(oe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{static emptySet(e){return new fu(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||be.comparator(n.key,i.key):(n,i)=>be.comparator(n.key,i.key),this.keyedMap=kh(),this.sortedSet=new Ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof fu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new fu;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(){this.ga=new Ft(be.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ne(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Fu{constructor(e,n,i,s,r,a,c,u,h){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,i,s,r){const a=[];return n.forEach((c=>{a.push({type:0,doc:c})})),new Fu(e,n,fu.emptySet(n),a,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SK{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class AK{constructor(){this.queries=LR(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const s=Ce(n),r=s.queries;s.queries=LR(),r.forEach(((a,c)=>{for(const u of c.Sa)u.onError(i)}))})(this,new me(oe.ABORTED,"Firestore shutting down"))}}function LR(){return new Qr((t=>Uk(t)),Xf)}function cb(t,e){return A(this,null,function*(){const n=Ce(t);let i=3;const s=e.query;let r=n.queries.get(s);r?!r.ba()&&e.Da()&&(i=2):(r=new SK,i=e.Da()?0:1);try{switch(i){case 0:r.wa=yield n.onListen(s,!0);break;case 1:r.wa=yield n.onListen(s,!1);break;case 2:yield n.onFirstRemoteStoreListen(s)}}catch(a){const c=od(a,`Initialization of query '${zc(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,r),r.Sa.push(e),e.va(n.onlineState),r.wa&&e.Fa(r.wa)&&db(n)})}function ub(t,e){return A(this,null,function*(){const n=Ce(t),i=e.query;let s=3;const r=n.queries.get(i);if(r){const a=r.Sa.indexOf(e);a>=0&&(r.Sa.splice(a,1),r.Sa.length===0?s=e.Da()?0:1:!r.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}})}function CK(t,e){const n=Ce(t);let i=!1;for(const s of e){const r=s.query,a=n.queries.get(r);if(a){for(const c of a.Sa)c.Fa(s)&&(i=!0);a.wa=s}}i&&db(n)}function IK(t,e,n){const i=Ce(t),s=i.queries.get(e);if(s)for(const r of s.Sa)r.onError(n);i.queries.delete(e)}function db(t){t.Ca.forEach((e=>{e.next()}))}var W_,UR;(UR=W_||(W_={})).Ma="default",UR.Cache="cache";class hb{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new Fu(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Fu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==W_.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RK{constructor(e,n){this.Qa=e,this.byteLength=n}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e){this.serializer=e}$s(e){return sr(this.serializer,e)}Us(e){return e.metadata.exists?aV(this.serializer,e.document,!1):jt.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return mn(e)}}class NK{constructor(e,n){this.Ua=e,this.serializer=n,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=KV(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++n;const i=ht.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,J({},this.progress)):null}za(e){const n=new Map,i=new OR(this.serializer);for(const s of e)if(s.metadata.queries){const r=i.$s(s.metadata.name);for(const a of s.metadata.queries){const c=(n.get(a)||tt()).add(r);n.set(a,c)}}return n}ja(e){return A(this,null,function*(){const n=yield nK(e,new OR(this.serializer),this.Wa,this.Ua.id),i=this.za(this.documents);for(const s of this.Ka)yield iK(e,s,i.get(s.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:n}})}}function KV(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(e){this.key=e}}class YV{constructor(e){this.key=e}}class JV{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=tt(),this.mutatedKeys=tt(),this.eu=Fk(e),this.tu=new fu(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new VR,s=n?n.tu:this.tu;let r=n?n.mutatedKeys:this.mutatedKeys,a=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((g,x)=>{const T=s.get(g),b=Zf(this.query,x)?x:null,S=!!T&&this.mutatedKeys.has(T.key),P=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let M=!1;T&&b?T.data.isEqual(b.data)?S!==P&&(i.track({type:3,doc:b}),M=!0):this.su(T,b)||(i.track({type:2,doc:b}),M=!0,(u&&this.eu(b,u)>0||h&&this.eu(b,h)<0)&&(c=!0)):!T&&b?(i.track({type:0,doc:b}),M=!0):T&&!b&&(i.track({type:1,doc:T}),M=!0,(u||h)&&(c=!0)),M&&(b?(a=a.add(b),r=P?r.add(g):r.delete(g)):(a=a.delete(g),r=r.delete(g)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const g=this.query.limitType==="F"?a.last():a.first();a=a.delete(g.key),r=r.delete(g.key),i.track({type:1,doc:g})}return{tu:a,iu:i,Cs:c,mutatedKeys:r}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const r=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort(((g,x)=>(function(b,S){const P=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne(20277,{Rt:M})}};return P(b)-P(S)})(g.type,x.type)||this.eu(g.doc,x.doc))),this.ou(i),s=s!=null?s:!1;const c=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,h=u!==this.Za;return this.Za=u,a.length!==0||h?{snapshot:new Fu(this.query,e.tu,r,a,e.mutatedKeys,u===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new VR,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=tt(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const n=[];return e.forEach((i=>{this.Xa.has(i)||n.push(new YV(i))})),this.Xa.forEach((i=>{e.has(i)||n.push(new WV(i))})),n}cu(e){this.Ya=e.Qs,this.Xa=tt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Fu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const _a="SyncEngine";class MK{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class PK{constructor(e){this.key=e,this.hu=!1}}class DK{constructor(e,n,i,s,r,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Qr((c=>Uk(c)),Xf),this.Iu=new Map,this.Eu=new Set,this.du=new Ft(be.comparator),this.Au=new Map,this.Ru=new Qw,this.Vu={},this.mu=new Map,this.fu=Pl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}function kK(t,e,n=!0){return A(this,null,function*(){const i=Ny(t);let s;const r=i.Tu.get(e);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.lu()):s=yield QV(i,e,n,!0),s})}function VK(t,e){return A(this,null,function*(){const n=Ny(t);yield QV(n,e,!0,!1)})}function QV(t,e,n,i){return A(this,null,function*(){const s=yield Lu(t.localStore,xi(e)),r=s.targetId,a=t.sharedClientState.addLocalQueryTarget(r,n);let c;return i&&(c=yield fb(t,e,r,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&Ry(t.remoteStore,s),c})}function fb(t,e,n,i,s){return A(this,null,function*(){t.pu=(x,T,b)=>(function(P,M,V,q){return A(this,null,function*(){let O=M.view.ru(V);O.Cs&&(O=yield zg(P.localStore,M.query,!1).then((({documents:D})=>M.view.ru(D,O))));const z=q&&q.targetChanges.get(M.targetId),j=q&&q.targetMismatches.get(M.targetId)!=null,W=M.view.applyChanges(O,P.isPrimaryClient,z,j);return Y_(P,M.targetId,W.au),W.snapshot})})(t,x,T,b);const r=yield zg(t.localStore,e,!0),a=new JV(e,r.Qs),c=a.ru(r.documents),u=nm.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),h=a.applyChanges(c,t.isPrimaryClient,u);Y_(t,n,h.au);const g=new MK(e,n,a);return t.Tu.set(e,g),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot})}function LK(t,e,n){return A(this,null,function*(){const i=Ce(t),s=i.Tu.get(e),r=i.Iu.get(s.targetId);if(r.length>1)return i.Iu.set(s.targetId,r.filter((a=>!Xf(a,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||(yield Uu(i.localStore,s.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(s.targetId),n&&Ou(i.remoteStore,s.targetId),Bu(i,s.targetId)})).catch(ga))):(Bu(i,s.targetId),yield Uu(i.localStore,s.targetId,!0))})}function UK(t,e){return A(this,null,function*(){const n=Ce(t),i=n.Tu.get(e),s=n.Iu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Ou(n.remoteStore,i.targetId))})}function OK(t,e,n){return A(this,null,function*(){const i=yb(t);try{const s=yield(function(a,c){const u=Ce(a),h=At.now(),g=c.reduce(((b,S)=>b.add(S.key)),tt());let x,T;return u.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let S=Ni(),P=tt();return u.Ns.getEntries(b,g).next((M=>{S=M,S.forEach(((V,q)=>{q.isValidDocument()||(P=P.add(V))}))})).next((()=>u.localDocuments.getOverlayedDocuments(b,S))).next((M=>{x=M;const V=[];for(const q of c){const O=o$(q,x.get(q.key).overlayedDocument);O!=null&&V.push(new Xr(q.key,O,Ik(O.value.mapValue),Yt.exists(!0)))}return u.mutationQueue.addMutationBatch(b,h,V,c)})).next((M=>{T=M;const V=M.applyToLocalDocumentSet(x,P);return u.documentOverlayCache.saveOverlays(b,M.batchId,V)}))})).then((()=>({batchId:T.batchId,changes:qk(x)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),(function(a,c,u){let h=a.Vu[a.currentUser.toKey()];h||(h=new Ft(Xe)),h=h.insert(c,u),a.Vu[a.currentUser.toKey()]=h})(i,s.batchId,n),yield Zr(i,s.changes),yield sd(i.remoteStore)}catch(s){const r=od(s,"Failed to persist write");n.reject(r)}})}function XV(t,e){return A(this,null,function*(){const n=Ce(t);try{const i=yield eK(n.localStore,e);e.targetChanges.forEach(((s,r)=>{const a=n.Au.get(r);a&&(Ve(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?Ve(a.hu,14607):s.removedDocuments.size>0&&(Ve(a.hu,42227),a.hu=!1))})),yield Zr(n,i,e)}catch(i){yield ga(i)}})}function FR(t,e,n){const i=Ce(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Tu.forEach(((r,a)=>{const c=a.view.va(e);c.snapshot&&s.push(c.snapshot)})),(function(a,c){const u=Ce(a);u.onlineState=c;let h=!1;u.queries.forEach(((g,x)=>{for(const T of x.Sa)T.va(c)&&(h=!0)})),h&&db(u)})(i.eventManager,e),s.length&&i.Pu.H_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function FK(t,e,n){return A(this,null,function*(){const i=Ce(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Au.get(e),r=s&&s.key;if(r){let a=new Ft(be.comparator);a=a.insert(r,jt.newNoDocument(r,Ue.min()));const c=tt().add(r),u=new tm(Ue.min(),new Map,new Ft(Xe),a,c);yield XV(i,u),i.du=i.du.remove(r),i.Au.delete(e),gb(i)}else yield Uu(i.localStore,e,!1).then((()=>Bu(i,e,n))).catch(ga)})}function BK(t,e){return A(this,null,function*(){const n=Ce(t),i=e.batch.batchId;try{const s=yield Z$(n.localStore,e);pb(n,i,null),mb(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),yield Zr(n,s)}catch(s){yield ga(s)}})}function qK(t,e,n){return A(this,null,function*(){const i=Ce(t);try{const s=yield(function(a,c){const u=Ce(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let g;return u.mutationQueue.lookupMutationBatch(h,c).next((x=>(Ve(x!==null,37113),g=x.keys(),u.mutationQueue.removeMutationBatch(h,x)))).next((()=>u.mutationQueue.performConsistencyCheck(h))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(h,g,c))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,g))).next((()=>u.localDocuments.getDocuments(h,g)))}))})(i.localStore,e);pb(i,e,n),mb(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),yield Zr(i,s)}catch(s){yield ga(s)}})}function jK(t,e){return A(this,null,function*(){const n=Ce(t);xa(n.remoteStore)||ge(_a,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield(function(a){const c=Ce(a);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(u=>c.mutationQueue.getHighestUnacknowledgedBatchId(u)))})(n.localStore);if(i===Jo)return void e.resolve();const s=n.mu.get(i)||[];s.push(e),n.mu.set(i,s)}catch(i){const s=od(i,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}})}function mb(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function pb(t,e,n){const i=Ce(t);let s=i.Vu[i.currentUser.toKey()];if(s){const r=s.get(e);r&&(n?r.reject(n):r.resolve(),s=s.remove(e)),i.Vu[i.currentUser.toKey()]=s}}function Bu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((i=>{t.Ru.containsKey(i)||ZV(t,i)}))}function ZV(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Ou(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),gb(t))}function Y_(t,e,n){for(const i of n)i instanceof WV?(t.Ru.addReference(i.key,e),GK(t,i)):i instanceof YV?(ge(_a,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||ZV(t,i.key)):Ne(19791,{wu:i})}function GK(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(ge(_a,"New document in limbo: "+n),t.Eu.add(i),gb(t))}function gb(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new be(ht.fromString(e)),i=t.fu.next();t.Au.set(i,new PK(n)),t.du=t.du.insert(n,i),Ry(t.remoteStore,new Fr(xi(ed(n.path)),i,"TargetPurposeLimboResolution",Ii.ce))}}function Zr(t,e,n){return A(this,null,function*(){const i=Ce(t),s=[],r=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach(((c,u)=>{a.push(i.pu(u,e,n).then((h=>{var g;if((h||n)&&i.isPrimaryClient){const x=h?!h.fromCache:(g=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:g.current;i.sharedClientState.updateQueryState(u.targetId,x?"current":"not-current")}if(h){s.push(h);const x=tb.As(u.targetId,h);r.push(x)}})))})),yield Promise.all(a),i.Pu.H_(s),yield(function(u,h){return A(this,null,function*(){const g=Ce(u);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>Z.forEach(h,(T=>Z.forEach(T.Es,(b=>g.persistence.referenceDelegate.addReference(x,T.targetId,b))).next((()=>Z.forEach(T.ds,(b=>g.persistence.referenceDelegate.removeReference(x,T.targetId,b)))))))))}catch(x){if(!ya(x))throw x;ge(nb,"Failed to update sequence numbers: "+x)}for(const x of h){const T=x.targetId;if(!x.fromCache){const b=g.Ms.get(T),S=b.snapshotVersion,P=b.withLastLimboFreeSnapshotVersion(S);g.Ms=g.Ms.insert(T,P)}}})})(i.localStore,r))})}function zK(t,e){return A(this,null,function*(){const n=Ce(t);if(!n.currentUser.isEqual(e)){ge(_a,"User change. New user:",e.toKey());const i=yield NV(n.localStore,e);n.currentUser=e,(function(r,a){r.mu.forEach((c=>{c.forEach((u=>{u.reject(new me(oe.CANCELLED,a))}))})),r.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Zr(n,i.Ls)}})}function HK(t,e){const n=Ce(t),i=n.Au.get(e);if(i&&i.hu)return tt().add(i.key);{let s=tt();const r=n.Iu.get(e);if(!r)return s;for(const a of r){const c=n.Tu.get(a);s=s.unionWith(c.view.nu)}return s}}function $K(t,e){return A(this,null,function*(){const n=Ce(t),i=yield zg(n.localStore,e.query,!0),s=e.view.cu(i);return n.isPrimaryClient&&Y_(n,e.targetId,s.au),s})}function KK(t,e){return A(this,null,function*(){const n=Ce(t);return kV(n.localStore,e).then((i=>Zr(n,i)))})}function WK(t,e,n,i){return A(this,null,function*(){const s=Ce(t),r=yield(function(c,u){const h=Ce(c),g=Ce(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",(x=>g.er(x,u).next((T=>T?h.localDocuments.getDocuments(x,T):Z.resolve(null)))))})(s.localStore,e);r!==null?(n==="pending"?yield sd(s.remoteStore):n==="acknowledged"||n==="rejected"?(pb(s,e,i||null),mb(s,e),(function(c,u){Ce(Ce(c).mutationQueue).ir(u)})(s.localStore,e)):Ne(6720,"Unknown batchState",{Su:n}),yield Zr(s,r)):ge(_a,"Cannot apply mutation batch with id: "+e)})}function YK(t,e){return A(this,null,function*(){const n=Ce(t);if(Ny(n),yb(n),e===!0&&n.gu!==!0){const i=n.sharedClientState.getAllActiveQueryTargets(),s=yield BR(n,i.toArray());n.gu=!0,yield K_(n.remoteStore,!0);for(const r of s)Ry(n.remoteStore,r)}else if(e===!1&&n.gu!==!1){const i=[];let s=Promise.resolve();n.Iu.forEach(((r,a)=>{n.sharedClientState.isLocalQueryTarget(a)?i.push(a):s=s.then((()=>(Bu(n,a),Uu(n.localStore,a,!0)))),Ou(n.remoteStore,a)})),yield s,yield BR(n,i),(function(a){const c=Ce(a);c.Au.forEach(((u,h)=>{Ou(c.remoteStore,h)})),c.Ru.Jr(),c.Au=new Map,c.du=new Ft(be.comparator)})(n),n.gu=!1,yield K_(n.remoteStore,!1)}})}function BR(t,e,n){return A(this,null,function*(){const i=Ce(t),s=[],r=[];for(const a of e){let c;const u=i.Iu.get(a);if(u&&u.length!==0){c=yield Lu(i.localStore,xi(u[0]));for(const h of u){const g=i.Tu.get(h),x=yield $K(i,g);x.snapshot&&r.push(x.snapshot)}}else{const h=yield DV(i.localStore,a);c=yield Lu(i.localStore,h),yield fb(i,eL(h),a,!1,c.resumeToken)}s.push(c)}return i.Pu.H_(r),s})}function eL(t){return Lk(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function JK(t){return(function(n){return Ce(Ce(n).persistence).Ts()})(Ce(t).localStore)}function QK(t,e,n,i){return A(this,null,function*(){const s=Ce(t);if(s.gu)return void ge(_a,"Ignoring unexpected query state notification.");const r=s.Iu.get(e);if(r&&r.length>0)switch(n){case"current":case"not-current":{const a=yield kV(s.localStore,Ok(r[0])),c=tm.createSynthesizedRemoteEventForCurrentChange(e,n==="current",rn.EMPTY_BYTE_STRING);yield Zr(s,a,c);break}case"rejected":yield Uu(s.localStore,e,!0),Bu(s,e,i);break;default:Ne(64155,n)}})}function XK(t,e,n){return A(this,null,function*(){const i=Ny(t);if(i.gu){for(const s of e){if(i.Iu.has(s)&&i.sharedClientState.isActiveQueryTarget(s)){ge(_a,"Adding an already active target "+s);continue}const r=yield DV(i.localStore,s),a=yield Lu(i.localStore,r);yield fb(i,eL(r),a.targetId,!1,a.resumeToken),Ry(i.remoteStore,a)}for(const s of n)i.Iu.has(s)&&(yield Uu(i.localStore,s,!1).then((()=>{Ou(i.remoteStore,s),Bu(i,s)})).catch(ga))}})}function Ny(t){const e=Ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=XV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=HK.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=FK.bind(null,e),e.Pu.H_=CK.bind(null,e.eventManager),e.Pu.yu=IK.bind(null,e.eventManager),e}function yb(t){const e=Ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BK.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qK.bind(null,e),e}function ZK(t,e,n){const i=Ce(t);(function(r,a,c){return A(this,null,function*(){try{const u=yield a.getMetadata();if(yield(function(b,S){const P=Ce(b),M=mn(S.createTime);return P.persistence.runTransaction("hasNewerBundle","readonly",(V=>P.Ii.getBundleMetadata(V,S.id))).then((V=>!!V&&V.createTime.compareTo(M)>=0))})(r.localStore,u))return yield a.close(),c._completeWith((function(b){return{taskState:"Success",documentsLoaded:b.totalDocuments,bytesLoaded:b.totalBytes,totalDocuments:b.totalDocuments,totalBytes:b.totalBytes}})(u)),Promise.resolve(new Set);c._updateProgress(KV(u));const h=new NK(u,a.serializer);let g=yield a.bu();for(;g;){const T=yield h.Ga(g);T&&c._updateProgress(T),g=yield a.bu()}const x=yield h.ja(r.localStore);return yield Zr(r,x.Ha,void 0),yield(function(b,S){const P=Ce(b);return P.persistence.runTransaction("Save bundle","readwrite",(M=>P.Ii.saveBundleMetadata(M,S)))})(r.localStore,u),c._completeWith(x.progress),Promise.resolve(x.Ja)}catch(u){return lr(_a,`Loading bundle failed with ${u}`),c._failWith(u),Promise.resolve(new Set)}})})(i,e,n).then((s=>{i.sharedClientState.notifyBundleLoaded(s)}))}class Pf{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(e){return A(this,null,function*(){this.serializer=im(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),yield this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)})}Fu(e,n){return null}Mu(e,n){return null}vu(e){return RV(this.persistence,new IV,e.initialUser,this.serializer)}Cu(e){return new Xw(Iy.mi,this.serializer)}Du(e){return new FV}terminate(){return A(this,null,function*(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}Pf.provider={build:()=>new Pf};class eW extends Pf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ve(this.persistence.referenceDelegate instanceof Gg,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new wV(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ni.withCacheSize(this.cacheSizeBytes):ni.DEFAULT;return new Xw((i=>Gg.mi(i,n)),this.serializer)}}class My extends Pf{constructor(e,n,i){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return A(this,null,function*(){yield Lr(My.prototype,this,"initialize").call(this,e),yield this.xu.initialize(this,e),yield yb(this.xu.syncEngine),yield sd(this.xu.remoteStore),yield this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))})}vu(e){return RV(this.persistence,new IV,e.initialUser,this.serializer)}Fu(e,n){const i=this.persistence.referenceDelegate.garbageCollector;return new wV(i,e.asyncQueue,n)}Mu(e,n){const i=new cH(n,this.persistence);return new lH(e.asyncQueue,i)}Cu(e){const n=eb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?ni.withCacheSize(this.cacheSizeBytes):ni.DEFAULT;return new Zw(this.synchronizeTabs,n,e.clientId,i,e.asyncQueue,BV(),fg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new FV}}class vb extends My{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return A(this,null,function*(){yield Lr(vb.prototype,this,"initialize").call(this,e);const n=this.xu.syncEngine;this.sharedClientState instanceof Lx&&(this.sharedClientState.syncEngine={Co:WK.bind(null,n),vo:QK.bind(null,n),Fo:XK.bind(null,n),Ts:JK.bind(null,n),Do:KK.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.Ji((i=>A(this,null,function*(){yield YK(this.xu.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())})))})}Du(e){const n=BV();if(!Lx.v(n))throw new me(oe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=eb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Lx(n,e.asyncQueue,i,e.clientId,e.initialUser)}}class Df{initialize(e,n){return A(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>FR(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=zK.bind(null,this.syncEngine),yield K_(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return(function(){return new AK})()}createDatastore(e){const n=im(e.databaseInfo.databaseId),i=(function(r){return new lK(r)})(e.databaseInfo);return(function(r,a,c,u){return new hK(r,a,c,u)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,s,r,a,c){return new mK(i,s,r,a,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>FR(this.syncEngine,n,0)),(function(){return PR.v()?new PR:new sK})())}createSyncEngine(e,n){return(function(s,r,a,c,u,h,g){const x=new DK(s,r,a,c,u,h);return g&&(x.gu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return A(this,null,function*(){var e,n;yield(function(s){return A(this,null,function*(){const r=Ce(s);ge(Dl,"RemoteStore shutting down."),r.Ea.add(5),yield id(r),r.Aa.shutdown(),r.Ra.set("Unknown")})})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()})}}Df.provider={build:()=>new Df};function qR(t,e=10240){let n=0;return{read(){return A(this,null,function*(){if(n<t.byteLength){const s={value:t.slice(n,n+e),done:!1};return n+=e,s}return{done:!0}})},cancel(){return A(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):fn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tW{constructor(e,n){this.Bu=e,this.serializer=n,this.metadata=new Qn,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((i=>{i&&i.$a()?this.metadata.resolve(i.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i==null?void 0:i.Qa)}`))}),(i=>this.metadata.reject(i)))}close(){return this.Bu.cancel()}getMetadata(){return A(this,null,function*(){return this.metadata.promise})}bu(){return A(this,null,function*(){return yield this.getMetadata(),this.ku()})}ku(){return A(this,null,function*(){const e=yield this.qu();if(e===null)return null;const n=this.Lu.decode(e),i=Number(n);isNaN(i)&&this.Qu(`length string (${n}) is not valid number`);const s=yield this.$u(i);return new RK(JSON.parse(s),e.length+i)})}Uu(){return this.buffer.findIndex((e=>e===123))}qu(){return A(this,null,function*(){for(;this.Uu()<0&&!(yield this.Ku()););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}$u(e){return A(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ku())&&this.Qu("Reached the end of bundle when more is expected.");const n=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}Ku(){return A(this,null,function*(){const e=yield this.Bu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nW{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return A(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new me(oe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=yield(function(s,r){return A(this,null,function*(){const a=Ce(s),c={documents:r.map((x=>Nf(a.serializer,x)))},u=yield a.Ho("BatchGetDocuments",a.serializer.databaseId,ht.emptyPath(),c,r.length),h=new Map;u.forEach((x=>{const T=p$(a.serializer,x);h.set(T.key.toString(),T)}));const g=[];return r.forEach((x=>{const T=h.get(x.toString());Ve(!!T,55234,{key:x}),g.push(T)})),g})})(this.datastore,e);return n.forEach((i=>this.recordVersion(i))),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new nd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return A(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,i)=>{const s=be.fromPath(i);this.mutations.push(new jw(s,this.precondition(s)))})),yield(function(i,s){return A(this,null,function*(){const r=Ce(i),a={writes:s.map((c=>Mf(r.serializer,c)))};yield r.Go("Commit",r.serializer.databaseId,ht.emptyPath(),a)})})(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Ne(50498,{Gu:e.constructor.name});n=Ue.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new me(oe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Ue.min())?Yt.exists(!1):Yt.updateTime(n):Yt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Ue.min()))throw new me(oe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Yt.updateTime(n)}return Yt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iW{constructor(e,n,i,s,r){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=s,this.deferred=r,this.zu=i.maxAttempts,this.M_=new sb(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((()=>A(this,null,function*(){const e=new nW(this.datastore),n=this.Hu(e);n&&n.then((i=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(i)})).catch((s=>{this.Yu(s)}))))})).catch((i=>{this.Yu(i)}))})))}Hu(e){try{const n=this.updateFunction(e);return!Yf(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!Qk(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da="FirestoreClient";class sW{constructor(e,n,i,s,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=Bn.UNAUTHENTICATED,this.clientId=Iw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(i,(a=>A(this,null,function*(){ge(da,"Received user=",a.uid),yield this.authCredentialListener(a),this.user=a}))),this.appCheckCredentials.start(i,(a=>(ge(da,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((()=>A(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=od(n,"Failed to shutdown persistence");e.reject(i)}}))),e.promise}}function Ox(t,e){return A(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),ge(da,"Initializing OfflineComponentProvider");const n=t.configuration;yield e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((s=>A(null,null,function*(){i.isEqual(s)||(yield NV(e.localStore,s),i=s)}))),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e})}function jR(t,e){return A(this,null,function*(){t.asyncQueue.verifyOperationInProgress();const n=yield xb(t);ge(da,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener((i=>kR(e.remoteStore,i))),t.setAppCheckTokenChangeListener(((i,s)=>kR(e.remoteStore,s))),t._onlineComponents=e})}function xb(t){return A(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ge(da,"Using user provided OfflineComponentProvider");try{yield Ox(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===oe.FAILED_PRECONDITION||s.code===oe.UNIMPLEMENTED:!(typeof DOMException!="undefined"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;lr("Error using user provided cache. Falling back to memory cache: "+n),yield Ox(t,new Pf)}}else ge(da,"Using default OfflineComponentProvider"),yield Ox(t,new eW(void 0));return t._offlineComponents})}function Dy(t){return A(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(ge(da,"Using user provided OnlineComponentProvider"),yield jR(t,t._uninitializedComponentsProvider._online)):(ge(da,"Using default OnlineComponentProvider"),yield jR(t,new Df))),t._onlineComponents})}function tL(t){return xb(t).then((e=>e.persistence))}function _b(t){return xb(t).then((e=>e.localStore))}function nL(t){return Dy(t).then((e=>e.remoteStore))}function Tb(t){return Dy(t).then((e=>e.syncEngine))}function rW(t){return Dy(t).then((e=>e.datastore))}function qu(t){return A(this,null,function*(){const e=yield Dy(t),n=e.eventManager;return n.onListen=kK.bind(null,e.syncEngine),n.onUnlisten=LK.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=VK.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=UK.bind(null,e.syncEngine),n})}function oW(t){return t.asyncQueue.enqueue((()=>A(null,null,function*(){const e=yield tL(t),n=yield nL(t);return e.setNetworkEnabled(!0),(function(s){const r=Ce(s);return r.Ea.delete(0),sm(r)})(n)})))}function aW(t){return t.asyncQueue.enqueue((()=>A(null,null,function*(){const e=yield tL(t),n=yield nL(t);return e.setNetworkEnabled(!1),(function(s){return A(this,null,function*(){const r=Ce(s);r.Ea.add(0),yield id(r),r.Ra.set("Offline")})})(n)})))}function lW(t,e){const n=new Qn;return t.asyncQueue.enqueueAndForget((()=>A(null,null,function*(){return(function(s,r,a){return A(this,null,function*(){try{const c=yield(function(h,g){const x=Ce(h);return x.persistence.runTransaction("read document","readonly",(T=>x.localDocuments.getDocument(T,g)))})(s,r);c.isFoundDocument()?a.resolve(c):c.isNoDocument()?a.resolve(null):a.reject(new me(oe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){const u=od(c,`Failed to get document '${r} from cache`);a.reject(u)}})})(yield _b(t),e,n)}))),n.promise}function iL(t,e,n={}){const i=new Qn;return t.asyncQueue.enqueueAndForget((()=>A(null,null,function*(){return(function(r,a,c,u,h){const g=new Py({next:T=>{g.Nu(),a.enqueueAndForget((()=>ub(r,x)));const b=T.docs.has(c);!b&&T.fromCache?h.reject(new me(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&T.fromCache&&u&&u.source==="server"?h.reject(new me(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(T)},error:T=>h.reject(T)}),x=new hb(ed(c.path),g,{includeMetadataChanges:!0,qa:!0});return cb(r,x)})(yield qu(t),t.asyncQueue,e,n,i)}))),i.promise}function cW(t,e){const n=new Qn;return t.asyncQueue.enqueueAndForget((()=>A(null,null,function*(){return(function(s,r,a){return A(this,null,function*(){try{const c=yield zg(s,r,!0),u=new JV(r,c.Qs),h=u.ru(c.documents),g=u.applyChanges(h,!1);a.resolve(g.snapshot)}catch(c){const u=od(c,`Failed to execute query '${r} against cache`);a.reject(u)}})})(yield _b(t),e,n)}))),n.promise}function sL(t,e,n={}){const i=new Qn;return t.asyncQueue.enqueueAndForget((()=>A(null,null,function*(){return(function(r,a,c,u,h){const g=new Py({next:T=>{g.Nu(),a.enqueueAndForget((()=>ub(r,x))),T.fromCache&&u.source==="server"?h.reject(new me(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(T)},error:T=>h.reject(T)}),x=new hb(c,g,{includeMetadataChanges:!0,qa:!0});return cb(r,x)})(yield qu(t),t.asyncQueue,e,n,i)}))),i.promise}function uW(t,e){const n=new Py(e);return t.asyncQueue.enqueueAndForget((()=>A(null,null,function*(){return(function(s,r){Ce(s).Ca.add(r),r.next()})(yield qu(t),n)}))),()=>{n.Nu(),t.asyncQueue.enqueueAndForget((()=>A(null,null,function*(){return(function(s,r){Ce(s).Ca.delete(r)})(yield qu(t),n)})))}}function dW(t,e,n,i){const s=(function(a,c){let u;return u=typeof a=="string"?Zk().encode(a):a,(function(g,x){return new tW(g,x)})((function(g,x){if(g instanceof Uint8Array)return qR(g,x);if(g instanceof ArrayBuffer)return qR(new Uint8Array(g),x);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(u),c)})(n,im(e));t.asyncQueue.enqueueAndForget((()=>A(null,null,function*(){ZK(yield Tb(t),s,i)})))}function hW(t,e){return t.asyncQueue.enqueue((()=>A(null,null,function*(){return(function(i,s){const r=Ce(i);return r.persistence.runTransaction("Get named query","readonly",(a=>r.Ii.getNamedQuery(a,s)))})(yield _b(t),e)})))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rL(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oL="firestore.googleapis.com",zR=!0;class HR{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new me(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=oL,this.ssl=zR}else this.host=e.host,this.ssl=(n=e.ssl)!=null?n:zR;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=vV;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<k$)throw new me(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ek("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rL((i=e.experimentalLongPollingOptions)!=null?i:{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new me(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new me(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new me(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rm{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new HR({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new HR(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new J7;switch(i.type){case"firstParty":return new eH(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new me(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return A(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=GR.get(n);i&&(ge("ComponentProvider","Removing Datastore"),GR.delete(n),i.terminate())})(this),Promise.resolve()}}function fW(t,e,n,i={}){var h;t=Tt(t,rm);const s=Gu(e),r=t._getSettings(),a=pe(J({},r),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;s&&(C2(`https://${c}`),I2("Firestore",!0)),r.host!==oL&&r.host!==c&&lr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=pe(J({},r),{host:c,ssl:s,emulatorOptions:i});if(!Xo(u,a)&&(t._setSettings(u),i.mockUserToken)){let g,x;if(typeof i.mockUserToken=="string")g=i.mockUserToken,x=Bn.MOCK_USER;else{g=h5(i.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new me(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new Bn(T)}t._authCredentials=new Q7(new XD(g,x))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _i=class aL{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new aL(this.firestore,e,this._query)}},Ot=class Uh{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Uh(this.firestore,e,this._key)}toJSON(){return{type:Uh._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Wf(n,Uh._jsonSchema))return new Uh(e,i||null,new be(ht.fromString(n.referencePath)))}};Ot._jsonSchemaVersion="firestore/documentReference/1.0",Ot._jsonSchema={type:bn("string",Ot._jsonSchemaVersion),referencePath:bn("string")};let Qo=class lL extends _i{constructor(e,n,i){super(e,n,ed(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new be(e))}withConverter(e){return new lL(this.firestore,e,this._path)}};function cL(t,e,...n){if(t=ze(t),Rw("collection","path",e),t instanceof rm){const i=ht.fromString(e,...n);return D1(i),new Qo(t,null,i)}{if(!(t instanceof Ot||t instanceof Qo))throw new me(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ht.fromString(e,...n));return D1(i),new Qo(t.firestore,null,i)}}function mW(t,e){if(t=Tt(t,rm),Rw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new me(oe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new _i(t,null,(function(i){return new Jr(ht.emptyPath(),i)})(e))}function Wg(t,e,...n){if(t=ze(t),arguments.length===1&&(e=Iw.newId()),Rw("doc","path",e),t instanceof rm){const i=ht.fromString(e,...n);return P1(i),new Ot(t,null,new be(i))}{if(!(t instanceof Ot||t instanceof Qo))throw new me(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ht.fromString(e,...n));return P1(i),new Ot(t.firestore,t instanceof Qo?t.converter:null,new be(i))}}function uL(t,e){return t=ze(t),e=ze(e),(t instanceof Ot||t instanceof Qo)&&(e instanceof Ot||e instanceof Qo)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function dL(t,e){return t=ze(t),e=ze(e),t instanceof _i&&e instanceof _i&&t.firestore===e.firestore&&Xf(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R="AsyncQueue";class KR{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new sb(this,"async_queue_retry"),this._c=()=>{const i=fg();i&&ge($R,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=fg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=fg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Qn;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}lc(){return A(this,null,function*(){if(this.Xu.length!==0){try{yield this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ya(e))throw e;ge($R,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}})}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,fn("INTERNAL UNHANDLED ERROR: ",WR(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=lb.createAndSchedule(this,e,n,i,(r=>this.hc(r)));return this.tc.push(s),s}uc(){this.nc&&Ne(47125,{Pc:WR(this.nc)})}verifyOperationInProgress(){}Tc(){return A(this,null,function*(){let e;do e=this.ac,yield e;while(e!==this.ac)})}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function WR(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(t){return(function(n,i){if(typeof n!="object"||n===null)return!1;const s=n;for(const r of i)if(r in s&&typeof s[r]=="function")return!0;return!1})(t,["next","error","complete"])}class pW{constructor(){this._progressObserver={},this._taskCompletionResolver=new Qn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,i){this._progressObserver={next:e,error:n,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gW=-1;let pn=class extends rm{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new KR,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return A(this,null,function*(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new KR(e),this._firestoreClient=void 0,yield e}})}};function ai(t){if(t._terminated)throw new me(oe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||hL(t),t._firestoreClient}function hL(t){var i,s,r;const e=t._freezeSettings(),n=(function(c,u,h,g){return new OH(c,u,h,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,rL(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((r=e.localCache)!=null&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new sW(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}})(t._componentsProvider))}function yW(t,e){lr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return fL(t,Df.provider,{build:i=>new My(i,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}function vW(t){return A(this,null,function*(){lr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();fL(t,Df.provider,{build:n=>new vb(n,e.cacheSizeBytes)})})}function fL(t,e,n){if((t=Tt(t,pn))._firestoreClient||t._terminated)throw new me(oe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new me(oe.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},hL(t)}function xW(t){if(t._initialized&&!t._terminated)throw new me(oe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Qn;return t._queue.enqueueAndForgetEvenWhileRestricted((()=>A(null,null,function*(){try{yield(function(i){return A(this,null,function*(){if(!ir.v())return Promise.resolve();const s=i+CV;yield ir.delete(s)})})(eb(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}))),e.promise}function _W(t){return(function(n){const i=new Qn;return n.asyncQueue.enqueueAndForget((()=>A(null,null,function*(){return jK(yield Tb(n),i)}))),i.promise})(ai(t=Tt(t,pn)))}function TW(t){return oW(ai(t=Tt(t,pn)))}function wW(t){return aW(ai(t=Tt(t,pn)))}function bW(t,e){const n=ai(t=Tt(t,pn)),i=new pW;return dW(n,t._databaseId,e,i),i}function EW(t,e){return hW(ai(t=Tt(t,pn)),e).then((n=>n?new _i(t,null,n.query):null))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ii(rn.fromBase64String(e))}catch(n){throw new me(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ii(rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ii._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Wf(e,ii._jsonSchema))return ii.fromBase64String(e.bytes)}}ii._jsonSchemaVersion="firestore/bytes/1.0",ii._jsonSchema={type:bn("string",ii._jsonSchemaVersion),bytes:bn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ha=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new me(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ol=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new me(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new me(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Xe(this._lat,e._lat)||Xe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ss._jsonSchemaVersion}}static fromJSON(e){if(Wf(e,Ss._jsonSchema))return new Ss(e.latitude,e.longitude)}}Ss._jsonSchemaVersion="firestore/geoPoint/1.0",Ss._jsonSchema={type:bn("string",Ss._jsonSchemaVersion),latitude:bn("number"),longitude:bn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,s){if(i.length!==s.length)return!1;for(let r=0;r<i.length;++r)if(i[r]!==s[r])return!1;return!0})(this._values,e._values)}toJSON(){return{type:rr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Wf(e,rr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new rr(e.vectorValues);throw new me(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}rr._jsonSchemaVersion="firestore/vectorValue/1.0",rr._jsonSchema={type:bn("string",rr._jsonSchemaVersion),vectorValues:bn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SW=/^__.*__$/;class AW{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Xr(e,this.data,this.fieldMask,n,this.fieldTransforms):new td(e,this.data,n,this.fieldTransforms)}}class mL{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Xr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function pL(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne(40011,{Ac:t})}}class ky{constructor(e,n,i,s,r,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.Rc(),this.fieldTransforms=r||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ky(J(J({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Yg(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(pL(this.Ac)&&SW.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class CW{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||im(e)}Cc(e,n,i,s=!1){return new ky({Ac:e,methodName:n,Dc:i,path:Wt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fl(t){const e=t._freezeSettings(),n=im(t._databaseId);return new CW(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Vy(t,e,n,i,s,r={}){const a=t.Cc(r.merge||r.mergeFields?2:0,e,n,s);Ib("Data must be an object, but it was:",a,i);const c=vL(i,a);let u,h;if(r.merge)u=new Ri(a.fieldMask),h=a.fieldTransforms;else if(r.mergeFields){const g=[];for(const x of r.mergeFields){const T=Q_(e,x,n);if(!a.contains(T))throw new me(oe.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);_L(g,T)||g.push(T)}u=new Ri(g),h=a.fieldTransforms.filter((x=>u.covers(x.field)))}else u=null,h=a.fieldTransforms;return new AW(new Jn(c),u,h)}class om extends Ol{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof om}}function gL(t,e,n){return new ky({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class wb extends Ol{_toFieldTransform(e){return new em(e.path,new Du)}isEqual(e){return e instanceof wb}}class bb extends Ol{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=gL(this,e,!0),i=this.vc.map((r=>Bl(r,n))),s=new Il(i);return new em(e.path,s)}isEqual(e){return e instanceof bb&&Xo(this.vc,e.vc)}}class Eb extends Ol{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=gL(this,e,!0),i=this.vc.map((r=>Bl(r,n))),s=new Rl(i);return new em(e.path,s)}isEqual(e){return e instanceof Eb&&Xo(this.vc,e.vc)}}class Sb extends Ol{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new ku(e.serializer,zk(e.serializer,this.Fc));return new em(e.path,n)}isEqual(e){return e instanceof Sb&&this.Fc===e.Fc}}function Ab(t,e,n,i){const s=t.Cc(1,e,n);Ib("Data must be an object, but it was:",s,i);const r=[],a=Jn.empty();va(i,((u,h)=>{const g=Rb(e,u,n);h=ze(h);const x=s.yc(g);if(h instanceof om)r.push(g);else{const T=Bl(h,x);T!=null&&(r.push(g),a.set(g,T))}}));const c=new Ri(r);return new mL(a,c,s.fieldTransforms)}function Cb(t,e,n,i,s,r){const a=t.Cc(1,e,n),c=[Q_(e,i,n)],u=[s];if(r.length%2!=0)throw new me(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<r.length;T+=2)c.push(Q_(e,r[T])),u.push(r[T+1]);const h=[],g=Jn.empty();for(let T=c.length-1;T>=0;--T)if(!_L(h,c[T])){const b=c[T];let S=u[T];S=ze(S);const P=a.yc(b);if(S instanceof om)h.push(b);else{const M=Bl(S,P);M!=null&&(h.push(b),g.set(b,M))}}const x=new Ri(h);return new mL(g,x,a.fieldTransforms)}function yL(t,e,n,i=!1){return Bl(n,t.Cc(i?4:3,e))}function Bl(t,e){if(xL(t=ze(t)))return Ib("Unsupported field value:",e,t),vL(t,e);if(t instanceof Ol)return(function(i,s){if(!pL(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,s){const r=[];let a=0;for(const c of i){let u=Bl(c,s.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),r.push(u),a++}return{arrayValue:{values:r}}})(t,e)}return(function(i,s){if((i=ze(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return zk(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const r=At.fromDate(i);return{timestampValue:Vu(s.serializer,r)}}if(i instanceof At){const r=new At(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Vu(s.serializer,r)}}if(i instanceof Ss)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ii)return{bytesValue:nV(s.serializer,i._byteString)};if(i instanceof Ot){const r=s.databaseId,a=i.firestore._databaseId;if(!a.isEqual(r))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Kw(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof rr)return(function(a,c){return{mapValue:{fields:{[Lw]:{stringValue:Uw},[Nu]:{arrayValue:{values:a.toArray().map((h=>{if(typeof h!="number")throw c.Sc("VectorValues must only contain numeric values.");return qw(c.serializer,h)}))}}}}}})(i,s);throw s.Sc(`Unsupported field value: ${gy(i)}`)})(t,e)}function vL(t,e){const n={};return xk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):va(t,((i,s)=>{const r=Bl(s,e.mc(i));r!=null&&(n[i]=r)})),{mapValue:{fields:n}}}function xL(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof At||t instanceof Ss||t instanceof ii||t instanceof Ot||t instanceof Ol||t instanceof rr)}function Ib(t,e,n){if(!xL(n)||!tk(n)){const i=gy(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function Q_(t,e,n){if((e=ze(e))instanceof ha)return e._internalPath;if(typeof e=="string")return Rb(t,e);throw Yg("Field path arguments must be of type string or ",t,!1,void 0,n)}const IW=new RegExp("[~\\*/\\[\\]]");function Rb(t,e,n){if(e.search(IW)>=0)throw Yg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ha(...e.split("."))._internalPath}catch(i){throw Yg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Yg(t,e,n,i,s){const r=i&&!i.isEmpty(),a=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(r||a)&&(u+=" (found",r&&(u+=` in field ${i}`),a&&(u+=` in document ${s}`),u+=")"),new me(oe.INVALID_ARGUMENT,c+t+u)}function _L(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,n,i,s,r){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new RW(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ly("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class RW extends kf{data(){return super.data()}}function Ly(t,e){return typeof e=="string"?Rb(t,e):e instanceof ha?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new me(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Nb{}class am extends Nb{}function Oo(t,e,...n){let i=[];e instanceof Nb&&i.push(e),i=i.concat(n),(function(r){const a=r.filter((u=>u instanceof Mb)).length,c=r.filter((u=>u instanceof Uy)).length;if(a>1||a>0&&c>0)throw new me(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const s of i)t=s._apply(t);return t}class Uy extends am{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Uy(e,n,i)}_apply(e){const n=this._parse(e);return bL(e._query,n),new _i(e.firestore,e.converter,U_(e._query,n))}_parse(e){const n=Fl(e.firestore);return(function(r,a,c,u,h,g,x){let T;if(h.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new me(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){JR(x,g);const S=[];for(const P of x)S.push(YR(u,r,P));T={arrayValue:{values:S}}}else T=YR(u,r,x)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||JR(x,g),T=yL(c,a,x,g==="in"||g==="not-in");return ft.create(h,g,T)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function NW(t,e,n){const i=e,s=Ly("where",t);return Uy._create(s,i,n)}class Mb extends Nb{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Mb(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:Nt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,r){let a=s;const c=r.getFlattenedFilters();for(const u of c)bL(a,u),a=U_(a,u)})(e._query,n),new _i(e.firestore,e.converter,U_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Pb extends am{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Pb(e,n)}_apply(e){const n=(function(s,r,a){if(s.startAt!==null)throw new me(oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new me(oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Rf(r,a)})(e._query,this._field,this._direction);return new _i(e.firestore,e.converter,(function(s,r){const a=s.explicitOrderBy.concat([r]);return new Jr(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,n))}}function MW(t,e="asc"){const n=e,i=Ly("orderBy",t);return Pb._create(i,n)}class Oy extends am{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new Oy(e,n,i)}_apply(e){return new _i(e.firestore,e.converter,Fg(e._query,this._limit,this._limitType))}}function PW(t){return nk("limit",t),Oy._create("limit",t,"F")}function DW(t){return nk("limitToLast",t),Oy._create("limitToLast",t,"L")}class Fy extends am{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new Fy(e,n,i)}_apply(e){const n=wL(e,this.type,this._docOrFields,this._inclusive);return new _i(e.firestore,e.converter,(function(s,r){return new Jr(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,r,s.endAt)})(e._query,n))}}function kW(...t){return Fy._create("startAt",t,!0)}function VW(...t){return Fy._create("startAfter",t,!1)}class By extends am{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new By(e,n,i)}_apply(e){const n=wL(e,this.type,this._docOrFields,this._inclusive);return new _i(e.firestore,e.converter,(function(s,r){return new Jr(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,r)})(e._query,n))}}function LW(...t){return By._create("endBefore",t,!1)}function UW(...t){return By._create("endAt",t,!0)}function wL(t,e,n,i){if(n[0]=ze(n[0]),n[0]instanceof kf)return(function(r,a,c,u,h){if(!u)throw new me(oe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const g=[];for(const x of hu(r))if(x.field.isKeyField())g.push(Al(a,u.key));else{const T=u.data.field(x.field);if(Ty(T))throw new me(oe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+x.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(T===null){const b=x.field.canonicalString();throw new me(oe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${b}' (used as the orderBy) does not exist.`)}g.push(T)}return new ca(g,h)})(t._query,t.firestore._databaseId,e,n[0]._document,i);{const s=Fl(t.firestore);return(function(a,c,u,h,g,x){const T=a.explicitOrderBy;if(g.length>T.length)throw new me(oe.INVALID_ARGUMENT,`Too many arguments provided to ${h}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const b=[];for(let S=0;S<g.length;S++){const P=g[S];if(T[S].field.isKeyField()){if(typeof P!="string")throw new me(oe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${h}(), but got a ${typeof P}`);if(!Fw(a)&&P.indexOf("/")!==-1)throw new me(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${h}() must be a plain document ID, but '${P}' contains a slash.`);const M=a.path.child(ht.fromString(P));if(!be.isDocumentKey(M))throw new me(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${h}() must result in a valid document path, but '${M}' is not because it contains an odd number of segments.`);const V=new be(M);b.push(Al(c,V))}else{const M=yL(u,h,P);b.push(M)}}return new ca(b,x)})(t._query,t.firestore._databaseId,s,e,n,i)}}function YR(t,e,n){if(typeof(n=ze(n))=="string"){if(n==="")throw new me(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Fw(e)&&n.indexOf("/")!==-1)throw new me(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(ht.fromString(n));if(!be.isDocumentKey(i))throw new me(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Al(t,new be(i))}if(n instanceof Ot)return Al(t,n._key);throw new me(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gy(n)}.`)}function JR(t,e){if(!Array.isArray(t)||t.length===0)throw new me(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bL(t,e){const n=(function(s,r){for(const a of s)for(const c of a.getFlattenedFilters())if(r.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new me(oe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new me(oe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Db{convertValue(e,n="none"){switch(aa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes($r(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return va(e,((s,r)=>{i[s]=this.convertValue(r,n)})),i}convertVectorValue(e){var i,s,r;const n=(r=(s=(i=e.fields)==null?void 0:i[Nu].arrayValue)==null?void 0:s.values)==null?void 0:r.map((a=>$t(a.doubleValue)));return new rr(n)}convertGeoPoint(e){return new Ss($t(e.latitude),$t(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=wy(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Af(e));default:return null}}convertTimestamp(e){const n=Hr(e);return new At(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=ht.fromString(e);Ve(fV(i),9688,{name:e});const s=new oa(i.get(1),i.get(3)),r=new be(i.popFirst(5));return s.isEqual(n)||fn(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class OW extends Db{constructor(e){super(),this.firestore=e}convertBytes(e){return new ii(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,n)}}class gl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let us=class EL extends kf{constructor(e,n,i,s,r,a){super(e,n,i,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new of(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Ly("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new me(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=EL._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};us._jsonSchemaVersion="firestore/documentSnapshot/1.0",us._jsonSchema={type:bn("string",us._jsonSchemaVersion),bundleSource:bn("string","DocumentSnapshot"),bundleName:bn("string"),bundle:bn("string")};let of=class extends us{data(e={}){return super.data(e)}},As=class SL{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new gl(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new of(this._firestore,this._userDataWriter,i.key,i,new gl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new me(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,r){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map((c=>{const u=new of(s._firestore,s._userDataWriter,c.doc.key,c.doc,new gl(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}}))}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>r||c.type!==3)).map((c=>{const u=new of(s._firestore,s._userDataWriter,c.doc.key,c.doc,new gl(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,g=-1;return c.type!==0&&(h=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),g=a.indexOf(c.doc.key)),{type:FW(c.type),doc:u,oldIndex:h,newIndex:g}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new me(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=SL._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Iw.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach((r=>{r._document!==null&&(n.push(r._document),i.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),s.push(r.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function FW(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne(61501,{type:t})}}function AL(t,e){return t instanceof us&&e instanceof us?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof As&&e instanceof As&&t._firestore===e._firestore&&dL(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BW(t){t=Tt(t,Ot);const e=Tt(t.firestore,pn);return iL(ai(e),t._key).then((n=>kb(e,t,n)))}As._jsonSchemaVersion="firestore/querySnapshot/1.0",As._jsonSchema={type:bn("string",As._jsonSchemaVersion),bundleSource:bn("string","QuerySnapshot"),bundleName:bn("string"),bundle:bn("string")};class ql extends Db{constructor(e){super(),this.firestore=e}convertBytes(e){return new ii(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,n)}}function qW(t){t=Tt(t,Ot);const e=Tt(t.firestore,pn),n=ai(e),i=new ql(e);return lW(n,t._key).then((s=>new us(e,i,t._key,s,new gl(s!==null&&s.hasLocalMutations,!0),t.converter)))}function jW(t){t=Tt(t,Ot);const e=Tt(t.firestore,pn);return iL(ai(e),t._key,{source:"server"}).then((n=>kb(e,t,n)))}function GW(t){t=Tt(t,_i);const e=Tt(t.firestore,pn),n=ai(e),i=new ql(e);return TL(t._query),sL(n,t._query).then((s=>new As(e,i,t,s)))}function zW(t){t=Tt(t,_i);const e=Tt(t.firestore,pn),n=ai(e),i=new ql(e);return cW(n,t._query).then((s=>new As(e,i,t,s)))}function HW(t){t=Tt(t,_i);const e=Tt(t.firestore,pn),n=ai(e),i=new ql(e);return sL(n,t._query,{source:"server"}).then((s=>new As(e,i,t,s)))}function QR(t,e,n){t=Tt(t,Ot);const i=Tt(t.firestore,pn),s=qy(t.converter,e,n);return lm(i,[Vy(Fl(i),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Yt.none())])}function XR(t,e,n,...i){t=Tt(t,Ot);const s=Tt(t.firestore,pn),r=Fl(s);let a;return a=typeof(e=ze(e))=="string"||e instanceof ha?Cb(r,"updateDoc",t._key,e,n,i):Ab(r,"updateDoc",t._key,e),lm(s,[a.toMutation(t._key,Yt.exists(!0))])}function $W(t){return lm(Tt(t.firestore,pn),[new nd(t._key,Yt.none())])}function KW(t,e){const n=Tt(t.firestore,pn),i=Wg(t),s=qy(t.converter,e);return lm(n,[Vy(Fl(t.firestore),"addDoc",i._key,s,t.converter!==null,{}).toMutation(i._key,Yt.exists(!1))]).then((()=>i))}function CL(t,...e){var u,h,g;t=ze(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||J_(e[i])||(n=e[i++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(J_(e[i])){const x=e[i];e[i]=(u=x.next)==null?void 0:u.bind(x),e[i+1]=(h=x.error)==null?void 0:h.bind(x),e[i+2]=(g=x.complete)==null?void 0:g.bind(x)}let r,a,c;if(t instanceof Ot)a=Tt(t.firestore,pn),c=ed(t._key.path),r={next:x=>{e[i]&&e[i](kb(a,t,x))},error:e[i+1],complete:e[i+2]};else{const x=Tt(t,_i);a=Tt(x.firestore,pn),c=x._query;const T=new ql(a);r={next:b=>{e[i]&&e[i](new As(a,T,x,b))},error:e[i+1],complete:e[i+2]},TL(t._query)}return(function(T,b,S,P){const M=new Py(P),V=new hb(b,M,S);return T.asyncQueue.enqueueAndForget((()=>A(null,null,function*(){return cb(yield qu(T),V)}))),()=>{M.Nu(),T.asyncQueue.enqueueAndForget((()=>A(null,null,function*(){return ub(yield qu(T),V)})))}})(ai(a),c,s,r)}function WW(t,e){return uW(ai(t=Tt(t,pn)),J_(e)?e:{next:e})}function lm(t,e){return(function(i,s){const r=new Qn;return i.asyncQueue.enqueueAndForget((()=>A(null,null,function*(){return OK(yield Tb(i),s,r)}))),r.promise})(ai(t),e)}function kb(t,e,n){const i=n.docs.get(e._key),s=new ql(t);return new us(t,s,e._key,i,new gl(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YW={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let JW=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Fl(e)}set(e,n,i){this._verifyNotCommitted();const s=Ho(e,this._firestore),r=qy(s.converter,n,i),a=Vy(this._dataReader,"WriteBatch.set",s._key,r,s.converter!==null,i);return this._mutations.push(a.toMutation(s._key,Yt.none())),this}update(e,n,i,...s){this._verifyNotCommitted();const r=Ho(e,this._firestore);let a;return a=typeof(n=ze(n))=="string"||n instanceof ha?Cb(this._dataReader,"WriteBatch.update",r._key,n,i,s):Ab(this._dataReader,"WriteBatch.update",r._key,n),this._mutations.push(a.toMutation(r._key,Yt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ho(e,this._firestore);return this._mutations=this._mutations.concat(new nd(n._key,Yt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new me(oe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ho(t,e){if((t=ze(t)).firestore!==e)throw new me(oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QW{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Fl(e)}get(e){const n=Ho(e,this._firestore),i=new OW(this._firestore);return this._transaction.lookup([n._key]).then((s=>{if(!s||s.length!==1)return Ne(24041);const r=s[0];if(r.isFoundDocument())return new kf(this._firestore,i,r.key,r,n.converter);if(r.isNoDocument())return new kf(this._firestore,i,n._key,null,n.converter);throw Ne(18433,{doc:r})}))}set(e,n,i){const s=Ho(e,this._firestore),r=qy(s.converter,n,i),a=Vy(this._dataReader,"Transaction.set",s._key,r,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(e,n,i,...s){const r=Ho(e,this._firestore);let a;return a=typeof(n=ze(n))=="string"||n instanceof ha?Cb(this._dataReader,"Transaction.update",r._key,n,i,s):Ab(this._dataReader,"Transaction.update",r._key,n),this._transaction.update(r._key,a),this}delete(e){const n=Ho(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let XW=class extends QW{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Ho(e,this._firestore),i=new ql(this._firestore);return super.get(e).then((s=>new us(this._firestore,i,n._key,s._document,new gl(!1,!1),n.converter)))}};function ZW(t,e,n){t=Tt(t,pn);const i=J(J({},YW),n);return(function(r){if(r.maxAttempts<1)throw new me(oe.INVALID_ARGUMENT,"Max attempts must be at least 1")})(i),(function(r,a,c){const u=new Qn;return r.asyncQueue.enqueueAndForget((()=>A(null,null,function*(){const h=yield rW(r);new iW(r.asyncQueue,h,c,a,u).ju()}))),u.promise})(ai(t),(s=>e(new XW(t,s))),i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eY(){return new om("deleteField")}function tY(){return new wb("serverTimestamp")}function nY(...t){return new bb("arrayUnion",t)}function iY(...t){return new Eb("arrayRemove",t)}function sY(t){return new Sb("increment",t)}(function(e,n=!0){(function(s){Zu=s})(fa),ta(new or("firestore",((i,{instanceIdentifier:s,options:r})=>{const a=i.getProvider("app").getImmediate(),c=new pn(new X7(i.getProvider("auth-internal")),new tH(a,i.getProvider("app-check-internal")),(function(h,g){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new me(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oa(h.options.projectId,g)})(a,s),a);return r=J({useFetchStreams:n},r),c._setSettings(r),c}),"PUBLIC").setMultipleInstances(!0)),bs(I1,R1,e),bs(I1,R1,"esm2020")})();const rY="@firebase/firestore-compat",oY="0.4.0";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new me("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZR(){if(typeof Uint8Array=="undefined")throw new me("unimplemented","Uint8Arrays are not available in this environment.")}function eN(){if(!LH())throw new me("unimplemented","Blobs are unavailable in Firestore in this environment.")}let IL=class X_{constructor(e){this._delegate=e}static fromBase64String(e){return eN(),new X_(ii.fromBase64String(e))}static fromUint8Array(e){return ZR(),new X_(ii.fromUint8Array(e))}toBase64(){return eN(),this._delegate.toBase64()}toUint8Array(){return ZR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(t){return aY(t,["next","error","complete"])}function aY(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const i of e)if(i in n&&typeof n[i]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lY{enableIndexedDbPersistence(e,n){return yW(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return vW(e._delegate)}clearIndexedDbPersistence(e){return xW(e._delegate)}}class RL{constructor(e,n,i){this._delegate=n,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof oa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&lr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=J(J({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,i={}){fW(this._delegate,e,n,i)}enableNetwork(){return TW(this._delegate)}disableNetwork(){return wW(this._delegate)}enablePersistence(e){let n=!1,i=!1;return e&&(n=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,ek("synchronizeTabs",n,"experimentalForceOwningTab",i)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return _W(this._delegate)}onSnapshotsInSync(e){return WW(this._delegate,e)}get app(){if(!this._appCompat)throw new me("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ju(this,cL(this._delegate,e))}catch(n){throw gi(n,"collection()","Firestore.collection()")}}doc(e){try{return new ls(this,Wg(this._delegate,e))}catch(n){throw gi(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new pi(this,mW(this._delegate,e))}catch(n){throw gi(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return ZW(this._delegate,n=>e(new NL(this,n)))}batch(){return ai(this._delegate),new ML(new JW(this._delegate,e=>lm(this._delegate,e)))}loadBundle(e){return bW(this._delegate,e)}namedQuery(e){return EW(this._delegate,e).then(n=>n?new pi(this,n):null)}}class jy extends Db{constructor(e){super(),this.firestore=e}convertBytes(e){return new IL(new ii(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return ls.forKey(n,this.firestore,null)}}function cY(t){W7(t)}class NL{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new jy(e)}get(e){const n=yl(e);return this._delegate.get(n).then(i=>new Vf(this._firestore,new us(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,n.converter)))}set(e,n,i){const s=yl(e);return i?(Vb("Transaction.set",i),this._delegate.set(s,n,i)):this._delegate.set(s,n),this}update(e,n,i,...s){const r=yl(e);return arguments.length===2?this._delegate.update(r,n):this._delegate.update(r,n,i,...s),this}delete(e){const n=yl(e);return this._delegate.delete(n),this}}class ML{constructor(e){this._delegate=e}set(e,n,i){const s=yl(e);return i?(Vb("WriteBatch.set",i),this._delegate.set(s,n,i)):this._delegate.set(s,n),this}update(e,n,i,...s){const r=yl(e);return arguments.length===2?this._delegate.update(r,n):this._delegate.update(r,n,i,...s),this}delete(e){const n=yl(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class kl{constructor(e,n,i){this._firestore=e,this._userDataWriter=n,this._delegate=i}fromFirestore(e,n){const i=new of(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Lf(this._firestore,i),n!=null?n:{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const i=kl.INSTANCES;let s=i.get(e);s||(s=new WeakMap,i.set(e,s));let r=s.get(n);return r||(r=new kl(e,new jy(e),n),s.set(n,r)),r}}kl.INSTANCES=new WeakMap;class ls{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new jy(e)}static forPath(e,n,i){if(e.length%2!==0)throw new me("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ls(n,new Ot(n._delegate,i,new be(e)))}static forKey(e,n,i){return new ls(n,new Ot(n._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new ju(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ju(this.firestore,cL(this._delegate,e))}catch(n){throw gi(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ze(e),e instanceof Ot?uL(this._delegate,e):!1}set(e,n){n=Vb("DocumentReference.set",n);try{return n?QR(this._delegate,e,n):QR(this._delegate,e)}catch(i){throw gi(i,"setDoc()","DocumentReference.set()")}}update(e,n,...i){try{return arguments.length===1?XR(this._delegate,e):XR(this._delegate,e,n,...i)}catch(s){throw gi(s,"updateDoc()","DocumentReference.update()")}}delete(){return $W(this._delegate)}onSnapshot(...e){const n=PL(e),i=DL(e,s=>new Vf(this.firestore,new us(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return CL(this._delegate,n,i)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=qW(this._delegate):(e==null?void 0:e.source)==="server"?n=jW(this._delegate):n=BW(this._delegate),n.then(i=>new Vf(this.firestore,new us(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new ls(this.firestore,e?this._delegate.withConverter(kl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function gi(t,e,n){return t.message=t.message.replace(e,n),t}function PL(t){for(const e of t)if(typeof e=="object"&&!Z_(e))return e;return{}}function DL(t,e){var i,s;let n;return Z_(t[0])?n=t[0]:Z_(t[1])?n=t[1]:typeof t[0]=="function"?n={next:t[0],error:t[1],complete:t[2]}:n={next:t[1],error:t[2],complete:t[3]},{next:r=>{n.next&&n.next(e(r))},error:(i=n.error)==null?void 0:i.bind(n),complete:(s=n.complete)==null?void 0:s.bind(n)}}class Vf{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new ls(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return AL(this._delegate,e._delegate)}}class Lf extends Vf{data(e){const n=this._delegate.data(e);return this._delegate._converter||Y7(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}}class pi{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new jy(e)}where(e,n,i){try{return new pi(this.firestore,Oo(this._delegate,NW(e,n,i)))}catch(s){throw gi(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new pi(this.firestore,Oo(this._delegate,MW(e,n)))}catch(i){throw gi(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new pi(this.firestore,Oo(this._delegate,PW(e)))}catch(n){throw gi(n,"limit()","Query.limit()")}}limitToLast(e){try{return new pi(this.firestore,Oo(this._delegate,DW(e)))}catch(n){throw gi(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new pi(this.firestore,Oo(this._delegate,kW(...e)))}catch(n){throw gi(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new pi(this.firestore,Oo(this._delegate,VW(...e)))}catch(n){throw gi(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new pi(this.firestore,Oo(this._delegate,LW(...e)))}catch(n){throw gi(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new pi(this.firestore,Oo(this._delegate,UW(...e)))}catch(n){throw gi(n,"endAt()","Query.endAt()")}}isEqual(e){return dL(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=zW(this._delegate):(e==null?void 0:e.source)==="server"?n=HW(this._delegate):n=GW(this._delegate),n.then(i=>new eT(this.firestore,new As(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const n=PL(e),i=DL(e,s=>new eT(this.firestore,new As(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return CL(this._delegate,n,i)}withConverter(e){return new pi(this.firestore,e?this._delegate.withConverter(kl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class uY{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Lf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class eT{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new pi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Lf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new uY(this._firestore,n))}forEach(e,n){this._delegate.forEach(i=>{e.call(n,new Lf(this._firestore,i))})}isEqual(e){return AL(this._delegate,e._delegate)}}class ju extends pi{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ls(this.firestore,e):null}doc(e){try{return e===void 0?new ls(this.firestore,Wg(this._delegate)):new ls(this.firestore,Wg(this._delegate,e))}catch(n){throw gi(n,"doc()","CollectionReference.doc()")}}add(e){return KW(this._delegate,e).then(n=>new ls(this.firestore,n))}isEqual(e){return uL(this._delegate,e._delegate)}withConverter(e){return new ju(this.firestore,e?this._delegate.withConverter(kl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function yl(t){return Tt(t,Ot)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(...e){this._delegate=new ha(...e)}static documentId(){return new Lb(Wt.keyField().canonicalString())}isEqual(e){return e=ze(e),e instanceof ha?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{static serverTimestamp(){const e=tY();return e._methodName="FieldValue.serverTimestamp",new ul(e)}static delete(){const e=eY();return e._methodName="FieldValue.delete",new ul(e)}static arrayUnion(...e){const n=nY(...e);return n._methodName="FieldValue.arrayUnion",new ul(n)}static arrayRemove(...e){const n=iY(...e);return n._methodName="FieldValue.arrayRemove",new ul(n)}static increment(e){const n=sY(e);return n._methodName="FieldValue.increment",new ul(n)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dY={Firestore:RL,GeoPoint:Ss,Timestamp:At,Blob:IL,Transaction:NL,WriteBatch:ML,DocumentReference:ls,DocumentSnapshot:Vf,Query:pi,QueryDocumentSnapshot:Lf,QuerySnapshot:eT,CollectionReference:ju,FieldPath:Lb,FieldValue:ul,setLogLevel:cY,CACHE_SIZE_UNLIMITED:gW};function hY(t,e){t.INTERNAL.registerComponent(new or("firestore-compat",n=>{const i=n.getProvider("app-compat").getImmediate(),s=n.getProvider("firestore").getImmediate();return e(i,s)},"PUBLIC").setServiceProps(J({},dY)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fY(t){hY(t,(e,n)=>new RL(e,n,new lY)),t.registerVersion(rY,oY)}fY(_t);const kL={apiKey:"AIzaSyCrM4asB5oZreqLf2zodwABKGwNeqiEAP4",authDomain:"growwithme-18ce2.firebaseapp.com",projectId:"growwithme-18ce2",storageBucket:"growwithme-18ce2.appspot.com",messagingSenderId:"889105420419",appId:"1:889105420419:web:3fa56d6876340029ee8bb6",measurementId:"G-N5NR1H01Z0"};_t.apps.length||_t.initializeApp(kL);const Fo=_t.auth(),Se=_t.firestore(),mY=new _t.auth.GoogleAuthProvider;mY.setCustomParameters({prompt:"select_account",client_id:"889105420419-n9vdkh7ogbqvmgu81k4tq4r1eb9voe1a.apps.googleusercontent.com"});const je={getIdeasPaginated:(t,e=20)=>A(null,null,function*(){let n=Se.collection("ideas").orderBy("status").limit(e);t&&(n=n.startAfter(t));const i=yield n.get(),s=i.docs.map(c=>J({id:c.id},c.data())),r=i.docs.length>0?i.docs[i.docs.length-1]:null,a=i.docs.length===e;return{ideas:s,lastDoc:r,hasMore:a}}),getUserProfile:t=>A(null,null,function*(){const n=yield Se.collection("users").doc(t).get();return n.exists?J({id:n.id},n.data()):null}),createUserProfile:(t,e)=>A(null,null,function*(){yield Se.collection("users").doc(t).set(e)}),getUsers:t=>A(null,null,function*(){const n=yield Se.collection("users").get(),i=[];return n.forEach(s=>{i.push(J({id:s.id},s.data()))}),t?i.filter(s=>s.id!==t):i}),getChats:t=>A(null,null,function*(){const n=yield Se.collection("chats").where("participants","array-contains",t).get(),i=[];for(const s of n.docs){const r=s.data(),a=r.participants.find(c=>c!==t);if(a){const c=yield je.getUserProfile(a);c&&i.push(pe(J({id:s.id},r),{participantDetails:[c]}))}}return i}),getChatsRealtime:(t,e)=>Se.collection("chats").where("participants","array-contains",t).onSnapshot(i=>A(null,null,function*(){const s=[];for(const r of i.docs){const a=r.data(),c=a.participants.find(u=>u!==t);if(c){const u=yield je.getUserProfile(c);u&&s.push(pe(J({id:r.id},a),{participantDetails:[u]}))}}e(s)})),markChatAsRead:(t,e)=>A(null,null,function*(){try{yield Se.collection("chats").doc(t).update({[`unreadCounts.${e}`]:0})}catch(n){console.error("Failed to mark chat as read:",n)}}),getChatId:(t,e)=>[t,e].sort().join("_"),postIdea:t=>A(null,null,function*(){const e=pe(J({},t),{likes:[],comments:[]});yield Se.collection("ideas").add(e)}),getIdeas:()=>A(null,null,function*(){return(yield Se.collection("ideas").orderBy("status").limit(20).get()).docs.map(n=>J({id:n.id},n.data()))}),getIdeasByFounder:t=>A(null,null,function*(){return(yield Se.collection("ideas").where("founderId","==",t).get()).docs.map(i=>J({id:i.id},i.data()))}),joinIdea:(t,e)=>A(null,null,function*(){yield Se.collection("ideas").doc(t).update({team:_t.firestore.FieldValue.arrayUnion(e)})}),createJoinRequest:(t,e)=>A(null,null,function*(){const n={ideaId:t.id,ideaTitle:t.title,developerId:e.id,developerName:e.name,developerAvatar:e.avatarUrl,founderId:t.founderId,status:"pending",timestamp:new Date};yield Se.collection("joinRequests").add(n)}),getJoinRequestsForFounder:(t,e)=>Se.collection("joinRequests").where("founderId","==",t).where("status","==","pending").onSnapshot(s=>{const r=s.docs.map(a=>J({id:a.id},a.data()));e(r)}),getJoinRequestsForDeveloper:(t,e)=>Se.collection("joinRequests").where("developerId","==",t).onSnapshot(s=>{const r=s.docs.map(a=>J({id:a.id},a.data()));e(r)}),updateJoinRequest:(t,e)=>A(null,null,function*(){const n=Se.collection("joinRequests").doc(t);if(yield n.update({status:e}),e==="approved"){const s=(yield n.get()).data();yield je.joinIdea(s.ideaId,s.developerId)}}),removeTeamMember:(t,e)=>A(null,null,function*(){const n=Se.collection("ideas").doc(t),r=yield Se.collection("joinRequests").where("ideaId","==",t).where("developerId","==",e).where("status","==","approved").get(),a=Se.batch();a.update(n,{team:_t.firestore.FieldValue.arrayRemove(e)}),r.forEach(c=>{a.update(c.ref,{status:"rejected"})}),yield a.commit()}),createConnectionRequest:(t,e)=>A(null,null,function*(){const n=[t.id,e].sort().join("_"),i=Se.collection("connectionRequests").doc(n),s=yield i.get();if(s.exists){const c=s.data();if(c&&c.status==="pending")throw new Error("Connection request already exists.")}const r={fromUserId:t.id,fromUserName:t.name,fromUserAvatar:t.avatarUrl,fromUserRole:t.role,toUserId:e,status:"pending",timestamp:new Date};yield i.set(r),yield Se.collection("users").doc(t.id).update({pendingConnections:_t.firestore.FieldValue.arrayUnion(e)})}),getPendingConnectionRequests:(t,e)=>Se.collection("connectionRequests").where("toUserId","==",t).where("status","==","pending").onSnapshot(s=>{const r=s.docs.map(a=>J({id:a.id},a.data()));e(r)}),updateConnectionRequest:(t,e)=>A(null,null,function*(){const n=Se.collection("connectionRequests").doc(t);if(yield n.update({status:e}),e==="approved"){const a=(yield n.get()).data();a&&(yield je.addConnection(a.fromUserId,a.toUserId))}const s=(yield n.get()).data();s&&(yield Se.collection("users").doc(s.fromUserId).update({pendingConnections:_t.firestore.FieldValue.arrayRemove(s.toUserId)}))}),addConnection:(t,e)=>A(null,null,function*(){const n=Se.collection("users").doc(t),i=Se.collection("users").doc(e),s=Se.batch();s.update(n,{connections:_t.firestore.FieldValue.arrayUnion(e)}),s.update(i,{connections:_t.firestore.FieldValue.arrayUnion(t)}),yield s.commit()}),getSentConnectionRequests:(t,e)=>Se.collection("connectionRequests").where("fromUserId","==",t).onSnapshot(s=>{const r=s.docs.map(a=>J({id:a.id},a.data()));e(r)}),withdrawConnectionRequest:t=>A(null,null,function*(){const e=Se.collection("connectionRequests").doc(t),i=(yield e.get()).data();i&&(yield Se.collection("users").doc(i.fromUserId).update({pendingConnections:_t.firestore.FieldValue.arrayRemove(i.toUserId)})),yield e.delete()}),getConnections:t=>A(null,null,function*(){return t.length===0?[]:(yield Se.collection("users").where(_t.firestore.FieldPath.documentId(),"in",t).get()).docs.map(i=>J({id:i.id},i.data()))}),removeConnection:(t,e)=>A(null,null,function*(){const n=Se.collection("users").doc(t),i=Se.collection("users").doc(e),s=[t,e].sort().join("_"),r=Se.collection("connectionRequests").doc(s),a=Se.batch();a.update(n,{connections:_t.firestore.FieldValue.arrayRemove(e)}),a.update(i,{connections:_t.firestore.FieldValue.arrayRemove(t)}),a.delete(r),yield a.commit()}),toggleLikeIdea:(t,e)=>A(null,null,function*(){const n=Se.collection("ideas").doc(t),i=yield n.get();i.exists&&((i.data().likes||[]).includes(e)?yield n.update({likes:_t.firestore.FieldValue.arrayRemove(e)}):yield n.update({likes:_t.firestore.FieldValue.arrayUnion(e)}))}),addCommentToIdea:(t,e)=>A(null,null,function*(){const n=pe(J({},e),{id:Se.collection("ideas").doc().id});yield Se.collection("ideas").doc(t).update({comments:_t.firestore.FieldValue.arrayUnion(n)})}),deleteCommentFromIdea:(t,e)=>A(null,null,function*(){yield Se.collection("ideas").doc(t).update({comments:_t.firestore.FieldValue.arrayRemove(e)})}),updateIdea:(t,e)=>A(null,null,function*(){yield Se.collection("ideas").doc(t).update(e)}),createNegotiationRequest:(t,e)=>A(null,null,function*(){const n=`${t.id}_${e.id}`,i=Se.collection("negotiations").doc(n);if((yield i.get()).exists)throw new Error("A negotiation for this idea with this investor already exists.");const r={ideaId:t.id,ideaTitle:t.title,investorId:e.id,investorName:e.name,investorAvatar:e.avatarUrl,founderId:t.founderId,status:"pending",timestamp:new Date,offers:[]};return yield i.set(r),n}),getNegotiationsForFounder:(t,e)=>Se.collection("negotiations").where("founderId","==",t).onSnapshot(s=>{const r=s.docs.map(a=>{const c=a.data();return pe(J({id:a.id},c),{timestamp:c.timestamp.toDate?c.timestamp.toDate():c.timestamp,offers:c.offers?c.offers.map(u=>pe(J({},u),{timestamp:u.timestamp.toDate?u.timestamp.toDate():u.timestamp})):[]})});e(r)}),getNegotiationsForInvestor:(t,e)=>Se.collection("negotiations").where("investorId","==",t).onSnapshot(s=>{const r=s.docs.map(a=>{const c=a.data();return pe(J({id:a.id},c),{timestamp:c.timestamp.toDate?c.timestamp.toDate():c.timestamp,offers:c.offers?c.offers.map(u=>pe(J({},u),{timestamp:u.timestamp.toDate?u.timestamp.toDate():u.timestamp})):[]})});e(r)}),updateNegotiationStatus:(t,e,n,i)=>A(null,null,function*(){const s=Se.collection("negotiations").doc(t),r={status:e};e==="accepted"&&typeof n=="number"&&typeof i=="number"&&(r.finalInvestment=n,r.finalEquity=i),yield s.update(r)}),getTotalInvestedAmountForIdeas:t=>A(null,null,function*(){const e=yield Se.collection("negotiations").where("founderId","==",t).where("status","==","accepted").get();let n=0;return e.docs.forEach(i=>{const s=i.data();typeof s.finalInvestment=="number"&&(n+=s.finalInvestment)}),n}),addOfferToNegotiation:(t,e)=>A(null,null,function*(){yield Se.collection("negotiations").doc(t).update({offers:_t.firestore.FieldValue.arrayUnion(e),status:"active"})}),getAcceptedInvestorCountForIdeas:()=>A(null,null,function*(){const t=yield Se.collection("negotiations").where("status","==","accepted").get(),e={};return t.docs.forEach(n=>{const i=n.data();i.ideaId&&(e[i.ideaId]=(e[i.ideaId]||0)+1)}),e}),getFounderIdeaEngagementAnalytics:t=>A(null,null,function*(){const e=yield je.getIdeasByFounder(t);let n=0,i=0;return e.forEach(s=>{n+=s.likes?s.likes.length:0,i+=s.comments?s.comments.length:0}),{totalLikes:n,totalComments:i}}),getConnectionStatus:(t,e)=>A(null,null,function*(){const s=(yield Se.collection("users").doc(t).get()).data();if(s&&s.connections&&s.connections.includes(e))return{isConnected:!0,isPending:!1};const r=[t,e].sort().join("_"),c=yield Se.collection("connectionRequests").doc(r).get();if(c.exists){const u=c.data();if(u&&u.status==="pending"&&u.fromUserId===t)return{isConnected:!1,isPending:!0}}return{isConnected:!1,isPending:!1}}),getConnectionStatusRealtime:(t,e,n)=>{const i=[],r=Se.collection("users").doc(t).onSnapshot(x=>{var P;console.log(`FirestoreService: Current user ${t} connections changed:`,(P=x.data())==null?void 0:P.connections);const T=x.data();if(T&&T.connections&&T.connections.includes(e)){console.log("FirestoreService: Users are now connected"),n({isConnected:!0,isPending:!1});return}const b=[t,e].sort().join("_");Se.collection("connectionRequests").doc(b).get().then(M=>{if(M.exists){const V=M.data();V&&V.status==="pending"&&V.fromUserId===t?(console.log("FirestoreService: Request is pending"),n({isConnected:!1,isPending:!0})):(console.log("FirestoreService: Request is not pending"),n({isConnected:!1,isPending:!1}))}else console.log("FirestoreService: No request exists"),n({isConnected:!1,isPending:!1})})}),a=[t,e].sort().join("_"),u=Se.collection("connectionRequests").doc(a).onSnapshot(x=>{if(console.log(`FirestoreService: Connection request ${a} changed:`,x.data()),x.exists){const T=x.data();T&&T.status==="pending"&&T.fromUserId===t?(console.log("FirestoreService: Request is pending from current user"),n({isConnected:!1,isPending:!0})):T&&T.status==="approved"?(console.log("FirestoreService: Request was approved"),n({isConnected:!0,isPending:!1})):(console.log("FirestoreService: Request has other status:",T==null?void 0:T.status),n({isConnected:!1,isPending:!1}))}else console.log("FirestoreService: Request document deleted"),n({isConnected:!1,isPending:!1})}),g=Se.collection("users").doc(e).onSnapshot(x=>{var b;console.log(`FirestoreService: Other user ${e} connections changed:`,(b=x.data())==null?void 0:b.connections);const T=x.data();T&&T.connections&&T.connections.includes(t)&&(console.log("FirestoreService: Other user now has current user in connections"),n({isConnected:!0,isPending:!1}))});return i.push(r,u,g),()=>{i.forEach(x=>x())}}},Ub=({user:t,onClose:e,isOwnProfile:n,onMessage:i,onConnect:s,onViewConnections:r,isConnected:a,isPending:c,onStartNegotiation:u,currentUserId:h})=>{var b;const[g,x]=K.useState({isConnected:a||!1,isPending:c||!1});K.useEffect(()=>{x({isConnected:a||!1,isPending:c||!1})},[a,c]);const T=((b=t.connections)==null?void 0:b.length)||0;return K.useEffect(()=>{if(h&&s)return console.log(`ProfileCard: Setting up real-time listener for ${t.name} (${t.id})`),je.getConnectionStatusRealtime(h,t.id,P=>{console.log(`ProfileCard: Real-time status update for ${t.name}:`,P),x(P)})},[t.id,h,s]),y.jsx(sa,{children:y.jsx(Ze.div,{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex justify-center items-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:y.jsxs(Ze.div,{className:"bg-gradient-to-br from-slate-900/95 to-black/95 backdrop-blur-xl border border-slate-700/50 rounded-3xl max-w-2xl w-full mx-auto p-6 sm:p-8 relative shadow-2xl shadow-black/50",initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{duration:.3,ease:"easeOut"},children:[y.jsx("button",{onClick:e,"aria-label":"Close profile",className:"absolute top-4 right-4 p-2 rounded-full bg-slate-800/50 hover:bg-slate-700/50 text-slate-400 hover:text-white transition-all duration-200 hover:scale-110",children:y.jsx(Yr,{className:"w-5 h-5"})}),y.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start text-center sm:text-left gap-6",children:[y.jsxs("div",{className:"relative",children:[y.jsx("img",{src:t.avatarUrl,alt:t.name,className:"w-28 h-28 sm:w-32 sm:h-32 rounded-full border-4 border-slate-600 shadow-2xl"}),y.jsx("div",{className:"absolute -bottom-1 -right-1 w-8 h-8 bg-gradient-to-r from-emerald-500 to-emerald-600 rounded-full border-2 border-slate-900 flex items-center justify-center",children:y.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})})]}),y.jsxs("div",{className:"flex-1",children:[y.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-2",children:t.name}),y.jsx("span",{className:vt("inline-block text-lg font-medium px-4 py-2 rounded-full mb-3",t.role==="Developer"?"bg-blue-900/30 text-blue-300 border border-blue-700/30":t.role==="Founder"?"bg-purple-900/30 text-purple-300 border border-purple-700/30":"bg-emerald-900/30 text-emerald-300 border border-emerald-700/30"),children:t.role}),y.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-4 text-slate-400",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(T9,{className:"w-4 h-4 text-slate-500"}),y.jsx("span",{className:"text-sm",children:t.location})]}),n?y.jsxs("button",{onClick:()=>r&&r(t.connections||[]),className:"flex items-center gap-2 cursor-pointer hover:text-white transition-colors text-sm",disabled:T===0,children:[y.jsx(uI,{className:"w-4 h-4 text-slate-500"}),y.jsxs("span",{children:[T," ",T===1?"Connection":"Connections"]})]}):y.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[y.jsx(uI,{className:"w-4 h-4 text-slate-500"}),y.jsxs("span",{children:[T," ",T===1?"Connection":"Connections"]})]})]})]})]}),y.jsxs("div",{className:"mt-8 space-y-6",children:[y.jsxs("div",{className:"space-y-3",children:[y.jsxs("h3",{className:"font-semibold text-lg text-white flex items-center gap-2",children:[y.jsx(zT,{className:"w-5 h-5 text-emerald-400"}),"Skills"]}),y.jsx("div",{className:"flex flex-wrap gap-2",children:t.skills.map(S=>y.jsx("span",{className:"bg-slate-800/50 text-slate-300 px-3 py-1.5 rounded-full text-sm border border-slate-700/50 hover:border-slate-600/50 transition-colors",children:S},S))})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("h3",{className:"font-semibold text-lg text-white flex items-center gap-2",children:[y.jsx(w9,{className:"w-5 h-5 text-purple-400"}),"Interests"]}),y.jsx("div",{className:"flex flex-wrap gap-2",children:t.interests.map(S=>y.jsx("span",{className:"bg-slate-800/50 text-slate-300 px-3 py-1.5 rounded-full text-sm border border-slate-700/50 hover:border-slate-600/50 transition-colors",children:S},S))})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("h3",{className:"font-semibold text-lg text-white flex items-center gap-2",children:[y.jsx(b9,{className:"w-5 h-5 text-amber-400"}),"Looking For"]}),y.jsx("p",{className:"text-slate-400 text-sm leading-relaxed",children:t.lookingFor})]})]}),!n&&y.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-700/30 flex flex-col sm:flex-row justify-center gap-3",children:[g.isConnected?y.jsxs("button",{disabled:!0,className:"flex items-center justify-center gap-2 bg-emerald-600/20 text-emerald-300 border border-emerald-600/30 font-medium py-3 px-6 rounded-xl w-full sm:w-auto cursor-not-allowed",children:[y.jsx(Wo,{className:"w-5 h-5"}),"Connected"]}):g.isPending?y.jsxs("button",{disabled:!0,className:"flex items-center justify-center gap-2 bg-amber-600/20 text-amber-300 border border-amber-600/30 font-medium py-3 px-6 rounded-xl w-full sm:w-auto cursor-not-allowed",children:[y.jsx(Wo,{className:"w-5 h-5"}),"Pending"]}):y.jsxs("button",{onClick:()=>A(null,null,function*(){s&&(s(t),x({isConnected:!1,isPending:!0}))}),className:"flex items-center justify-center gap-2 bg-gradient-to-r from-slate-600 to-slate-500 hover:from-slate-500 hover:to-slate-400 text-white font-medium py-3 px-6 rounded-xl w-full sm:w-auto transition-all duration-200 hover:shadow-lg hover:shadow-slate-500/25 transform hover:scale-105",children:[y.jsx(Wo,{className:"w-5 h-5"}),"Connect"]}),y.jsxs("button",{onClick:()=>i&&i(t),className:"flex items-center justify-center gap-2 bg-slate-800/50 hover:bg-slate-700/50 text-white font-medium py-3 px-6 rounded-xl w-full sm:w-auto transition-all duration-200 hover:shadow-lg hover:shadow-slate-500/25 transform hover:scale-105",children:[y.jsx(uu,{className:"w-5 h-5"}),"Message"]})]})]})})})},pY=({user:t,onClose:e})=>{const[n,i]=K.useState(0),[s,r]=K.useState(""),[a,c]=K.useState(!1),u=h=>{h.preventDefault(),console.log({ratedUser:t.name,rating:n,feedback:s}),c(!0),setTimeout(()=>{e()},1500)};return y.jsx(sa,{children:y.jsx(Ze.div,{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex justify-center items-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:y.jsxs(Ze.div,{className:"bg-gradient-to-br from-slate-900/95 to-black/95 backdrop-blur-xl border border-slate-700/50 rounded-3xl max-w-md w-full mx-auto p-6 sm:p-8 relative shadow-2xl shadow-black/50",initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{duration:.3,ease:"easeOut"},children:[y.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 rounded-full bg-slate-800/50 hover:bg-slate-700/50 text-slate-400 hover:text-white transition-all duration-200 hover:scale-110",children:y.jsx(Yr,{className:"w-5 h-5"})}),y.jsx(sa,{mode:"wait",children:a?y.jsxs(Ze.div,{className:"text-center",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},children:[y.jsx(Ze.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.1,duration:.3,type:"spring",stiffness:200},className:"w-16 h-16 bg-emerald-500/20 rounded-full mx-auto mb-4 flex items-center justify-center",children:y.jsx("div",{className:"w-8 h-8 bg-emerald-500 rounded-full flex items-center justify-center",children:y.jsx("div",{className:"w-4 h-4 bg-white rounded-full"})})}),y.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Thank You!"}),y.jsx("p",{className:"text-slate-300 text-sm",children:"Your feedback helps improve our matching algorithm."})]},"submitted"):y.jsxs(Ze.form,{onSubmit:u,className:"space-y-6",initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:[y.jsxs("h2",{className:"text-2xl font-bold text-center text-white",children:["Feedback for ",t.name]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("label",{className:"block text-sm font-medium text-slate-300 text-center",children:"How would you rate this match?"}),y.jsx("div",{className:"flex justify-center gap-2",children:[1,2,3,4,5].map(h=>y.jsx(Ze.button,{type:"button",className:`p-2 rounded-lg transition-all duration-200 ${n>=h?"text-amber-400 bg-amber-500/10":"text-slate-600 hover:text-slate-400"}`,onClick:()=>i(h),whileHover:{scale:1.1},whileTap:{scale:.9},children:y.jsx(Zx,{className:"w-8 h-8"})},h))})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("label",{htmlFor:"feedback",className:"block text-sm font-medium text-slate-300",children:"Additional comments (optional)"}),y.jsx("textarea",{id:"feedback",name:"feedback",rows:4,value:s,onChange:h=>r(h.target.value),className:"w-full bg-slate-800/50 border border-slate-700/50 rounded-xl p-3 text-white placeholder-slate-500 focus:ring-2 focus:ring-emerald-500/50 focus:border-emerald-500/50 transition-all backdrop-blur-sm resize-none",placeholder:"What did you think about this match suggestion?"})]}),y.jsx(Ze.button,{type:"submit",disabled:n===0,className:"w-full bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-400 hover:to-emerald-500 text-white font-medium py-3 rounded-xl transition-all duration-200 disabled:from-slate-600 disabled:to-slate-700 disabled:cursor-not-allowed disabled:opacity-50 transform hover:scale-105 hover:shadow-lg hover:shadow-emerald-500/25",whileHover:{scale:n>0?1.02:1},whileTap:{scale:.98},children:"Submit Feedback"})]},"form")})]})})})},gY=({connectionIds:t,onClose:e,onSelectUser:n})=>{const[i,s]=K.useState([]),[r,a]=K.useState(!0);return K.useEffect(()=>{const c=()=>A(null,null,function*(){a(!0);try{const u=yield je.getConnections(t);s(u)}catch(u){console.error("Failed to fetch connections:",u)}finally{a(!1)}});t.length>0?c():(s([]),a(!1))},[t]),y.jsx(sa,{children:y.jsx(Ze.div,{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex justify-center items-center z-50 p-4",onClick:e,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:y.jsxs(Ze.div,{className:"bg-gradient-to-br from-slate-900/95 to-black/95 backdrop-blur-xl border border-slate-700/50 rounded-3xl shadow-2xl shadow-black/50 p-6 w-full max-w-md relative",onClick:c=>c.stopPropagation(),initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{duration:.3,ease:"easeOut"},children:[y.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 rounded-full bg-slate-800/50 hover:bg-slate-700/50 text-slate-400 hover:text-white transition-all duration-200 hover:scale-110",children:y.jsx(Yr,{className:"w-5 h-5"})}),y.jsx("h2",{className:"text-2xl font-bold text-white mb-6 text-center",children:"Your Connections"}),y.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto pr-2",children:r?y.jsxs(Ze.div,{className:"text-center py-8",initial:{opacity:0},animate:{opacity:1},children:[y.jsx("div",{className:"w-8 h-8 border-2 border-slate-600 border-t-emerald-500 rounded-full animate-spin mx-auto mb-3"}),y.jsx("p",{className:"text-slate-400 text-sm",children:"Loading connections..."})]}):i.length>0?i.map((c,u)=>y.jsxs(Ze.div,{className:"flex items-center bg-slate-800/50 hover:bg-slate-700/50 p-4 rounded-xl cursor-pointer transition-all duration-200 border border-slate-700/30 hover:border-slate-600/50 hover:shadow-lg hover:shadow-slate-500/10",onClick:()=>n(c),initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:u*.1,duration:.3},whileHover:{scale:1.02,y:-2},children:[y.jsx("img",{src:c.avatarUrl,alt:c.name,className:"w-12 h-12 rounded-full mr-4 border-2 border-slate-600 shadow-lg"}),y.jsxs("div",{className:"flex-1",children:[y.jsx("p",{className:"font-semibold text-white text-sm",children:c.name}),y.jsx("span",{className:`${c.role==="Developer"?"text-blue-400":c.role==="Founder"?"text-purple-400":"text-emerald-400"} text-xs font-medium`,children:c.role})]}),y.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full"})]},c.id)):y.jsxs(Ze.div,{className:"text-center py-8",initial:{opacity:0},animate:{opacity:1},children:[y.jsx("div",{className:"w-16 h-16 bg-slate-800/50 rounded-full mx-auto mb-4 flex items-center justify-center",children:y.jsx("div",{className:"w-8 h-8 bg-slate-600 rounded-full"})}),y.jsx("h3",{className:"text-lg font-medium text-slate-300 mb-2",children:"No connections yet"}),y.jsx("p",{className:"text-sm text-slate-500",children:"Start connecting with people to build your network!"})]})}),y.jsx(Ze.button,{onClick:e,className:"mt-6 w-full bg-gradient-to-r from-slate-600 to-slate-500 hover:from-slate-500 hover:to-slate-400 text-white font-medium py-3 px-4 rounded-xl transition-all duration-200 hover:shadow-lg hover:shadow-slate-500/25 transform hover:scale-105",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Close"})]})})})},yY=({title:t,message:e,onClose:n,type:i="success"})=>{const s=i==="success"?GT:A9,r=i==="success"?"text-emerald-400":"text-red-400",a=i==="success"?"bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-400 hover:to-emerald-500":"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-400 hover:to-red-500";return y.jsx(sa,{children:y.jsx(Ze.div,{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex justify-center items-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:y.jsxs(Ze.div,{className:"bg-gradient-to-br from-slate-900/95 to-black/95 backdrop-blur-xl border border-slate-700/50 rounded-3xl max-w-sm w-full mx-auto p-6 sm:p-8 relative shadow-2xl shadow-black/50 text-center",initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{duration:.3,ease:"easeOut"},children:[y.jsx("button",{onClick:n,"aria-label":"Close",className:"absolute top-4 right-4 p-2 rounded-full bg-slate-800/50 hover:bg-slate-700/50 text-slate-400 hover:text-white transition-all duration-200 hover:scale-110",children:y.jsx(Yr,{className:"w-5 h-5"})}),y.jsx(Ze.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.1,duration:.3,type:"spring",stiffness:200},children:y.jsx(s,{className:`w-16 h-16 mx-auto mb-6 ${r}`})}),y.jsx(Ze.h2,{className:"text-2xl font-bold text-white mb-3",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2,duration:.3},children:t}),y.jsx(Ze.p,{className:"text-slate-300 mb-8 text-sm leading-relaxed",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3,duration:.3},children:e}),y.jsx(Ze.button,{onClick:n,className:`${a} text-white font-medium py-3 px-8 rounded-xl transition-all duration-200 hover:shadow-lg transform hover:scale-105 w-full`,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4,duration:.3},whileHover:{scale:1.05},whileTap:{scale:.95},children:"Close"})]})})})},vY=()=>{const[t,e]=K.useState(!1);return K.useEffect(()=>{const n=()=>{e(window.innerWidth>=1024)};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),{enterDuration:t?.5:.2,exitDuration:t?.5:.15}},xY=()=>y.jsx("div",{className:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-sm p-4 rounded-2xl animate-pulse border border-slate-700/50 w-full",children:y.jsxs("div",{className:"flex flex-col sm:flex-row items-start space-y-4 sm:space-y-0 sm:space-x-4",children:[y.jsx("div",{className:"w-20 h-20 rounded-full bg-slate-700 mx-auto sm:mx-0"}),y.jsxs("div",{className:"flex-1 space-y-3",children:[y.jsx("div",{className:"h-5 bg-slate-700 rounded-full w-3/4"}),y.jsx("div",{className:"h-4 bg-slate-700 rounded-full w-1/2"}),y.jsx("div",{className:"h-3 bg-slate-700 rounded-full w-2/3"}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("div",{className:"flex-1 h-10 bg-slate-700 rounded-lg"}),y.jsx("div",{className:"flex-1 h-10 bg-slate-700 rounded-lg"})]})]})]})}),_Y=({match:t,onMessage:e,onConnect:n,onFeedback:i,onViewProfile:s,isConnected:r,isPending:a,index:c,hoveredIndex:u,setHoveredIndex:h})=>{const g=t.user,x=t.compatibilityScore>80?"text-emerald-400":t.compatibilityScore>60?"text-amber-400":"text-orange-400",{enterDuration:T}=vY();return y.jsxs("div",{className:"relative group block p-2 h-full w-full",onMouseEnter:()=>h(c),onMouseLeave:()=>h(null),children:[y.jsx(sa,{mode:"wait",children:u===c&&y.jsx(Ze.span,{className:"absolute inset-0 h-full w-full bg-slate-800/[0.8] block rounded-3xl",layoutId:"hoverBackground",initial:{opacity:0},animate:{opacity:1,transition:{duration:T,ease:"easeOut"}},exit:{opacity:0,transition:{duration:.05,ease:"linear"}},style:{willChange:"opacity, transform",transformOrigin:"center"},layout:!0})}),y.jsxs("div",{className:"relative z-20 bg-gradient-to-br from-slate-900/90 to-black/90 backdrop-blur-sm border border-slate-800/50 rounded-2xl p-4 sm:p-6 transition-all duration-300 hover:border-slate-600/70 hover:shadow-2xl hover:shadow-slate-500/10 h-full",onClick:()=>s(g),children:[y.jsxs("div",{className:"sm:hidden space-y-3",children:[y.jsxs("div",{className:"flex items-start justify-between",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("img",{src:g.avatarUrl,alt:g.name,className:"w-12 h-12 rounded-full border-2 border-slate-700 shadow-lg"}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-sm font-semibold text-white",children:g.name}),y.jsx("span",{className:vt("text-xs font-medium px-2 py-1 rounded-full",g.role===dt.Developer?"bg-blue-900/30 text-blue-300 border border-blue-700/30":g.role===dt.Founder?"bg-purple-900/30 text-purple-300 border border-purple-700/30":"bg-emerald-900/30 text-emerald-300 border border-emerald-700/30"),children:g.role})]})]}),y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("button",{onClick:b=>{b.stopPropagation(),i(g)},className:"p-1.5 rounded-lg bg-slate-800/50 hover:bg-slate-700/50 text-slate-300 hover:text-white transition-colors",children:y.jsx(Zx,{className:"w-3.5 h-3.5"})}),y.jsx("button",{onClick:b=>{b.stopPropagation(),e(g)},className:"p-1.5 rounded-lg bg-slate-800/50 hover:bg-slate-700/50 text-white transition-colors",children:y.jsx(uu,{className:"w-3.5 h-3.5"})})]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"flex-1 bg-slate-800/50 rounded-full h-2",children:y.jsx("div",{className:"bg-gradient-to-r from-slate-600 to-slate-500 h-2 rounded-full transition-all duration-500",style:{width:`${t.compatibilityScore}%`}})}),y.jsxs("span",{className:vt("text-xs font-bold",x),children:[t.compatibilityScore,"%"]})]}),r?y.jsxs("button",{disabled:!0,className:"w-full py-2 px-3 bg-emerald-600/20 text-emerald-300 border border-emerald-600/30 rounded-lg text-xs font-medium cursor-not-allowed",children:[y.jsx(hl,{className:"w-3.5 h-3.5 inline mr-1"})," Connected"]}):a?y.jsxs("button",{disabled:!0,className:"w-full py-2 px-3 bg-amber-600/20 text-amber-300 border border-amber-600/30 rounded-lg text-xs font-medium cursor-not-allowed",children:[y.jsx(hl,{className:"w-3.5 h-3.5 inline mr-1"})," Pending"]}):y.jsxs("button",{onClick:b=>{b.stopPropagation(),n(g)},className:"w-full py-2 px-3 bg-gradient-to-r from-slate-600 to-slate-500 hover:from-slate-500 hover:to-slate-400 text-white rounded-lg text-xs font-medium transition-all duration-200 hover:shadow-lg hover:shadow-slate-500/25",children:[y.jsx(Wo,{className:"w-3.5 h-3.5 inline mr-1"})," Connect"]})]})]}),y.jsxs("div",{className:"hidden sm:block space-y-4",children:[y.jsxs("div",{className:"flex items-start space-x-4",children:[y.jsx("img",{src:g.avatarUrl,alt:g.name,className:"w-20 h-20 rounded-full border-2 border-slate-700 shadow-lg"}),y.jsxs("div",{className:"flex-1",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[y.jsx("h3",{className:"text-xl font-bold text-white",children:g.name}),y.jsx("span",{className:vt("text-sm font-medium px-3 py-1 rounded-full",g.role===dt.Developer?"bg-blue-900/30 text-blue-300 border border-blue-700/30":g.role===dt.Founder?"bg-purple-900/30 text-purple-300 border border-purple-700/30":"bg-emerald-900/30 text-emerald-300 border border-emerald-700/30"),children:g.role})]}),y.jsx("p",{className:"text-slate-400 text-sm",children:g.location})]})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"flex-1 bg-slate-800/50 rounded-full h-3",children:y.jsx("div",{className:"bg-gradient-to-r from-slate-600 to-slate-500 h-3 rounded-full transition-all duration-500",style:{width:`${t.compatibilityScore}%`}})}),y.jsxs("span",{className:vt("text-lg font-bold",x),children:[t.compatibilityScore,"%"]})]}),y.jsxs("p",{className:"text-slate-300 text-sm italic border-l-2 border-slate-600 pl-4",children:['"',t.justification,'"']}),y.jsxs("div",{className:"flex gap-2 pt-2",children:[y.jsx("button",{onClick:b=>{b.stopPropagation(),i(g)},className:"p-2 rounded-lg bg-slate-800/50 hover:bg-slate-700/50 text-slate-300 hover:text-white transition-colors",children:y.jsx(Zx,{className:"w-4 h-4"})}),r?y.jsxs("button",{disabled:!0,className:"flex-1 py-2 px-4 bg-emerald-600/20 text-emerald-300 border border-emerald-600/30 rounded-lg text-sm font-medium cursor-not-allowed",children:[y.jsx(hl,{className:"w-4 h-4 inline mr-2"})," Connected"]}):a?y.jsxs("button",{disabled:!0,className:"flex-1 py-2 px-4 bg-amber-600/20 text-amber-300 border border-amber-600/30 rounded-lg text-sm font-medium cursor-not-allowed",children:[y.jsx(hl,{className:"w-4 h-4 inline mr-2"})," Pending"]}):y.jsxs("button",{onClick:b=>{b.stopPropagation(),n(g)},className:"flex-1 py-2 px-4 bg-gradient-to-r from-slate-600 to-slate-500 hover:from-slate-500 hover:to-slate-400 text-white rounded-lg text-sm font-medium transition-all duration-200 hover:shadow-lg hover:shadow-slate-500/25",children:[y.jsx(Wo,{className:"w-4 h-4 inline mr-2"})," Connect"]}),y.jsxs("button",{onClick:b=>{b.stopPropagation(),e(g)},className:"py-2 px-4 bg-slate-800/50 hover:bg-slate-700/50 text-white rounded-lg text-sm font-medium transition-colors",children:[y.jsx(uu,{className:"w-4 h-4 inline mr-2"})," Message"]})]})]})]})]})]})},tN=({user:t,matches:e,isLoading:n,error:i,onFindMatches:s,searchQuery:r,setSearchQuery:a,hasActiveSearch:c,onMessage:u,onRequestsUpdated:h})=>{var ne,de;const[g,x]=K.useState(null),[T,b]=K.useState(!1),[S,P]=K.useState(null),[M,V]=K.useState(!1),[q,O]=K.useState([]),[z,j]=K.useState(null),[W,D]=K.useState("matches"),[C,R]=K.useState(0),[L,F]=K.useState(null),[G,B]=K.useState(e),ye=yu.useCallback(ie=>{F(ie)},[]);K.useEffect(()=>{B(e)},[e]),K.useEffect(()=>{if(!t||e.length===0)return;const ie=[];e.forEach(le=>{console.log(`Dashboard: Setting up real-time listener for match ${le.user.name}`);const xe=je.getConnectionStatusRealtime(t.id,le.user.id,ce=>{console.log(`Dashboard: Real-time status update for ${le.user.name}:`,ce),B(Ee=>Ee.map(Fe=>Fe.user.id===le.user.id?pe(J({},Fe),{isConnected:ce.isConnected,isPending:ce.isPending}):Fe))});ie.push(xe)});const H=Se.collection("users").doc(t.id).onSnapshot(le=>{const xe=le.data();xe&&xe.connections&&B(ce=>ce.map(Ee=>pe(J({},Ee),{isConnected:xe.connections.includes(Ee.user.id),isPending:!1})))});return ie.push(H),()=>{ie.forEach(le=>le())}},[t,e]),yu.useEffect(()=>{function ie(){return A(this,null,function*(){if(t.role===dt.Founder){const Ie=yield je.getTotalInvestedAmountForIdeas(t.id);R(Ie)}})}ie()},[t.id,t.role]);const Ae=ie=>A(null,null,function*(){if(t)try{yield je.createConnectionRequest(t,ie.id),j({title:"Request Sent",message:`Your connection request has been sent to ${ie.name}.`,type:"success"}),x(null),h(),B(Ie=>Ie.map(H=>H.user.id===ie.id?pe(J({},H),{isConnected:!1,isPending:!0}):H))}catch(Ie){console.error("Failed to send connection request:",Ie),j({title:"Request Failed",message:"Could not send connection request. You may have already sent one to this user.",type:"error"})}});return y.jsxs("div",{className:"relative min-h-screen w-full overflow-hidden bg-gradient-to-br from-slate-950 via-black to-slate-950 font-sans",children:[y.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-950 via-black to-slate-950"}),y.jsx("div",{className:"absolute top-1/4 left-1/4 w-72 h-72 bg-emerald-500/5 rounded-full blur-3xl animate-pulse-slow"}),y.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl animate-pulse-slow",style:{animationDelay:"2s"}}),y.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(255,255,255,0.01)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.01)_1px,transparent_1px)] bg-[size:80px_80px]"})]}),y.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto py-8 sm:py-12 px-4 sm:px-6 lg:px-8",children:[y.jsxs(Ze.div,{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center mb-8 gap-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-light text-white mb-2",children:"Your Dashboard"}),y.jsx("p",{className:"text-slate-400 text-sm sm:text-base",children:"Discover and connect with amazing people"})]}),y.jsxs("button",{onClick:s,disabled:n,className:"flex items-center gap-3 bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-400 hover:to-emerald-500 text-white font-medium py-3 px-6 rounded-xl shadow-lg hover:shadow-emerald-500/25 transition-all duration-200 disabled:from-slate-600 disabled:to-slate-700 disabled:cursor-not-allowed disabled:shadow-none transform hover:scale-105",children:[y.jsx(YM,{className:`w-5 h-5 ${n?"animate-spin":""}`}),n?"Finding...":c?"Refresh Matches":"Find Matches"]})]}),y.jsx(Ze.div,{className:"mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:y.jsxs("div",{className:"relative",children:[y.jsx(Cg,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400 z-10"}),y.jsx("input",{type:"text",placeholder:"Search matches by keyword, skill, or location...",value:r,onChange:ie=>a(ie.target.value),className:"w-full bg-slate-900/50 border border-slate-700/50 rounded-xl py-4 pl-14 pr-4 text-white placeholder-slate-400 focus:ring-2 focus:ring-emerald-500/50 focus:border-emerald-500/50 transition-all backdrop-blur-sm relative z-0"})]})}),y.jsx(Ze.div,{className:"mb-8 border-b border-slate-700/30",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:y.jsx("button",{onClick:()=>D("matches"),className:vt("py-3 px-6 text-sm font-medium transition-all duration-200 border-b-2",W==="matches"?"text-emerald-400 border-emerald-500":"text-slate-400 hover:text-white border-transparent hover:border-slate-600"),children:"Matches"})}),W==="matches"&&y.jsx(Ze.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:n?Array.from({length:3}).map((ie,Ie)=>y.jsx(xY,{},Ie)):G.length>0?G.map((ie,Ie)=>y.jsx(Ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1*Ie},children:y.jsx(_Y,{match:ie,onMessage:u,onConnect:Ae,onFeedback:H=>{P(H),b(!0)},onViewProfile:x,isConnected:ie.isConnected,isPending:ie.isPending,index:Ie,hoveredIndex:L,setHoveredIndex:ye})},ie.user.id)):y.jsx(Ze.div,{className:"text-slate-400 col-span-full text-center py-16",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6},children:y.jsxs("div",{className:"max-w-md mx-auto",children:[y.jsx("div",{className:"w-16 h-16 bg-slate-800/50 rounded-full mx-auto mb-4 flex items-center justify-center",children:y.jsx(Cg,{className:"w-8 h-8 text-slate-600"})}),y.jsx("h3",{className:"text-lg font-medium text-slate-300 mb-2",children:"No matches found"}),y.jsx("p",{className:"text-sm text-slate-500",children:"Try refreshing or adjusting your search criteria to discover new connections."})]})})}),W==="analytics"&&t.role===dt.Founder&&y.jsx(tP,{data:{userEngagement:{dailyActiveUsers:0,monthlyActiveUsers:0,averageSessionDuration:0},matchSuccess:{totalMatchesMade:0,successfulConnections:0,successRate:0},platformPerformance:{dau_data:[],match_rate_data:[]}},totalIdeas:0,totalNegotiations:0,totalDealsAccepted:0,totalInvested:C})]}),T&&S&&y.jsx(pY,{user:S,onClose:()=>b(!1)}),M&&y.jsx(gY,{userIds:q,onClose:()=>V(!1),onSelectUser:ie=>{V(!1),x(ie)}}),z&&y.jsx(yY,{title:z.title,message:z.message,type:z.type,onClose:()=>j(null)}),g&&y.jsx(Ub,{user:g,onClose:()=>x(null),isOwnProfile:!1,onMessage:u,onConnect:Ae,currentUserId:t.id,isConnected:((ne=G.find(ie=>ie.user.id===g.id))==null?void 0:ne.isConnected)||!1,isPending:((de=G.find(ie=>ie.user.id===g.id))==null?void 0:de.isPending)||!1})]})},Ob=({negotiation:t,currentUser:e,onClose:n,onOfferMade:i,onStatusChange:s,onBackToNegotiationList:r,isMobile:a=!1})=>{var D,C;if(!t)return y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4",children:y.jsxs("div",{className:"bg-neutral-900 text-white p-6 rounded-2xl shadow-2xl max-w-2xl w-full",children:[y.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-purple-500 mx-auto"}),y.jsx("p",{className:"text-center mt-4",children:"Loading Negotiation..."})]})});t.ideaTitle,t.investorName,(D=t.offers[0])!=null&&D.investment,(C=t.offers[0])!=null&&C.equity;const[c,u]=K.useState(t.offers||[]),[h,g]=K.useState(""),[x,T]=K.useState(""),[b,S]=K.useState(t.status==="active"||t.status==="pending"?"ongoing":t.status),P=K.useRef();K.useEffect(()=>{const R=Se.collection("negotiations").doc(t.id);return P.current=R.onSnapshot(L=>{if(L.exists){const F=L.data();u(F.offers?F.offers.map(G=>{var B;return pe(J({},G),{timestamp:(B=G.timestamp)!=null&&B.toDate?G.timestamp.toDate():G.timestamp})}):[]),F.status==="accepted"||F.status==="closed"?S("accepted"):F.status==="rejected"||F.status==="declined"?S("declined"):(F.status==="pending"||F.status==="active")&&S("ongoing")}}),()=>{P.current&&P.current()}},[t.id]),K.useEffect(()=>{if(c.length===0&&e.id===t.founderId){const R={investment:5e5,equity:10,by:"founder",timestamp:new Date};i(R),u([R])}},[c.length,e.id,t.founderId,i]);const M=c[c.length-1],V=e.id===t.founderId?"founder":"investor",q=!M||M.by!==V,O=()=>{const R=Number(h),L=Number(x);if(R>0&&L>0&&L<100){const F={investment:R,equity:L,by:V,timestamp:new Date};i(F),u([...c,F]),g(""),T("")}},z=()=>{S("accepted"),s("accepted")},j=()=>{S("declined"),s("declined")},W=({offer:R,isLast:L})=>y.jsxs("div",{className:`p-4 rounded-xl ${L?"bg-purple-900/30 border border-purple-700/30 shadow-lg shadow-purple-500/20":"bg-slate-800/20 border border-slate-700/20"}`,children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("span",{className:"font-bold text-lg text-white",children:R.by==="founder"?`${t.founderName}'s Offer`:`${t.investorName}'s Offer`}),y.jsx("span",{className:"text-xs text-neutral-400",children:new Date(R.timestamp).toLocaleTimeString()})]}),y.jsxs("div",{className:"mt-2 flex gap-6 text-white",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(I9,{className:"w-5 h-5 text-green-400"}),y.jsxs("span",{children:["$",R.investment.toLocaleString()]})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(JM,{className:"w-5 h-5 text-blue-400"}),y.jsxs("span",{children:[R.equity,"% Equity"]})]})]})]});return y.jsxs("div",{className:"w-full h-full bg-gradient-to-br from-slate-950 to-black flex flex-col",children:[y.jsx("div",{className:"flex-shrink-0 p-4 sm:p-6 border-b border-slate-800/30",children:y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[a&&r&&y.jsx("button",{onClick:r,className:"p-2 rounded-lg hover:bg-slate-800/50 transition-colors",children:y.jsx(eP,{className:"w-5 h-5 text-slate-400"})}),y.jsxs("div",{children:[y.jsxs("h1",{className:"text-xl sm:text-2xl font-bold text-white",children:["Negotiation for ",t.ideaTitle]}),y.jsxs("p",{className:"text-sm text-slate-400",children:["Between Founder & ",t.investorName," (Investor)"]})]})]}),!a&&y.jsx("button",{onClick:n,className:"text-slate-400 hover:text-white text-2xl",children:""})]})}),y.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto p-4 sm:p-6",children:y.jsxs("div",{className:"space-y-4",children:[c.length>0?y.jsx("div",{className:"space-y-2",children:c.map((R,L)=>y.jsx(W,{offer:R,isLast:L===c.length-1},L))}):y.jsxs("div",{className:"text-center p-8 bg-slate-800/20 border border-slate-700/20 rounded-xl",children:[y.jsx("p",{className:"font-semibold text-white",children:"Waiting for the first offer..."}),y.jsx("p",{className:"text-sm text-slate-400 mt-1",children:V==="founder"?"You can make the opening offer below.":`Waiting for ${t.founderName} to make an offer.`})]}),b==="ongoing"&&y.jsx("div",{className:"mt-6 pt-4 border-t border-slate-700/30",children:q?y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-semibold text-center mb-4 text-white",children:"Your Turn to Counter"}),y.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"counterInvestment",className:"block text-sm font-medium text-slate-300 mb-1",children:"Investment ($)"}),y.jsx("input",{id:"counterInvestment",type:"number",value:h,onChange:R=>g(R.target.value),placeholder:"e.g., 550000",className:"w-full bg-slate-800/50 border border-slate-700/30 rounded-xl py-2 px-3 text-white focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500/50 transition-all backdrop-blur-sm"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"counterEquity",className:"block text-sm font-medium text-slate-300 mb-1",children:"Equity (%)"}),y.jsx("input",{id:"counterEquity",type:"number",value:x,onChange:R=>T(R.target.value),placeholder:"e.g., 12",className:"w-full bg-slate-800/50 border border-slate-700/30 rounded-xl py-2 px-3 text-white focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500/50 transition-all backdrop-blur-sm"})]})]}),y.jsx("button",{onClick:O,className:"w-full bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-500 hover:to-purple-600 text-white font-bold py-2.5 px-4 rounded-xl transition-all duration-200 shadow-lg hover:shadow-purple-500/25",children:"Make Offer"}),c.length>0&&y.jsxs("div",{className:"mt-4 flex justify-center gap-4",children:[y.jsx("button",{onClick:z,className:"text-sm text-green-400 hover:text-green-300",children:"Accept Current Offer"}),y.jsx("button",{onClick:j,className:"text-sm text-red-400 hover:text-red-300",children:"Decline & End"})]})]}):y.jsxs("div",{className:"text-center p-4 bg-slate-800/20 border border-slate-700/20 rounded-xl",children:[y.jsxs("p",{className:"font-semibold text-white",children:["Waiting for ",(M==null?void 0:M.by)==="founder"?t.investorName:"the Founder"," to respond..."]}),y.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"You will be notified of their response."})]})}),b!=="ongoing"&&y.jsx("div",{className:`mt-6 p-6 rounded-xl text-center border ${b==="accepted"?"bg-green-900/30 border-green-700/30":"bg-red-900/30 border-red-700/30"}`,children:b==="accepted"?y.jsxs(y.Fragment,{children:[y.jsx(GT,{className:"w-12 h-12 mx-auto text-green-400 mb-3"}),y.jsx("h3",{className:"text-xl font-bold text-green-300 mb-2",children:"Deal Accepted!"}),y.jsxs("p",{className:"text-slate-300",children:["$",M==null?void 0:M.investment.toLocaleString()," for ",M==null?void 0:M.equity,"% equity."]})]}):y.jsxs(y.Fragment,{children:[y.jsx(ZM,{className:"w-12 h-12 mx-auto text-red-400 mb-3"}),y.jsxs("h3",{className:"text-xl font-bold text-red-300 mb-2",children:["Negotiation ",t.status]}),y.jsx("p",{className:"text-slate-300",children:"This negotiation has been terminated."})]})})]})})]})},TY=({user:t,setIsMobileNegotiationOpen:e,selectedNegotiationId:n,onNegotiationSelected:i})=>{const[s,r]=K.useState([]),[a,c]=K.useState(!0),[u,h]=K.useState(null),[g,x]=K.useState(null),[T,b]=K.useState(""),[S,P]=K.useState("active"),[M,V]=K.useState(!1);if(K.useEffect(()=>{if(t.role!==dt.Founder&&t.role!==dt.Investor&&t.role!=="founder"&&t.role!=="investor"){c(!1);return}const R=t.role===dt.Founder||t.role==="founder"?je.getNegotiationsForFounder(t.id,L=>{r(L),c(!1)}):je.getNegotiationsForInvestor(t.id,L=>{r(L),c(!1)});return()=>R()},[t.id,t.role]),K.useEffect(()=>{if(n&&s.length>0){const R=s.find(L=>L.id===n);R&&(x(R),V(!0),e&&e(!0),i&&i())}},[n,s,e,i]),a)return y.jsx("div",{className:"flex justify-center items-center h-64",children:y.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-purple-500"})});if(u)return y.jsx("p",{className:"text-center text-red-400",children:u});const q=s.filter(R=>{var ye,Ae,ne;const L=T.toLowerCase(),F=((ye=R.ideaTitle)==null?void 0:ye.toLowerCase())||"",G=((Ae=R.investorName)==null?void 0:Ae.toLowerCase())||"",B=((ne=R.founderName)==null?void 0:ne.toLowerCase())||"";return F.includes(L)||G.includes(L)||B.includes(L)}),O=q.filter(R=>R.status==="active"),z=q.filter(R=>R.status==="accepted"),j=q.filter(R=>R.status==="declined"),W=t.role===dt.Founder||t.role==="founder",D=R=>{x(R),V(!0),e&&e(!0)},C=()=>{x(null),V(!1),e&&e(!1)};return y.jsxs("div",{className:vt("w-full h-full max-h-full bg-gradient-to-br from-slate-950 to-black overflow-hidden flex",M?"pt-0 pb-0":"pt-16 pb-16 lg:pt-0 lg:pb-0"),children:[y.jsxs("div",{className:vt("flex-shrink-0 bg-gradient-to-b from-slate-900/90 to-black/90 backdrop-blur-sm flex flex-col h-full transition-all duration-300 ease-in-out",M?"hidden lg:flex lg:w-80 xl:w-96":"w-full lg:w-80 xl:w-96 lg:border-r lg:border-slate-800/30"),children:[y.jsxs("div",{className:"flex-shrink-0 p-3 sm:p-4 lg:p-6 border-b border-slate-800/30",children:[y.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-white mb-4",children:"Negotiations"}),y.jsxs("div",{className:"relative",children:[y.jsx(Cg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400 z-10"}),y.jsx("input",{type:"text",placeholder:"Search deals...",value:T,onChange:R=>b(R.target.value),className:"w-full bg-slate-800/50 border border-slate-700/30 rounded-xl py-3 pl-10 pr-4 text-white placeholder-slate-400 focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500/50 transition-all backdrop-blur-sm"})]})]}),y.jsxs("div",{className:"flex-1 min-h-0 overflow-y-auto",children:[y.jsx("div",{className:"px-3 sm:px-4 lg:px-6 pt-4",children:y.jsxs("div",{className:"flex space-x-2 bg-gradient-to-r from-slate-900/90 to-black/90 backdrop-blur-xl border border-slate-700/50 rounded-2xl p-1.5 shadow-2xl shadow-black/50",children:[y.jsxs("button",{onClick:()=>P("active"),className:vt("flex-1 py-3 px-4 rounded-xl text-sm font-medium transition-all duration-300 relative overflow-hidden min-w-0",S==="active"?"bg-gradient-to-r from-slate-600 to-slate-500 text-white shadow-lg shadow-slate-500/25 border border-slate-500/30":"text-slate-400 hover:text-white hover:bg-slate-800/50 hover:border-slate-600/30 border border-transparent"),children:[y.jsxs("div",{className:"flex items-center justify-center gap-2",children:[y.jsx("span",{className:"relative z-10 truncate",children:"Active"}),y.jsx("span",{className:vt("px-2 py-0.5 rounded-full text-xs font-semibold flex-shrink-0",S==="active"?"bg-white/20 text-white":"bg-slate-700/50 text-slate-300"),children:O.length})]}),S==="active"&&y.jsx(Ze.div,{className:"absolute inset-0 bg-gradient-to-r from-slate-600/20 to-slate-500/20",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3}})]}),y.jsxs("button",{onClick:()=>P("accepted"),className:vt("flex-1 py-3 px-4 rounded-xl text-sm font-medium transition-all duration-300 relative overflow-hidden min-w-0",S==="accepted"?"bg-gradient-to-r from-slate-600 to-slate-500 text-white shadow-lg shadow-slate-500/25 border border-slate-500/30":"text-slate-400 hover:text-white hover:bg-slate-800/50 hover:border-slate-600/30 border border-transparent"),children:[y.jsxs("div",{className:"flex items-center justify-center gap-2",children:[y.jsx("span",{className:"relative z-10 truncate",children:"Accepted"}),y.jsx("span",{className:vt("px-2 py-0.5 rounded-full text-xs font-semibold flex-shrink-0",S==="accepted"?"bg-white/20 text-white":"bg-slate-700/50 text-slate-300"),children:z.length})]}),S==="accepted"&&y.jsx(Ze.div,{className:"absolute inset-0 bg-gradient-to-r from-slate-600/20 to-slate-500/20",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3}})]}),y.jsxs("button",{onClick:()=>P("declined"),className:vt("flex-1 py-3 px-4 rounded-xl text-sm font-medium transition-all duration-300 relative overflow-hidden min-w-0",S==="declined"?"bg-gradient-to-r from-slate-600 to-slate-500 text-white shadow-lg shadow-slate-500/25 border border-slate-500/30":"text-slate-400 hover:text-white hover:bg-slate-800/50 hover:border-slate-600/30 border border-transparent"),children:[y.jsxs("div",{className:"flex items-center justify-center gap-2",children:[y.jsx("span",{className:"relative z-10 truncate",children:"Declined"}),y.jsx("span",{className:vt("px-2 py-0.5 rounded-full text-xs font-semibold flex-shrink-0",S==="declined"?"bg-white/20 text-white":"bg-slate-700/50 text-slate-300"),children:j.length})]}),S==="declined"&&y.jsx(Ze.div,{className:"absolute inset-0 bg-gradient-to-r from-slate-600/20 to-slate-500/20",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3}})]})]})}),y.jsxs("div",{className:"px-3 sm:px-4 lg:px-6 pt-6 flex-1 min-h-0 flex flex-col",children:[S==="active"&&y.jsx("div",{className:"flex-1 min-h-0 flex flex-col",children:O.length>0?y.jsx("div",{className:"space-y-2 flex-1 min-h-0 overflow-y-auto",children:O.map(R=>y.jsxs(Ze.div,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>D(R),className:vt("p-2.5 sm:p-3 lg:p-4 flex items-center cursor-pointer rounded-xl transition-all duration-200","hover:bg-slate-800/50 hover:shadow-lg hover:shadow-slate-500/10",(g==null?void 0:g.id)===R.id?"bg-purple-900/30 border border-purple-700/30 shadow-lg shadow-purple-500/20":"bg-slate-800/20 border border-slate-700/20"),children:[y.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-full mr-3 sm:mr-4 bg-gradient-to-br from-slate-700/50 to-slate-800/50 border-2 border-slate-700/50 shadow-lg flex items-center justify-center",children:y.jsx(Yn,{className:"w-6 h-6 sm:w-7 sm:h-7 text-slate-400"})}),y.jsxs("div",{className:"flex-grow overflow-hidden min-w-0",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("h3",{className:"font-bold text-white truncate text-base sm:text-lg",children:R.ideaTitle}),y.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-semibold rounded-full flex-shrink-0 bg-yellow-900/50 text-yellow-300",children:"Active"})]}),y.jsx("p",{className:"text-sm text-slate-400 truncate pr-2",children:W?`with ${R.investorName}`:`with ${R.founderName}`})]})]},R.id))}):y.jsx("div",{className:"flex-1 flex items-center justify-center px-6",children:y.jsxs("div",{className:"text-center max-w-sm mx-auto",children:[y.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-slate-800/50 to-slate-900/50 rounded-full flex items-center justify-center border border-slate-700/30 shadow-lg",children:y.jsx(Yn,{className:"w-10 h-10 text-slate-500"})}),y.jsx("h3",{className:"text-xl sm:text-2xl font-bold mb-3 text-white",children:"No Active Deals"}),y.jsx("p",{className:"text-sm sm:text-base text-slate-400 leading-relaxed",children:W?"You don't have any active negotiations with investors.":"You don't have any active deals with founders."})]})})}),S==="accepted"&&y.jsx("div",{className:"flex-1 min-h-0 flex flex-col",children:z.length>0?y.jsx("div",{className:"space-y-2 flex-1 min-h-0 overflow-y-auto",children:z.map(R=>y.jsxs(Ze.div,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>D(R),className:vt("p-2.5 sm:p-3 lg:p-4 flex items-center cursor-pointer rounded-xl transition-all duration-200","hover:bg-slate-800/50 hover:shadow-lg hover:shadow-slate-500/10",(g==null?void 0:g.id)===R.id?"bg-purple-900/30 border border-purple-700/30 shadow-lg shadow-purple-500/20":"bg-slate-800/20 border border-slate-700/20"),children:[y.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-full mr-3 sm:mr-4 bg-gradient-to-br from-slate-700/50 to-slate-800/50 border-2 border-slate-700/50 shadow-lg flex items-center justify-center",children:y.jsx(Yn,{className:"w-6 h-6 sm:w-7 sm:h-7 text-slate-400"})}),y.jsxs("div",{className:"flex-grow overflow-hidden min-w-0",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("h3",{className:"font-bold text-white truncate text-base sm:text-lg",children:R.ideaTitle}),y.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-semibold rounded-full flex-shrink-0 bg-green-900/50 text-green-300",children:"Accepted"})]}),y.jsx("p",{className:"text-sm text-slate-400 truncate pr-2",children:W?`with ${R.investorName}`:`with ${R.founderName}`})]})]},R.id))}):y.jsx("div",{className:"flex-1 flex items-center justify-center px-6",children:y.jsxs("div",{className:"text-center max-w-sm mx-auto",children:[y.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-slate-800/50 to-slate-900/50 rounded-full flex items-center justify-center border border-slate-700/30 shadow-lg",children:y.jsx(Yn,{className:"w-10 h-10 text-slate-500"})}),y.jsx("h3",{className:"text-xl sm:text-2xl font-bold mb-3 text-white",children:"No Accepted Deals"}),y.jsx("p",{className:"text-sm sm:text-base text-slate-400 leading-relaxed",children:W?"You don't have any accepted negotiations with investors.":"You don't have any accepted deals with founders."})]})})}),S==="declined"&&y.jsx("div",{className:"flex-1 min-h-0 flex flex-col",children:j.length>0?y.jsx("div",{className:"space-y-2 flex-1 min-h-0 overflow-y-auto",children:j.map(R=>y.jsxs(Ze.div,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>D(R),className:vt("p-2.5 sm:p-3 lg:p-4 flex items-center cursor-pointer rounded-xl transition-all duration-200","hover:bg-slate-800/50 hover:shadow-lg hover:shadow-slate-500/10",(g==null?void 0:g.id)===R.id?"bg-purple-900/30 border border-purple-700/30 shadow-lg shadow-purple-500/20":"bg-slate-800/20 border border-slate-700/20"),children:[y.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-full mr-3 sm:mr-4 bg-gradient-to-br from-slate-700/50 to-slate-800/50 border-2 border-slate-700/50 shadow-lg flex items-center justify-center",children:y.jsx(Yn,{className:"w-6 h-6 sm:w-7 sm:h-7 text-slate-400"})}),y.jsxs("div",{className:"flex-grow overflow-hidden min-w-0",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("h3",{className:"font-bold text-white truncate text-base sm:text-lg",children:R.ideaTitle}),y.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-semibold rounded-full flex-shrink-0 bg-red-900/50 text-red-300",children:"Declined"})]}),y.jsx("p",{className:"text-sm text-slate-400 truncate pr-2",children:W?`with ${R.investorName}`:`with ${R.founderName}`})]})]},R.id))}):y.jsx("div",{className:"flex-1 flex items-center justify-center px-6",children:y.jsxs("div",{className:"text-center max-w-sm mx-auto",children:[y.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-slate-800/50 to-slate-900/50 rounded-full flex items-center justify-center border border-slate-700/30 shadow-lg",children:y.jsx(Yn,{className:"w-10 h-10 text-slate-500"})}),y.jsx("h3",{className:"text-xl sm:text-2xl font-bold mb-3 text-white",children:"No Declined Deals"}),y.jsx("p",{className:"text-sm sm:text-base text-slate-400 leading-relaxed",children:W?"You don't have any declined negotiations with investors.":"You don't have any declined deals with founders."})]})})})]})]})]}),y.jsx("div",{className:vt("min-w-0 h-full max-h-full overflow-hidden bg-gradient-to-br from-slate-950 to-black flex justify-center transition-all duration-300 ease-in-out",M?"flex-1 w-full":"flex-1"),children:y.jsx("div",{className:"w-full max-w-4xl h-full max-h-full overflow-hidden",children:g?y.jsx(Ob,{negotiation:g,currentUser:t,onClose:C,onOfferMade:R=>A(null,null,function*(){yield je.addOfferToNegotiation(g.id,R),x(L=>L?pe(J({},L),{offers:[...L.offers,R],status:"active"}):null)}),onStatusChange:R=>A(null,null,function*(){yield je.updateNegotiationStatus(g.id,R),x(L=>L?pe(J({},L),{status:R}):null)}),onBackToNegotiationList:C,isMobile:M}):y.jsx("div",{className:"flex items-center justify-center h-full px-6",children:y.jsxs("div",{className:"text-center max-w-sm mx-auto",children:[y.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-slate-800/50 rounded-full flex items-center justify-center",children:y.jsx(Yn,{className:"w-10 h-10 text-slate-600"})}),y.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white mb-3",children:"Select a deal to view details"}),y.jsx("p",{className:"text-sm sm:text-base text-slate-400 leading-relaxed",children:"Choose from your active, accepted, or declined deals to see the full negotiation details"})]})})})})]})},wY=({user:t,currentUser:e,onBackToChatList:n,isMobile:i})=>{const[s,r]=K.useState([]),[a,c]=K.useState(""),[u,h]=K.useState(!1),g=K.useRef(null),x=je.getChatId(e.id,t.id),T=()=>{g.current&&g.current.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})},b=K.useCallback(()=>{je.markChatAsRead(x,e.id)},[x,e.id]);K.useEffect(()=>{s.length>0&&T()},[s]),K.useEffect(()=>{const V=Se.collection("chats").doc(x).collection("messages").orderBy("timestamp","asc").onSnapshot(q=>{const O=q.docs.map(z=>{const j=z.data();return{id:z.id,senderId:j.senderId,text:j.text,timestamp:j.timestamp.toDate()}});r(O),O.length>0&&je.markChatAsRead(x,e.id),O.length>0&&setTimeout(()=>T(),100)});return()=>V()},[x,e.id]),K.useEffect(()=>{const M=()=>{b(),b()},V=document.querySelector(".messages-container");if(V)return V.addEventListener("scroll",M),V.addEventListener("touchstart",b),V.addEventListener("click",b),()=>{V.removeEventListener("scroll",M),V.removeEventListener("touchstart",b),V.removeEventListener("click",b)}},[b]),K.useEffect(()=>{const M=()=>{b()};return window.addEventListener("focus",M),()=>window.removeEventListener("focus",M)},[b]);const S=M=>A(null,null,function*(){if(M.preventDefault(),a.trim()==="")return;h(!0);const V={senderId:e.id,text:a,timestamp:_t.firestore.FieldValue.serverTimestamp()};c("");try{const q=Se.collection("chats").doc(x),O=q.collection("messages").doc(),z=Se.batch();z.set(O,V);const j=_t.firestore.FieldValue.increment(1);z.set(q,{participants:[e.id,t.id],lastMessage:V,unreadCounts:{[t.id]:j,[e.id]:0}},{merge:!0}),yield z.commit()}catch(q){console.error("Failed to send message:",q)}finally{h(!1),T()}}),P=M=>{const V=new Date,q=new Date(M);return V.toDateString()===q.toDateString()?q.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):q.toLocaleDateString([],{month:"short",day:"numeric"})};return y.jsxs("div",{className:"flex flex-col h-full max-h-full bg-gradient-to-br from-slate-950 to-black overflow-hidden",children:[y.jsxs("div",{className:"flex-shrink-0 flex items-center gap-3 p-2 sm:p-3 border-b border-slate-800/30 bg-gradient-to-r from-slate-900/90 to-black/90 backdrop-blur-sm z-10",children:[n&&y.jsx(Ze.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:n,className:"p-1.5 rounded-lg bg-slate-800/50 hover:bg-slate-700/50 transition-all duration-200 border border-slate-700/30",children:y.jsx(eP,{className:"w-4 h-4 text-white"})}),y.jsx("img",{src:t.avatarUrl,alt:t.name,className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full border-2 border-slate-700/50 shadow-lg"}),y.jsxs("div",{className:"flex-grow min-w-0",children:[y.jsx("h3",{className:"font-bold text-white text-base sm:text-lg truncate",children:t.name}),y.jsx("p",{className:"text-xs text-slate-400",children:t.role})]}),u&&y.jsxs("div",{className:"flex items-center gap-1 text-slate-400 text-xs",children:[y.jsxs("div",{className:"flex space-x-1",children:[y.jsx(Ze.div,{animate:{y:[0,-5,0]},transition:{duration:.6,repeat:1/0,delay:0},className:"w-1.5 h-1.5 bg-slate-400 rounded-full"}),y.jsx(Ze.div,{animate:{y:[0,-5,0]},transition:{duration:.6,repeat:1/0,delay:.2},className:"w-1.5 h-1.5 bg-slate-400 rounded-full"}),y.jsx(Ze.div,{animate:{y:[0,-5,0]},transition:{duration:.6,repeat:1/0,delay:.4},className:"w-1.5 h-1.5 bg-slate-400 rounded-full"})]}),y.jsx("span",{className:"ml-1",children:"typing..."})]})]}),y.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto bg-gradient-to-br from-slate-950 to-black messages-container",children:y.jsxs("div",{className:"flex flex-col min-h-full p-3 sm:p-4",children:[y.jsx("div",{className:"flex-1"}),y.jsxs("div",{className:"space-y-3",children:[y.jsx(sa,{children:s.map((M,V)=>y.jsxs(Ze.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2},className:vt("flex gap-2 sm:gap-3",M.senderId===e.id?"justify-end":"justify-start"),children:[M.senderId!==e.id&&y.jsx("img",{src:t.avatarUrl,alt:`${t.name}'s avatar`,className:"w-6 h-6 sm:w-8 sm:h-8 rounded-full border border-slate-700/50 shadow-md"}),y.jsxs("div",{className:"flex flex-col",children:[y.jsx("div",{className:vt("max-w-[200px] sm:max-w-[280px] lg:max-w-[320px] p-2.5 sm:p-3 rounded-2xl shadow-lg","transition-all duration-200 hover:shadow-xl",M.senderId===e.id?"bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-br-md border border-purple-500/30":"bg-gradient-to-r from-slate-800/80 to-slate-700/80 text-slate-200 rounded-bl-md border border-slate-600/30 backdrop-blur-sm"),children:y.jsx("p",{className:"text-sm sm:text-base leading-relaxed break-words font-normal",children:M.text})}),y.jsx("p",{className:vt("text-xs mt-1 opacity-50 font-light px-1",M.senderId===e.id?"text-right text-purple-200":"text-left text-slate-400"),children:P(M.timestamp)})]}),M.senderId===e.id&&y.jsx("img",{src:e.avatarUrl,alt:"Your avatar",className:"w-6 h-6 sm:w-8 sm:h-8 rounded-full border border-slate-700/50 shadow-md"})]},M.id))}),s.length===0&&y.jsx("div",{className:"flex items-center justify-center h-full min-h-[400px]",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-slate-800/50 rounded-full flex items-center justify-center",children:y.jsx(Jc,{className:"w-8 h-8 text-slate-600"})}),y.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Start a conversation"}),y.jsxs("p",{className:"text-slate-400",children:["Send your first message to ",t.name]})]})}),y.jsx("div",{ref:g})]})]})}),y.jsx("div",{className:"flex-shrink-0 p-2 sm:p-3 border-t border-slate-800/30 bg-gradient-to-r from-slate-900/90 to-black/90 backdrop-blur-sm",children:y.jsxs("form",{onSubmit:S,className:"flex items-center gap-2 bg-slate-800/50 border border-slate-700/30 rounded-xl p-1.5 transition-all duration-200 focus-within:border-purple-500/50 focus-within:ring-2 focus-within:ring-purple-500/20",children:[y.jsx("input",{type:"text",value:a,onChange:M=>c(M.target.value),placeholder:`Message ${t.name}...`,className:"flex-1 bg-transparent p-1.5 sm:p-2 text-white placeholder-slate-400 focus:outline-none text-sm sm:text-base",disabled:u}),y.jsx(Ze.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",title:"Send message","aria-label":"Send message",disabled:!a.trim()||u,className:vt("p-1.5 sm:p-2 rounded-lg transition-all duration-200",a.trim()&&!u?"bg-gradient-to-r from-purple-600 to-purple-700 text-white hover:from-purple-500 hover:to-purple-600 shadow-lg hover:shadow-purple-500/25":"bg-slate-700/50 text-slate-500 cursor-not-allowed"),children:y.jsx(Jc,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]})})]})},bY=({chats:t,currentUser:e,connections:n,setIsMobileChatOpen:i,selectedUserForChat:s})=>{const[r,a]=K.useState(""),[c,u]=K.useState(null),[h,g]=K.useState(!1),[x,T]=K.useState("chats"),[b,S]=K.useState(t);K.useEffect(()=>{const C=je.getChatsRealtime(e.id,R=>{S(R)});return()=>C()},[e.id]),K.useEffect(()=>{if(s){u(s),g(!0),i(!0);const C=b.find(R=>R.participantDetails.some(L=>L.id===s.id));C&&je.markChatAsRead(C.id,e.id)}},[s,e.id,b,i]);const M=[...b].sort((C,R)=>{var G,B;const L=(G=C.lastMessage)!=null&&G.timestamp?new Date(C.lastMessage.timestamp.seconds*1e3).getTime():0;return((B=R.lastMessage)!=null&&B.timestamp?new Date(R.lastMessage.timestamp.seconds*1e3).getTime():0)-L}).filter(C=>{const R=C.participantDetails.find(L=>L.id!==e.id);return R&&R.name.toLowerCase().includes(r.toLowerCase())}),V=b.map(C=>C.participantDetails.find(R=>R.id!==e.id)).filter(Boolean),O=n.filter(C=>!V.some(R=>R.id===C.id)).filter(C=>C.name.toLowerCase().includes(r.toLowerCase())),z=C=>{u(C),g(!0),i(!0);const R=b.find(L=>L.participantDetails.some(F=>F.id===C.id));R&&je.markChatAsRead(R.id,e.id)},j=()=>{g(!1),u(null),i(!1)},W=C=>{var R;return((R=C.unreadCounts)==null?void 0:R[e.id])||0},D=()=>b.reduce((C,R)=>C+W(R),0);return y.jsxs("div",{className:vt("w-full h-full max-h-full bg-gradient-to-br from-slate-950 to-black overflow-hidden flex",h?"pt-0 pb-0":"pt-16 pb-16 lg:pt-0 lg:pb-0"),children:[y.jsxs("div",{className:vt("flex-shrink-0 bg-gradient-to-b from-slate-900/90 to-black/90 backdrop-blur-sm flex flex-col h-full","w-full lg:w-80 xl:w-96 lg:border-r lg:border-slate-800/30","transition-all duration-300 ease-in-out",h?"hidden lg:flex":"flex"),children:[y.jsxs("div",{className:"flex-shrink-0 p-3 sm:p-4 lg:p-6 border-b border-slate-800/30",children:[y.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-white mb-4",children:"Messages"}),y.jsxs("div",{className:"relative",children:[y.jsx(Cg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400 z-10"}),y.jsx("input",{type:"text",placeholder:"Search by name...",value:r,onChange:C=>a(C.target.value),className:"w-full bg-slate-800/50 border border-slate-700/30 rounded-xl py-3 pl-10 pr-4 text-white placeholder-slate-400 focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500/50 transition-all backdrop-blur-sm"})]})]}),y.jsxs("div",{className:"flex-1 min-h-0 overflow-y-auto",children:[y.jsx("div",{className:"px-3 sm:px-4 lg:px-6 pt-4",children:y.jsxs("div",{className:"flex space-x-2 bg-gradient-to-r from-slate-900/90 to-black/90 backdrop-blur-xl border border-slate-700/50 rounded-2xl p-1.5 shadow-2xl shadow-black/50",children:[y.jsxs("button",{onClick:()=>T("chats"),className:vt("flex-1 py-3 px-4 rounded-xl text-sm font-medium transition-all duration-300 relative overflow-hidden min-w-0",x==="chats"?"bg-gradient-to-r from-slate-600 to-slate-500 text-white shadow-lg shadow-slate-500/25 border border-slate-500/30":"text-slate-400 hover:text-white hover:bg-slate-800/50 hover:border-slate-600/30 border border-transparent"),children:[y.jsxs("div",{className:"flex items-center justify-center gap-2",children:[y.jsx("span",{className:"relative z-10 truncate",children:"Chats"}),y.jsx("span",{className:vt("px-2 py-0.5 rounded-full text-xs font-semibold flex-shrink-0",x==="chats"?"bg-white/20 text-white":"bg-slate-700/50 text-slate-300"),children:M.length}),D()>0&&y.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center animate-pulse",children:D()>99?"99+":D()})]}),x==="chats"&&y.jsx(Ze.div,{className:"absolute inset-0 bg-gradient-to-r from-slate-600/20 to-slate-500/20",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3}})]}),y.jsxs("button",{onClick:()=>T("contacts"),className:vt("flex-1 py-3 px-4 rounded-xl text-sm font-medium transition-all duration-300 relative overflow-hidden min-w-0",x==="contacts"?"bg-gradient-to-r from-slate-600 to-slate-500 text-white shadow-lg shadow-slate-500/25 border border-slate-500/30":"text-slate-400 hover:text-white hover:bg-slate-800/50 hover:border-slate-600/30 border border-transparent"),children:[y.jsxs("div",{className:"flex items-center justify-center gap-2",children:[y.jsx("span",{className:"relative z-10 truncate",children:"Contacts"}),y.jsx("span",{className:vt("px-2 py-0.5 rounded-full text-xs font-semibold flex-shrink-0",x==="contacts"?"bg-white/20 text-white":"bg-slate-700/50 text-slate-300"),children:O.length})]}),x==="contacts"&&y.jsx(Ze.div,{className:"absolute inset-0 bg-gradient-to-r from-slate-600/20 to-slate-500/20",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3}})]})]})}),y.jsx("div",{className:"px-3 sm:px-4 lg:px-6 pt-6 flex-1 min-h-0 flex flex-col",children:x==="chats"?y.jsx("div",{className:"flex-1 min-h-0 flex flex-col",children:M.length>0?y.jsx("div",{className:"space-y-2 flex-1 min-h-0 overflow-y-auto",children:M.map(C=>{const R=C.participantDetails.find(L=>L.id!==e.id);return R?y.jsxs(Ze.div,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>z(R),className:vt("p-2.5 sm:p-3 lg:p-4 flex items-center cursor-pointer rounded-xl transition-all duration-200","hover:bg-slate-800/50 hover:shadow-lg hover:shadow-slate-500/10",(c==null?void 0:c.id)===R.id?"bg-purple-900/30 border border-purple-700/30 shadow-lg shadow-purple-500/20":"bg-slate-800/20 border border-slate-700/20"),children:[y.jsx("img",{src:R.avatarUrl,alt:R.name,className:"w-12 h-12 sm:w-14 sm:h-14 rounded-full mr-3 sm:mr-4 border-2 border-slate-700/50 shadow-lg"}),y.jsxs("div",{className:"flex-grow overflow-hidden min-w-0",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("h3",{className:"font-bold text-white truncate text-base sm:text-lg",children:R.name}),W(C)>0&&y.jsx("span",{className:"ml-2 px-2 py-1 bg-red-500 text-white text-xs font-bold rounded-full flex-shrink-0 animate-pulse",children:W(C)>99?"99+":W(C)})]}),C.lastMessage?y.jsxs("p",{className:"text-sm text-slate-400 truncate pr-2",children:[y.jsx("span",{className:"font-semibold text-purple-400",children:C.lastMessage.senderId===e.id?"You: ":""}),C.lastMessage.text]}):y.jsx("p",{className:"text-sm text-slate-500 italic",children:"No messages yet"})]})]},C.id):null})}):y.jsx("div",{className:"flex-1 flex items-center justify-center px-6",children:y.jsxs("div",{className:"text-center max-w-sm mx-auto",children:[y.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-slate-800/50 to-slate-900/50 rounded-full flex items-center justify-center border border-slate-700/30 shadow-lg",children:y.jsx(Jc,{className:"w-10 h-10 text-slate-500"})}),y.jsx("h3",{className:"text-xl sm:text-2xl font-bold mb-3 text-white",children:"No Active Chats"}),y.jsx("p",{className:"text-sm sm:text-base text-slate-400 leading-relaxed",children:"Start a conversation with your connections to see them here."})]})})}):y.jsx("div",{className:"flex-1 min-h-0 flex flex-col",children:O.length>0?y.jsx("div",{className:"space-y-2 flex-1 min-h-0 overflow-y-auto",children:O.map(C=>y.jsxs(Ze.div,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>z(C),className:vt("p-2.5 sm:p-3 lg:p-4 flex items-center cursor-pointer rounded-xl transition-all duration-200","hover:bg-slate-800/50 hover:shadow-lg hover:shadow-slate-500/10",(c==null?void 0:c.id)===C.id?"bg-emerald-900/30 border border-emerald-700/30 shadow-lg shadow-emerald-500/20":"bg-slate-800/20 border border-slate-700/20"),children:[y.jsx("img",{src:C.avatarUrl,alt:C.name,className:"w-12 h-12 sm:w-14 sm:h-14 rounded-full mr-3 sm:mr-4 border-2 border-slate-700/50 shadow-lg"}),y.jsxs("div",{className:"flex-grow overflow-hidden min-w-0",children:[y.jsx("h3",{className:"font-bold text-white text-base sm:text-lg",children:C.name}),y.jsx("p",{className:"text-sm text-slate-400",children:C.role})]}),y.jsx(Jc,{className:"w-5 h-5 sm:w-6 sm:h-6 text-slate-500 hover:text-emerald-400 transition-colors"})]},C.id))}):y.jsx("div",{className:"flex-1 flex items-center justify-center px-6",children:y.jsxs("div",{className:"text-center max-w-sm mx-auto",children:[y.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-slate-800/50 to-slate-900/50 rounded-full flex items-center justify-center border border-slate-700/30 shadow-lg",children:y.jsx(Jc,{className:"w-10 h-10 text-slate-500"})}),y.jsx("h3",{className:"text-xl sm:text-2xl font-bold mb-3 text-white",children:"No Connections Available"}),y.jsx("p",{className:"text-sm sm:text-base text-slate-400 leading-relaxed",children:"Connect with other users to start new conversations."})]})})})})]})]}),y.jsx("div",{className:vt("flex-1 min-w-0 h-full max-h-full overflow-hidden bg-gradient-to-br from-slate-950 to-black flex justify-center","transition-all duration-300 ease-in-out",h?"flex":"hidden lg:flex"),children:y.jsx("div",{className:"w-full max-w-4xl h-full max-h-full overflow-hidden",children:c?y.jsx(wY,{user:c,currentUser:e,onBackToChatList:j,isMobile:h}):y.jsx("div",{className:"flex items-center justify-center h-full px-6",children:y.jsxs("div",{className:"text-center max-w-sm mx-auto",children:[y.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-slate-800/50 rounded-full flex items-center justify-center",children:y.jsx(Jc,{className:"w-10 h-10 text-slate-600"})}),y.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white mb-3",children:"Select a chat to start messaging"}),y.jsx("p",{className:"text-sm sm:text-base text-slate-400 leading-relaxed",children:"Choose from your active conversations or start a new one"})]})})})})]})},EY=({user:t,onRequestsUpdated:e})=>{const[n,i]=K.useState([]),[s,r]=K.useState(null);if(K.useEffect(()=>{if(t){const u=je.getJoinRequestsForFounder(t.id,h=>{i(h),e()});return()=>u()}},[t,e]),n.length===0)return y.jsxs("div",{className:"text-center py-16 px-6 bg-neutral-900 border-2 border-dashed border-neutral-700 rounded-2xl mt-8",children:[y.jsx(Es,{className:"w-12 h-12 mx-auto text-neutral-600"}),y.jsx("h3",{className:"text-xl font-semibold mt-4 text-white",children:"No Pending Requests"}),y.jsx("p",{className:"text-neutral-400 mt-2 max-w-md mx-auto",children:"You don't have any pending join requests for your ideas right now."})]});const a=(u,h)=>A(null,null,function*(){try{yield je.updateJoinRequest(u,h)}catch(g){console.error("Failed to update join request:",g)}}),c=u=>A(null,null,function*(){try{const h=yield je.getUserProfile(u);h?r(h):alert("Could not load developer's profile.")}catch(h){console.error("Error fetching profile:",h),alert("An error occurred while fetching the profile.")}});return y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"bg-neutral-900 border border-neutral-800 rounded-2xl p-6 space-y-4 mt-8",children:[y.jsx("h2",{className:"text-2xl font-bold text-white",children:"Incoming Join Requests"}),y.jsx("ul",{className:"divide-y divide-neutral-800",children:n.map(u=>y.jsxs("li",{className:"py-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[y.jsxs("div",{className:"flex items-center gap-4 cursor-pointer group",onClick:()=>c(u.developerId),children:[y.jsx("img",{src:u.developerAvatar,alt:u.developerName,className:"w-12 h-12 rounded-full"}),y.jsxs("div",{children:[y.jsxs("p",{className:"text-white",children:[y.jsx("span",{className:"font-semibold group-hover:underline",children:u.developerName})," wants to join your idea: ",y.jsx("span",{className:"font-semibold text-purple-400",children:u.ideaTitle})]}),y.jsx("p",{className:"text-sm text-neutral-500",children:new Date(u.timestamp.toString()).toLocaleString()})]})]}),y.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0 self-end sm:self-center",children:[y.jsx("button",{"aria-label":`Approve ${u.developerName}`,onClick:()=>a(u.id,"approved"),className:"p-2 bg-green-600 hover:bg-green-700 rounded-full text-white transition-colors",children:y.jsx(HT,{className:"w-5 h-5"})}),y.jsx("button",{"aria-label":`Reject ${u.developerName}`,onClick:()=>a(u.id,"rejected"),className:"p-2 bg-red-600 hover:bg-red-700 rounded-full text-white transition-colors",children:y.jsx(Yr,{className:"w-5 h-5"})})]})]},u.id))})]}),s&&y.jsx(Ub,{user:s,onClose:()=>r(null),currentUserId:t.id})]})},SY=({idea:t,onClose:e,onTeamUpdated:n})=>{const[i,s]=K.useState([]),[r,a]=K.useState(!0);K.useEffect(()=>{A(null,null,function*(){a(!0);const h=yield Promise.all(t.team.map(g=>je.getUserProfile(g)));s(h.filter(g=>g!==null)),a(!1)})},[t]);const c=u=>A(null,null,function*(){if(window.confirm("Are you sure you want to remove this team member?"))try{yield je.removeTeamMember(t.id,u),n()}catch(h){console.error("Failed to remove team member:",h),alert("An error occurred. Please try again.")}});return y.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex justify-center items-center p-4 animate-fade-in",children:y.jsxs("div",{className:"bg-neutral-900 border border-neutral-800 rounded-2xl shadow-lg w-full max-w-md relative",children:[y.jsxs("div",{className:"p-6 border-b border-neutral-800",children:[y.jsxs("h2",{className:"text-xl font-bold text-white",children:['Manage Team for "',t.title,'"']}),y.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-neutral-500 hover:text-white",children:y.jsx(Yr,{className:"w-6 h-6"})})]}),y.jsx("div",{className:"p-6",children:r?y.jsx("p",{className:"text-neutral-400",children:"Loading team members..."}):y.jsx("ul",{className:"space-y-3",children:i.map(u=>y.jsxs("li",{className:"flex items-center justify-between bg-neutral-800/50 p-3 rounded-lg",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("img",{src:u.avatarUrl,alt:u.name,className:"w-10 h-10 rounded-full"}),y.jsxs("div",{children:[y.jsx("p",{className:"font-semibold text-white",children:u.name}),y.jsx("p",{className:"text-sm text-neutral-400",children:u.role})]})]}),u.id!==t.founderId&&y.jsx("button",{onClick:()=>c(u.id),className:"p-2 text-red-500 hover:bg-red-500/10 rounded-full","aria-label":`Remove ${u.name}`,children:y.jsx(XM,{className:"w-5 h-5"})})]},u.id))})})]})})},AY=({idea:t,open:e,onClose:n})=>{var i,s;return!e||!t?null:y.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60",children:y.jsxs("div",{className:"bg-neutral-900 rounded-2xl border border-neutral-800 w-full max-w-lg mx-2 p-6 relative animate-fadeInUp",children:[y.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-neutral-400 hover:text-white",title:"Close","aria-label":"Close",children:y.jsx(Yr,{className:"w-6 h-6"})}),y.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[y.jsx("img",{src:t.founderAvatar,alt:t.founderName,className:"w-14 h-14 rounded-full border-2 border-neutral-700"}),y.jsxs("div",{children:[y.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:t.title}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("span",{className:"text-sm text-neutral-400",children:["by ",t.founderName]}),y.jsx("span",{className:"ml-1 px-2 py-0.5 rounded-full text-xs font-semibold bg-purple-900/60 text-purple-300",children:"Founder"})]})]})]}),y.jsx("p",{className:"text-neutral-300 mb-4 whitespace-pre-line",children:t.description}),t.investmentDetails&&y.jsxs("div",{className:"mb-4 p-3 bg-purple-900/30 border border-purple-800 rounded-lg text-sm",children:[y.jsx("h4",{className:"font-bold text-purple-300 mb-2",children:"Investment Opportunity"}),y.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-neutral-400",children:"Asking:"}),y.jsxs("p",{className:"font-semibold text-white",children:["$",t.investmentDetails.targetInvestment.toLocaleString()]})]}),y.jsxs("div",{children:[y.jsx("p",{className:"text-neutral-400",children:"Equity:"}),y.jsxs("p",{className:"font-semibold text-white",children:[t.investmentDetails.equityOffered,"%"]})]})]})]}),y.jsxs("div",{className:"mb-4",children:[y.jsxs("h4",{className:"font-semibold text-white mb-2 flex items-center gap-2",children:[y.jsx(zT,{className:"w-5 h-5 text-purple-400"})," Required Skills:"]}),y.jsx("div",{className:"flex flex-wrap gap-2",children:t.requiredSkills.map(r=>y.jsx("span",{className:"bg-blue-900/50 text-blue-300 text-xs font-medium px-2.5 py-1 rounded-full",children:r},r))})]}),y.jsxs("div",{className:"flex items-center gap-6 mt-4",children:[y.jsxs("div",{className:"flex items-center gap-1.5 text-neutral-400",children:[y.jsx(Qc,{className:"w-5 h-5"}),y.jsx("span",{children:((i=t.likes)==null?void 0:i.length)||0})]}),y.jsxs("div",{className:"flex items-center gap-1.5 text-neutral-400",children:[y.jsx(Xc,{className:"w-5 h-5"}),y.jsx("span",{children:((s=t.comments)==null?void 0:s.length)||0})]}),y.jsxs("div",{className:"flex items-center gap-1.5 text-green-400",children:[y.jsx(Es,{className:"w-5 h-5"}),y.jsxs("span",{children:[t.team.length," team"]})]})]})]})})},CY=()=>{const[t,e]=K.useState(!1);return K.useEffect(()=>{const n=()=>{e(window.innerWidth>=1024)};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),{enterDuration:t?.5:.2,exitDuration:t?.5:.15}},IY=({user:t,onIdeaPosted:e,editingIdea:n,onCancelEdit:i})=>{const[s,r]=K.useState(""),[a,c]=K.useState(""),[u,h]=K.useState([]),[g,x]=K.useState(""),[T,b]=K.useState(""),[S,P]=K.useState(""),[M,V]=K.useState(!1),[q,O]=K.useState(null);K.useEffect(()=>{var D,C;n&&(r(n.title),c(n.description),h(n.requiredSkills),b(((D=n.investmentDetails)==null?void 0:D.targetInvestment.toString())||""),P(((C=n.investmentDetails)==null?void 0:C.equityOffered.toString())||""))},[n]);const z=D=>{D.key==="Enter"&&g.trim()&&(D.preventDefault(),u.includes(g.trim())||h([...u,g.trim()]),x(""))},j=D=>{h(u.filter(C=>C!==D))},W=D=>A(null,null,function*(){if(D.preventDefault(),!s||!a||u.length===0){O("Please fill out all fields and add at least one required skill.");return}if(O(null),V(!0),n){const C={title:s,description:a,requiredSkills:u,investmentDetails:{targetInvestment:parseInt(T,10)||0,equityOffered:parseInt(S,10)||0}};try{yield je.updateIdea(n.id,C),e()}catch(R){O("Failed to update idea. Please try again."),console.error(R)}finally{V(!1)}}else{const C={founderId:t.id,founderName:t.name,founderAvatar:t.avatarUrl,title:s,description:a,requiredSkills:u,status:"recruiting",team:[t.id],likes:[],comments:[],investmentDetails:{targetInvestment:parseInt(T,10)||0,equityOffered:parseInt(S,10)||0}};try{yield je.postIdea(C),r(""),c(""),h([]),x(""),b(""),P(""),e()}catch(R){O("Failed to post idea. Please try again."),console.error(R)}finally{V(!1)}}});return y.jsxs("form",{onSubmit:W,className:"bg-gradient-to-br from-slate-900/90 to-black/90 backdrop-blur-sm p-6 rounded-2xl border border-slate-800/50 shadow-2xl shadow-slate-500/10 space-y-4",children:[y.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[y.jsx(Yn,{className:"w-6 h-6 text-amber-400"}),n?"Edit Your Startup Idea":"Post a New Startup Idea"]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-slate-300 mb-1",children:"Idea Title"}),y.jsx("input",{id:"title",type:"text",value:s,onChange:D=>r(D.target.value),placeholder:"e.g., AI-Powered Personal Chef",className:"w-full bg-slate-800/50 border border-slate-700/30 rounded-lg py-2 px-3 text-white focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500/50 transition-all backdrop-blur-sm"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-slate-300 mb-1",children:"Detailed Description"}),y.jsx("textarea",{id:"description",value:a,onChange:D=>c(D.target.value),placeholder:"Describe your vision, the problem it solves, and your target audience.",rows:4,className:"w-full bg-slate-800/50 border border-slate-700/30 rounded-lg py-2 px-3 text-white focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500/50 transition-all backdrop-blur-sm"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"skills",className:"block text-sm font-medium text-slate-300 mb-1",children:"Required Skills"}),y.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:u.map(D=>y.jsxs("div",{className:"flex items-center gap-1 bg-purple-900/30 text-purple-300 px-2 py-1 rounded-full text-sm border border-purple-700/30",children:[D,y.jsx("button",{type:"button",onClick:()=>j(D),className:"text-purple-300 hover:text-white",children:""})]},D))}),y.jsx("input",{id:"skills",type:"text",value:g,onChange:D=>x(D.target.value),onKeyDown:z,placeholder:"e.g., React, Python, Marketing... (Press Enter to add)",className:"w-full bg-slate-800/50 border border-slate-700/30 rounded-lg py-2 px-3 text-white focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500/50 transition-all backdrop-blur-sm"})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"targetInvestment",className:"block text-sm font-medium text-slate-300 mb-1",children:"Target Investment ($)"}),y.jsx("input",{id:"targetInvestment",type:"number",value:T,onChange:D=>b(D.target.value),placeholder:"e.g., 50000",className:"w-full bg-slate-800/50 border border-slate-700/30 rounded-lg py-2 px-3 text-white focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500/50 transition-all backdrop-blur-sm"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"equityOffered",className:"block text-sm font-medium text-slate-300 mb-1",children:"Equity Offered (%)"}),y.jsx("input",{id:"equityOffered",type:"number",value:S,onChange:D=>P(D.target.value),placeholder:"e.g., 10",className:"w-full bg-slate-800/50 border border-slate-700/30 rounded-lg py-2 px-3 text-white focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500/50 transition-all backdrop-blur-sm"})]})]}),q&&y.jsx("p",{className:"text-red-400 text-sm",children:q}),y.jsxs("div",{className:"flex gap-4",children:[n&&y.jsx("button",{type:"button",onClick:i,className:"w-full flex items-center justify-center gap-2 bg-slate-700/50 hover:bg-slate-600/50 text-white font-bold py-2 px-4 rounded-lg transition-all duration-200 border border-slate-600/30",children:"Cancel"}),y.jsxs("button",{type:"submit",disabled:M,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-500 hover:to-purple-600 text-white font-bold py-2 px-4 rounded-lg transition-all duration-200 hover:shadow-lg hover:shadow-purple-500/25 disabled:from-slate-600 disabled:to-slate-700 disabled:opacity-50",children:[y.jsx(QM,{className:"w-5 h-5"}),M?n?"Saving...":"Posting...":n?"Save Changes":"Post Idea"]})]})]})},RY=({idea:t,user:e,onJoinRequest:n,hasPendingRequest:i,onManageTeam:s,joinRequests:r,onLike:a,onComment:c,onDeleteComment:u,onEdit:h,onStartNegotiation:g,negotiationStatuses:x,investorCounts:T,onNavigateToNegotiation:b})=>{var ie,Ie,H,le,xe,ce,Ee,Fe,Be;const S=t.founderId===e.id,P=e.role===dt.Developer&&!t.team.includes(e.id),M=t.team.includes(e.id),V=r.some(_e=>_e.ideaId===t.id&&_e.developerId===e.id&&_e.status==="approved"),[q,O]=K.useState(""),[z,j]=K.useState(!1),[W,D]=K.useState(!1),[C,R]=K.useState(null),[L,F]=K.useState(!1),[G,B]=K.useState(!1),{enterDuration:ye}=CY(),Ae=(ie=t.likes)==null?void 0:ie.includes(e.id),ne=_e=>{_e.preventDefault(),q.trim()&&(c(t.id,q),O(""))},de=()=>A(null,null,function*(){F(!0);try{let _e=null;_e=(yield new Promise(Ct=>{je.getNegotiationsForInvestor(e.id,Ct)})).find(Ct=>Ct.ideaId===t.id),_e||(yield je.createNegotiationRequest(t,e),_e=(yield new Promise(Oe=>{je.getNegotiationsForInvestor(e.id,Oe)})).find(Oe=>Oe.ideaId===t.id)),b&&_e&&b(_e.id)}catch(_e){alert("Failed to open negotiation.")}finally{F(!1)}});return y.jsxs("div",{className:"relative group block p-2 h-full w-full",onMouseEnter:()=>B(!0),onMouseLeave:()=>B(!1),children:[y.jsx(sa,{mode:"wait",children:G&&y.jsx(Ze.span,{className:"absolute inset-0 h-full w-full bg-slate-800/[0.8] block rounded-3xl",layoutId:"ideaHoverBackground",initial:{opacity:0},animate:{opacity:1,transition:{duration:ye,ease:"easeOut"}},exit:{opacity:0,transition:{duration:.05,ease:"linear"}},style:{willChange:"opacity, transform",transformOrigin:"center"},layout:!0})}),y.jsxs("div",{className:"relative z-20 bg-gradient-to-br from-slate-900/90 to-black/90 backdrop-blur-sm border border-slate-800/50 rounded-2xl p-4 sm:p-6 transition-all duration-300 hover:border-slate-600/70 hover:shadow-2xl hover:shadow-slate-500/10 h-full flex flex-col",children:[y.jsx("div",{className:"flex items-start justify-between gap-2 sm:gap-4 mb-2 sm:mb-4",children:y.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 min-w-0",children:[y.jsx("img",{src:t.founderAvatar,alt:t.founderName,className:"w-9 h-9 sm:w-12 sm:h-12 rounded-full border-2 border-slate-700 shrink-0 shadow-lg"}),y.jsxs("div",{className:"min-w-0",children:[y.jsx("h3",{className:"text-base sm:text-xl font-bold text-white break-words",children:t.title}),y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("span",{className:"text-xs sm:text-sm text-slate-400 truncate",children:t.founderName}),y.jsx("span",{className:vt("ml-1 px-2 py-0.5 rounded-full text-[10px] sm:text-xs font-semibold","bg-purple-900/30 text-purple-300 border border-purple-700/30"),children:"Founder"})]})]})]})}),y.jsxs("div",{className:"flex flex-col gap-1 sm:gap-2 flex-grow",children:[y.jsx("p",{className:"text-slate-300 text-xs sm:text-sm mb-1 sm:mb-2 line-clamp-2 sm:line-clamp-4",children:t.description}),(e.role===dt.Investor||S)&&t.investmentDetails&&y.jsxs("div",{className:"hidden sm:block mb-2 p-3 bg-purple-900/20 border border-purple-800/30 rounded-xl text-xs",children:[y.jsx("h4",{className:"font-bold text-purple-300 mb-2",children:"Investment Details"}),y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-slate-400 text-xs",children:"Target Investment:"}),y.jsxs("p",{className:"font-semibold text-white text-sm",children:["$",t.investmentDetails.targetInvestment.toLocaleString()]})]}),y.jsxs("div",{children:[y.jsx("p",{className:"text-slate-400 text-xs",children:"Equity Offered:"}),y.jsxs("p",{className:"font-semibold text-white text-sm",children:[t.investmentDetails.equityOffered,"%"]})]})]})]}),!(e.role===dt.Investor||e.role==="investor")&&y.jsxs("div",{className:"hidden sm:block",children:[y.jsxs("h4",{className:"font-semibold text-white mb-2 flex items-center gap-1 text-xs",children:[y.jsx(zT,{className:"w-4 h-4 text-emerald-400"})," Required Skills:"]}),y.jsx("div",{className:"flex flex-wrap gap-1",children:t.requiredSkills.map(_e=>y.jsx("span",{className:vt("bg-blue-900/30 text-blue-300 text-[10px] font-medium px-2 py-1 rounded-full border border-blue-700/30"),children:_e},_e))})]}),!S&&T&&T[t.id]>0&&y.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[y.jsx(Es,{className:"w-4 h-4 text-emerald-400"}),y.jsxs("span",{className:"text-emerald-300 text-xs font-semibold",children:[T[t.id]," investor",T[t.id]>1?"s":""," invested"]})]})]}),S?null:y.jsx("div",{className:"sm:hidden",children:y.jsxs("div",{className:"absolute bottom-3 right-3 flex items-center gap-2 bg-slate-900/80 rounded-xl px-2 py-1 shadow-lg z-10",children:[y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("button",{onClick:_e=>{_e.stopPropagation(),a(t.id)},title:Ae?"Unlike":"Like",className:`transition-colors ${Ae?"text-red-500":"text-slate-400 hover:text-red-500"}`,children:y.jsx(Qc,{className:"w-5 h-5",fill:Ae?"currentColor":"none"})}),y.jsx("span",{className:"text-xs text-slate-400 min-w-[16px] text-center",children:((Ie=t.likes)==null?void 0:Ie.length)||0})]}),y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("button",{onClick:_e=>{_e.stopPropagation(),j(!z)},title:"Toggle comments",className:"text-slate-400 hover:text-blue-500 transition-colors",children:y.jsx(Xc,{className:"w-5 h-5"})}),y.jsx("span",{className:"text-xs text-slate-400 min-w-[16px] text-center",children:((H=t.comments)==null?void 0:H.length)||0})]})]})}),y.jsx("div",{className:"mt-2 sm:mt-4 pt-2 sm:pt-4 border-t border-slate-700/30",children:y.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-2 sm:gap-4",children:[y.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-slate-400",children:[S?y.jsx("span",{className:"text-xs sm:text-sm font-semibold text-purple-400",children:"Your Idea"}):M||V?y.jsxs("span",{className:"flex items-center gap-1 text-xs sm:text-sm font-semibold text-emerald-400",children:[y.jsx(HT,{className:"w-5 h-5"}),"Joined"]}):i?y.jsx("span",{className:"text-xs sm:text-sm font-semibold text-amber-400",children:"Request Sent"}):P?y.jsxs("span",{className:"flex items-center gap-2",children:[y.jsx("button",{onClick:_e=>{_e.stopPropagation(),n(t)},className:"bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white font-bold py-1 px-2 sm:py-2 sm:px-4 rounded-lg transition-all duration-200 hover:shadow-lg hover:shadow-emerald-500/25 text-xs sm:text-sm",children:"Send Join Request"}),y.jsxs("span",{className:"hidden sm:inline-flex items-center gap-2 ml-2",children:[y.jsx("button",{onClick:_e=>{_e.stopPropagation(),a(t.id)},title:Ae?"Unlike":"Like",className:`transition-colors ${Ae?"text-red-500":"text-slate-400 hover:text-red-500"}`,children:y.jsx(Qc,{className:"w-5 h-5 sm:w-6 sm:h-6",fill:Ae?"currentColor":"none"})}),y.jsx("span",{className:"text-xs sm:text-sm text-slate-400 min-w-[16px] text-center",children:((le=t.likes)==null?void 0:le.length)||0}),y.jsx("button",{onClick:_e=>{_e.stopPropagation(),j(!z)},title:"Toggle comments",className:"text-slate-400 hover:text-blue-500 transition-colors",children:y.jsx(Xc,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),y.jsx("span",{className:"text-xs sm:text-sm text-slate-400 min-w-[16px] text-center",children:((xe=t.comments)==null?void 0:xe.length)||0})]})]}):null,e.role===dt.Investor&&!S&&x&&y.jsxs("span",{className:"flex items-center gap-2",children:[x[t.id]&&y.jsx("span",{className:vt("text-[10px] sm:text-xs font-semibold px-1.5 py-0.5 rounded-full",x[t.id]==="accepted"?"bg-emerald-900/30 text-emerald-300 border border-emerald-700/30":x[t.id]==="declined"?"bg-red-900/30 text-red-300 border border-red-700/30":x[t.id]==="active"?"bg-amber-900/30 text-amber-300 border border-amber-700/30":"bg-slate-800 text-slate-400"),children:x[t.id].charAt(0).toUpperCase()+x[t.id].slice(1)}),y.jsx("button",{onClick:_e=>{_e.stopPropagation(),de()},className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 text-white font-bold py-1 px-2 sm:py-1 sm:px-3 rounded-lg transition-all duration-200 hover:shadow-lg hover:shadow-blue-500/25 text-xs sm:text-xs whitespace-nowrap leading-none",disabled:L,children:L?"Loading...":"Open Negotiation"}),y.jsxs("span",{className:"hidden sm:inline-flex items-center gap-2 ml-2",children:[y.jsx("button",{onClick:_e=>{_e.stopPropagation(),a(t.id)},title:Ae?"Unlike":"Like",className:`transition-colors ${Ae?"text-red-500":"text-slate-400 hover:text-red-500"}`,children:y.jsx(Qc,{className:"w-5 h-5 sm:w-6 sm:h-6",fill:Ae?"currentColor":"none"})}),y.jsx("span",{className:"text-xs sm:text-sm text-slate-400 min-w-[16px] text-center",children:((ce=t.likes)==null?void 0:ce.length)||0}),y.jsx("button",{onClick:_e=>{_e.stopPropagation(),j(!z)},title:"Toggle comments",className:"text-slate-400 hover:text-blue-500 transition-colors",children:y.jsx(Xc,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),y.jsx("span",{className:"text-xs sm:text-sm text-slate-400 min-w-[16px] text-center",children:((Ee=t.comments)==null?void 0:Ee.length)||0})]})]})]}),S?y.jsxs("div",{className:"w-full sm:w-auto mt-1 sm:mt-0 flex flex-col gap-1",children:[T&&T[t.id]>0&&y.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[y.jsx(Es,{className:"w-4 h-4 text-emerald-400"}),y.jsxs("span",{className:"text-emerald-300 text-xs font-semibold",children:[T[t.id]," investor",T[t.id]>1?"s":""," invested"]})]}),y.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[y.jsx("button",{onClick:_e=>{_e.stopPropagation(),s(t)},className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 text-white font-bold py-1 px-3 sm:py-2 sm:px-4 rounded-lg transition-all duration-200 hover:shadow-lg hover:shadow-blue-500/25 text-xs sm:text-sm whitespace-nowrap min-w-[90px] max-w-[120px]",children:"Manage Team"}),y.jsxs("div",{className:"flex items-center gap-1 bg-slate-800/50 rounded-xl px-2 py-1 shadow-lg z-10",children:[y.jsx("button",{onClick:_e=>{_e.stopPropagation(),a(t.id)},title:Ae?"Unlike":"Like",className:`transition-colors ${Ae?"text-red-500":"text-slate-400 hover:text-red-500"}`,children:y.jsx(Qc,{className:"w-5 h-5",fill:Ae?"currentColor":"none"})}),y.jsx("span",{className:"text-xs text-slate-400 min-w-[16px] text-center",children:((Fe=t.likes)==null?void 0:Fe.length)||0}),y.jsx("button",{onClick:_e=>{_e.stopPropagation(),j(!z)},title:"Toggle comments",className:"text-slate-400 hover:text-blue-500 transition-colors",children:y.jsx(Xc,{className:"w-5 h-5"})}),y.jsx("span",{className:"text-xs text-slate-400 min-w-[16px] text-center",children:((Be=t.comments)==null?void 0:Be.length)||0}),y.jsx("button",{onClick:_e=>{_e.stopPropagation(),h(t)},title:"Edit idea",className:"text-slate-400 hover:text-purple-400",children:y.jsx(C9,{className:"w-5 h-5"})})]})]})]}):null]})}),z&&y.jsxs("div",{className:"mt-2 sm:mt-4 pt-2 sm:pt-4 border-t border-slate-700/30",children:[y.jsx("h5",{className:"font-bold text-white mb-2 text-xs sm:text-base",children:"Comments"}),y.jsx("div",{className:"space-y-2 sm:space-y-3 max-h-32 sm:max-h-48 overflow-y-auto pr-2",children:t.comments&&t.comments.length>0?t.comments.map(_e=>y.jsxs("div",{className:"flex items-start gap-2 group",children:[y.jsx("img",{src:_e.userAvatar,alt:_e.userName,className:"w-7 h-7 sm:w-8 sm:h-8 rounded-full"}),y.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-2 text-xs sm:text-sm w-full border border-slate-700/30",children:[y.jsxs("div",{className:"flex justify-between items-start",children:[y.jsx("p",{className:"font-semibold text-white truncate",children:_e.userName}),S&&y.jsx("button",{onClick:()=>u(t.id,_e),title:"Delete comment",className:"text-slate-500 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:y.jsx(XM,{className:"w-4 h-4"})})]}),y.jsx("p",{className:"text-slate-300 break-words",children:_e.text})]})]},_e.id)):y.jsx("p",{className:"text-slate-400 text-xs sm:text-sm",children:"No comments yet."})}),y.jsxs("form",{onSubmit:ne,className:"mt-2 sm:mt-3 flex gap-2",children:[y.jsx("input",{type:"text",value:q,onChange:_e=>O(_e.target.value),placeholder:"Add a comment...",className:"flex-grow bg-slate-800/50 border border-slate-700/30 rounded-lg py-1 px-2 sm:py-1.5 sm:px-3 text-white text-xs sm:text-sm focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500/50 transition-all backdrop-blur-sm"}),y.jsx("button",{type:"submit",className:"bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-500 hover:to-purple-600 text-white font-bold py-1 px-2 sm:py-1.5 sm:px-4 rounded-lg text-xs sm:text-sm transition-all duration-200 hover:shadow-lg hover:shadow-purple-500/25",children:"Post"})]})]}),W&&C&&y.jsx(Ob,{negotiation:C,currentUser:e,onClose:()=>D(!1),onOfferMade:_e=>A(null,null,function*(){yield je.addOfferToNegotiation(C.id,_e);const Ct=(yield new Promise(Oe=>{je.getNegotiationsForInvestor(e.id,Oe)})).find(Oe=>Oe.ideaId===t.id);R(Ct)}),onStatusChange:_e=>A(null,null,function*(){yield je.updateNegotiationStatus(C.id,_e);const Ct=(yield new Promise(Oe=>{je.getNegotiationsForInvestor(e.id,Oe)})).find(Oe=>Oe.ideaId===t.id);R(Ct)})})]})]})},NY=({user:t,onNavigateToNegotiation:e})=>{var at,Ct;const[n,i]=K.useState([]),s=yu.useRef(null),[r,a]=K.useState(null),[c,u]=K.useState(!0),[h,g]=K.useState([]),[x,T]=K.useState(!0),[b,S]=K.useState(null),[P,M]=K.useState(!1),[V,q]=K.useState(null),[O,z]=K.useState("ideas"),[j,W]=K.useState(null),[D,C]=K.useState(null),[R,L]=K.useState({}),[F,G]=K.useState({}),[B,ye]=K.useState(null),[Ae,ne]=K.useState(!1),de=()=>A(null,null,function*(){if(s.current){i(s.current.ideas),a(s.current.lastDoc),u(s.current.hasMore),T(!1);return}T(!0);try{const{ideas:Oe,lastDoc:nt,hasMore:et}=yield je.getIdeasPaginated();i(Oe),a(nt),u(et),s.current={ideas:Oe,lastDoc:nt,hasMore:et}}catch(Oe){S("Could not load data. Please try again later."),console.error(Oe)}finally{T(!1)}});K.useEffect(()=>{O==="ideas"&&de()},[t,O]);const ie=()=>A(null,null,function*(){if(!(!r||!c)){T(!0);try{const{ideas:Oe,lastDoc:nt,hasMore:et}=yield je.getIdeasPaginated(r);i(li=>{const Ti=[...li,...Oe];return s.current={ideas:Ti,lastDoc:nt,hasMore:et},Ti}),a(nt),u(et)}catch(Oe){S("Could not load more ideas.")}finally{T(!1)}}});K.useEffect(()=>{if(t.role===dt.Investor||t.role==="investor")return je.getNegotiationsForInvestor(t.id,Oe=>{const nt={};Oe.forEach(et=>{nt[et.ideaId]=et.status}),L(nt)})},[t.id,t.role]),K.useEffect(()=>{je.getAcceptedInvestorCountForIdeas().then(G)},[]);const Ie=()=>{M(!1),q(null),s.current=null,de()},H=Oe=>{q(Oe),M(!0)},le=()=>{q(null),M(!1)},xe=Oe=>A(null,null,function*(){try{yield je.createJoinRequest(Oe,t),g(nt=>[...nt,{id:"temp-id",ideaId:Oe.id,ideaTitle:Oe.title,developerId:t.id,developerName:t.name,developerAvatar:t.avatarUrl,founderId:Oe.founderId,status:"pending",timestamp:new Date}])}catch(nt){console.error("Failed to send join request:",nt),alert("Failed to send join request. Please try again.")}}),ce=()=>{s.current=null,de()},Ee=Oe=>A(null,null,function*(){try{yield je.toggleLikeIdea(Oe,t.id),i(nt=>nt.map(et=>{var li;if(et.id===Oe){const Ti=(li=et.likes)==null?void 0:li.includes(t.id),fs=et.likes||[];return pe(J({},et),{likes:Ti?fs.filter(ur=>ur!==t.id):[...fs,t.id]})}return et}))}catch(nt){console.error("Failed to like idea:",nt)}}),Fe=(Oe,nt)=>A(null,null,function*(){try{const et={userId:t.id,userName:t.name,userAvatar:t.avatarUrl,text:nt,timestamp:new Date};yield je.addCommentToIdea(Oe,et),s.current=null,de()}catch(et){console.error("Failed to add comment:",et)}}),Be=(Oe,nt)=>A(null,null,function*(){if(window.confirm("Are you sure you want to delete this comment?"))try{yield je.deleteCommentFromIdea(Oe,nt),s.current=null,de()}catch(et){console.error("Failed to delete comment:",et)}}),_e=[];return y.jsxs("div",{className:"space-y-8 mt-9",children:[y.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[y.jsx("h1",{className:"text-3xl font-bold text-white",children:"Idea Marketplace"}),t.role===dt.Founder&&!P&&y.jsxs("button",{onClick:()=>M(!0),className:"flex items-center gap-2 bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-500 hover:to-purple-600 text-white font-bold py-2 px-5 rounded-lg transition-all duration-200 hover:shadow-lg hover:shadow-purple-500/25",children:[y.jsx(QM,{className:"w-5 h-5"}),"Post New Idea"]})]}),P&&y.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:y.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-black rounded-2xl shadow-2xl p-0 w-full max-w-lg mx-2 relative border border-slate-800/50",children:[y.jsx("button",{className:"absolute top-3 right-3 text-slate-400 hover:text-white text-2xl font-bold z-10 transition-colors",onClick:le,"aria-label":"Close edit form",children:""}),y.jsx(IY,{user:t,onIdeaPosted:Ie,editingIdea:V,onCancelEdit:le})]})}),t.role===dt.Founder&&y.jsxs("div",{className:"border-b border-slate-700/30 flex space-x-4",children:[y.jsx("button",{onClick:()=>z("ideas"),className:`py-2 px-4 text-sm font-medium transition-colors ${O==="ideas"?"text-white border-b-2 border-purple-500":"text-slate-400 hover:text-white"}`,children:"Browse Ideas"}),y.jsx("button",{onClick:()=>z("requests"),className:`py-2 px-4 text-sm font-medium transition-colors ${O==="requests"?"text-white border-b-2 border-emerald-500":"text-slate-400 hover:text-white"}`,children:"Join Requests"})]}),O==="ideas"&&y.jsxs(y.Fragment,{children:[x&&y.jsx("div",{className:"flex justify-center items-center h-64",children:y.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-purple-500"})}),b&&y.jsx("p",{className:"text-center text-red-400",children:b}),!x&&!b&&y.jsxs(y.Fragment,{children:[n.length===0&&y.jsxs("div",{className:"text-center py-16 px-6 bg-gradient-to-br from-slate-900/50 to-black/50 border-2 border-dashed border-slate-700/30 rounded-2xl backdrop-blur-sm",children:[y.jsx(Yn,{className:"w-12 h-12 mx-auto text-slate-600"}),y.jsx("h3",{className:"text-xl font-semibold mt-4 text-white",children:"No Ideas Yet"}),y.jsx("p",{className:"text-slate-400 mt-2 max-w-md mx-auto",children:t.role===dt.Founder?"Be the first to share your vision! Post a startup idea to attract talented developers.":"No ideas have been posted yet. Check back soon to find exciting projects to join."})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[n.map(Oe=>y.jsx("div",{className:"cursor-pointer group",tabIndex:0,role:"button","aria-label":`View details for ${Oe.title}`,onClick:nt=>{const et=nt.target.tagName.toLowerCase();et!=="button"&&et!=="svg"&&et!=="path"&&et!=="input"&&et!=="textarea"&&et!=="a"&&(ye(Oe),ne(!0))},onKeyDown:nt=>{(nt.key==="Enter"||nt.key===" ")&&(ye(Oe),ne(!0))},children:y.jsx(RY,{idea:Oe,user:t,onJoinRequest:xe,hasPendingRequest:_e.includes(Oe.id),onManageTeam:W,joinRequests:h,onLike:Ee,onComment:Fe,onDeleteComment:Be,onEdit:H,onStartNegotiation:C,negotiationStatuses:R,investorCounts:F,onNavigateToNegotiation:e})},Oe.id)),B&&y.jsx(yu.Suspense,{fallback:null,children:y.jsx(AY,{idea:B,open:Ae,onClose:()=>{ne(!1),setTimeout(()=>ye(null),200)}})})]}),c&&y.jsx("div",{className:"flex justify-center mt-6",children:y.jsx("button",{onClick:ie,className:"bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-500 hover:to-purple-600 text-white font-bold py-2 px-6 rounded-lg transition-all duration-200 hover:shadow-lg hover:shadow-purple-500/25",disabled:x,children:x?"Loading...":"Load More Ideas"})}),j&&y.jsx(SY,{idea:j,onClose:()=>W(null),onTeamUpdated:()=>{W(null),s.current=null,de()}}),D&&(t.role===dt.Investor||t.id===D.founderId)&&y.jsx(Ob,{startupName:D.title,founderName:D.founderName,investorName:t.role===dt.Investor?t.name:"Investor",currentUser:t,onClose:()=>C(null),initialInvestment:(at=D.investmentDetails)==null?void 0:at.targetInvestment,initialEquity:(Ct=D.investmentDetails)==null?void 0:Ct.equityOffered})]})]}),t.role===dt.Founder&&O==="requests"&&y.jsxs("div",{className:"mt-8",children:[y.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Approve Developer Join Requests"}),y.jsx(EY,{user:t,joinRequests:h,onRequestsUpdated:ce})]})]})},MY=({request:t,onUpdateRequest:e})=>y.jsxs("div",{className:"bg-gradient-to-br from-slate-900/90 to-black/90 backdrop-blur-sm border border-slate-800/50 rounded-xl sm:rounded-2xl p-4 sm:p-6 flex items-center justify-between transition-all duration-300 hover:border-slate-600/70 hover:shadow-2xl hover:shadow-slate-500/10",children:[y.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[y.jsx("img",{src:t.fromUserAvatar,alt:t.fromUserName,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full border-2 border-slate-700/50"}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-base sm:text-lg font-bold text-white",children:t.fromUserName}),y.jsx("p",{className:"text-xs sm:text-sm text-slate-400",children:t.fromUserRole})]})]}),y.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[y.jsx("button",{onClick:()=>e(t.id,"approved"),className:"p-2 sm:p-3 rounded-full bg-green-600/20 hover:bg-green-600/40 text-green-400 transition-all duration-300 border border-green-600/30 hover:border-green-500/50","aria-label":`Approve ${t.fromUserName}`,children:y.jsx(HT,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),y.jsx("button",{onClick:()=>e(t.id,"rejected"),className:"p-2 sm:p-3 rounded-full bg-red-600/20 hover:bg-red-600/40 text-red-400 transition-all duration-300 border border-red-600/30 hover:border-red-500/50","aria-label":`Reject ${t.fromUserName}`,children:y.jsx(Yr,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]})]}),PY=({request:t,onWithdrawRequest:e})=>y.jsxs("div",{className:"bg-gradient-to-br from-slate-900/90 to-black/90 backdrop-blur-sm border border-slate-800/50 rounded-xl sm:rounded-2xl p-4 sm:p-6 flex items-center justify-between transition-all duration-300 hover:border-slate-600/70 hover:shadow-2xl hover:shadow-slate-500/10",children:[y.jsx("div",{className:"flex items-center gap-3 sm:gap-4",children:y.jsxs("div",{children:[y.jsxs("h3",{className:"text-base sm:text-lg font-bold text-white",children:["Request to ",t.fromUserName,"..."]}),y.jsxs("p",{className:`text-xs sm:text-sm font-semibold ${t.status==="pending"?"text-yellow-400":t.status==="approved"?"text-green-400":"text-red-400"}`,children:["Status: ",t.status]})]})}),t.status==="pending"&&y.jsxs("button",{onClick:()=>e(t.id),className:"flex items-center gap-2 bg-gradient-to-r from-slate-800/50 to-slate-700/50 hover:from-slate-700/50 hover:to-slate-600/50 text-white font-semibold py-2 sm:py-3 px-3 sm:px-4 rounded-lg sm:rounded-xl transition-all duration-300 border border-slate-700/30 hover:border-slate-600/50 text-xs sm:text-sm","aria-label":`Withdraw request to ${t.fromUserName}`,children:[y.jsx(S9,{className:"w-4 h-4 sm:w-5 sm:h-5"}),"Withdraw"]})]}),DY=({incomingRequests:t,sentRequests:e})=>{const[n,i]=K.useState("incoming"),s=(c,u)=>A(null,null,function*(){try{yield je.updateConnectionRequest(c,u)}catch(h){console.error(`Failed to ${u} request:`,h),alert(`Could not ${u} the request. Please try again.`)}}),r=c=>A(null,null,function*(){if(window.confirm("Are you sure you want to withdraw this connection request?"))try{yield je.withdrawConnectionRequest(c)}catch(u){console.error("Failed to withdraw request:",u),alert("Could not withdraw the request. Please try again.")}}),a=t.filter(c=>c.status==="pending");return y.jsxs("div",{className:"h-full flex flex-col",children:[y.jsxs("div",{className:"bg-gradient-to-br from-slate-900/90 to-black/90 backdrop-blur-sm border border-slate-800/50 rounded-xl sm:rounded-2xl p-4 sm:p-6 mb-4 sm:mb-6",children:[y.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-white mb-4",children:"Connection Requests"}),y.jsxs("div",{className:"border-b border-slate-700/30 flex space-x-4",children:[y.jsxs("button",{onClick:()=>i("incoming"),className:`py-2 px-4 text-sm font-medium transition-all duration-300 relative ${n==="incoming"?"text-white border-b-2 border-slate-300":"text-slate-400 hover:text-white"}`,children:["Incoming",a.length>0&&y.jsx("span",{className:"absolute top-1 right-0 -mt-1 -mr-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-xs text-white",children:a.length})]}),y.jsx("button",{onClick:()=>i("sent"),className:`py-2 px-4 text-sm font-medium transition-all duration-300 ${n==="sent"?"text-white border-b-2 border-slate-300":"text-slate-400 hover:text-white"}`,children:"Sent"})]})]}),y.jsxs("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4 lg:p-6 pb-20 sm:pb-6",children:[n==="incoming"&&y.jsx(y.Fragment,{children:a.length>0?y.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:a.map(c=>y.jsx(MY,{request:c,onUpdateRequest:s},c.id))}):y.jsxs("div",{className:"text-center py-12 sm:py-16 px-4 sm:px-6 bg-gradient-to-br from-slate-900/90 to-black/90 backdrop-blur-sm border border-slate-800/50 rounded-xl sm:rounded-2xl",children:[y.jsx("h3",{className:"text-lg sm:text-xl font-semibold mt-4 text-white",children:"No Pending Incoming Requests"}),y.jsx("p",{className:"text-slate-400 text-sm sm:text-base mt-2 max-w-md mx-auto",children:"You have no new connection requests right now."})]})}),n==="sent"&&y.jsx(y.Fragment,{children:e.length>0?y.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:e.map(c=>y.jsx(PY,{request:c,onWithdrawRequest:r},c.id))}):y.jsxs("div",{className:"text-center py-12 sm:py-16 px-4 sm:px-6 bg-gradient-to-br from-slate-900/90 to-black/90 backdrop-blur-sm border border-slate-800/50 rounded-xl sm:rounded-2xl",children:[y.jsx("h3",{className:"text-lg sm:text-xl font-semibold mt-4 text-white",children:"No Sent Requests"}),y.jsx("p",{className:"text-slate-400 text-sm sm:text-base mt-2 max-w-md mx-auto",children:"You haven't sent any connection requests yet."})]})})]})]})},kY=({connections:t,currentUser:e,onMessage:n,onRemoveConnection:i})=>{const[s,r]=K.useState(null),[a,c]=K.useState(!1),u=x=>{a||r(x)},h=()=>{r(null)},g=(x,T)=>{x.stopPropagation(),window.confirm(`Are you sure you want to remove ${T.name} from your connections?`)&&i(T)};return y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"h-full flex flex-col",children:[y.jsx("div",{className:"bg-gradient-to-br from-slate-900/90 to-black/90 backdrop-blur-sm border border-slate-800/50 rounded-xl sm:rounded-2xl p-4 sm:p-6 mb-4 sm:mb-6",children:y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsxs("div",{children:[y.jsxs("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-white flex items-center gap-3",children:[y.jsx(Es,{className:"w-6 h-6 sm:w-8 sm:h-8 text-slate-300"}),"Your People"]}),y.jsx("p",{className:"text-slate-400 text-sm sm:text-base mt-2",children:"Browse and manage your connections."})]}),y.jsx("button",{onClick:()=>c(!a),className:"bg-gradient-to-r from-slate-800/50 to-slate-700/50 hover:from-slate-700/50 hover:to-slate-600/50 text-white font-medium py-2 sm:py-3 px-4 sm:px-6 rounded-lg sm:rounded-xl transition-all duration-300 border border-slate-700/30 hover:border-slate-600/50 text-sm sm:text-base",children:a?"Done":"Manage"})]})}),y.jsx("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4 lg:p-6 pb-20 sm:pb-6",children:t.length>0?y.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3 sm:gap-4 lg:gap-6",children:t.map(x=>y.jsxs("div",{onClick:()=>u(x),className:"relative bg-gradient-to-br from-slate-900/90 to-black/90 backdrop-blur-sm border border-slate-800/50 rounded-xl sm:rounded-2xl p-3 sm:p-5 flex flex-col items-center text-center cursor-pointer hover:border-slate-600/70 hover:shadow-2xl hover:shadow-slate-500/10 transition-all duration-300 transform hover:-translate-y-1",children:[a&&y.jsx("button",{onClick:T=>g(T,x),className:"absolute top-2 right-2 text-slate-500 hover:text-red-400 transition-colors z-10","aria-label":`Remove ${x.name}`,children:y.jsx(ZM,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),y.jsx("img",{src:x.avatarUrl,alt:x.name,className:"w-16 h-16 sm:w-20 sm:h-20 lg:w-24 lg:h-24 rounded-full mb-3 sm:mb-4 border-2 sm:border-4 border-slate-700/50"}),y.jsx("h3",{className:"font-semibold text-white text-sm sm:text-base lg:text-lg",children:x.name}),y.jsx("p",{className:"text-xs sm:text-sm text-slate-300",children:x.role}),y.jsx("p",{className:"text-xs text-slate-500 mt-1",children:x.location})]},x.id))}):y.jsxs("div",{className:"text-center py-12 sm:py-16 px-4 sm:px-6 bg-gradient-to-br from-slate-900/90 to-black/90 backdrop-blur-sm border border-slate-800/50 rounded-xl sm:rounded-2xl",children:[y.jsx(Es,{className:"w-10 h-10 sm:w-12 sm:h-12 mx-auto text-slate-600"}),y.jsx("h3",{className:"text-lg sm:text-xl font-semibold mt-4 text-white",children:"No Connections Yet"}),y.jsx("p",{className:"text-slate-400 text-sm sm:text-base mt-2 max-w-md mx-auto",children:"You haven't made any connections. Start by finding matches on the dashboard and sending connection requests!"})]})})]}),s&&y.jsx(Ub,{user:s,onClose:h,isOwnProfile:s.id===e.id,onMessage:n,onConnect:()=>{},currentUserId:e.id})]})};function VY({isDomainError:t}){return y.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mt-4",role:"alert",children:[y.jsx("strong",{className:"font-bold",children:"API Key Error: "}),t?y.jsx("span",{className:"block sm:inline",children:"Your domain is not authorized to use this API key. Please check your Firebase and Gemini API settings."}):y.jsx("span",{className:"block sm:inline",children:"API key is missing or invalid. Please set up your environment variables correctly."})]})}const Si=({currentView:t,targetView:e,setView:n,children:i,icon:s,pendingCount:r})=>{const a=t===e;return y.jsxs("div",{className:`flex items-center space-x-3 px-4 py-3 rounded-lg cursor-pointer transition-colors duration-200 ${a?"bg-purple-600 text-white font-semibold shadow-lg":"text-neutral-300 hover:bg-neutral-700/50 hover:text-white"}`,onClick:()=>n(e),children:[y.jsx(s,{className:"w-6 h-6"}),y.jsx("span",{className:"flex-grow",children:i}),r&&r>0&&y.jsx("span",{className:"bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r})]})},LY=({currentView:t,setView:e,userProfile:n,onLogout:i,pendingRequestCount:s,isMobileChatOpen:r=!1,isMobileNegotiationOpen:a=!1})=>{const[c,u]=K.useState(!1),[h,g]=K.useState(!1),[x,T]=K.useState(!1),b=P(),S=M=>{e(n?M:Te.AUTH)};if(K.useEffect(()=>{if(h)T(!0);else{const M=setTimeout(()=>T(!1),300);return()=>clearTimeout(M)}},[h]),!n)return y.jsx("header",{className:"fixed top-0 left-0 right-0 bg-white/5 backdrop-blur-sm z-50 border-b border-white/10 shadow-lg",children:y.jsx("nav",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:y.jsxs("div",{className:"flex items-center justify-between h-16",children:[y.jsxs("div",{className:"flex items-center space-x-2 cursor-pointer",onClick:()=>e(Te.LANDING),children:[y.jsx(Yc,{className:"h-8 w-8 text-purple-500"}),y.jsx("span",{className:"font-bold text-xl text-white",children:"Grow With Me"})]}),y.jsxs("button",{onClick:()=>e(Te.AUTH),className:"flex items-center gap-2 bg-neutral-800 hover:bg-neutral-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-300",children:[y.jsx(E9,{className:"w-5 h-5"}),"Login"]})]})})});function P(){const[M,V]=K.useState(!0),q=K.useRef(0);return K.useEffect(()=>{const O=()=>{const z=window.scrollY;if(z<10){V(!0),q.current=z;return}z>q.current&&z-q.current>10?V(!1):z<q.current&&q.current-z>10&&V(!0),q.current=z};return window.addEventListener("scroll",O,{passive:!0}),()=>window.removeEventListener("scroll",O)},[]),M}return y.jsxs(y.Fragment,{children:[!r&&!a&&y.jsxs("header",{className:"lg:hidden fixed top-0 left-0 right-0 bg-white/10 backdrop-blur-sm z-50 border-b border-white/10 shadow-lg flex items-center h-16 px-4 justify-between",children:[y.jsxs("div",{className:"flex items-center",children:[y.jsx("button",{onClick:()=>g(!0),className:"p-2 rounded-lg hover:bg-neutral-800 focus:outline-none mr-2 sm:block hidden lg:hidden",title:"Open menu",children:y.jsx(x9,{className:"w-7 h-7 text-white"})}),y.jsxs("div",{className:"flex items-center space-x-2 cursor-pointer",onClick:()=>e(Te.LANDING),children:[y.jsx(Yc,{className:"h-8 w-8 text-purple-500"}),y.jsx("span",{className:"font-bold text-xl text-white",children:"Grow With Me"})]})]}),y.jsx("div",{className:"flex items-center",children:y.jsxs("div",{className:"relative",children:[y.jsx("img",{src:n.avatarUrl,alt:n.name,className:"w-9 h-9 rounded-full border-2 border-neutral-700 cursor-pointer",onClick:()=>u(!c)}),c&&y.jsxs("div",{className:"absolute right-0 mt-2 w-44 bg-neutral-800 rounded-lg shadow-lg py-1 border border-neutral-700 animate-fade-in-scale-sm z-50",children:[y.jsx("a",{href:"#",onClick:M=>{M.preventDefault(),e(Te.ONBOARDING),u(!1),g(!1)},className:"block px-4 py-2 text-sm text-neutral-300 hover:bg-neutral-700",children:"My Profile"}),y.jsxs("a",{href:"#",onClick:M=>{M.preventDefault(),S(Te.PEOPLE),u(!1),g(!1)},className:`block px-4 py-2 text-sm hover:bg-neutral-700 flex items-center gap-2 ${t===Te.PEOPLE?"text-purple-400":"text-neutral-300"}`,children:[y.jsx(Es,{className:"w-4 h-4"})," People"]}),y.jsxs("a",{href:"#",onClick:M=>{M.preventDefault(),S(Te.REQUESTS),u(!1),g(!1)},className:`block px-4 py-2 text-sm hover:bg-neutral-700 flex items-center gap-2 ${t===Te.REQUESTS?"text-purple-400":"text-neutral-300"}`,children:[s>0&&y.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full px-1 mr-1",children:s}),y.jsx(Wo,{className:"w-4 h-4"})," Requests"]}),y.jsxs("a",{href:"#",onClick:M=>{M.preventDefault(),i(),u(!1),g(!1)},className:"block px-4 py-2 text-sm text-red-400 hover:bg-neutral-700 flex items-center gap-2",children:[y.jsx(dx,{className:"w-4 h-4"})," Logout"]})]})]})})]}),!r&&!a&&y.jsxs("nav",{className:`fixed bottom-0 left-0 right-0 z-50 bg-white/10 backdrop-blur-sm border-t border-white/10 shadow-lg flex justify-between items-center h-16 px-1 sm:hidden lg:hidden gap-1 transition-transform duration-300 ${b?"translate-y-0":"translate-y-full"}`,children:[y.jsxs("button",{onClick:()=>S(Te.DASHBOARD),className:`flex flex-col items-center flex-1 py-1 mx-0.5 ${t===Te.DASHBOARD?"text-purple-400":"text-neutral-300"}`,children:[" ",y.jsx(Xp,{className:"w-5 h-5 mb-0.5"})," ",y.jsx("span",{className:"text-[11px] leading-tight",children:"Dashboard"})," "]}),y.jsxs("button",{onClick:()=>S(Te.ANALYTICS),className:`flex flex-col items-center flex-1 py-1 mx-0.5 ${t===Te.ANALYTICS?"text-purple-400":"text-neutral-300"}`,children:[" ",y.jsx(hx,{className:"w-5 h-5 mb-0.5"})," ",y.jsx("span",{className:"text-[11px] leading-tight",children:"Analytics"})," "]}),y.jsxs("button",{onClick:()=>S(Te.MESSAGES),className:`flex flex-col items-center flex-1 py-1 mx-0.5 ${t===Te.MESSAGES?"text-purple-400":"text-neutral-300"}`,children:[" ",y.jsx(uu,{className:"w-5 h-5 mb-0.5"})," ",y.jsx("span",{className:"text-[11px] leading-tight",children:"Messages"})," "]}),y.jsxs("button",{onClick:()=>S(Te.IDEAS),className:`flex flex-col items-center flex-1 py-1 mx-0.5 ${t===Te.IDEAS?"text-purple-400":"text-neutral-300"}`,children:[" ",y.jsx(Yn,{className:"w-5 h-5 mb-0.5"})," ",y.jsx("span",{className:"text-[11px] leading-tight",children:"Ideas"})," "]}),y.jsxs("button",{onClick:()=>S(Te.NEGOTIATIONS),className:`flex flex-col items-center flex-1 py-1 mx-0.5 ${t===Te.NEGOTIATIONS?"text-purple-400":"text-neutral-300"}`,children:[" ",y.jsx(Yn,{className:"w-5 h-5 mb-0.5"})," ",y.jsx("span",{className:"text-[11px] leading-tight",children:"Negotiations"})," "]})]}),(h||x)&&y.jsxs("div",{className:"fixed inset-0 z-50 lg:hidden",children:[y.jsx("div",{className:"fixed inset-0 bg-white/10 backdrop-blur-sm transition-opacity duration-300 opacity-100 pointer-events-auto",onClick:()=>g(!1)}),y.jsxs("aside",{className:`relative w-64 bg-white/5 backdrop-blur-sm border-r border-white/10 shadow-lg text-white p-4 flex flex-col h-full z-50 transform transition-transform duration-300 ${h?"translate-x-0":"-translate-x-full"} pointer-events-auto`,style:{minWidth:"16rem"},children:[y.jsxs("div",{className:"absolute inset-0 -z-10 pointer-events-none",children:[y.jsx("div",{className:"absolute top-1/4 left-1/4 w-32 h-32 bg-emerald-500/10 rounded-full blur-2xl animate-pulse-slow"}),y.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-40 h-40 bg-purple-500/10 rounded-full blur-2xl animate-pulse-slow",style:{animationDelay:"2s"}})]}),y.jsxs("div",{className:"flex items-center justify-between mb-10 px-2",children:[y.jsxs("div",{className:"flex items-center space-x-2 cursor-pointer",onClick:()=>{e(Te.LANDING),g(!1)},children:[y.jsx(Yc,{className:"h-8 w-8 text-purple-500"}),y.jsx("span",{className:"font-bold text-xl text-white",children:"Grow With Me"})]}),y.jsx("button",{onClick:()=>g(!1),className:"p-2 rounded-lg hover:bg-neutral-800 focus:outline-none",title:"Close menu",children:y.jsx(Yr,{className:"w-6 h-6 text-white"})})]}),y.jsx("nav",{className:"flex-grow",children:y.jsxs("ul",{className:"space-y-2",children:[y.jsx("li",{children:y.jsx(Si,{currentView:t,targetView:Te.DASHBOARD,setView:M=>{S(M),g(!1)},icon:Xp,children:"Dashboard"})}),y.jsx("li",{children:y.jsx(Si,{currentView:t,targetView:Te.ANALYTICS,setView:M=>{S(M),g(!1)},icon:hx,children:"Analytics"})}),y.jsx("li",{children:y.jsx(Si,{currentView:t,targetView:Te.MESSAGES,setView:M=>{S(M),g(!1)},icon:uu,children:"Messages"})}),y.jsx("li",{children:y.jsx(Si,{currentView:t,targetView:Te.IDEAS,setView:M=>{S(M),g(!1)},icon:Yn,children:"Ideas"})}),y.jsx("li",{children:y.jsx(Si,{currentView:t,targetView:Te.PEOPLE,setView:M=>{S(M),g(!1)},icon:Es,children:"People"})}),y.jsx("li",{children:y.jsx(Si,{currentView:t,targetView:Te.REQUESTS,setView:M=>{S(M),g(!1)},icon:Wo,pendingCount:s,children:"Requests"})}),y.jsx("li",{children:y.jsx(Si,{currentView:t,targetView:Te.NEGOTIATIONS,setView:M=>{S(M),g(!1)},icon:Yn,children:"Negotiations"})})]})}),y.jsx("div",{className:"mt-auto",children:y.jsxs("div",{className:"relative",children:[y.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg cursor-pointer hover:bg-neutral-800 transition-colors",onClick:()=>u(!c),children:[y.jsx("img",{src:n.avatarUrl,alt:n.name,className:"w-10 h-10 rounded-full border-2 border-neutral-700"}),y.jsxs("div",{className:"flex-grow overflow-hidden",children:[y.jsx("p",{className:"text-sm text-white font-semibold truncate",children:n.name}),y.jsx("p",{className:"text-xs text-neutral-400 truncate",children:n.role})]})]}),c&&y.jsxs("div",{className:"absolute bottom-full left-0 mb-2 w-full bg-neutral-800 rounded-lg shadow-lg py-1 border border-neutral-700 animate-fade-in-scale-sm",children:[y.jsx("a",{href:"#",onClick:M=>{M.preventDefault(),e(Te.ONBOARDING),u(!1)},className:"block px-4 py-2 text-sm text-neutral-300 hover:bg-neutral-700",children:"My Profile"}),y.jsxs("a",{href:"#",onClick:M=>{M.preventDefault(),i(),u(!1)},className:"block px-4 py-2 text-sm text-red-400 hover:bg-neutral-700 flex items-center gap-2",children:[y.jsx(dx,{className:"w-4 h-4"})," Logout"]})]})]})})]})]}),y.jsxs("aside",{className:"hidden lg:flex w-64 bg-white/5 backdrop-blur-sm border-r border-white/10 shadow-lg text-white p-4 flex-col h-screen fixed z-50",children:[y.jsxs("div",{className:"absolute inset-0 -z-10 pointer-events-none",children:[y.jsx("div",{className:"absolute top-1/4 left-1/4 w-32 h-32 bg-emerald-500/10 rounded-full blur-2xl animate-pulse-slow"}),y.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-40 h-40 bg-purple-500/10 rounded-full blur-2xl animate-pulse-slow",style:{animationDelay:"2s"}})]}),y.jsxs("div",{className:"flex items-center space-x-2 cursor-pointer mb-10 px-2",onClick:()=>e(Te.LANDING),children:[y.jsx(Yc,{className:"h-8 w-8 text-purple-500"}),y.jsx("span",{className:"font-bold text-xl text-white",children:"Grow With Me"})]}),y.jsx("nav",{className:"flex-grow",children:y.jsxs("ul",{className:"space-y-2",children:[y.jsx("li",{children:y.jsx(Si,{currentView:t,targetView:Te.DASHBOARD,setView:S,icon:Xp,children:"Dashboard"})}),y.jsx("li",{children:y.jsx(Si,{currentView:t,targetView:Te.ANALYTICS,setView:S,icon:hx,children:"Analytics"})}),y.jsx("li",{children:y.jsx(Si,{currentView:t,targetView:Te.MESSAGES,setView:S,icon:uu,children:"Messages"})}),y.jsx("li",{children:y.jsx(Si,{currentView:t,targetView:Te.IDEAS,setView:S,icon:Yn,children:"Ideas"})}),y.jsx("li",{children:y.jsx(Si,{currentView:t,targetView:Te.PEOPLE,setView:S,icon:Es,children:"People"})}),y.jsx("li",{children:y.jsx(Si,{currentView:t,targetView:Te.REQUESTS,setView:S,icon:Wo,pendingCount:s,children:"Requests"})}),y.jsx("li",{children:y.jsx(Si,{currentView:t,targetView:Te.NEGOTIATIONS,setView:S,icon:Yn,children:"Negotiations"})})]})}),y.jsx("div",{className:"mt-auto",children:y.jsxs("div",{className:"relative",children:[y.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg cursor-pointer hover:bg-neutral-800 transition-colors",onClick:()=>u(!c),children:[y.jsx("img",{src:n.avatarUrl,alt:n.name,className:"w-10 h-10 rounded-full border-2 border-neutral-700"}),y.jsxs("div",{className:"flex-grow overflow-hidden",children:[y.jsx("p",{className:"text-sm text-white font-semibold truncate",children:n.name}),y.jsx("p",{className:"text-xs text-neutral-400 truncate",children:n.role})]})]}),c&&y.jsxs("div",{className:"absolute bottom-full left-0 mb-2 w-full bg-neutral-800 rounded-lg shadow-lg py-1 border border-neutral-700 animate-fade-in-scale-sm",children:[y.jsx("a",{href:"#",onClick:M=>{M.preventDefault(),e(Te.ONBOARDING),u(!1)},className:"block px-4 py-2 text-sm text-neutral-300 hover:bg-neutral-700",children:"My Profile"}),y.jsxs("a",{href:"#",onClick:M=>{M.preventDefault(),i(),u(!1)},className:"block px-4 py-2 text-sm text-red-400 hover:bg-neutral-700 flex items-center gap-2",children:[y.jsx(dx,{className:"w-4 h-4"})," Logout"]})]})]})})]})]})},UY=[{id:"dev_1",name:"Alex Chen",role:dt.Developer,avatarUrl:"https://api.dicebear.com/8.x/bottts/svg?seed=alex",location:"San Francisco, CA",interests:["AI/ML","Web3","SaaS"],skills:["React","Python","Go","Kubernetes"],experience:"5+ years as a full-stack engineer at a FAANG company. Built and scaled multiple products from 0 to 1.",lookingFor:"A visionary founder with a strong product sense to build the next big thing in developer tools."},{id:"founder_1",name:"Brenda Smith",role:dt.Founder,avatarUrl:"https://api.dicebear.com/8.x/bottts/svg?seed=brenda",location:"New York, NY",interests:["FinTech","E-commerce","Marketplaces"],skills:["Product Management","Marketing","Business Strategy"],experience:"Second-time founder. Exited my first startup for $20M. Deep expertise in product-market fit and GTM strategy.",lookingFor:"A technical co-founder who is passionate about building scalable and beautiful products."},{id:"investor_1",name:"Charles Davis",role:dt.Investor,avatarUrl:"https://api.dicebear.com/8.x/bottts/svg?seed=charles",location:"Remote",interests:["AI","Future of Work","Climate Tech"],skills:["Venture Capital","Fundraising","Growth Hacking"],experience:"Partner at a Tier 1 VC firm. Led Series A rounds for several unicorns. I love working with ambitious founders.",lookingFor:"Early-stage startups with a unique insight and massive market potential. Looking to write checks from $500k to $2M."},{id:"dev_2",name:"Diana Rodriguez",role:dt.Developer,avatarUrl:"https://api.dicebear.com/8.x/bottts/svg?seed=diana",location:"Austin, TX",interests:["Cybersecurity","DevOps","Cloud Infrastructure"],skills:["AWS","Terraform","Rust","Security Audits"],experience:"Senior security engineer with a background in pentesting and cloud architecture. Love building secure and resilient systems.",lookingFor:"A co-founder who understands the security space and wants to build a product that makes the internet safer."},{id:"founder_2",name:"Ethan Wong",role:dt.Founder,avatarUrl:"https://api.dicebear.com/8.x/bottts/svg?seed=ethan",location:"Singapore",interests:["Gaming","Creator Economy","Social Platforms"],skills:["Community Building","UI/UX Design","Agile Methodology"],experience:"Former product manager at a major gaming company. Launched a social app with over 1M MAU.",lookingFor:"An investor who believes in the power of community and a lead developer to build our V2."}];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let OY,FY;function BY(){return{geminiUrl:OY,vertexUrl:FY}}function qY(t,e,n,i){var s,r;if(!(t!=null&&t.baseUrl)){const a=BY();return e?(s=a.vertexUrl)!==null&&s!==void 0?s:n:(r=a.geminiUrl)!==null&&r!==void 0?r:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jl{}function Le(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const r=e[s];return r!=null?String(r):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function m(t,e,n){for(let r=0;r<e.length-1;r++){const a=e[r];if(a.endsWith("[]")){const c=a.slice(0,-2);if(!(c in t))if(Array.isArray(n))t[c]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(t[c])){const u=t[c];if(Array.isArray(n))for(let h=0;h<u.length;h++){const g=u[h];m(g,e.slice(r+1),n[h])}else for(const h of u)m(h,e.slice(r+1),n)}return}else if(a.endsWith("[0]")){const c=a.slice(0,-3);c in t||(t[c]=[{}]);const u=t[c];m(u[0],e.slice(r+1),n);return}(!t[a]||typeof t[a]!="object")&&(t[a]={}),t=t[a]}const i=e[e.length-1],s=t[i];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else t[i]=n}function f(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const i=e[n];if(i.endsWith("[]")){const s=i.slice(0,-2);if(s in t){const r=t[s];return Array.isArray(r)?r.map(a=>f(a,e.slice(n+1))):void 0}else return}else t=t[i]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tT(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var nN;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(nN||(nN={}));var iN;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(iN||(iN={}));var Gi;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Gi||(Gi={}));var sN;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(sN||(sN={}));var rN;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(rN||(rN={}));var oN;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(oN||(oN={}));var aN;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(aN||(aN={}));var lN;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(lN||(lN={}));var cN;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(cN||(cN={}));var uN;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(uN||(uN={}));var dN;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(dN||(dN={}));var hN;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(hN||(hN={}));var fN;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(fN||(fN={}));var mN;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(mN||(mN={}));var pN;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(pN||(pN={}));var Jg;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Jg||(Jg={}));var gN;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(gN||(gN={}));var nT;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(nT||(nT={}));var yN;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(yN||(yN={}));var vN;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(vN||(vN={}));var xN;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(xN||(xN={}));var _N;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(_N||(_N={}));var TN;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(TN||(TN={}));var wN;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(wN||(wN={}));var bN;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(bN||(bN={}));var EN;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(EN||(EN={}));var SN;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(SN||(SN={}));var AN;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(AN||(AN={}));var CN;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(CN||(CN={}));var IN;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(IN||(IN={}));var RN;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(RN||(RN={}));var NN;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(NN||(NN={}));var MN;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(MN||(MN={}));var PN;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(PN||(PN={}));var DN;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(DN||(DN={}));var kN;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(kN||(kN={}));var VN;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(VN||(VN={}));var LN;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(LN||(LN={}));var UN;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(UN||(UN={}));var ON;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(ON||(ON={}));var FN;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(FN||(FN={}));var BN;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(BN||(BN={}));var qN;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(qN||(qN={}));var jN;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(jN||(jN={}));var su;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(su||(su={}));class iT{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Ih{get text(){var e,n,i,s,r,a,c,u;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",g=!1;const x=[];for(const T of(u=(c=(a=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content)===null||c===void 0?void 0:c.parts)!==null&&u!==void 0?u:[]){for(const[b,S]of Object.entries(T))b!=="text"&&b!=="thought"&&(S!==null||S!==void 0)&&x.push(b);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;g=!0,h+=T.text}}return x.length>0&&console.warn(`there are non-text parts ${x} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),g?h:void 0}get data(){var e,n,i,s,r,a,c,u;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const g=[];for(const x of(u=(c=(a=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content)===null||c===void 0?void 0:c.parts)!==null&&u!==void 0?u:[]){for(const[T,b]of Object.entries(x))T!=="inlineData"&&(b!==null||b!==void 0)&&g.push(T);x.inlineData&&typeof x.inlineData.data=="string"&&(h+=atob(x.inlineData.data))}return g.length>0&&console.warn(`there are non-data parts ${g} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,n,i,s,r,a,c,u;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(u=(c=(a=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content)===null||c===void 0?void 0:c.parts)===null||u===void 0?void 0:u.filter(g=>g.functionCall).map(g=>g.functionCall).filter(g=>g!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,n,i,s,r,a,c,u,h;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const g=(u=(c=(a=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content)===null||c===void 0?void 0:c.parts)===null||u===void 0?void 0:u.filter(x=>x.executableCode).map(x=>x.executableCode).filter(x=>x!==void 0);if((g==null?void 0:g.length)!==0)return(h=g==null?void 0:g[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,n,i,s,r,a,c,u,h;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const g=(u=(c=(a=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content)===null||c===void 0?void 0:c.parts)===null||u===void 0?void 0:u.filter(x=>x.codeExecutionResult).map(x=>x.codeExecutionResult).filter(x=>x!==void 0);if((g==null?void 0:g.length)!==0)return(h=g==null?void 0:g[0])===null||h===void 0?void 0:h.output}}class GN{}class zN{}class jY{}class GY{}class zY{}class HY{}class HN{}class $N{}class KN{}class $Y{}class WN{}class YN{}class JN{}class QN{}class KY{}class WY{}class YY{}class XN{}class JY{get text(){var e,n,i;let s="",r=!1;const a=[];for(const c of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[u,h]of Object.entries(c))u!=="text"&&u!=="thought"&&h!==null&&a.push(u);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;r=!0,s+=c.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),r?s:void 0}get data(){var e,n,i;let s="";const r=[];for(const a of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[c,u]of Object.entries(a))c!=="inlineData"&&u!==null&&r.push(c);a.inlineData&&typeof a.inlineData.data=="string"&&(s+=atob(a.inlineData.data))}return r.length>0&&console.warn(`there are non-data parts ${r} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class Qg{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const i=new Qg;if(i.name=e.name,i.metadata=e.metadata,i.done=e.done,i.error=e.error,n){const s=e.response;if(s){const r=new WN,a=s.videos;r.generatedVideos=a==null?void 0:a.map(c=>({video:{uri:c.gcsUri,videoBytes:c.bytesBase64Encoded?tT(c.bytesBase64Encoded):void 0,mimeType:c.mimeType}})),r.raiMediaFilteredCount=s.raiMediaFilteredCount,r.raiMediaFilteredReasons=s.raiMediaFilteredReasons,i.response=r}}else{const s=e.response;if(s){const r=new WN,a=s.generateVideoResponse,c=a==null?void 0:a.generatedSamples;r.generatedVideos=c==null?void 0:c.map(u=>{const h=u.video;return{video:{uri:h==null?void 0:h.uri,videoBytes:h!=null&&h.encodedVideo?tT(h==null?void 0:h.encodedVideo):void 0,mimeType:u.encoding}}}),r.raiMediaFilteredCount=a==null?void 0:a.raiMediaFilteredCount,r.raiMediaFilteredReasons=a==null?void 0:a.raiMediaFilteredReasons,i.response=r}}return i}}class QY{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Et(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function VL(t,e){const n=Et(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function LL(t){return Array.isArray(t)?t.map(e=>Xg(e)):[Xg(t)]}function Xg(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function UL(t){const e=Xg(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function OL(t){const e=Xg(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function ZN(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function FL(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>ZN(e)):[ZN(t)]}function sT(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function e2(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function t2(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function ri(t){if(t==null)throw new Error("ContentUnion is required");return sT(t)?t:{role:"user",parts:FL(t)}}function BL(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=ri(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=ri(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>ri(n)):[ri(e)]}function ds(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(e2(t)||t2(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ri(t)]}const e=[],n=[],i=sT(t[0]);for(const s of t){const r=sT(s);if(r!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(r)e.push(s);else{if(e2(s)||t2(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return i||e.push({role:"user",parts:FL(n)}),e}function XY(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(Gi).includes(n[0].toUpperCase())?n[0].toUpperCase():Gi.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(Gi).includes(i.toUpperCase())?i.toUpperCase():Gi.TYPE_UNSPECIFIED})}}function mu(t){const e={},n=["items"],i=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const r=t.anyOf;r!=null&&r.length==2&&(r[0].type==="null"?(e.nullable=!0,t=r[1]):r[1].type==="null"&&(e.nullable=!0,t=r[0])),t.type instanceof Array&&XY(t.type,e);for(const[a,c]of Object.entries(t))if(c!=null)if(a=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(Gi).includes(c.toUpperCase())?c.toUpperCase():Gi.TYPE_UNSPECIFIED}else if(n.includes(a))e[a]=mu(c);else if(i.includes(a)){const u=[];for(const h of c){if(h.type=="null"){e.nullable=!0;continue}u.push(mu(h))}e[a]=u}else if(s.includes(a)){const u={};for(const[h,g]of Object.entries(c))u[h]=mu(g);e[a]=u}else{if(a==="additionalProperties")continue;e[a]=c}return e}function Fb(t){return mu(t)}function Bb(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function qb(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function ad(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=mu(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=mu(e.response));return t}function ld(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function ZY(t,e,n,i=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function eo(t,e){if(typeof e!="string")throw new Error("name must be a string");return ZY(t,e,"cachedContents")}function qL(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Gl(t){return tT(t)}function eJ(t){return t!=null&&typeof t=="object"&&"name"in t}function tJ(t){return t!=null&&typeof t=="object"&&"video"in t}function nJ(t){return t!=null&&typeof t=="object"&&"uri"in t}function jL(t){var e;let n;if(eJ(t)&&(n=t.name),!(nJ(t)&&(n=t.uri,n===void 0))&&!(tJ(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function GL(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function zL(t){for(const e of["models","tunedModels","publisherModels"])if(iJ(t,e))return t[e];return[]}function iJ(t,e){return t!==null&&typeof t=="object"&&e in t}function sJ(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function rJ(t,e={}){const n=[],i=new Set;for(const s of t){const r=s.name;if(i.has(r))throw new Error(`Duplicate function name ${r} found in MCP tools. Please ensure function names are unique.`);i.add(r);const a=sJ(s,e);a.functionDeclarations&&n.push(...a.functionDeclarations)}return{functionDeclarations:n}}function HL(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function oJ(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function cd(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function $L(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aJ(t){const e={},n=f(t,["fps"]);n!=null&&m(e,["fps"],n);const i=f(t,["endOffset"]);i!=null&&m(e,["endOffset"],i);const s=f(t,["startOffset"]);return s!=null&&m(e,["startOffset"],s),e}function lJ(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["data"]);n!=null&&m(e,["data"],n);const i=f(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function cJ(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const i=f(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function uJ(t){const e={},n=f(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],aJ(n));const i=f(t,["thought"]);i!=null&&m(e,["thought"],i);const s=f(t,["inlineData"]);s!=null&&m(e,["inlineData"],lJ(s));const r=f(t,["fileData"]);r!=null&&m(e,["fileData"],cJ(r));const a=f(t,["thoughtSignature"]);a!=null&&m(e,["thoughtSignature"],a);const c=f(t,["codeExecutionResult"]);c!=null&&m(e,["codeExecutionResult"],c);const u=f(t,["executableCode"]);u!=null&&m(e,["executableCode"],u);const h=f(t,["functionCall"]);h!=null&&m(e,["functionCall"],h);const g=f(t,["functionResponse"]);g!=null&&m(e,["functionResponse"],g);const x=f(t,["text"]);return x!=null&&m(e,["text"],x),e}function KL(t){const e={},n=f(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>uJ(r))),m(e,["parts"],s)}const i=f(t,["role"]);return i!=null&&m(e,["role"],i),e}function dJ(t){const e={},n=f(t,["anyOf"]);n!=null&&m(e,["anyOf"],n);const i=f(t,["default"]);i!=null&&m(e,["default"],i);const s=f(t,["description"]);s!=null&&m(e,["description"],s);const r=f(t,["enum"]);r!=null&&m(e,["enum"],r);const a=f(t,["example"]);a!=null&&m(e,["example"],a);const c=f(t,["format"]);c!=null&&m(e,["format"],c);const u=f(t,["items"]);u!=null&&m(e,["items"],u);const h=f(t,["maxItems"]);h!=null&&m(e,["maxItems"],h);const g=f(t,["maxLength"]);g!=null&&m(e,["maxLength"],g);const x=f(t,["maxProperties"]);x!=null&&m(e,["maxProperties"],x);const T=f(t,["maximum"]);T!=null&&m(e,["maximum"],T);const b=f(t,["minItems"]);b!=null&&m(e,["minItems"],b);const S=f(t,["minLength"]);S!=null&&m(e,["minLength"],S);const P=f(t,["minProperties"]);P!=null&&m(e,["minProperties"],P);const M=f(t,["minimum"]);M!=null&&m(e,["minimum"],M);const V=f(t,["nullable"]);V!=null&&m(e,["nullable"],V);const q=f(t,["pattern"]);q!=null&&m(e,["pattern"],q);const O=f(t,["properties"]);O!=null&&m(e,["properties"],O);const z=f(t,["propertyOrdering"]);z!=null&&m(e,["propertyOrdering"],z);const j=f(t,["required"]);j!=null&&m(e,["required"],j);const W=f(t,["title"]);W!=null&&m(e,["title"],W);const D=f(t,["type"]);return D!=null&&m(e,["type"],D),e}function hJ(t){const e={};if(f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=f(t,["category"]);n!=null&&m(e,["category"],n);const i=f(t,["threshold"]);return i!=null&&m(e,["threshold"],i),e}function fJ(t){const e={},n=f(t,["behavior"]);n!=null&&m(e,["behavior"],n);const i=f(t,["description"]);i!=null&&m(e,["description"],i);const s=f(t,["name"]);s!=null&&m(e,["name"],s);const r=f(t,["parameters"]);r!=null&&m(e,["parameters"],r);const a=f(t,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const c=f(t,["response"]);c!=null&&m(e,["response"],c);const u=f(t,["responseJsonSchema"]);return u!=null&&m(e,["responseJsonSchema"],u),e}function mJ(t){const e={},n=f(t,["startTime"]);n!=null&&m(e,["startTime"],n);const i=f(t,["endTime"]);return i!=null&&m(e,["endTime"],i),e}function pJ(t){const e={},n=f(t,["timeRangeFilter"]);if(n!=null&&m(e,["timeRangeFilter"],mJ(n)),f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function gJ(t){const e={},n=f(t,["mode"]);n!=null&&m(e,["mode"],n);const i=f(t,["dynamicThreshold"]);return i!=null&&m(e,["dynamicThreshold"],i),e}function yJ(t){const e={},n=f(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],gJ(n)),e}function vJ(){return{}}function xJ(t){const e={},n=f(t,["environment"]);return n!=null&&m(e,["environment"],n),e}function _J(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(h=>fJ(h))),m(e,["functionDeclarations"],u)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["googleSearch"]);i!=null&&m(e,["googleSearch"],pJ(i));const s=f(t,["googleSearchRetrieval"]);if(s!=null&&m(e,["googleSearchRetrieval"],yJ(s)),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(f(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");f(t,["urlContext"])!=null&&m(e,["urlContext"],vJ());const a=f(t,["computerUse"]);a!=null&&m(e,["computerUse"],xJ(a));const c=f(t,["codeExecution"]);return c!=null&&m(e,["codeExecution"],c),e}function TJ(t){const e={},n=f(t,["mode"]);n!=null&&m(e,["mode"],n);const i=f(t,["allowedFunctionNames"]);return i!=null&&m(e,["allowedFunctionNames"],i),e}function wJ(t){const e={},n=f(t,["latitude"]);n!=null&&m(e,["latitude"],n);const i=f(t,["longitude"]);return i!=null&&m(e,["longitude"],i),e}function bJ(t){const e={},n=f(t,["latLng"]);n!=null&&m(e,["latLng"],wJ(n));const i=f(t,["languageCode"]);return i!=null&&m(e,["languageCode"],i),e}function EJ(t){const e={},n=f(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],TJ(n));const i=f(t,["retrievalConfig"]);return i!=null&&m(e,["retrievalConfig"],bJ(i)),e}function SJ(t){const e={},n=f(t,["voiceName"]);return n!=null&&m(e,["voiceName"],n),e}function WL(t){const e={},n=f(t,["prebuiltVoiceConfig"]);return n!=null&&m(e,["prebuiltVoiceConfig"],SJ(n)),e}function AJ(t){const e={},n=f(t,["speaker"]);n!=null&&m(e,["speaker"],n);const i=f(t,["voiceConfig"]);return i!=null&&m(e,["voiceConfig"],WL(i)),e}function CJ(t){const e={},n=f(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>AJ(s))),m(e,["speakerVoiceConfigs"],i)}return e}function IJ(t){const e={},n=f(t,["voiceConfig"]);n!=null&&m(e,["voiceConfig"],WL(n));const i=f(t,["multiSpeakerVoiceConfig"]);i!=null&&m(e,["multiSpeakerVoiceConfig"],CJ(i));const s=f(t,["languageCode"]);return s!=null&&m(e,["languageCode"],s),e}function RJ(t){const e={},n=f(t,["includeThoughts"]);n!=null&&m(e,["includeThoughts"],n);const i=f(t,["thinkingBudget"]);return i!=null&&m(e,["thinkingBudget"],i),e}function NJ(t,e,n){const i={},s=f(e,["systemInstruction"]);n!==void 0&&s!=null&&m(n,["systemInstruction"],KL(ri(s)));const r=f(e,["temperature"]);r!=null&&m(i,["temperature"],r);const a=f(e,["topP"]);a!=null&&m(i,["topP"],a);const c=f(e,["topK"]);c!=null&&m(i,["topK"],c);const u=f(e,["candidateCount"]);u!=null&&m(i,["candidateCount"],u);const h=f(e,["maxOutputTokens"]);h!=null&&m(i,["maxOutputTokens"],h);const g=f(e,["stopSequences"]);g!=null&&m(i,["stopSequences"],g);const x=f(e,["responseLogprobs"]);x!=null&&m(i,["responseLogprobs"],x);const T=f(e,["logprobs"]);T!=null&&m(i,["logprobs"],T);const b=f(e,["presencePenalty"]);b!=null&&m(i,["presencePenalty"],b);const S=f(e,["frequencyPenalty"]);S!=null&&m(i,["frequencyPenalty"],S);const P=f(e,["seed"]);P!=null&&m(i,["seed"],P);const M=f(e,["responseMimeType"]);M!=null&&m(i,["responseMimeType"],M);const V=f(e,["responseSchema"]);V!=null&&m(i,["responseSchema"],dJ(Fb(V)));const q=f(e,["responseJsonSchema"]);if(q!=null&&m(i,["responseJsonSchema"],q),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const O=f(e,["safetySettings"]);if(n!==void 0&&O!=null){let F=O;Array.isArray(F)&&(F=F.map(G=>hJ(G))),m(n,["safetySettings"],F)}const z=f(e,["tools"]);if(n!==void 0&&z!=null){let F=ld(z);Array.isArray(F)&&(F=F.map(G=>_J(ad(G)))),m(n,["tools"],F)}const j=f(e,["toolConfig"]);if(n!==void 0&&j!=null&&m(n,["toolConfig"],EJ(j)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const W=f(e,["cachedContent"]);n!==void 0&&W!=null&&m(n,["cachedContent"],eo(t,W));const D=f(e,["responseModalities"]);D!=null&&m(i,["responseModalities"],D);const C=f(e,["mediaResolution"]);C!=null&&m(i,["mediaResolution"],C);const R=f(e,["speechConfig"]);if(R!=null&&m(i,["speechConfig"],IJ(Bb(R))),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=f(e,["thinkingConfig"]);return L!=null&&m(i,["thinkingConfig"],RJ(L)),i}function MJ(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["request","model"],Et(t,i));const s=f(e,["contents"]);if(s!=null){let a=ds(s);Array.isArray(a)&&(a=a.map(c=>KL(c))),m(n,["request","contents"],a)}const r=f(e,["config"]);return r!=null&&m(n,["request","generationConfig"],NJ(t,r,n)),n}function PJ(t,e){const n={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=f(e,["fileName"]);i!=null&&m(n,["fileName"],i);const s=f(e,["inlinedRequests"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>MJ(t,a))),m(n,["requests","requests"],r)}return n}function DJ(t,e){const n={},i=f(t,["displayName"]);if(e!==void 0&&i!=null&&m(e,["batch","displayName"],i),f(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function n2(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["_url","model"],Et(t,i));const s=f(e,["src"]);s!=null&&m(n,["batch","inputConfig"],PJ(t,HL(t,s)));const r=f(e,["config"]);return r!=null&&m(n,["config"],DJ(r,n)),n}function kJ(t,e){const n={},i=f(e,["name"]);i!=null&&m(n,["_url","name"],cd(t,i));const s=f(e,["config"]);return s!=null&&m(n,["config"],s),n}function VJ(t,e){const n={},i=f(e,["name"]);i!=null&&m(n,["_url","name"],cd(t,i));const s=f(e,["config"]);return s!=null&&m(n,["config"],s),n}function LJ(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const s=f(t,["pageToken"]);if(e!==void 0&&s!=null&&m(e,["_query","pageToken"],s),f(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function UJ(t){const e={},n=f(t,["config"]);return n!=null&&m(e,["config"],LJ(n,e)),e}function OJ(t,e){const n={},i=f(e,["name"]);i!=null&&m(n,["_url","name"],cd(t,i));const s=f(e,["config"]);return s!=null&&m(n,["config"],s),n}function FJ(t){const e={},n=f(t,["format"]);n!=null&&m(e,["instancesFormat"],n);const i=f(t,["gcsUri"]);i!=null&&m(e,["gcsSource","uris"],i);const s=f(t,["bigqueryUri"]);if(s!=null&&m(e,["bigquerySource","inputUri"],s),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function BJ(t){const e={},n=f(t,["format"]);n!=null&&m(e,["predictionsFormat"],n);const i=f(t,["gcsUri"]);i!=null&&m(e,["gcsDestination","outputUriPrefix"],i);const s=f(t,["bigqueryUri"]);if(s!=null&&m(e,["bigqueryDestination","outputUri"],s),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function qJ(t,e){const n={},i=f(t,["displayName"]);e!==void 0&&i!=null&&m(e,["displayName"],i);const s=f(t,["dest"]);return e!==void 0&&s!=null&&m(e,["outputConfig"],BJ(oJ(s))),n}function jJ(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["model"],Et(t,i));const s=f(e,["src"]);s!=null&&m(n,["inputConfig"],FJ(HL(t,s)));const r=f(e,["config"]);return r!=null&&m(n,["config"],qJ(r,n)),n}function GJ(t,e){const n={},i=f(e,["name"]);i!=null&&m(n,["_url","name"],cd(t,i));const s=f(e,["config"]);return s!=null&&m(n,["config"],s),n}function zJ(t,e){const n={},i=f(e,["name"]);i!=null&&m(n,["_url","name"],cd(t,i));const s=f(e,["config"]);return s!=null&&m(n,["config"],s),n}function HJ(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const s=f(t,["pageToken"]);e!==void 0&&s!=null&&m(e,["_query","pageToken"],s);const r=f(t,["filter"]);return e!==void 0&&r!=null&&m(e,["_query","filter"],r),n}function $J(t){const e={},n=f(t,["config"]);return n!=null&&m(e,["config"],HJ(n,e)),e}function KJ(t,e){const n={},i=f(e,["name"]);i!=null&&m(n,["_url","name"],cd(t,i));const s=f(e,["config"]);return s!=null&&m(n,["config"],s),n}function WJ(t){const e={},n=f(t,["fps"]);n!=null&&m(e,["fps"],n);const i=f(t,["endOffset"]);i!=null&&m(e,["endOffset"],i);const s=f(t,["startOffset"]);return s!=null&&m(e,["startOffset"],s),e}function YJ(t){const e={},n=f(t,["data"]);n!=null&&m(e,["data"],n);const i=f(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function JJ(t){const e={},n=f(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const i=f(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function QJ(t){const e={},n=f(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],WJ(n));const i=f(t,["thought"]);i!=null&&m(e,["thought"],i);const s=f(t,["inlineData"]);s!=null&&m(e,["inlineData"],YJ(s));const r=f(t,["fileData"]);r!=null&&m(e,["fileData"],JJ(r));const a=f(t,["thoughtSignature"]);a!=null&&m(e,["thoughtSignature"],a);const c=f(t,["codeExecutionResult"]);c!=null&&m(e,["codeExecutionResult"],c);const u=f(t,["executableCode"]);u!=null&&m(e,["executableCode"],u);const h=f(t,["functionCall"]);h!=null&&m(e,["functionCall"],h);const g=f(t,["functionResponse"]);g!=null&&m(e,["functionResponse"],g);const x=f(t,["text"]);return x!=null&&m(e,["text"],x),e}function XJ(t){const e={},n=f(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>QJ(r))),m(e,["parts"],s)}const i=f(t,["role"]);return i!=null&&m(e,["role"],i),e}function ZJ(t){const e={},n=f(t,["citationSources"]);return n!=null&&m(e,["citations"],n),e}function eQ(t){const e={},n=f(t,["retrievedUrl"]);n!=null&&m(e,["retrievedUrl"],n);const i=f(t,["urlRetrievalStatus"]);return i!=null&&m(e,["urlRetrievalStatus"],i),e}function tQ(t){const e={},n=f(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>eQ(s))),m(e,["urlMetadata"],i)}return e}function nQ(t){const e={},n=f(t,["content"]);n!=null&&m(e,["content"],XJ(n));const i=f(t,["citationMetadata"]);i!=null&&m(e,["citationMetadata"],ZJ(i));const s=f(t,["tokenCount"]);s!=null&&m(e,["tokenCount"],s);const r=f(t,["finishReason"]);r!=null&&m(e,["finishReason"],r);const a=f(t,["urlContextMetadata"]);a!=null&&m(e,["urlContextMetadata"],tQ(a));const c=f(t,["avgLogprobs"]);c!=null&&m(e,["avgLogprobs"],c);const u=f(t,["groundingMetadata"]);u!=null&&m(e,["groundingMetadata"],u);const h=f(t,["index"]);h!=null&&m(e,["index"],h);const g=f(t,["logprobsResult"]);g!=null&&m(e,["logprobsResult"],g);const x=f(t,["safetyRatings"]);return x!=null&&m(e,["safetyRatings"],x),e}function iQ(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["candidates"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(h=>nQ(h))),m(e,["candidates"],u)}const s=f(t,["modelVersion"]);s!=null&&m(e,["modelVersion"],s);const r=f(t,["promptFeedback"]);r!=null&&m(e,["promptFeedback"],r);const a=f(t,["responseId"]);a!=null&&m(e,["responseId"],a);const c=f(t,["usageMetadata"]);return c!=null&&m(e,["usageMetadata"],c),e}function YL(t){const e={},n=f(t,["details"]);n!=null&&m(e,["details"],n);const i=f(t,["code"]);i!=null&&m(e,["code"],i);const s=f(t,["message"]);return s!=null&&m(e,["message"],s),e}function sQ(t){const e={},n=f(t,["response"]);n!=null&&m(e,["response"],iQ(n));const i=f(t,["error"]);return i!=null&&m(e,["error"],YL(i)),e}function rQ(t){const e={},n=f(t,["responsesFile"]);n!=null&&m(e,["fileName"],n);const i=f(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>sQ(r))),m(e,["inlinedResponses"],s)}return e}function mg(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const i=f(t,["metadata","displayName"]);i!=null&&m(e,["displayName"],i);const s=f(t,["metadata","state"]);s!=null&&m(e,["state"],$L(s));const r=f(t,["metadata","createTime"]);r!=null&&m(e,["createTime"],r);const a=f(t,["metadata","endTime"]);a!=null&&m(e,["endTime"],a);const c=f(t,["metadata","updateTime"]);c!=null&&m(e,["updateTime"],c);const u=f(t,["metadata","model"]);u!=null&&m(e,["model"],u);const h=f(t,["metadata","output"]);return h!=null&&m(e,["dest"],rQ(h)),e}function oQ(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const s=f(t,["operations"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>mg(a))),m(e,["batchJobs"],r)}return e}function aQ(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["name"]);i!=null&&m(e,["name"],i);const s=f(t,["done"]);s!=null&&m(e,["done"],s);const r=f(t,["error"]);return r!=null&&m(e,["error"],YL(r)),e}function JL(t){const e={},n=f(t,["details"]);n!=null&&m(e,["details"],n);const i=f(t,["code"]);i!=null&&m(e,["code"],i);const s=f(t,["message"]);return s!=null&&m(e,["message"],s),e}function lQ(t){const e={},n=f(t,["instancesFormat"]);n!=null&&m(e,["format"],n);const i=f(t,["gcsSource","uris"]);i!=null&&m(e,["gcsUri"],i);const s=f(t,["bigquerySource","inputUri"]);return s!=null&&m(e,["bigqueryUri"],s),e}function cQ(t){const e={},n=f(t,["predictionsFormat"]);n!=null&&m(e,["format"],n);const i=f(t,["gcsDestination","outputUriPrefix"]);i!=null&&m(e,["gcsUri"],i);const s=f(t,["bigqueryDestination","outputUri"]);return s!=null&&m(e,["bigqueryUri"],s),e}function rT(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const i=f(t,["displayName"]);i!=null&&m(e,["displayName"],i);const s=f(t,["state"]);s!=null&&m(e,["state"],$L(s));const r=f(t,["error"]);r!=null&&m(e,["error"],JL(r));const a=f(t,["createTime"]);a!=null&&m(e,["createTime"],a);const c=f(t,["startTime"]);c!=null&&m(e,["startTime"],c);const u=f(t,["endTime"]);u!=null&&m(e,["endTime"],u);const h=f(t,["updateTime"]);h!=null&&m(e,["updateTime"],h);const g=f(t,["model"]);g!=null&&m(e,["model"],g);const x=f(t,["inputConfig"]);x!=null&&m(e,["src"],lQ(x));const T=f(t,["outputConfig"]);return T!=null&&m(e,["dest"],cQ(T)),e}function uQ(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const s=f(t,["batchPredictionJobs"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>rT(a))),m(e,["batchJobs"],r)}return e}function dQ(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["name"]);i!=null&&m(e,["name"],i);const s=f(t,["done"]);s!=null&&m(e,["done"],s);const r=f(t,["error"]);return r!=null&&m(e,["error"],JL(r)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Vl;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Vl||(Vl={}));class cm{constructor(e,n,i,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,s)}init(e,n,i){var s,r;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!i||Object.keys(i).length===0?a={config:{}}:typeof i=="object"?a=Object.assign({},i):a=i,a.config&&(a.config.pageToken=n.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(r=(s=a.config)===null||s===void 0?void 0:s.pageSize)!==null&&r!==void 0?r:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:()=>A(this,null,function*(){if(this.idxInternal>=this.pageLength)if(this.hasNextPage())yield this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}}),return:()=>A(this,null,function*(){return{value:void 0,done:!0}})}}nextPage(){return A(this,null,function*(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=yield this.requestInternal(this.params);return this.initNextPage(e),this.page})}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hQ extends jl{constructor(e){super(),this.apiClient=e,this.create=n=>A(this,null,function*(){var i,s;if(this.apiClient.isVertexAI()){const a=Date.now().toString();if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_${timestampStr}"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_${a}`;else throw new Error("Unsupported source:"+n.src)}else if(Array.isArray(n.src)||typeof n.src!="string"&&n.src.inlinedRequests){let r="",a={};const c=n2(this.apiClient,n);r=Le("{model}:batchGenerateContent",c._url),a=c._query;const g=c.batch.inputConfig.requests,x=g.requests,T=[];for(const S of x){const P=S;if(P.systemInstruction){const M=P.systemInstruction;delete P.systemInstruction;const V=P.request;V.systemInstruction=M,P.request=V}T.push(P)}return g.requests=T,delete c.config,delete c._url,delete c._query,this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(S=>S.json()).then(S=>mg(S))}return yield this.createInternal(n)}),this.list=(...i)=>A(this,[...i],function*(n={}){return new cm(Vl.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),yield this.listInternal(n),n)})}createInternal(e){return A(this,null,function*(){var n,i,s,r;let a,c="",u={};if(this.apiClient.isVertexAI()){const h=jJ(this.apiClient,e);return c=Le("batchPredictionJobs",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>rT(g))}else{const h=n2(this.apiClient,e);return c=Le("{model}:batchGenerateContent",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>mg(g))}})}get(e){return A(this,null,function*(){var n,i,s,r;let a,c="",u={};if(this.apiClient.isVertexAI()){const h=GJ(this.apiClient,e);return c=Le("batchPredictionJobs/{name}",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>rT(g))}else{const h=kJ(this.apiClient,e);return c=Le("batches/{name}",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>mg(g))}})}cancel(e){return A(this,null,function*(){var n,i,s,r;let a="",c={};if(this.apiClient.isVertexAI()){const u=zJ(this.apiClient,e);a=Le("batchPredictionJobs/{name}:cancel",u._url),c=u._query,delete u.config,delete u._url,delete u._query,yield this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const u=VJ(this.apiClient,e);a=Le("batches/{name}:cancel",u._url),c=u._query,delete u.config,delete u._url,delete u._query,yield this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}})}listInternal(e){return A(this,null,function*(){var n,i,s,r;let a,c="",u={};if(this.apiClient.isVertexAI()){const h=$J(e);return c=Le("batchPredictionJobs",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:g.headers},T})),a.then(g=>{const x=uQ(g),T=new XN;return Object.assign(T,x),T})}else{const h=UJ(e);return c=Le("batches",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:g.headers},T})),a.then(g=>{const x=oQ(g),T=new XN;return Object.assign(T,x),T})}})}delete(e){return A(this,null,function*(){var n,i,s,r;let a,c="",u={};if(this.apiClient.isVertexAI()){const h=KJ(this.apiClient,e);return c=Le("batchPredictionJobs/{name}",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:g.headers},T})),a.then(g=>dQ(g))}else{const h=OJ(this.apiClient,e);return c=Le("batches/{name}",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:g.headers},T})),a.then(g=>aQ(g))}})}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fQ(t){const e={},n=f(t,["fps"]);n!=null&&m(e,["fps"],n);const i=f(t,["endOffset"]);i!=null&&m(e,["endOffset"],i);const s=f(t,["startOffset"]);return s!=null&&m(e,["startOffset"],s),e}function mQ(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["data"]);n!=null&&m(e,["data"],n);const i=f(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function pQ(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const i=f(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function gQ(t){const e={},n=f(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],fQ(n));const i=f(t,["thought"]);i!=null&&m(e,["thought"],i);const s=f(t,["inlineData"]);s!=null&&m(e,["inlineData"],mQ(s));const r=f(t,["fileData"]);r!=null&&m(e,["fileData"],pQ(r));const a=f(t,["thoughtSignature"]);a!=null&&m(e,["thoughtSignature"],a);const c=f(t,["codeExecutionResult"]);c!=null&&m(e,["codeExecutionResult"],c);const u=f(t,["executableCode"]);u!=null&&m(e,["executableCode"],u);const h=f(t,["functionCall"]);h!=null&&m(e,["functionCall"],h);const g=f(t,["functionResponse"]);g!=null&&m(e,["functionResponse"],g);const x=f(t,["text"]);return x!=null&&m(e,["text"],x),e}function i2(t){const e={},n=f(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>gQ(r))),m(e,["parts"],s)}const i=f(t,["role"]);return i!=null&&m(e,["role"],i),e}function yQ(t){const e={},n=f(t,["behavior"]);n!=null&&m(e,["behavior"],n);const i=f(t,["description"]);i!=null&&m(e,["description"],i);const s=f(t,["name"]);s!=null&&m(e,["name"],s);const r=f(t,["parameters"]);r!=null&&m(e,["parameters"],r);const a=f(t,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const c=f(t,["response"]);c!=null&&m(e,["response"],c);const u=f(t,["responseJsonSchema"]);return u!=null&&m(e,["responseJsonSchema"],u),e}function vQ(t){const e={},n=f(t,["startTime"]);n!=null&&m(e,["startTime"],n);const i=f(t,["endTime"]);return i!=null&&m(e,["endTime"],i),e}function xQ(t){const e={},n=f(t,["timeRangeFilter"]);if(n!=null&&m(e,["timeRangeFilter"],vQ(n)),f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function _Q(t){const e={},n=f(t,["mode"]);n!=null&&m(e,["mode"],n);const i=f(t,["dynamicThreshold"]);return i!=null&&m(e,["dynamicThreshold"],i),e}function TQ(t){const e={},n=f(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],_Q(n)),e}function wQ(){return{}}function bQ(t){const e={},n=f(t,["environment"]);return n!=null&&m(e,["environment"],n),e}function EQ(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(h=>yQ(h))),m(e,["functionDeclarations"],u)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["googleSearch"]);i!=null&&m(e,["googleSearch"],xQ(i));const s=f(t,["googleSearchRetrieval"]);if(s!=null&&m(e,["googleSearchRetrieval"],TQ(s)),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(f(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");f(t,["urlContext"])!=null&&m(e,["urlContext"],wQ());const a=f(t,["computerUse"]);a!=null&&m(e,["computerUse"],bQ(a));const c=f(t,["codeExecution"]);return c!=null&&m(e,["codeExecution"],c),e}function SQ(t){const e={},n=f(t,["mode"]);n!=null&&m(e,["mode"],n);const i=f(t,["allowedFunctionNames"]);return i!=null&&m(e,["allowedFunctionNames"],i),e}function AQ(t){const e={},n=f(t,["latitude"]);n!=null&&m(e,["latitude"],n);const i=f(t,["longitude"]);return i!=null&&m(e,["longitude"],i),e}function CQ(t){const e={},n=f(t,["latLng"]);n!=null&&m(e,["latLng"],AQ(n));const i=f(t,["languageCode"]);return i!=null&&m(e,["languageCode"],i),e}function IQ(t){const e={},n=f(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],SQ(n));const i=f(t,["retrievalConfig"]);return i!=null&&m(e,["retrievalConfig"],CQ(i)),e}function RQ(t,e){const n={},i=f(t,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const s=f(t,["expireTime"]);e!==void 0&&s!=null&&m(e,["expireTime"],s);const r=f(t,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const a=f(t,["contents"]);if(e!==void 0&&a!=null){let g=ds(a);Array.isArray(g)&&(g=g.map(x=>i2(x))),m(e,["contents"],g)}const c=f(t,["systemInstruction"]);e!==void 0&&c!=null&&m(e,["systemInstruction"],i2(ri(c)));const u=f(t,["tools"]);if(e!==void 0&&u!=null){let g=u;Array.isArray(g)&&(g=g.map(x=>EQ(x))),m(e,["tools"],g)}const h=f(t,["toolConfig"]);if(e!==void 0&&h!=null&&m(e,["toolConfig"],IQ(h)),f(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function NQ(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["model"],VL(t,i));const s=f(e,["config"]);return s!=null&&m(n,["config"],RQ(s,n)),n}function MQ(t,e){const n={},i=f(e,["name"]);i!=null&&m(n,["_url","name"],eo(t,i));const s=f(e,["config"]);return s!=null&&m(n,["config"],s),n}function PQ(t,e){const n={},i=f(e,["name"]);i!=null&&m(n,["_url","name"],eo(t,i));const s=f(e,["config"]);return s!=null&&m(n,["config"],s),n}function DQ(t,e){const n={},i=f(t,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const s=f(t,["expireTime"]);return e!==void 0&&s!=null&&m(e,["expireTime"],s),n}function kQ(t,e){const n={},i=f(e,["name"]);i!=null&&m(n,["_url","name"],eo(t,i));const s=f(e,["config"]);return s!=null&&m(n,["config"],DQ(s,n)),n}function VQ(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const s=f(t,["pageToken"]);return e!==void 0&&s!=null&&m(e,["_query","pageToken"],s),n}function LQ(t){const e={},n=f(t,["config"]);return n!=null&&m(e,["config"],VQ(n,e)),e}function UQ(t){const e={},n=f(t,["fps"]);n!=null&&m(e,["fps"],n);const i=f(t,["endOffset"]);i!=null&&m(e,["endOffset"],i);const s=f(t,["startOffset"]);return s!=null&&m(e,["startOffset"],s),e}function OQ(t){const e={},n=f(t,["displayName"]);n!=null&&m(e,["displayName"],n);const i=f(t,["data"]);i!=null&&m(e,["data"],i);const s=f(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function FQ(t){const e={},n=f(t,["displayName"]);n!=null&&m(e,["displayName"],n);const i=f(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const s=f(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function BQ(t){const e={},n=f(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],UQ(n));const i=f(t,["thought"]);i!=null&&m(e,["thought"],i);const s=f(t,["inlineData"]);s!=null&&m(e,["inlineData"],OQ(s));const r=f(t,["fileData"]);r!=null&&m(e,["fileData"],FQ(r));const a=f(t,["thoughtSignature"]);a!=null&&m(e,["thoughtSignature"],a);const c=f(t,["codeExecutionResult"]);c!=null&&m(e,["codeExecutionResult"],c);const u=f(t,["executableCode"]);u!=null&&m(e,["executableCode"],u);const h=f(t,["functionCall"]);h!=null&&m(e,["functionCall"],h);const g=f(t,["functionResponse"]);g!=null&&m(e,["functionResponse"],g);const x=f(t,["text"]);return x!=null&&m(e,["text"],x),e}function s2(t){const e={},n=f(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>BQ(r))),m(e,["parts"],s)}const i=f(t,["role"]);return i!=null&&m(e,["role"],i),e}function qQ(t){const e={};if(f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=f(t,["description"]);n!=null&&m(e,["description"],n);const i=f(t,["name"]);i!=null&&m(e,["name"],i);const s=f(t,["parameters"]);s!=null&&m(e,["parameters"],s);const r=f(t,["parametersJsonSchema"]);r!=null&&m(e,["parametersJsonSchema"],r);const a=f(t,["response"]);a!=null&&m(e,["response"],a);const c=f(t,["responseJsonSchema"]);return c!=null&&m(e,["responseJsonSchema"],c),e}function jQ(t){const e={},n=f(t,["startTime"]);n!=null&&m(e,["startTime"],n);const i=f(t,["endTime"]);return i!=null&&m(e,["endTime"],i),e}function GQ(t){const e={},n=f(t,["timeRangeFilter"]);n!=null&&m(e,["timeRangeFilter"],jQ(n));const i=f(t,["excludeDomains"]);return i!=null&&m(e,["excludeDomains"],i),e}function zQ(t){const e={},n=f(t,["mode"]);n!=null&&m(e,["mode"],n);const i=f(t,["dynamicThreshold"]);return i!=null&&m(e,["dynamicThreshold"],i),e}function HQ(t){const e={},n=f(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],zQ(n)),e}function $Q(t){const e={},n=f(t,["excludeDomains"]);return n!=null&&m(e,["excludeDomains"],n),e}function KQ(t){const e={},n=f(t,["apiKeyString"]);return n!=null&&m(e,["apiKeyString"],n),e}function WQ(t){const e={},n=f(t,["apiKeyConfig"]);n!=null&&m(e,["apiKeyConfig"],KQ(n));const i=f(t,["authType"]);i!=null&&m(e,["authType"],i);const s=f(t,["googleServiceAccountConfig"]);s!=null&&m(e,["googleServiceAccountConfig"],s);const r=f(t,["httpBasicAuthConfig"]);r!=null&&m(e,["httpBasicAuthConfig"],r);const a=f(t,["oauthConfig"]);a!=null&&m(e,["oauthConfig"],a);const c=f(t,["oidcConfig"]);return c!=null&&m(e,["oidcConfig"],c),e}function YQ(t){const e={},n=f(t,["authConfig"]);return n!=null&&m(e,["authConfig"],WQ(n)),e}function JQ(){return{}}function QQ(t){const e={},n=f(t,["environment"]);return n!=null&&m(e,["environment"],n),e}function XQ(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let x=n;Array.isArray(x)&&(x=x.map(T=>qQ(T))),m(e,["functionDeclarations"],x)}const i=f(t,["retrieval"]);i!=null&&m(e,["retrieval"],i);const s=f(t,["googleSearch"]);s!=null&&m(e,["googleSearch"],GQ(s));const r=f(t,["googleSearchRetrieval"]);r!=null&&m(e,["googleSearchRetrieval"],HQ(r));const a=f(t,["enterpriseWebSearch"]);a!=null&&m(e,["enterpriseWebSearch"],$Q(a));const c=f(t,["googleMaps"]);c!=null&&m(e,["googleMaps"],YQ(c)),f(t,["urlContext"])!=null&&m(e,["urlContext"],JQ());const h=f(t,["computerUse"]);h!=null&&m(e,["computerUse"],QQ(h));const g=f(t,["codeExecution"]);return g!=null&&m(e,["codeExecution"],g),e}function ZQ(t){const e={},n=f(t,["mode"]);n!=null&&m(e,["mode"],n);const i=f(t,["allowedFunctionNames"]);return i!=null&&m(e,["allowedFunctionNames"],i),e}function eX(t){const e={},n=f(t,["latitude"]);n!=null&&m(e,["latitude"],n);const i=f(t,["longitude"]);return i!=null&&m(e,["longitude"],i),e}function tX(t){const e={},n=f(t,["latLng"]);n!=null&&m(e,["latLng"],eX(n));const i=f(t,["languageCode"]);return i!=null&&m(e,["languageCode"],i),e}function nX(t){const e={},n=f(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],ZQ(n));const i=f(t,["retrievalConfig"]);return i!=null&&m(e,["retrievalConfig"],tX(i)),e}function iX(t,e){const n={},i=f(t,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const s=f(t,["expireTime"]);e!==void 0&&s!=null&&m(e,["expireTime"],s);const r=f(t,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const a=f(t,["contents"]);if(e!==void 0&&a!=null){let x=ds(a);Array.isArray(x)&&(x=x.map(T=>s2(T))),m(e,["contents"],x)}const c=f(t,["systemInstruction"]);e!==void 0&&c!=null&&m(e,["systemInstruction"],s2(ri(c)));const u=f(t,["tools"]);if(e!==void 0&&u!=null){let x=u;Array.isArray(x)&&(x=x.map(T=>XQ(T))),m(e,["tools"],x)}const h=f(t,["toolConfig"]);e!==void 0&&h!=null&&m(e,["toolConfig"],nX(h));const g=f(t,["kmsKeyName"]);return e!==void 0&&g!=null&&m(e,["encryption_spec","kmsKeyName"],g),n}function sX(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["model"],VL(t,i));const s=f(e,["config"]);return s!=null&&m(n,["config"],iX(s,n)),n}function rX(t,e){const n={},i=f(e,["name"]);i!=null&&m(n,["_url","name"],eo(t,i));const s=f(e,["config"]);return s!=null&&m(n,["config"],s),n}function oX(t,e){const n={},i=f(e,["name"]);i!=null&&m(n,["_url","name"],eo(t,i));const s=f(e,["config"]);return s!=null&&m(n,["config"],s),n}function aX(t,e){const n={},i=f(t,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const s=f(t,["expireTime"]);return e!==void 0&&s!=null&&m(e,["expireTime"],s),n}function lX(t,e){const n={},i=f(e,["name"]);i!=null&&m(n,["_url","name"],eo(t,i));const s=f(e,["config"]);return s!=null&&m(n,["config"],aX(s,n)),n}function cX(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const s=f(t,["pageToken"]);return e!==void 0&&s!=null&&m(e,["_query","pageToken"],s),n}function uX(t){const e={},n=f(t,["config"]);return n!=null&&m(e,["config"],cX(n,e)),e}function pg(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const i=f(t,["displayName"]);i!=null&&m(e,["displayName"],i);const s=f(t,["model"]);s!=null&&m(e,["model"],s);const r=f(t,["createTime"]);r!=null&&m(e,["createTime"],r);const a=f(t,["updateTime"]);a!=null&&m(e,["updateTime"],a);const c=f(t,["expireTime"]);c!=null&&m(e,["expireTime"],c);const u=f(t,["usageMetadata"]);return u!=null&&m(e,["usageMetadata"],u),e}function dX(){return{}}function hX(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const s=f(t,["cachedContents"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>pg(a))),m(e,["cachedContents"],r)}return e}function gg(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const i=f(t,["displayName"]);i!=null&&m(e,["displayName"],i);const s=f(t,["model"]);s!=null&&m(e,["model"],s);const r=f(t,["createTime"]);r!=null&&m(e,["createTime"],r);const a=f(t,["updateTime"]);a!=null&&m(e,["updateTime"],a);const c=f(t,["expireTime"]);c!=null&&m(e,["expireTime"],c);const u=f(t,["usageMetadata"]);return u!=null&&m(e,["usageMetadata"],u),e}function fX(){return{}}function mX(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const s=f(t,["cachedContents"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>gg(a))),m(e,["cachedContents"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pX extends jl{constructor(e){super(),this.apiClient=e,this.list=(...i)=>A(this,[...i],function*(n={}){return new cm(Vl.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),yield this.listInternal(n),n)})}create(e){return A(this,null,function*(){var n,i,s,r;let a,c="",u={};if(this.apiClient.isVertexAI()){const h=sX(this.apiClient,e);return c=Le("cachedContents",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>gg(g))}else{const h=NQ(this.apiClient,e);return c=Le("cachedContents",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>pg(g))}})}get(e){return A(this,null,function*(){var n,i,s,r;let a,c="",u={};if(this.apiClient.isVertexAI()){const h=rX(this.apiClient,e);return c=Le("{name}",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>gg(g))}else{const h=MQ(this.apiClient,e);return c=Le("{name}",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>pg(g))}})}delete(e){return A(this,null,function*(){var n,i,s,r;let a,c="",u={};if(this.apiClient.isVertexAI()){const h=oX(this.apiClient,e);return c=Le("{name}",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(()=>{const g=fX(),x=new JN;return Object.assign(x,g),x})}else{const h=PQ(this.apiClient,e);return c=Le("{name}",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(()=>{const g=dX(),x=new JN;return Object.assign(x,g),x})}})}update(e){return A(this,null,function*(){var n,i,s,r;let a,c="",u={};if(this.apiClient.isVertexAI()){const h=lX(this.apiClient,e);return c=Le("{name}",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>gg(g))}else{const h=kQ(this.apiClient,e);return c=Le("{name}",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>pg(g))}})}listInternal(e){return A(this,null,function*(){var n,i,s,r;let a,c="",u={};if(this.apiClient.isVertexAI()){const h=uX(e);return c=Le("cachedContents",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:g.headers},T})),a.then(g=>{const x=mX(g),T=new QN;return Object.assign(T,x),T})}else{const h=LQ(e);return c=Le("cachedContents",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:g.headers},T})),a.then(g=>{const x=hX(g),T=new QN;return Object.assign(T,x),T})}})}}function r2(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function qt(t){return this instanceof qt?(this.v=t,this):new qt(t)}function pu(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),s,r=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",a),s[Symbol.asyncIterator]=function(){return this},s;function a(b){return function(S){return Promise.resolve(S).then(b,x)}}function c(b,S){i[b]&&(s[b]=function(P){return new Promise(function(M,V){r.push([b,P,M,V])>1||u(b,P)})},S&&(s[b]=S(s[b])))}function u(b,S){try{h(i[b](S))}catch(P){T(r[0][3],P)}}function h(b){b.value instanceof qt?Promise.resolve(b.value.v).then(g,x):T(r[0][2],b)}function g(b){u("next",b)}function x(b){u("throw",b)}function T(b,S){b(S),r.shift(),r.length&&u(r[0][0],r[0][1])}}function af(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof r2=="function"?r2(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(r){n[r]=t[r]&&function(a){return new Promise(function(c,u){a=t[r](a),s(c,u,a.done,a.value)})}}function s(r,a,c,u){Promise.resolve(u).then(function(h){r({value:h,done:c})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gX(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:QL(n)}function QL(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function yX(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function o2(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const s=[];let r=!0;for(;i<n&&t[i].role==="model";)s.push(t[i]),r&&!QL(t[i])&&(r=!1),i++;r?e.push(...s):e.pop()}return e}class vX{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new xX(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class xX{constructor(e,n,i,s={},r=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=s,this.history=r,this.sendPromise=Promise.resolve(),yX(r)}sendMessage(e){return A(this,null,function*(){var n;yield this.sendPromise;const i=ri(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=A(this,null,function*(){var r,a,c;const u=yield s,h=(a=(r=u.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content,g=u.automaticFunctionCallingHistory,x=this.getHistory(!0).length;let T=[];g!=null&&(T=(c=g.slice(x))!==null&&c!==void 0?c:[]);const b=h?[h]:[];this.recordHistory(i,b,T)}),yield this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s})}sendMessageStream(e){return A(this,null,function*(){var n;yield this.sendPromise;const i=ri(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const r=yield s;return this.processStreamResponse(r,i)})}getHistory(e=!1){const n=e?o2(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,s;return pu(this,arguments,function*(){var a,c,u,h;const g=[];try{for(var x=!0,T=af(e),b;b=yield qt(T.next()),a=b.done,!a;x=!0){h=b.value,x=!1;const S=h;if(gX(S)){const P=(s=(i=S.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content;P!==void 0&&g.push(P)}yield yield qt(S)}}catch(S){c={error:S}}finally{try{!x&&!a&&(u=T.return)&&(yield qt(u.call(T)))}finally{if(c)throw c.error}}this.recordHistory(n,g)})}recordHistory(e,n,i){let s=[];n.length>0&&n.every(r=>r.role!==void 0)?s=n:s.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...o2(i)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gy extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Gy.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _X(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const s=f(t,["pageToken"]);return e!==void 0&&s!=null&&m(e,["_query","pageToken"],s),n}function TX(t){const e={},n=f(t,["config"]);return n!=null&&m(e,["config"],_X(n,e)),e}function wX(t){const e={},n=f(t,["details"]);n!=null&&m(e,["details"],n);const i=f(t,["message"]);i!=null&&m(e,["message"],i);const s=f(t,["code"]);return s!=null&&m(e,["code"],s),e}function bX(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const i=f(t,["displayName"]);i!=null&&m(e,["displayName"],i);const s=f(t,["mimeType"]);s!=null&&m(e,["mimeType"],s);const r=f(t,["sizeBytes"]);r!=null&&m(e,["sizeBytes"],r);const a=f(t,["createTime"]);a!=null&&m(e,["createTime"],a);const c=f(t,["expirationTime"]);c!=null&&m(e,["expirationTime"],c);const u=f(t,["updateTime"]);u!=null&&m(e,["updateTime"],u);const h=f(t,["sha256Hash"]);h!=null&&m(e,["sha256Hash"],h);const g=f(t,["uri"]);g!=null&&m(e,["uri"],g);const x=f(t,["downloadUri"]);x!=null&&m(e,["downloadUri"],x);const T=f(t,["state"]);T!=null&&m(e,["state"],T);const b=f(t,["source"]);b!=null&&m(e,["source"],b);const S=f(t,["videoMetadata"]);S!=null&&m(e,["videoMetadata"],S);const P=f(t,["error"]);return P!=null&&m(e,["error"],wX(P)),e}function EX(t){const e={},n=f(t,["file"]);n!=null&&m(e,["file"],bX(n));const i=f(t,["config"]);return i!=null&&m(e,["config"],i),e}function SX(t){const e={},n=f(t,["name"]);n!=null&&m(e,["_url","file"],jL(n));const i=f(t,["config"]);return i!=null&&m(e,["config"],i),e}function AX(t){const e={},n=f(t,["name"]);n!=null&&m(e,["_url","file"],jL(n));const i=f(t,["config"]);return i!=null&&m(e,["config"],i),e}function CX(t){const e={},n=f(t,["details"]);n!=null&&m(e,["details"],n);const i=f(t,["message"]);i!=null&&m(e,["message"],i);const s=f(t,["code"]);return s!=null&&m(e,["code"],s),e}function oT(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const i=f(t,["displayName"]);i!=null&&m(e,["displayName"],i);const s=f(t,["mimeType"]);s!=null&&m(e,["mimeType"],s);const r=f(t,["sizeBytes"]);r!=null&&m(e,["sizeBytes"],r);const a=f(t,["createTime"]);a!=null&&m(e,["createTime"],a);const c=f(t,["expirationTime"]);c!=null&&m(e,["expirationTime"],c);const u=f(t,["updateTime"]);u!=null&&m(e,["updateTime"],u);const h=f(t,["sha256Hash"]);h!=null&&m(e,["sha256Hash"],h);const g=f(t,["uri"]);g!=null&&m(e,["uri"],g);const x=f(t,["downloadUri"]);x!=null&&m(e,["downloadUri"],x);const T=f(t,["state"]);T!=null&&m(e,["state"],T);const b=f(t,["source"]);b!=null&&m(e,["source"],b);const S=f(t,["videoMetadata"]);S!=null&&m(e,["videoMetadata"],S);const P=f(t,["error"]);return P!=null&&m(e,["error"],CX(P)),e}function IX(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const s=f(t,["files"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>oT(a))),m(e,["files"],r)}return e}function RX(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function NX(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class MX extends jl{constructor(e){super(),this.apiClient=e,this.list=(...i)=>A(this,[...i],function*(n={}){return new cm(Vl.PAGED_ITEM_FILES,s=>this.listInternal(s),yield this.listInternal(n),n)})}upload(e){return A(this,null,function*(){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>oT(n))})}download(e){return A(this,null,function*(){yield this.apiClient.downloadFile(e)})}listInternal(e){return A(this,null,function*(){var n,i;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=TX(e);return r=Le("files",c._url),a=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:u.headers},g})),s.then(u=>{const h=IX(u),g=new KY;return Object.assign(g,h),g})}})}createInternal(e){return A(this,null,function*(){var n,i;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=EX(e);return r=Le("upload/v1beta/files",c._url),a=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),s.then(u=>{const h=RX(u),g=new WY;return Object.assign(g,h),g})}})}get(e){return A(this,null,function*(){var n,i;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=SX(e);return r=Le("files/{file}",c._url),a=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),s.then(u=>oT(u))}})}delete(e){return A(this,null,function*(){var n,i;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=AX(e);return r=Le("files/{file}",c._url),a=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),s.then(()=>{const u=NX(),h=new YY;return Object.assign(h,u),h})}})}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PX(t){const e={},n=f(t,["voiceName"]);return n!=null&&m(e,["voiceName"],n),e}function XL(t){const e={},n=f(t,["prebuiltVoiceConfig"]);return n!=null&&m(e,["prebuiltVoiceConfig"],PX(n)),e}function DX(t){const e={},n=f(t,["speaker"]);n!=null&&m(e,["speaker"],n);const i=f(t,["voiceConfig"]);return i!=null&&m(e,["voiceConfig"],XL(i)),e}function kX(t){const e={},n=f(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>DX(s))),m(e,["speakerVoiceConfigs"],i)}return e}function VX(t){const e={},n=f(t,["voiceConfig"]);n!=null&&m(e,["voiceConfig"],XL(n));const i=f(t,["multiSpeakerVoiceConfig"]);i!=null&&m(e,["multiSpeakerVoiceConfig"],kX(i));const s=f(t,["languageCode"]);return s!=null&&m(e,["languageCode"],s),e}function LX(t){const e={},n=f(t,["fps"]);n!=null&&m(e,["fps"],n);const i=f(t,["endOffset"]);i!=null&&m(e,["endOffset"],i);const s=f(t,["startOffset"]);return s!=null&&m(e,["startOffset"],s),e}function UX(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["data"]);n!=null&&m(e,["data"],n);const i=f(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function OX(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const i=f(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function FX(t){const e={},n=f(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],LX(n));const i=f(t,["thought"]);i!=null&&m(e,["thought"],i);const s=f(t,["inlineData"]);s!=null&&m(e,["inlineData"],UX(s));const r=f(t,["fileData"]);r!=null&&m(e,["fileData"],OX(r));const a=f(t,["thoughtSignature"]);a!=null&&m(e,["thoughtSignature"],a);const c=f(t,["codeExecutionResult"]);c!=null&&m(e,["codeExecutionResult"],c);const u=f(t,["executableCode"]);u!=null&&m(e,["executableCode"],u);const h=f(t,["functionCall"]);h!=null&&m(e,["functionCall"],h);const g=f(t,["functionResponse"]);g!=null&&m(e,["functionResponse"],g);const x=f(t,["text"]);return x!=null&&m(e,["text"],x),e}function BX(t){const e={},n=f(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>FX(r))),m(e,["parts"],s)}const i=f(t,["role"]);return i!=null&&m(e,["role"],i),e}function qX(t){const e={},n=f(t,["behavior"]);n!=null&&m(e,["behavior"],n);const i=f(t,["description"]);i!=null&&m(e,["description"],i);const s=f(t,["name"]);s!=null&&m(e,["name"],s);const r=f(t,["parameters"]);r!=null&&m(e,["parameters"],r);const a=f(t,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const c=f(t,["response"]);c!=null&&m(e,["response"],c);const u=f(t,["responseJsonSchema"]);return u!=null&&m(e,["responseJsonSchema"],u),e}function jX(t){const e={},n=f(t,["startTime"]);n!=null&&m(e,["startTime"],n);const i=f(t,["endTime"]);return i!=null&&m(e,["endTime"],i),e}function GX(t){const e={},n=f(t,["timeRangeFilter"]);if(n!=null&&m(e,["timeRangeFilter"],jX(n)),f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function zX(t){const e={},n=f(t,["mode"]);n!=null&&m(e,["mode"],n);const i=f(t,["dynamicThreshold"]);return i!=null&&m(e,["dynamicThreshold"],i),e}function HX(t){const e={},n=f(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],zX(n)),e}function $X(){return{}}function KX(t){const e={},n=f(t,["environment"]);return n!=null&&m(e,["environment"],n),e}function WX(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(h=>qX(h))),m(e,["functionDeclarations"],u)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["googleSearch"]);i!=null&&m(e,["googleSearch"],GX(i));const s=f(t,["googleSearchRetrieval"]);if(s!=null&&m(e,["googleSearchRetrieval"],HX(s)),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(f(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");f(t,["urlContext"])!=null&&m(e,["urlContext"],$X());const a=f(t,["computerUse"]);a!=null&&m(e,["computerUse"],KX(a));const c=f(t,["codeExecution"]);return c!=null&&m(e,["codeExecution"],c),e}function YX(t){const e={},n=f(t,["handle"]);if(n!=null&&m(e,["handle"],n),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function a2(){return{}}function JX(t){const e={},n=f(t,["disabled"]);n!=null&&m(e,["disabled"],n);const i=f(t,["startOfSpeechSensitivity"]);i!=null&&m(e,["startOfSpeechSensitivity"],i);const s=f(t,["endOfSpeechSensitivity"]);s!=null&&m(e,["endOfSpeechSensitivity"],s);const r=f(t,["prefixPaddingMs"]);r!=null&&m(e,["prefixPaddingMs"],r);const a=f(t,["silenceDurationMs"]);return a!=null&&m(e,["silenceDurationMs"],a),e}function QX(t){const e={},n=f(t,["automaticActivityDetection"]);n!=null&&m(e,["automaticActivityDetection"],JX(n));const i=f(t,["activityHandling"]);i!=null&&m(e,["activityHandling"],i);const s=f(t,["turnCoverage"]);return s!=null&&m(e,["turnCoverage"],s),e}function XX(t){const e={},n=f(t,["targetTokens"]);return n!=null&&m(e,["targetTokens"],n),e}function ZX(t){const e={},n=f(t,["triggerTokens"]);n!=null&&m(e,["triggerTokens"],n);const i=f(t,["slidingWindow"]);return i!=null&&m(e,["slidingWindow"],XX(i)),e}function eZ(t){const e={},n=f(t,["proactiveAudio"]);return n!=null&&m(e,["proactiveAudio"],n),e}function tZ(t,e){const n={},i=f(t,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],i);const s=f(t,["responseModalities"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","responseModalities"],s);const r=f(t,["temperature"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig","temperature"],r);const a=f(t,["topP"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","topP"],a);const c=f(t,["topK"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","topK"],c);const u=f(t,["maxOutputTokens"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","maxOutputTokens"],u);const h=f(t,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const g=f(t,["seed"]);e!==void 0&&g!=null&&m(e,["setup","generationConfig","seed"],g);const x=f(t,["speechConfig"]);e!==void 0&&x!=null&&m(e,["setup","generationConfig","speechConfig"],VX(qb(x)));const T=f(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],T);const b=f(t,["systemInstruction"]);e!==void 0&&b!=null&&m(e,["setup","systemInstruction"],BX(ri(b)));const S=f(t,["tools"]);if(e!==void 0&&S!=null){let j=ld(S);Array.isArray(j)&&(j=j.map(W=>WX(ad(W)))),m(e,["setup","tools"],j)}const P=f(t,["sessionResumption"]);e!==void 0&&P!=null&&m(e,["setup","sessionResumption"],YX(P));const M=f(t,["inputAudioTranscription"]);e!==void 0&&M!=null&&m(e,["setup","inputAudioTranscription"],a2());const V=f(t,["outputAudioTranscription"]);e!==void 0&&V!=null&&m(e,["setup","outputAudioTranscription"],a2());const q=f(t,["realtimeInputConfig"]);e!==void 0&&q!=null&&m(e,["setup","realtimeInputConfig"],QX(q));const O=f(t,["contextWindowCompression"]);e!==void 0&&O!=null&&m(e,["setup","contextWindowCompression"],ZX(O));const z=f(t,["proactivity"]);return e!==void 0&&z!=null&&m(e,["setup","proactivity"],eZ(z)),n}function nZ(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["setup","model"],Et(t,i));const s=f(e,["config"]);return s!=null&&m(n,["config"],tZ(s,n)),n}function iZ(){return{}}function sZ(){return{}}function rZ(t){const e={},n=f(t,["media"]);n!=null&&m(e,["mediaChunks"],LL(n));const i=f(t,["audio"]);i!=null&&m(e,["audio"],OL(i));const s=f(t,["audioStreamEnd"]);s!=null&&m(e,["audioStreamEnd"],s);const r=f(t,["video"]);r!=null&&m(e,["video"],UL(r));const a=f(t,["text"]);return a!=null&&m(e,["text"],a),f(t,["activityStart"])!=null&&m(e,["activityStart"],iZ()),f(t,["activityEnd"])!=null&&m(e,["activityEnd"],sZ()),e}function ZL(t){const e={},n=f(t,["text"]);n!=null&&m(e,["text"],n);const i=f(t,["weight"]);return i!=null&&m(e,["weight"],i),e}function oZ(t){const e={},n=f(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>ZL(s))),m(e,["weightedPrompts"],i)}return e}function e4(t){const e={},n=f(t,["temperature"]);n!=null&&m(e,["temperature"],n);const i=f(t,["topK"]);i!=null&&m(e,["topK"],i);const s=f(t,["seed"]);s!=null&&m(e,["seed"],s);const r=f(t,["guidance"]);r!=null&&m(e,["guidance"],r);const a=f(t,["bpm"]);a!=null&&m(e,["bpm"],a);const c=f(t,["density"]);c!=null&&m(e,["density"],c);const u=f(t,["brightness"]);u!=null&&m(e,["brightness"],u);const h=f(t,["scale"]);h!=null&&m(e,["scale"],h);const g=f(t,["muteBass"]);g!=null&&m(e,["muteBass"],g);const x=f(t,["muteDrums"]);x!=null&&m(e,["muteDrums"],x);const T=f(t,["onlyBassAndDrums"]);T!=null&&m(e,["onlyBassAndDrums"],T);const b=f(t,["musicGenerationMode"]);return b!=null&&m(e,["musicGenerationMode"],b),e}function aZ(t){const e={},n=f(t,["musicGenerationConfig"]);return n!=null&&m(e,["musicGenerationConfig"],e4(n)),e}function t4(t){const e={},n=f(t,["model"]);return n!=null&&m(e,["model"],n),e}function n4(t){const e={},n=f(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>ZL(s))),m(e,["weightedPrompts"],i)}return e}function aT(t){const e={},n=f(t,["setup"]);n!=null&&m(e,["setup"],t4(n));const i=f(t,["clientContent"]);i!=null&&m(e,["clientContent"],n4(i));const s=f(t,["musicGenerationConfig"]);s!=null&&m(e,["musicGenerationConfig"],e4(s));const r=f(t,["playbackControl"]);return r!=null&&m(e,["playbackControl"],r),e}function lZ(t){const e={},n=f(t,["voiceName"]);return n!=null&&m(e,["voiceName"],n),e}function cZ(t){const e={},n=f(t,["prebuiltVoiceConfig"]);return n!=null&&m(e,["prebuiltVoiceConfig"],lZ(n)),e}function uZ(t){const e={},n=f(t,["voiceConfig"]);if(n!=null&&m(e,["voiceConfig"],cZ(n)),f(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=f(t,["languageCode"]);return i!=null&&m(e,["languageCode"],i),e}function dZ(t){const e={},n=f(t,["fps"]);n!=null&&m(e,["fps"],n);const i=f(t,["endOffset"]);i!=null&&m(e,["endOffset"],i);const s=f(t,["startOffset"]);return s!=null&&m(e,["startOffset"],s),e}function hZ(t){const e={},n=f(t,["displayName"]);n!=null&&m(e,["displayName"],n);const i=f(t,["data"]);i!=null&&m(e,["data"],i);const s=f(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function fZ(t){const e={},n=f(t,["displayName"]);n!=null&&m(e,["displayName"],n);const i=f(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const s=f(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function mZ(t){const e={},n=f(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],dZ(n));const i=f(t,["thought"]);i!=null&&m(e,["thought"],i);const s=f(t,["inlineData"]);s!=null&&m(e,["inlineData"],hZ(s));const r=f(t,["fileData"]);r!=null&&m(e,["fileData"],fZ(r));const a=f(t,["thoughtSignature"]);a!=null&&m(e,["thoughtSignature"],a);const c=f(t,["codeExecutionResult"]);c!=null&&m(e,["codeExecutionResult"],c);const u=f(t,["executableCode"]);u!=null&&m(e,["executableCode"],u);const h=f(t,["functionCall"]);h!=null&&m(e,["functionCall"],h);const g=f(t,["functionResponse"]);g!=null&&m(e,["functionResponse"],g);const x=f(t,["text"]);return x!=null&&m(e,["text"],x),e}function pZ(t){const e={},n=f(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>mZ(r))),m(e,["parts"],s)}const i=f(t,["role"]);return i!=null&&m(e,["role"],i),e}function gZ(t){const e={};if(f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=f(t,["description"]);n!=null&&m(e,["description"],n);const i=f(t,["name"]);i!=null&&m(e,["name"],i);const s=f(t,["parameters"]);s!=null&&m(e,["parameters"],s);const r=f(t,["parametersJsonSchema"]);r!=null&&m(e,["parametersJsonSchema"],r);const a=f(t,["response"]);a!=null&&m(e,["response"],a);const c=f(t,["responseJsonSchema"]);return c!=null&&m(e,["responseJsonSchema"],c),e}function yZ(t){const e={},n=f(t,["startTime"]);n!=null&&m(e,["startTime"],n);const i=f(t,["endTime"]);return i!=null&&m(e,["endTime"],i),e}function vZ(t){const e={},n=f(t,["timeRangeFilter"]);n!=null&&m(e,["timeRangeFilter"],yZ(n));const i=f(t,["excludeDomains"]);return i!=null&&m(e,["excludeDomains"],i),e}function xZ(t){const e={},n=f(t,["mode"]);n!=null&&m(e,["mode"],n);const i=f(t,["dynamicThreshold"]);return i!=null&&m(e,["dynamicThreshold"],i),e}function _Z(t){const e={},n=f(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],xZ(n)),e}function TZ(t){const e={},n=f(t,["excludeDomains"]);return n!=null&&m(e,["excludeDomains"],n),e}function wZ(t){const e={},n=f(t,["apiKeyString"]);return n!=null&&m(e,["apiKeyString"],n),e}function bZ(t){const e={},n=f(t,["apiKeyConfig"]);n!=null&&m(e,["apiKeyConfig"],wZ(n));const i=f(t,["authType"]);i!=null&&m(e,["authType"],i);const s=f(t,["googleServiceAccountConfig"]);s!=null&&m(e,["googleServiceAccountConfig"],s);const r=f(t,["httpBasicAuthConfig"]);r!=null&&m(e,["httpBasicAuthConfig"],r);const a=f(t,["oauthConfig"]);a!=null&&m(e,["oauthConfig"],a);const c=f(t,["oidcConfig"]);return c!=null&&m(e,["oidcConfig"],c),e}function EZ(t){const e={},n=f(t,["authConfig"]);return n!=null&&m(e,["authConfig"],bZ(n)),e}function SZ(){return{}}function AZ(t){const e={},n=f(t,["environment"]);return n!=null&&m(e,["environment"],n),e}function CZ(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let x=n;Array.isArray(x)&&(x=x.map(T=>gZ(T))),m(e,["functionDeclarations"],x)}const i=f(t,["retrieval"]);i!=null&&m(e,["retrieval"],i);const s=f(t,["googleSearch"]);s!=null&&m(e,["googleSearch"],vZ(s));const r=f(t,["googleSearchRetrieval"]);r!=null&&m(e,["googleSearchRetrieval"],_Z(r));const a=f(t,["enterpriseWebSearch"]);a!=null&&m(e,["enterpriseWebSearch"],TZ(a));const c=f(t,["googleMaps"]);c!=null&&m(e,["googleMaps"],EZ(c)),f(t,["urlContext"])!=null&&m(e,["urlContext"],SZ());const h=f(t,["computerUse"]);h!=null&&m(e,["computerUse"],AZ(h));const g=f(t,["codeExecution"]);return g!=null&&m(e,["codeExecution"],g),e}function IZ(t){const e={},n=f(t,["handle"]);n!=null&&m(e,["handle"],n);const i=f(t,["transparent"]);return i!=null&&m(e,["transparent"],i),e}function l2(){return{}}function RZ(t){const e={},n=f(t,["disabled"]);n!=null&&m(e,["disabled"],n);const i=f(t,["startOfSpeechSensitivity"]);i!=null&&m(e,["startOfSpeechSensitivity"],i);const s=f(t,["endOfSpeechSensitivity"]);s!=null&&m(e,["endOfSpeechSensitivity"],s);const r=f(t,["prefixPaddingMs"]);r!=null&&m(e,["prefixPaddingMs"],r);const a=f(t,["silenceDurationMs"]);return a!=null&&m(e,["silenceDurationMs"],a),e}function NZ(t){const e={},n=f(t,["automaticActivityDetection"]);n!=null&&m(e,["automaticActivityDetection"],RZ(n));const i=f(t,["activityHandling"]);i!=null&&m(e,["activityHandling"],i);const s=f(t,["turnCoverage"]);return s!=null&&m(e,["turnCoverage"],s),e}function MZ(t){const e={},n=f(t,["targetTokens"]);return n!=null&&m(e,["targetTokens"],n),e}function PZ(t){const e={},n=f(t,["triggerTokens"]);n!=null&&m(e,["triggerTokens"],n);const i=f(t,["slidingWindow"]);return i!=null&&m(e,["slidingWindow"],MZ(i)),e}function DZ(t){const e={},n=f(t,["proactiveAudio"]);return n!=null&&m(e,["proactiveAudio"],n),e}function kZ(t,e){const n={},i=f(t,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],i);const s=f(t,["responseModalities"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","responseModalities"],s);const r=f(t,["temperature"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig","temperature"],r);const a=f(t,["topP"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","topP"],a);const c=f(t,["topK"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","topK"],c);const u=f(t,["maxOutputTokens"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","maxOutputTokens"],u);const h=f(t,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const g=f(t,["seed"]);e!==void 0&&g!=null&&m(e,["setup","generationConfig","seed"],g);const x=f(t,["speechConfig"]);e!==void 0&&x!=null&&m(e,["setup","generationConfig","speechConfig"],uZ(qb(x)));const T=f(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],T);const b=f(t,["systemInstruction"]);e!==void 0&&b!=null&&m(e,["setup","systemInstruction"],pZ(ri(b)));const S=f(t,["tools"]);if(e!==void 0&&S!=null){let j=ld(S);Array.isArray(j)&&(j=j.map(W=>CZ(ad(W)))),m(e,["setup","tools"],j)}const P=f(t,["sessionResumption"]);e!==void 0&&P!=null&&m(e,["setup","sessionResumption"],IZ(P));const M=f(t,["inputAudioTranscription"]);e!==void 0&&M!=null&&m(e,["setup","inputAudioTranscription"],l2());const V=f(t,["outputAudioTranscription"]);e!==void 0&&V!=null&&m(e,["setup","outputAudioTranscription"],l2());const q=f(t,["realtimeInputConfig"]);e!==void 0&&q!=null&&m(e,["setup","realtimeInputConfig"],NZ(q));const O=f(t,["contextWindowCompression"]);e!==void 0&&O!=null&&m(e,["setup","contextWindowCompression"],PZ(O));const z=f(t,["proactivity"]);return e!==void 0&&z!=null&&m(e,["setup","proactivity"],DZ(z)),n}function VZ(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["setup","model"],Et(t,i));const s=f(e,["config"]);return s!=null&&m(n,["config"],kZ(s,n)),n}function LZ(){return{}}function UZ(){return{}}function OZ(t){const e={},n=f(t,["media"]);n!=null&&m(e,["mediaChunks"],LL(n));const i=f(t,["audio"]);i!=null&&m(e,["audio"],OL(i));const s=f(t,["audioStreamEnd"]);s!=null&&m(e,["audioStreamEnd"],s);const r=f(t,["video"]);r!=null&&m(e,["video"],UL(r));const a=f(t,["text"]);return a!=null&&m(e,["text"],a),f(t,["activityStart"])!=null&&m(e,["activityStart"],LZ()),f(t,["activityEnd"])!=null&&m(e,["activityEnd"],UZ()),e}function FZ(){return{}}function BZ(t){const e={},n=f(t,["fps"]);n!=null&&m(e,["fps"],n);const i=f(t,["endOffset"]);i!=null&&m(e,["endOffset"],i);const s=f(t,["startOffset"]);return s!=null&&m(e,["startOffset"],s),e}function qZ(t){const e={},n=f(t,["data"]);n!=null&&m(e,["data"],n);const i=f(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function jZ(t){const e={},n=f(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const i=f(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function GZ(t){const e={},n=f(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],BZ(n));const i=f(t,["thought"]);i!=null&&m(e,["thought"],i);const s=f(t,["inlineData"]);s!=null&&m(e,["inlineData"],qZ(s));const r=f(t,["fileData"]);r!=null&&m(e,["fileData"],jZ(r));const a=f(t,["thoughtSignature"]);a!=null&&m(e,["thoughtSignature"],a);const c=f(t,["codeExecutionResult"]);c!=null&&m(e,["codeExecutionResult"],c);const u=f(t,["executableCode"]);u!=null&&m(e,["executableCode"],u);const h=f(t,["functionCall"]);h!=null&&m(e,["functionCall"],h);const g=f(t,["functionResponse"]);g!=null&&m(e,["functionResponse"],g);const x=f(t,["text"]);return x!=null&&m(e,["text"],x),e}function zZ(t){const e={},n=f(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>GZ(r))),m(e,["parts"],s)}const i=f(t,["role"]);return i!=null&&m(e,["role"],i),e}function c2(t){const e={},n=f(t,["text"]);n!=null&&m(e,["text"],n);const i=f(t,["finished"]);return i!=null&&m(e,["finished"],i),e}function HZ(t){const e={},n=f(t,["retrievedUrl"]);n!=null&&m(e,["retrievedUrl"],n);const i=f(t,["urlRetrievalStatus"]);return i!=null&&m(e,["urlRetrievalStatus"],i),e}function $Z(t){const e={},n=f(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>HZ(s))),m(e,["urlMetadata"],i)}return e}function KZ(t){const e={},n=f(t,["modelTurn"]);n!=null&&m(e,["modelTurn"],zZ(n));const i=f(t,["turnComplete"]);i!=null&&m(e,["turnComplete"],i);const s=f(t,["interrupted"]);s!=null&&m(e,["interrupted"],s);const r=f(t,["groundingMetadata"]);r!=null&&m(e,["groundingMetadata"],r);const a=f(t,["generationComplete"]);a!=null&&m(e,["generationComplete"],a);const c=f(t,["inputTranscription"]);c!=null&&m(e,["inputTranscription"],c2(c));const u=f(t,["outputTranscription"]);u!=null&&m(e,["outputTranscription"],c2(u));const h=f(t,["urlContextMetadata"]);return h!=null&&m(e,["urlContextMetadata"],$Z(h)),e}function WZ(t){const e={},n=f(t,["id"]);n!=null&&m(e,["id"],n);const i=f(t,["args"]);i!=null&&m(e,["args"],i);const s=f(t,["name"]);return s!=null&&m(e,["name"],s),e}function YZ(t){const e={},n=f(t,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>WZ(s))),m(e,["functionCalls"],i)}return e}function JZ(t){const e={},n=f(t,["ids"]);return n!=null&&m(e,["ids"],n),e}function $p(t){const e={},n=f(t,["modality"]);n!=null&&m(e,["modality"],n);const i=f(t,["tokenCount"]);return i!=null&&m(e,["tokenCount"],i),e}function QZ(t){const e={},n=f(t,["promptTokenCount"]);n!=null&&m(e,["promptTokenCount"],n);const i=f(t,["cachedContentTokenCount"]);i!=null&&m(e,["cachedContentTokenCount"],i);const s=f(t,["responseTokenCount"]);s!=null&&m(e,["responseTokenCount"],s);const r=f(t,["toolUsePromptTokenCount"]);r!=null&&m(e,["toolUsePromptTokenCount"],r);const a=f(t,["thoughtsTokenCount"]);a!=null&&m(e,["thoughtsTokenCount"],a);const c=f(t,["totalTokenCount"]);c!=null&&m(e,["totalTokenCount"],c);const u=f(t,["promptTokensDetails"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(b=>$p(b))),m(e,["promptTokensDetails"],T)}const h=f(t,["cacheTokensDetails"]);if(h!=null){let T=h;Array.isArray(T)&&(T=T.map(b=>$p(b))),m(e,["cacheTokensDetails"],T)}const g=f(t,["responseTokensDetails"]);if(g!=null){let T=g;Array.isArray(T)&&(T=T.map(b=>$p(b))),m(e,["responseTokensDetails"],T)}const x=f(t,["toolUsePromptTokensDetails"]);if(x!=null){let T=x;Array.isArray(T)&&(T=T.map(b=>$p(b))),m(e,["toolUsePromptTokensDetails"],T)}return e}function XZ(t){const e={},n=f(t,["timeLeft"]);return n!=null&&m(e,["timeLeft"],n),e}function ZZ(t){const e={},n=f(t,["newHandle"]);n!=null&&m(e,["newHandle"],n);const i=f(t,["resumable"]);i!=null&&m(e,["resumable"],i);const s=f(t,["lastConsumedClientMessageIndex"]);return s!=null&&m(e,["lastConsumedClientMessageIndex"],s),e}function eee(t){const e={};f(t,["setupComplete"])!=null&&m(e,["setupComplete"],FZ());const i=f(t,["serverContent"]);i!=null&&m(e,["serverContent"],KZ(i));const s=f(t,["toolCall"]);s!=null&&m(e,["toolCall"],YZ(s));const r=f(t,["toolCallCancellation"]);r!=null&&m(e,["toolCallCancellation"],JZ(r));const a=f(t,["usageMetadata"]);a!=null&&m(e,["usageMetadata"],QZ(a));const c=f(t,["goAway"]);c!=null&&m(e,["goAway"],XZ(c));const u=f(t,["sessionResumptionUpdate"]);return u!=null&&m(e,["sessionResumptionUpdate"],ZZ(u)),e}function tee(){return{}}function nee(t){const e={},n=f(t,["text"]);n!=null&&m(e,["text"],n);const i=f(t,["weight"]);return i!=null&&m(e,["weight"],i),e}function iee(t){const e={},n=f(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>nee(s))),m(e,["weightedPrompts"],i)}return e}function see(t){const e={},n=f(t,["temperature"]);n!=null&&m(e,["temperature"],n);const i=f(t,["topK"]);i!=null&&m(e,["topK"],i);const s=f(t,["seed"]);s!=null&&m(e,["seed"],s);const r=f(t,["guidance"]);r!=null&&m(e,["guidance"],r);const a=f(t,["bpm"]);a!=null&&m(e,["bpm"],a);const c=f(t,["density"]);c!=null&&m(e,["density"],c);const u=f(t,["brightness"]);u!=null&&m(e,["brightness"],u);const h=f(t,["scale"]);h!=null&&m(e,["scale"],h);const g=f(t,["muteBass"]);g!=null&&m(e,["muteBass"],g);const x=f(t,["muteDrums"]);x!=null&&m(e,["muteDrums"],x);const T=f(t,["onlyBassAndDrums"]);T!=null&&m(e,["onlyBassAndDrums"],T);const b=f(t,["musicGenerationMode"]);return b!=null&&m(e,["musicGenerationMode"],b),e}function ree(t){const e={},n=f(t,["clientContent"]);n!=null&&m(e,["clientContent"],iee(n));const i=f(t,["musicGenerationConfig"]);return i!=null&&m(e,["musicGenerationConfig"],see(i)),e}function oee(t){const e={},n=f(t,["data"]);n!=null&&m(e,["data"],n);const i=f(t,["mimeType"]);i!=null&&m(e,["mimeType"],i);const s=f(t,["sourceMetadata"]);return s!=null&&m(e,["sourceMetadata"],ree(s)),e}function aee(t){const e={},n=f(t,["audioChunks"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>oee(s))),m(e,["audioChunks"],i)}return e}function lee(t){const e={},n=f(t,["text"]);n!=null&&m(e,["text"],n);const i=f(t,["filteredReason"]);return i!=null&&m(e,["filteredReason"],i),e}function cee(t){const e={};f(t,["setupComplete"])!=null&&m(e,["setupComplete"],tee());const i=f(t,["serverContent"]);i!=null&&m(e,["serverContent"],aee(i));const s=f(t,["filteredPrompt"]);return s!=null&&m(e,["filteredPrompt"],lee(s)),e}function uee(t){const e={},n=f(t,["sessionId"]);return n!=null&&m(e,["sessionId"],n),e}function dee(t){const e={},n=f(t,["fps"]);n!=null&&m(e,["fps"],n);const i=f(t,["endOffset"]);i!=null&&m(e,["endOffset"],i);const s=f(t,["startOffset"]);return s!=null&&m(e,["startOffset"],s),e}function hee(t){const e={},n=f(t,["displayName"]);n!=null&&m(e,["displayName"],n);const i=f(t,["data"]);i!=null&&m(e,["data"],i);const s=f(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function fee(t){const e={},n=f(t,["displayName"]);n!=null&&m(e,["displayName"],n);const i=f(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const s=f(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function mee(t){const e={},n=f(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],dee(n));const i=f(t,["thought"]);i!=null&&m(e,["thought"],i);const s=f(t,["inlineData"]);s!=null&&m(e,["inlineData"],hee(s));const r=f(t,["fileData"]);r!=null&&m(e,["fileData"],fee(r));const a=f(t,["thoughtSignature"]);a!=null&&m(e,["thoughtSignature"],a);const c=f(t,["codeExecutionResult"]);c!=null&&m(e,["codeExecutionResult"],c);const u=f(t,["executableCode"]);u!=null&&m(e,["executableCode"],u);const h=f(t,["functionCall"]);h!=null&&m(e,["functionCall"],h);const g=f(t,["functionResponse"]);g!=null&&m(e,["functionResponse"],g);const x=f(t,["text"]);return x!=null&&m(e,["text"],x),e}function pee(t){const e={},n=f(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>mee(r))),m(e,["parts"],s)}const i=f(t,["role"]);return i!=null&&m(e,["role"],i),e}function u2(t){const e={},n=f(t,["text"]);n!=null&&m(e,["text"],n);const i=f(t,["finished"]);return i!=null&&m(e,["finished"],i),e}function gee(t){const e={},n=f(t,["modelTurn"]);n!=null&&m(e,["modelTurn"],pee(n));const i=f(t,["turnComplete"]);i!=null&&m(e,["turnComplete"],i);const s=f(t,["interrupted"]);s!=null&&m(e,["interrupted"],s);const r=f(t,["groundingMetadata"]);r!=null&&m(e,["groundingMetadata"],r);const a=f(t,["generationComplete"]);a!=null&&m(e,["generationComplete"],a);const c=f(t,["inputTranscription"]);c!=null&&m(e,["inputTranscription"],u2(c));const u=f(t,["outputTranscription"]);return u!=null&&m(e,["outputTranscription"],u2(u)),e}function yee(t){const e={},n=f(t,["args"]);n!=null&&m(e,["args"],n);const i=f(t,["name"]);return i!=null&&m(e,["name"],i),e}function vee(t){const e={},n=f(t,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>yee(s))),m(e,["functionCalls"],i)}return e}function xee(t){const e={},n=f(t,["ids"]);return n!=null&&m(e,["ids"],n),e}function Kp(t){const e={},n=f(t,["modality"]);n!=null&&m(e,["modality"],n);const i=f(t,["tokenCount"]);return i!=null&&m(e,["tokenCount"],i),e}function _ee(t){const e={},n=f(t,["promptTokenCount"]);n!=null&&m(e,["promptTokenCount"],n);const i=f(t,["cachedContentTokenCount"]);i!=null&&m(e,["cachedContentTokenCount"],i);const s=f(t,["candidatesTokenCount"]);s!=null&&m(e,["responseTokenCount"],s);const r=f(t,["toolUsePromptTokenCount"]);r!=null&&m(e,["toolUsePromptTokenCount"],r);const a=f(t,["thoughtsTokenCount"]);a!=null&&m(e,["thoughtsTokenCount"],a);const c=f(t,["totalTokenCount"]);c!=null&&m(e,["totalTokenCount"],c);const u=f(t,["promptTokensDetails"]);if(u!=null){let b=u;Array.isArray(b)&&(b=b.map(S=>Kp(S))),m(e,["promptTokensDetails"],b)}const h=f(t,["cacheTokensDetails"]);if(h!=null){let b=h;Array.isArray(b)&&(b=b.map(S=>Kp(S))),m(e,["cacheTokensDetails"],b)}const g=f(t,["candidatesTokensDetails"]);if(g!=null){let b=g;Array.isArray(b)&&(b=b.map(S=>Kp(S))),m(e,["responseTokensDetails"],b)}const x=f(t,["toolUsePromptTokensDetails"]);if(x!=null){let b=x;Array.isArray(b)&&(b=b.map(S=>Kp(S))),m(e,["toolUsePromptTokensDetails"],b)}const T=f(t,["trafficType"]);return T!=null&&m(e,["trafficType"],T),e}function Tee(t){const e={},n=f(t,["timeLeft"]);return n!=null&&m(e,["timeLeft"],n),e}function wee(t){const e={},n=f(t,["newHandle"]);n!=null&&m(e,["newHandle"],n);const i=f(t,["resumable"]);i!=null&&m(e,["resumable"],i);const s=f(t,["lastConsumedClientMessageIndex"]);return s!=null&&m(e,["lastConsumedClientMessageIndex"],s),e}function bee(t){const e={},n=f(t,["setupComplete"]);n!=null&&m(e,["setupComplete"],uee(n));const i=f(t,["serverContent"]);i!=null&&m(e,["serverContent"],gee(i));const s=f(t,["toolCall"]);s!=null&&m(e,["toolCall"],vee(s));const r=f(t,["toolCallCancellation"]);r!=null&&m(e,["toolCallCancellation"],xee(r));const a=f(t,["usageMetadata"]);a!=null&&m(e,["usageMetadata"],_ee(a));const c=f(t,["goAway"]);c!=null&&m(e,["goAway"],Tee(c));const u=f(t,["sessionResumptionUpdate"]);return u!=null&&m(e,["sessionResumptionUpdate"],wee(u)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Eee(t){const e={},n=f(t,["fps"]);n!=null&&m(e,["fps"],n);const i=f(t,["endOffset"]);i!=null&&m(e,["endOffset"],i);const s=f(t,["startOffset"]);return s!=null&&m(e,["startOffset"],s),e}function See(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["data"]);n!=null&&m(e,["data"],n);const i=f(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function Aee(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const i=f(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function Cee(t){const e={},n=f(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],Eee(n));const i=f(t,["thought"]);i!=null&&m(e,["thought"],i);const s=f(t,["inlineData"]);s!=null&&m(e,["inlineData"],See(s));const r=f(t,["fileData"]);r!=null&&m(e,["fileData"],Aee(r));const a=f(t,["thoughtSignature"]);a!=null&&m(e,["thoughtSignature"],a);const c=f(t,["codeExecutionResult"]);c!=null&&m(e,["codeExecutionResult"],c);const u=f(t,["executableCode"]);u!=null&&m(e,["executableCode"],u);const h=f(t,["functionCall"]);h!=null&&m(e,["functionCall"],h);const g=f(t,["functionResponse"]);g!=null&&m(e,["functionResponse"],g);const x=f(t,["text"]);return x!=null&&m(e,["text"],x),e}function zy(t){const e={},n=f(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>Cee(r))),m(e,["parts"],s)}const i=f(t,["role"]);return i!=null&&m(e,["role"],i),e}function Iee(t){const e={},n=f(t,["anyOf"]);n!=null&&m(e,["anyOf"],n);const i=f(t,["default"]);i!=null&&m(e,["default"],i);const s=f(t,["description"]);s!=null&&m(e,["description"],s);const r=f(t,["enum"]);r!=null&&m(e,["enum"],r);const a=f(t,["example"]);a!=null&&m(e,["example"],a);const c=f(t,["format"]);c!=null&&m(e,["format"],c);const u=f(t,["items"]);u!=null&&m(e,["items"],u);const h=f(t,["maxItems"]);h!=null&&m(e,["maxItems"],h);const g=f(t,["maxLength"]);g!=null&&m(e,["maxLength"],g);const x=f(t,["maxProperties"]);x!=null&&m(e,["maxProperties"],x);const T=f(t,["maximum"]);T!=null&&m(e,["maximum"],T);const b=f(t,["minItems"]);b!=null&&m(e,["minItems"],b);const S=f(t,["minLength"]);S!=null&&m(e,["minLength"],S);const P=f(t,["minProperties"]);P!=null&&m(e,["minProperties"],P);const M=f(t,["minimum"]);M!=null&&m(e,["minimum"],M);const V=f(t,["nullable"]);V!=null&&m(e,["nullable"],V);const q=f(t,["pattern"]);q!=null&&m(e,["pattern"],q);const O=f(t,["properties"]);O!=null&&m(e,["properties"],O);const z=f(t,["propertyOrdering"]);z!=null&&m(e,["propertyOrdering"],z);const j=f(t,["required"]);j!=null&&m(e,["required"],j);const W=f(t,["title"]);W!=null&&m(e,["title"],W);const D=f(t,["type"]);return D!=null&&m(e,["type"],D),e}function Ree(t){const e={};if(f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=f(t,["category"]);n!=null&&m(e,["category"],n);const i=f(t,["threshold"]);return i!=null&&m(e,["threshold"],i),e}function Nee(t){const e={},n=f(t,["behavior"]);n!=null&&m(e,["behavior"],n);const i=f(t,["description"]);i!=null&&m(e,["description"],i);const s=f(t,["name"]);s!=null&&m(e,["name"],s);const r=f(t,["parameters"]);r!=null&&m(e,["parameters"],r);const a=f(t,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const c=f(t,["response"]);c!=null&&m(e,["response"],c);const u=f(t,["responseJsonSchema"]);return u!=null&&m(e,["responseJsonSchema"],u),e}function Mee(t){const e={},n=f(t,["startTime"]);n!=null&&m(e,["startTime"],n);const i=f(t,["endTime"]);return i!=null&&m(e,["endTime"],i),e}function Pee(t){const e={},n=f(t,["timeRangeFilter"]);if(n!=null&&m(e,["timeRangeFilter"],Mee(n)),f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Dee(t){const e={},n=f(t,["mode"]);n!=null&&m(e,["mode"],n);const i=f(t,["dynamicThreshold"]);return i!=null&&m(e,["dynamicThreshold"],i),e}function kee(t){const e={},n=f(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],Dee(n)),e}function Vee(){return{}}function Lee(t){const e={},n=f(t,["environment"]);return n!=null&&m(e,["environment"],n),e}function Uee(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(h=>Nee(h))),m(e,["functionDeclarations"],u)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["googleSearch"]);i!=null&&m(e,["googleSearch"],Pee(i));const s=f(t,["googleSearchRetrieval"]);if(s!=null&&m(e,["googleSearchRetrieval"],kee(s)),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(f(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");f(t,["urlContext"])!=null&&m(e,["urlContext"],Vee());const a=f(t,["computerUse"]);a!=null&&m(e,["computerUse"],Lee(a));const c=f(t,["codeExecution"]);return c!=null&&m(e,["codeExecution"],c),e}function Oee(t){const e={},n=f(t,["mode"]);n!=null&&m(e,["mode"],n);const i=f(t,["allowedFunctionNames"]);return i!=null&&m(e,["allowedFunctionNames"],i),e}function Fee(t){const e={},n=f(t,["latitude"]);n!=null&&m(e,["latitude"],n);const i=f(t,["longitude"]);return i!=null&&m(e,["longitude"],i),e}function Bee(t){const e={},n=f(t,["latLng"]);n!=null&&m(e,["latLng"],Fee(n));const i=f(t,["languageCode"]);return i!=null&&m(e,["languageCode"],i),e}function qee(t){const e={},n=f(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],Oee(n));const i=f(t,["retrievalConfig"]);return i!=null&&m(e,["retrievalConfig"],Bee(i)),e}function jee(t){const e={},n=f(t,["voiceName"]);return n!=null&&m(e,["voiceName"],n),e}function i4(t){const e={},n=f(t,["prebuiltVoiceConfig"]);return n!=null&&m(e,["prebuiltVoiceConfig"],jee(n)),e}function Gee(t){const e={},n=f(t,["speaker"]);n!=null&&m(e,["speaker"],n);const i=f(t,["voiceConfig"]);return i!=null&&m(e,["voiceConfig"],i4(i)),e}function zee(t){const e={},n=f(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Gee(s))),m(e,["speakerVoiceConfigs"],i)}return e}function Hee(t){const e={},n=f(t,["voiceConfig"]);n!=null&&m(e,["voiceConfig"],i4(n));const i=f(t,["multiSpeakerVoiceConfig"]);i!=null&&m(e,["multiSpeakerVoiceConfig"],zee(i));const s=f(t,["languageCode"]);return s!=null&&m(e,["languageCode"],s),e}function $ee(t){const e={},n=f(t,["includeThoughts"]);n!=null&&m(e,["includeThoughts"],n);const i=f(t,["thinkingBudget"]);return i!=null&&m(e,["thinkingBudget"],i),e}function Kee(t,e,n){const i={},s=f(e,["systemInstruction"]);n!==void 0&&s!=null&&m(n,["systemInstruction"],zy(ri(s)));const r=f(e,["temperature"]);r!=null&&m(i,["temperature"],r);const a=f(e,["topP"]);a!=null&&m(i,["topP"],a);const c=f(e,["topK"]);c!=null&&m(i,["topK"],c);const u=f(e,["candidateCount"]);u!=null&&m(i,["candidateCount"],u);const h=f(e,["maxOutputTokens"]);h!=null&&m(i,["maxOutputTokens"],h);const g=f(e,["stopSequences"]);g!=null&&m(i,["stopSequences"],g);const x=f(e,["responseLogprobs"]);x!=null&&m(i,["responseLogprobs"],x);const T=f(e,["logprobs"]);T!=null&&m(i,["logprobs"],T);const b=f(e,["presencePenalty"]);b!=null&&m(i,["presencePenalty"],b);const S=f(e,["frequencyPenalty"]);S!=null&&m(i,["frequencyPenalty"],S);const P=f(e,["seed"]);P!=null&&m(i,["seed"],P);const M=f(e,["responseMimeType"]);M!=null&&m(i,["responseMimeType"],M);const V=f(e,["responseSchema"]);V!=null&&m(i,["responseSchema"],Iee(Fb(V)));const q=f(e,["responseJsonSchema"]);if(q!=null&&m(i,["responseJsonSchema"],q),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const O=f(e,["safetySettings"]);if(n!==void 0&&O!=null){let F=O;Array.isArray(F)&&(F=F.map(G=>Ree(G))),m(n,["safetySettings"],F)}const z=f(e,["tools"]);if(n!==void 0&&z!=null){let F=ld(z);Array.isArray(F)&&(F=F.map(G=>Uee(ad(G)))),m(n,["tools"],F)}const j=f(e,["toolConfig"]);if(n!==void 0&&j!=null&&m(n,["toolConfig"],qee(j)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const W=f(e,["cachedContent"]);n!==void 0&&W!=null&&m(n,["cachedContent"],eo(t,W));const D=f(e,["responseModalities"]);D!=null&&m(i,["responseModalities"],D);const C=f(e,["mediaResolution"]);C!=null&&m(i,["mediaResolution"],C);const R=f(e,["speechConfig"]);if(R!=null&&m(i,["speechConfig"],Hee(Bb(R))),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=f(e,["thinkingConfig"]);return L!=null&&m(i,["thinkingConfig"],$ee(L)),i}function d2(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["_url","model"],Et(t,i));const s=f(e,["contents"]);if(s!=null){let a=ds(s);Array.isArray(a)&&(a=a.map(c=>zy(c))),m(n,["contents"],a)}const r=f(e,["config"]);return r!=null&&m(n,["generationConfig"],Kee(t,r,n)),n}function Wee(t,e){const n={},i=f(t,["taskType"]);e!==void 0&&i!=null&&m(e,["requests[]","taskType"],i);const s=f(t,["title"]);e!==void 0&&s!=null&&m(e,["requests[]","title"],s);const r=f(t,["outputDimensionality"]);if(e!==void 0&&r!=null&&m(e,["requests[]","outputDimensionality"],r),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Yee(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["_url","model"],Et(t,i));const s=f(e,["contents"]);s!=null&&m(n,["requests[]","content"],BL(t,s));const r=f(e,["config"]);r!=null&&m(n,["config"],Wee(r,n));const a=f(e,["model"]);return a!==void 0&&m(n,["requests[]","model"],Et(t,a)),n}function Jee(t,e){const n={};if(f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=f(t,["numberOfImages"]);e!==void 0&&i!=null&&m(e,["parameters","sampleCount"],i);const s=f(t,["aspectRatio"]);e!==void 0&&s!=null&&m(e,["parameters","aspectRatio"],s);const r=f(t,["guidanceScale"]);if(e!==void 0&&r!=null&&m(e,["parameters","guidanceScale"],r),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=f(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&m(e,["parameters","safetySetting"],a);const c=f(t,["personGeneration"]);e!==void 0&&c!=null&&m(e,["parameters","personGeneration"],c);const u=f(t,["includeSafetyAttributes"]);e!==void 0&&u!=null&&m(e,["parameters","includeSafetyAttributes"],u);const h=f(t,["includeRaiReason"]);e!==void 0&&h!=null&&m(e,["parameters","includeRaiReason"],h);const g=f(t,["language"]);e!==void 0&&g!=null&&m(e,["parameters","language"],g);const x=f(t,["outputMimeType"]);e!==void 0&&x!=null&&m(e,["parameters","outputOptions","mimeType"],x);const T=f(t,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&m(e,["parameters","outputOptions","compressionQuality"],T),f(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const b=f(t,["imageSize"]);if(e!==void 0&&b!=null&&m(e,["parameters","sampleImageSize"],b),f(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Qee(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["_url","model"],Et(t,i));const s=f(e,["prompt"]);s!=null&&m(n,["instances[0]","prompt"],s);const r=f(e,["config"]);return r!=null&&m(n,["config"],Jee(r,n)),n}function Xee(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["_url","name"],Et(t,i));const s=f(e,["config"]);return s!=null&&m(n,["config"],s),n}function Zee(t,e,n){const i={},s=f(e,["pageSize"]);n!==void 0&&s!=null&&m(n,["_query","pageSize"],s);const r=f(e,["pageToken"]);n!==void 0&&r!=null&&m(n,["_query","pageToken"],r);const a=f(e,["filter"]);n!==void 0&&a!=null&&m(n,["_query","filter"],a);const c=f(e,["queryBase"]);return n!==void 0&&c!=null&&m(n,["_url","models_url"],GL(t,c)),i}function ete(t,e){const n={},i=f(e,["config"]);return i!=null&&m(n,["config"],Zee(t,i,n)),n}function tte(t,e){const n={},i=f(t,["displayName"]);e!==void 0&&i!=null&&m(e,["displayName"],i);const s=f(t,["description"]);e!==void 0&&s!=null&&m(e,["description"],s);const r=f(t,["defaultCheckpointId"]);return e!==void 0&&r!=null&&m(e,["defaultCheckpointId"],r),n}function nte(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["_url","name"],Et(t,i));const s=f(e,["config"]);return s!=null&&m(n,["config"],tte(s,n)),n}function ite(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["_url","name"],Et(t,i));const s=f(e,["config"]);return s!=null&&m(n,["config"],s),n}function ste(t){const e={};if(f(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function rte(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["_url","model"],Et(t,i));const s=f(e,["contents"]);if(s!=null){let a=ds(s);Array.isArray(a)&&(a=a.map(c=>zy(c))),m(n,["contents"],a)}const r=f(e,["config"]);return r!=null&&m(n,["config"],ste(r)),n}function ote(t){const e={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=f(t,["imageBytes"]);n!=null&&m(e,["bytesBase64Encoded"],Gl(n));const i=f(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function ate(t,e){const n={},i=f(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&m(e,["parameters","sampleCount"],i),f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=f(t,["durationSeconds"]);if(e!==void 0&&s!=null&&m(e,["parameters","durationSeconds"],s),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const r=f(t,["aspectRatio"]);if(e!==void 0&&r!=null&&m(e,["parameters","aspectRatio"],r),f(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const a=f(t,["personGeneration"]);if(e!==void 0&&a!=null&&m(e,["parameters","personGeneration"],a),f(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=f(t,["negativePrompt"]);e!==void 0&&c!=null&&m(e,["parameters","negativePrompt"],c);const u=f(t,["enhancePrompt"]);if(e!==void 0&&u!=null&&m(e,["parameters","enhancePrompt"],u),f(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(f(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(f(t,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(f(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function lte(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["_url","model"],Et(t,i));const s=f(e,["prompt"]);s!=null&&m(n,["instances[0]","prompt"],s);const r=f(e,["image"]);if(r!=null&&m(n,["instances[0]","image"],ote(r)),f(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const a=f(e,["config"]);return a!=null&&m(n,["config"],ate(a,n)),n}function cte(t){const e={},n=f(t,["fps"]);n!=null&&m(e,["fps"],n);const i=f(t,["endOffset"]);i!=null&&m(e,["endOffset"],i);const s=f(t,["startOffset"]);return s!=null&&m(e,["startOffset"],s),e}function ute(t){const e={},n=f(t,["displayName"]);n!=null&&m(e,["displayName"],n);const i=f(t,["data"]);i!=null&&m(e,["data"],i);const s=f(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function dte(t){const e={},n=f(t,["displayName"]);n!=null&&m(e,["displayName"],n);const i=f(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const s=f(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function hte(t){const e={},n=f(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],cte(n));const i=f(t,["thought"]);i!=null&&m(e,["thought"],i);const s=f(t,["inlineData"]);s!=null&&m(e,["inlineData"],ute(s));const r=f(t,["fileData"]);r!=null&&m(e,["fileData"],dte(r));const a=f(t,["thoughtSignature"]);a!=null&&m(e,["thoughtSignature"],a);const c=f(t,["codeExecutionResult"]);c!=null&&m(e,["codeExecutionResult"],c);const u=f(t,["executableCode"]);u!=null&&m(e,["executableCode"],u);const h=f(t,["functionCall"]);h!=null&&m(e,["functionCall"],h);const g=f(t,["functionResponse"]);g!=null&&m(e,["functionResponse"],g);const x=f(t,["text"]);return x!=null&&m(e,["text"],x),e}function ud(t){const e={},n=f(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>hte(r))),m(e,["parts"],s)}const i=f(t,["role"]);return i!=null&&m(e,["role"],i),e}function fte(t){const e={},n=f(t,["anyOf"]);n!=null&&m(e,["anyOf"],n);const i=f(t,["default"]);i!=null&&m(e,["default"],i);const s=f(t,["description"]);s!=null&&m(e,["description"],s);const r=f(t,["enum"]);r!=null&&m(e,["enum"],r);const a=f(t,["example"]);a!=null&&m(e,["example"],a);const c=f(t,["format"]);c!=null&&m(e,["format"],c);const u=f(t,["items"]);u!=null&&m(e,["items"],u);const h=f(t,["maxItems"]);h!=null&&m(e,["maxItems"],h);const g=f(t,["maxLength"]);g!=null&&m(e,["maxLength"],g);const x=f(t,["maxProperties"]);x!=null&&m(e,["maxProperties"],x);const T=f(t,["maximum"]);T!=null&&m(e,["maximum"],T);const b=f(t,["minItems"]);b!=null&&m(e,["minItems"],b);const S=f(t,["minLength"]);S!=null&&m(e,["minLength"],S);const P=f(t,["minProperties"]);P!=null&&m(e,["minProperties"],P);const M=f(t,["minimum"]);M!=null&&m(e,["minimum"],M);const V=f(t,["nullable"]);V!=null&&m(e,["nullable"],V);const q=f(t,["pattern"]);q!=null&&m(e,["pattern"],q);const O=f(t,["properties"]);O!=null&&m(e,["properties"],O);const z=f(t,["propertyOrdering"]);z!=null&&m(e,["propertyOrdering"],z);const j=f(t,["required"]);j!=null&&m(e,["required"],j);const W=f(t,["title"]);W!=null&&m(e,["title"],W);const D=f(t,["type"]);return D!=null&&m(e,["type"],D),e}function mte(t){const e={},n=f(t,["featureSelectionPreference"]);return n!=null&&m(e,["featureSelectionPreference"],n),e}function pte(t){const e={},n=f(t,["method"]);n!=null&&m(e,["method"],n);const i=f(t,["category"]);i!=null&&m(e,["category"],i);const s=f(t,["threshold"]);return s!=null&&m(e,["threshold"],s),e}function gte(t){const e={};if(f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=f(t,["description"]);n!=null&&m(e,["description"],n);const i=f(t,["name"]);i!=null&&m(e,["name"],i);const s=f(t,["parameters"]);s!=null&&m(e,["parameters"],s);const r=f(t,["parametersJsonSchema"]);r!=null&&m(e,["parametersJsonSchema"],r);const a=f(t,["response"]);a!=null&&m(e,["response"],a);const c=f(t,["responseJsonSchema"]);return c!=null&&m(e,["responseJsonSchema"],c),e}function yte(t){const e={},n=f(t,["startTime"]);n!=null&&m(e,["startTime"],n);const i=f(t,["endTime"]);return i!=null&&m(e,["endTime"],i),e}function vte(t){const e={},n=f(t,["timeRangeFilter"]);n!=null&&m(e,["timeRangeFilter"],yte(n));const i=f(t,["excludeDomains"]);return i!=null&&m(e,["excludeDomains"],i),e}function xte(t){const e={},n=f(t,["mode"]);n!=null&&m(e,["mode"],n);const i=f(t,["dynamicThreshold"]);return i!=null&&m(e,["dynamicThreshold"],i),e}function _te(t){const e={},n=f(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],xte(n)),e}function Tte(t){const e={},n=f(t,["excludeDomains"]);return n!=null&&m(e,["excludeDomains"],n),e}function wte(t){const e={},n=f(t,["apiKeyString"]);return n!=null&&m(e,["apiKeyString"],n),e}function bte(t){const e={},n=f(t,["apiKeyConfig"]);n!=null&&m(e,["apiKeyConfig"],wte(n));const i=f(t,["authType"]);i!=null&&m(e,["authType"],i);const s=f(t,["googleServiceAccountConfig"]);s!=null&&m(e,["googleServiceAccountConfig"],s);const r=f(t,["httpBasicAuthConfig"]);r!=null&&m(e,["httpBasicAuthConfig"],r);const a=f(t,["oauthConfig"]);a!=null&&m(e,["oauthConfig"],a);const c=f(t,["oidcConfig"]);return c!=null&&m(e,["oidcConfig"],c),e}function Ete(t){const e={},n=f(t,["authConfig"]);return n!=null&&m(e,["authConfig"],bte(n)),e}function Ste(){return{}}function Ate(t){const e={},n=f(t,["environment"]);return n!=null&&m(e,["environment"],n),e}function s4(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let x=n;Array.isArray(x)&&(x=x.map(T=>gte(T))),m(e,["functionDeclarations"],x)}const i=f(t,["retrieval"]);i!=null&&m(e,["retrieval"],i);const s=f(t,["googleSearch"]);s!=null&&m(e,["googleSearch"],vte(s));const r=f(t,["googleSearchRetrieval"]);r!=null&&m(e,["googleSearchRetrieval"],_te(r));const a=f(t,["enterpriseWebSearch"]);a!=null&&m(e,["enterpriseWebSearch"],Tte(a));const c=f(t,["googleMaps"]);c!=null&&m(e,["googleMaps"],Ete(c)),f(t,["urlContext"])!=null&&m(e,["urlContext"],Ste());const h=f(t,["computerUse"]);h!=null&&m(e,["computerUse"],Ate(h));const g=f(t,["codeExecution"]);return g!=null&&m(e,["codeExecution"],g),e}function Cte(t){const e={},n=f(t,["mode"]);n!=null&&m(e,["mode"],n);const i=f(t,["allowedFunctionNames"]);return i!=null&&m(e,["allowedFunctionNames"],i),e}function Ite(t){const e={},n=f(t,["latitude"]);n!=null&&m(e,["latitude"],n);const i=f(t,["longitude"]);return i!=null&&m(e,["longitude"],i),e}function Rte(t){const e={},n=f(t,["latLng"]);n!=null&&m(e,["latLng"],Ite(n));const i=f(t,["languageCode"]);return i!=null&&m(e,["languageCode"],i),e}function Nte(t){const e={},n=f(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],Cte(n));const i=f(t,["retrievalConfig"]);return i!=null&&m(e,["retrievalConfig"],Rte(i)),e}function Mte(t){const e={},n=f(t,["voiceName"]);return n!=null&&m(e,["voiceName"],n),e}function Pte(t){const e={},n=f(t,["prebuiltVoiceConfig"]);return n!=null&&m(e,["prebuiltVoiceConfig"],Mte(n)),e}function Dte(t){const e={},n=f(t,["voiceConfig"]);if(n!=null&&m(e,["voiceConfig"],Pte(n)),f(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=f(t,["languageCode"]);return i!=null&&m(e,["languageCode"],i),e}function kte(t){const e={},n=f(t,["includeThoughts"]);n!=null&&m(e,["includeThoughts"],n);const i=f(t,["thinkingBudget"]);return i!=null&&m(e,["thinkingBudget"],i),e}function Vte(t,e,n){const i={},s=f(e,["systemInstruction"]);n!==void 0&&s!=null&&m(n,["systemInstruction"],ud(ri(s)));const r=f(e,["temperature"]);r!=null&&m(i,["temperature"],r);const a=f(e,["topP"]);a!=null&&m(i,["topP"],a);const c=f(e,["topK"]);c!=null&&m(i,["topK"],c);const u=f(e,["candidateCount"]);u!=null&&m(i,["candidateCount"],u);const h=f(e,["maxOutputTokens"]);h!=null&&m(i,["maxOutputTokens"],h);const g=f(e,["stopSequences"]);g!=null&&m(i,["stopSequences"],g);const x=f(e,["responseLogprobs"]);x!=null&&m(i,["responseLogprobs"],x);const T=f(e,["logprobs"]);T!=null&&m(i,["logprobs"],T);const b=f(e,["presencePenalty"]);b!=null&&m(i,["presencePenalty"],b);const S=f(e,["frequencyPenalty"]);S!=null&&m(i,["frequencyPenalty"],S);const P=f(e,["seed"]);P!=null&&m(i,["seed"],P);const M=f(e,["responseMimeType"]);M!=null&&m(i,["responseMimeType"],M);const V=f(e,["responseSchema"]);V!=null&&m(i,["responseSchema"],fte(Fb(V)));const q=f(e,["responseJsonSchema"]);q!=null&&m(i,["responseJsonSchema"],q);const O=f(e,["routingConfig"]);O!=null&&m(i,["routingConfig"],O);const z=f(e,["modelSelectionConfig"]);z!=null&&m(i,["modelConfig"],mte(z));const j=f(e,["safetySettings"]);if(n!==void 0&&j!=null){let Ae=j;Array.isArray(Ae)&&(Ae=Ae.map(ne=>pte(ne))),m(n,["safetySettings"],Ae)}const W=f(e,["tools"]);if(n!==void 0&&W!=null){let Ae=ld(W);Array.isArray(Ae)&&(Ae=Ae.map(ne=>s4(ad(ne)))),m(n,["tools"],Ae)}const D=f(e,["toolConfig"]);n!==void 0&&D!=null&&m(n,["toolConfig"],Nte(D));const C=f(e,["labels"]);n!==void 0&&C!=null&&m(n,["labels"],C);const R=f(e,["cachedContent"]);n!==void 0&&R!=null&&m(n,["cachedContent"],eo(t,R));const L=f(e,["responseModalities"]);L!=null&&m(i,["responseModalities"],L);const F=f(e,["mediaResolution"]);F!=null&&m(i,["mediaResolution"],F);const G=f(e,["speechConfig"]);G!=null&&m(i,["speechConfig"],Dte(Bb(G)));const B=f(e,["audioTimestamp"]);B!=null&&m(i,["audioTimestamp"],B);const ye=f(e,["thinkingConfig"]);return ye!=null&&m(i,["thinkingConfig"],kte(ye)),i}function h2(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["_url","model"],Et(t,i));const s=f(e,["contents"]);if(s!=null){let a=ds(s);Array.isArray(a)&&(a=a.map(c=>ud(c))),m(n,["contents"],a)}const r=f(e,["config"]);return r!=null&&m(n,["generationConfig"],Vte(t,r,n)),n}function Lte(t,e){const n={},i=f(t,["taskType"]);e!==void 0&&i!=null&&m(e,["instances[]","task_type"],i);const s=f(t,["title"]);e!==void 0&&s!=null&&m(e,["instances[]","title"],s);const r=f(t,["outputDimensionality"]);e!==void 0&&r!=null&&m(e,["parameters","outputDimensionality"],r);const a=f(t,["mimeType"]);e!==void 0&&a!=null&&m(e,["instances[]","mimeType"],a);const c=f(t,["autoTruncate"]);return e!==void 0&&c!=null&&m(e,["parameters","autoTruncate"],c),n}function Ute(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["_url","model"],Et(t,i));const s=f(e,["contents"]);s!=null&&m(n,["instances[]","content"],BL(t,s));const r=f(e,["config"]);return r!=null&&m(n,["config"],Lte(r,n)),n}function Ote(t,e){const n={},i=f(t,["outputGcsUri"]);e!==void 0&&i!=null&&m(e,["parameters","storageUri"],i);const s=f(t,["negativePrompt"]);e!==void 0&&s!=null&&m(e,["parameters","negativePrompt"],s);const r=f(t,["numberOfImages"]);e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r);const a=f(t,["aspectRatio"]);e!==void 0&&a!=null&&m(e,["parameters","aspectRatio"],a);const c=f(t,["guidanceScale"]);e!==void 0&&c!=null&&m(e,["parameters","guidanceScale"],c);const u=f(t,["seed"]);e!==void 0&&u!=null&&m(e,["parameters","seed"],u);const h=f(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&m(e,["parameters","safetySetting"],h);const g=f(t,["personGeneration"]);e!==void 0&&g!=null&&m(e,["parameters","personGeneration"],g);const x=f(t,["includeSafetyAttributes"]);e!==void 0&&x!=null&&m(e,["parameters","includeSafetyAttributes"],x);const T=f(t,["includeRaiReason"]);e!==void 0&&T!=null&&m(e,["parameters","includeRaiReason"],T);const b=f(t,["language"]);e!==void 0&&b!=null&&m(e,["parameters","language"],b);const S=f(t,["outputMimeType"]);e!==void 0&&S!=null&&m(e,["parameters","outputOptions","mimeType"],S);const P=f(t,["outputCompressionQuality"]);e!==void 0&&P!=null&&m(e,["parameters","outputOptions","compressionQuality"],P);const M=f(t,["addWatermark"]);e!==void 0&&M!=null&&m(e,["parameters","addWatermark"],M);const V=f(t,["imageSize"]);e!==void 0&&V!=null&&m(e,["parameters","sampleImageSize"],V);const q=f(t,["enhancePrompt"]);return e!==void 0&&q!=null&&m(e,["parameters","enhancePrompt"],q),n}function Fte(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["_url","model"],Et(t,i));const s=f(e,["prompt"]);s!=null&&m(n,["instances[0]","prompt"],s);const r=f(e,["config"]);return r!=null&&m(n,["config"],Ote(r,n)),n}function to(t){const e={},n=f(t,["gcsUri"]);n!=null&&m(e,["gcsUri"],n);const i=f(t,["imageBytes"]);i!=null&&m(e,["bytesBase64Encoded"],Gl(i));const s=f(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function Bte(t){const e={},n=f(t,["maskMode"]);n!=null&&m(e,["maskMode"],n);const i=f(t,["segmentationClasses"]);i!=null&&m(e,["maskClasses"],i);const s=f(t,["maskDilation"]);return s!=null&&m(e,["dilation"],s),e}function qte(t){const e={},n=f(t,["controlType"]);n!=null&&m(e,["controlType"],n);const i=f(t,["enableControlImageComputation"]);return i!=null&&m(e,["computeControl"],i),e}function jte(t){const e={},n=f(t,["styleDescription"]);return n!=null&&m(e,["styleDescription"],n),e}function Gte(t){const e={},n=f(t,["subjectType"]);n!=null&&m(e,["subjectType"],n);const i=f(t,["subjectDescription"]);return i!=null&&m(e,["subjectDescription"],i),e}function zte(t){const e={},n=f(t,["referenceImage"]);n!=null&&m(e,["referenceImage"],to(n));const i=f(t,["referenceId"]);i!=null&&m(e,["referenceId"],i);const s=f(t,["referenceType"]);s!=null&&m(e,["referenceType"],s);const r=f(t,["maskImageConfig"]);r!=null&&m(e,["maskImageConfig"],Bte(r));const a=f(t,["controlImageConfig"]);a!=null&&m(e,["controlImageConfig"],qte(a));const c=f(t,["styleImageConfig"]);c!=null&&m(e,["styleImageConfig"],jte(c));const u=f(t,["subjectImageConfig"]);return u!=null&&m(e,["subjectImageConfig"],Gte(u)),e}function Hte(t,e){const n={},i=f(t,["outputGcsUri"]);e!==void 0&&i!=null&&m(e,["parameters","storageUri"],i);const s=f(t,["negativePrompt"]);e!==void 0&&s!=null&&m(e,["parameters","negativePrompt"],s);const r=f(t,["numberOfImages"]);e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r);const a=f(t,["aspectRatio"]);e!==void 0&&a!=null&&m(e,["parameters","aspectRatio"],a);const c=f(t,["guidanceScale"]);e!==void 0&&c!=null&&m(e,["parameters","guidanceScale"],c);const u=f(t,["seed"]);e!==void 0&&u!=null&&m(e,["parameters","seed"],u);const h=f(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&m(e,["parameters","safetySetting"],h);const g=f(t,["personGeneration"]);e!==void 0&&g!=null&&m(e,["parameters","personGeneration"],g);const x=f(t,["includeSafetyAttributes"]);e!==void 0&&x!=null&&m(e,["parameters","includeSafetyAttributes"],x);const T=f(t,["includeRaiReason"]);e!==void 0&&T!=null&&m(e,["parameters","includeRaiReason"],T);const b=f(t,["language"]);e!==void 0&&b!=null&&m(e,["parameters","language"],b);const S=f(t,["outputMimeType"]);e!==void 0&&S!=null&&m(e,["parameters","outputOptions","mimeType"],S);const P=f(t,["outputCompressionQuality"]);e!==void 0&&P!=null&&m(e,["parameters","outputOptions","compressionQuality"],P);const M=f(t,["addWatermark"]);e!==void 0&&M!=null&&m(e,["parameters","addWatermark"],M);const V=f(t,["editMode"]);e!==void 0&&V!=null&&m(e,["parameters","editMode"],V);const q=f(t,["baseSteps"]);return e!==void 0&&q!=null&&m(e,["parameters","editConfig","baseSteps"],q),n}function $te(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["_url","model"],Et(t,i));const s=f(e,["prompt"]);s!=null&&m(n,["instances[0]","prompt"],s);const r=f(e,["referenceImages"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(u=>zte(u))),m(n,["instances[0]","referenceImages"],c)}const a=f(e,["config"]);return a!=null&&m(n,["config"],Hte(a,n)),n}function Kte(t,e){const n={},i=f(t,["includeRaiReason"]);e!==void 0&&i!=null&&m(e,["parameters","includeRaiReason"],i);const s=f(t,["outputMimeType"]);e!==void 0&&s!=null&&m(e,["parameters","outputOptions","mimeType"],s);const r=f(t,["outputCompressionQuality"]);e!==void 0&&r!=null&&m(e,["parameters","outputOptions","compressionQuality"],r);const a=f(t,["enhanceInputImage"]);e!==void 0&&a!=null&&m(e,["parameters","upscaleConfig","enhanceInputImage"],a);const c=f(t,["imagePreservationFactor"]);e!==void 0&&c!=null&&m(e,["parameters","upscaleConfig","imagePreservationFactor"],c);const u=f(t,["numberOfImages"]);e!==void 0&&u!=null&&m(e,["parameters","sampleCount"],u);const h=f(t,["mode"]);return e!==void 0&&h!=null&&m(e,["parameters","mode"],h),n}function Wte(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["_url","model"],Et(t,i));const s=f(e,["image"]);s!=null&&m(n,["instances[0]","image"],to(s));const r=f(e,["upscaleFactor"]);r!=null&&m(n,["parameters","upscaleConfig","upscaleFactor"],r);const a=f(e,["config"]);return a!=null&&m(n,["config"],Kte(a,n)),n}function Yte(t){const e={},n=f(t,["productImage"]);return n!=null&&m(e,["image"],to(n)),e}function Jte(t,e){const n={},i=f(t,["prompt"]);e!==void 0&&i!=null&&m(e,["instances[0]","prompt"],i);const s=f(t,["personImage"]);e!==void 0&&s!=null&&m(e,["instances[0]","personImage","image"],to(s));const r=f(t,["productImages"]);if(e!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>Yte(c))),m(e,["instances[0]","productImages"],a)}return n}function Qte(t,e){const n={},i=f(t,["numberOfImages"]);e!==void 0&&i!=null&&m(e,["parameters","sampleCount"],i);const s=f(t,["baseSteps"]);e!==void 0&&s!=null&&m(e,["parameters","editConfig","baseSteps"],s);const r=f(t,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const a=f(t,["seed"]);e!==void 0&&a!=null&&m(e,["parameters","seed"],a);const c=f(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&m(e,["parameters","safetySetting"],c);const u=f(t,["personGeneration"]);e!==void 0&&u!=null&&m(e,["parameters","personGeneration"],u);const h=f(t,["outputMimeType"]);e!==void 0&&h!=null&&m(e,["parameters","outputOptions","mimeType"],h);const g=f(t,["outputCompressionQuality"]);e!==void 0&&g!=null&&m(e,["parameters","outputOptions","compressionQuality"],g);const x=f(t,["enhancePrompt"]);return e!==void 0&&x!=null&&m(e,["parameters","enhancePrompt"],x),n}function Xte(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["_url","model"],Et(t,i));const s=f(e,["source"]);s!=null&&m(n,["config"],Jte(s,n));const r=f(e,["config"]);return r!=null&&m(n,["config"],Qte(r,n)),n}function Zte(t){const e={},n=f(t,["image"]);return n!=null&&m(e,["image"],to(n)),e}function ene(t,e){const n={},i=f(t,["prompt"]);e!==void 0&&i!=null&&m(e,["instances[0]","prompt"],i);const s=f(t,["image"]);e!==void 0&&s!=null&&m(e,["instances[0]","image"],to(s));const r=f(t,["scribbleImage"]);return e!==void 0&&r!=null&&m(e,["instances[0]","scribble"],Zte(r)),n}function tne(t,e){const n={},i=f(t,["mode"]);e!==void 0&&i!=null&&m(e,["parameters","mode"],i);const s=f(t,["maxPredictions"]);e!==void 0&&s!=null&&m(e,["parameters","maxPredictions"],s);const r=f(t,["confidenceThreshold"]);e!==void 0&&r!=null&&m(e,["parameters","confidenceThreshold"],r);const a=f(t,["maskDilation"]);e!==void 0&&a!=null&&m(e,["parameters","maskDilation"],a);const c=f(t,["binaryColorThreshold"]);return e!==void 0&&c!=null&&m(e,["parameters","binaryColorThreshold"],c),n}function nne(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["_url","model"],Et(t,i));const s=f(e,["source"]);s!=null&&m(n,["config"],ene(s,n));const r=f(e,["config"]);return r!=null&&m(n,["config"],tne(r,n)),n}function ine(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["_url","name"],Et(t,i));const s=f(e,["config"]);return s!=null&&m(n,["config"],s),n}function sne(t,e,n){const i={},s=f(e,["pageSize"]);n!==void 0&&s!=null&&m(n,["_query","pageSize"],s);const r=f(e,["pageToken"]);n!==void 0&&r!=null&&m(n,["_query","pageToken"],r);const a=f(e,["filter"]);n!==void 0&&a!=null&&m(n,["_query","filter"],a);const c=f(e,["queryBase"]);return n!==void 0&&c!=null&&m(n,["_url","models_url"],GL(t,c)),i}function rne(t,e){const n={},i=f(e,["config"]);return i!=null&&m(n,["config"],sne(t,i,n)),n}function one(t,e){const n={},i=f(t,["displayName"]);e!==void 0&&i!=null&&m(e,["displayName"],i);const s=f(t,["description"]);e!==void 0&&s!=null&&m(e,["description"],s);const r=f(t,["defaultCheckpointId"]);return e!==void 0&&r!=null&&m(e,["defaultCheckpointId"],r),n}function ane(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["_url","model"],Et(t,i));const s=f(e,["config"]);return s!=null&&m(n,["config"],one(s,n)),n}function lne(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["_url","name"],Et(t,i));const s=f(e,["config"]);return s!=null&&m(n,["config"],s),n}function cne(t,e){const n={},i=f(t,["systemInstruction"]);e!==void 0&&i!=null&&m(e,["systemInstruction"],ud(ri(i)));const s=f(t,["tools"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>s4(c))),m(e,["tools"],a)}const r=f(t,["generationConfig"]);return e!==void 0&&r!=null&&m(e,["generationConfig"],r),n}function une(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["_url","model"],Et(t,i));const s=f(e,["contents"]);if(s!=null){let a=ds(s);Array.isArray(a)&&(a=a.map(c=>ud(c))),m(n,["contents"],a)}const r=f(e,["config"]);return r!=null&&m(n,["config"],cne(r,n)),n}function dne(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["_url","model"],Et(t,i));const s=f(e,["contents"]);if(s!=null){let a=ds(s);Array.isArray(a)&&(a=a.map(c=>ud(c))),m(n,["contents"],a)}const r=f(e,["config"]);return r!=null&&m(n,["config"],r),n}function hne(t){const e={},n=f(t,["uri"]);n!=null&&m(e,["gcsUri"],n);const i=f(t,["videoBytes"]);i!=null&&m(e,["bytesBase64Encoded"],Gl(i));const s=f(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function fne(t){const e={},n=f(t,["image"]);n!=null&&m(e,["image"],to(n));const i=f(t,["referenceType"]);return i!=null&&m(e,["referenceType"],i),e}function mne(t,e){const n={},i=f(t,["numberOfVideos"]);e!==void 0&&i!=null&&m(e,["parameters","sampleCount"],i);const s=f(t,["outputGcsUri"]);e!==void 0&&s!=null&&m(e,["parameters","storageUri"],s);const r=f(t,["fps"]);e!==void 0&&r!=null&&m(e,["parameters","fps"],r);const a=f(t,["durationSeconds"]);e!==void 0&&a!=null&&m(e,["parameters","durationSeconds"],a);const c=f(t,["seed"]);e!==void 0&&c!=null&&m(e,["parameters","seed"],c);const u=f(t,["aspectRatio"]);e!==void 0&&u!=null&&m(e,["parameters","aspectRatio"],u);const h=f(t,["resolution"]);e!==void 0&&h!=null&&m(e,["parameters","resolution"],h);const g=f(t,["personGeneration"]);e!==void 0&&g!=null&&m(e,["parameters","personGeneration"],g);const x=f(t,["pubsubTopic"]);e!==void 0&&x!=null&&m(e,["parameters","pubsubTopic"],x);const T=f(t,["negativePrompt"]);e!==void 0&&T!=null&&m(e,["parameters","negativePrompt"],T);const b=f(t,["enhancePrompt"]);e!==void 0&&b!=null&&m(e,["parameters","enhancePrompt"],b);const S=f(t,["generateAudio"]);e!==void 0&&S!=null&&m(e,["parameters","generateAudio"],S);const P=f(t,["lastFrame"]);e!==void 0&&P!=null&&m(e,["instances[0]","lastFrame"],to(P));const M=f(t,["referenceImages"]);if(e!==void 0&&M!=null){let q=M;Array.isArray(q)&&(q=q.map(O=>fne(O))),m(e,["instances[0]","referenceImages"],q)}const V=f(t,["compressionQuality"]);return e!==void 0&&V!=null&&m(e,["parameters","compressionQuality"],V),n}function pne(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["_url","model"],Et(t,i));const s=f(e,["prompt"]);s!=null&&m(n,["instances[0]","prompt"],s);const r=f(e,["image"]);r!=null&&m(n,["instances[0]","image"],to(r));const a=f(e,["video"]);a!=null&&m(n,["instances[0]","video"],hne(a));const c=f(e,["config"]);return c!=null&&m(n,["config"],mne(c,n)),n}function gne(t){const e={},n=f(t,["fps"]);n!=null&&m(e,["fps"],n);const i=f(t,["endOffset"]);i!=null&&m(e,["endOffset"],i);const s=f(t,["startOffset"]);return s!=null&&m(e,["startOffset"],s),e}function yne(t){const e={},n=f(t,["data"]);n!=null&&m(e,["data"],n);const i=f(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function vne(t){const e={},n=f(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const i=f(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function xne(t){const e={},n=f(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],gne(n));const i=f(t,["thought"]);i!=null&&m(e,["thought"],i);const s=f(t,["inlineData"]);s!=null&&m(e,["inlineData"],yne(s));const r=f(t,["fileData"]);r!=null&&m(e,["fileData"],vne(r));const a=f(t,["thoughtSignature"]);a!=null&&m(e,["thoughtSignature"],a);const c=f(t,["codeExecutionResult"]);c!=null&&m(e,["codeExecutionResult"],c);const u=f(t,["executableCode"]);u!=null&&m(e,["executableCode"],u);const h=f(t,["functionCall"]);h!=null&&m(e,["functionCall"],h);const g=f(t,["functionResponse"]);g!=null&&m(e,["functionResponse"],g);const x=f(t,["text"]);return x!=null&&m(e,["text"],x),e}function _ne(t){const e={},n=f(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>xne(r))),m(e,["parts"],s)}const i=f(t,["role"]);return i!=null&&m(e,["role"],i),e}function Tne(t){const e={},n=f(t,["citationSources"]);return n!=null&&m(e,["citations"],n),e}function wne(t){const e={},n=f(t,["retrievedUrl"]);n!=null&&m(e,["retrievedUrl"],n);const i=f(t,["urlRetrievalStatus"]);return i!=null&&m(e,["urlRetrievalStatus"],i),e}function bne(t){const e={},n=f(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>wne(s))),m(e,["urlMetadata"],i)}return e}function Ene(t){const e={},n=f(t,["content"]);n!=null&&m(e,["content"],_ne(n));const i=f(t,["citationMetadata"]);i!=null&&m(e,["citationMetadata"],Tne(i));const s=f(t,["tokenCount"]);s!=null&&m(e,["tokenCount"],s);const r=f(t,["finishReason"]);r!=null&&m(e,["finishReason"],r);const a=f(t,["urlContextMetadata"]);a!=null&&m(e,["urlContextMetadata"],bne(a));const c=f(t,["avgLogprobs"]);c!=null&&m(e,["avgLogprobs"],c);const u=f(t,["groundingMetadata"]);u!=null&&m(e,["groundingMetadata"],u);const h=f(t,["index"]);h!=null&&m(e,["index"],h);const g=f(t,["logprobsResult"]);g!=null&&m(e,["logprobsResult"],g);const x=f(t,["safetyRatings"]);return x!=null&&m(e,["safetyRatings"],x),e}function f2(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["candidates"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(h=>Ene(h))),m(e,["candidates"],u)}const s=f(t,["modelVersion"]);s!=null&&m(e,["modelVersion"],s);const r=f(t,["promptFeedback"]);r!=null&&m(e,["promptFeedback"],r);const a=f(t,["responseId"]);a!=null&&m(e,["responseId"],a);const c=f(t,["usageMetadata"]);return c!=null&&m(e,["usageMetadata"],c),e}function Sne(t){const e={},n=f(t,["values"]);return n!=null&&m(e,["values"],n),e}function Ane(){return{}}function Cne(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["embeddings"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>Sne(a))),m(e,["embeddings"],r)}return f(t,["metadata"])!=null&&m(e,["metadata"],Ane()),e}function Ine(t){const e={},n=f(t,["bytesBase64Encoded"]);n!=null&&m(e,["imageBytes"],Gl(n));const i=f(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function r4(t){const e={},n=f(t,["safetyAttributes","categories"]);n!=null&&m(e,["categories"],n);const i=f(t,["safetyAttributes","scores"]);i!=null&&m(e,["scores"],i);const s=f(t,["contentType"]);return s!=null&&m(e,["contentType"],s),e}function Rne(t){const e={},n=f(t,["_self"]);n!=null&&m(e,["image"],Ine(n));const i=f(t,["raiFilteredReason"]);i!=null&&m(e,["raiFilteredReason"],i);const s=f(t,["_self"]);return s!=null&&m(e,["safetyAttributes"],r4(s)),e}function Nne(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>Rne(a))),m(e,["generatedImages"],r)}const s=f(t,["positivePromptSafetyAttributes"]);return s!=null&&m(e,["positivePromptSafetyAttributes"],r4(s)),e}function Mne(t){const e={},n=f(t,["baseModel"]);n!=null&&m(e,["baseModel"],n);const i=f(t,["createTime"]);i!=null&&m(e,["createTime"],i);const s=f(t,["updateTime"]);return s!=null&&m(e,["updateTime"],s),e}function lT(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const i=f(t,["displayName"]);i!=null&&m(e,["displayName"],i);const s=f(t,["description"]);s!=null&&m(e,["description"],s);const r=f(t,["version"]);r!=null&&m(e,["version"],r);const a=f(t,["_self"]);a!=null&&m(e,["tunedModelInfo"],Mne(a));const c=f(t,["inputTokenLimit"]);c!=null&&m(e,["inputTokenLimit"],c);const u=f(t,["outputTokenLimit"]);u!=null&&m(e,["outputTokenLimit"],u);const h=f(t,["supportedGenerationMethods"]);return h!=null&&m(e,["supportedActions"],h),e}function Pne(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const s=f(t,["_self"]);if(s!=null){let r=zL(s);Array.isArray(r)&&(r=r.map(a=>lT(a))),m(e,["models"],r)}return e}function Dne(){return{}}function kne(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["totalTokens"]);i!=null&&m(e,["totalTokens"],i);const s=f(t,["cachedContentTokenCount"]);return s!=null&&m(e,["cachedContentTokenCount"],s),e}function Vne(t){const e={},n=f(t,["video","uri"]);n!=null&&m(e,["uri"],n);const i=f(t,["video","encodedVideo"]);i!=null&&m(e,["videoBytes"],Gl(i));const s=f(t,["encoding"]);return s!=null&&m(e,["mimeType"],s),e}function Lne(t){const e={},n=f(t,["_self"]);return n!=null&&m(e,["video"],Vne(n)),e}function Une(t){const e={},n=f(t,["generatedSamples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>Lne(a))),m(e,["generatedVideos"],r)}const i=f(t,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const s=f(t,["raiMediaFilteredReasons"]);return s!=null&&m(e,["raiMediaFilteredReasons"],s),e}function One(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const i=f(t,["metadata"]);i!=null&&m(e,["metadata"],i);const s=f(t,["done"]);s!=null&&m(e,["done"],s);const r=f(t,["error"]);r!=null&&m(e,["error"],r);const a=f(t,["response","generateVideoResponse"]);return a!=null&&m(e,["response"],Une(a)),e}function Fne(t){const e={},n=f(t,["fps"]);n!=null&&m(e,["fps"],n);const i=f(t,["endOffset"]);i!=null&&m(e,["endOffset"],i);const s=f(t,["startOffset"]);return s!=null&&m(e,["startOffset"],s),e}function Bne(t){const e={},n=f(t,["displayName"]);n!=null&&m(e,["displayName"],n);const i=f(t,["data"]);i!=null&&m(e,["data"],i);const s=f(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function qne(t){const e={},n=f(t,["displayName"]);n!=null&&m(e,["displayName"],n);const i=f(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const s=f(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function jne(t){const e={},n=f(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],Fne(n));const i=f(t,["thought"]);i!=null&&m(e,["thought"],i);const s=f(t,["inlineData"]);s!=null&&m(e,["inlineData"],Bne(s));const r=f(t,["fileData"]);r!=null&&m(e,["fileData"],qne(r));const a=f(t,["thoughtSignature"]);a!=null&&m(e,["thoughtSignature"],a);const c=f(t,["codeExecutionResult"]);c!=null&&m(e,["codeExecutionResult"],c);const u=f(t,["executableCode"]);u!=null&&m(e,["executableCode"],u);const h=f(t,["functionCall"]);h!=null&&m(e,["functionCall"],h);const g=f(t,["functionResponse"]);g!=null&&m(e,["functionResponse"],g);const x=f(t,["text"]);return x!=null&&m(e,["text"],x),e}function Gne(t){const e={},n=f(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>jne(r))),m(e,["parts"],s)}const i=f(t,["role"]);return i!=null&&m(e,["role"],i),e}function zne(t){const e={},n=f(t,["citations"]);return n!=null&&m(e,["citations"],n),e}function Hne(t){const e={},n=f(t,["retrievedUrl"]);n!=null&&m(e,["retrievedUrl"],n);const i=f(t,["urlRetrievalStatus"]);return i!=null&&m(e,["urlRetrievalStatus"],i),e}function $ne(t){const e={},n=f(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Hne(s))),m(e,["urlMetadata"],i)}return e}function Kne(t){const e={},n=f(t,["content"]);n!=null&&m(e,["content"],Gne(n));const i=f(t,["citationMetadata"]);i!=null&&m(e,["citationMetadata"],zne(i));const s=f(t,["finishMessage"]);s!=null&&m(e,["finishMessage"],s);const r=f(t,["finishReason"]);r!=null&&m(e,["finishReason"],r);const a=f(t,["urlContextMetadata"]);a!=null&&m(e,["urlContextMetadata"],$ne(a));const c=f(t,["avgLogprobs"]);c!=null&&m(e,["avgLogprobs"],c);const u=f(t,["groundingMetadata"]);u!=null&&m(e,["groundingMetadata"],u);const h=f(t,["index"]);h!=null&&m(e,["index"],h);const g=f(t,["logprobsResult"]);g!=null&&m(e,["logprobsResult"],g);const x=f(t,["safetyRatings"]);return x!=null&&m(e,["safetyRatings"],x),e}function m2(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(g=>Kne(g))),m(e,["candidates"],h)}const s=f(t,["createTime"]);s!=null&&m(e,["createTime"],s);const r=f(t,["modelVersion"]);r!=null&&m(e,["modelVersion"],r);const a=f(t,["promptFeedback"]);a!=null&&m(e,["promptFeedback"],a);const c=f(t,["responseId"]);c!=null&&m(e,["responseId"],c);const u=f(t,["usageMetadata"]);return u!=null&&m(e,["usageMetadata"],u),e}function Wne(t){const e={},n=f(t,["truncated"]);n!=null&&m(e,["truncated"],n);const i=f(t,["token_count"]);return i!=null&&m(e,["tokenCount"],i),e}function Yne(t){const e={},n=f(t,["values"]);n!=null&&m(e,["values"],n);const i=f(t,["statistics"]);return i!=null&&m(e,["statistics"],Wne(i)),e}function Jne(t){const e={},n=f(t,["billableCharacterCount"]);return n!=null&&m(e,["billableCharacterCount"],n),e}function Qne(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["predictions[]","embeddings"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>Yne(a))),m(e,["embeddings"],r)}const s=f(t,["metadata"]);return s!=null&&m(e,["metadata"],Jne(s)),e}function o4(t){const e={},n=f(t,["gcsUri"]);n!=null&&m(e,["gcsUri"],n);const i=f(t,["bytesBase64Encoded"]);i!=null&&m(e,["imageBytes"],Gl(i));const s=f(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function a4(t){const e={},n=f(t,["safetyAttributes","categories"]);n!=null&&m(e,["categories"],n);const i=f(t,["safetyAttributes","scores"]);i!=null&&m(e,["scores"],i);const s=f(t,["contentType"]);return s!=null&&m(e,["contentType"],s),e}function Hy(t){const e={},n=f(t,["_self"]);n!=null&&m(e,["image"],o4(n));const i=f(t,["raiFilteredReason"]);i!=null&&m(e,["raiFilteredReason"],i);const s=f(t,["_self"]);s!=null&&m(e,["safetyAttributes"],a4(s));const r=f(t,["prompt"]);return r!=null&&m(e,["enhancedPrompt"],r),e}function Xne(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>Hy(a))),m(e,["generatedImages"],r)}const s=f(t,["positivePromptSafetyAttributes"]);return s!=null&&m(e,["positivePromptSafetyAttributes"],a4(s)),e}function Zne(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>Hy(r))),m(e,["generatedImages"],s)}return e}function eie(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>Hy(r))),m(e,["generatedImages"],s)}return e}function tie(t){const e={},n=f(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Hy(s))),m(e,["generatedImages"],i)}return e}function nie(t){const e={},n=f(t,["label"]);n!=null&&m(e,["label"],n);const i=f(t,["score"]);return i!=null&&m(e,["score"],i),e}function iie(t){const e={},n=f(t,["_self"]);n!=null&&m(e,["mask"],o4(n));const i=f(t,["labels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>nie(r))),m(e,["labels"],s)}return e}function sie(t){const e={},n=f(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>iie(s))),m(e,["generatedMasks"],i)}return e}function rie(t){const e={},n=f(t,["endpoint"]);n!=null&&m(e,["name"],n);const i=f(t,["deployedModelId"]);return i!=null&&m(e,["deployedModelId"],i),e}function oie(t){const e={},n=f(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&m(e,["baseModel"],n);const i=f(t,["createTime"]);i!=null&&m(e,["createTime"],i);const s=f(t,["updateTime"]);return s!=null&&m(e,["updateTime"],s),e}function aie(t){const e={},n=f(t,["checkpointId"]);n!=null&&m(e,["checkpointId"],n);const i=f(t,["epoch"]);i!=null&&m(e,["epoch"],i);const s=f(t,["step"]);return s!=null&&m(e,["step"],s),e}function cT(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const i=f(t,["displayName"]);i!=null&&m(e,["displayName"],i);const s=f(t,["description"]);s!=null&&m(e,["description"],s);const r=f(t,["versionId"]);r!=null&&m(e,["version"],r);const a=f(t,["deployedModels"]);if(a!=null){let x=a;Array.isArray(x)&&(x=x.map(T=>rie(T))),m(e,["endpoints"],x)}const c=f(t,["labels"]);c!=null&&m(e,["labels"],c);const u=f(t,["_self"]);u!=null&&m(e,["tunedModelInfo"],oie(u));const h=f(t,["defaultCheckpointId"]);h!=null&&m(e,["defaultCheckpointId"],h);const g=f(t,["checkpoints"]);if(g!=null){let x=g;Array.isArray(x)&&(x=x.map(T=>aie(T))),m(e,["checkpoints"],x)}return e}function lie(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const s=f(t,["_self"]);if(s!=null){let r=zL(s);Array.isArray(r)&&(r=r.map(a=>cT(a))),m(e,["models"],r)}return e}function cie(){return{}}function uie(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["totalTokens"]);return i!=null&&m(e,["totalTokens"],i),e}function die(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["tokensInfo"]);return i!=null&&m(e,["tokensInfo"],i),e}function hie(t){const e={},n=f(t,["gcsUri"]);n!=null&&m(e,["uri"],n);const i=f(t,["bytesBase64Encoded"]);i!=null&&m(e,["videoBytes"],Gl(i));const s=f(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function fie(t){const e={},n=f(t,["_self"]);return n!=null&&m(e,["video"],hie(n)),e}function mie(t){const e={},n=f(t,["videos"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>fie(a))),m(e,["generatedVideos"],r)}const i=f(t,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const s=f(t,["raiMediaFilteredReasons"]);return s!=null&&m(e,["raiMediaFilteredReasons"],s),e}function pie(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const i=f(t,["metadata"]);i!=null&&m(e,["metadata"],i);const s=f(t,["done"]);s!=null&&m(e,["done"],s);const r=f(t,["error"]);r!=null&&m(e,["error"],r);const a=f(t,["response"]);return a!=null&&m(e,["response"],mie(a)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gie="Content-Type",yie="X-Server-Timeout",vie="User-Agent",uT="x-goog-api-client",xie="1.15.0",_ie=`google-genai-sdk/${xie}`,Tie="v1beta1",wie="v1beta",p2=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class bie{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Tie,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:wie,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const s=[this.getRequestUrlInternal(n)];return i&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}request(e){return A(this,null,function*(){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[a,c]of Object.entries(e.queryParams))s.searchParams.append(a,String(c));let r={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else r.body=e.body;return r=yield this.includeExtraHttpOptionsToRequestInit(r,n,e.abortSignal),this.unaryApiCall(s,r,e.httpMethod)})}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[s,r]of Object.entries(n))typeof r=="object"?i[s]=Object.assign(Object.assign({},i[s]),r):r!==void 0&&(i[s]=r);return i}requestStream(e){return A(this,null,function*(){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,i);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let r={};return r.body=e.body,r=yield this.includeExtraHttpOptionsToRequestInit(r,n,e.abortSignal),this.streamApiCall(s,r,e.httpMethod)})}includeExtraHttpOptionsToRequestInit(e,n,i){return A(this,null,function*(){if(n&&n.timeout||i){const s=new AbortController,r=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>s.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}i&&i.addEventListener("abort",()=>{s.abort()}),e.signal=r}return n&&n.extraBody!==null&&Eie(e,n.extraBody),e.headers=yield this.getHeadersInternal(n),e})}unaryApiCall(e,n,i){return A(this,null,function*(){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(s=>A(this,null,function*(){return yield g2(s),new iT(s)})).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})})}streamApiCall(e,n,i){return A(this,null,function*(){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(s=>A(this,null,function*(){return yield g2(s),this.processStreamResponse(s)})).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})})}processStreamResponse(e){var n;return pu(this,arguments,function*(){const s=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),r=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let a="";for(;;){const{done:c,value:u}=yield qt(s.read());if(c){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=r.decode(u,{stream:!0});try{const x=JSON.parse(h);if("error"in x){const T=JSON.parse(JSON.stringify(x.error)),b=T.status,S=T.code,P=`got status: ${b}. ${JSON.stringify(x)}`;if(S>=400&&S<600)throw new Gy({message:P,status:S})}}catch(x){if(x.name==="ApiError")throw x}a+=h;let g=a.match(p2);for(;g;){const x=g[1];try{const T=new Response(x,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield qt(new iT(T)),a=a.slice(g[0].length),g=a.match(p2)}catch(T){throw new Error(`exception parsing stream chunk ${x}. ${T}`)}}}}finally{s.releaseLock()}})}apiCall(e,n){return A(this,null,function*(){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})})}getDefaultHeaders(){const e={},n=_ie+" "+this.clientOptions.userAgentExtra;return e[vie]=n,e[uT]=n,e[gie]="application/json",e}getHeadersInternal(e){return A(this,null,function*(){const n=new Headers;if(e&&e.headers){for(const[i,s]of Object.entries(e.headers))n.append(i,s);e.timeout&&e.timeout>0&&n.append(yie,String(Math.ceil(e.timeout/1e3)))}return yield this.clientOptions.auth.addAuthHeaders(n),n})}uploadFile(e,n){return A(this,null,function*(){var i;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const r=this.clientOptions.uploader,a=yield r.stat(e);s.sizeBytes=String(a.size);const c=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:a.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=c;const u=yield this.fetchUploadUrl(s,n);return r.upload(e,u,this)})}downloadFile(e){return A(this,null,function*(){yield this.clientOptions.downloader.download(e,this)})}fetchUploadUrl(e,n){return A(this,null,function*(){var i;let s={};n!=null&&n.httpOptions?s=n.httpOptions:s={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const r={file:e},a=yield this.request({path:Le("upload/v1beta/files",r._url),body:JSON.stringify(r),httpMethod:"POST",httpOptions:s});if(!a||!(a!=null&&a.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const c=(i=a==null?void 0:a.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(c===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return c})}}function g2(t){return A(this,null,function*(){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=yield t.json():i={error:{message:yield t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(i);throw n>=400&&n<600?new Gy({message:s,status:n}):new Error(s)}})}function Eie(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const r=JSON.parse(t.body);if(typeof r=="object"&&r!==null&&!Array.isArray(r))n=r;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch(r){console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(r,a){const c=Object.assign({},r);for(const u in a)if(Object.prototype.hasOwnProperty.call(a,u)){const h=a[u],g=c[u];h&&typeof h=="object"&&!Array.isArray(h)&&g&&typeof g=="object"&&!Array.isArray(g)?c[u]=i(g,h):(g&&h&&typeof g!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${u}". Original type: ${typeof g}, New type: ${typeof h}. Overwriting.`),c[u]=h)}return c}const s=i(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Sie="mcp_used/unknown";let Aie=!1;function l4(t){for(const e of t)if(Cie(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Aie}function c4(t){var e;const n=(e=t[uT])!==null&&e!==void 0?e:"";t[uT]=(n+` ${Sie}`).trimStart()}function Cie(t){return t!==null&&typeof t=="object"&&t instanceof jb}function Iie(t,e=100){return pu(this,arguments,function*(){let i,s=0;for(;s<e;){const r=yield qt(t.listTools({cursor:i}));for(const a of r.tools)yield yield qt(a),s++;if(!r.nextCursor)break;i=r.nextCursor}})}class jb{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new jb(e,n)}initialize(){return A(this,null,function*(){var e,n,i,s;if(this.mcpTools.length>0)return;const r={},a=[];for(const g of this.mcpClients)try{for(var c=!0,u=(n=void 0,af(Iie(g))),h;h=yield u.next(),e=h.done,!e;c=!0){s=h.value,c=!1;const x=s;a.push(x);const T=x.name;if(r[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);r[T]=g}}catch(x){n={error:x}}finally{try{!c&&!e&&(i=u.return)&&(yield i.call(u))}finally{if(n)throw n.error}}this.mcpTools=a,this.functionNameToMcpClient=r})}tool(){return A(this,null,function*(){return yield this.initialize(),rJ(this.mcpTools,this.config)})}callTool(e){return A(this,null,function*(){yield this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[i.name];let r;this.config.timeout&&(r={timeout:this.config.timeout});const a=yield s.callTool({name:i.name,arguments:i.args},void 0,r);n.push({functionResponse:{name:i.name,response:a.isError?{error:a}:a}})}return n})}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rie(t,e,n){return A(this,null,function*(){const i=new QY;let s;n.data instanceof Blob?s=JSON.parse(yield n.data.text()):s=JSON.parse(n.data);const r=cee(s);Object.assign(i,r),e(i)})}class Nie{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}connect(e){return A(this,null,function*(){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),r=this.apiClient.getApiVersion(),a=Die(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),u=`${s}/ws/google.ai.generativelanguage.${r}.GenerativeService.BidiGenerateMusic?key=${c}`;let h=()=>{};const g=new Promise(O=>{h=O}),x=e.callbacks,T=function(){h({})},b=this.apiClient,S={onopen:T,onmessage:O=>{Rie(b,x.onmessage,O)},onerror:(n=x==null?void 0:x.onerror)!==null&&n!==void 0?n:function(O){},onclose:(i=x==null?void 0:x.onclose)!==null&&i!==void 0?i:function(O){}},P=this.webSocketFactory.create(u,Pie(a),S);P.connect(),yield g;const M=Et(this.apiClient,e.model),V=t4({model:M}),q=aT({setup:V});return P.send(JSON.stringify(q)),new Mie(P,this.apiClient)})}}class Mie{constructor(e,n){this.conn=e,this.apiClient=n}setWeightedPrompts(e){return A(this,null,function*(){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=oZ(e),i=n4(n);this.conn.send(JSON.stringify({clientContent:i}))})}setMusicGenerationConfig(e){return A(this,null,function*(){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=aZ(e),i=aT(n);this.conn.send(JSON.stringify(i))})}sendPlaybackControl(e){const n=aT({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(su.PLAY)}pause(){this.sendPlaybackControl(su.PAUSE)}stop(){this.sendPlaybackControl(su.STOP)}resetContext(){this.sendPlaybackControl(su.RESET_CONTEXT)}close(){this.conn.close()}}function Pie(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function Die(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kie="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";function Vie(t,e,n){return A(this,null,function*(){const i=new JY;let s;n.data instanceof Blob?s=yield n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const r=JSON.parse(s);if(t.isVertexAI()){const a=bee(r);Object.assign(i,a)}else{const a=eee(r);Object.assign(i,a)}e(i)})}class Lie{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new Nie(this.apiClient,this.auth,this.webSocketFactory)}connect(e){return A(this,null,function*(){var n,i,s,r,a,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const u=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let g;const x=this.apiClient.getHeaders();e.config&&e.config.tools&&l4(e.config.tools)&&c4(x);const T=Bie(x);if(this.apiClient.isVertexAI())g=`${u}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,yield this.auth.addAuthHeaders(T);else{const R=this.apiClient.getApiKey();let L="BidiGenerateContent",F="key";R!=null&&R.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),L="BidiGenerateContentConstrained",F="access_token"),g=`${u}/ws/google.ai.generativelanguage.${h}.GenerativeService.${L}?${F}=${R}`}let b=()=>{};const S=new Promise(R=>{b=R}),P=e.callbacks,M=function(){var R;(R=P==null?void 0:P.onopen)===null||R===void 0||R.call(P),b({})},V=this.apiClient,q={onopen:M,onmessage:R=>{Vie(V,P.onmessage,R)},onerror:(n=P==null?void 0:P.onerror)!==null&&n!==void 0?n:function(R){},onclose:(i=P==null?void 0:P.onclose)!==null&&i!==void 0?i:function(R){}},O=this.webSocketFactory.create(g,Fie(T),q);O.connect(),yield S;let z=Et(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&z.startsWith("publishers/")){const R=this.apiClient.getProject(),L=this.apiClient.getLocation();z=`projects/${R}/locations/${L}/`+z}let j={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Jg.AUDIO]}:e.config.responseModalities=[Jg.AUDIO]),!((r=e.config)===null||r===void 0)&&r.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const W=(c=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&c!==void 0?c:[],D=[];for(const R of W)if(this.isCallableTool(R)){const L=R;D.push(yield L.tool())}else D.push(R);D.length>0&&(e.config.tools=D);const C={model:z,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?j=VZ(this.apiClient,C):j=nZ(this.apiClient,C),delete j.config,O.send(JSON.stringify(j)),new Oie(O,this.apiClient)})}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Uie={turnComplete:!0};class Oie{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=ds(n.turns),e.isVertexAI()?i=i.map(s=>ud(s)):i=i.map(s=>zy(s))}catch(s){throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const r of i){if(typeof r!="object"||r===null||!("name"in r)||!("response"in r))throw new Error(`Could not parse function response, type '${typeof r}'.`);if(!e.isVertexAI()&&!("id"in r))throw new Error(kie)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},Uie),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:OZ(e)}:n={realtimeInput:rZ(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Fie(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function Bie(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const y2=10;function v2(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const a of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(gu(a)){s=!0;break}if(!s)return!0;const r=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return r&&(r<0||!Number.isInteger(r))||r==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",r),!0):!1}function gu(t){return"callTool"in t&&typeof t.callTool=="function"}function qie(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>gu(s)))!==null&&i!==void 0?i:!1}function jie(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>!gu(s)))!==null&&i!==void 0?i:!1}function x2(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gie extends jl{constructor(e){super(),this.apiClient=e,this.generateContent=n=>A(this,null,function*(){var i,s,r,a,c;const u=yield this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!qie(n)||v2(n.config))return yield this.generateContentInternal(u);if(jie(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let h,g;const x=ds(u.contents),T=(r=(s=(i=u.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:y2;let b=0;for(;b<T&&(h=yield this.generateContentInternal(u),!(!h.functionCalls||h.functionCalls.length===0));){const S=h.candidates[0].content,P=[];for(const M of(c=(a=n.config)===null||a===void 0?void 0:a.tools)!==null&&c!==void 0?c:[])if(gu(M)){const q=yield M.callTool(h.functionCalls);P.push(...q)}b++,g={role:"user",parts:P},u.contents=ds(u.contents),u.contents.push(S),u.contents.push(g),x2(u.config)&&(x.push(S),x.push(g))}return x2(u.config)&&(h.automaticFunctionCallingHistory=x),h}),this.generateContentStream=n=>A(this,null,function*(){if(this.maybeMoveToResponseJsonSchem(n),v2(n.config)){const i=yield this.processParamsMaybeAddMcpUsage(n);return yield this.generateContentStreamInternal(i)}else return yield this.processAfcStream(n)}),this.generateImages=n=>A(this,null,function*(){return yield this.generateImagesInternal(n).then(i=>{var s;let r;const a=[];if(i!=null&&i.generatedImages)for(const u of i.generatedImages)u&&(u!=null&&u.safetyAttributes)&&((s=u==null?void 0:u.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?r=u==null?void 0:u.safetyAttributes:a.push(u);let c;return r?c={generatedImages:a,positivePromptSafetyAttributes:r,sdkHttpResponse:i.sdkHttpResponse}:c={generatedImages:a,sdkHttpResponse:i.sdkHttpResponse},c})}),this.list=n=>A(this,null,function*(){var i;const a={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((i=a.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new cm(Vl.PAGED_ITEM_MODELS,c=>this.listInternal(c),yield this.listInternal(a),a)}),this.editImage=n=>A(this,null,function*(){const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),yield this.editImageInternal(i)}),this.upscaleImage=n=>A(this,null,function*(){let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return yield this.upscaleImageInternal(s)}),this.generateVideos=n=>A(this,null,function*(){return yield this.generateVideosInternal(n)})}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}processParamsMaybeAddMcpUsage(e){return A(this,null,function*(){var n,i,s;const r=(n=e.config)===null||n===void 0?void 0:n.tools;if(!r)return e;const a=yield Promise.all(r.map(u=>A(null,null,function*(){return gu(u)?yield u.tool():u}))),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(c.config.tools=a,e.config&&e.config.tools&&l4(e.config.tools)){const u=(s=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&s!==void 0?s:{};let h=Object.assign({},u);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),c4(h),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return c})}initAfcToolsMap(e){return A(this,null,function*(){var n,i,s;const r=new Map;for(const a of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(gu(a)){const c=a,u=yield c.tool();for(const h of(s=u.functionDeclarations)!==null&&s!==void 0?s:[]){if(!h.name)throw new Error("Function declaration name is required.");if(r.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);r.set(h.name,c)}}return r})}processAfcStream(e){return A(this,null,function*(){var n,i,s;const r=(s=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:y2;let a=!1,c=0;const u=yield this.initAfcToolsMap(e);return(function(h,g,x){var T,b;return pu(this,arguments,function*(){for(var S,P,M,V;c<r;){a&&(c++,a=!1);const j=yield qt(h.processParamsMaybeAddMcpUsage(x)),W=yield qt(h.generateContentStreamInternal(j)),D=[],C=[];try{for(var q=!0,O=(P=void 0,af(W)),z;z=yield qt(O.next()),S=z.done,!S;q=!0){V=z.value,q=!1;const R=V;if(yield yield qt(R),R.candidates&&(!((T=R.candidates[0])===null||T===void 0)&&T.content)){C.push(R.candidates[0].content);for(const L of(b=R.candidates[0].content.parts)!==null&&b!==void 0?b:[])if(c<r&&L.functionCall){if(!L.functionCall.name)throw new Error("Function call name was not returned by the model.");if(g.has(L.functionCall.name)){const F=yield qt(g.get(L.functionCall.name).callTool([L.functionCall]));D.push(...F)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${g.keys()}, mising tool: ${L.functionCall.name}`)}}}}catch(R){P={error:R}}finally{try{!q&&!S&&(M=O.return)&&(yield qt(M.call(O)))}finally{if(P)throw P.error}}if(D.length>0){a=!0;const R=new Ih;R.candidates=[{content:{role:"user",parts:D}}],yield yield qt(R);const L=[];L.push(...C),L.push({role:"user",parts:D});const F=ds(x.contents).concat(L);x.contents=F}else break}})})(this,u,e)})}generateContentInternal(e){return A(this,null,function*(){var n,i,s,r;let a,c="",u={};if(this.apiClient.isVertexAI()){const h=h2(this.apiClient,e);return c=Le("{model}:generateContent",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:g.headers},T})),a.then(g=>{const x=m2(g),T=new Ih;return Object.assign(T,x),T})}else{const h=d2(this.apiClient,e);return c=Le("{model}:generateContent",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:g.headers},T})),a.then(g=>{const x=f2(g),T=new Ih;return Object.assign(T,x),T})}})}generateContentStreamInternal(e){return A(this,null,function*(){var n,i,s,r;let a,c="",u={};if(this.apiClient.isVertexAI()){const h=h2(this.apiClient,e);return c=Le("{model}:streamGenerateContent?alt=sse",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.requestStream({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),a.then(function(x){return pu(this,arguments,function*(){var T,b,S,P;try{for(var M=!0,V=af(x),q;q=yield qt(V.next()),T=q.done,!T;M=!0){P=q.value,M=!1;const O=P,z=m2(yield qt(O.json()));z.sdkHttpResponse={headers:O.headers};const j=new Ih;Object.assign(j,z),yield yield qt(j)}}catch(O){b={error:O}}finally{try{!M&&!T&&(S=V.return)&&(yield qt(S.call(V)))}finally{if(b)throw b.error}}})})}else{const h=d2(this.apiClient,e);return c=Le("{model}:streamGenerateContent?alt=sse",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.requestStream({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),a.then(function(x){return pu(this,arguments,function*(){var T,b,S,P;try{for(var M=!0,V=af(x),q;q=yield qt(V.next()),T=q.done,!T;M=!0){P=q.value,M=!1;const O=P,z=f2(yield qt(O.json()));z.sdkHttpResponse={headers:O.headers};const j=new Ih;Object.assign(j,z),yield yield qt(j)}}catch(O){b={error:O}}finally{try{!M&&!T&&(S=V.return)&&(yield qt(S.call(V)))}finally{if(b)throw b.error}}})})}})}embedContent(e){return A(this,null,function*(){var n,i,s,r;let a,c="",u={};if(this.apiClient.isVertexAI()){const h=Ute(this.apiClient,e);return c=Le("{model}:predict",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:g.headers},T})),a.then(g=>{const x=Qne(g),T=new GN;return Object.assign(T,x),T})}else{const h=Yee(this.apiClient,e);return c=Le("{model}:batchEmbedContents",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:g.headers},T})),a.then(g=>{const x=Cne(g),T=new GN;return Object.assign(T,x),T})}})}generateImagesInternal(e){return A(this,null,function*(){var n,i,s,r;let a,c="",u={};if(this.apiClient.isVertexAI()){const h=Fte(this.apiClient,e);return c=Le("{model}:predict",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:g.headers},T})),a.then(g=>{const x=Xne(g),T=new zN;return Object.assign(T,x),T})}else{const h=Qee(this.apiClient,e);return c=Le("{model}:predict",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:g.headers},T})),a.then(g=>{const x=Nne(g),T=new zN;return Object.assign(T,x),T})}})}editImageInternal(e){return A(this,null,function*(){var n,i;let s,r="",a={};if(this.apiClient.isVertexAI()){const c=$te(this.apiClient,e);return r=Le("{model}:predict",c._url),a=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:u.headers},g})),s.then(u=>{const h=Zne(u),g=new jY;return Object.assign(g,h),g})}else throw new Error("This method is only supported by the Vertex AI.")})}upscaleImageInternal(e){return A(this,null,function*(){var n,i;let s,r="",a={};if(this.apiClient.isVertexAI()){const c=Wte(this.apiClient,e);return r=Le("{model}:predict",c._url),a=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:u.headers},g})),s.then(u=>{const h=eie(u),g=new GY;return Object.assign(g,h),g})}else throw new Error("This method is only supported by the Vertex AI.")})}recontextImage(e){return A(this,null,function*(){var n,i;let s,r="",a={};if(this.apiClient.isVertexAI()){const c=Xte(this.apiClient,e);return r=Le("{model}:predict",c._url),a=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),s.then(u=>{const h=tie(u),g=new zY;return Object.assign(g,h),g})}else throw new Error("This method is only supported by the Vertex AI.")})}segmentImage(e){return A(this,null,function*(){var n,i;let s,r="",a={};if(this.apiClient.isVertexAI()){const c=nne(this.apiClient,e);return r=Le("{model}:predict",c._url),a=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),s.then(u=>{const h=sie(u),g=new HY;return Object.assign(g,h),g})}else throw new Error("This method is only supported by the Vertex AI.")})}get(e){return A(this,null,function*(){var n,i,s,r;let a,c="",u={};if(this.apiClient.isVertexAI()){const h=ine(this.apiClient,e);return c=Le("{name}",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>cT(g))}else{const h=Xee(this.apiClient,e);return c=Le("{name}",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>lT(g))}})}listInternal(e){return A(this,null,function*(){var n,i,s,r;let a,c="",u={};if(this.apiClient.isVertexAI()){const h=rne(this.apiClient,e);return c=Le("{models_url}",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:g.headers},T})),a.then(g=>{const x=lie(g),T=new HN;return Object.assign(T,x),T})}else{const h=ete(this.apiClient,e);return c=Le("{models_url}",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:g.headers},T})),a.then(g=>{const x=Pne(g),T=new HN;return Object.assign(T,x),T})}})}update(e){return A(this,null,function*(){var n,i,s,r;let a,c="",u={};if(this.apiClient.isVertexAI()){const h=ane(this.apiClient,e);return c=Le("{model}",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>cT(g))}else{const h=nte(this.apiClient,e);return c=Le("{name}",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>lT(g))}})}delete(e){return A(this,null,function*(){var n,i,s,r;let a,c="",u={};if(this.apiClient.isVertexAI()){const h=lne(this.apiClient,e);return c=Le("{name}",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(()=>{const g=cie(),x=new $N;return Object.assign(x,g),x})}else{const h=ite(this.apiClient,e);return c=Le("{name}",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(()=>{const g=Dne(),x=new $N;return Object.assign(x,g),x})}})}countTokens(e){return A(this,null,function*(){var n,i,s,r;let a,c="",u={};if(this.apiClient.isVertexAI()){const h=une(this.apiClient,e);return c=Le("{model}:countTokens",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:g.headers},T})),a.then(g=>{const x=uie(g),T=new KN;return Object.assign(T,x),T})}else{const h=rte(this.apiClient,e);return c=Le("{model}:countTokens",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:g.headers},T})),a.then(g=>{const x=kne(g),T=new KN;return Object.assign(T,x),T})}})}computeTokens(e){return A(this,null,function*(){var n,i;let s,r="",a={};if(this.apiClient.isVertexAI()){const c=dne(this.apiClient,e);return r=Le("{model}:computeTokens",c._url),a=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:u.headers},g})),s.then(u=>{const h=die(u),g=new $Y;return Object.assign(g,h),g})}else throw new Error("This method is only supported by the Vertex AI.")})}generateVideosInternal(e){return A(this,null,function*(){var n,i,s,r;let a,c="",u={};if(this.apiClient.isVertexAI()){const h=pne(this.apiClient,e);return c=Le("{model}:predictLongRunning",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a.then(g=>{const x=pie(g),T=new Qg;return Object.assign(T,x),T})}else{const h=lte(this.apiClient,e);return c=Le("{model}:predictLongRunning",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>{const x=One(g),T=new Qg;return Object.assign(T,x),T})}})}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zie(t){const e={},n=f(t,["operationName"]);n!=null&&m(e,["_url","operationName"],n);const i=f(t,["config"]);return i!=null&&m(e,["config"],i),e}function Hie(t){const e={},n=f(t,["operationName"]);n!=null&&m(e,["_url","operationName"],n);const i=f(t,["config"]);return i!=null&&m(e,["config"],i),e}function $ie(t){const e={},n=f(t,["operationName"]);n!=null&&m(e,["operationName"],n);const i=f(t,["resourceName"]);i!=null&&m(e,["_url","resourceName"],i);const s=f(t,["config"]);return s!=null&&m(e,["config"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kie extends jl{constructor(e){super(),this.apiClient=e}getVideosOperation(e){return A(this,null,function*(){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let r;i&&"httpOptions"in i&&(r=i.httpOptions);const a=yield this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:r}});return n._fromAPIResponse({apiResponse:a,isVertexAI:!0})}else{const s=yield this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:s,isVertexAI:!1})}})}get(e){return A(this,null,function*(){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let r;i&&"httpOptions"in i&&(r=i.httpOptions);const a=yield this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:r}});return n._fromAPIResponse({apiResponse:a,isVertexAI:!0})}else{const s=yield this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:s,isVertexAI:!1})}})}getVideosOperationInternal(e){return A(this,null,function*(){var n,i,s,r;let a,c="",u={};if(this.apiClient.isVertexAI()){const h=Hie(e);return c=Le("{operationName}",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),a}else{const h=zie(e);return c=Le("{operationName}",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a}})}fetchPredictVideosOperationInternal(e){return A(this,null,function*(){var n,i;let s,r="",a={};if(this.apiClient.isVertexAI()){const c=$ie(e);return r=Le("{resourceName}:fetchPredictOperation",c._url),a=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),s}else throw new Error("This method is only supported by the Vertex AI.")})}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wie(t){const e={},n=f(t,["voiceName"]);return n!=null&&m(e,["voiceName"],n),e}function u4(t){const e={},n=f(t,["prebuiltVoiceConfig"]);return n!=null&&m(e,["prebuiltVoiceConfig"],Wie(n)),e}function Yie(t){const e={},n=f(t,["speaker"]);n!=null&&m(e,["speaker"],n);const i=f(t,["voiceConfig"]);return i!=null&&m(e,["voiceConfig"],u4(i)),e}function Jie(t){const e={},n=f(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Yie(s))),m(e,["speakerVoiceConfigs"],i)}return e}function Qie(t){const e={},n=f(t,["voiceConfig"]);n!=null&&m(e,["voiceConfig"],u4(n));const i=f(t,["multiSpeakerVoiceConfig"]);i!=null&&m(e,["multiSpeakerVoiceConfig"],Jie(i));const s=f(t,["languageCode"]);return s!=null&&m(e,["languageCode"],s),e}function Xie(t){const e={},n=f(t,["fps"]);n!=null&&m(e,["fps"],n);const i=f(t,["endOffset"]);i!=null&&m(e,["endOffset"],i);const s=f(t,["startOffset"]);return s!=null&&m(e,["startOffset"],s),e}function Zie(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["data"]);n!=null&&m(e,["data"],n);const i=f(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function ese(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const i=f(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function tse(t){const e={},n=f(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],Xie(n));const i=f(t,["thought"]);i!=null&&m(e,["thought"],i);const s=f(t,["inlineData"]);s!=null&&m(e,["inlineData"],Zie(s));const r=f(t,["fileData"]);r!=null&&m(e,["fileData"],ese(r));const a=f(t,["thoughtSignature"]);a!=null&&m(e,["thoughtSignature"],a);const c=f(t,["codeExecutionResult"]);c!=null&&m(e,["codeExecutionResult"],c);const u=f(t,["executableCode"]);u!=null&&m(e,["executableCode"],u);const h=f(t,["functionCall"]);h!=null&&m(e,["functionCall"],h);const g=f(t,["functionResponse"]);g!=null&&m(e,["functionResponse"],g);const x=f(t,["text"]);return x!=null&&m(e,["text"],x),e}function nse(t){const e={},n=f(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>tse(r))),m(e,["parts"],s)}const i=f(t,["role"]);return i!=null&&m(e,["role"],i),e}function ise(t){const e={},n=f(t,["behavior"]);n!=null&&m(e,["behavior"],n);const i=f(t,["description"]);i!=null&&m(e,["description"],i);const s=f(t,["name"]);s!=null&&m(e,["name"],s);const r=f(t,["parameters"]);r!=null&&m(e,["parameters"],r);const a=f(t,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const c=f(t,["response"]);c!=null&&m(e,["response"],c);const u=f(t,["responseJsonSchema"]);return u!=null&&m(e,["responseJsonSchema"],u),e}function sse(t){const e={},n=f(t,["startTime"]);n!=null&&m(e,["startTime"],n);const i=f(t,["endTime"]);return i!=null&&m(e,["endTime"],i),e}function rse(t){const e={},n=f(t,["timeRangeFilter"]);if(n!=null&&m(e,["timeRangeFilter"],sse(n)),f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function ose(t){const e={},n=f(t,["mode"]);n!=null&&m(e,["mode"],n);const i=f(t,["dynamicThreshold"]);return i!=null&&m(e,["dynamicThreshold"],i),e}function ase(t){const e={},n=f(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],ose(n)),e}function lse(){return{}}function cse(t){const e={},n=f(t,["environment"]);return n!=null&&m(e,["environment"],n),e}function use(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(h=>ise(h))),m(e,["functionDeclarations"],u)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["googleSearch"]);i!=null&&m(e,["googleSearch"],rse(i));const s=f(t,["googleSearchRetrieval"]);if(s!=null&&m(e,["googleSearchRetrieval"],ase(s)),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(f(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");f(t,["urlContext"])!=null&&m(e,["urlContext"],lse());const a=f(t,["computerUse"]);a!=null&&m(e,["computerUse"],cse(a));const c=f(t,["codeExecution"]);return c!=null&&m(e,["codeExecution"],c),e}function dse(t){const e={},n=f(t,["handle"]);if(n!=null&&m(e,["handle"],n),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function _2(){return{}}function hse(t){const e={},n=f(t,["disabled"]);n!=null&&m(e,["disabled"],n);const i=f(t,["startOfSpeechSensitivity"]);i!=null&&m(e,["startOfSpeechSensitivity"],i);const s=f(t,["endOfSpeechSensitivity"]);s!=null&&m(e,["endOfSpeechSensitivity"],s);const r=f(t,["prefixPaddingMs"]);r!=null&&m(e,["prefixPaddingMs"],r);const a=f(t,["silenceDurationMs"]);return a!=null&&m(e,["silenceDurationMs"],a),e}function fse(t){const e={},n=f(t,["automaticActivityDetection"]);n!=null&&m(e,["automaticActivityDetection"],hse(n));const i=f(t,["activityHandling"]);i!=null&&m(e,["activityHandling"],i);const s=f(t,["turnCoverage"]);return s!=null&&m(e,["turnCoverage"],s),e}function mse(t){const e={},n=f(t,["targetTokens"]);return n!=null&&m(e,["targetTokens"],n),e}function pse(t){const e={},n=f(t,["triggerTokens"]);n!=null&&m(e,["triggerTokens"],n);const i=f(t,["slidingWindow"]);return i!=null&&m(e,["slidingWindow"],mse(i)),e}function gse(t){const e={},n=f(t,["proactiveAudio"]);return n!=null&&m(e,["proactiveAudio"],n),e}function yse(t,e){const n={},i=f(t,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],i);const s=f(t,["responseModalities"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","responseModalities"],s);const r=f(t,["temperature"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig","temperature"],r);const a=f(t,["topP"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","topP"],a);const c=f(t,["topK"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","topK"],c);const u=f(t,["maxOutputTokens"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","maxOutputTokens"],u);const h=f(t,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const g=f(t,["seed"]);e!==void 0&&g!=null&&m(e,["setup","generationConfig","seed"],g);const x=f(t,["speechConfig"]);e!==void 0&&x!=null&&m(e,["setup","generationConfig","speechConfig"],Qie(qb(x)));const T=f(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],T);const b=f(t,["systemInstruction"]);e!==void 0&&b!=null&&m(e,["setup","systemInstruction"],nse(ri(b)));const S=f(t,["tools"]);if(e!==void 0&&S!=null){let j=ld(S);Array.isArray(j)&&(j=j.map(W=>use(ad(W)))),m(e,["setup","tools"],j)}const P=f(t,["sessionResumption"]);e!==void 0&&P!=null&&m(e,["setup","sessionResumption"],dse(P));const M=f(t,["inputAudioTranscription"]);e!==void 0&&M!=null&&m(e,["setup","inputAudioTranscription"],_2());const V=f(t,["outputAudioTranscription"]);e!==void 0&&V!=null&&m(e,["setup","outputAudioTranscription"],_2());const q=f(t,["realtimeInputConfig"]);e!==void 0&&q!=null&&m(e,["setup","realtimeInputConfig"],fse(q));const O=f(t,["contextWindowCompression"]);e!==void 0&&O!=null&&m(e,["setup","contextWindowCompression"],pse(O));const z=f(t,["proactivity"]);return e!==void 0&&z!=null&&m(e,["setup","proactivity"],gse(z)),n}function vse(t,e){const n={},i=f(e,["model"]);i!=null&&m(n,["setup","model"],Et(t,i));const s=f(e,["config"]);return s!=null&&m(n,["config"],yse(s,n)),n}function xse(t,e,n){const i={},s=f(e,["expireTime"]);n!==void 0&&s!=null&&m(n,["expireTime"],s);const r=f(e,["newSessionExpireTime"]);n!==void 0&&r!=null&&m(n,["newSessionExpireTime"],r);const a=f(e,["uses"]);n!==void 0&&a!=null&&m(n,["uses"],a);const c=f(e,["liveConnectConstraints"]);n!==void 0&&c!=null&&m(n,["bidiGenerateContentSetup"],vse(t,c));const u=f(e,["lockAdditionalFields"]);return n!==void 0&&u!=null&&m(n,["fieldMask"],u),i}function _se(t,e){const n={},i=f(e,["config"]);return i!=null&&m(n,["config"],xse(t,i,n)),n}function Tse(t){const e={},n=f(t,["name"]);return n!=null&&m(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wse(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const s=Object.keys(i).map(r=>`${n}.${r}`);e.push(...s)}else e.push(n)}return e.join(",")}function bse(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const r=i.setup;typeof r=="object"&&r!==null?(t.bidiGenerateContentSetup=r,n=r):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const r=wse(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)r?t.fieldMask=r:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];s.length>0&&(c=s.map(h=>a.includes(h)?`generationConfig.${h}`:h));const u=[];r&&u.push(r),c.length>0&&u.push(...c),u.length>0?t.fieldMask=u.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class Ese extends jl{constructor(e){super(),this.apiClient=e}create(e){return A(this,null,function*(){var n,i;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=_se(this.apiClient,e);r=Le("auth_tokens",c._url),a=c._query,delete c.config,delete c._url,delete c._query;const u=bse(c,e.config);return s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>Tse(h))}})}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Sse(t){const e={},n=f(t,["name"]);n!=null&&m(e,["_url","name"],n);const i=f(t,["config"]);return i!=null&&m(e,["config"],i),e}function Ase(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const s=f(t,["pageToken"]);e!==void 0&&s!=null&&m(e,["_query","pageToken"],s);const r=f(t,["filter"]);return e!==void 0&&r!=null&&m(e,["_query","filter"],r),n}function Cse(t){const e={},n=f(t,["config"]);return n!=null&&m(e,["config"],Ase(n,e)),e}function Ise(t){const e={},n=f(t,["textInput"]);n!=null&&m(e,["textInput"],n);const i=f(t,["output"]);return i!=null&&m(e,["output"],i),e}function Rse(t){const e={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=f(t,["examples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Ise(s))),m(e,["examples","examples"],i)}return e}function Nse(t,e){const n={};if(f(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=f(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&m(e,["displayName"],i),f(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=f(t,["epochCount"]);e!==void 0&&s!=null&&m(e,["tuningTask","hyperparameters","epochCount"],s);const r=f(t,["learningRateMultiplier"]);if(r!=null&&m(n,["tuningTask","hyperparameters","learningRateMultiplier"],r),f(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=f(t,["batchSize"]);e!==void 0&&a!=null&&m(e,["tuningTask","hyperparameters","batchSize"],a);const c=f(t,["learningRate"]);return e!==void 0&&c!=null&&m(e,["tuningTask","hyperparameters","learningRate"],c),n}function Mse(t){const e={},n=f(t,["baseModel"]);n!=null&&m(e,["baseModel"],n);const i=f(t,["preTunedModel"]);i!=null&&m(e,["preTunedModel"],i);const s=f(t,["trainingDataset"]);s!=null&&m(e,["tuningTask","trainingData"],Rse(s));const r=f(t,["config"]);return r!=null&&m(e,["config"],Nse(r,e)),e}function Pse(t){const e={},n=f(t,["name"]);n!=null&&m(e,["_url","name"],n);const i=f(t,["config"]);return i!=null&&m(e,["config"],i),e}function Dse(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const s=f(t,["pageToken"]);e!==void 0&&s!=null&&m(e,["_query","pageToken"],s);const r=f(t,["filter"]);return e!==void 0&&r!=null&&m(e,["_query","filter"],r),n}function kse(t){const e={},n=f(t,["config"]);return n!=null&&m(e,["config"],Dse(n,e)),e}function Vse(t,e){const n={},i=f(t,["gcsUri"]);e!==void 0&&i!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],i);const s=f(t,["vertexDatasetResource"]);if(e!==void 0&&s!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],s),f(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function Lse(t,e){const n={},i=f(t,["gcsUri"]);i!=null&&m(n,["validationDatasetUri"],i);const s=f(t,["vertexDatasetResource"]);return e!==void 0&&s!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],s),n}function Use(t,e){const n={},i=f(t,["validationDataset"]);e!==void 0&&i!=null&&m(e,["supervisedTuningSpec"],Lse(i,n));const s=f(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&m(e,["tunedModelDisplayName"],s);const r=f(t,["description"]);e!==void 0&&r!=null&&m(e,["description"],r);const a=f(t,["epochCount"]);e!==void 0&&a!=null&&m(e,["supervisedTuningSpec","hyperParameters","epochCount"],a);const c=f(t,["learningRateMultiplier"]);e!==void 0&&c!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],c);const u=f(t,["exportLastCheckpointOnly"]);e!==void 0&&u!=null&&m(e,["supervisedTuningSpec","exportLastCheckpointOnly"],u);const h=f(t,["preTunedModelCheckpointId"]);h!=null&&m(n,["preTunedModel","checkpointId"],h);const g=f(t,["adapterSize"]);if(e!==void 0&&g!=null&&m(e,["supervisedTuningSpec","hyperParameters","adapterSize"],g),f(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function Ose(t){const e={},n=f(t,["baseModel"]);n!=null&&m(e,["baseModel"],n);const i=f(t,["preTunedModel"]);i!=null&&m(e,["preTunedModel"],i);const s=f(t,["trainingDataset"]);s!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],Vse(s,e));const r=f(t,["config"]);return r!=null&&m(e,["config"],Use(r,e)),e}function Fse(t){const e={},n=f(t,["name"]);n!=null&&m(e,["model"],n);const i=f(t,["name"]);return i!=null&&m(e,["endpoint"],i),e}function d4(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["name"]);i!=null&&m(e,["name"],i);const s=f(t,["state"]);s!=null&&m(e,["state"],qL(s));const r=f(t,["createTime"]);r!=null&&m(e,["createTime"],r);const a=f(t,["tuningTask","startTime"]);a!=null&&m(e,["startTime"],a);const c=f(t,["tuningTask","completeTime"]);c!=null&&m(e,["endTime"],c);const u=f(t,["updateTime"]);u!=null&&m(e,["updateTime"],u);const h=f(t,["description"]);h!=null&&m(e,["description"],h);const g=f(t,["baseModel"]);g!=null&&m(e,["baseModel"],g);const x=f(t,["_self"]);x!=null&&m(e,["tunedModel"],Fse(x));const T=f(t,["customBaseModel"]);T!=null&&m(e,["customBaseModel"],T);const b=f(t,["experiment"]);b!=null&&m(e,["experiment"],b);const S=f(t,["labels"]);S!=null&&m(e,["labels"],S);const P=f(t,["outputUri"]);P!=null&&m(e,["outputUri"],P);const M=f(t,["pipelineJob"]);M!=null&&m(e,["pipelineJob"],M);const V=f(t,["serviceAccount"]);V!=null&&m(e,["serviceAccount"],V);const q=f(t,["tunedModelDisplayName"]);return q!=null&&m(e,["tunedModelDisplayName"],q),e}function Bse(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const s=f(t,["tunedModels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>d4(a))),m(e,["tuningJobs"],r)}return e}function qse(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["name"]);i!=null&&m(e,["name"],i);const s=f(t,["metadata"]);s!=null&&m(e,["metadata"],s);const r=f(t,["done"]);r!=null&&m(e,["done"],r);const a=f(t,["error"]);return a!=null&&m(e,["error"],a),e}function jse(t){const e={},n=f(t,["checkpointId"]);n!=null&&m(e,["checkpointId"],n);const i=f(t,["epoch"]);i!=null&&m(e,["epoch"],i);const s=f(t,["step"]);s!=null&&m(e,["step"],s);const r=f(t,["endpoint"]);return r!=null&&m(e,["endpoint"],r),e}function Gse(t){const e={},n=f(t,["model"]);n!=null&&m(e,["model"],n);const i=f(t,["endpoint"]);i!=null&&m(e,["endpoint"],i);const s=f(t,["checkpoints"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>jse(a))),m(e,["checkpoints"],r)}return e}function dT(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["name"]);i!=null&&m(e,["name"],i);const s=f(t,["state"]);s!=null&&m(e,["state"],qL(s));const r=f(t,["createTime"]);r!=null&&m(e,["createTime"],r);const a=f(t,["startTime"]);a!=null&&m(e,["startTime"],a);const c=f(t,["endTime"]);c!=null&&m(e,["endTime"],c);const u=f(t,["updateTime"]);u!=null&&m(e,["updateTime"],u);const h=f(t,["error"]);h!=null&&m(e,["error"],h);const g=f(t,["description"]);g!=null&&m(e,["description"],g);const x=f(t,["baseModel"]);x!=null&&m(e,["baseModel"],x);const T=f(t,["tunedModel"]);T!=null&&m(e,["tunedModel"],Gse(T));const b=f(t,["preTunedModel"]);b!=null&&m(e,["preTunedModel"],b);const S=f(t,["supervisedTuningSpec"]);S!=null&&m(e,["supervisedTuningSpec"],S);const P=f(t,["tuningDataStats"]);P!=null&&m(e,["tuningDataStats"],P);const M=f(t,["encryptionSpec"]);M!=null&&m(e,["encryptionSpec"],M);const V=f(t,["partnerModelTuningSpec"]);V!=null&&m(e,["partnerModelTuningSpec"],V);const q=f(t,["customBaseModel"]);q!=null&&m(e,["customBaseModel"],q);const O=f(t,["experiment"]);O!=null&&m(e,["experiment"],O);const z=f(t,["labels"]);z!=null&&m(e,["labels"],z);const j=f(t,["outputUri"]);j!=null&&m(e,["outputUri"],j);const W=f(t,["pipelineJob"]);W!=null&&m(e,["pipelineJob"],W);const D=f(t,["serviceAccount"]);D!=null&&m(e,["serviceAccount"],D);const C=f(t,["tunedModelDisplayName"]);return C!=null&&m(e,["tunedModelDisplayName"],C),e}function zse(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const s=f(t,["tuningJobs"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>dT(a))),m(e,["tuningJobs"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hse extends jl{constructor(e){super(),this.apiClient=e,this.get=n=>A(this,null,function*(){return yield this.getInternal(n)}),this.list=(...i)=>A(this,[...i],function*(n={}){return new cm(Vl.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),yield this.listInternal(n),n)}),this.tune=n=>A(this,null,function*(){if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel},s=Object.assign(Object.assign({},n),{preTunedModel:i});return s.baseModel=void 0,yield this.tuneInternal(s)}else{const i=Object.assign({},n);return yield this.tuneInternal(i)}else{const i=Object.assign({},n),s=yield this.tuneMldevInternal(i);let r="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?r=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(r=s.name.split("/operations/")[0]),{name:r,state:nT.JOB_STATE_QUEUED}}})}getInternal(e){return A(this,null,function*(){var n,i,s,r;let a,c="",u={};if(this.apiClient.isVertexAI()){const h=Pse(e);return c=Le("{name}",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:g.headers},T})),a.then(g=>dT(g))}else{const h=Sse(e);return c=Le("{name}",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:g.headers},T})),a.then(g=>d4(g))}})}listInternal(e){return A(this,null,function*(){var n,i,s,r;let a,c="",u={};if(this.apiClient.isVertexAI()){const h=kse(e);return c=Le("tuningJobs",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:g.headers},T})),a.then(g=>{const x=zse(g),T=new YN;return Object.assign(T,x),T})}else{const h=Cse(e);return c=Le("tunedModels",h._url),u=h._query,delete h.config,delete h._url,delete h._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:g.headers},T})),a.then(g=>{const x=Bse(g),T=new YN;return Object.assign(T,x),T})}})}tuneInternal(e){return A(this,null,function*(){var n,i;let s,r="",a={};if(this.apiClient.isVertexAI()){const c=Ose(e);return r=Le("tuningJobs",c._url),a=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:u.headers},g})),s.then(u=>dT(u))}else throw new Error("This method is only supported by the Vertex AI.")})}tuneMldevInternal(e){return A(this,null,function*(){var n,i;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Mse(e);return r=Le("tunedModels",c._url),a=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:u.headers},g})),s.then(u=>qse(u))}})}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $se{download(e,n){return A(this,null,function*(){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")})}}const Kse=1024*1024*8,Wse=3,Yse=1e3,Jse=2,Fx="x-goog-upload-status";function Qse(t,e,n){return A(this,null,function*(){var i,s,r;let a=0,c=0,u=new iT(new Response),h="upload";for(a=t.size;c<a;){const x=Math.min(Kse,a-c),T=t.slice(c,c+x);c+x>=a&&(h+=", finalize");let b=0,S=Yse;for(;b<Wse&&(u=yield n.request({path:"",body:T,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":String(c),"Content-Length":String(x)}}}),!(!((i=u==null?void 0:u.headers)===null||i===void 0)&&i[Fx]));)b++,yield Zse(S),S=S*Jse;if(c+=x,((s=u==null?void 0:u.headers)===null||s===void 0?void 0:s[Fx])!=="active")break;if(a<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const g=yield u==null?void 0:u.json();if(((r=u==null?void 0:u.headers)===null||r===void 0?void 0:r[Fx])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return g.file})}function Xse(t){return A(this,null,function*(){return{size:t.size,type:t.type}})}function Zse(t){return new Promise(e=>setTimeout(e,t))}class ere{upload(e,n,i){return A(this,null,function*(){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return yield Qse(e,n,i)})}stat(e){return A(this,null,function*(){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return yield Xse(e)})}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tre{create(e,n,i){return new nre(e,n,i)}}class nre{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const T2="x-goog-api-key";class ire{constructor(e){this.apiKey=e}addAuthHeaders(e){return A(this,null,function*(){if(e.get(T2)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(T2,this.apiKey)}})}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sre="gl-node/";class rre{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=qY(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const s=new ire(this.apiKey);this.apiClient=new bie({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:sre+"web",uploader:new ere,downloader:new $se}),this.models=new Gie(this.apiClient),this.live=new Lie(this.apiClient,s,new tre),this.batches=new hQ(this.apiClient),this.chats=new vX(this.models,this.apiClient),this.caches=new pX(this.apiClient),this.files=new MX(this.apiClient),this.operations=new Kie(this.apiClient),this.authTokens=new Ese(this.apiClient),this.tunings=new Hse(this.apiClient)}}const ore=new rre({apiKey:"AIzaSyDZh7qHA0JRGDwdR-ODtq7y6vifBBZx538"}),are={type:Gi.ARRAY,items:{type:Gi.OBJECT,properties:{userId:{type:Gi.STRING,description:"The unique ID (string) of the matched user."},compatibilityScore:{type:Gi.NUMBER,description:"A score from 0 to 100 indicating the compatibility between the two users."},justification:{type:Gi.STRING,description:"A brief, one-sentence explanation for why this is a good match."}},required:["userId","compatibilityScore","justification"]}},lre=(t,e)=>A(null,null,function*(){var s,r,a;const n="gemini-2.5-flash",i=`
        You are an expert co-founder matching AI. Your task is to find the best possible co-founders for a given user from a list of potential partners. Analyze the profiles carefully and return the top 5 matches based on role compatibility, shared interests, complementary skills, and stated goals.

        Current User Profile:
        - User ID: ${t.id}
        - Name: ${t.name}
        - Role: ${t.role}
        - Location: ${t.location}
        - Interests: ${t.interests.join(", ")}
        - Skills: ${t.skills.join(", ")}
        - Experience: ${t.experience}
        - Looking For: ${t.lookingFor}

        List of Potential Partners:
        ${e.map(c=>`
        ---
        User ID: ${c.id}
        Name: ${c.name}
        Role: ${c.role}
        Location: ${c.location}
        Interests: ${c.interests.join(", ")}
        Skills: ${c.skills.join(", ")}
        Experience: ${c.experience}
        Looking For: ${c.lookingFor}
        `).join("")}

        Based on this information, provide a ranked list of the top 5 most compatible partners for ${t.name}. Your response must be a JSON array of objects, conforming to the provided schema. The justification should be concise and highlight the key reason for the match.
    `;try{const u=(yield ore.models.generateContent({model:n,contents:i,config:{temperature:0,responseMimeType:"application/json",responseSchema:are}})).text.trim();return{matches:JSON.parse(u).sort((g,x)=>x.compatibilityScore-g.compatibilityScore),isFallback:!1}}catch(c){if(console.error("Error calling Gemini API:",c),((s=c==null?void 0:c.error)==null?void 0:s.code)===429||(r=c==null?void 0:c.message)!=null&&r.includes("quota")||(a=c==null?void 0:c.message)!=null&&a.includes("RESOURCE_EXHAUSTED"))return console.warn("Gemini API quota exceeded. Using fallback matching algorithm."),{matches:cre(t,e),isFallback:!0};throw new Error("Failed to fetch matches from the AI. The Gemini API key may be invalid or there could be a network issue.")}}),cre=(t,e)=>e.filter(r=>r.id!==t.id).map(r=>{let a=50;t.role!==r.role&&(a+=20),t.location&&r.location&&t.location.toLowerCase()===r.location.toLowerCase()&&(a+=15);const c=t.skills.filter(h=>r.skills.includes(h));a+=c.length*5;const u=t.interests.filter(h=>r.interests.includes(h));return a+=u.length*3,a=Math.min(a,100),{user:r,score:a,justification:ure(t,r)}}).sort((r,a)=>a.score-r.score).slice(0,5).map(r=>({userId:r.user.id,compatibilityScore:r.score,justification:r.justification})),ure=(t,e,n)=>{const i=[];return t.role!==e.role&&i.push("complementary roles"),t.location&&e.location&&t.location.toLowerCase()===e.location.toLowerCase()&&i.push("same location"),t.skills.filter(a=>e.skills.includes(a)).length>0&&i.push("shared skills"),t.interests.filter(a=>e.interests.includes(a)).length>0&&i.push("shared interests"),i.length===0?"Good potential match based on profile analysis.":`Strong match due to ${i.join(", ")}.`},jo={trackUserActivity:(t,e,n)=>A(null,null,function*(){try{const i={userId:t,action:e,timestamp:new Date};n!==void 0&&(i.metadata=n),yield Se.collection("user_activities").add(i)}catch(i){console.error("Error tracking user activity:",i)}}),startUserSession:t=>A(null,null,function*(){try{const e={userId:t,startTime:new Date},n=yield Se.collection("user_sessions").add(e);return yield jo.trackUserActivity(t,"login"),n.id}catch(e){throw console.error("Error starting user session:",e),e}}),endUserSession:(t,e)=>A(null,null,function*(){try{const n=Se.collection("user_sessions").doc(t),i=yield n.get();if(i.exists){const s=i.data(),r=new Date,a=Math.round((r.getTime()-s.startTime.getTime())/(1e3*60));yield n.update({endTime:r,duration:a}),yield jo.trackUserActivity(e,"logout")}}catch(n){console.error("Error ending user session:",n)}}),trackMatch:(t,e,n)=>A(null,null,function*(){try{const i={userId:t,matchedUserId:e,timestamp:new Date,compatibilityScore:n,status:"pending"},s=yield Se.collection("match_records").add(i);return yield jo.trackUserActivity(t,"find_matches",{matchedUserId:e,compatibilityScore:n}),s.id}catch(i){throw console.error("Error tracking match:",i),i}}),updateMatchStatus:(t,e)=>A(null,null,function*(){try{yield Se.collection("match_records").doc(t).update({status:e})}catch(n){console.error("Error updating match status:",n)}}),getAnalyticsData:()=>A(null,null,function*(){try{const t=new Date,e=new Date(t.getFullYear(),t.getMonth(),t.getDate()),n=new Date(t.getFullYear(),t.getMonth(),1),i=new Date(t.getTime()-10080*60*1e3),r=(yield Se.collection("users").get()).size,a=yield Se.collection("user_activities").where("timestamp",">=",e).get(),c=new Set;a.forEach(D=>{c.add(D.data().userId)});const u=c.size,h=yield Se.collection("user_activities").where("timestamp",">=",n).get(),g=new Set;h.forEach(D=>{g.add(D.data().userId)});const x=g.size,T=yield Se.collection("user_sessions").where("duration",">",0).get();let b=0,S=0;T.forEach(D=>{const C=D.data();C.duration&&(b+=C.duration,S++)});const P=S>0?Math.round(b/S):0,M=yield Se.collection("match_records").get(),V=M.size;let q=0;M.forEach(D=>{D.data().status==="connected"&&q++});const O=V>0?Math.round(q/V*100*10)/10:0,z=[],j=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];for(let D=6;D>=0;D--){const C=new Date(t.getTime()-D*24*60*60*1e3),R=new Date(C.getFullYear(),C.getMonth(),C.getDate()),L=new Date(R.getTime()+1440*60*1e3),F=yield Se.collection("user_activities").where("timestamp",">=",R).where("timestamp","<",L).get(),G=new Set;F.forEach(B=>{G.add(B.data().userId)}),z.push({name:j[C.getDay()],users:G.size})}const W=[];for(let D=3;D>=0;D--){const C=new Date(t.getTime()-(D+1)*7*24*60*60*1e3),R=new Date(t.getTime()-D*7*24*60*60*1e3),L=yield Se.collection("match_records").where("timestamp",">=",C).where("timestamp","<",R).get();let F=0,G=0;L.forEach(ye=>{const Ae=ye.data();G++,Ae.status==="connected"&&F++});const B=G>0?Math.round(F/G*100*10)/10:0;W.push({name:`Week ${4-D}`,rate:B})}return{userEngagement:{dailyActiveUsers:u||Math.floor(r*.3),monthlyActiveUsers:x||Math.floor(r*.8),averageSessionDuration:P||15},matchSuccess:{totalMatchesMade:V,successfulConnections:q,successRate:O},platformPerformance:{dau_data:z.length>0?z:[{name:"Mon",users:Math.floor(r*.2)},{name:"Tue",users:Math.floor(r*.25)},{name:"Wed",users:Math.floor(r*.22)},{name:"Thu",users:Math.floor(r*.28)},{name:"Fri",users:Math.floor(r*.35)},{name:"Sat",users:Math.floor(r*.4)},{name:"Sun",users:Math.floor(r*.3)}],match_rate_data:W.length>0?W:[{name:"Week 1",rate:15},{name:"Week 2",rate:18},{name:"Week 3",rate:22},{name:"Week 4",rate:20}]}}}catch(t){console.error("Error getting analytics data:",t);const n=(yield Se.collection("users").get()).size;return{userEngagement:{dailyActiveUsers:Math.floor(n*.3),monthlyActiveUsers:Math.floor(n*.8),averageSessionDuration:15},matchSuccess:{totalMatchesMade:0,successfulConnections:0,successRate:0},platformPerformance:{dau_data:[{name:"Mon",users:Math.floor(n*.2)},{name:"Tue",users:Math.floor(n*.25)},{name:"Wed",users:Math.floor(n*.22)},{name:"Thu",users:Math.floor(n*.28)},{name:"Fri",users:Math.floor(n*.35)},{name:"Sat",users:Math.floor(n*.4)},{name:"Sun",users:Math.floor(n*.3)}],match_rate_data:[{name:"Week 1",rate:15},{name:"Week 2",rate:18},{name:"Week 3",rate:22},{name:"Week 4",rate:20}]}}}})};function w2(){return typeof navigator!="undefined"&&(/wv/.test(navigator.userAgent)||/Android/.test(navigator.userAgent)&&/Version\//.test(navigator.userAgent))}function b2(){return new URLSearchParams(window.location.search).get("token")}const dre=()=>{K.useEffect(()=>{const Me=()=>{const Ge=window.location.pathname;Ge.endsWith("/Grow-With-Me-AI/")||Ge==="/Grow-With-Me-AI/"?n(Te.LANDING):Ge.endsWith("/Grow-With-Me-AI/auth")&&n(Te.AUTH)};return window.addEventListener("popstate",Me),()=>window.removeEventListener("popstate",Me)},[]),K.useEffect(()=>{if(typeof window!="undefined"&&(window.navigator.userAgent.includes("Android")||window.navigator.userAgent.includes("Mobile")||window.navigator.userAgent.includes("iPhone")||window.navigator.userAgent.includes("iPad")))try{typeof window!="undefined"&&(window.navigator.userAgent.includes("Android")||window.navigator.userAgent.includes("Mobile"))&&console.log("Mobile environment detected, mobile features may be available")}catch(Ke){console.warn("Mobile features not available:",Ke)}const Ge=b2();if(Ge){const Ke=_t.auth.GoogleAuthProvider.credential(Ge);Fo.signInWithCredential(Ke).then(He=>{s(He.user),Ae(!1),j(!1)}).catch(He=>{console.error("Native sign-in failed:",He),R("Native sign-in failed: "+(He&&He.message?He.message:JSON.stringify(He))),j(!1)})}},[]);const t=(()=>{const Me=window.location.pathname;return Me==="/Grow-With-Me-AI/auth"||Me==="/Grow-With-Me-AI/auth/"?Te.AUTH:Te.LANDING})(),[e,n]=K.useState(t),[i,s]=K.useState(null),[r,a]=K.useState(null),[c,u]=K.useState(!1),[h,g]=K.useState(!1),[x,T]=K.useState(null),[b,S]=K.useState(!1),[P,M]=K.useState(null),V=K.useRef(P);K.useEffect(()=>{V.current=P},[P]),K.useEffect(()=>(window.setNativeUser=(Me,Ge,Ke,He)=>{M({idToken:Me,name:Ge,email:Ke,avatarUrl:He})},()=>{delete window.setNativeUser}),[]);const[q,O]=K.useState([]),[z,j]=K.useState(!0),[W,D]=K.useState(!1),[C,R]=K.useState(null),[L,F]=K.useState(""),[G,B]=K.useState(null),[ye,Ae]=K.useState(!1),[ne,de]=K.useState(null),[ie,Ie]=K.useState(!1),[H,le]=K.useState(0),[xe,ce]=K.useState(0),[Ee,Fe]=K.useState(0),[Be,_e]=K.useState(null),[at,Ct]=K.useState([]),[Oe,nt]=K.useState(null),[et,li]=K.useState([]),[Ti,fs]=K.useState([]),[ur,ci]=K.useState([]),[dd,Ta]=K.useState(null),Ki=kL.apiKey.startsWith("REPLACE_"),Gt=K.useCallback(Me=>{R(null),n(Me)},[]);K.useEffect(()=>{if(i&&!i.isAnonymous&&r){const Me={[Te.LANDING]:"logout",[Te.AUTH]:"login",[Te.ONBOARDING]:"login",[Te.DASHBOARD]:"find_matches",[Te.ANALYTICS]:"view_profile",[Te.MESSAGES]:"send_message",[Te.IDEAS]:"view_ideas",[Te.PEOPLE]:"view_profile",[Te.REQUESTS]:"view_ideas",[Te.NEGOTIATIONS]:"view_profile"};Me[e]&&jo.trackUserActivity(r.id,Me[e],{view:e}).catch(Ge=>console.error("Error tracking navigation:",Ge))}},[e,i,r]),K.useEffect(()=>{if(r!=null&&r.id&&!ye){const Me=Se.collection("users").doc(r.id).onSnapshot(Ge=>A(null,null,function*(){const Ke=Ge.data(),He=J(J({},r),Ke);if(a(He),He.connections){const Ye=yield je.getConnections(He.connections);ci(Ye)}else ci([])}));return()=>Me()}},[r==null?void 0:r.id,ye]),K.useEffect(()=>{if(r&&!ye){const Me=Se.collection("chats").where("participants","array-contains",r.id).onSnapshot(Ge=>A(null,null,function*(){const Ke=yield Promise.all(Ge.docs.map(He=>A(null,null,function*(){const Ye=He.data(),ln=Ye.participants.find(Pi=>Pi!==r.id),Mi=yield je.getUserProfile(ln);return{id:He.id,participants:Ye.participants,lastMessage:Ye.lastMessage,unreadCounts:Ye.unreadCounts,participantDetails:[Mi].filter(Boolean)}})));Ct(Ke)}));return()=>Me()}},[r,ye]),K.useEffect(()=>{if(Ki||ye){j(!1);return}if(w2()&&V.current){const{idToken:Ke,name:He,email:Ye,avatarUrl:ln}=V.current,Mi={id:Ye,name:He,email:Ye,avatarUrl:ln||`https://api.dicebear.com/8.x/bottts/svg?seed=${Ye}`,connections:[],role:dt.Founder,location:"",skills:[],interests:[],lookingFor:""};a(Mi),s(null),j(!1),Mi.role?Gt(Te.DASHBOARD):Gt(Te.ONBOARDING);return}let Me=()=>{};return A(null,null,function*(){j(!0);try{yield Fo.setPersistence(_t.auth.Auth.Persistence.LOCAL)}catch(Ke){console.error("Firebase Auth persistence setup error:",Ke),R("Your browser does not support authentication. This may be due to private browsing settings. Please try a different browser or continue as a guest."),j(!1);return}Me=Fo.onAuthStateChanged(Ke=>A(null,null,function*(){if(j(!0),Ke&&!G){s(Ke);let He=yield je.getUserProfile(Ke.uid);if(He||(yield je.createUserProfile(Ke.uid,{email:Ke.email||"",name:Ke.displayName||"",avatarUrl:Ke.photoURL||"",connections:[],role:dt.Founder,location:"",skills:[],interests:[],lookingFor:""}),He=yield je.getUserProfile(Ke.uid)),He){if(a(He),!Ke.isAnonymous)try{const ln=yield jo.startUserSession(Ke.uid);_e(ln)}catch(ln){console.error("Error starting user session:",ln)}const Ye=He.name&&He.name.trim()!==""&&He.role&&He.location&&He.skills&&He.skills.length>0;Gt(Ye?Te.DASHBOARD:Te.ONBOARDING)}else Gt(Te.ONBOARDING)}else{if(Be&&i&&!i.isAnonymous)try{yield jo.endUserSession(Be,i.uid)}catch(Ye){console.error("Error ending user session:",Ye)}s(null),a(null),O([]),F(""),_e(null);const He=window.location.pathname;Gt(He==="/Grow-With-Me-AI/auth"||He==="/Grow-With-Me-AI/auth/"?Te.AUTH:Te.LANDING)}j(!1)}))}),()=>Me()},[Ki,ye,Gt,G,P]);const zl=()=>A(null,null,function*(){var Me;if(R(null),Ki){B("keys-missing");return}try{j(!0);let Ge;if(Ge=yield $B(),console.log("Google Sign-In response:",Ge),Ge&&Ge.idToken&&!Fo.currentUser){const Ke=_t.auth.GoogleAuthProvider.credential(Ge.idToken);yield Fo.signInWithCredential(Ke)}}catch(Ge){console.error("Authentication error:",Ge),(Me=Ge.message)!=null&&Me.includes("cancelled")?R("The sign-in process was cancelled."):R("An error occurred during sign-in. Please try again."),j(!1)}}),no=()=>{console.log("Entering guest mode.");const Me={uid:`guest_${Date.now()}`,photoURL:"https://api.dicebear.com/8.x/bottts/svg?seed=guest",isAnonymous:!0};Ae(!0),s(Me),Gt(Te.ONBOARDING),j(!1)},wa=()=>A(null,null,function*(){ye?(console.log("Logging out from guest mode session."),Ae(!1),s(null),a(null),O([]),F(""),window.history.pushState({},"","/Grow-With-Me-AI/"),Gt(Te.LANDING)):(yield Fo.signOut(),typeof window!="undefined"&&window.AndroidBridge&&typeof window.AndroidBridge.signOutFromGoogle=="function"&&window.AndroidBridge.signOutFromGoogle())}),[Hl,Bt]=K.useState(!1),wt=Me=>A(null,null,function*(){var Ge;if(i){Bt(!0),R(null);try{const Ke=pe(J({id:i.uid},Me),{avatarUrl:i.photoURL||`https://api.dicebear.com/8.x/bottts/svg?seed=${i.uid}`,connections:[]});if(ye)console.log("Guest mode: Storing profile locally."),a(Ke),Gt(Te.DASHBOARD);else{yield je.createUserProfile(i.uid,pe(J({},Me),{avatarUrl:Ke.avatarUrl,connections:[]}));const He=b2();if(He&&typeof window!="undefined"&&(window.location.search.includes("token")||w2())){window.location.replace(`${window.location.origin}${window.location.pathname}?token=${He}`);return}else{yield(Ge=Fo.currentUser)==null?void 0:Ge.reload();const Ye=Fo.currentUser;if(Ye){s(Ye);const ln=yield je.getUserProfile(Ye.uid);a(ln),Gt(Te.DASHBOARD)}else R("Session lost after onboarding. Please sign in again."),Gt(Te.LANDING)}}}catch(Ke){console.error("Onboarding error:",Ke),R("Failed to complete onboarding. Please try again.")}finally{Bt(!1)}}}),Pn=K.useCallback(()=>A(null,null,function*(){if(r){D(!0),R(null),O([]);try{let Me;ye?(console.log("Guest mode: Using dummy data for matches."),Me=UY.filter(Ye=>Ye.id!==r.id)):Me=yield je.getUsers(r.id);const{matches:Ge,isFallback:Ke}=yield lre(r,Me);Ke&&console.log("Fallback matching algorithm was used due to API quota limits.");const He=yield Promise.all(Ge.map(Ye=>A(null,null,function*(){const ln=Me.find(Pi=>Pi.id===Ye.userId);if(!ln)return null;const Mi=yield je.getConnectionStatus(r.id,ln.id);return pe(J({},Ye),{user:ln,isConnected:Mi.isConnected,isPending:Mi.isPending})}))).then(Ye=>Ye.filter(ln=>ln!==null));if(!ye&&i&&!i.isAnonymous)try{for(const Ye of Ge)yield jo.trackMatch(r.id,Ye.userId,Ye.compatibilityScore)}catch(Ye){console.error("Error tracking matches:",Ye)}O(He)}catch(Me){console.error("Error finding matches:",Me);const Ge=Me instanceof Error?Me.message:"Sorry, we couldn't find matches at the moment. Please try again later.";R(Ge)}finally{D(!1)}}}),[r,ye]);K.useEffect(()=>{r&&e===Te.DASHBOARD&&q.length===0&&!W&&Pn()},[r,e,q.length,W,Pn]);const Dn=K.useCallback(()=>A(null,null,function*(){Ie(!0);try{const Me=jo.getAnalyticsData(),Ge=Se.collection("ideas").get({source:"cache"}),Ke=Se.collection("negotiations").get({source:"cache"}),He=Se.collection("negotiations").where("status","==","accepted").get({source:"cache"});Me.then(de),Ge.then(Ye=>le(Ye.size)),Ke.then(Ye=>ce(Ye.size)),He.then(Ye=>Fe(Ye.size)),Se.collection("ideas").get().then(Ye=>le(Ye.size)),Se.collection("negotiations").get().then(Ye=>ce(Ye.size)),Se.collection("negotiations").where("status","==","accepted").get().then(Ye=>Fe(Ye.size)),yield Me}catch(Me){console.error("Error loading analytics data:",Me)}finally{Ie(!1)}}),[]),io=Me=>{nt(Me),n(Te.MESSAGES)},hd=Me=>A(null,null,function*(){if(r)try{yield je.removeConnection(r.id,Me.id)}catch(Ge){console.error("Failed to remove connection:",Ge),R("Could not remove connection. Please try again.")}});K.useEffect(()=>{if(r&&!ye){const Me=je.getPendingConnectionRequests(r.id,Ke=>{li(Ke)}),Ge=je.getSentConnectionRequests(r.id,Ke=>{fs(Ke)});return()=>{Me(),Ge()}}else li([]),fs([])},[r,ye]),K.useEffect(()=>{r&&r.role==="Founder"&&je.getFounderIdeaEngagementAnalytics(r.id).then(Ta)},[r]);const Is=q.filter(Me=>{if(!L)return!0;const Ge=Me.user,Ke=L.toLowerCase();return Ge.name.toLowerCase().includes(Ke)||Ge.skills.some(He=>He.toLowerCase().includes(Ke))||Ge.interests.some(He=>He.toLowerCase().includes(Ke))});yu.useEffect(()=>{const Me=()=>Gt(Te.DASHBOARD);return window.addEventListener("navigate-dashboard",Me),()=>window.removeEventListener("navigate-dashboard",Me)},[Gt]);const dr=()=>{if(z&&!Ki&&!G)return y.jsx("div",{className:"flex justify-center items-center h-screen",children:y.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-purple-500"})});switch(e){case Te.LANDING:return y.jsx(R9,{});case Te.AUTH:return y.jsx(P9,{onGoogleLogin:zl,onGuestLogin:no,error:C,authUser:i});case Te.ONBOARDING:return y.jsx(D9,{onOnboardingComplete:wt,userProfile:r,loading:Hl,error:C});case Te.DASHBOARD:return r?y.jsx(tN,{user:r,matches:Is,isLoading:W,error:C,onFindMatches:Pn,searchQuery:L,setSearchQuery:F,hasActiveSearch:q.length>0,onMessage:io,onRequestsUpdated:()=>{console.log("Requests updated")}}):null;case Te.NEGOTIATIONS:return r?y.jsx(TY,{user:r,setIsMobileNegotiationOpen:g,selectedNegotiationId:x,onNegotiationSelected:()=>T(null)}):null;case Te.ANALYTICS:return!ne&&!ie&&Dn(),ie?y.jsx("div",{className:"flex justify-center items-center h-64",children:y.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-purple-500"})}):ne?y.jsx(tP,{data:ne,founderEngagement:dd,totalIdeas:H,totalNegotiations:xe,totalDealsAccepted:Ee}):y.jsx("div",{className:"flex items-center justify-center h-64",children:y.jsx("div",{className:"text-white text-lg",children:"Unable to load analytics data"})});case Te.MESSAGES:return r?y.jsx(bY,{chats:at,currentUser:r,connections:ur,setIsMobileChatOpen:u,selectedUserForChat:Oe}):null;case Te.IDEAS:return r?y.jsx(NY,{user:r,onNavigateToNegotiation:Me=>{T(Me),n(Te.NEGOTIATIONS)}}):null;case Te.REQUESTS:return y.jsx(DY,{incomingRequests:et,sentRequests:Ti});case Te.PEOPLE:return y.jsx(kY,{currentUser:r,connections:ur,onMessage:io,onRemoveConnection:hd});default:return r?y.jsx(tN,{user:r,matches:Is,isLoading:W,error:C,onFindMatches:Pn,searchQuery:L,setSearchQuery:F,hasActiveSearch:q.length>0,onMessage:io}):null}};return y.jsx(t5,{children:y.jsxs("div",{className:`bg-black font-sans flex ${e===Te.MESSAGES||e===Te.NEGOTIATIONS||e===Te.ANALYTICS?"h-screen overflow-hidden":"min-h-screen"}`,children:[(Ki||G==="unauthorized-domain")&&y.jsx(VY,{isDomainError:G==="unauthorized-domain"}),e!==Te.LANDING&&e!==Te.AUTH&&y.jsx(LY,{currentView:e,setView:Gt,userProfile:r,onLogin:zl,onLogout:wa,pendingRequestCount:et.length,isMobileChatOpen:c,isMobileNegotiationOpen:h}),y.jsx("main",{className:`flex-grow transition-all duration-300 ${e!==Te.LANDING&&e!==Te.AUTH?"ml-0 lg:ml-64":""} ${e===Te.MESSAGES||e===Te.NEGOTIATIONS||e===Te.ANALYTICS?"p-0 overflow-hidden":"p-4 sm:p-8 pt-16 lg:pt-8"}`,children:dr()}),b&&y.jsxs("div",{className:"fixed top-20 right-4 z-50 bg-amber-900/90 border border-amber-700/50 text-amber-100 px-4 py-3 rounded-lg shadow-lg backdrop-blur-sm max-w-sm",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"w-2 h-2 bg-amber-400 rounded-full animate-pulse"}),y.jsx("span",{className:"text-sm font-medium",children:"Using fallback matching due to high API usage"})]}),y.jsx("p",{className:"text-xs text-amber-200 mt-1",children:"Matches are still accurate but may be less personalized."})]})]})})};class hre extends K.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){var i;console.error("Error caught by boundary:",e,n),(e.message.includes("exponent")||e.message.includes("extension")||(i=e.stack)!=null&&i.includes("exponent"))&&console.warn("Extension-related error detected")}render(){return this.state.hasError?y.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center p-4",children:y.jsxs("div",{className:"text-center max-w-md",children:[y.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Something went wrong"}),y.jsx("p",{className:"text-gray-300 mb-4",children:"The app encountered an error. This might be caused by a browser extension."}),y.jsx("button",{onClick:()=>window.location.reload(),className:"bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg",children:"Reload Page"}),y.jsxs("div",{className:"mt-4 text-sm text-gray-500",children:[y.jsx("p",{children:"If the problem persists, try:"}),y.jsxs("ul",{className:"list-disc list-inside mt-2",children:[y.jsx("li",{children:"Disabling browser extensions"}),y.jsx("li",{children:"Using incognito mode"}),y.jsx("li",{children:"Clearing browser cache"})]})]})]})}):this.props.children}}const h4=document.getElementById("root");if(!h4)throw new Error("Could not find root element to mount to");const fre=Z3.createRoot(h4);fre.render(y.jsx(yu.StrictMode,{children:y.jsx(hre,{children:y.jsx(dre,{})})}))});export default mre();
