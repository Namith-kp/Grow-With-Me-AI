var RW=Object.defineProperty;var PW=(t,e,n)=>e in t?RW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var pT=(t,e,n)=>PW(t,typeof e!="symbol"?e+"":e,n);import Af from"../node_modules/d3-format/src/exponent.js";function NW(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function xo(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var gT={exports:{}},jm={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OD;function MW(){if(OD)return jm;OD=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,s){var o=null;if(s!==void 0&&(o=""+s),i.key!==void 0&&(o=""+i.key),"key"in i){s={};for(var l in i)l!=="key"&&(s[l]=i[l])}else s=i;return i=s.ref,{$$typeof:t,type:r,key:o,ref:i!==void 0?i:null,props:s}}return jm.Fragment=e,jm.jsx=n,jm.jsxs=n,jm}var VD;function DW(){return VD||(VD=1,gT.exports=MW()),gT.exports}var x=DW(),yT={exports:{}},st={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LD;function kW(){if(LD)return st;LD=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.iterator;function v(H){return H===null||typeof H!="object"?null:(H=m&&H[m]||H["@@iterator"],typeof H=="function"?H:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,S={};function A(H,ae,le){this.props=H,this.context=ae,this.refs=S,this.updater=le||_}A.prototype.isReactComponent={},A.prototype.setState=function(H,ae){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,ae,"setState")},A.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function I(){}I.prototype=A.prototype;function D(H,ae,le){this.props=H,this.context=ae,this.refs=S,this.updater=le||_}var N=D.prototype=new I;N.constructor=D,T(N,A.prototype),N.isPureReactComponent=!0;var U=Array.isArray,O={H:null,A:null,T:null,S:null,V:null},q=Object.prototype.hasOwnProperty;function M(H,ae,le,ce,Ee,Me){return le=Me.ref,{$$typeof:t,type:H,key:ae,ref:le!==void 0?le:null,props:Me}}function R(H,ae){return M(H.type,ae,void 0,void 0,void 0,H.props)}function k(H){return typeof H=="object"&&H!==null&&H.$$typeof===t}function F(H){var ae={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(le){return ae[le]})}var j=/\/+/g;function G(H,ae){return typeof H=="object"&&H!==null&&H.key!=null?F(""+H.key):ae.toString(36)}function $(){}function de(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then($,$):(H.status="pending",H.then(function(ae){H.status==="pending"&&(H.status="fulfilled",H.value=ae)},function(ae){H.status==="pending"&&(H.status="rejected",H.reason=ae)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function ve(H,ae,le,ce,Ee){var Me=typeof H;(Me==="undefined"||Me==="boolean")&&(H=null);var je=!1;if(H===null)je=!0;else switch(Me){case"bigint":case"string":case"number":je=!0;break;case"object":switch(H.$$typeof){case t:case e:je=!0;break;case f:return je=H._init,ve(je(H._payload),ae,le,ce,Ee)}}if(je)return Ee=Ee(H),je=ce===""?"."+G(H,0):ce,U(Ee)?(le="",je!=null&&(le=je.replace(j,"$&/")+"/"),ve(Ee,ae,le,"",function(Te){return Te})):Ee!=null&&(k(Ee)&&(Ee=R(Ee,le+(Ee.key==null||H&&H.key===Ee.key?"":(""+Ee.key).replace(j,"$&/")+"/")+je)),ae.push(Ee)),1;je=0;var xe=ce===""?".":ce+":";if(U(H))for(var ot=0;ot<H.length;ot++)ce=H[ot],Me=xe+G(ce,ot),je+=ve(ce,ae,le,Me,Ee);else if(ot=v(H),typeof ot=="function")for(H=ot.call(H),ot=0;!(ce=H.next()).done;)ce=ce.value,Me=xe+G(ce,ot++),je+=ve(ce,ae,le,Me,Ee);else if(Me==="object"){if(typeof H.then=="function")return ve(de(H),ae,le,ce,Ee);throw ae=String(H),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.")}return je}function Y(H,ae,le){if(H==null)return H;var ce=[],Ee=0;return ve(H,ce,"","",function(Me){return ae.call(le,Me,Ee++)}),ce}function se(H){if(H._status===-1){var ae=H._result;ae=ae(),ae.then(function(le){(H._status===0||H._status===-1)&&(H._status=1,H._result=le)},function(le){(H._status===0||H._status===-1)&&(H._status=2,H._result=le)}),H._status===-1&&(H._status=0,H._result=ae)}if(H._status===1)return H._result.default;throw H._result}var Q=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)};function _e(){}return st.Children={map:Y,forEach:function(H,ae,le){Y(H,function(){ae.apply(this,arguments)},le)},count:function(H){var ae=0;return Y(H,function(){ae++}),ae},toArray:function(H){return Y(H,function(ae){return ae})||[]},only:function(H){if(!k(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},st.Component=A,st.Fragment=n,st.Profiler=i,st.PureComponent=D,st.StrictMode=r,st.Suspense=u,st.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,st.__COMPILER_RUNTIME={__proto__:null,c:function(H){return O.H.useMemoCache(H)}},st.cache=function(H){return function(){return H.apply(null,arguments)}},st.cloneElement=function(H,ae,le){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var ce=T({},H.props),Ee=H.key,Me=void 0;if(ae!=null)for(je in ae.ref!==void 0&&(Me=void 0),ae.key!==void 0&&(Ee=""+ae.key),ae)!q.call(ae,je)||je==="key"||je==="__self"||je==="__source"||je==="ref"&&ae.ref===void 0||(ce[je]=ae[je]);var je=arguments.length-2;if(je===1)ce.children=le;else if(1<je){for(var xe=Array(je),ot=0;ot<je;ot++)xe[ot]=arguments[ot+2];ce.children=xe}return M(H.type,Ee,void 0,void 0,Me,ce)},st.createContext=function(H){return H={$$typeof:o,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:s,_context:H},H},st.createElement=function(H,ae,le){var ce,Ee={},Me=null;if(ae!=null)for(ce in ae.key!==void 0&&(Me=""+ae.key),ae)q.call(ae,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(Ee[ce]=ae[ce]);var je=arguments.length-2;if(je===1)Ee.children=le;else if(1<je){for(var xe=Array(je),ot=0;ot<je;ot++)xe[ot]=arguments[ot+2];Ee.children=xe}if(H&&H.defaultProps)for(ce in je=H.defaultProps,je)Ee[ce]===void 0&&(Ee[ce]=je[ce]);return M(H,Me,void 0,void 0,null,Ee)},st.createRef=function(){return{current:null}},st.forwardRef=function(H){return{$$typeof:l,render:H}},st.isValidElement=k,st.lazy=function(H){return{$$typeof:f,_payload:{_status:-1,_result:H},_init:se}},st.memo=function(H,ae){return{$$typeof:d,type:H,compare:ae===void 0?null:ae}},st.startTransition=function(H){var ae=O.T,le={};O.T=le;try{var ce=H(),Ee=O.S;Ee!==null&&Ee(le,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(_e,Q)}catch(Me){Q(Me)}finally{O.T=ae}},st.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},st.use=function(H){return O.H.use(H)},st.useActionState=function(H,ae,le){return O.H.useActionState(H,ae,le)},st.useCallback=function(H,ae){return O.H.useCallback(H,ae)},st.useContext=function(H){return O.H.useContext(H)},st.useDebugValue=function(){},st.useDeferredValue=function(H,ae){return O.H.useDeferredValue(H,ae)},st.useEffect=function(H,ae,le){var ce=O.H;if(typeof le=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ce.useEffect(H,ae)},st.useId=function(){return O.H.useId()},st.useImperativeHandle=function(H,ae,le){return O.H.useImperativeHandle(H,ae,le)},st.useInsertionEffect=function(H,ae){return O.H.useInsertionEffect(H,ae)},st.useLayoutEffect=function(H,ae){return O.H.useLayoutEffect(H,ae)},st.useMemo=function(H,ae){return O.H.useMemo(H,ae)},st.useOptimistic=function(H,ae){return O.H.useOptimistic(H,ae)},st.useReducer=function(H,ae,le){return O.H.useReducer(H,ae,le)},st.useRef=function(H){return O.H.useRef(H)},st.useState=function(H){return O.H.useState(H)},st.useSyncExternalStore=function(H,ae,le){return O.H.useSyncExternalStore(H,ae,le)},st.useTransition=function(){return O.H.useTransition()},st.version="19.1.1",st}var UD;function sh(){return UD||(UD=1,yT.exports=kW()),yT.exports}var P=sh();const yc=xo(P),OW=NW({__proto__:null,default:yc},[P]);var vT={exports:{}},Bm={},xT={exports:{}},bT={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FD;function VW(){return FD||(FD=1,(function(t){function e(Y,se){var Q=Y.length;Y.push(se);e:for(;0<Q;){var _e=Q-1>>>1,H=Y[_e];if(0<i(H,se))Y[_e]=se,Y[Q]=H,Q=_e;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var se=Y[0],Q=Y.pop();if(Q!==se){Y[0]=Q;e:for(var _e=0,H=Y.length,ae=H>>>1;_e<ae;){var le=2*(_e+1)-1,ce=Y[le],Ee=le+1,Me=Y[Ee];if(0>i(ce,Q))Ee<H&&0>i(Me,ce)?(Y[_e]=Me,Y[Ee]=Q,_e=Ee):(Y[_e]=ce,Y[le]=Q,_e=le);else if(Ee<H&&0>i(Me,Q))Y[_e]=Me,Y[Ee]=Q,_e=Ee;else break e}}return se}function i(Y,se){var Q=Y.sortIndex-se.sortIndex;return Q!==0?Q:Y.id-se.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],f=1,m=null,v=3,_=!1,T=!1,S=!1,A=!1,I=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function U(Y){for(var se=n(d);se!==null;){if(se.callback===null)r(d);else if(se.startTime<=Y)r(d),se.sortIndex=se.expirationTime,e(u,se);else break;se=n(d)}}function O(Y){if(S=!1,U(Y),!T)if(n(u)!==null)T=!0,q||(q=!0,G());else{var se=n(d);se!==null&&ve(O,se.startTime-Y)}}var q=!1,M=-1,R=5,k=-1;function F(){return A?!0:!(t.unstable_now()-k<R)}function j(){if(A=!1,q){var Y=t.unstable_now();k=Y;var se=!0;try{e:{T=!1,S&&(S=!1,D(M),M=-1),_=!0;var Q=v;try{t:{for(U(Y),m=n(u);m!==null&&!(m.expirationTime>Y&&F());){var _e=m.callback;if(typeof _e=="function"){m.callback=null,v=m.priorityLevel;var H=_e(m.expirationTime<=Y);if(Y=t.unstable_now(),typeof H=="function"){m.callback=H,U(Y),se=!0;break t}m===n(u)&&r(u),U(Y)}else r(u);m=n(u)}if(m!==null)se=!0;else{var ae=n(d);ae!==null&&ve(O,ae.startTime-Y),se=!1}}break e}finally{m=null,v=Q,_=!1}se=void 0}}finally{se?G():q=!1}}}var G;if(typeof N=="function")G=function(){N(j)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,de=$.port2;$.port1.onmessage=j,G=function(){de.postMessage(null)}}else G=function(){I(j,0)};function ve(Y,se){M=I(function(){Y(t.unstable_now())},se)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(Y){switch(v){case 1:case 2:case 3:var se=3;break;default:se=v}var Q=v;v=se;try{return Y()}finally{v=Q}},t.unstable_requestPaint=function(){A=!0},t.unstable_runWithPriority=function(Y,se){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var Q=v;v=Y;try{return se()}finally{v=Q}},t.unstable_scheduleCallback=function(Y,se,Q){var _e=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?_e+Q:_e):Q=_e,Y){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=Q+H,Y={id:f++,callback:se,priorityLevel:Y,startTime:Q,expirationTime:H,sortIndex:-1},Q>_e?(Y.sortIndex=Q,e(d,Y),n(u)===null&&Y===n(d)&&(S?(D(M),M=-1):S=!0,ve(O,Q-_e))):(Y.sortIndex=H,e(u,Y),T||_||(T=!0,q||(q=!0,G()))),Y},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(Y){var se=v;return function(){var Q=v;v=se;try{return Y.apply(this,arguments)}finally{v=Q}}}})(bT)),bT}var jD;function LW(){return jD||(jD=1,xT.exports=VW()),xT.exports}var _T={exports:{}},Pr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BD;function UW(){if(BD)return Pr;BD=1;var t=sh();function e(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)d+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(u,d,f){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:m==null?null:""+m,children:u,containerInfo:d,implementation:f}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Pr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Pr.createPortal=function(u,d){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return s(u,d,null,f)},Pr.flushSync=function(u){var d=o.T,f=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=d,r.p=f,r.d.f()}},Pr.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(u,d))},Pr.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},Pr.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var f=d.as,m=l(f,d.crossOrigin),v=typeof d.integrity=="string"?d.integrity:void 0,_=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;f==="style"?r.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:m,integrity:v,fetchPriority:_}):f==="script"&&r.d.X(u,{crossOrigin:m,integrity:v,fetchPriority:_,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Pr.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var f=l(d.as,d.crossOrigin);r.d.M(u,{crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(u)},Pr.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var f=d.as,m=l(f,d.crossOrigin);r.d.L(u,f,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Pr.preloadModule=function(u,d){if(typeof u=="string")if(d){var f=l(d.as,d.crossOrigin);r.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(u)},Pr.requestFormReset=function(u){r.d.r(u)},Pr.unstable_batchedUpdates=function(u,d){return u(d)},Pr.useFormState=function(u,d,f){return o.H.useFormState(u,d,f)},Pr.useFormStatus=function(){return o.H.useHostTransitionStatus()},Pr.version="19.1.1",Pr}var qD;function HF(){if(qD)return _T.exports;qD=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),_T.exports=UW(),_T.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zD;function FW(){if(zD)return Bm;zD=1;var t=LW(),e=sh(),n=HF();function r(a){var c="https://react.dev/errors/"+a;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var c=a,h=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(h=c.return),a=c.return;while(a)}return c.tag===3?h:null}function o(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function l(a){if(s(a)!==a)throw Error(r(188))}function u(a){var c=a.alternate;if(!c){if(c=s(a),c===null)throw Error(r(188));return c!==a?null:a}for(var h=a,y=c;;){var w=h.return;if(w===null)break;var E=w.alternate;if(E===null){if(y=w.return,y!==null){h=y;continue}break}if(w.child===E.child){for(E=w.child;E;){if(E===h)return l(w),a;if(E===y)return l(w),c;E=E.sibling}throw Error(r(188))}if(h.return!==y.return)h=w,y=E;else{for(var L=!1,B=w.child;B;){if(B===h){L=!0,h=w,y=E;break}if(B===y){L=!0,y=w,h=E;break}B=B.sibling}if(!L){for(B=E.child;B;){if(B===h){L=!0,h=E,y=w;break}if(B===y){L=!0,y=E,h=w;break}B=B.sibling}if(!L)throw Error(r(189))}}if(h.alternate!==y)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?a:c}function d(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a;for(a=a.child;a!==null;){if(c=d(a),c!==null)return c;a=a.sibling}return null}var f=Object.assign,m=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),D=Symbol.for("react.consumer"),N=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function G(a){return a===null||typeof a!="object"?null:(a=j&&a[j]||a["@@iterator"],typeof a=="function"?a:null)}var $=Symbol.for("react.client.reference");function de(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===$?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case T:return"Fragment";case A:return"Profiler";case S:return"StrictMode";case O:return"Suspense";case q:return"SuspenseList";case k:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case _:return"Portal";case N:return(a.displayName||"Context")+".Provider";case D:return(a._context.displayName||"Context")+".Consumer";case U:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case M:return c=a.displayName||null,c!==null?c:de(a.type)||"Memo";case R:c=a._payload,a=a._init;try{return de(a(c))}catch{}}return null}var ve=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},_e=[],H=-1;function ae(a){return{current:a}}function le(a){0>H||(a.current=_e[H],_e[H]=null,H--)}function ce(a,c){H++,_e[H]=a.current,a.current=c}var Ee=ae(null),Me=ae(null),je=ae(null),xe=ae(null);function ot(a,c){switch(ce(je,c),ce(Me,a),ce(Ee,null),c.nodeType){case 9:case 11:a=(a=c.documentElement)&&(a=a.namespaceURI)?uD(a):0;break;default:if(a=c.tagName,c=c.namespaceURI)c=uD(c),a=cD(c,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}le(Ee),ce(Ee,a)}function Te(){le(Ee),le(Me),le(je)}function we(a){a.memoizedState!==null&&ce(xe,a);var c=Ee.current,h=cD(c,a.type);c!==h&&(ce(Me,a),ce(Ee,h))}function Pe(a){Me.current===a&&(le(Ee),le(Me)),xe.current===a&&(le(xe),Om._currentValue=Q)}var ue=Object.prototype.hasOwnProperty,It=t.unstable_scheduleCallback,it=t.unstable_cancelCallback,Wt=t.unstable_shouldYield,un=t.unstable_requestPaint,cn=t.unstable_now,Sa=t.unstable_getCurrentPriorityLevel,ru=t.unstable_ImmediatePriority,Oi=t.unstable_UserBlockingPriority,dn=t.unstable_NormalPriority,Kc=t.unstable_LowPriority,Aa=t.unstable_IdlePriority,iu=t.log,Wc=t.unstable_setDisableYieldValue,Yt=null,St=null;function er(a){if(typeof iu=="function"&&Wc(a),St&&typeof St.setStrictMode=="function")try{St.setStrictMode(Yt,a)}catch{}}var tr=Math.clz32?Math.clz32:Ns,Ca=Math.log,Lh=Math.LN2;function Ns(a){return a>>>=0,a===0?32:31-(Ca(a)/Lh|0)|0}var bo=256,ke=4194304;function Ge(a){var c=a&42;if(c!==0)return c;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Ye(a,c,h){var y=a.pendingLanes;if(y===0)return 0;var w=0,E=a.suspendedLanes,L=a.pingedLanes;a=a.warmLanes;var B=y&134217727;return B!==0?(y=B&~E,y!==0?w=Ge(y):(L&=B,L!==0?w=Ge(L):h||(h=B&~a,h!==0&&(w=Ge(h))))):(B=y&~E,B!==0?w=Ge(B):L!==0?w=Ge(L):h||(h=y&~a,h!==0&&(w=Ge(h)))),w===0?0:c!==0&&c!==w&&(c&E)===0&&(E=w&-w,h=c&-c,E>=h||E===32&&(h&4194048)!==0)?c:w}function tt(a,c){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&c)===0}function Je(a,c){switch(a){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fr(){var a=bo;return bo<<=1,(bo&4194048)===0&&(bo=256),a}function ci(){var a=ke;return ke<<=1,(ke&62914560)===0&&(ke=4194304),a}function di(a){for(var c=[],h=0;31>h;h++)c.push(a);return c}function _o(a,c){a.pendingLanes|=c,c!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function Uh(a,c,h,y,w,E){var L=a.pendingLanes;a.pendingLanes=h,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=h,a.entangledLanes&=h,a.errorRecoveryDisabledLanes&=h,a.shellSuspendCounter=0;var B=a.entanglements,K=a.expirationTimes,te=a.hiddenUpdates;for(h=L&~h;0<h;){var he=31-tr(h),pe=1<<he;B[he]=0,K[he]=-1;var ne=te[he];if(ne!==null)for(te[he]=null,he=0;he<ne.length;he++){var re=ne[he];re!==null&&(re.lane&=-536870913)}h&=~pe}y!==0&&Ms(a,y,0),E!==0&&w===0&&a.tag!==0&&(a.suspendedLanes|=E&~(L&~c))}function Ms(a,c,h){a.pendingLanes|=c,a.suspendedLanes&=~c;var y=31-tr(c);a.entangledLanes|=c,a.entanglements[y]=a.entanglements[y]|1073741824|h&4194090}function Fh(a,c){var h=a.entangledLanes|=c;for(a=a.entanglements;h;){var y=31-tr(h),w=1<<y;w&c|a[y]&c&&(a[y]|=c),h&=~w}}function Ia(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Yc(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Ra(){var a=se.p;return a!==0?a:(a=window.event,a===void 0?32:RD(a.type))}function py(a,c){var h=se.p;try{return se.p=a,c()}finally{se.p=h}}var en=Math.random().toString(36).slice(2),Bn="__reactFiber$"+en,Pn="__reactProps$"+en,Vi="__reactContainer$"+en,jh="__reactEvents$"+en,v_="__reactListeners$"+en,Pa="__reactHandles$"+en,gy="__reactResources$"+en,su="__reactMarker$"+en;function Na(a){delete a[Bn],delete a[Pn],delete a[jh],delete a[v_],delete a[Pa]}function wo(a){var c=a[Bn];if(c)return c;for(var h=a.parentNode;h;){if(c=h[Vi]||h[Bn]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(a=mD(a);a!==null;){if(h=a[Bn])return h;a=mD(a)}return c}a=h,h=a.parentNode}return null}function Ds(a){if(a=a[Bn]||a[Vi]){var c=a.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return a}return null}function ks(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a.stateNode;throw Error(r(33))}function jr(a){var c=a[gy];return c||(c=a[gy]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Tn(a){a[su]=!0}var Bh=new Set,Jc={};function hs(a,c){To(a,c),To(a+"Capture",c)}function To(a,c){for(Jc[a]=c,a=0;a<c.length;a++)Bh.add(c[a])}var yy=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),vy={},ou={};function xy(a){return ue.call(ou,a)?!0:ue.call(vy,a)?!1:yy.test(a)?ou[a]=!0:(vy[a]=!0,!1)}function Ma(a,c,h){if(xy(c))if(h===null)a.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":a.removeAttribute(c);return;case"boolean":var y=c.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){a.removeAttribute(c);return}}a.setAttribute(c,""+h)}}function Os(a,c,h){if(h===null)a.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttribute(c,""+h)}}function hr(a,c,h,y){if(y===null)a.removeAttribute(h);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(h);return}a.setAttributeNS(c,h,""+y)}}var au,by;function Eo(a){if(au===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);au=c&&c[1]||"",by=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+au+a+by}var Qc=!1;function Xc(a,c){if(!a||Qc)return"";Qc=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(c){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(re){var ne=re}Reflect.construct(a,[],pe)}else{try{pe.call()}catch(re){ne=re}a.call(pe.prototype)}}else{try{throw Error()}catch(re){ne=re}(pe=a())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(re){if(re&&ne&&typeof re.stack=="string")return[re.stack,ne.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var w=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");w&&w.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=y.DetermineComponentFrameRoot(),L=E[0],B=E[1];if(L&&B){var K=L.split(`
`),te=B.split(`
`);for(w=y=0;y<K.length&&!K[y].includes("DetermineComponentFrameRoot");)y++;for(;w<te.length&&!te[w].includes("DetermineComponentFrameRoot");)w++;if(y===K.length||w===te.length)for(y=K.length-1,w=te.length-1;1<=y&&0<=w&&K[y]!==te[w];)w--;for(;1<=y&&0<=w;y--,w--)if(K[y]!==te[w]){if(y!==1||w!==1)do if(y--,w--,0>w||K[y]!==te[w]){var he=`
`+K[y].replace(" at new "," at ");return a.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",a.displayName)),he}while(1<=y&&0<=w);break}}}finally{Qc=!1,Error.prepareStackTrace=h}return(h=a?a.displayName||a.name:"")?Eo(h):""}function qh(a){switch(a.tag){case 26:case 27:case 5:return Eo(a.type);case 16:return Eo("Lazy");case 13:return Eo("Suspense");case 19:return Eo("SuspenseList");case 0:case 15:return Xc(a.type,!1);case 11:return Xc(a.type.render,!1);case 1:return Xc(a.type,!0);case 31:return Eo("Activity");default:return""}}function Zc(a){try{var c="";do c+=qh(a),a=a.return;while(a);return c}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}function Br(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function zh(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function x_(a){var c=zh(a)?"checked":"value",h=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),y=""+a[c];if(!a.hasOwnProperty(c)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var w=h.get,E=h.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return w.call(this)},set:function(L){y=""+L,E.call(this,L)}}),Object.defineProperty(a,c,{enumerable:h.enumerable}),{getValue:function(){return y},setValue:function(L){y=""+L},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function ed(a){a._valueTracker||(a._valueTracker=x_(a))}function $h(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var h=c.getValue(),y="";return a&&(y=zh(a)?a.checked?"true":"false":a.value),a=y,a!==h?(c.setValue(a),!0):!1}function lu(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var b_=/[\n"\\]/g;function Nn(a){return a.replace(b_,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function fi(a,c,h,y,w,E,L,B){a.name="",L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?a.type=L:a.removeAttribute("type"),c!=null?L==="number"?(c===0&&a.value===""||a.value!=c)&&(a.value=""+Br(c)):a.value!==""+Br(c)&&(a.value=""+Br(c)):L!=="submit"&&L!=="reset"||a.removeAttribute("value"),c!=null?Da(a,L,Br(c)):h!=null?Da(a,L,Br(h)):y!=null&&a.removeAttribute("value"),w==null&&E!=null&&(a.defaultChecked=!!E),w!=null&&(a.checked=w&&typeof w!="function"&&typeof w!="symbol"),B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?a.name=""+Br(B):a.removeAttribute("name")}function uu(a,c,h,y,w,E,L,B){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(a.type=E),c!=null||h!=null){if(!(E!=="submit"&&E!=="reset"||c!=null))return;h=h!=null?""+Br(h):"",c=c!=null?""+Br(c):h,B||c===a.value||(a.value=c),a.defaultValue=c}y=y??w,y=typeof y!="function"&&typeof y!="symbol"&&!!y,a.checked=B?a.checked:!!y,a.defaultChecked=!!y,L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"&&(a.name=L)}function Da(a,c,h){c==="number"&&lu(a.ownerDocument)===a||a.defaultValue===""+h||(a.defaultValue=""+h)}function So(a,c,h,y){if(a=a.options,c){c={};for(var w=0;w<h.length;w++)c["$"+h[w]]=!0;for(h=0;h<a.length;h++)w=c.hasOwnProperty("$"+a[h].value),a[h].selected!==w&&(a[h].selected=w),w&&y&&(a[h].defaultSelected=!0)}else{for(h=""+Br(h),c=null,w=0;w<a.length;w++){if(a[w].value===h){a[w].selected=!0,y&&(a[w].defaultSelected=!0);return}c!==null||a[w].disabled||(c=a[w])}c!==null&&(c.selected=!0)}}function Lt(a,c,h){if(c!=null&&(c=""+Br(c),c!==a.value&&(a.value=c),h==null)){a.defaultValue!==c&&(a.defaultValue=c);return}a.defaultValue=h!=null?""+Br(h):""}function cu(a,c,h,y){if(c==null){if(y!=null){if(h!=null)throw Error(r(92));if(ve(y)){if(1<y.length)throw Error(r(93));y=y[0]}h=y}h==null&&(h=""),c=h}h=Br(c),a.defaultValue=h,y=a.textContent,y===h&&y!==""&&y!==null&&(a.value=y)}function Li(a,c){if(c){var h=a.firstChild;if(h&&h===a.lastChild&&h.nodeType===3){h.nodeValue=c;return}}a.textContent=c}var du=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _y(a,c,h){var y=c.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?y?a.setProperty(c,""):c==="float"?a.cssFloat="":a[c]="":y?a.setProperty(c,h):typeof h!="number"||h===0||du.has(c)?c==="float"?a.cssFloat=h:a[c]=(""+h).trim():a[c]=h+"px"}function Gh(a,c,h){if(c!=null&&typeof c!="object")throw Error(r(62));if(a=a.style,h!=null){for(var y in h)!h.hasOwnProperty(y)||c!=null&&c.hasOwnProperty(y)||(y.indexOf("--")===0?a.setProperty(y,""):y==="float"?a.cssFloat="":a[y]="");for(var w in c)y=c[w],c.hasOwnProperty(w)&&h[w]!==y&&_y(a,w,y)}else for(var E in c)c.hasOwnProperty(E)&&_y(a,E,c[E])}function Hh(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var __=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),w_=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function td(a){return w_.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var Ao=null;function Ui(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Co=null,Io=null;function Kh(a){var c=Ds(a);if(c&&(a=c.stateNode)){var h=a[Pn]||null;e:switch(a=c.stateNode,c.type){case"input":if(fi(a,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),c=h.name,h.type==="radio"&&c!=null){for(h=a;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+Nn(""+c)+'"][type="radio"]'),c=0;c<h.length;c++){var y=h[c];if(y!==a&&y.form===a.form){var w=y[Pn]||null;if(!w)throw Error(r(90));fi(y,w.value,w.defaultValue,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name)}}for(c=0;c<h.length;c++)y=h[c],y.form===a.form&&$h(y)}break e;case"textarea":Lt(a,h.value,h.defaultValue);break e;case"select":c=h.value,c!=null&&So(a,!!h.multiple,c,!1)}}}var Vs=!1;function wy(a,c,h){if(Vs)return a(c,h);Vs=!0;try{var y=a(c);return y}finally{if(Vs=!1,(Co!==null||Io!==null)&&(pv(),Co&&(c=Co,a=Io,Io=Co=null,Kh(c),a)))for(c=0;c<a.length;c++)Kh(a[c])}}function fu(a,c){var h=a.stateNode;if(h===null)return null;var y=h[Pn]||null;if(y===null)return null;h=y[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(a=a.type,y=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!y;break e;default:a=!1}if(a)return null;if(h&&typeof h!="function")throw Error(r(231,c,typeof h));return h}var ms=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fi=!1;if(ms)try{var hu={};Object.defineProperty(hu,"passive",{get:function(){Fi=!0}}),window.addEventListener("test",hu,hu),window.removeEventListener("test",hu,hu)}catch{Fi=!1}var Ls=null,ka=null,Ro=null;function Wh(){if(Ro)return Ro;var a,c=ka,h=c.length,y,w="value"in Ls?Ls.value:Ls.textContent,E=w.length;for(a=0;a<h&&c[a]===w[a];a++);var L=h-a;for(y=1;y<=L&&c[h-y]===w[E-y];y++);return Ro=w.slice(a,1<y?1-y:void 0)}function Us(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function Fs(){return!0}function Yh(){return!1}function nr(a){function c(h,y,w,E,L){this._reactName=h,this._targetInst=w,this.type=y,this.nativeEvent=E,this.target=L,this.currentTarget=null;for(var B in a)a.hasOwnProperty(B)&&(h=a[B],this[B]=h?h(E):E[B]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Fs:Yh,this.isPropagationStopped=Yh,this}return f(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Fs)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Fs)},persist:function(){},isPersistent:Fs}),c}var Rt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nd=nr(Rt),mu=f({},Rt,{view:0,detail:0}),Ty=nr(mu),rd,id,js,pu=f({},mu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vu,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==js&&(js&&a.type==="mousemove"?(rd=a.screenX-js.screenX,id=a.screenY-js.screenY):id=rd=0,js=a),rd)},movementY:function(a){return"movementY"in a?a.movementY:id}}),ji=nr(pu),Ey=f({},pu,{dataTransfer:0}),T_=nr(Ey),gu=f({},mu,{relatedTarget:0}),sd=nr(gu),Jh=f({},Rt,{animationName:0,elapsedTime:0,pseudoElement:0}),od=nr(Jh),Sy=f({},Rt,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),ad=nr(Sy),E_=f({},Rt,{data:0}),Qh=nr(E_),yu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ay={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xh(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=Cy[a])?!!c[a]:!1}function vu(){return Xh}var Iy=f({},mu,{key:function(a){if(a.key){var c=yu[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=Us(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Ay[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vu,charCode:function(a){return a.type==="keypress"?Us(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Us(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),ld=nr(Iy),Ry=f({},pu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zh=nr(Ry),Po=f({},mu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vu}),Py=nr(Po),Ny=f({},Rt,{propertyName:0,elapsedTime:0,pseudoElement:0}),My=nr(Ny),Dy=f({},pu,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),ud=nr(Dy),qr=f({},Rt,{newState:0,oldState:0}),ky=nr(qr),Oy=[9,13,27,32],Bs=ms&&"CompositionEvent"in window,b=null;ms&&"documentMode"in document&&(b=document.documentMode);var C=ms&&"TextEvent"in window&&!b,V=ms&&(!Bs||b&&8<b&&11>=b),z=" ",X=!1;function oe(a,c){switch(a){case"keyup":return Oy.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ae(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var gt=!1;function qn(a,c){switch(a){case"compositionend":return Ae(c);case"keypress":return c.which!==32?null:(X=!0,z);case"textInput":return a=c.data,a===z&&X?null:a;default:return null}}function yt(a,c){if(gt)return a==="compositionend"||!Bs&&oe(a,c)?(a=Wh(),Ro=ka=Ls=null,gt=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return V&&c.locale!=="ko"?null:c.data;default:return null}}var rr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zn(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!rr[a.type]:c==="textarea"}function No(a,c,h,y){Co?Io?Io.push(y):Io=[y]:Co=y,c=_v(c,"onChange"),0<c.length&&(h=new nd("onChange","change",null,h,y),a.push({event:h,listeners:c}))}var mr=null,qs=null;function em(a){iD(a,0)}function Vy(a){var c=ks(a);if($h(c))return a}function SN(a,c){if(a==="change")return c}var AN=!1;if(ms){var S_;if(ms){var A_="oninput"in document;if(!A_){var CN=document.createElement("div");CN.setAttribute("oninput","return;"),A_=typeof CN.oninput=="function"}S_=A_}else S_=!1;AN=S_&&(!document.documentMode||9<document.documentMode)}function IN(){mr&&(mr.detachEvent("onpropertychange",RN),qs=mr=null)}function RN(a){if(a.propertyName==="value"&&Vy(qs)){var c=[];No(c,qs,a,Ui(a)),wy(em,c)}}function sK(a,c,h){a==="focusin"?(IN(),mr=c,qs=h,mr.attachEvent("onpropertychange",RN)):a==="focusout"&&IN()}function oK(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Vy(qs)}function aK(a,c){if(a==="click")return Vy(c)}function lK(a,c){if(a==="input"||a==="change")return Vy(c)}function uK(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var hi=typeof Object.is=="function"?Object.is:uK;function tm(a,c){if(hi(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var h=Object.keys(a),y=Object.keys(c);if(h.length!==y.length)return!1;for(y=0;y<h.length;y++){var w=h[y];if(!ue.call(c,w)||!hi(a[w],c[w]))return!1}return!0}function PN(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function NN(a,c){var h=PN(a);a=0;for(var y;h;){if(h.nodeType===3){if(y=a+h.textContent.length,a<=c&&y>=c)return{node:h,offset:c-a};a=y}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=PN(h)}}function MN(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?MN(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function DN(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var c=lu(a.document);c instanceof a.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)a=c.contentWindow;else break;c=lu(a.document)}return c}function C_(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}var cK=ms&&"documentMode"in document&&11>=document.documentMode,cd=null,I_=null,nm=null,R_=!1;function kN(a,c,h){var y=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;R_||cd==null||cd!==lu(y)||(y=cd,"selectionStart"in y&&C_(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),nm&&tm(nm,y)||(nm=y,y=_v(I_,"onSelect"),0<y.length&&(c=new nd("onSelect","select",null,c,h),a.push({event:c,listeners:y}),c.target=cd)))}function xu(a,c){var h={};return h[a.toLowerCase()]=c.toLowerCase(),h["Webkit"+a]="webkit"+c,h["Moz"+a]="moz"+c,h}var dd={animationend:xu("Animation","AnimationEnd"),animationiteration:xu("Animation","AnimationIteration"),animationstart:xu("Animation","AnimationStart"),transitionrun:xu("Transition","TransitionRun"),transitionstart:xu("Transition","TransitionStart"),transitioncancel:xu("Transition","TransitionCancel"),transitionend:xu("Transition","TransitionEnd")},P_={},ON={};ms&&(ON=document.createElement("div").style,"AnimationEvent"in window||(delete dd.animationend.animation,delete dd.animationiteration.animation,delete dd.animationstart.animation),"TransitionEvent"in window||delete dd.transitionend.transition);function bu(a){if(P_[a])return P_[a];if(!dd[a])return a;var c=dd[a],h;for(h in c)if(c.hasOwnProperty(h)&&h in ON)return P_[a]=c[h];return a}var VN=bu("animationend"),LN=bu("animationiteration"),UN=bu("animationstart"),dK=bu("transitionrun"),fK=bu("transitionstart"),hK=bu("transitioncancel"),FN=bu("transitionend"),jN=new Map,N_="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");N_.push("scrollEnd");function ps(a,c){jN.set(a,c),hs(c,[a])}var BN=new WeakMap;function Bi(a,c){if(typeof a=="object"&&a!==null){var h=BN.get(a);return h!==void 0?h:(c={value:a,source:c,stack:Zc(c)},BN.set(a,c),c)}return{value:a,source:c,stack:Zc(c)}}var qi=[],fd=0,M_=0;function Ly(){for(var a=fd,c=M_=fd=0;c<a;){var h=qi[c];qi[c++]=null;var y=qi[c];qi[c++]=null;var w=qi[c];qi[c++]=null;var E=qi[c];if(qi[c++]=null,y!==null&&w!==null){var L=y.pending;L===null?w.next=w:(w.next=L.next,L.next=w),y.pending=w}E!==0&&qN(h,w,E)}}function Uy(a,c,h,y){qi[fd++]=a,qi[fd++]=c,qi[fd++]=h,qi[fd++]=y,M_|=y,a.lanes|=y,a=a.alternate,a!==null&&(a.lanes|=y)}function D_(a,c,h,y){return Uy(a,c,h,y),Fy(a)}function hd(a,c){return Uy(a,null,null,c),Fy(a)}function qN(a,c,h){a.lanes|=h;var y=a.alternate;y!==null&&(y.lanes|=h);for(var w=!1,E=a.return;E!==null;)E.childLanes|=h,y=E.alternate,y!==null&&(y.childLanes|=h),E.tag===22&&(a=E.stateNode,a===null||a._visibility&1||(w=!0)),a=E,E=E.return;return a.tag===3?(E=a.stateNode,w&&c!==null&&(w=31-tr(h),a=E.hiddenUpdates,y=a[w],y===null?a[w]=[c]:y.push(c),c.lane=h|536870912),E):null}function Fy(a){if(50<Cm)throw Cm=0,Fw=null,Error(r(185));for(var c=a.return;c!==null;)a=c,c=a.return;return a.tag===3?a.stateNode:null}var md={};function mK(a,c,h,y){this.tag=a,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mi(a,c,h,y){return new mK(a,c,h,y)}function k_(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Mo(a,c){var h=a.alternate;return h===null?(h=mi(a.tag,c,a.key,a.mode),h.elementType=a.elementType,h.type=a.type,h.stateNode=a.stateNode,h.alternate=a,a.alternate=h):(h.pendingProps=c,h.type=a.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=a.flags&65011712,h.childLanes=a.childLanes,h.lanes=a.lanes,h.child=a.child,h.memoizedProps=a.memoizedProps,h.memoizedState=a.memoizedState,h.updateQueue=a.updateQueue,c=a.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=a.sibling,h.index=a.index,h.ref=a.ref,h.refCleanup=a.refCleanup,h}function zN(a,c){a.flags&=65011714;var h=a.alternate;return h===null?(a.childLanes=0,a.lanes=c,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=h.childLanes,a.lanes=h.lanes,a.child=h.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=h.memoizedProps,a.memoizedState=h.memoizedState,a.updateQueue=h.updateQueue,a.type=h.type,c=h.dependencies,a.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),a}function jy(a,c,h,y,w,E){var L=0;if(y=a,typeof a=="function")k_(a)&&(L=1);else if(typeof a=="string")L=gW(a,h,Ee.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case k:return a=mi(31,h,c,w),a.elementType=k,a.lanes=E,a;case T:return _u(h.children,w,E,c);case S:L=8,w|=24;break;case A:return a=mi(12,h,c,w|2),a.elementType=A,a.lanes=E,a;case O:return a=mi(13,h,c,w),a.elementType=O,a.lanes=E,a;case q:return a=mi(19,h,c,w),a.elementType=q,a.lanes=E,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case I:case N:L=10;break e;case D:L=9;break e;case U:L=11;break e;case M:L=14;break e;case R:L=16,y=null;break e}L=29,h=Error(r(130,a===null?"null":typeof a,"")),y=null}return c=mi(L,h,c,w),c.elementType=a,c.type=y,c.lanes=E,c}function _u(a,c,h,y){return a=mi(7,a,y,c),a.lanes=h,a}function O_(a,c,h){return a=mi(6,a,null,c),a.lanes=h,a}function V_(a,c,h){return c=mi(4,a.children!==null?a.children:[],a.key,c),c.lanes=h,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}var pd=[],gd=0,By=null,qy=0,zi=[],$i=0,wu=null,Do=1,ko="";function Tu(a,c){pd[gd++]=qy,pd[gd++]=By,By=a,qy=c}function $N(a,c,h){zi[$i++]=Do,zi[$i++]=ko,zi[$i++]=wu,wu=a;var y=Do;a=ko;var w=32-tr(y)-1;y&=~(1<<w),h+=1;var E=32-tr(c)+w;if(30<E){var L=w-w%5;E=(y&(1<<L)-1).toString(32),y>>=L,w-=L,Do=1<<32-tr(c)+w|h<<w|y,ko=E+a}else Do=1<<E|h<<w|y,ko=a}function L_(a){a.return!==null&&(Tu(a,1),$N(a,1,0))}function U_(a){for(;a===By;)By=pd[--gd],pd[gd]=null,qy=pd[--gd],pd[gd]=null;for(;a===wu;)wu=zi[--$i],zi[$i]=null,ko=zi[--$i],zi[$i]=null,Do=zi[--$i],zi[$i]=null}var zr=null,gn=null,At=!1,Eu=null,zs=!1,F_=Error(r(519));function Su(a){var c=Error(r(418,""));throw sm(Bi(c,a)),F_}function GN(a){var c=a.stateNode,h=a.type,y=a.memoizedProps;switch(c[Bn]=a,c[Pn]=y,h){case"dialog":dt("cancel",c),dt("close",c);break;case"iframe":case"object":case"embed":dt("load",c);break;case"video":case"audio":for(h=0;h<Rm.length;h++)dt(Rm[h],c);break;case"source":dt("error",c);break;case"img":case"image":case"link":dt("error",c),dt("load",c);break;case"details":dt("toggle",c);break;case"input":dt("invalid",c),uu(c,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),ed(c);break;case"select":dt("invalid",c);break;case"textarea":dt("invalid",c),cu(c,y.value,y.defaultValue,y.children),ed(c)}h=y.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||c.textContent===""+h||y.suppressHydrationWarning===!0||lD(c.textContent,h)?(y.popover!=null&&(dt("beforetoggle",c),dt("toggle",c)),y.onScroll!=null&&dt("scroll",c),y.onScrollEnd!=null&&dt("scrollend",c),y.onClick!=null&&(c.onclick=wv),c=!0):c=!1,c||Su(a)}function HN(a){for(zr=a.return;zr;)switch(zr.tag){case 5:case 13:zs=!1;return;case 27:case 3:zs=!0;return;default:zr=zr.return}}function rm(a){if(a!==zr)return!1;if(!At)return HN(a),At=!0,!1;var c=a.tag,h;if((h=c!==3&&c!==27)&&((h=c===5)&&(h=a.type,h=!(h!=="form"&&h!=="button")||tT(a.type,a.memoizedProps)),h=!h),h&&gn&&Su(a),HN(a),c===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8)if(h=a.data,h==="/$"){if(c===0){gn=ys(a.nextSibling);break e}c--}else h!=="$"&&h!=="$!"&&h!=="$?"||c++;a=a.nextSibling}gn=null}}else c===27?(c=gn,Ja(a.type)?(a=sT,sT=null,gn=a):gn=c):gn=zr?ys(a.stateNode.nextSibling):null;return!0}function im(){gn=zr=null,At=!1}function KN(){var a=Eu;return a!==null&&(ei===null?ei=a:ei.push.apply(ei,a),Eu=null),a}function sm(a){Eu===null?Eu=[a]:Eu.push(a)}var j_=ae(null),Au=null,Oo=null;function Oa(a,c,h){ce(j_,c._currentValue),c._currentValue=h}function Vo(a){a._currentValue=j_.current,le(j_)}function B_(a,c,h){for(;a!==null;){var y=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,y!==null&&(y.childLanes|=c)):y!==null&&(y.childLanes&c)!==c&&(y.childLanes|=c),a===h)break;a=a.return}}function q_(a,c,h,y){var w=a.child;for(w!==null&&(w.return=a);w!==null;){var E=w.dependencies;if(E!==null){var L=w.child;E=E.firstContext;e:for(;E!==null;){var B=E;E=w;for(var K=0;K<c.length;K++)if(B.context===c[K]){E.lanes|=h,B=E.alternate,B!==null&&(B.lanes|=h),B_(E.return,h,a),y||(L=null);break e}E=B.next}}else if(w.tag===18){if(L=w.return,L===null)throw Error(r(341));L.lanes|=h,E=L.alternate,E!==null&&(E.lanes|=h),B_(L,h,a),L=null}else L=w.child;if(L!==null)L.return=w;else for(L=w;L!==null;){if(L===a){L=null;break}if(w=L.sibling,w!==null){w.return=L.return,L=w;break}L=L.return}w=L}}function om(a,c,h,y){a=null;for(var w=c,E=!1;w!==null;){if(!E){if((w.flags&524288)!==0)E=!0;else if((w.flags&262144)!==0)break}if(w.tag===10){var L=w.alternate;if(L===null)throw Error(r(387));if(L=L.memoizedProps,L!==null){var B=w.type;hi(w.pendingProps.value,L.value)||(a!==null?a.push(B):a=[B])}}else if(w===xe.current){if(L=w.alternate,L===null)throw Error(r(387));L.memoizedState.memoizedState!==w.memoizedState.memoizedState&&(a!==null?a.push(Om):a=[Om])}w=w.return}a!==null&&q_(c,a,h,y),c.flags|=262144}function zy(a){for(a=a.firstContext;a!==null;){if(!hi(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Cu(a){Au=a,Oo=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Rr(a){return WN(Au,a)}function $y(a,c){return Au===null&&Cu(a),WN(a,c)}function WN(a,c){var h=c._currentValue;if(c={context:c,memoizedValue:h,next:null},Oo===null){if(a===null)throw Error(r(308));Oo=c,a.dependencies={lanes:0,firstContext:c},a.flags|=524288}else Oo=Oo.next=c;return h}var pK=typeof AbortController<"u"?AbortController:function(){var a=[],c=this.signal={aborted:!1,addEventListener:function(h,y){a.push(y)}};this.abort=function(){c.aborted=!0,a.forEach(function(h){return h()})}},gK=t.unstable_scheduleCallback,yK=t.unstable_NormalPriority,$n={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function z_(){return{controller:new pK,data:new Map,refCount:0}}function am(a){a.refCount--,a.refCount===0&&gK(yK,function(){a.controller.abort()})}var lm=null,$_=0,yd=0,vd=null;function vK(a,c){if(lm===null){var h=lm=[];$_=0,yd=Hw(),vd={status:"pending",value:void 0,then:function(y){h.push(y)}}}return $_++,c.then(YN,YN),c}function YN(){if(--$_===0&&lm!==null){vd!==null&&(vd.status="fulfilled");var a=lm;lm=null,yd=0,vd=null;for(var c=0;c<a.length;c++)(0,a[c])()}}function xK(a,c){var h=[],y={status:"pending",value:null,reason:null,then:function(w){h.push(w)}};return a.then(function(){y.status="fulfilled",y.value=c;for(var w=0;w<h.length;w++)(0,h[w])(c)},function(w){for(y.status="rejected",y.reason=w,w=0;w<h.length;w++)(0,h[w])(void 0)}),y}var JN=Y.S;Y.S=function(a,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&vK(a,c),JN!==null&&JN(a,c)};var Iu=ae(null);function G_(){var a=Iu.current;return a!==null?a:$t.pooledCache}function Gy(a,c){c===null?ce(Iu,Iu.current):ce(Iu,c.pool)}function QN(){var a=G_();return a===null?null:{parent:$n._currentValue,pool:a}}var um=Error(r(460)),XN=Error(r(474)),Hy=Error(r(542)),H_={then:function(){}};function ZN(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Ky(){}function eM(a,c,h){switch(h=a[h],h===void 0?a.push(c):h!==c&&(c.then(Ky,Ky),c=h),c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,nM(a),a;default:if(typeof c.status=="string")c.then(Ky,Ky);else{if(a=$t,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=c,a.status="pending",a.then(function(y){if(c.status==="pending"){var w=c;w.status="fulfilled",w.value=y}},function(y){if(c.status==="pending"){var w=c;w.status="rejected",w.reason=y}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,nM(a),a}throw cm=c,um}}var cm=null;function tM(){if(cm===null)throw Error(r(459));var a=cm;return cm=null,a}function nM(a){if(a===um||a===Hy)throw Error(r(483))}var Va=!1;function K_(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function W_(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function La(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Ua(a,c,h){var y=a.updateQueue;if(y===null)return null;if(y=y.shared,(Mt&2)!==0){var w=y.pending;return w===null?c.next=c:(c.next=w.next,w.next=c),y.pending=c,c=Fy(a),qN(a,null,h),c}return Uy(a,y,c,h),Fy(a)}function dm(a,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194048)!==0)){var y=c.lanes;y&=a.pendingLanes,h|=y,c.lanes=h,Fh(a,h)}}function Y_(a,c){var h=a.updateQueue,y=a.alternate;if(y!==null&&(y=y.updateQueue,h===y)){var w=null,E=null;if(h=h.firstBaseUpdate,h!==null){do{var L={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};E===null?w=E=L:E=E.next=L,h=h.next}while(h!==null);E===null?w=E=c:E=E.next=c}else w=E=c;h={baseState:y.baseState,firstBaseUpdate:w,lastBaseUpdate:E,shared:y.shared,callbacks:y.callbacks},a.updateQueue=h;return}a=h.lastBaseUpdate,a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=c}var J_=!1;function fm(){if(J_){var a=vd;if(a!==null)throw a}}function hm(a,c,h,y){J_=!1;var w=a.updateQueue;Va=!1;var E=w.firstBaseUpdate,L=w.lastBaseUpdate,B=w.shared.pending;if(B!==null){w.shared.pending=null;var K=B,te=K.next;K.next=null,L===null?E=te:L.next=te,L=K;var he=a.alternate;he!==null&&(he=he.updateQueue,B=he.lastBaseUpdate,B!==L&&(B===null?he.firstBaseUpdate=te:B.next=te,he.lastBaseUpdate=K))}if(E!==null){var pe=w.baseState;L=0,he=te=K=null,B=E;do{var ne=B.lane&-536870913,re=ne!==B.lane;if(re?(vt&ne)===ne:(y&ne)===ne){ne!==0&&ne===yd&&(J_=!0),he!==null&&(he=he.next={lane:0,tag:B.tag,payload:B.payload,callback:null,next:null});e:{var Xe=a,We=B;ne=c;var jt=h;switch(We.tag){case 1:if(Xe=We.payload,typeof Xe=="function"){pe=Xe.call(jt,pe,ne);break e}pe=Xe;break e;case 3:Xe.flags=Xe.flags&-65537|128;case 0:if(Xe=We.payload,ne=typeof Xe=="function"?Xe.call(jt,pe,ne):Xe,ne==null)break e;pe=f({},pe,ne);break e;case 2:Va=!0}}ne=B.callback,ne!==null&&(a.flags|=64,re&&(a.flags|=8192),re=w.callbacks,re===null?w.callbacks=[ne]:re.push(ne))}else re={lane:ne,tag:B.tag,payload:B.payload,callback:B.callback,next:null},he===null?(te=he=re,K=pe):he=he.next=re,L|=ne;if(B=B.next,B===null){if(B=w.shared.pending,B===null)break;re=B,B=re.next,re.next=null,w.lastBaseUpdate=re,w.shared.pending=null}}while(!0);he===null&&(K=pe),w.baseState=K,w.firstBaseUpdate=te,w.lastBaseUpdate=he,E===null&&(w.shared.lanes=0),Ha|=L,a.lanes=L,a.memoizedState=pe}}function rM(a,c){if(typeof a!="function")throw Error(r(191,a));a.call(c)}function iM(a,c){var h=a.callbacks;if(h!==null)for(a.callbacks=null,a=0;a<h.length;a++)rM(h[a],c)}var xd=ae(null),Wy=ae(0);function sM(a,c){a=zo,ce(Wy,a),ce(xd,c),zo=a|c.baseLanes}function Q_(){ce(Wy,zo),ce(xd,xd.current)}function X_(){zo=Wy.current,le(xd),le(Wy)}var Fa=0,at=null,Ut=null,Mn=null,Yy=!1,bd=!1,Ru=!1,Jy=0,mm=0,_d=null,bK=0;function En(){throw Error(r(321))}function Z_(a,c){if(c===null)return!1;for(var h=0;h<c.length&&h<a.length;h++)if(!hi(a[h],c[h]))return!1;return!0}function ew(a,c,h,y,w,E){return Fa=E,at=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Y.H=a===null||a.memoizedState===null?qM:zM,Ru=!1,E=h(y,w),Ru=!1,bd&&(E=aM(c,h,y,w)),oM(a),E}function oM(a){Y.H=nv;var c=Ut!==null&&Ut.next!==null;if(Fa=0,Mn=Ut=at=null,Yy=!1,mm=0,_d=null,c)throw Error(r(300));a===null||ir||(a=a.dependencies,a!==null&&zy(a)&&(ir=!0))}function aM(a,c,h,y){at=a;var w=0;do{if(bd&&(_d=null),mm=0,bd=!1,25<=w)throw Error(r(301));if(w+=1,Mn=Ut=null,a.updateQueue!=null){var E=a.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}Y.H=CK,E=c(h,y)}while(bd);return E}function _K(){var a=Y.H,c=a.useState()[0];return c=typeof c.then=="function"?pm(c):c,a=a.useState()[0],(Ut!==null?Ut.memoizedState:null)!==a&&(at.flags|=1024),c}function tw(){var a=Jy!==0;return Jy=0,a}function nw(a,c,h){c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~h}function rw(a){if(Yy){for(a=a.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}Yy=!1}Fa=0,Mn=Ut=at=null,bd=!1,mm=Jy=0,_d=null}function Xr(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mn===null?at.memoizedState=Mn=a:Mn=Mn.next=a,Mn}function Dn(){if(Ut===null){var a=at.alternate;a=a!==null?a.memoizedState:null}else a=Ut.next;var c=Mn===null?at.memoizedState:Mn.next;if(c!==null)Mn=c,Ut=a;else{if(a===null)throw at.alternate===null?Error(r(467)):Error(r(310));Ut=a,a={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},Mn===null?at.memoizedState=Mn=a:Mn=Mn.next=a}return Mn}function iw(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pm(a){var c=mm;return mm+=1,_d===null&&(_d=[]),a=eM(_d,a,c),c=at,(Mn===null?c.memoizedState:Mn.next)===null&&(c=c.alternate,Y.H=c===null||c.memoizedState===null?qM:zM),a}function Qy(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return pm(a);if(a.$$typeof===N)return Rr(a)}throw Error(r(438,String(a)))}function sw(a){var c=null,h=at.updateQueue;if(h!==null&&(c=h.memoCache),c==null){var y=at.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(c={data:y.data.map(function(w){return w.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),h===null&&(h=iw(),at.updateQueue=h),h.memoCache=c,h=c.data[c.index],h===void 0)for(h=c.data[c.index]=Array(a),y=0;y<a;y++)h[y]=F;return c.index++,h}function Lo(a,c){return typeof c=="function"?c(a):c}function Xy(a){var c=Dn();return ow(c,Ut,a)}function ow(a,c,h){var y=a.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=h;var w=a.baseQueue,E=y.pending;if(E!==null){if(w!==null){var L=w.next;w.next=E.next,E.next=L}c.baseQueue=w=E,y.pending=null}if(E=a.baseState,w===null)a.memoizedState=E;else{c=w.next;var B=L=null,K=null,te=c,he=!1;do{var pe=te.lane&-536870913;if(pe!==te.lane?(vt&pe)===pe:(Fa&pe)===pe){var ne=te.revertLane;if(ne===0)K!==null&&(K=K.next={lane:0,revertLane:0,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),pe===yd&&(he=!0);else if((Fa&ne)===ne){te=te.next,ne===yd&&(he=!0);continue}else pe={lane:0,revertLane:te.revertLane,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},K===null?(B=K=pe,L=E):K=K.next=pe,at.lanes|=ne,Ha|=ne;pe=te.action,Ru&&h(E,pe),E=te.hasEagerState?te.eagerState:h(E,pe)}else ne={lane:pe,revertLane:te.revertLane,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},K===null?(B=K=ne,L=E):K=K.next=ne,at.lanes|=pe,Ha|=pe;te=te.next}while(te!==null&&te!==c);if(K===null?L=E:K.next=B,!hi(E,a.memoizedState)&&(ir=!0,he&&(h=vd,h!==null)))throw h;a.memoizedState=E,a.baseState=L,a.baseQueue=K,y.lastRenderedState=E}return w===null&&(y.lanes=0),[a.memoizedState,y.dispatch]}function aw(a){var c=Dn(),h=c.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=a;var y=h.dispatch,w=h.pending,E=c.memoizedState;if(w!==null){h.pending=null;var L=w=w.next;do E=a(E,L.action),L=L.next;while(L!==w);hi(E,c.memoizedState)||(ir=!0),c.memoizedState=E,c.baseQueue===null&&(c.baseState=E),h.lastRenderedState=E}return[E,y]}function lM(a,c,h){var y=at,w=Dn(),E=At;if(E){if(h===void 0)throw Error(r(407));h=h()}else h=c();var L=!hi((Ut||w).memoizedState,h);L&&(w.memoizedState=h,ir=!0),w=w.queue;var B=dM.bind(null,y,w,a);if(gm(2048,8,B,[a]),w.getSnapshot!==c||L||Mn!==null&&Mn.memoizedState.tag&1){if(y.flags|=2048,wd(9,Zy(),cM.bind(null,y,w,h,c),null),$t===null)throw Error(r(349));E||(Fa&124)!==0||uM(y,c,h)}return h}function uM(a,c,h){a.flags|=16384,a={getSnapshot:c,value:h},c=at.updateQueue,c===null?(c=iw(),at.updateQueue=c,c.stores=[a]):(h=c.stores,h===null?c.stores=[a]:h.push(a))}function cM(a,c,h,y){c.value=h,c.getSnapshot=y,fM(c)&&hM(a)}function dM(a,c,h){return h(function(){fM(c)&&hM(a)})}function fM(a){var c=a.getSnapshot;a=a.value;try{var h=c();return!hi(a,h)}catch{return!0}}function hM(a){var c=hd(a,2);c!==null&&xi(c,a,2)}function lw(a){var c=Xr();if(typeof a=="function"){var h=a;if(a=h(),Ru){er(!0);try{h()}finally{er(!1)}}}return c.memoizedState=c.baseState=a,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:a},c}function mM(a,c,h,y){return a.baseState=h,ow(a,Ut,typeof y=="function"?y:Lo)}function wK(a,c,h,y,w){if(tv(a))throw Error(r(485));if(a=c.action,a!==null){var E={payload:w,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(L){E.listeners.push(L)}};Y.T!==null?h(!0):E.isTransition=!1,y(E),h=c.pending,h===null?(E.next=c.pending=E,pM(c,E)):(E.next=h.next,c.pending=h.next=E)}}function pM(a,c){var h=c.action,y=c.payload,w=a.state;if(c.isTransition){var E=Y.T,L={};Y.T=L;try{var B=h(w,y),K=Y.S;K!==null&&K(L,B),gM(a,c,B)}catch(te){uw(a,c,te)}finally{Y.T=E}}else try{E=h(w,y),gM(a,c,E)}catch(te){uw(a,c,te)}}function gM(a,c,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(y){yM(a,c,y)},function(y){return uw(a,c,y)}):yM(a,c,h)}function yM(a,c,h){c.status="fulfilled",c.value=h,vM(c),a.state=h,c=a.pending,c!==null&&(h=c.next,h===c?a.pending=null:(h=h.next,c.next=h,pM(a,h)))}function uw(a,c,h){var y=a.pending;if(a.pending=null,y!==null){y=y.next;do c.status="rejected",c.reason=h,vM(c),c=c.next;while(c!==y)}a.action=null}function vM(a){a=a.listeners;for(var c=0;c<a.length;c++)(0,a[c])()}function xM(a,c){return c}function bM(a,c){if(At){var h=$t.formState;if(h!==null){e:{var y=at;if(At){if(gn){t:{for(var w=gn,E=zs;w.nodeType!==8;){if(!E){w=null;break t}if(w=ys(w.nextSibling),w===null){w=null;break t}}E=w.data,w=E==="F!"||E==="F"?w:null}if(w){gn=ys(w.nextSibling),y=w.data==="F!";break e}}Su(y)}y=!1}y&&(c=h[0])}}return h=Xr(),h.memoizedState=h.baseState=c,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xM,lastRenderedState:c},h.queue=y,h=FM.bind(null,at,y),y.dispatch=h,y=lw(!1),E=mw.bind(null,at,!1,y.queue),y=Xr(),w={state:c,dispatch:null,action:a,pending:null},y.queue=w,h=wK.bind(null,at,w,E,h),w.dispatch=h,y.memoizedState=a,[c,h,!1]}function _M(a){var c=Dn();return wM(c,Ut,a)}function wM(a,c,h){if(c=ow(a,c,xM)[0],a=Xy(Lo)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var y=pm(c)}catch(L){throw L===um?Hy:L}else y=c;c=Dn();var w=c.queue,E=w.dispatch;return h!==c.memoizedState&&(at.flags|=2048,wd(9,Zy(),TK.bind(null,w,h),null)),[y,E,a]}function TK(a,c){a.action=c}function TM(a){var c=Dn(),h=Ut;if(h!==null)return wM(c,h,a);Dn(),c=c.memoizedState,h=Dn();var y=h.queue.dispatch;return h.memoizedState=a,[c,y,!1]}function wd(a,c,h,y){return a={tag:a,create:h,deps:y,inst:c,next:null},c=at.updateQueue,c===null&&(c=iw(),at.updateQueue=c),h=c.lastEffect,h===null?c.lastEffect=a.next=a:(y=h.next,h.next=a,a.next=y,c.lastEffect=a),a}function Zy(){return{destroy:void 0,resource:void 0}}function EM(){return Dn().memoizedState}function ev(a,c,h,y){var w=Xr();y=y===void 0?null:y,at.flags|=a,w.memoizedState=wd(1|c,Zy(),h,y)}function gm(a,c,h,y){var w=Dn();y=y===void 0?null:y;var E=w.memoizedState.inst;Ut!==null&&y!==null&&Z_(y,Ut.memoizedState.deps)?w.memoizedState=wd(c,E,h,y):(at.flags|=a,w.memoizedState=wd(1|c,E,h,y))}function SM(a,c){ev(8390656,8,a,c)}function AM(a,c){gm(2048,8,a,c)}function CM(a,c){return gm(4,2,a,c)}function IM(a,c){return gm(4,4,a,c)}function RM(a,c){if(typeof c=="function"){a=a();var h=c(a);return function(){typeof h=="function"?h():c(null)}}if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function PM(a,c,h){h=h!=null?h.concat([a]):null,gm(4,4,RM.bind(null,c,a),h)}function cw(){}function NM(a,c){var h=Dn();c=c===void 0?null:c;var y=h.memoizedState;return c!==null&&Z_(c,y[1])?y[0]:(h.memoizedState=[a,c],a)}function MM(a,c){var h=Dn();c=c===void 0?null:c;var y=h.memoizedState;if(c!==null&&Z_(c,y[1]))return y[0];if(y=a(),Ru){er(!0);try{a()}finally{er(!1)}}return h.memoizedState=[y,c],y}function dw(a,c,h){return h===void 0||(Fa&1073741824)!==0?a.memoizedState=c:(a.memoizedState=h,a=O2(),at.lanes|=a,Ha|=a,h)}function DM(a,c,h,y){return hi(h,c)?h:xd.current!==null?(a=dw(a,h,y),hi(a,c)||(ir=!0),a):(Fa&42)===0?(ir=!0,a.memoizedState=h):(a=O2(),at.lanes|=a,Ha|=a,c)}function kM(a,c,h,y,w){var E=se.p;se.p=E!==0&&8>E?E:8;var L=Y.T,B={};Y.T=B,mw(a,!1,c,h);try{var K=w(),te=Y.S;if(te!==null&&te(B,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var he=xK(K,y);ym(a,c,he,vi(a))}else ym(a,c,y,vi(a))}catch(pe){ym(a,c,{then:function(){},status:"rejected",reason:pe},vi())}finally{se.p=E,Y.T=L}}function EK(){}function fw(a,c,h,y){if(a.tag!==5)throw Error(r(476));var w=OM(a).queue;kM(a,w,c,Q,h===null?EK:function(){return VM(a),h(y)})}function OM(a){var c=a.memoizedState;if(c!==null)return c;c={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:Q},next:null};var h={};return c.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:h},next:null},a.memoizedState=c,a=a.alternate,a!==null&&(a.memoizedState=c),c}function VM(a){var c=OM(a).next.queue;ym(a,c,{},vi())}function hw(){return Rr(Om)}function LM(){return Dn().memoizedState}function UM(){return Dn().memoizedState}function SK(a){for(var c=a.return;c!==null;){switch(c.tag){case 24:case 3:var h=vi();a=La(h);var y=Ua(c,a,h);y!==null&&(xi(y,c,h),dm(y,c,h)),c={cache:z_()},a.payload=c;return}c=c.return}}function AK(a,c,h){var y=vi();h={lane:y,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null},tv(a)?jM(c,h):(h=D_(a,c,h,y),h!==null&&(xi(h,a,y),BM(h,c,y)))}function FM(a,c,h){var y=vi();ym(a,c,h,y)}function ym(a,c,h,y){var w={lane:y,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null};if(tv(a))jM(c,w);else{var E=a.alternate;if(a.lanes===0&&(E===null||E.lanes===0)&&(E=c.lastRenderedReducer,E!==null))try{var L=c.lastRenderedState,B=E(L,h);if(w.hasEagerState=!0,w.eagerState=B,hi(B,L))return Uy(a,c,w,0),$t===null&&Ly(),!1}catch{}finally{}if(h=D_(a,c,w,y),h!==null)return xi(h,a,y),BM(h,c,y),!0}return!1}function mw(a,c,h,y){if(y={lane:2,revertLane:Hw(),action:y,hasEagerState:!1,eagerState:null,next:null},tv(a)){if(c)throw Error(r(479))}else c=D_(a,h,y,2),c!==null&&xi(c,a,2)}function tv(a){var c=a.alternate;return a===at||c!==null&&c===at}function jM(a,c){bd=Yy=!0;var h=a.pending;h===null?c.next=c:(c.next=h.next,h.next=c),a.pending=c}function BM(a,c,h){if((h&4194048)!==0){var y=c.lanes;y&=a.pendingLanes,h|=y,c.lanes=h,Fh(a,h)}}var nv={readContext:Rr,use:Qy,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useLayoutEffect:En,useInsertionEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useSyncExternalStore:En,useId:En,useHostTransitionStatus:En,useFormState:En,useActionState:En,useOptimistic:En,useMemoCache:En,useCacheRefresh:En},qM={readContext:Rr,use:Qy,useCallback:function(a,c){return Xr().memoizedState=[a,c===void 0?null:c],a},useContext:Rr,useEffect:SM,useImperativeHandle:function(a,c,h){h=h!=null?h.concat([a]):null,ev(4194308,4,RM.bind(null,c,a),h)},useLayoutEffect:function(a,c){return ev(4194308,4,a,c)},useInsertionEffect:function(a,c){ev(4,2,a,c)},useMemo:function(a,c){var h=Xr();c=c===void 0?null:c;var y=a();if(Ru){er(!0);try{a()}finally{er(!1)}}return h.memoizedState=[y,c],y},useReducer:function(a,c,h){var y=Xr();if(h!==void 0){var w=h(c);if(Ru){er(!0);try{h(c)}finally{er(!1)}}}else w=c;return y.memoizedState=y.baseState=w,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:w},y.queue=a,a=a.dispatch=AK.bind(null,at,a),[y.memoizedState,a]},useRef:function(a){var c=Xr();return a={current:a},c.memoizedState=a},useState:function(a){a=lw(a);var c=a.queue,h=FM.bind(null,at,c);return c.dispatch=h,[a.memoizedState,h]},useDebugValue:cw,useDeferredValue:function(a,c){var h=Xr();return dw(h,a,c)},useTransition:function(){var a=lw(!1);return a=kM.bind(null,at,a.queue,!0,!1),Xr().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,c,h){var y=at,w=Xr();if(At){if(h===void 0)throw Error(r(407));h=h()}else{if(h=c(),$t===null)throw Error(r(349));(vt&124)!==0||uM(y,c,h)}w.memoizedState=h;var E={value:h,getSnapshot:c};return w.queue=E,SM(dM.bind(null,y,E,a),[a]),y.flags|=2048,wd(9,Zy(),cM.bind(null,y,E,h,c),null),h},useId:function(){var a=Xr(),c=$t.identifierPrefix;if(At){var h=ko,y=Do;h=(y&~(1<<32-tr(y)-1)).toString(32)+h,c=""+c+"R"+h,h=Jy++,0<h&&(c+="H"+h.toString(32)),c+=""}else h=bK++,c=""+c+"r"+h.toString(32)+"";return a.memoizedState=c},useHostTransitionStatus:hw,useFormState:bM,useActionState:bM,useOptimistic:function(a){var c=Xr();c.memoizedState=c.baseState=a;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=h,c=mw.bind(null,at,!0,h),h.dispatch=c,[a,c]},useMemoCache:sw,useCacheRefresh:function(){return Xr().memoizedState=SK.bind(null,at)}},zM={readContext:Rr,use:Qy,useCallback:NM,useContext:Rr,useEffect:AM,useImperativeHandle:PM,useInsertionEffect:CM,useLayoutEffect:IM,useMemo:MM,useReducer:Xy,useRef:EM,useState:function(){return Xy(Lo)},useDebugValue:cw,useDeferredValue:function(a,c){var h=Dn();return DM(h,Ut.memoizedState,a,c)},useTransition:function(){var a=Xy(Lo)[0],c=Dn().memoizedState;return[typeof a=="boolean"?a:pm(a),c]},useSyncExternalStore:lM,useId:LM,useHostTransitionStatus:hw,useFormState:_M,useActionState:_M,useOptimistic:function(a,c){var h=Dn();return mM(h,Ut,a,c)},useMemoCache:sw,useCacheRefresh:UM},CK={readContext:Rr,use:Qy,useCallback:NM,useContext:Rr,useEffect:AM,useImperativeHandle:PM,useInsertionEffect:CM,useLayoutEffect:IM,useMemo:MM,useReducer:aw,useRef:EM,useState:function(){return aw(Lo)},useDebugValue:cw,useDeferredValue:function(a,c){var h=Dn();return Ut===null?dw(h,a,c):DM(h,Ut.memoizedState,a,c)},useTransition:function(){var a=aw(Lo)[0],c=Dn().memoizedState;return[typeof a=="boolean"?a:pm(a),c]},useSyncExternalStore:lM,useId:LM,useHostTransitionStatus:hw,useFormState:TM,useActionState:TM,useOptimistic:function(a,c){var h=Dn();return Ut!==null?mM(h,Ut,a,c):(h.baseState=a,[a,h.queue.dispatch])},useMemoCache:sw,useCacheRefresh:UM},Td=null,vm=0;function rv(a){var c=vm;return vm+=1,Td===null&&(Td=[]),eM(Td,a,c)}function xm(a,c){c=c.props.ref,a.ref=c!==void 0?c:null}function iv(a,c){throw c.$$typeof===m?Error(r(525)):(a=Object.prototype.toString.call(c),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a)))}function $M(a){var c=a._init;return c(a._payload)}function GM(a){function c(J,W){if(a){var ee=J.deletions;ee===null?(J.deletions=[W],J.flags|=16):ee.push(W)}}function h(J,W){if(!a)return null;for(;W!==null;)c(J,W),W=W.sibling;return null}function y(J){for(var W=new Map;J!==null;)J.key!==null?W.set(J.key,J):W.set(J.index,J),J=J.sibling;return W}function w(J,W){return J=Mo(J,W),J.index=0,J.sibling=null,J}function E(J,W,ee){return J.index=ee,a?(ee=J.alternate,ee!==null?(ee=ee.index,ee<W?(J.flags|=67108866,W):ee):(J.flags|=67108866,W)):(J.flags|=1048576,W)}function L(J){return a&&J.alternate===null&&(J.flags|=67108866),J}function B(J,W,ee,me){return W===null||W.tag!==6?(W=O_(ee,J.mode,me),W.return=J,W):(W=w(W,ee),W.return=J,W)}function K(J,W,ee,me){var Oe=ee.type;return Oe===T?he(J,W,ee.props.children,me,ee.key):W!==null&&(W.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===R&&$M(Oe)===W.type)?(W=w(W,ee.props),xm(W,ee),W.return=J,W):(W=jy(ee.type,ee.key,ee.props,null,J.mode,me),xm(W,ee),W.return=J,W)}function te(J,W,ee,me){return W===null||W.tag!==4||W.stateNode.containerInfo!==ee.containerInfo||W.stateNode.implementation!==ee.implementation?(W=V_(ee,J.mode,me),W.return=J,W):(W=w(W,ee.children||[]),W.return=J,W)}function he(J,W,ee,me,Oe){return W===null||W.tag!==7?(W=_u(ee,J.mode,me,Oe),W.return=J,W):(W=w(W,ee),W.return=J,W)}function pe(J,W,ee){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=O_(""+W,J.mode,ee),W.return=J,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case v:return ee=jy(W.type,W.key,W.props,null,J.mode,ee),xm(ee,W),ee.return=J,ee;case _:return W=V_(W,J.mode,ee),W.return=J,W;case R:var me=W._init;return W=me(W._payload),pe(J,W,ee)}if(ve(W)||G(W))return W=_u(W,J.mode,ee,null),W.return=J,W;if(typeof W.then=="function")return pe(J,rv(W),ee);if(W.$$typeof===N)return pe(J,$y(J,W),ee);iv(J,W)}return null}function ne(J,W,ee,me){var Oe=W!==null?W.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return Oe!==null?null:B(J,W,""+ee,me);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case v:return ee.key===Oe?K(J,W,ee,me):null;case _:return ee.key===Oe?te(J,W,ee,me):null;case R:return Oe=ee._init,ee=Oe(ee._payload),ne(J,W,ee,me)}if(ve(ee)||G(ee))return Oe!==null?null:he(J,W,ee,me,null);if(typeof ee.then=="function")return ne(J,W,rv(ee),me);if(ee.$$typeof===N)return ne(J,W,$y(J,ee),me);iv(J,ee)}return null}function re(J,W,ee,me,Oe){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return J=J.get(ee)||null,B(W,J,""+me,Oe);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case v:return J=J.get(me.key===null?ee:me.key)||null,K(W,J,me,Oe);case _:return J=J.get(me.key===null?ee:me.key)||null,te(W,J,me,Oe);case R:var ut=me._init;return me=ut(me._payload),re(J,W,ee,me,Oe)}if(ve(me)||G(me))return J=J.get(ee)||null,he(W,J,me,Oe,null);if(typeof me.then=="function")return re(J,W,ee,rv(me),Oe);if(me.$$typeof===N)return re(J,W,ee,$y(W,me),Oe);iv(W,me)}return null}function Xe(J,W,ee,me){for(var Oe=null,ut=null,ze=W,Qe=W=0,or=null;ze!==null&&Qe<ee.length;Qe++){ze.index>Qe?(or=ze,ze=null):or=ze.sibling;var _t=ne(J,ze,ee[Qe],me);if(_t===null){ze===null&&(ze=or);break}a&&ze&&_t.alternate===null&&c(J,ze),W=E(_t,W,Qe),ut===null?Oe=_t:ut.sibling=_t,ut=_t,ze=or}if(Qe===ee.length)return h(J,ze),At&&Tu(J,Qe),Oe;if(ze===null){for(;Qe<ee.length;Qe++)ze=pe(J,ee[Qe],me),ze!==null&&(W=E(ze,W,Qe),ut===null?Oe=ze:ut.sibling=ze,ut=ze);return At&&Tu(J,Qe),Oe}for(ze=y(ze);Qe<ee.length;Qe++)or=re(ze,J,Qe,ee[Qe],me),or!==null&&(a&&or.alternate!==null&&ze.delete(or.key===null?Qe:or.key),W=E(or,W,Qe),ut===null?Oe=or:ut.sibling=or,ut=or);return a&&ze.forEach(function(tl){return c(J,tl)}),At&&Tu(J,Qe),Oe}function We(J,W,ee,me){if(ee==null)throw Error(r(151));for(var Oe=null,ut=null,ze=W,Qe=W=0,or=null,_t=ee.next();ze!==null&&!_t.done;Qe++,_t=ee.next()){ze.index>Qe?(or=ze,ze=null):or=ze.sibling;var tl=ne(J,ze,_t.value,me);if(tl===null){ze===null&&(ze=or);break}a&&ze&&tl.alternate===null&&c(J,ze),W=E(tl,W,Qe),ut===null?Oe=tl:ut.sibling=tl,ut=tl,ze=or}if(_t.done)return h(J,ze),At&&Tu(J,Qe),Oe;if(ze===null){for(;!_t.done;Qe++,_t=ee.next())_t=pe(J,_t.value,me),_t!==null&&(W=E(_t,W,Qe),ut===null?Oe=_t:ut.sibling=_t,ut=_t);return At&&Tu(J,Qe),Oe}for(ze=y(ze);!_t.done;Qe++,_t=ee.next())_t=re(ze,J,Qe,_t.value,me),_t!==null&&(a&&_t.alternate!==null&&ze.delete(_t.key===null?Qe:_t.key),W=E(_t,W,Qe),ut===null?Oe=_t:ut.sibling=_t,ut=_t);return a&&ze.forEach(function(IW){return c(J,IW)}),At&&Tu(J,Qe),Oe}function jt(J,W,ee,me){if(typeof ee=="object"&&ee!==null&&ee.type===T&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case v:e:{for(var Oe=ee.key;W!==null;){if(W.key===Oe){if(Oe=ee.type,Oe===T){if(W.tag===7){h(J,W.sibling),me=w(W,ee.props.children),me.return=J,J=me;break e}}else if(W.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===R&&$M(Oe)===W.type){h(J,W.sibling),me=w(W,ee.props),xm(me,ee),me.return=J,J=me;break e}h(J,W);break}else c(J,W);W=W.sibling}ee.type===T?(me=_u(ee.props.children,J.mode,me,ee.key),me.return=J,J=me):(me=jy(ee.type,ee.key,ee.props,null,J.mode,me),xm(me,ee),me.return=J,J=me)}return L(J);case _:e:{for(Oe=ee.key;W!==null;){if(W.key===Oe)if(W.tag===4&&W.stateNode.containerInfo===ee.containerInfo&&W.stateNode.implementation===ee.implementation){h(J,W.sibling),me=w(W,ee.children||[]),me.return=J,J=me;break e}else{h(J,W);break}else c(J,W);W=W.sibling}me=V_(ee,J.mode,me),me.return=J,J=me}return L(J);case R:return Oe=ee._init,ee=Oe(ee._payload),jt(J,W,ee,me)}if(ve(ee))return Xe(J,W,ee,me);if(G(ee)){if(Oe=G(ee),typeof Oe!="function")throw Error(r(150));return ee=Oe.call(ee),We(J,W,ee,me)}if(typeof ee.then=="function")return jt(J,W,rv(ee),me);if(ee.$$typeof===N)return jt(J,W,$y(J,ee),me);iv(J,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,W!==null&&W.tag===6?(h(J,W.sibling),me=w(W,ee),me.return=J,J=me):(h(J,W),me=O_(ee,J.mode,me),me.return=J,J=me),L(J)):h(J,W)}return function(J,W,ee,me){try{vm=0;var Oe=jt(J,W,ee,me);return Td=null,Oe}catch(ze){if(ze===um||ze===Hy)throw ze;var ut=mi(29,ze,null,J.mode);return ut.lanes=me,ut.return=J,ut}finally{}}}var Ed=GM(!0),HM=GM(!1),Gi=ae(null),$s=null;function ja(a){var c=a.alternate;ce(Gn,Gn.current&1),ce(Gi,a),$s===null&&(c===null||xd.current!==null||c.memoizedState!==null)&&($s=a)}function KM(a){if(a.tag===22){if(ce(Gn,Gn.current),ce(Gi,a),$s===null){var c=a.alternate;c!==null&&c.memoizedState!==null&&($s=a)}}else Ba()}function Ba(){ce(Gn,Gn.current),ce(Gi,Gi.current)}function Uo(a){le(Gi),$s===a&&($s=null),le(Gn)}var Gn=ae(0);function sv(a){for(var c=a;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||iT(h)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function pw(a,c,h,y){c=a.memoizedState,h=h(y,c),h=h==null?c:f({},c,h),a.memoizedState=h,a.lanes===0&&(a.updateQueue.baseState=h)}var gw={enqueueSetState:function(a,c,h){a=a._reactInternals;var y=vi(),w=La(y);w.payload=c,h!=null&&(w.callback=h),c=Ua(a,w,y),c!==null&&(xi(c,a,y),dm(c,a,y))},enqueueReplaceState:function(a,c,h){a=a._reactInternals;var y=vi(),w=La(y);w.tag=1,w.payload=c,h!=null&&(w.callback=h),c=Ua(a,w,y),c!==null&&(xi(c,a,y),dm(c,a,y))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var h=vi(),y=La(h);y.tag=2,c!=null&&(y.callback=c),c=Ua(a,y,h),c!==null&&(xi(c,a,h),dm(c,a,h))}};function WM(a,c,h,y,w,E,L){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(y,E,L):c.prototype&&c.prototype.isPureReactComponent?!tm(h,y)||!tm(w,E):!0}function YM(a,c,h,y){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,y),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,y),c.state!==a&&gw.enqueueReplaceState(c,c.state,null)}function Pu(a,c){var h=c;if("ref"in c){h={};for(var y in c)y!=="ref"&&(h[y]=c[y])}if(a=a.defaultProps){h===c&&(h=f({},h));for(var w in a)h[w]===void 0&&(h[w]=a[w])}return h}var ov=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function JM(a){ov(a)}function QM(a){console.error(a)}function XM(a){ov(a)}function av(a,c){try{var h=a.onUncaughtError;h(c.value,{componentStack:c.stack})}catch(y){setTimeout(function(){throw y})}}function ZM(a,c,h){try{var y=a.onCaughtError;y(h.value,{componentStack:h.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(w){setTimeout(function(){throw w})}}function yw(a,c,h){return h=La(h),h.tag=3,h.payload={element:null},h.callback=function(){av(a,c)},h}function e2(a){return a=La(a),a.tag=3,a}function t2(a,c,h,y){var w=h.type.getDerivedStateFromError;if(typeof w=="function"){var E=y.value;a.payload=function(){return w(E)},a.callback=function(){ZM(c,h,y)}}var L=h.stateNode;L!==null&&typeof L.componentDidCatch=="function"&&(a.callback=function(){ZM(c,h,y),typeof w!="function"&&(Ka===null?Ka=new Set([this]):Ka.add(this));var B=y.stack;this.componentDidCatch(y.value,{componentStack:B!==null?B:""})})}function IK(a,c,h,y,w){if(h.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(c=h.alternate,c!==null&&om(c,h,w,!0),h=Gi.current,h!==null){switch(h.tag){case 13:return $s===null?Bw():h.alternate===null&&yn===0&&(yn=3),h.flags&=-257,h.flags|=65536,h.lanes=w,y===H_?h.flags|=16384:(c=h.updateQueue,c===null?h.updateQueue=new Set([y]):c.add(y),zw(a,y,w)),!1;case 22:return h.flags|=65536,y===H_?h.flags|=16384:(c=h.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([y])},h.updateQueue=c):(h=c.retryQueue,h===null?c.retryQueue=new Set([y]):h.add(y)),zw(a,y,w)),!1}throw Error(r(435,h.tag))}return zw(a,y,w),Bw(),!1}if(At)return c=Gi.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=w,y!==F_&&(a=Error(r(422),{cause:y}),sm(Bi(a,h)))):(y!==F_&&(c=Error(r(423),{cause:y}),sm(Bi(c,h))),a=a.current.alternate,a.flags|=65536,w&=-w,a.lanes|=w,y=Bi(y,h),w=yw(a.stateNode,y,w),Y_(a,w),yn!==4&&(yn=2)),!1;var E=Error(r(520),{cause:y});if(E=Bi(E,h),Am===null?Am=[E]:Am.push(E),yn!==4&&(yn=2),c===null)return!0;y=Bi(y,h),h=c;do{switch(h.tag){case 3:return h.flags|=65536,a=w&-w,h.lanes|=a,a=yw(h.stateNode,y,a),Y_(h,a),!1;case 1:if(c=h.type,E=h.stateNode,(h.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Ka===null||!Ka.has(E))))return h.flags|=65536,w&=-w,h.lanes|=w,w=e2(w),t2(w,a,h,y),Y_(h,w),!1}h=h.return}while(h!==null);return!1}var n2=Error(r(461)),ir=!1;function pr(a,c,h,y){c.child=a===null?HM(c,null,h,y):Ed(c,a.child,h,y)}function r2(a,c,h,y,w){h=h.render;var E=c.ref;if("ref"in y){var L={};for(var B in y)B!=="ref"&&(L[B]=y[B])}else L=y;return Cu(c),y=ew(a,c,h,L,E,w),B=tw(),a!==null&&!ir?(nw(a,c,w),Fo(a,c,w)):(At&&B&&L_(c),c.flags|=1,pr(a,c,y,w),c.child)}function i2(a,c,h,y,w){if(a===null){var E=h.type;return typeof E=="function"&&!k_(E)&&E.defaultProps===void 0&&h.compare===null?(c.tag=15,c.type=E,s2(a,c,E,y,w)):(a=jy(h.type,null,y,c,c.mode,w),a.ref=c.ref,a.return=c,c.child=a)}if(E=a.child,!Sw(a,w)){var L=E.memoizedProps;if(h=h.compare,h=h!==null?h:tm,h(L,y)&&a.ref===c.ref)return Fo(a,c,w)}return c.flags|=1,a=Mo(E,y),a.ref=c.ref,a.return=c,c.child=a}function s2(a,c,h,y,w){if(a!==null){var E=a.memoizedProps;if(tm(E,y)&&a.ref===c.ref)if(ir=!1,c.pendingProps=y=E,Sw(a,w))(a.flags&131072)!==0&&(ir=!0);else return c.lanes=a.lanes,Fo(a,c,w)}return vw(a,c,h,y,w)}function o2(a,c,h){var y=c.pendingProps,w=y.children,E=a!==null?a.memoizedState:null;if(y.mode==="hidden"){if((c.flags&128)!==0){if(y=E!==null?E.baseLanes|h:h,a!==null){for(w=c.child=a.child,E=0;w!==null;)E=E|w.lanes|w.childLanes,w=w.sibling;c.childLanes=E&~y}else c.childLanes=0,c.child=null;return a2(a,c,y,h)}if((h&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},a!==null&&Gy(c,E!==null?E.cachePool:null),E!==null?sM(c,E):Q_(),KM(c);else return c.lanes=c.childLanes=536870912,a2(a,c,E!==null?E.baseLanes|h:h,h)}else E!==null?(Gy(c,E.cachePool),sM(c,E),Ba(),c.memoizedState=null):(a!==null&&Gy(c,null),Q_(),Ba());return pr(a,c,w,h),c.child}function a2(a,c,h,y){var w=G_();return w=w===null?null:{parent:$n._currentValue,pool:w},c.memoizedState={baseLanes:h,cachePool:w},a!==null&&Gy(c,null),Q_(),KM(c),a!==null&&om(a,c,y,!0),null}function lv(a,c){var h=c.ref;if(h===null)a!==null&&a.ref!==null&&(c.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(r(284));(a===null||a.ref!==h)&&(c.flags|=4194816)}}function vw(a,c,h,y,w){return Cu(c),h=ew(a,c,h,y,void 0,w),y=tw(),a!==null&&!ir?(nw(a,c,w),Fo(a,c,w)):(At&&y&&L_(c),c.flags|=1,pr(a,c,h,w),c.child)}function l2(a,c,h,y,w,E){return Cu(c),c.updateQueue=null,h=aM(c,y,h,w),oM(a),y=tw(),a!==null&&!ir?(nw(a,c,E),Fo(a,c,E)):(At&&y&&L_(c),c.flags|=1,pr(a,c,h,E),c.child)}function u2(a,c,h,y,w){if(Cu(c),c.stateNode===null){var E=md,L=h.contextType;typeof L=="object"&&L!==null&&(E=Rr(L)),E=new h(y,E),c.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=gw,c.stateNode=E,E._reactInternals=c,E=c.stateNode,E.props=y,E.state=c.memoizedState,E.refs={},K_(c),L=h.contextType,E.context=typeof L=="object"&&L!==null?Rr(L):md,E.state=c.memoizedState,L=h.getDerivedStateFromProps,typeof L=="function"&&(pw(c,h,L,y),E.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(L=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),L!==E.state&&gw.enqueueReplaceState(E,E.state,null),hm(c,y,E,w),fm(),E.state=c.memoizedState),typeof E.componentDidMount=="function"&&(c.flags|=4194308),y=!0}else if(a===null){E=c.stateNode;var B=c.memoizedProps,K=Pu(h,B);E.props=K;var te=E.context,he=h.contextType;L=md,typeof he=="object"&&he!==null&&(L=Rr(he));var pe=h.getDerivedStateFromProps;he=typeof pe=="function"||typeof E.getSnapshotBeforeUpdate=="function",B=c.pendingProps!==B,he||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(B||te!==L)&&YM(c,E,y,L),Va=!1;var ne=c.memoizedState;E.state=ne,hm(c,y,E,w),fm(),te=c.memoizedState,B||ne!==te||Va?(typeof pe=="function"&&(pw(c,h,pe,y),te=c.memoizedState),(K=Va||WM(c,h,K,y,ne,te,L))?(he||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(c.flags|=4194308)):(typeof E.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=y,c.memoizedState=te),E.props=y,E.state=te,E.context=L,y=K):(typeof E.componentDidMount=="function"&&(c.flags|=4194308),y=!1)}else{E=c.stateNode,W_(a,c),L=c.memoizedProps,he=Pu(h,L),E.props=he,pe=c.pendingProps,ne=E.context,te=h.contextType,K=md,typeof te=="object"&&te!==null&&(K=Rr(te)),B=h.getDerivedStateFromProps,(te=typeof B=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(L!==pe||ne!==K)&&YM(c,E,y,K),Va=!1,ne=c.memoizedState,E.state=ne,hm(c,y,E,w),fm();var re=c.memoizedState;L!==pe||ne!==re||Va||a!==null&&a.dependencies!==null&&zy(a.dependencies)?(typeof B=="function"&&(pw(c,h,B,y),re=c.memoizedState),(he=Va||WM(c,h,he,y,ne,re,K)||a!==null&&a.dependencies!==null&&zy(a.dependencies))?(te||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(y,re,K),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(y,re,K)),typeof E.componentDidUpdate=="function"&&(c.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof E.componentDidUpdate!="function"||L===a.memoizedProps&&ne===a.memoizedState||(c.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||L===a.memoizedProps&&ne===a.memoizedState||(c.flags|=1024),c.memoizedProps=y,c.memoizedState=re),E.props=y,E.state=re,E.context=K,y=he):(typeof E.componentDidUpdate!="function"||L===a.memoizedProps&&ne===a.memoizedState||(c.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||L===a.memoizedProps&&ne===a.memoizedState||(c.flags|=1024),y=!1)}return E=y,lv(a,c),y=(c.flags&128)!==0,E||y?(E=c.stateNode,h=y&&typeof h.getDerivedStateFromError!="function"?null:E.render(),c.flags|=1,a!==null&&y?(c.child=Ed(c,a.child,null,w),c.child=Ed(c,null,h,w)):pr(a,c,h,w),c.memoizedState=E.state,a=c.child):a=Fo(a,c,w),a}function c2(a,c,h,y){return im(),c.flags|=256,pr(a,c,h,y),c.child}var xw={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bw(a){return{baseLanes:a,cachePool:QN()}}function _w(a,c,h){return a=a!==null?a.childLanes&~h:0,c&&(a|=Hi),a}function d2(a,c,h){var y=c.pendingProps,w=!1,E=(c.flags&128)!==0,L;if((L=E)||(L=a!==null&&a.memoizedState===null?!1:(Gn.current&2)!==0),L&&(w=!0,c.flags&=-129),L=(c.flags&32)!==0,c.flags&=-33,a===null){if(At){if(w?ja(c):Ba(),At){var B=gn,K;if(K=B){e:{for(K=B,B=zs;K.nodeType!==8;){if(!B){B=null;break e}if(K=ys(K.nextSibling),K===null){B=null;break e}}B=K}B!==null?(c.memoizedState={dehydrated:B,treeContext:wu!==null?{id:Do,overflow:ko}:null,retryLane:536870912,hydrationErrors:null},K=mi(18,null,null,0),K.stateNode=B,K.return=c,c.child=K,zr=c,gn=null,K=!0):K=!1}K||Su(c)}if(B=c.memoizedState,B!==null&&(B=B.dehydrated,B!==null))return iT(B)?c.lanes=32:c.lanes=536870912,null;Uo(c)}return B=y.children,y=y.fallback,w?(Ba(),w=c.mode,B=uv({mode:"hidden",children:B},w),y=_u(y,w,h,null),B.return=c,y.return=c,B.sibling=y,c.child=B,w=c.child,w.memoizedState=bw(h),w.childLanes=_w(a,L,h),c.memoizedState=xw,y):(ja(c),ww(c,B))}if(K=a.memoizedState,K!==null&&(B=K.dehydrated,B!==null)){if(E)c.flags&256?(ja(c),c.flags&=-257,c=Tw(a,c,h)):c.memoizedState!==null?(Ba(),c.child=a.child,c.flags|=128,c=null):(Ba(),w=y.fallback,B=c.mode,y=uv({mode:"visible",children:y.children},B),w=_u(w,B,h,null),w.flags|=2,y.return=c,w.return=c,y.sibling=w,c.child=y,Ed(c,a.child,null,h),y=c.child,y.memoizedState=bw(h),y.childLanes=_w(a,L,h),c.memoizedState=xw,c=w);else if(ja(c),iT(B)){if(L=B.nextSibling&&B.nextSibling.dataset,L)var te=L.dgst;L=te,y=Error(r(419)),y.stack="",y.digest=L,sm({value:y,source:null,stack:null}),c=Tw(a,c,h)}else if(ir||om(a,c,h,!1),L=(h&a.childLanes)!==0,ir||L){if(L=$t,L!==null&&(y=h&-h,y=(y&42)!==0?1:Ia(y),y=(y&(L.suspendedLanes|h))!==0?0:y,y!==0&&y!==K.retryLane))throw K.retryLane=y,hd(a,y),xi(L,a,y),n2;B.data==="$?"||Bw(),c=Tw(a,c,h)}else B.data==="$?"?(c.flags|=192,c.child=a.child,c=null):(a=K.treeContext,gn=ys(B.nextSibling),zr=c,At=!0,Eu=null,zs=!1,a!==null&&(zi[$i++]=Do,zi[$i++]=ko,zi[$i++]=wu,Do=a.id,ko=a.overflow,wu=c),c=ww(c,y.children),c.flags|=4096);return c}return w?(Ba(),w=y.fallback,B=c.mode,K=a.child,te=K.sibling,y=Mo(K,{mode:"hidden",children:y.children}),y.subtreeFlags=K.subtreeFlags&65011712,te!==null?w=Mo(te,w):(w=_u(w,B,h,null),w.flags|=2),w.return=c,y.return=c,y.sibling=w,c.child=y,y=w,w=c.child,B=a.child.memoizedState,B===null?B=bw(h):(K=B.cachePool,K!==null?(te=$n._currentValue,K=K.parent!==te?{parent:te,pool:te}:K):K=QN(),B={baseLanes:B.baseLanes|h,cachePool:K}),w.memoizedState=B,w.childLanes=_w(a,L,h),c.memoizedState=xw,y):(ja(c),h=a.child,a=h.sibling,h=Mo(h,{mode:"visible",children:y.children}),h.return=c,h.sibling=null,a!==null&&(L=c.deletions,L===null?(c.deletions=[a],c.flags|=16):L.push(a)),c.child=h,c.memoizedState=null,h)}function ww(a,c){return c=uv({mode:"visible",children:c},a.mode),c.return=a,a.child=c}function uv(a,c){return a=mi(22,a,null,c),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function Tw(a,c,h){return Ed(c,a.child,null,h),a=ww(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function f2(a,c,h){a.lanes|=c;var y=a.alternate;y!==null&&(y.lanes|=c),B_(a.return,c,h)}function Ew(a,c,h,y,w){var E=a.memoizedState;E===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:y,tail:h,tailMode:w}:(E.isBackwards=c,E.rendering=null,E.renderingStartTime=0,E.last=y,E.tail=h,E.tailMode=w)}function h2(a,c,h){var y=c.pendingProps,w=y.revealOrder,E=y.tail;if(pr(a,c,y.children,h),y=Gn.current,(y&2)!==0)y=y&1|2,c.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&f2(a,h,c);else if(a.tag===19)f2(a,h,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}y&=1}switch(ce(Gn,y),w){case"forwards":for(h=c.child,w=null;h!==null;)a=h.alternate,a!==null&&sv(a)===null&&(w=h),h=h.sibling;h=w,h===null?(w=c.child,c.child=null):(w=h.sibling,h.sibling=null),Ew(c,!1,w,h,E);break;case"backwards":for(h=null,w=c.child,c.child=null;w!==null;){if(a=w.alternate,a!==null&&sv(a)===null){c.child=w;break}a=w.sibling,w.sibling=h,h=w,w=a}Ew(c,!0,h,null,E);break;case"together":Ew(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Fo(a,c,h){if(a!==null&&(c.dependencies=a.dependencies),Ha|=c.lanes,(h&c.childLanes)===0)if(a!==null){if(om(a,c,h,!1),(h&c.childLanes)===0)return null}else return null;if(a!==null&&c.child!==a.child)throw Error(r(153));if(c.child!==null){for(a=c.child,h=Mo(a,a.pendingProps),c.child=h,h.return=c;a.sibling!==null;)a=a.sibling,h=h.sibling=Mo(a,a.pendingProps),h.return=c;h.sibling=null}return c.child}function Sw(a,c){return(a.lanes&c)!==0?!0:(a=a.dependencies,!!(a!==null&&zy(a)))}function RK(a,c,h){switch(c.tag){case 3:ot(c,c.stateNode.containerInfo),Oa(c,$n,a.memoizedState.cache),im();break;case 27:case 5:we(c);break;case 4:ot(c,c.stateNode.containerInfo);break;case 10:Oa(c,c.type,c.memoizedProps.value);break;case 13:var y=c.memoizedState;if(y!==null)return y.dehydrated!==null?(ja(c),c.flags|=128,null):(h&c.child.childLanes)!==0?d2(a,c,h):(ja(c),a=Fo(a,c,h),a!==null?a.sibling:null);ja(c);break;case 19:var w=(a.flags&128)!==0;if(y=(h&c.childLanes)!==0,y||(om(a,c,h,!1),y=(h&c.childLanes)!==0),w){if(y)return h2(a,c,h);c.flags|=128}if(w=c.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),ce(Gn,Gn.current),y)break;return null;case 22:case 23:return c.lanes=0,o2(a,c,h);case 24:Oa(c,$n,a.memoizedState.cache)}return Fo(a,c,h)}function m2(a,c,h){if(a!==null)if(a.memoizedProps!==c.pendingProps)ir=!0;else{if(!Sw(a,h)&&(c.flags&128)===0)return ir=!1,RK(a,c,h);ir=(a.flags&131072)!==0}else ir=!1,At&&(c.flags&1048576)!==0&&$N(c,qy,c.index);switch(c.lanes=0,c.tag){case 16:e:{a=c.pendingProps;var y=c.elementType,w=y._init;if(y=w(y._payload),c.type=y,typeof y=="function")k_(y)?(a=Pu(y,a),c.tag=1,c=u2(null,c,y,a,h)):(c.tag=0,c=vw(null,c,y,a,h));else{if(y!=null){if(w=y.$$typeof,w===U){c.tag=11,c=r2(null,c,y,a,h);break e}else if(w===M){c.tag=14,c=i2(null,c,y,a,h);break e}}throw c=de(y)||y,Error(r(306,c,""))}}return c;case 0:return vw(a,c,c.type,c.pendingProps,h);case 1:return y=c.type,w=Pu(y,c.pendingProps),u2(a,c,y,w,h);case 3:e:{if(ot(c,c.stateNode.containerInfo),a===null)throw Error(r(387));y=c.pendingProps;var E=c.memoizedState;w=E.element,W_(a,c),hm(c,y,null,h);var L=c.memoizedState;if(y=L.cache,Oa(c,$n,y),y!==E.cache&&q_(c,[$n],h,!0),fm(),y=L.element,E.isDehydrated)if(E={element:y,isDehydrated:!1,cache:L.cache},c.updateQueue.baseState=E,c.memoizedState=E,c.flags&256){c=c2(a,c,y,h);break e}else if(y!==w){w=Bi(Error(r(424)),c),sm(w),c=c2(a,c,y,h);break e}else{switch(a=c.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(gn=ys(a.firstChild),zr=c,At=!0,Eu=null,zs=!0,h=HM(c,null,y,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(im(),y===w){c=Fo(a,c,h);break e}pr(a,c,y,h)}c=c.child}return c;case 26:return lv(a,c),a===null?(h=vD(c.type,null,c.pendingProps,null))?c.memoizedState=h:At||(h=c.type,a=c.pendingProps,y=Tv(je.current).createElement(h),y[Bn]=c,y[Pn]=a,yr(y,h,a),Tn(y),c.stateNode=y):c.memoizedState=vD(c.type,a.memoizedProps,c.pendingProps,a.memoizedState),null;case 27:return we(c),a===null&&At&&(y=c.stateNode=pD(c.type,c.pendingProps,je.current),zr=c,zs=!0,w=gn,Ja(c.type)?(sT=w,gn=ys(y.firstChild)):gn=w),pr(a,c,c.pendingProps.children,h),lv(a,c),a===null&&(c.flags|=4194304),c.child;case 5:return a===null&&At&&((w=y=gn)&&(y=rW(y,c.type,c.pendingProps,zs),y!==null?(c.stateNode=y,zr=c,gn=ys(y.firstChild),zs=!1,w=!0):w=!1),w||Su(c)),we(c),w=c.type,E=c.pendingProps,L=a!==null?a.memoizedProps:null,y=E.children,tT(w,E)?y=null:L!==null&&tT(w,L)&&(c.flags|=32),c.memoizedState!==null&&(w=ew(a,c,_K,null,null,h),Om._currentValue=w),lv(a,c),pr(a,c,y,h),c.child;case 6:return a===null&&At&&((a=h=gn)&&(h=iW(h,c.pendingProps,zs),h!==null?(c.stateNode=h,zr=c,gn=null,a=!0):a=!1),a||Su(c)),null;case 13:return d2(a,c,h);case 4:return ot(c,c.stateNode.containerInfo),y=c.pendingProps,a===null?c.child=Ed(c,null,y,h):pr(a,c,y,h),c.child;case 11:return r2(a,c,c.type,c.pendingProps,h);case 7:return pr(a,c,c.pendingProps,h),c.child;case 8:return pr(a,c,c.pendingProps.children,h),c.child;case 12:return pr(a,c,c.pendingProps.children,h),c.child;case 10:return y=c.pendingProps,Oa(c,c.type,y.value),pr(a,c,y.children,h),c.child;case 9:return w=c.type._context,y=c.pendingProps.children,Cu(c),w=Rr(w),y=y(w),c.flags|=1,pr(a,c,y,h),c.child;case 14:return i2(a,c,c.type,c.pendingProps,h);case 15:return s2(a,c,c.type,c.pendingProps,h);case 19:return h2(a,c,h);case 31:return y=c.pendingProps,h=c.mode,y={mode:y.mode,children:y.children},a===null?(h=uv(y,h),h.ref=c.ref,c.child=h,h.return=c,c=h):(h=Mo(a.child,y),h.ref=c.ref,c.child=h,h.return=c,c=h),c;case 22:return o2(a,c,h);case 24:return Cu(c),y=Rr($n),a===null?(w=G_(),w===null&&(w=$t,E=z_(),w.pooledCache=E,E.refCount++,E!==null&&(w.pooledCacheLanes|=h),w=E),c.memoizedState={parent:y,cache:w},K_(c),Oa(c,$n,w)):((a.lanes&h)!==0&&(W_(a,c),hm(c,null,null,h),fm()),w=a.memoizedState,E=c.memoizedState,w.parent!==y?(w={parent:y,cache:y},c.memoizedState=w,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=w),Oa(c,$n,y)):(y=E.cache,Oa(c,$n,y),y!==w.cache&&q_(c,[$n],h,!0))),pr(a,c,c.pendingProps.children,h),c.child;case 29:throw c.pendingProps}throw Error(r(156,c.tag))}function jo(a){a.flags|=4}function p2(a,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!TD(c)){if(c=Gi.current,c!==null&&((vt&4194048)===vt?$s!==null:(vt&62914560)!==vt&&(vt&536870912)===0||c!==$s))throw cm=H_,XN;a.flags|=8192}}function cv(a,c){c!==null&&(a.flags|=4),a.flags&16384&&(c=a.tag!==22?ci():536870912,a.lanes|=c,Id|=c)}function bm(a,c){if(!At)switch(a.tailMode){case"hidden":c=a.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?a.tail=null:h.sibling=null;break;case"collapsed":h=a.tail;for(var y=null;h!==null;)h.alternate!==null&&(y=h),h=h.sibling;y===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:y.sibling=null}}function fn(a){var c=a.alternate!==null&&a.alternate.child===a.child,h=0,y=0;if(c)for(var w=a.child;w!==null;)h|=w.lanes|w.childLanes,y|=w.subtreeFlags&65011712,y|=w.flags&65011712,w.return=a,w=w.sibling;else for(w=a.child;w!==null;)h|=w.lanes|w.childLanes,y|=w.subtreeFlags,y|=w.flags,w.return=a,w=w.sibling;return a.subtreeFlags|=y,a.childLanes=h,c}function PK(a,c,h){var y=c.pendingProps;switch(U_(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(c),null;case 1:return fn(c),null;case 3:return h=c.stateNode,y=null,a!==null&&(y=a.memoizedState.cache),c.memoizedState.cache!==y&&(c.flags|=2048),Vo($n),Te(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(a===null||a.child===null)&&(rm(c)?jo(c):a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,KN())),fn(c),null;case 26:return h=c.memoizedState,a===null?(jo(c),h!==null?(fn(c),p2(c,h)):(fn(c),c.flags&=-16777217)):h?h!==a.memoizedState?(jo(c),fn(c),p2(c,h)):(fn(c),c.flags&=-16777217):(a.memoizedProps!==y&&jo(c),fn(c),c.flags&=-16777217),null;case 27:Pe(c),h=je.current;var w=c.type;if(a!==null&&c.stateNode!=null)a.memoizedProps!==y&&jo(c);else{if(!y){if(c.stateNode===null)throw Error(r(166));return fn(c),null}a=Ee.current,rm(c)?GN(c):(a=pD(w,y,h),c.stateNode=a,jo(c))}return fn(c),null;case 5:if(Pe(c),h=c.type,a!==null&&c.stateNode!=null)a.memoizedProps!==y&&jo(c);else{if(!y){if(c.stateNode===null)throw Error(r(166));return fn(c),null}if(a=Ee.current,rm(c))GN(c);else{switch(w=Tv(je.current),a){case 1:a=w.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:a=w.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":a=w.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":a=w.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":a=w.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof y.is=="string"?w.createElement("select",{is:y.is}):w.createElement("select"),y.multiple?a.multiple=!0:y.size&&(a.size=y.size);break;default:a=typeof y.is=="string"?w.createElement(h,{is:y.is}):w.createElement(h)}}a[Bn]=c,a[Pn]=y;e:for(w=c.child;w!==null;){if(w.tag===5||w.tag===6)a.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===c)break e;for(;w.sibling===null;){if(w.return===null||w.return===c)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}c.stateNode=a;e:switch(yr(a,h,y),h){case"button":case"input":case"select":case"textarea":a=!!y.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&jo(c)}}return fn(c),c.flags&=-16777217,null;case 6:if(a&&c.stateNode!=null)a.memoizedProps!==y&&jo(c);else{if(typeof y!="string"&&c.stateNode===null)throw Error(r(166));if(a=je.current,rm(c)){if(a=c.stateNode,h=c.memoizedProps,y=null,w=zr,w!==null)switch(w.tag){case 27:case 5:y=w.memoizedProps}a[Bn]=c,a=!!(a.nodeValue===h||y!==null&&y.suppressHydrationWarning===!0||lD(a.nodeValue,h)),a||Su(c)}else a=Tv(a).createTextNode(y),a[Bn]=c,c.stateNode=a}return fn(c),null;case 13:if(y=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(w=rm(c),y!==null&&y.dehydrated!==null){if(a===null){if(!w)throw Error(r(318));if(w=c.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(r(317));w[Bn]=c}else im(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;fn(c),w=!1}else w=KN(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=w),w=!0;if(!w)return c.flags&256?(Uo(c),c):(Uo(c),null)}if(Uo(c),(c.flags&128)!==0)return c.lanes=h,c;if(h=y!==null,a=a!==null&&a.memoizedState!==null,h){y=c.child,w=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(w=y.alternate.memoizedState.cachePool.pool);var E=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(E=y.memoizedState.cachePool.pool),E!==w&&(y.flags|=2048)}return h!==a&&h&&(c.child.flags|=8192),cv(c,c.updateQueue),fn(c),null;case 4:return Te(),a===null&&Jw(c.stateNode.containerInfo),fn(c),null;case 10:return Vo(c.type),fn(c),null;case 19:if(le(Gn),w=c.memoizedState,w===null)return fn(c),null;if(y=(c.flags&128)!==0,E=w.rendering,E===null)if(y)bm(w,!1);else{if(yn!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(E=sv(a),E!==null){for(c.flags|=128,bm(w,!1),a=E.updateQueue,c.updateQueue=a,cv(c,a),c.subtreeFlags=0,a=h,h=c.child;h!==null;)zN(h,a),h=h.sibling;return ce(Gn,Gn.current&1|2),c.child}a=a.sibling}w.tail!==null&&cn()>hv&&(c.flags|=128,y=!0,bm(w,!1),c.lanes=4194304)}else{if(!y)if(a=sv(E),a!==null){if(c.flags|=128,y=!0,a=a.updateQueue,c.updateQueue=a,cv(c,a),bm(w,!0),w.tail===null&&w.tailMode==="hidden"&&!E.alternate&&!At)return fn(c),null}else 2*cn()-w.renderingStartTime>hv&&h!==536870912&&(c.flags|=128,y=!0,bm(w,!1),c.lanes=4194304);w.isBackwards?(E.sibling=c.child,c.child=E):(a=w.last,a!==null?a.sibling=E:c.child=E,w.last=E)}return w.tail!==null?(c=w.tail,w.rendering=c,w.tail=c.sibling,w.renderingStartTime=cn(),c.sibling=null,a=Gn.current,ce(Gn,y?a&1|2:a&1),c):(fn(c),null);case 22:case 23:return Uo(c),X_(),y=c.memoizedState!==null,a!==null?a.memoizedState!==null!==y&&(c.flags|=8192):y&&(c.flags|=8192),y?(h&536870912)!==0&&(c.flags&128)===0&&(fn(c),c.subtreeFlags&6&&(c.flags|=8192)):fn(c),h=c.updateQueue,h!==null&&cv(c,h.retryQueue),h=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),y=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==h&&(c.flags|=2048),a!==null&&le(Iu),null;case 24:return h=null,a!==null&&(h=a.memoizedState.cache),c.memoizedState.cache!==h&&(c.flags|=2048),Vo($n),fn(c),null;case 25:return null;case 30:return null}throw Error(r(156,c.tag))}function NK(a,c){switch(U_(c),c.tag){case 1:return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return Vo($n),Te(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 26:case 27:case 5:return Pe(c),null;case 13:if(Uo(c),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(r(340));im()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return le(Gn),null;case 4:return Te(),null;case 10:return Vo(c.type),null;case 22:case 23:return Uo(c),X_(),a!==null&&le(Iu),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 24:return Vo($n),null;case 25:return null;default:return null}}function g2(a,c){switch(U_(c),c.tag){case 3:Vo($n),Te();break;case 26:case 27:case 5:Pe(c);break;case 4:Te();break;case 13:Uo(c);break;case 19:le(Gn);break;case 10:Vo(c.type);break;case 22:case 23:Uo(c),X_(),a!==null&&le(Iu);break;case 24:Vo($n)}}function _m(a,c){try{var h=c.updateQueue,y=h!==null?h.lastEffect:null;if(y!==null){var w=y.next;h=w;do{if((h.tag&a)===a){y=void 0;var E=h.create,L=h.inst;y=E(),L.destroy=y}h=h.next}while(h!==w)}}catch(B){qt(c,c.return,B)}}function qa(a,c,h){try{var y=c.updateQueue,w=y!==null?y.lastEffect:null;if(w!==null){var E=w.next;y=E;do{if((y.tag&a)===a){var L=y.inst,B=L.destroy;if(B!==void 0){L.destroy=void 0,w=c;var K=h,te=B;try{te()}catch(he){qt(w,K,he)}}}y=y.next}while(y!==E)}}catch(he){qt(c,c.return,he)}}function y2(a){var c=a.updateQueue;if(c!==null){var h=a.stateNode;try{iM(c,h)}catch(y){qt(a,a.return,y)}}}function v2(a,c,h){h.props=Pu(a.type,a.memoizedProps),h.state=a.memoizedState;try{h.componentWillUnmount()}catch(y){qt(a,c,y)}}function wm(a,c){try{var h=a.ref;if(h!==null){switch(a.tag){case 26:case 27:case 5:var y=a.stateNode;break;case 30:y=a.stateNode;break;default:y=a.stateNode}typeof h=="function"?a.refCleanup=h(y):h.current=y}}catch(w){qt(a,c,w)}}function Gs(a,c){var h=a.ref,y=a.refCleanup;if(h!==null)if(typeof y=="function")try{y()}catch(w){qt(a,c,w)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(w){qt(a,c,w)}else h.current=null}function x2(a){var c=a.type,h=a.memoizedProps,y=a.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":h.autoFocus&&y.focus();break e;case"img":h.src?y.src=h.src:h.srcSet&&(y.srcset=h.srcSet)}}catch(w){qt(a,a.return,w)}}function Aw(a,c,h){try{var y=a.stateNode;XK(y,a.type,h,c),y[Pn]=c}catch(w){qt(a,a.return,w)}}function b2(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Ja(a.type)||a.tag===4}function Cw(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||b2(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Ja(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Iw(a,c,h){var y=a.tag;if(y===5||y===6)a=a.stateNode,c?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(a,c):(c=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,c.appendChild(a),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=wv));else if(y!==4&&(y===27&&Ja(a.type)&&(h=a.stateNode,c=null),a=a.child,a!==null))for(Iw(a,c,h),a=a.sibling;a!==null;)Iw(a,c,h),a=a.sibling}function dv(a,c,h){var y=a.tag;if(y===5||y===6)a=a.stateNode,c?h.insertBefore(a,c):h.appendChild(a);else if(y!==4&&(y===27&&Ja(a.type)&&(h=a.stateNode),a=a.child,a!==null))for(dv(a,c,h),a=a.sibling;a!==null;)dv(a,c,h),a=a.sibling}function _2(a){var c=a.stateNode,h=a.memoizedProps;try{for(var y=a.type,w=c.attributes;w.length;)c.removeAttributeNode(w[0]);yr(c,y,h),c[Bn]=a,c[Pn]=h}catch(E){qt(a,a.return,E)}}var Bo=!1,Sn=!1,Rw=!1,w2=typeof WeakSet=="function"?WeakSet:Set,sr=null;function MK(a,c){if(a=a.containerInfo,Zw=Rv,a=DN(a),C_(a)){if("selectionStart"in a)var h={start:a.selectionStart,end:a.selectionEnd};else e:{h=(h=a.ownerDocument)&&h.defaultView||window;var y=h.getSelection&&h.getSelection();if(y&&y.rangeCount!==0){h=y.anchorNode;var w=y.anchorOffset,E=y.focusNode;y=y.focusOffset;try{h.nodeType,E.nodeType}catch{h=null;break e}var L=0,B=-1,K=-1,te=0,he=0,pe=a,ne=null;t:for(;;){for(var re;pe!==h||w!==0&&pe.nodeType!==3||(B=L+w),pe!==E||y!==0&&pe.nodeType!==3||(K=L+y),pe.nodeType===3&&(L+=pe.nodeValue.length),(re=pe.firstChild)!==null;)ne=pe,pe=re;for(;;){if(pe===a)break t;if(ne===h&&++te===w&&(B=L),ne===E&&++he===y&&(K=L),(re=pe.nextSibling)!==null)break;pe=ne,ne=pe.parentNode}pe=re}h=B===-1||K===-1?null:{start:B,end:K}}else h=null}h=h||{start:0,end:0}}else h=null;for(eT={focusedElem:a,selectionRange:h},Rv=!1,sr=c;sr!==null;)if(c=sr,a=c.child,(c.subtreeFlags&1024)!==0&&a!==null)a.return=c,sr=a;else for(;sr!==null;){switch(c=sr,E=c.alternate,a=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&E!==null){a=void 0,h=c,w=E.memoizedProps,E=E.memoizedState,y=h.stateNode;try{var Xe=Pu(h.type,w,h.elementType===h.type);a=y.getSnapshotBeforeUpdate(Xe,E),y.__reactInternalSnapshotBeforeUpdate=a}catch(We){qt(h,h.return,We)}}break;case 3:if((a&1024)!==0){if(a=c.stateNode.containerInfo,h=a.nodeType,h===9)rT(a);else if(h===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":rT(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=c.sibling,a!==null){a.return=c.return,sr=a;break}sr=c.return}}function T2(a,c,h){var y=h.flags;switch(h.tag){case 0:case 11:case 15:za(a,h),y&4&&_m(5,h);break;case 1:if(za(a,h),y&4)if(a=h.stateNode,c===null)try{a.componentDidMount()}catch(L){qt(h,h.return,L)}else{var w=Pu(h.type,c.memoizedProps);c=c.memoizedState;try{a.componentDidUpdate(w,c,a.__reactInternalSnapshotBeforeUpdate)}catch(L){qt(h,h.return,L)}}y&64&&y2(h),y&512&&wm(h,h.return);break;case 3:if(za(a,h),y&64&&(a=h.updateQueue,a!==null)){if(c=null,h.child!==null)switch(h.child.tag){case 27:case 5:c=h.child.stateNode;break;case 1:c=h.child.stateNode}try{iM(a,c)}catch(L){qt(h,h.return,L)}}break;case 27:c===null&&y&4&&_2(h);case 26:case 5:za(a,h),c===null&&y&4&&x2(h),y&512&&wm(h,h.return);break;case 12:za(a,h);break;case 13:za(a,h),y&4&&A2(a,h),y&64&&(a=h.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(h=BK.bind(null,h),sW(a,h))));break;case 22:if(y=h.memoizedState!==null||Bo,!y){c=c!==null&&c.memoizedState!==null||Sn,w=Bo;var E=Sn;Bo=y,(Sn=c)&&!E?$a(a,h,(h.subtreeFlags&8772)!==0):za(a,h),Bo=w,Sn=E}break;case 30:break;default:za(a,h)}}function E2(a){var c=a.alternate;c!==null&&(a.alternate=null,E2(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&Na(c)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var tn=null,Zr=!1;function qo(a,c,h){for(h=h.child;h!==null;)S2(a,c,h),h=h.sibling}function S2(a,c,h){if(St&&typeof St.onCommitFiberUnmount=="function")try{St.onCommitFiberUnmount(Yt,h)}catch{}switch(h.tag){case 26:Sn||Gs(h,c),qo(a,c,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:Sn||Gs(h,c);var y=tn,w=Zr;Ja(h.type)&&(tn=h.stateNode,Zr=!1),qo(a,c,h),Nm(h.stateNode),tn=y,Zr=w;break;case 5:Sn||Gs(h,c);case 6:if(y=tn,w=Zr,tn=null,qo(a,c,h),tn=y,Zr=w,tn!==null)if(Zr)try{(tn.nodeType===9?tn.body:tn.nodeName==="HTML"?tn.ownerDocument.body:tn).removeChild(h.stateNode)}catch(E){qt(h,c,E)}else try{tn.removeChild(h.stateNode)}catch(E){qt(h,c,E)}break;case 18:tn!==null&&(Zr?(a=tn,hD(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,h.stateNode),Fm(a)):hD(tn,h.stateNode));break;case 4:y=tn,w=Zr,tn=h.stateNode.containerInfo,Zr=!0,qo(a,c,h),tn=y,Zr=w;break;case 0:case 11:case 14:case 15:Sn||qa(2,h,c),Sn||qa(4,h,c),qo(a,c,h);break;case 1:Sn||(Gs(h,c),y=h.stateNode,typeof y.componentWillUnmount=="function"&&v2(h,c,y)),qo(a,c,h);break;case 21:qo(a,c,h);break;case 22:Sn=(y=Sn)||h.memoizedState!==null,qo(a,c,h),Sn=y;break;default:qo(a,c,h)}}function A2(a,c){if(c.memoizedState===null&&(a=c.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Fm(a)}catch(h){qt(c,c.return,h)}}function DK(a){switch(a.tag){case 13:case 19:var c=a.stateNode;return c===null&&(c=a.stateNode=new w2),c;case 22:return a=a.stateNode,c=a._retryCache,c===null&&(c=a._retryCache=new w2),c;default:throw Error(r(435,a.tag))}}function Pw(a,c){var h=DK(a);c.forEach(function(y){var w=qK.bind(null,a,y);h.has(y)||(h.add(y),y.then(w,w))})}function pi(a,c){var h=c.deletions;if(h!==null)for(var y=0;y<h.length;y++){var w=h[y],E=a,L=c,B=L;e:for(;B!==null;){switch(B.tag){case 27:if(Ja(B.type)){tn=B.stateNode,Zr=!1;break e}break;case 5:tn=B.stateNode,Zr=!1;break e;case 3:case 4:tn=B.stateNode.containerInfo,Zr=!0;break e}B=B.return}if(tn===null)throw Error(r(160));S2(E,L,w),tn=null,Zr=!1,E=w.alternate,E!==null&&(E.return=null),w.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)C2(c,a),c=c.sibling}var gs=null;function C2(a,c){var h=a.alternate,y=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:pi(c,a),gi(a),y&4&&(qa(3,a,a.return),_m(3,a),qa(5,a,a.return));break;case 1:pi(c,a),gi(a),y&512&&(Sn||h===null||Gs(h,h.return)),y&64&&Bo&&(a=a.updateQueue,a!==null&&(y=a.callbacks,y!==null&&(h=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=h===null?y:h.concat(y))));break;case 26:var w=gs;if(pi(c,a),gi(a),y&512&&(Sn||h===null||Gs(h,h.return)),y&4){var E=h!==null?h.memoizedState:null;if(y=a.memoizedState,h===null)if(y===null)if(a.stateNode===null){e:{y=a.type,h=a.memoizedProps,w=w.ownerDocument||w;t:switch(y){case"title":E=w.getElementsByTagName("title")[0],(!E||E[su]||E[Bn]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=w.createElement(y),w.head.insertBefore(E,w.querySelector("head > title"))),yr(E,y,h),E[Bn]=a,Tn(E),y=E;break e;case"link":var L=_D("link","href",w).get(y+(h.href||""));if(L){for(var B=0;B<L.length;B++)if(E=L[B],E.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&E.getAttribute("rel")===(h.rel==null?null:h.rel)&&E.getAttribute("title")===(h.title==null?null:h.title)&&E.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){L.splice(B,1);break t}}E=w.createElement(y),yr(E,y,h),w.head.appendChild(E);break;case"meta":if(L=_D("meta","content",w).get(y+(h.content||""))){for(B=0;B<L.length;B++)if(E=L[B],E.getAttribute("content")===(h.content==null?null:""+h.content)&&E.getAttribute("name")===(h.name==null?null:h.name)&&E.getAttribute("property")===(h.property==null?null:h.property)&&E.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&E.getAttribute("charset")===(h.charSet==null?null:h.charSet)){L.splice(B,1);break t}}E=w.createElement(y),yr(E,y,h),w.head.appendChild(E);break;default:throw Error(r(468,y))}E[Bn]=a,Tn(E),y=E}a.stateNode=y}else wD(w,a.type,a.stateNode);else a.stateNode=bD(w,y,a.memoizedProps);else E!==y?(E===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):E.count--,y===null?wD(w,a.type,a.stateNode):bD(w,y,a.memoizedProps)):y===null&&a.stateNode!==null&&Aw(a,a.memoizedProps,h.memoizedProps)}break;case 27:pi(c,a),gi(a),y&512&&(Sn||h===null||Gs(h,h.return)),h!==null&&y&4&&Aw(a,a.memoizedProps,h.memoizedProps);break;case 5:if(pi(c,a),gi(a),y&512&&(Sn||h===null||Gs(h,h.return)),a.flags&32){w=a.stateNode;try{Li(w,"")}catch(re){qt(a,a.return,re)}}y&4&&a.stateNode!=null&&(w=a.memoizedProps,Aw(a,w,h!==null?h.memoizedProps:w)),y&1024&&(Rw=!0);break;case 6:if(pi(c,a),gi(a),y&4){if(a.stateNode===null)throw Error(r(162));y=a.memoizedProps,h=a.stateNode;try{h.nodeValue=y}catch(re){qt(a,a.return,re)}}break;case 3:if(Av=null,w=gs,gs=Ev(c.containerInfo),pi(c,a),gs=w,gi(a),y&4&&h!==null&&h.memoizedState.isDehydrated)try{Fm(c.containerInfo)}catch(re){qt(a,a.return,re)}Rw&&(Rw=!1,I2(a));break;case 4:y=gs,gs=Ev(a.stateNode.containerInfo),pi(c,a),gi(a),gs=y;break;case 12:pi(c,a),gi(a);break;case 13:pi(c,a),gi(a),a.child.flags&8192&&a.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(Vw=cn()),y&4&&(y=a.updateQueue,y!==null&&(a.updateQueue=null,Pw(a,y)));break;case 22:w=a.memoizedState!==null;var K=h!==null&&h.memoizedState!==null,te=Bo,he=Sn;if(Bo=te||w,Sn=he||K,pi(c,a),Sn=he,Bo=te,gi(a),y&8192)e:for(c=a.stateNode,c._visibility=w?c._visibility&-2:c._visibility|1,w&&(h===null||K||Bo||Sn||Nu(a)),h=null,c=a;;){if(c.tag===5||c.tag===26){if(h===null){K=h=c;try{if(E=K.stateNode,w)L=E.style,typeof L.setProperty=="function"?L.setProperty("display","none","important"):L.display="none";else{B=K.stateNode;var pe=K.memoizedProps.style,ne=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;B.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(re){qt(K,K.return,re)}}}else if(c.tag===6){if(h===null){K=c;try{K.stateNode.nodeValue=w?"":K.memoizedProps}catch(re){qt(K,K.return,re)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===a)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break e;for(;c.sibling===null;){if(c.return===null||c.return===a)break e;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}y&4&&(y=a.updateQueue,y!==null&&(h=y.retryQueue,h!==null&&(y.retryQueue=null,Pw(a,h))));break;case 19:pi(c,a),gi(a),y&4&&(y=a.updateQueue,y!==null&&(a.updateQueue=null,Pw(a,y)));break;case 30:break;case 21:break;default:pi(c,a),gi(a)}}function gi(a){var c=a.flags;if(c&2){try{for(var h,y=a.return;y!==null;){if(b2(y)){h=y;break}y=y.return}if(h==null)throw Error(r(160));switch(h.tag){case 27:var w=h.stateNode,E=Cw(a);dv(a,E,w);break;case 5:var L=h.stateNode;h.flags&32&&(Li(L,""),h.flags&=-33);var B=Cw(a);dv(a,B,L);break;case 3:case 4:var K=h.stateNode.containerInfo,te=Cw(a);Iw(a,te,K);break;default:throw Error(r(161))}}catch(he){qt(a,a.return,he)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function I2(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var c=a;I2(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),a=a.sibling}}function za(a,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)T2(a,c.alternate,c),c=c.sibling}function Nu(a){for(a=a.child;a!==null;){var c=a;switch(c.tag){case 0:case 11:case 14:case 15:qa(4,c,c.return),Nu(c);break;case 1:Gs(c,c.return);var h=c.stateNode;typeof h.componentWillUnmount=="function"&&v2(c,c.return,h),Nu(c);break;case 27:Nm(c.stateNode);case 26:case 5:Gs(c,c.return),Nu(c);break;case 22:c.memoizedState===null&&Nu(c);break;case 30:Nu(c);break;default:Nu(c)}a=a.sibling}}function $a(a,c,h){for(h=h&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var y=c.alternate,w=a,E=c,L=E.flags;switch(E.tag){case 0:case 11:case 15:$a(w,E,h),_m(4,E);break;case 1:if($a(w,E,h),y=E,w=y.stateNode,typeof w.componentDidMount=="function")try{w.componentDidMount()}catch(te){qt(y,y.return,te)}if(y=E,w=y.updateQueue,w!==null){var B=y.stateNode;try{var K=w.shared.hiddenCallbacks;if(K!==null)for(w.shared.hiddenCallbacks=null,w=0;w<K.length;w++)rM(K[w],B)}catch(te){qt(y,y.return,te)}}h&&L&64&&y2(E),wm(E,E.return);break;case 27:_2(E);case 26:case 5:$a(w,E,h),h&&y===null&&L&4&&x2(E),wm(E,E.return);break;case 12:$a(w,E,h);break;case 13:$a(w,E,h),h&&L&4&&A2(w,E);break;case 22:E.memoizedState===null&&$a(w,E,h),wm(E,E.return);break;case 30:break;default:$a(w,E,h)}c=c.sibling}}function Nw(a,c){var h=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),a=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(a=c.memoizedState.cachePool.pool),a!==h&&(a!=null&&a.refCount++,h!=null&&am(h))}function Mw(a,c){a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&am(a))}function Hs(a,c,h,y){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)R2(a,c,h,y),c=c.sibling}function R2(a,c,h,y){var w=c.flags;switch(c.tag){case 0:case 11:case 15:Hs(a,c,h,y),w&2048&&_m(9,c);break;case 1:Hs(a,c,h,y);break;case 3:Hs(a,c,h,y),w&2048&&(a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&am(a)));break;case 12:if(w&2048){Hs(a,c,h,y),a=c.stateNode;try{var E=c.memoizedProps,L=E.id,B=E.onPostCommit;typeof B=="function"&&B(L,c.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(K){qt(c,c.return,K)}}else Hs(a,c,h,y);break;case 13:Hs(a,c,h,y);break;case 23:break;case 22:E=c.stateNode,L=c.alternate,c.memoizedState!==null?E._visibility&2?Hs(a,c,h,y):Tm(a,c):E._visibility&2?Hs(a,c,h,y):(E._visibility|=2,Sd(a,c,h,y,(c.subtreeFlags&10256)!==0)),w&2048&&Nw(L,c);break;case 24:Hs(a,c,h,y),w&2048&&Mw(c.alternate,c);break;default:Hs(a,c,h,y)}}function Sd(a,c,h,y,w){for(w=w&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var E=a,L=c,B=h,K=y,te=L.flags;switch(L.tag){case 0:case 11:case 15:Sd(E,L,B,K,w),_m(8,L);break;case 23:break;case 22:var he=L.stateNode;L.memoizedState!==null?he._visibility&2?Sd(E,L,B,K,w):Tm(E,L):(he._visibility|=2,Sd(E,L,B,K,w)),w&&te&2048&&Nw(L.alternate,L);break;case 24:Sd(E,L,B,K,w),w&&te&2048&&Mw(L.alternate,L);break;default:Sd(E,L,B,K,w)}c=c.sibling}}function Tm(a,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var h=a,y=c,w=y.flags;switch(y.tag){case 22:Tm(h,y),w&2048&&Nw(y.alternate,y);break;case 24:Tm(h,y),w&2048&&Mw(y.alternate,y);break;default:Tm(h,y)}c=c.sibling}}var Em=8192;function Ad(a){if(a.subtreeFlags&Em)for(a=a.child;a!==null;)P2(a),a=a.sibling}function P2(a){switch(a.tag){case 26:Ad(a),a.flags&Em&&a.memoizedState!==null&&vW(gs,a.memoizedState,a.memoizedProps);break;case 5:Ad(a);break;case 3:case 4:var c=gs;gs=Ev(a.stateNode.containerInfo),Ad(a),gs=c;break;case 22:a.memoizedState===null&&(c=a.alternate,c!==null&&c.memoizedState!==null?(c=Em,Em=16777216,Ad(a),Em=c):Ad(a));break;default:Ad(a)}}function N2(a){var c=a.alternate;if(c!==null&&(a=c.child,a!==null)){c.child=null;do c=a.sibling,a.sibling=null,a=c;while(a!==null)}}function Sm(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var y=c[h];sr=y,D2(y,a)}N2(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)M2(a),a=a.sibling}function M2(a){switch(a.tag){case 0:case 11:case 15:Sm(a),a.flags&2048&&qa(9,a,a.return);break;case 3:Sm(a);break;case 12:Sm(a);break;case 22:var c=a.stateNode;a.memoizedState!==null&&c._visibility&2&&(a.return===null||a.return.tag!==13)?(c._visibility&=-3,fv(a)):Sm(a);break;default:Sm(a)}}function fv(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var y=c[h];sr=y,D2(y,a)}N2(a)}for(a=a.child;a!==null;){switch(c=a,c.tag){case 0:case 11:case 15:qa(8,c,c.return),fv(c);break;case 22:h=c.stateNode,h._visibility&2&&(h._visibility&=-3,fv(c));break;default:fv(c)}a=a.sibling}}function D2(a,c){for(;sr!==null;){var h=sr;switch(h.tag){case 0:case 11:case 15:qa(8,h,c);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var y=h.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:am(h.memoizedState.cache)}if(y=h.child,y!==null)y.return=h,sr=y;else e:for(h=a;sr!==null;){y=sr;var w=y.sibling,E=y.return;if(E2(y),y===h){sr=null;break e}if(w!==null){w.return=E,sr=w;break e}sr=E}}}var kK={getCacheForType:function(a){var c=Rr($n),h=c.data.get(a);return h===void 0&&(h=a(),c.data.set(a,h)),h}},OK=typeof WeakMap=="function"?WeakMap:Map,Mt=0,$t=null,ct=null,vt=0,Dt=0,yi=null,Ga=!1,Cd=!1,Dw=!1,zo=0,yn=0,Ha=0,Mu=0,kw=0,Hi=0,Id=0,Am=null,ei=null,Ow=!1,Vw=0,hv=1/0,mv=null,Ka=null,gr=0,Wa=null,Rd=null,Pd=0,Lw=0,Uw=null,k2=null,Cm=0,Fw=null;function vi(){if((Mt&2)!==0&&vt!==0)return vt&-vt;if(Y.T!==null){var a=yd;return a!==0?a:Hw()}return Ra()}function O2(){Hi===0&&(Hi=(vt&536870912)===0||At?fr():536870912);var a=Gi.current;return a!==null&&(a.flags|=32),Hi}function xi(a,c,h){(a===$t&&(Dt===2||Dt===9)||a.cancelPendingCommit!==null)&&(Nd(a,0),Ya(a,vt,Hi,!1)),_o(a,h),((Mt&2)===0||a!==$t)&&(a===$t&&((Mt&2)===0&&(Mu|=h),yn===4&&Ya(a,vt,Hi,!1)),Ks(a))}function V2(a,c,h){if((Mt&6)!==0)throw Error(r(327));var y=!h&&(c&124)===0&&(c&a.expiredLanes)===0||tt(a,c),w=y?UK(a,c):qw(a,c,!0),E=y;do{if(w===0){Cd&&!y&&Ya(a,c,0,!1);break}else{if(h=a.current.alternate,E&&!VK(h)){w=qw(a,c,!1),E=!1;continue}if(w===2){if(E=c,a.errorRecoveryDisabledLanes&E)var L=0;else L=a.pendingLanes&-536870913,L=L!==0?L:L&536870912?536870912:0;if(L!==0){c=L;e:{var B=a;w=Am;var K=B.current.memoizedState.isDehydrated;if(K&&(Nd(B,L).flags|=256),L=qw(B,L,!1),L!==2){if(Dw&&!K){B.errorRecoveryDisabledLanes|=E,Mu|=E,w=4;break e}E=ei,ei=w,E!==null&&(ei===null?ei=E:ei.push.apply(ei,E))}w=L}if(E=!1,w!==2)continue}}if(w===1){Nd(a,0),Ya(a,c,0,!0);break}e:{switch(y=a,E=w,E){case 0:case 1:throw Error(r(345));case 4:if((c&4194048)!==c)break;case 6:Ya(y,c,Hi,!Ga);break e;case 2:ei=null;break;case 3:case 5:break;default:throw Error(r(329))}if((c&62914560)===c&&(w=Vw+300-cn(),10<w)){if(Ya(y,c,Hi,!Ga),Ye(y,0,!0)!==0)break e;y.timeoutHandle=dD(L2.bind(null,y,h,ei,mv,Ow,c,Hi,Mu,Id,Ga,E,2,-0,0),w);break e}L2(y,h,ei,mv,Ow,c,Hi,Mu,Id,Ga,E,0,-0,0)}}break}while(!0);Ks(a)}function L2(a,c,h,y,w,E,L,B,K,te,he,pe,ne,re){if(a.timeoutHandle=-1,pe=c.subtreeFlags,(pe&8192||(pe&16785408)===16785408)&&(km={stylesheets:null,count:0,unsuspend:yW},P2(c),pe=xW(),pe!==null)){a.cancelPendingCommit=pe($2.bind(null,a,c,E,h,y,w,L,B,K,he,1,ne,re)),Ya(a,E,L,!te);return}$2(a,c,E,h,y,w,L,B,K)}function VK(a){for(var c=a;;){var h=c.tag;if((h===0||h===11||h===15)&&c.flags&16384&&(h=c.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var y=0;y<h.length;y++){var w=h[y],E=w.getSnapshot;w=w.value;try{if(!hi(E(),w))return!1}catch{return!1}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Ya(a,c,h,y){c&=~kw,c&=~Mu,a.suspendedLanes|=c,a.pingedLanes&=~c,y&&(a.warmLanes|=c),y=a.expirationTimes;for(var w=c;0<w;){var E=31-tr(w),L=1<<E;y[E]=-1,w&=~L}h!==0&&Ms(a,h,c)}function pv(){return(Mt&6)===0?(Im(0),!1):!0}function jw(){if(ct!==null){if(Dt===0)var a=ct.return;else a=ct,Oo=Au=null,rw(a),Td=null,vm=0,a=ct;for(;a!==null;)g2(a.alternate,a),a=a.return;ct=null}}function Nd(a,c){var h=a.timeoutHandle;h!==-1&&(a.timeoutHandle=-1,eW(h)),h=a.cancelPendingCommit,h!==null&&(a.cancelPendingCommit=null,h()),jw(),$t=a,ct=h=Mo(a.current,null),vt=c,Dt=0,yi=null,Ga=!1,Cd=tt(a,c),Dw=!1,Id=Hi=kw=Mu=Ha=yn=0,ei=Am=null,Ow=!1,(c&8)!==0&&(c|=c&32);var y=a.entangledLanes;if(y!==0)for(a=a.entanglements,y&=c;0<y;){var w=31-tr(y),E=1<<w;c|=a[w],y&=~E}return zo=c,Ly(),h}function U2(a,c){at=null,Y.H=nv,c===um||c===Hy?(c=tM(),Dt=3):c===XN?(c=tM(),Dt=4):Dt=c===n2?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,yi=c,ct===null&&(yn=1,av(a,Bi(c,a.current)))}function F2(){var a=Y.H;return Y.H=nv,a===null?nv:a}function j2(){var a=Y.A;return Y.A=kK,a}function Bw(){yn=4,Ga||(vt&4194048)!==vt&&Gi.current!==null||(Cd=!0),(Ha&134217727)===0&&(Mu&134217727)===0||$t===null||Ya($t,vt,Hi,!1)}function qw(a,c,h){var y=Mt;Mt|=2;var w=F2(),E=j2();($t!==a||vt!==c)&&(mv=null,Nd(a,c)),c=!1;var L=yn;e:do try{if(Dt!==0&&ct!==null){var B=ct,K=yi;switch(Dt){case 8:jw(),L=6;break e;case 3:case 2:case 9:case 6:Gi.current===null&&(c=!0);var te=Dt;if(Dt=0,yi=null,Md(a,B,K,te),h&&Cd){L=0;break e}break;default:te=Dt,Dt=0,yi=null,Md(a,B,K,te)}}LK(),L=yn;break}catch(he){U2(a,he)}while(!0);return c&&a.shellSuspendCounter++,Oo=Au=null,Mt=y,Y.H=w,Y.A=E,ct===null&&($t=null,vt=0,Ly()),L}function LK(){for(;ct!==null;)B2(ct)}function UK(a,c){var h=Mt;Mt|=2;var y=F2(),w=j2();$t!==a||vt!==c?(mv=null,hv=cn()+500,Nd(a,c)):Cd=tt(a,c);e:do try{if(Dt!==0&&ct!==null){c=ct;var E=yi;t:switch(Dt){case 1:Dt=0,yi=null,Md(a,c,E,1);break;case 2:case 9:if(ZN(E)){Dt=0,yi=null,q2(c);break}c=function(){Dt!==2&&Dt!==9||$t!==a||(Dt=7),Ks(a)},E.then(c,c);break e;case 3:Dt=7;break e;case 4:Dt=5;break e;case 7:ZN(E)?(Dt=0,yi=null,q2(c)):(Dt=0,yi=null,Md(a,c,E,7));break;case 5:var L=null;switch(ct.tag){case 26:L=ct.memoizedState;case 5:case 27:var B=ct;if(!L||TD(L)){Dt=0,yi=null;var K=B.sibling;if(K!==null)ct=K;else{var te=B.return;te!==null?(ct=te,gv(te)):ct=null}break t}}Dt=0,yi=null,Md(a,c,E,5);break;case 6:Dt=0,yi=null,Md(a,c,E,6);break;case 8:jw(),yn=6;break e;default:throw Error(r(462))}}FK();break}catch(he){U2(a,he)}while(!0);return Oo=Au=null,Y.H=y,Y.A=w,Mt=h,ct!==null?0:($t=null,vt=0,Ly(),yn)}function FK(){for(;ct!==null&&!Wt();)B2(ct)}function B2(a){var c=m2(a.alternate,a,zo);a.memoizedProps=a.pendingProps,c===null?gv(a):ct=c}function q2(a){var c=a,h=c.alternate;switch(c.tag){case 15:case 0:c=l2(h,c,c.pendingProps,c.type,void 0,vt);break;case 11:c=l2(h,c,c.pendingProps,c.type.render,c.ref,vt);break;case 5:rw(c);default:g2(h,c),c=ct=zN(c,zo),c=m2(h,c,zo)}a.memoizedProps=a.pendingProps,c===null?gv(a):ct=c}function Md(a,c,h,y){Oo=Au=null,rw(c),Td=null,vm=0;var w=c.return;try{if(IK(a,w,c,h,vt)){yn=1,av(a,Bi(h,a.current)),ct=null;return}}catch(E){if(w!==null)throw ct=w,E;yn=1,av(a,Bi(h,a.current)),ct=null;return}c.flags&32768?(At||y===1?a=!0:Cd||(vt&536870912)!==0?a=!1:(Ga=a=!0,(y===2||y===9||y===3||y===6)&&(y=Gi.current,y!==null&&y.tag===13&&(y.flags|=16384))),z2(c,a)):gv(c)}function gv(a){var c=a;do{if((c.flags&32768)!==0){z2(c,Ga);return}a=c.return;var h=PK(c.alternate,c,zo);if(h!==null){ct=h;return}if(c=c.sibling,c!==null){ct=c;return}ct=c=a}while(c!==null);yn===0&&(yn=5)}function z2(a,c){do{var h=NK(a.alternate,a);if(h!==null){h.flags&=32767,ct=h;return}if(h=a.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!c&&(a=a.sibling,a!==null)){ct=a;return}ct=a=h}while(a!==null);yn=6,ct=null}function $2(a,c,h,y,w,E,L,B,K){a.cancelPendingCommit=null;do yv();while(gr!==0);if((Mt&6)!==0)throw Error(r(327));if(c!==null){if(c===a.current)throw Error(r(177));if(E=c.lanes|c.childLanes,E|=M_,Uh(a,h,E,L,B,K),a===$t&&(ct=$t=null,vt=0),Rd=c,Wa=a,Pd=h,Lw=E,Uw=w,k2=y,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,zK(dn,function(){return Y2(),null})):(a.callbackNode=null,a.callbackPriority=0),y=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||y){y=Y.T,Y.T=null,w=se.p,se.p=2,L=Mt,Mt|=4;try{MK(a,c,h)}finally{Mt=L,se.p=w,Y.T=y}}gr=1,G2(),H2(),K2()}}function G2(){if(gr===1){gr=0;var a=Wa,c=Rd,h=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||h){h=Y.T,Y.T=null;var y=se.p;se.p=2;var w=Mt;Mt|=4;try{C2(c,a);var E=eT,L=DN(a.containerInfo),B=E.focusedElem,K=E.selectionRange;if(L!==B&&B&&B.ownerDocument&&MN(B.ownerDocument.documentElement,B)){if(K!==null&&C_(B)){var te=K.start,he=K.end;if(he===void 0&&(he=te),"selectionStart"in B)B.selectionStart=te,B.selectionEnd=Math.min(he,B.value.length);else{var pe=B.ownerDocument||document,ne=pe&&pe.defaultView||window;if(ne.getSelection){var re=ne.getSelection(),Xe=B.textContent.length,We=Math.min(K.start,Xe),jt=K.end===void 0?We:Math.min(K.end,Xe);!re.extend&&We>jt&&(L=jt,jt=We,We=L);var J=NN(B,We),W=NN(B,jt);if(J&&W&&(re.rangeCount!==1||re.anchorNode!==J.node||re.anchorOffset!==J.offset||re.focusNode!==W.node||re.focusOffset!==W.offset)){var ee=pe.createRange();ee.setStart(J.node,J.offset),re.removeAllRanges(),We>jt?(re.addRange(ee),re.extend(W.node,W.offset)):(ee.setEnd(W.node,W.offset),re.addRange(ee))}}}}for(pe=[],re=B;re=re.parentNode;)re.nodeType===1&&pe.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof B.focus=="function"&&B.focus(),B=0;B<pe.length;B++){var me=pe[B];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}Rv=!!Zw,eT=Zw=null}finally{Mt=w,se.p=y,Y.T=h}}a.current=c,gr=2}}function H2(){if(gr===2){gr=0;var a=Wa,c=Rd,h=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||h){h=Y.T,Y.T=null;var y=se.p;se.p=2;var w=Mt;Mt|=4;try{T2(a,c.alternate,c)}finally{Mt=w,se.p=y,Y.T=h}}gr=3}}function K2(){if(gr===4||gr===3){gr=0,un();var a=Wa,c=Rd,h=Pd,y=k2;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?gr=5:(gr=0,Rd=Wa=null,W2(a,a.pendingLanes));var w=a.pendingLanes;if(w===0&&(Ka=null),Yc(h),c=c.stateNode,St&&typeof St.onCommitFiberRoot=="function")try{St.onCommitFiberRoot(Yt,c,void 0,(c.current.flags&128)===128)}catch{}if(y!==null){c=Y.T,w=se.p,se.p=2,Y.T=null;try{for(var E=a.onRecoverableError,L=0;L<y.length;L++){var B=y[L];E(B.value,{componentStack:B.stack})}}finally{Y.T=c,se.p=w}}(Pd&3)!==0&&yv(),Ks(a),w=a.pendingLanes,(h&4194090)!==0&&(w&42)!==0?a===Fw?Cm++:(Cm=0,Fw=a):Cm=0,Im(0)}}function W2(a,c){(a.pooledCacheLanes&=c)===0&&(c=a.pooledCache,c!=null&&(a.pooledCache=null,am(c)))}function yv(a){return G2(),H2(),K2(),Y2()}function Y2(){if(gr!==5)return!1;var a=Wa,c=Lw;Lw=0;var h=Yc(Pd),y=Y.T,w=se.p;try{se.p=32>h?32:h,Y.T=null,h=Uw,Uw=null;var E=Wa,L=Pd;if(gr=0,Rd=Wa=null,Pd=0,(Mt&6)!==0)throw Error(r(331));var B=Mt;if(Mt|=4,M2(E.current),R2(E,E.current,L,h),Mt=B,Im(0,!1),St&&typeof St.onPostCommitFiberRoot=="function")try{St.onPostCommitFiberRoot(Yt,E)}catch{}return!0}finally{se.p=w,Y.T=y,W2(a,c)}}function J2(a,c,h){c=Bi(h,c),c=yw(a.stateNode,c,2),a=Ua(a,c,2),a!==null&&(_o(a,2),Ks(a))}function qt(a,c,h){if(a.tag===3)J2(a,a,h);else for(;c!==null;){if(c.tag===3){J2(c,a,h);break}else if(c.tag===1){var y=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Ka===null||!Ka.has(y))){a=Bi(h,a),h=e2(2),y=Ua(c,h,2),y!==null&&(t2(h,y,c,a),_o(y,2),Ks(y));break}}c=c.return}}function zw(a,c,h){var y=a.pingCache;if(y===null){y=a.pingCache=new OK;var w=new Set;y.set(c,w)}else w=y.get(c),w===void 0&&(w=new Set,y.set(c,w));w.has(h)||(Dw=!0,w.add(h),a=jK.bind(null,a,c,h),c.then(a,a))}function jK(a,c,h){var y=a.pingCache;y!==null&&y.delete(c),a.pingedLanes|=a.suspendedLanes&h,a.warmLanes&=~h,$t===a&&(vt&h)===h&&(yn===4||yn===3&&(vt&62914560)===vt&&300>cn()-Vw?(Mt&2)===0&&Nd(a,0):kw|=h,Id===vt&&(Id=0)),Ks(a)}function Q2(a,c){c===0&&(c=ci()),a=hd(a,c),a!==null&&(_o(a,c),Ks(a))}function BK(a){var c=a.memoizedState,h=0;c!==null&&(h=c.retryLane),Q2(a,h)}function qK(a,c){var h=0;switch(a.tag){case 13:var y=a.stateNode,w=a.memoizedState;w!==null&&(h=w.retryLane);break;case 19:y=a.stateNode;break;case 22:y=a.stateNode._retryCache;break;default:throw Error(r(314))}y!==null&&y.delete(c),Q2(a,h)}function zK(a,c){return It(a,c)}var vv=null,Dd=null,$w=!1,xv=!1,Gw=!1,Du=0;function Ks(a){a!==Dd&&a.next===null&&(Dd===null?vv=Dd=a:Dd=Dd.next=a),xv=!0,$w||($w=!0,GK())}function Im(a,c){if(!Gw&&xv){Gw=!0;do for(var h=!1,y=vv;y!==null;){if(a!==0){var w=y.pendingLanes;if(w===0)var E=0;else{var L=y.suspendedLanes,B=y.pingedLanes;E=(1<<31-tr(42|a)+1)-1,E&=w&~(L&~B),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(h=!0,tD(y,E))}else E=vt,E=Ye(y,y===$t?E:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(E&3)===0||tt(y,E)||(h=!0,tD(y,E));y=y.next}while(h);Gw=!1}}function $K(){X2()}function X2(){xv=$w=!1;var a=0;Du!==0&&(ZK()&&(a=Du),Du=0);for(var c=cn(),h=null,y=vv;y!==null;){var w=y.next,E=Z2(y,c);E===0?(y.next=null,h===null?vv=w:h.next=w,w===null&&(Dd=h)):(h=y,(a!==0||(E&3)!==0)&&(xv=!0)),y=w}Im(a)}function Z2(a,c){for(var h=a.suspendedLanes,y=a.pingedLanes,w=a.expirationTimes,E=a.pendingLanes&-62914561;0<E;){var L=31-tr(E),B=1<<L,K=w[L];K===-1?((B&h)===0||(B&y)!==0)&&(w[L]=Je(B,c)):K<=c&&(a.expiredLanes|=B),E&=~B}if(c=$t,h=vt,h=Ye(a,a===c?h:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),y=a.callbackNode,h===0||a===c&&(Dt===2||Dt===9)||a.cancelPendingCommit!==null)return y!==null&&y!==null&&it(y),a.callbackNode=null,a.callbackPriority=0;if((h&3)===0||tt(a,h)){if(c=h&-h,c===a.callbackPriority)return c;switch(y!==null&&it(y),Yc(h)){case 2:case 8:h=Oi;break;case 32:h=dn;break;case 268435456:h=Aa;break;default:h=dn}return y=eD.bind(null,a),h=It(h,y),a.callbackPriority=c,a.callbackNode=h,c}return y!==null&&y!==null&&it(y),a.callbackPriority=2,a.callbackNode=null,2}function eD(a,c){if(gr!==0&&gr!==5)return a.callbackNode=null,a.callbackPriority=0,null;var h=a.callbackNode;if(yv()&&a.callbackNode!==h)return null;var y=vt;return y=Ye(a,a===$t?y:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),y===0?null:(V2(a,y,c),Z2(a,cn()),a.callbackNode!=null&&a.callbackNode===h?eD.bind(null,a):null)}function tD(a,c){if(yv())return null;V2(a,c,!0)}function GK(){tW(function(){(Mt&6)!==0?It(ru,$K):X2()})}function Hw(){return Du===0&&(Du=fr()),Du}function nD(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:td(""+a)}function rD(a,c){var h=c.ownerDocument.createElement("input");return h.name=c.name,h.value=c.value,a.id&&h.setAttribute("form",a.id),c.parentNode.insertBefore(h,c),a=new FormData(a),h.parentNode.removeChild(h),a}function HK(a,c,h,y,w){if(c==="submit"&&h&&h.stateNode===w){var E=nD((w[Pn]||null).action),L=y.submitter;L&&(c=(c=L[Pn]||null)?nD(c.formAction):L.getAttribute("formAction"),c!==null&&(E=c,L=null));var B=new nd("action","action",null,y,w);a.push({event:B,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(Du!==0){var K=L?rD(w,L):new FormData(w);fw(h,{pending:!0,data:K,method:w.method,action:E},null,K)}}else typeof E=="function"&&(B.preventDefault(),K=L?rD(w,L):new FormData(w),fw(h,{pending:!0,data:K,method:w.method,action:E},E,K))},currentTarget:w}]})}}for(var Kw=0;Kw<N_.length;Kw++){var Ww=N_[Kw],KK=Ww.toLowerCase(),WK=Ww[0].toUpperCase()+Ww.slice(1);ps(KK,"on"+WK)}ps(VN,"onAnimationEnd"),ps(LN,"onAnimationIteration"),ps(UN,"onAnimationStart"),ps("dblclick","onDoubleClick"),ps("focusin","onFocus"),ps("focusout","onBlur"),ps(dK,"onTransitionRun"),ps(fK,"onTransitionStart"),ps(hK,"onTransitionCancel"),ps(FN,"onTransitionEnd"),To("onMouseEnter",["mouseout","mouseover"]),To("onMouseLeave",["mouseout","mouseover"]),To("onPointerEnter",["pointerout","pointerover"]),To("onPointerLeave",["pointerout","pointerover"]),hs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hs("onBeforeInput",["compositionend","keypress","textInput","paste"]),hs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YK=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Rm));function iD(a,c){c=(c&4)!==0;for(var h=0;h<a.length;h++){var y=a[h],w=y.event;y=y.listeners;e:{var E=void 0;if(c)for(var L=y.length-1;0<=L;L--){var B=y[L],K=B.instance,te=B.currentTarget;if(B=B.listener,K!==E&&w.isPropagationStopped())break e;E=B,w.currentTarget=te;try{E(w)}catch(he){ov(he)}w.currentTarget=null,E=K}else for(L=0;L<y.length;L++){if(B=y[L],K=B.instance,te=B.currentTarget,B=B.listener,K!==E&&w.isPropagationStopped())break e;E=B,w.currentTarget=te;try{E(w)}catch(he){ov(he)}w.currentTarget=null,E=K}}}}function dt(a,c){var h=c[jh];h===void 0&&(h=c[jh]=new Set);var y=a+"__bubble";h.has(y)||(sD(c,a,2,!1),h.add(y))}function Yw(a,c,h){var y=0;c&&(y|=4),sD(h,a,y,c)}var bv="_reactListening"+Math.random().toString(36).slice(2);function Jw(a){if(!a[bv]){a[bv]=!0,Bh.forEach(function(h){h!=="selectionchange"&&(YK.has(h)||Yw(h,!1,a),Yw(h,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[bv]||(c[bv]=!0,Yw("selectionchange",!1,c))}}function sD(a,c,h,y){switch(RD(c)){case 2:var w=wW;break;case 8:w=TW;break;default:w=cT}h=w.bind(null,c,h,a),w=void 0,!Fi||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(w=!0),y?w!==void 0?a.addEventListener(c,h,{capture:!0,passive:w}):a.addEventListener(c,h,!0):w!==void 0?a.addEventListener(c,h,{passive:w}):a.addEventListener(c,h,!1)}function Qw(a,c,h,y,w){var E=y;if((c&1)===0&&(c&2)===0&&y!==null)e:for(;;){if(y===null)return;var L=y.tag;if(L===3||L===4){var B=y.stateNode.containerInfo;if(B===w)break;if(L===4)for(L=y.return;L!==null;){var K=L.tag;if((K===3||K===4)&&L.stateNode.containerInfo===w)return;L=L.return}for(;B!==null;){if(L=wo(B),L===null)return;if(K=L.tag,K===5||K===6||K===26||K===27){y=E=L;continue e}B=B.parentNode}}y=y.return}wy(function(){var te=E,he=Ui(h),pe=[];e:{var ne=jN.get(a);if(ne!==void 0){var re=nd,Xe=a;switch(a){case"keypress":if(Us(h)===0)break e;case"keydown":case"keyup":re=ld;break;case"focusin":Xe="focus",re=sd;break;case"focusout":Xe="blur",re=sd;break;case"beforeblur":case"afterblur":re=sd;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=ji;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=T_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=Py;break;case VN:case LN:case UN:re=od;break;case FN:re=My;break;case"scroll":case"scrollend":re=Ty;break;case"wheel":re=ud;break;case"copy":case"cut":case"paste":re=ad;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=Zh;break;case"toggle":case"beforetoggle":re=ky}var We=(c&4)!==0,jt=!We&&(a==="scroll"||a==="scrollend"),J=We?ne!==null?ne+"Capture":null:ne;We=[];for(var W=te,ee;W!==null;){var me=W;if(ee=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||ee===null||J===null||(me=fu(W,J),me!=null&&We.push(Pm(W,me,ee))),jt)break;W=W.return}0<We.length&&(ne=new re(ne,Xe,null,h,he),pe.push({event:ne,listeners:We}))}}if((c&7)===0){e:{if(ne=a==="mouseover"||a==="pointerover",re=a==="mouseout"||a==="pointerout",ne&&h!==Ao&&(Xe=h.relatedTarget||h.fromElement)&&(wo(Xe)||Xe[Vi]))break e;if((re||ne)&&(ne=he.window===he?he:(ne=he.ownerDocument)?ne.defaultView||ne.parentWindow:window,re?(Xe=h.relatedTarget||h.toElement,re=te,Xe=Xe?wo(Xe):null,Xe!==null&&(jt=s(Xe),We=Xe.tag,Xe!==jt||We!==5&&We!==27&&We!==6)&&(Xe=null)):(re=null,Xe=te),re!==Xe)){if(We=ji,me="onMouseLeave",J="onMouseEnter",W="mouse",(a==="pointerout"||a==="pointerover")&&(We=Zh,me="onPointerLeave",J="onPointerEnter",W="pointer"),jt=re==null?ne:ks(re),ee=Xe==null?ne:ks(Xe),ne=new We(me,W+"leave",re,h,he),ne.target=jt,ne.relatedTarget=ee,me=null,wo(he)===te&&(We=new We(J,W+"enter",Xe,h,he),We.target=ee,We.relatedTarget=jt,me=We),jt=me,re&&Xe)t:{for(We=re,J=Xe,W=0,ee=We;ee;ee=kd(ee))W++;for(ee=0,me=J;me;me=kd(me))ee++;for(;0<W-ee;)We=kd(We),W--;for(;0<ee-W;)J=kd(J),ee--;for(;W--;){if(We===J||J!==null&&We===J.alternate)break t;We=kd(We),J=kd(J)}We=null}else We=null;re!==null&&oD(pe,ne,re,We,!1),Xe!==null&&jt!==null&&oD(pe,jt,Xe,We,!0)}}e:{if(ne=te?ks(te):window,re=ne.nodeName&&ne.nodeName.toLowerCase(),re==="select"||re==="input"&&ne.type==="file")var Oe=SN;else if(zn(ne))if(AN)Oe=lK;else{Oe=oK;var ut=sK}else re=ne.nodeName,!re||re.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?te&&Hh(te.elementType)&&(Oe=SN):Oe=aK;if(Oe&&(Oe=Oe(a,te))){No(pe,Oe,h,he);break e}ut&&ut(a,ne,te),a==="focusout"&&te&&ne.type==="number"&&te.memoizedProps.value!=null&&Da(ne,"number",ne.value)}switch(ut=te?ks(te):window,a){case"focusin":(zn(ut)||ut.contentEditable==="true")&&(cd=ut,I_=te,nm=null);break;case"focusout":nm=I_=cd=null;break;case"mousedown":R_=!0;break;case"contextmenu":case"mouseup":case"dragend":R_=!1,kN(pe,h,he);break;case"selectionchange":if(cK)break;case"keydown":case"keyup":kN(pe,h,he)}var ze;if(Bs)e:{switch(a){case"compositionstart":var Qe="onCompositionStart";break e;case"compositionend":Qe="onCompositionEnd";break e;case"compositionupdate":Qe="onCompositionUpdate";break e}Qe=void 0}else gt?oe(a,h)&&(Qe="onCompositionEnd"):a==="keydown"&&h.keyCode===229&&(Qe="onCompositionStart");Qe&&(V&&h.locale!=="ko"&&(gt||Qe!=="onCompositionStart"?Qe==="onCompositionEnd"&&gt&&(ze=Wh()):(Ls=he,ka="value"in Ls?Ls.value:Ls.textContent,gt=!0)),ut=_v(te,Qe),0<ut.length&&(Qe=new Qh(Qe,a,null,h,he),pe.push({event:Qe,listeners:ut}),ze?Qe.data=ze:(ze=Ae(h),ze!==null&&(Qe.data=ze)))),(ze=C?qn(a,h):yt(a,h))&&(Qe=_v(te,"onBeforeInput"),0<Qe.length&&(ut=new Qh("onBeforeInput","beforeinput",null,h,he),pe.push({event:ut,listeners:Qe}),ut.data=ze)),HK(pe,a,te,h,he)}iD(pe,c)})}function Pm(a,c,h){return{instance:a,listener:c,currentTarget:h}}function _v(a,c){for(var h=c+"Capture",y=[];a!==null;){var w=a,E=w.stateNode;if(w=w.tag,w!==5&&w!==26&&w!==27||E===null||(w=fu(a,h),w!=null&&y.unshift(Pm(a,w,E)),w=fu(a,c),w!=null&&y.push(Pm(a,w,E))),a.tag===3)return y;a=a.return}return[]}function kd(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function oD(a,c,h,y,w){for(var E=c._reactName,L=[];h!==null&&h!==y;){var B=h,K=B.alternate,te=B.stateNode;if(B=B.tag,K!==null&&K===y)break;B!==5&&B!==26&&B!==27||te===null||(K=te,w?(te=fu(h,E),te!=null&&L.unshift(Pm(h,te,K))):w||(te=fu(h,E),te!=null&&L.push(Pm(h,te,K)))),h=h.return}L.length!==0&&a.push({event:c,listeners:L})}var JK=/\r\n?/g,QK=/\u0000|\uFFFD/g;function aD(a){return(typeof a=="string"?a:""+a).replace(JK,`
`).replace(QK,"")}function lD(a,c){return c=aD(c),aD(a)===c}function wv(){}function Ft(a,c,h,y,w,E){switch(h){case"children":typeof y=="string"?c==="body"||c==="textarea"&&y===""||Li(a,y):(typeof y=="number"||typeof y=="bigint")&&c!=="body"&&Li(a,""+y);break;case"className":Os(a,"class",y);break;case"tabIndex":Os(a,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":Os(a,h,y);break;case"style":Gh(a,y,E);break;case"data":if(c!=="object"){Os(a,"data",y);break}case"src":case"href":if(y===""&&(c!=="a"||h!=="href")){a.removeAttribute(h);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){a.removeAttribute(h);break}y=td(""+y),a.setAttribute(h,y);break;case"action":case"formAction":if(typeof y=="function"){a.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(h==="formAction"?(c!=="input"&&Ft(a,c,"name",w.name,w,null),Ft(a,c,"formEncType",w.formEncType,w,null),Ft(a,c,"formMethod",w.formMethod,w,null),Ft(a,c,"formTarget",w.formTarget,w,null)):(Ft(a,c,"encType",w.encType,w,null),Ft(a,c,"method",w.method,w,null),Ft(a,c,"target",w.target,w,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){a.removeAttribute(h);break}y=td(""+y),a.setAttribute(h,y);break;case"onClick":y!=null&&(a.onclick=wv);break;case"onScroll":y!=null&&dt("scroll",a);break;case"onScrollEnd":y!=null&&dt("scrollend",a);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(h=y.__html,h!=null){if(w.children!=null)throw Error(r(60));a.innerHTML=h}}break;case"multiple":a.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":a.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){a.removeAttribute("xlink:href");break}h=td(""+y),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?a.setAttribute(h,""+y):a.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?a.setAttribute(h,""):a.removeAttribute(h);break;case"capture":case"download":y===!0?a.setAttribute(h,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?a.setAttribute(h,y):a.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?a.setAttribute(h,y):a.removeAttribute(h);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?a.removeAttribute(h):a.setAttribute(h,y);break;case"popover":dt("beforetoggle",a),dt("toggle",a),Ma(a,"popover",y);break;case"xlinkActuate":hr(a,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":hr(a,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":hr(a,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":hr(a,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":hr(a,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":hr(a,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":hr(a,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":hr(a,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":hr(a,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":Ma(a,"is",y);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=__.get(h)||h,Ma(a,h,y))}}function Xw(a,c,h,y,w,E){switch(h){case"style":Gh(a,y,E);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(h=y.__html,h!=null){if(w.children!=null)throw Error(r(60));a.innerHTML=h}}break;case"children":typeof y=="string"?Li(a,y):(typeof y=="number"||typeof y=="bigint")&&Li(a,""+y);break;case"onScroll":y!=null&&dt("scroll",a);break;case"onScrollEnd":y!=null&&dt("scrollend",a);break;case"onClick":y!=null&&(a.onclick=wv);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Jc.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(w=h.endsWith("Capture"),c=h.slice(2,w?h.length-7:void 0),E=a[Pn]||null,E=E!=null?E[h]:null,typeof E=="function"&&a.removeEventListener(c,E,w),typeof y=="function")){typeof E!="function"&&E!==null&&(h in a?a[h]=null:a.hasAttribute(h)&&a.removeAttribute(h)),a.addEventListener(c,y,w);break e}h in a?a[h]=y:y===!0?a.setAttribute(h,""):Ma(a,h,y)}}}function yr(a,c,h){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":dt("error",a),dt("load",a);var y=!1,w=!1,E;for(E in h)if(h.hasOwnProperty(E)){var L=h[E];if(L!=null)switch(E){case"src":y=!0;break;case"srcSet":w=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:Ft(a,c,E,L,h,null)}}w&&Ft(a,c,"srcSet",h.srcSet,h,null),y&&Ft(a,c,"src",h.src,h,null);return;case"input":dt("invalid",a);var B=E=L=w=null,K=null,te=null;for(y in h)if(h.hasOwnProperty(y)){var he=h[y];if(he!=null)switch(y){case"name":w=he;break;case"type":L=he;break;case"checked":K=he;break;case"defaultChecked":te=he;break;case"value":E=he;break;case"defaultValue":B=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(r(137,c));break;default:Ft(a,c,y,he,h,null)}}uu(a,E,B,K,te,L,w,!1),ed(a);return;case"select":dt("invalid",a),y=L=E=null;for(w in h)if(h.hasOwnProperty(w)&&(B=h[w],B!=null))switch(w){case"value":E=B;break;case"defaultValue":L=B;break;case"multiple":y=B;default:Ft(a,c,w,B,h,null)}c=E,h=L,a.multiple=!!y,c!=null?So(a,!!y,c,!1):h!=null&&So(a,!!y,h,!0);return;case"textarea":dt("invalid",a),E=w=y=null;for(L in h)if(h.hasOwnProperty(L)&&(B=h[L],B!=null))switch(L){case"value":y=B;break;case"defaultValue":w=B;break;case"children":E=B;break;case"dangerouslySetInnerHTML":if(B!=null)throw Error(r(91));break;default:Ft(a,c,L,B,h,null)}cu(a,y,w,E),ed(a);return;case"option":for(K in h)if(h.hasOwnProperty(K)&&(y=h[K],y!=null))switch(K){case"selected":a.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:Ft(a,c,K,y,h,null)}return;case"dialog":dt("beforetoggle",a),dt("toggle",a),dt("cancel",a),dt("close",a);break;case"iframe":case"object":dt("load",a);break;case"video":case"audio":for(y=0;y<Rm.length;y++)dt(Rm[y],a);break;case"image":dt("error",a),dt("load",a);break;case"details":dt("toggle",a);break;case"embed":case"source":case"link":dt("error",a),dt("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(te in h)if(h.hasOwnProperty(te)&&(y=h[te],y!=null))switch(te){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:Ft(a,c,te,y,h,null)}return;default:if(Hh(c)){for(he in h)h.hasOwnProperty(he)&&(y=h[he],y!==void 0&&Xw(a,c,he,y,h,void 0));return}}for(B in h)h.hasOwnProperty(B)&&(y=h[B],y!=null&&Ft(a,c,B,y,h,null))}function XK(a,c,h,y){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var w=null,E=null,L=null,B=null,K=null,te=null,he=null;for(re in h){var pe=h[re];if(h.hasOwnProperty(re)&&pe!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":K=pe;default:y.hasOwnProperty(re)||Ft(a,c,re,null,y,pe)}}for(var ne in y){var re=y[ne];if(pe=h[ne],y.hasOwnProperty(ne)&&(re!=null||pe!=null))switch(ne){case"type":E=re;break;case"name":w=re;break;case"checked":te=re;break;case"defaultChecked":he=re;break;case"value":L=re;break;case"defaultValue":B=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,c));break;default:re!==pe&&Ft(a,c,ne,re,y,pe)}}fi(a,L,B,K,te,he,E,w);return;case"select":re=L=B=ne=null;for(E in h)if(K=h[E],h.hasOwnProperty(E)&&K!=null)switch(E){case"value":break;case"multiple":re=K;default:y.hasOwnProperty(E)||Ft(a,c,E,null,y,K)}for(w in y)if(E=y[w],K=h[w],y.hasOwnProperty(w)&&(E!=null||K!=null))switch(w){case"value":ne=E;break;case"defaultValue":B=E;break;case"multiple":L=E;default:E!==K&&Ft(a,c,w,E,y,K)}c=B,h=L,y=re,ne!=null?So(a,!!h,ne,!1):!!y!=!!h&&(c!=null?So(a,!!h,c,!0):So(a,!!h,h?[]:"",!1));return;case"textarea":re=ne=null;for(B in h)if(w=h[B],h.hasOwnProperty(B)&&w!=null&&!y.hasOwnProperty(B))switch(B){case"value":break;case"children":break;default:Ft(a,c,B,null,y,w)}for(L in y)if(w=y[L],E=h[L],y.hasOwnProperty(L)&&(w!=null||E!=null))switch(L){case"value":ne=w;break;case"defaultValue":re=w;break;case"children":break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(r(91));break;default:w!==E&&Ft(a,c,L,w,y,E)}Lt(a,ne,re);return;case"option":for(var Xe in h)if(ne=h[Xe],h.hasOwnProperty(Xe)&&ne!=null&&!y.hasOwnProperty(Xe))switch(Xe){case"selected":a.selected=!1;break;default:Ft(a,c,Xe,null,y,ne)}for(K in y)if(ne=y[K],re=h[K],y.hasOwnProperty(K)&&ne!==re&&(ne!=null||re!=null))switch(K){case"selected":a.selected=ne&&typeof ne!="function"&&typeof ne!="symbol";break;default:Ft(a,c,K,ne,y,re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var We in h)ne=h[We],h.hasOwnProperty(We)&&ne!=null&&!y.hasOwnProperty(We)&&Ft(a,c,We,null,y,ne);for(te in y)if(ne=y[te],re=h[te],y.hasOwnProperty(te)&&ne!==re&&(ne!=null||re!=null))switch(te){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,c));break;default:Ft(a,c,te,ne,y,re)}return;default:if(Hh(c)){for(var jt in h)ne=h[jt],h.hasOwnProperty(jt)&&ne!==void 0&&!y.hasOwnProperty(jt)&&Xw(a,c,jt,void 0,y,ne);for(he in y)ne=y[he],re=h[he],!y.hasOwnProperty(he)||ne===re||ne===void 0&&re===void 0||Xw(a,c,he,ne,y,re);return}}for(var J in h)ne=h[J],h.hasOwnProperty(J)&&ne!=null&&!y.hasOwnProperty(J)&&Ft(a,c,J,null,y,ne);for(pe in y)ne=y[pe],re=h[pe],!y.hasOwnProperty(pe)||ne===re||ne==null&&re==null||Ft(a,c,pe,ne,y,re)}var Zw=null,eT=null;function Tv(a){return a.nodeType===9?a:a.ownerDocument}function uD(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cD(a,c){if(a===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&c==="foreignObject"?0:a}function tT(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var nT=null;function ZK(){var a=window.event;return a&&a.type==="popstate"?a===nT?!1:(nT=a,!0):(nT=null,!1)}var dD=typeof setTimeout=="function"?setTimeout:void 0,eW=typeof clearTimeout=="function"?clearTimeout:void 0,fD=typeof Promise=="function"?Promise:void 0,tW=typeof queueMicrotask=="function"?queueMicrotask:typeof fD<"u"?function(a){return fD.resolve(null).then(a).catch(nW)}:dD;function nW(a){setTimeout(function(){throw a})}function Ja(a){return a==="head"}function hD(a,c){var h=c,y=0,w=0;do{var E=h.nextSibling;if(a.removeChild(h),E&&E.nodeType===8)if(h=E.data,h==="/$"){if(0<y&&8>y){h=y;var L=a.ownerDocument;if(h&1&&Nm(L.documentElement),h&2&&Nm(L.body),h&4)for(h=L.head,Nm(h),L=h.firstChild;L;){var B=L.nextSibling,K=L.nodeName;L[su]||K==="SCRIPT"||K==="STYLE"||K==="LINK"&&L.rel.toLowerCase()==="stylesheet"||h.removeChild(L),L=B}}if(w===0){a.removeChild(E),Fm(c);return}w--}else h==="$"||h==="$?"||h==="$!"?w++:y=h.charCodeAt(0)-48;else y=0;h=E}while(h);Fm(c)}function rT(a){var c=a.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var h=c;switch(c=c.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":rT(h),Na(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}a.removeChild(h)}}function rW(a,c,h,y){for(;a.nodeType===1;){var w=h;if(a.nodeName.toLowerCase()!==c.toLowerCase()){if(!y&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(y){if(!a[su])switch(c){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(E=a.getAttribute("rel"),E==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(E!==w.rel||a.getAttribute("href")!==(w.href==null||w.href===""?null:w.href)||a.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin)||a.getAttribute("title")!==(w.title==null?null:w.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(E=a.getAttribute("src"),(E!==(w.src==null?null:w.src)||a.getAttribute("type")!==(w.type==null?null:w.type)||a.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin))&&E&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(c==="input"&&a.type==="hidden"){var E=w.name==null?null:""+w.name;if(w.type==="hidden"&&a.getAttribute("name")===E)return a}else return a;if(a=ys(a.nextSibling),a===null)break}return null}function iW(a,c,h){if(c==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!h||(a=ys(a.nextSibling),a===null))return null;return a}function iT(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function sW(a,c){var h=a.ownerDocument;if(a.data!=="$?"||h.readyState==="complete")c();else{var y=function(){c(),h.removeEventListener("DOMContentLoaded",y)};h.addEventListener("DOMContentLoaded",y),a._reactRetry=y}}function ys(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return a}var sT=null;function mD(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var h=a.data;if(h==="$"||h==="$!"||h==="$?"){if(c===0)return a;c--}else h==="/$"&&c++}a=a.previousSibling}return null}function pD(a,c,h){switch(c=Tv(h),a){case"html":if(a=c.documentElement,!a)throw Error(r(452));return a;case"head":if(a=c.head,!a)throw Error(r(453));return a;case"body":if(a=c.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function Nm(a){for(var c=a.attributes;c.length;)a.removeAttributeNode(c[0]);Na(a)}var Ki=new Map,gD=new Set;function Ev(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var $o=se.d;se.d={f:oW,r:aW,D:lW,C:uW,L:cW,m:dW,X:hW,S:fW,M:mW};function oW(){var a=$o.f(),c=pv();return a||c}function aW(a){var c=Ds(a);c!==null&&c.tag===5&&c.type==="form"?VM(c):$o.r(a)}var Od=typeof document>"u"?null:document;function yD(a,c,h){var y=Od;if(y&&typeof c=="string"&&c){var w=Nn(c);w='link[rel="'+a+'"][href="'+w+'"]',typeof h=="string"&&(w+='[crossorigin="'+h+'"]'),gD.has(w)||(gD.add(w),a={rel:a,crossOrigin:h,href:c},y.querySelector(w)===null&&(c=y.createElement("link"),yr(c,"link",a),Tn(c),y.head.appendChild(c)))}}function lW(a){$o.D(a),yD("dns-prefetch",a,null)}function uW(a,c){$o.C(a,c),yD("preconnect",a,c)}function cW(a,c,h){$o.L(a,c,h);var y=Od;if(y&&a&&c){var w='link[rel="preload"][as="'+Nn(c)+'"]';c==="image"&&h&&h.imageSrcSet?(w+='[imagesrcset="'+Nn(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(w+='[imagesizes="'+Nn(h.imageSizes)+'"]')):w+='[href="'+Nn(a)+'"]';var E=w;switch(c){case"style":E=Vd(a);break;case"script":E=Ld(a)}Ki.has(E)||(a=f({rel:"preload",href:c==="image"&&h&&h.imageSrcSet?void 0:a,as:c},h),Ki.set(E,a),y.querySelector(w)!==null||c==="style"&&y.querySelector(Mm(E))||c==="script"&&y.querySelector(Dm(E))||(c=y.createElement("link"),yr(c,"link",a),Tn(c),y.head.appendChild(c)))}}function dW(a,c){$o.m(a,c);var h=Od;if(h&&a){var y=c&&typeof c.as=="string"?c.as:"script",w='link[rel="modulepreload"][as="'+Nn(y)+'"][href="'+Nn(a)+'"]',E=w;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=Ld(a)}if(!Ki.has(E)&&(a=f({rel:"modulepreload",href:a},c),Ki.set(E,a),h.querySelector(w)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(Dm(E)))return}y=h.createElement("link"),yr(y,"link",a),Tn(y),h.head.appendChild(y)}}}function fW(a,c,h){$o.S(a,c,h);var y=Od;if(y&&a){var w=jr(y).hoistableStyles,E=Vd(a);c=c||"default";var L=w.get(E);if(!L){var B={loading:0,preload:null};if(L=y.querySelector(Mm(E)))B.loading=5;else{a=f({rel:"stylesheet",href:a,"data-precedence":c},h),(h=Ki.get(E))&&oT(a,h);var K=L=y.createElement("link");Tn(K),yr(K,"link",a),K._p=new Promise(function(te,he){K.onload=te,K.onerror=he}),K.addEventListener("load",function(){B.loading|=1}),K.addEventListener("error",function(){B.loading|=2}),B.loading|=4,Sv(L,c,y)}L={type:"stylesheet",instance:L,count:1,state:B},w.set(E,L)}}}function hW(a,c){$o.X(a,c);var h=Od;if(h&&a){var y=jr(h).hoistableScripts,w=Ld(a),E=y.get(w);E||(E=h.querySelector(Dm(w)),E||(a=f({src:a,async:!0},c),(c=Ki.get(w))&&aT(a,c),E=h.createElement("script"),Tn(E),yr(E,"link",a),h.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},y.set(w,E))}}function mW(a,c){$o.M(a,c);var h=Od;if(h&&a){var y=jr(h).hoistableScripts,w=Ld(a),E=y.get(w);E||(E=h.querySelector(Dm(w)),E||(a=f({src:a,async:!0,type:"module"},c),(c=Ki.get(w))&&aT(a,c),E=h.createElement("script"),Tn(E),yr(E,"link",a),h.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},y.set(w,E))}}function vD(a,c,h,y){var w=(w=je.current)?Ev(w):null;if(!w)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(c=Vd(h.href),h=jr(w).hoistableStyles,y=h.get(c),y||(y={type:"style",instance:null,count:0,state:null},h.set(c,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){a=Vd(h.href);var E=jr(w).hoistableStyles,L=E.get(a);if(L||(w=w.ownerDocument||w,L={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(a,L),(E=w.querySelector(Mm(a)))&&!E._p&&(L.instance=E,L.state.loading=5),Ki.has(a)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},Ki.set(a,h),E||pW(w,a,h,L.state))),c&&y===null)throw Error(r(528,""));return L}if(c&&y!==null)throw Error(r(529,""));return null;case"script":return c=h.async,h=h.src,typeof h=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Ld(h),h=jr(w).hoistableScripts,y=h.get(c),y||(y={type:"script",instance:null,count:0,state:null},h.set(c,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function Vd(a){return'href="'+Nn(a)+'"'}function Mm(a){return'link[rel="stylesheet"]['+a+"]"}function xD(a){return f({},a,{"data-precedence":a.precedence,precedence:null})}function pW(a,c,h,y){a.querySelector('link[rel="preload"][as="style"]['+c+"]")?y.loading=1:(c=a.createElement("link"),y.preload=c,c.addEventListener("load",function(){return y.loading|=1}),c.addEventListener("error",function(){return y.loading|=2}),yr(c,"link",h),Tn(c),a.head.appendChild(c))}function Ld(a){return'[src="'+Nn(a)+'"]'}function Dm(a){return"script[async]"+a}function bD(a,c,h){if(c.count++,c.instance===null)switch(c.type){case"style":var y=a.querySelector('style[data-href~="'+Nn(h.href)+'"]');if(y)return c.instance=y,Tn(y),y;var w=f({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return y=(a.ownerDocument||a).createElement("style"),Tn(y),yr(y,"style",w),Sv(y,h.precedence,a),c.instance=y;case"stylesheet":w=Vd(h.href);var E=a.querySelector(Mm(w));if(E)return c.state.loading|=4,c.instance=E,Tn(E),E;y=xD(h),(w=Ki.get(w))&&oT(y,w),E=(a.ownerDocument||a).createElement("link"),Tn(E);var L=E;return L._p=new Promise(function(B,K){L.onload=B,L.onerror=K}),yr(E,"link",y),c.state.loading|=4,Sv(E,h.precedence,a),c.instance=E;case"script":return E=Ld(h.src),(w=a.querySelector(Dm(E)))?(c.instance=w,Tn(w),w):(y=h,(w=Ki.get(E))&&(y=f({},h),aT(y,w)),a=a.ownerDocument||a,w=a.createElement("script"),Tn(w),yr(w,"link",y),a.head.appendChild(w),c.instance=w);case"void":return null;default:throw Error(r(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(y=c.instance,c.state.loading|=4,Sv(y,h.precedence,a));return c.instance}function Sv(a,c,h){for(var y=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),w=y.length?y[y.length-1]:null,E=w,L=0;L<y.length;L++){var B=y[L];if(B.dataset.precedence===c)E=B;else if(E!==w)break}E?E.parentNode.insertBefore(a,E.nextSibling):(c=h.nodeType===9?h.head:h,c.insertBefore(a,c.firstChild))}function oT(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.title==null&&(a.title=c.title)}function aT(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.integrity==null&&(a.integrity=c.integrity)}var Av=null;function _D(a,c,h){if(Av===null){var y=new Map,w=Av=new Map;w.set(h,y)}else w=Av,y=w.get(h),y||(y=new Map,w.set(h,y));if(y.has(a))return y;for(y.set(a,null),h=h.getElementsByTagName(a),w=0;w<h.length;w++){var E=h[w];if(!(E[su]||E[Bn]||a==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var L=E.getAttribute(c)||"";L=a+L;var B=y.get(L);B?B.push(E):y.set(L,[E])}}return y}function wD(a,c,h){a=a.ownerDocument||a,a.head.insertBefore(h,c==="title"?a.querySelector("head > title"):null)}function gW(a,c,h){if(h===1||c.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return a=c.disabled,typeof c.precedence=="string"&&a==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function TD(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var km=null;function yW(){}function vW(a,c,h){if(km===null)throw Error(r(475));var y=km;if(c.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var w=Vd(h.href),E=a.querySelector(Mm(w));if(E){a=E._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(y.count++,y=Cv.bind(y),a.then(y,y)),c.state.loading|=4,c.instance=E,Tn(E);return}E=a.ownerDocument||a,h=xD(h),(w=Ki.get(w))&&oT(h,w),E=E.createElement("link"),Tn(E);var L=E;L._p=new Promise(function(B,K){L.onload=B,L.onerror=K}),yr(E,"link",h),c.instance=E}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(c,a),(a=c.state.preload)&&(c.state.loading&3)===0&&(y.count++,c=Cv.bind(y),a.addEventListener("load",c),a.addEventListener("error",c))}}function xW(){if(km===null)throw Error(r(475));var a=km;return a.stylesheets&&a.count===0&&lT(a,a.stylesheets),0<a.count?function(c){var h=setTimeout(function(){if(a.stylesheets&&lT(a,a.stylesheets),a.unsuspend){var y=a.unsuspend;a.unsuspend=null,y()}},6e4);return a.unsuspend=c,function(){a.unsuspend=null,clearTimeout(h)}}:null}function Cv(){if(this.count--,this.count===0){if(this.stylesheets)lT(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Iv=null;function lT(a,c){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Iv=new Map,c.forEach(bW,a),Iv=null,Cv.call(a))}function bW(a,c){if(!(c.state.loading&4)){var h=Iv.get(a);if(h)var y=h.get(null);else{h=new Map,Iv.set(a,h);for(var w=a.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<w.length;E++){var L=w[E];(L.nodeName==="LINK"||L.getAttribute("media")!=="not all")&&(h.set(L.dataset.precedence,L),y=L)}y&&h.set(null,y)}w=c.instance,L=w.getAttribute("data-precedence"),E=h.get(L)||y,E===y&&h.set(null,w),h.set(L,w),this.count++,y=Cv.bind(this),w.addEventListener("load",y),w.addEventListener("error",y),E?E.parentNode.insertBefore(w,E.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(w,a.firstChild)),c.state.loading|=4}}var Om={$$typeof:N,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function _W(a,c,h,y,w,E,L,B){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=di(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=di(0),this.hiddenUpdates=di(null),this.identifierPrefix=y,this.onUncaughtError=w,this.onCaughtError=E,this.onRecoverableError=L,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function ED(a,c,h,y,w,E,L,B,K,te,he,pe){return a=new _W(a,c,h,L,B,K,te,pe),c=1,E===!0&&(c|=24),E=mi(3,null,null,c),a.current=E,E.stateNode=a,c=z_(),c.refCount++,a.pooledCache=c,c.refCount++,E.memoizedState={element:y,isDehydrated:h,cache:c},K_(E),a}function SD(a){return a?(a=md,a):md}function AD(a,c,h,y,w,E){w=SD(w),y.context===null?y.context=w:y.pendingContext=w,y=La(c),y.payload={element:h},E=E===void 0?null:E,E!==null&&(y.callback=E),h=Ua(a,y,c),h!==null&&(xi(h,a,c),dm(h,a,c))}function CD(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var h=a.retryLane;a.retryLane=h!==0&&h<c?h:c}}function uT(a,c){CD(a,c),(a=a.alternate)&&CD(a,c)}function ID(a){if(a.tag===13){var c=hd(a,67108864);c!==null&&xi(c,a,67108864),uT(a,67108864)}}var Rv=!0;function wW(a,c,h,y){var w=Y.T;Y.T=null;var E=se.p;try{se.p=2,cT(a,c,h,y)}finally{se.p=E,Y.T=w}}function TW(a,c,h,y){var w=Y.T;Y.T=null;var E=se.p;try{se.p=8,cT(a,c,h,y)}finally{se.p=E,Y.T=w}}function cT(a,c,h,y){if(Rv){var w=dT(y);if(w===null)Qw(a,c,y,Pv,h),PD(a,y);else if(SW(w,a,c,h,y))y.stopPropagation();else if(PD(a,y),c&4&&-1<EW.indexOf(a)){for(;w!==null;){var E=Ds(w);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var L=Ge(E.pendingLanes);if(L!==0){var B=E;for(B.pendingLanes|=2,B.entangledLanes|=2;L;){var K=1<<31-tr(L);B.entanglements[1]|=K,L&=~K}Ks(E),(Mt&6)===0&&(hv=cn()+500,Im(0))}}break;case 13:B=hd(E,2),B!==null&&xi(B,E,2),pv(),uT(E,2)}if(E=dT(y),E===null&&Qw(a,c,y,Pv,h),E===w)break;w=E}w!==null&&y.stopPropagation()}else Qw(a,c,y,null,h)}}function dT(a){return a=Ui(a),fT(a)}var Pv=null;function fT(a){if(Pv=null,a=wo(a),a!==null){var c=s(a);if(c===null)a=null;else{var h=c.tag;if(h===13){if(a=o(c),a!==null)return a;a=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null)}}return Pv=a,null}function RD(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Sa()){case ru:return 2;case Oi:return 8;case dn:case Kc:return 32;case Aa:return 268435456;default:return 32}default:return 32}}var hT=!1,Qa=null,Xa=null,Za=null,Vm=new Map,Lm=new Map,el=[],EW="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function PD(a,c){switch(a){case"focusin":case"focusout":Qa=null;break;case"dragenter":case"dragleave":Xa=null;break;case"mouseover":case"mouseout":Za=null;break;case"pointerover":case"pointerout":Vm.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lm.delete(c.pointerId)}}function Um(a,c,h,y,w,E){return a===null||a.nativeEvent!==E?(a={blockedOn:c,domEventName:h,eventSystemFlags:y,nativeEvent:E,targetContainers:[w]},c!==null&&(c=Ds(c),c!==null&&ID(c)),a):(a.eventSystemFlags|=y,c=a.targetContainers,w!==null&&c.indexOf(w)===-1&&c.push(w),a)}function SW(a,c,h,y,w){switch(c){case"focusin":return Qa=Um(Qa,a,c,h,y,w),!0;case"dragenter":return Xa=Um(Xa,a,c,h,y,w),!0;case"mouseover":return Za=Um(Za,a,c,h,y,w),!0;case"pointerover":var E=w.pointerId;return Vm.set(E,Um(Vm.get(E)||null,a,c,h,y,w)),!0;case"gotpointercapture":return E=w.pointerId,Lm.set(E,Um(Lm.get(E)||null,a,c,h,y,w)),!0}return!1}function ND(a){var c=wo(a.target);if(c!==null){var h=s(c);if(h!==null){if(c=h.tag,c===13){if(c=o(h),c!==null){a.blockedOn=c,py(a.priority,function(){if(h.tag===13){var y=vi();y=Ia(y);var w=hd(h,y);w!==null&&xi(w,h,y),uT(h,y)}});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){a.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Nv(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var h=dT(a.nativeEvent);if(h===null){h=a.nativeEvent;var y=new h.constructor(h.type,h);Ao=y,h.target.dispatchEvent(y),Ao=null}else return c=Ds(h),c!==null&&ID(c),a.blockedOn=h,!1;c.shift()}return!0}function MD(a,c,h){Nv(a)&&h.delete(c)}function AW(){hT=!1,Qa!==null&&Nv(Qa)&&(Qa=null),Xa!==null&&Nv(Xa)&&(Xa=null),Za!==null&&Nv(Za)&&(Za=null),Vm.forEach(MD),Lm.forEach(MD)}function Mv(a,c){a.blockedOn===c&&(a.blockedOn=null,hT||(hT=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,AW)))}var Dv=null;function DD(a){Dv!==a&&(Dv=a,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Dv===a&&(Dv=null);for(var c=0;c<a.length;c+=3){var h=a[c],y=a[c+1],w=a[c+2];if(typeof y!="function"){if(fT(y||h)===null)continue;break}var E=Ds(h);E!==null&&(a.splice(c,3),c-=3,fw(E,{pending:!0,data:w,method:h.method,action:y},y,w))}}))}function Fm(a){function c(K){return Mv(K,a)}Qa!==null&&Mv(Qa,a),Xa!==null&&Mv(Xa,a),Za!==null&&Mv(Za,a),Vm.forEach(c),Lm.forEach(c);for(var h=0;h<el.length;h++){var y=el[h];y.blockedOn===a&&(y.blockedOn=null)}for(;0<el.length&&(h=el[0],h.blockedOn===null);)ND(h),h.blockedOn===null&&el.shift();if(h=(a.ownerDocument||a).$$reactFormReplay,h!=null)for(y=0;y<h.length;y+=3){var w=h[y],E=h[y+1],L=w[Pn]||null;if(typeof E=="function")L||DD(h);else if(L){var B=null;if(E&&E.hasAttribute("formAction")){if(w=E,L=E[Pn]||null)B=L.formAction;else if(fT(w)!==null)continue}else B=L.action;typeof B=="function"?h[y+1]=B:(h.splice(y,3),y-=3),DD(h)}}}function mT(a){this._internalRoot=a}kv.prototype.render=mT.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(r(409));var h=c.current,y=vi();AD(h,y,a,c,null,null)},kv.prototype.unmount=mT.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;AD(a.current,2,null,a,null,null),pv(),c[Vi]=null}};function kv(a){this._internalRoot=a}kv.prototype.unstable_scheduleHydration=function(a){if(a){var c=Ra();a={blockedOn:null,target:a,priority:c};for(var h=0;h<el.length&&c!==0&&c<el[h].priority;h++);el.splice(h,0,a),h===0&&ND(a)}};var kD=e.version;if(kD!=="19.1.1")throw Error(r(527,kD,"19.1.1"));se.findDOMNode=function(a){var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=u(c),a=a!==null?d(a):null,a=a===null?null:a.stateNode,a};var CW={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ov=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ov.isDisabled&&Ov.supportsFiber)try{Yt=Ov.inject(CW),St=Ov}catch{}}return Bm.createRoot=function(a,c){if(!i(a))throw Error(r(299));var h=!1,y="",w=JM,E=QM,L=XM,B=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(w=c.onUncaughtError),c.onCaughtError!==void 0&&(E=c.onCaughtError),c.onRecoverableError!==void 0&&(L=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(B=c.unstable_transitionCallbacks)),c=ED(a,1,!1,null,null,h,y,w,E,L,B,null),a[Vi]=c.current,Jw(a),new mT(c)},Bm.hydrateRoot=function(a,c,h){if(!i(a))throw Error(r(299));var y=!1,w="",E=JM,L=QM,B=XM,K=null,te=null;return h!=null&&(h.unstable_strictMode===!0&&(y=!0),h.identifierPrefix!==void 0&&(w=h.identifierPrefix),h.onUncaughtError!==void 0&&(E=h.onUncaughtError),h.onCaughtError!==void 0&&(L=h.onCaughtError),h.onRecoverableError!==void 0&&(B=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(K=h.unstable_transitionCallbacks),h.formState!==void 0&&(te=h.formState)),c=ED(a,1,!0,c,h??null,y,w,E,L,B,K,te),c.context=SD(null),h=c.current,y=vi(),y=Ia(y),w=La(y),w.callback=null,Ua(h,w,y),h=y,c.current.lanes=h,_o(c,h),Ks(c),a[Vi]=c.current,Jw(a),new kv(c)},Bm.version="19.1.1",Bm}var $D;function jW(){if($D)return vT.exports;$D=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),vT.exports=FW(),vT.exports}var BW=jW();const qW=xo(BW),zW=P.createContext({}),$W=({children:t})=>{const[e,n]=P.useState({});return x.jsx(zW.Provider,{value:{cache:e,setCache:n},children:t})},GW=()=>{};var GD={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KF=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},HW=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},WF={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,f=s>>2,m=(s&3)<<4|l>>4;let v=(l&15)<<2|d>>6,_=d&63;u||(_=64,o||(v=64)),r.push(n[f],n[m],n[v],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(KF(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):HW(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||d==null||m==null)throw new KW;const v=s<<2|l>>4;if(r.push(v),d!==64){const _=l<<4&240|d>>2;if(r.push(_),m!==64){const T=d<<6&192|m;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class KW extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const WW=function(t){const e=KF(t);return WF.encodeByteArray(e,!0)},O0=function(t){return WW(t).replace(/\./g,"")},hC=function(t){try{return WF.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function V0(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!YW(n)||(t[n]=V0(t[n],e[n]));return t}function YW(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JW=()=>mC().__FIREBASE_DEFAULTS__,QW=()=>{if(typeof process>"u"||typeof GD>"u")return;const t=GD.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},XW=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&hC(t[1]);return e&&JSON.parse(e)},pC=()=>{try{return GW()||JW()||QW()||XW()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},gC=()=>{var t;return(t=pC())==null?void 0:t.config},ZW=t=>{var e;return(e=pC())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eY{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oh(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function YF(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tY(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[O0(JSON.stringify(n)),O0(JSON.stringify(o)),""].join(".")}const xp={};function nY(){const t={prod:[],emulator:[]};for(const e of Object.keys(xp))xp[e]?t.emulator.push(e):t.prod.push(e);return t}function rY(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let HD=!1;function JF(t,e){if(typeof window>"u"||typeof document>"u"||!oh(window.location.host)||xp[t]===e||xp[t]||HD)return;xp[t]=e;function n(v){return`__firebase__banner__${v}`}const r="__firebase__banner",s=nY().prod.length>0;function o(){const v=document.getElementById(r);v&&v.remove()}function l(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function u(v,_){v.setAttribute("width","24"),v.setAttribute("id",_),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function d(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{HD=!0,o()},v}function f(v,_){v.setAttribute("id",_),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function m(){const v=rY(r),_=n("text"),T=document.getElementById(_)||document.createElement("span"),S=n("learnmore"),A=document.getElementById(S)||document.createElement("a"),I=n("preprendIcon"),D=document.getElementById(I)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const N=v.element;l(N),f(A,S);const U=d();u(D,I),N.append(D,T,A,U),document.body.appendChild(N)}s?(T.innerText="Preview backend disconnected.",D.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(D.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iY(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mn())}function Jx(){var e;const t=(e=pC())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sY(){return typeof window<"u"||QF()}function QF(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function oY(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function XF(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function yC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ZF(){const t=mn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ej(){return!Jx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tj(){return!Jx()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function zp(){try{return typeof indexedDB=="object"}catch{return!1}}function aY(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lY="FirebaseError";class Wr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=lY,Object.setPrototypeOf(this,Wr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vc.prototype.create)}}class Vc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?uY(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new Wr(i,l,r)}}function uY(t,e){return t.replace(cY,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const cY=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KD(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function dY(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Al(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(WD(s)&&WD(o)){if(!Al(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function WD(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ah(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Xd(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function lp(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function nj(t,e){const n=new fY(t,e);return n.subscribe.bind(n)}class fY{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");hY(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=wT),i.error===void 0&&(i.error=wT),i.complete===void 0&&(i.complete=wT);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hY(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function wT(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(t){return t&&t._delegate?t._delegate:t}class ho{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mY=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new eY;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gY(e))try{this.getOrInitializeService({instanceIdentifier:Uu})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Uu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Uu){return this.instances.has(e)}getOptions(e=Uu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:pY(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Uu){return this.component?this.component.multipleInstances?e:Uu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function pY(t){return t===Uu?void 0:t}function gY(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new mY(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=[];var ft;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ft||(ft={}));const ij={debug:ft.DEBUG,verbose:ft.VERBOSE,info:ft.INFO,warn:ft.WARN,error:ft.ERROR,silent:ft.SILENT},yY=ft.INFO,vY={[ft.DEBUG]:"log",[ft.VERBOSE]:"log",[ft.INFO]:"info",[ft.WARN]:"warn",[ft.ERROR]:"error"},xY=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=vY[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Qx{constructor(e){this.name=e,this._logLevel=yY,this._logHandler=xY,this._userLogHandler=null,vC.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ft))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ij[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ft.DEBUG,...e),this._logHandler(this,ft.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ft.VERBOSE,...e),this._logHandler(this,ft.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ft.INFO,...e),this._logHandler(this,ft.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ft.WARN,...e),this._logHandler(this,ft.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ft.ERROR,...e),this._logHandler(this,ft.ERROR,...e)}}function bY(t){vC.forEach(e=>{e.setLogLevel(t)})}function _Y(t,e){for(const n of vC){let r=null;e&&e.level&&(r=ij[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{const l=o.map(u=>{if(u==null)return null;if(typeof u=="string")return u;if(typeof u=="number"||typeof u=="boolean")return u.toString();if(u instanceof Error)return u.message;try{return JSON.stringify(u)}catch{return null}}).filter(u=>u).join(" ");s>=(r??i.logLevel)&&t({level:ft[s].toLowerCase(),message:l,args:o,type:i.name})}}}const wY=(t,e)=>e.some(n=>t instanceof n);let YD,JD;function TY(){return YD||(YD=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function EY(){return JD||(JD=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sj=new WeakMap,WS=new WeakMap,oj=new WeakMap,TT=new WeakMap,xC=new WeakMap;function SY(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(xl(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&sj.set(n,t)}).catch(()=>{}),xC.set(e,t),e}function AY(t){if(WS.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});WS.set(t,e)}let YS={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return WS.get(t);if(e==="objectStoreNames")return t.objectStoreNames||oj.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xl(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function CY(t){YS=t(YS)}function IY(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ET(this),e,...n);return oj.set(r,e.sort?e.sort():[e]),xl(r)}:EY().includes(t)?function(...e){return t.apply(ET(this),e),xl(sj.get(this))}:function(...e){return xl(t.apply(ET(this),e))}}function RY(t){return typeof t=="function"?IY(t):(t instanceof IDBTransaction&&AY(t),wY(t,TY())?new Proxy(t,YS):t)}function xl(t){if(t instanceof IDBRequest)return SY(t);if(TT.has(t))return TT.get(t);const e=RY(t);return e!==t&&(TT.set(t,e),xC.set(e,t)),e}const ET=t=>xC.get(t);function PY(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=xl(o);return r&&o.addEventListener("upgradeneeded",u=>{r(xl(o.result),u.oldVersion,u.newVersion,xl(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const NY=["get","getKey","getAll","getAllKeys","count"],MY=["put","add","delete","clear"],ST=new Map;function QD(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ST.get(e))return ST.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=MY.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||NY.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),i&&u.done]))[0]};return ST.set(e,s),s}CY(t=>({...t,get:(e,n,r)=>QD(e,n)||t.get(e,n,r),has:(e,n)=>!!QD(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DY{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(kY(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function kY(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const L0="@firebase/app",JS="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta=new Qx("@firebase/app"),OY="@firebase/app-compat",VY="@firebase/analytics-compat",LY="@firebase/analytics",UY="@firebase/app-check-compat",FY="@firebase/app-check",jY="@firebase/auth",BY="@firebase/auth-compat",qY="@firebase/database",zY="@firebase/data-connect",$Y="@firebase/database-compat",GY="@firebase/functions",HY="@firebase/functions-compat",KY="@firebase/installations",WY="@firebase/installations-compat",YY="@firebase/messaging",JY="@firebase/messaging-compat",QY="@firebase/performance",XY="@firebase/performance-compat",ZY="@firebase/remote-config",eJ="@firebase/remote-config-compat",tJ="@firebase/storage",nJ="@firebase/storage-compat",rJ="@firebase/firestore",iJ="@firebase/ai",sJ="@firebase/firestore-compat",oJ="firebase",aJ="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl="[DEFAULT]",lJ={[L0]:"fire-core",[OY]:"fire-core-compat",[LY]:"fire-analytics",[VY]:"fire-analytics-compat",[FY]:"fire-app-check",[UY]:"fire-app-check-compat",[jY]:"fire-auth",[BY]:"fire-auth-compat",[qY]:"fire-rtdb",[zY]:"fire-data-connect",[$Y]:"fire-rtdb-compat",[GY]:"fire-fn",[HY]:"fire-fn-compat",[KY]:"fire-iid",[WY]:"fire-iid-compat",[YY]:"fire-fcm",[JY]:"fire-fcm-compat",[QY]:"fire-perf",[XY]:"fire-perf-compat",[ZY]:"fire-rc",[eJ]:"fire-rc-compat",[tJ]:"fire-gcs",[nJ]:"fire-gcs-compat",[rJ]:"fire-fst",[sJ]:"fire-fst-compat",[iJ]:"fire-vertex","fire-js":"fire-js",[oJ]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il=new Map,Cf=new Map,If=new Map;function $p(t,e){try{t.container.addComponent(e)}catch(n){ta.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function aj(t,e){t.container.addOrOverwriteComponent(e)}function Rl(t){const e=t.name;if(If.has(e))return ta.debug(`There were multiple attempts to register component ${e}.`),!1;If.set(e,t);for(const n of Il.values())$p(n,t);for(const n of Cf.values())$p(n,t);return!0}function lj(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function uJ(t,e,n=Cl){lj(t,e).clearInstance(n)}function bC(t){return t.options!==void 0}function uj(t){return bC(t)?!1:"authIdToken"in t||"appCheckToken"in t||"releaseOnDeref"in t||"automaticDataCollectionEnabled"in t}function rn(t){return t==null?!1:t.settings!==void 0}function cJ(){If.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dJ={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ri=new Vc("app","Firebase",dJ);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cj=class{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ho("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ri.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XD(t,e){const n=hC(t.split(".")[1]);if(n===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(n).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const i=JSON.parse(n).exp*1e3,s=new Date().getTime();i-s<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class fJ extends cj{constructor(e,n,r,i){const s=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!0,o={name:r,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,o,i);else{const l=e;super(l.options,o,i)}this._serverConfig={automaticDataCollectionEnabled:s,...n},this._serverConfig.authIdToken&&XD(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&XD(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,Ss(L0,JS,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){wC(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Ri.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ql=aJ;function _C(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Cl,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Ri.create("bad-app-name",{appName:String(i)});if(n||(n=gC()),!n)throw Ri.create("no-options");const s=Il.get(i);if(s){if(Al(n,s.options)&&Al(r,s.config))return s;throw Ri.create("duplicate-app",{appName:i})}const o=new rj(i);for(const u of If.values())o.addComponent(u);const l=new cj(n,r,o);return Il.set(i,l),l}function hJ(t,e={}){if(sY()&&!QF())throw Ri.create("invalid-server-app-environment");let n,r=e||{};if(t&&(bC(t)?n=t.options:uj(t)?r=t:n=t),r.automaticDataCollectionEnabled===void 0&&(r.automaticDataCollectionEnabled=!0),n||(n=gC()),!n)throw Ri.create("no-options");const i={...r,...n};i.releaseOnDeref!==void 0&&delete i.releaseOnDeref;const s=f=>[...f].reduce((m,v)=>Math.imul(31,m)+v.charCodeAt(0)|0,0);if(r.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Ri.create("finalization-registry-not-supported",{});const o=""+s(JSON.stringify(i)),l=Cf.get(o);if(l)return l.incRefCount(r.releaseOnDeref),l;const u=new rj(o);for(const f of If.values())u.addComponent(f);const d=new fJ(n,r,o,u);return Cf.set(o,d),d}function mJ(t=Cl){const e=Il.get(t);if(!e&&t===Cl&&gC())return _C();if(!e)throw Ri.create("no-app",{appName:t});return e}function pJ(){return Array.from(Il.values())}async function wC(t){let e=!1;const n=t.name;Il.has(n)?(e=!0,Il.delete(n)):Cf.has(n)&&t.decRefCount()<=0&&(Cf.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function Ss(t,e,n){let r=lJ[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ta.warn(o.join(" "));return}Rl(new ho(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function dj(t,e){if(t!==null&&typeof t!="function")throw Ri.create("invalid-log-argument");_Y(t,e)}function fj(t){bY(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gJ="firebase-heartbeat-database",yJ=1,Gp="firebase-heartbeat-store";let AT=null;function hj(){return AT||(AT=PY(gJ,yJ,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Gp)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ri.create("idb-open",{originalErrorMessage:t.message})})),AT}async function vJ(t){try{const n=(await hj()).transaction(Gp),r=await n.objectStore(Gp).get(mj(t));return await n.done,r}catch(e){if(e instanceof Wr)ta.warn(e.message);else{const n=Ri.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ta.warn(n.message)}}}async function ZD(t,e){try{const r=(await hj()).transaction(Gp,"readwrite");await r.objectStore(Gp).put(e,mj(t)),await r.done}catch(n){if(n instanceof Wr)ta.warn(n.message);else{const r=Ri.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ta.warn(r.message)}}}function mj(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xJ=1024,bJ=30;class _J{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new TJ(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ek();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>bJ){const o=EJ(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ta.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ek(),{heartbeatsToSend:r,unsentEntries:i}=wJ(this._heartbeatsCache.heartbeats),s=O0(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ta.warn(n),""}}}function ek(){return new Date().toISOString().substring(0,10)}function wJ(t,e=xJ){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),tk(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),tk(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class TJ{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zp()?aY().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await vJ(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ZD(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ZD(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function tk(t){return O0(JSON.stringify({version:2,heartbeats:t})).length}function EJ(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SJ(t){Rl(new ho("platform-logger",e=>new DY(e),"PRIVATE")),Rl(new ho("heartbeat",e=>new _J(e),"PRIVATE")),Ss(L0,JS,t),Ss(L0,JS,"esm2020"),Ss("fire-js","")}SJ("");const AJ=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Wr,SDK_VERSION:ql,_DEFAULT_ENTRY_NAME:Cl,_addComponent:$p,_addOrOverwriteComponent:aj,_apps:Il,_clearComponents:cJ,_components:If,_getProvider:lj,_isFirebaseApp:bC,_isFirebaseServerApp:rn,_isFirebaseServerAppSettings:uj,_registerComponent:Rl,_removeServiceInstance:uJ,_serverApps:Cf,deleteApp:wC,getApp:mJ,getApps:pJ,initializeApp:_C,initializeServerApp:hJ,onLog:dj,registerVersion:Ss,setLogLevel:fj},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CJ{constructor(e,n){this._delegate=e,this.firebase=n,$p(e,new ho("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),wC(this._delegate)))}_getService(e,n=Cl){var i;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&((i=r.getComponent())==null?void 0:i.instantiationMode)==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:n})}_removeServiceInstance(e,n=Cl){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){$p(this._delegate,e)}_addOrOverwriteComponent(e){aj(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IJ={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},nk=new Vc("app-compat","Firebase",IJ);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RJ(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:Ss,setLogLevel:fj,onLog:dj,apps:null,SDK_VERSION:ql,INTERNAL:{registerComponent:l,removeApp:r,useAsService:u,modularAPIs:AJ}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(d){delete e[d]}function i(d){if(d=d||Cl,!KD(e,d))throw nk.create("no-app",{appName:d});return e[d]}i.App=t;function s(d,f={}){const m=_C(d,f);if(KD(e,m.name))return e[m.name];const v=new t(m,n);return e[m.name]=v,v}function o(){return Object.keys(e).map(d=>e[d])}function l(d){const f=d.name,m=f.replace("-compat","");if(Rl(d)&&d.type==="PUBLIC"){const v=(_=i())=>{if(typeof _[m]!="function")throw nk.create("invalid-app-argument",{appName:f});return _[m]()};d.serviceProps!==void 0&&V0(v,d.serviceProps),n[m]=v,t.prototype[m]=function(..._){return this._getService.bind(this,f).apply(this,d.multipleInstances?_:[])}}return d.type==="PUBLIC"?n[m]:null}function u(d,f){return f==="serverAuth"?null:f}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pj(){const t=RJ(CJ);t.INTERNAL={...t.INTERNAL,createFirebaseNamespace:pj,extendNamespace:e,createSubscribe:nj,ErrorFactory:Vc,deepExtend:V0};function e(n){V0(t,n)}return t}const PJ=pj();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk=new Qx("@firebase/app-compat"),NJ="@firebase/app-compat",MJ="0.5.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DJ(t){Ss(NJ,MJ,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=mC();if(t.firebase!==void 0){rk.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&rk.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const wt=PJ;DJ();var kJ="firebase",OJ="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wt.registerVersion(kJ,OJ,"app-compat");const qm={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},Ud={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VJ(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function gj(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const LJ=VJ,UJ=gj,yj=new Vc("auth","Firebase",gj());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0=new Qx("@firebase/auth");function FJ(t,...e){U0.logLevel<=ft.WARN&&U0.warn(`Auth (${ql}): ${t}`,...e)}function d0(t,...e){U0.logLevel<=ft.ERROR&&U0.error(`Auth (${ql}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(t,...e){throw EC(t,...e)}function Yn(t,...e){return EC(t,...e)}function TC(t,e,n){const r={...UJ(),[e]:n};return new Vc("auth","Firebase",r).create(e,{appName:t.name})}function cr(t){return TC(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function lh(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ar(t,"argument-error"),TC(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function EC(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return yj.create(t,...e)}function be(t,e,...n){if(!t)throw EC(e,...n)}function eo(t){const e="INTERNAL ASSERTION FAILED: "+t;throw d0(e),new Error(e)}function Is(t,e){t||eo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function SC(){return ik()==="http:"||ik()==="https:"}function ik(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jJ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(SC()||XF()||"connection"in navigator)?navigator.onLine:!0}function BJ(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e,n){this.shortDelay=e,this.longDelay=n,Is(n>e,"Short delay should be less than long delay!"),this.isMobile=iY()||yC()}get(){return jJ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AC(t,e){Is(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;eo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;eo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;eo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qJ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zJ=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],$J=new Rg(3e4,6e4);function _n(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function wn(t,e,n,r,i={}){return xj(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const l=ah({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...s};return oY()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&oh(t.emulatorConfig.host)&&(d.credentials="include"),vj.fetch()(await bj(t,t.config.apiHost,n,l),d)})}async function xj(t,e,n){t._canInitEmulator=!1;const r={...qJ,...e};try{const i=new HJ(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw up(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw up(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw up(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw up(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw TC(t,f,d);Ar(t,f)}}catch(i){if(i instanceof Wr)throw i;Ar(t,"network-request-failed",{message:String(i)})}}async function da(t,e,n,r,i={}){const s=await wn(t,e,n,r,i);return"mfaPendingCredential"in s&&Ar(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function bj(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?AC(t.config,i):`${t.config.apiScheme}://${i}`;return zJ.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function GJ(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class HJ{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Yn(this.auth,"network-request-failed")),$J.get())})}}function up(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Yn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(t){return t!==void 0&&t.getResponse!==void 0}function ok(t){return t!==void 0&&t.enterprise!==void 0}class _j{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return GJ(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KJ(t){return(await wn(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function wj(t,e){return wn(t,"GET","/v2/recaptchaConfig",_n(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WJ(t,e){return wn(t,"POST","/v1/accounts:delete",e)}async function YJ(t,e){return wn(t,"POST","/v1/accounts:update",e)}async function F0(t,e){return wn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bp(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function JJ(t,e=!1){const n=Ke(t),r=await n.getIdToken(e),i=Xx(r);be(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:bp(CT(i.auth_time)),issuedAtTime:bp(CT(i.iat)),expirationTime:bp(CT(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function CT(t){return Number(t)*1e3}function Xx(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return d0("JWT malformed, contained fewer than 3 sections"),null;try{const i=hC(n);return i?JSON.parse(i):(d0("Failed to decode base64 JWT payload"),null)}catch(i){return d0("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function ak(t){const e=Xx(t);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function na(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Wr&&QJ(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function QJ({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XJ{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=bp(this.lastLoginAt),this.creationTime=bp(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kp(t){var m;const e=t.auth,n=await t.getIdToken(),r=await na(t,F0(e,{idToken:n}));be(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(m=i.providerUserInfo)!=null&&m.length?Tj(i.providerUserInfo):[],o=eQ(t.providerData,s),l=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),d=l?u:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new QS(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function ZJ(t){const e=Ke(t);await Kp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function eQ(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Tj(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tQ(t,e){const n=await xj(t,{},async()=>{const r=ah({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await bj(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:r};return t.emulatorConfig&&oh(t.emulatorConfig.host)&&(u.credentials="include"),vj.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function nQ(t,e){return wn(t,"POST","/v2/accounts:revokeToken",_n(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ak(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){be(e.length!==0,"internal-error");const n=ak(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await tQ(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new hf;return r&&(be(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(be(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(be(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new hf,this.toJSON())}_performRefresh(){return eo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nl(t,e){be(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ts{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new XJ(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new QS(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await na(this,this.stsTokenManager.getToken(this.auth,e));return be(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return JJ(this,e)}reload(){return ZJ(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ts({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Kp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(rn(this.auth.app))return Promise.reject(cr(this.auth));const e=await this.getIdToken();return await na(this,WJ(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,d=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:m,emailVerified:v,isAnonymous:_,providerData:T,stsTokenManager:S}=n;be(m&&S,e,"internal-error");const A=hf.fromJSON(this.name,S);be(typeof m=="string",e,"internal-error"),nl(r,e.name),nl(i,e.name),be(typeof v=="boolean",e,"internal-error"),be(typeof _=="boolean",e,"internal-error"),nl(s,e.name),nl(o,e.name),nl(l,e.name),nl(u,e.name),nl(d,e.name),nl(f,e.name);const I=new Ts({uid:m,auth:e,email:i,emailVerified:v,displayName:r,isAnonymous:_,photoURL:o,phoneNumber:s,tenantId:l,stsTokenManager:A,createdAt:d,lastLoginAt:f});return T&&Array.isArray(T)&&(I.providerData=T.map(D=>({...D}))),u&&(I._redirectEventId=u),I}static async _fromIdTokenResponse(e,n,r=!1){const i=new hf;i.updateFromServerResponse(n);const s=new Ts({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Kp(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];be(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Tj(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new hf;l.updateFromIdToken(r);const u=new Ts({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new QS(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk=new Map;function Ii(t){Is(t instanceof Function,"Expected a class definition");let e=lk.get(t);return e?(Is(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,lk.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Ej.type="NONE";const Rf=Ej;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ac(t,e,n){return`firebase:${t}:${e}:${n}`}class mf{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=ac(this.userKey,i.apiKey,s),this.fullPersistenceKey=ac("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await F0(this.auth,{idToken:e}).catch(()=>{});return n?Ts._fromGetAccountInfoResponse(this.auth,n,e):null}return Ts._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new mf(Ii(Rf),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=i[0]||Ii(Rf);const o=ac(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const f=await d._get(o);if(f){let m;if(typeof f=="string"){const v=await F0(e,{idToken:f}).catch(()=>{});if(!v)break;m=await Ts._fromGetAccountInfoResponse(e,v,f)}else m=Ts._fromJSON(e,f);d!==s&&(l=m),s=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new mf(s,e,r):(s=u[0],l&&await s._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==s)try{await d._remove(o)}catch{}})),new mf(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uk(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ij(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Sj(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Rj(e))return"Blackberry";if(Pj(e))return"Webos";if(Aj(e))return"Safari";if((e.includes("chrome/")||Cj(e))&&!e.includes("edge/"))return"Chrome";if(Pg(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Sj(t=mn()){return/firefox\//i.test(t)}function Aj(t=mn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Cj(t=mn()){return/crios\//i.test(t)}function Ij(t=mn()){return/iemobile/i.test(t)}function Pg(t=mn()){return/android/i.test(t)}function Rj(t=mn()){return/blackberry/i.test(t)}function Pj(t=mn()){return/webos/i.test(t)}function Ng(t=mn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function rQ(t=mn()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function iQ(t=mn()){var e;return Ng(t)&&!!((e=window.navigator)!=null&&e.standalone)}function sQ(){return ZF()&&document.documentMode===10}function Nj(t=mn()){return Ng(t)||Pg(t)||Pj(t)||Rj(t)||/windows phone/i.test(t)||Ij(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mj(t,e=[]){let n;switch(t){case"Browser":n=uk(mn());break;case"Worker":n=`${uk(mn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ql}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oQ{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,l)=>{try{const u=e(s);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aQ(t,e={}){return wn(t,"GET","/v2/passwordPolicy",_n(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lQ=6;class uQ{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??lQ,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cQ{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ck(this),this.idTokenSubscription=new ck(this),this.beforeStateQueue=new oQ(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yj,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ii(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await mf.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await F0(this,{idToken:e}),r=await Ts._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(rn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,l=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(r=u.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Kp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=BJ()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(rn(this.app))return Promise.reject(cr(this));const n=e?Ke(e):null;return n&&be(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return rn(this.app)?Promise.reject(cr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return rn(this.app)?Promise.reject(cr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ii(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await aQ(this),n=new uQ(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Vc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await nQ(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ii(e)||this._popupRedirectResolver;be(n,this,"argument-error"),this.redirectPersistenceManager=await mf.create(this,[Ii(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Mj(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(rn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&FJ(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function pn(t){return Ke(t)}class ck{constructor(e){this.auth=e,this.observer=null,this.addObserver=nj(n=>this.observer=n)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dQ(t){Mg=t}function CC(t){return Mg.loadJS(t)}function fQ(){return Mg.recaptchaV2Script}function hQ(){return Mg.recaptchaEnterpriseScript}function mQ(){return Mg.gapiScript}function Dj(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pQ=500,gQ=6e4,Vv=1e12;class yQ{constructor(e){this.auth=e,this.counter=Vv,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new bQ(e,this.auth.name,n||{})),this.counter++,r}reset(e){var r;const n=e||Vv;(r=this._widgets.get(n))==null||r.delete(),this._widgets.delete(n)}getResponse(e){var r;const n=e||Vv;return((r=this._widgets.get(n))==null?void 0:r.getResponse())||""}async execute(e){var r;const n=e||Vv;return(r=this._widgets.get(n))==null||r.execute(),""}}class vQ{constructor(){this.enterprise=new xQ}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class xQ{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class bQ{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;be(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=_Q(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},gQ)},pQ))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function _Q(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const wQ="recaptcha-enterprise",_p="NO_RECAPTCHA";class kj{constructor(e){this.type=wQ,this.auth=pn(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{wj(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new _j(u);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,o(d.siteKey)}}).catch(u=>{l(u)})})}function i(s,o,l){const u=window.grecaptcha;ok(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(d=>{o(d)}).catch(()=>{o(_p)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new vQ().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(l=>{if(!n&&ok(window.grecaptcha))i(l,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=hQ();u.length!==0&&(u+=l),CC(u).then(()=>{i(l,s,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function zm(t,e,n,r=!1,i=!1){const s=new kj(t);let o;if(i)o=_p;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function bl(t,e,n,r,i){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await zm(t,e,n,n==="getOobCode");return r(t,l)}else return r(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await zm(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(l)});else if(i==="PHONE_PROVIDER")if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("PHONE_PROVIDER")){const l=await zm(t,e,n);return r(t,l).catch(async u=>{var d;if(((d=t._getRecaptchaConfig())==null?void 0:d.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const f=await zm(t,e,n,!1,!0);return r(t,f)}return Promise.reject(u)})}else{const l=await zm(t,e,n,!1,!0);return r(t,l)}else return Promise.reject(i+" provider is not supported.")}async function TQ(t){const e=pn(t),n=await wj(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new _j(n);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new kj(e).verify()}function EQ(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ii);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function SQ(t,e,n){const r=pn(t);be(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=Oj(e),{host:o,port:l}=AQ(e),u=l===null?"":`:${l}`,d={url:`${s}//${o}${u}/`},f=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){be(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),be(Al(d,r.config.emulator)&&Al(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,oh(o)?(YF(`${s}//${o}${u}`),JF("Auth",!0)):i||CQ()}function Oj(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function AQ(t){const e=Oj(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:dk(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:dk(o)}}}function dk(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function CQ(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return eo("not implemented")}_getIdTokenResponse(e){return eo("not implemented")}_linkToIdToken(e,n){return eo("not implemented")}_getReauthenticationResolver(e){return eo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vj(t,e){return wn(t,"POST","/v1/accounts:resetPassword",_n(t,e))}async function IQ(t,e){return wn(t,"POST","/v1/accounts:update",e)}async function RQ(t,e){return wn(t,"POST","/v1/accounts:signUp",e)}async function PQ(t,e){return wn(t,"POST","/v1/accounts:update",_n(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NQ(t,e){return da(t,"POST","/v1/accounts:signInWithPassword",_n(t,e))}async function Zx(t,e){return wn(t,"POST","/v1/accounts:sendOobCode",_n(t,e))}async function MQ(t,e){return Zx(t,e)}async function DQ(t,e){return Zx(t,e)}async function kQ(t,e){return Zx(t,e)}async function OQ(t,e){return Zx(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VQ(t,e){return da(t,"POST","/v1/accounts:signInWithEmailLink",_n(t,e))}async function LQ(t,e){return da(t,"POST","/v1/accounts:signInWithEmailLink",_n(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp extends uh{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Wp(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Wp(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bl(e,n,"signInWithPassword",NQ,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return VQ(e,{email:this._email,oobCode:this._password});default:Ar(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bl(e,r,"signUpPassword",RQ,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return LQ(e,{idToken:n,email:this._email,oobCode:this._password});default:Ar(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xo(t,e){return da(t,"POST","/v1/accounts:signInWithIdp",_n(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UQ="http://localhost";class mo extends uh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new mo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ar("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new mo(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Xo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Xo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Xo(e,n)}buildRequest(){const e={requestUri:UQ,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ah(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fk(t,e){return wn(t,"POST","/v1/accounts:sendVerificationCode",_n(t,e))}async function FQ(t,e){return da(t,"POST","/v1/accounts:signInWithPhoneNumber",_n(t,e))}async function jQ(t,e){const n=await da(t,"POST","/v1/accounts:signInWithPhoneNumber",_n(t,e));if(n.temporaryProof)throw up(t,"account-exists-with-different-credential",n);return n}const BQ={USER_NOT_FOUND:"user-not-found"};async function qQ(t,e){const n={...e,operation:"REAUTH"};return da(t,"POST","/v1/accounts:signInWithPhoneNumber",_n(t,n),BQ)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc extends uh{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new lc({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new lc({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return FQ(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return jQ(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return qQ(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new lc({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zQ(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function $Q(t){const e=Xd(lp(t)).link,n=e?Xd(lp(e)).deep_link_id:null,r=Xd(lp(t)).deep_link_id;return(r?Xd(lp(r)).link:null)||r||n||e||t}class eb{constructor(e){const n=Xd(lp(e)),r=n.apiKey??null,i=n.oobCode??null,s=zQ(n.mode??null);be(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=$Q(e);try{return new eb(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(){this.providerId=zl.PROVIDER_ID}static credential(e,n){return Wp._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=eb.parseLink(n);return be(r,"argument-error"),Wp._fromEmailAndCode(e,r.code,r.tenantId)}}zl.PROVIDER_ID="password";zl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";zl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch extends fa{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class pf extends ch{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return be("providerId"in n&&"signInMethod"in n,"argument-error"),mo._fromParams(n)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return be(e.idToken||e.accessToken,"argument-error"),mo._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return pf.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return pf.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:l}=e;if(!r&&!i&&!n&&!s||!l)return null;try{return new pf(l)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js extends ch{constructor(){super("facebook.com")}static credential(e){return mo._fromParams({providerId:Js.PROVIDER_ID,signInMethod:Js.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Js.credentialFromTaggedObject(e)}static credentialFromError(e){return Js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Js.credential(e.oauthAccessToken)}catch{return null}}}Js.FACEBOOK_SIGN_IN_METHOD="facebook.com";Js.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs extends ch{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return mo._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Qs.credentialFromTaggedObject(e)}static credentialFromError(e){return Qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Qs.credential(n,r)}catch{return null}}}Qs.GOOGLE_SIGN_IN_METHOD="google.com";Qs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs extends ch{constructor(){super("github.com")}static credential(e){return mo._fromParams({providerId:Xs.PROVIDER_ID,signInMethod:Xs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xs.credentialFromTaggedObject(e)}static credentialFromError(e){return Xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xs.credential(e.oauthAccessToken)}catch{return null}}}Xs.GITHUB_SIGN_IN_METHOD="github.com";Xs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GQ="http://localhost";class Pf extends uh{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Xo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Xo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Xo(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new Pf(r,s)}static _create(e,n){return new Pf(e,n)}buildRequest(){return{requestUri:GQ,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HQ="saml.";class j0 extends fa{constructor(e){be(e.startsWith(HQ),"argument-error"),super(e)}static credentialFromResult(e){return j0.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return j0.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Pf.fromJSON(e);return be(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Pf._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs extends ch{constructor(){super("twitter.com")}static credential(e,n){return mo._fromParams({providerId:Zs.PROVIDER_ID,signInMethod:Zs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Zs.credentialFromTaggedObject(e)}static credentialFromError(e){return Zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Zs.credential(n,r)}catch{return null}}}Zs.TWITTER_SIGN_IN_METHOD="twitter.com";Zs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lj(t,e){return da(t,"POST","/v1/accounts:signUp",_n(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Ts._fromIdTokenResponse(e,r,i),o=hk(r);return new as({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=hk(r);return new as({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function hk(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KQ(t){var i;if(rn(t.app))return Promise.reject(cr(t));const e=pn(t);if(await e._initializationPromise,(i=e.currentUser)!=null&&i.isAnonymous)return new as({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await Lj(e,{returnSecureToken:!0}),r=await as._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0 extends Wr{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,B0.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new B0(e,n,r,i)}}function Uj(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?B0._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fj(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WQ(t,e){const n=Ke(t);await tb(!0,n,e);const{providerUserInfo:r}=await YJ(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=Fj(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function IC(t,e,n=!1){const r=await na(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return as._forOperation(t,"link",r)}async function tb(t,e,n){await Kp(e);const r=Fj(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";be(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jj(t,e,n=!1){const{auth:r}=t;if(rn(r.app))return Promise.reject(cr(r));const i="reauthenticate";try{const s=await na(t,Uj(r,i,e,t),n);be(s.idToken,r,"internal-error");const o=Xx(s.idToken);be(o,r,"internal-error");const{sub:l}=o;return be(t.uid===l,r,"user-mismatch"),as._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ar(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bj(t,e,n=!1){if(rn(t.app))return Promise.reject(cr(t));const r="signIn",i=await Uj(t,r,e),s=await as._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function nb(t,e){return Bj(pn(t),e)}async function qj(t,e){const n=Ke(t);return await tb(!1,n,e.providerId),IC(n,e)}async function zj(t,e){return jj(Ke(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YQ(t,e){return da(t,"POST","/v1/accounts:signInWithCustomToken",_n(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JQ(t,e){if(rn(t.app))return Promise.reject(cr(t));const n=pn(t),r=await YQ(n,{token:e,returnSecureToken:!0}),i=await as._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?RC._fromServerResponse(e,n):"totpInfo"in n?PC._fromServerResponse(e,n):Ar(e,"internal-error")}}class RC extends Dg{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new RC(n)}}class PC extends Dg{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new PC(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rb(t,e,n){var r;be(((r=n.url)==null?void 0:r.length)>0,t,"invalid-continue-uri"),be(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),be(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(be(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(be(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NC(t){const e=pn(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function QQ(t,e,n){const r=pn(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&rb(r,i,n),await bl(r,i,"getOobCode",DQ,"EMAIL_PASSWORD_PROVIDER")}async function XQ(t,e,n){await Vj(Ke(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&NC(t),r})}async function ZQ(t,e){await PQ(Ke(t),{oobCode:e})}async function $j(t,e){const n=Ke(t),r=await Vj(n,{oobCode:e}),i=r.requestType;switch(be(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":be(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":be(r.mfaInfo,n,"internal-error");default:be(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Dg._fromServerResponse(pn(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function eX(t,e){const{data:n}=await $j(Ke(t),e);return n.email}async function tX(t,e,n){if(rn(t.app))return Promise.reject(cr(t));const r=pn(t),o=await bl(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Lj,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&NC(t),u}),l=await as._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function nX(t,e,n){return rn(t.app)?Promise.reject(cr(t)):nb(Ke(t),zl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&NC(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rX(t,e,n){const r=pn(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(o,l){be(l.handleCodeInApp,r,"argument-error"),l&&rb(r,o,l)}s(i,n),await bl(r,i,"getOobCode",kQ,"EMAIL_PASSWORD_PROVIDER")}function iX(t,e){const n=eb.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function sX(t,e,n){if(rn(t.app))return Promise.reject(cr(t));const r=Ke(t),i=zl.credentialWithLink(e,n||Hp());return be(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),nb(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oX(t,e){return wn(t,"POST","/v1/accounts:createAuthUri",_n(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aX(t,e){const n=SC()?Hp():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await oX(Ke(t),r);return i||[]}async function lX(t,e){const n=Ke(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&rb(n.auth,i,e);const{email:s}=await MQ(n.auth,i);s!==t.email&&await t.reload()}async function uX(t,e,n){const r=Ke(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&rb(r.auth,s,n);const{email:o}=await OQ(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cX(t,e){return wn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dX(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ke(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await na(r,cX(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function fX(t,e){const n=Ke(t);return rn(n.auth.app)?Promise.reject(cr(n.auth)):Gj(n,e,null)}function hX(t,e){return Gj(Ke(t),null,e)}async function Gj(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await na(t,IQ(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mX(t){var i,s;if(!t)return null;const{providerId:e}=t,n=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},r=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(t!=null&&t.idToken)){const o=(s=(i=Xx(t.idToken))==null?void 0:i.firebase)==null?void 0:s.sign_in_provider;if(o){const l=o!=="anonymous"&&o!=="custom"?o:null;return new gf(r,l)}}if(!e)return null;switch(e){case"facebook.com":return new pX(r,n);case"github.com":return new gX(r,n);case"google.com":return new yX(r,n);case"twitter.com":return new vX(r,n,t.screenName||null);case"custom":case"anonymous":return new gf(r,null);default:return new gf(r,e,n)}}class gf{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class Hj extends gf{constructor(e,n,r,i){super(e,n,r),this.username=i}}class pX extends gf{constructor(e,n){super(e,"facebook.com",n)}}class gX extends Hj{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class yX extends gf{constructor(e,n){super(e,"google.com",n)}}class vX extends Hj{constructor(e,n,r){super(e,"twitter.com",n,r)}}function xX(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:mX(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new Ju("enroll",e,n)}static _fromMfaPendingCredential(e){return new Ju("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if((n=e.multiFactorSession)!=null&&n.pendingCredential)return Ju._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if((r=e.multiFactorSession)!=null&&r.idToken)return Ju._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=pn(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(l=>Dg._fromServerResponse(r,l));be(i.mfaPendingCredential,r,"internal-error");const o=Ju._fromMfaPendingCredential(i.mfaPendingCredential);return new MC(o,s,async l=>{const u=await l._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const d={...i,idToken:u.idToken,refreshToken:u.refreshToken};switch(n.operationType){case"signIn":const f=await as._fromIdTokenResponse(r,n.operationType,d);return await r._updateCurrentUser(f.user),f;case"reauthenticate":return be(n.user,r,"internal-error"),as._forOperation(n.user,n.operationType,d);default:Ar(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function bX(t,e){var i;const n=Ke(t),r=e;return be(e.customData.operationType,n,"argument-error"),be((i=r.customData._serverResponse)==null?void 0:i.mfaPendingCredential,n,"argument-error"),MC._fromError(n,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(t,e){return wn(t,"POST","/v2/accounts/mfaEnrollment:start",_n(t,e))}function _X(t,e){return wn(t,"POST","/v2/accounts/mfaEnrollment:finalize",_n(t,e))}function wX(t,e){return wn(t,"POST","/v2/accounts/mfaEnrollment:withdraw",_n(t,e))}class DC{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>Dg._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new DC(e)}async getSession(){return Ju._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,i=await this.getSession(),s=await na(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await na(this.user,wX(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const IT=new WeakMap;function TX(t){const e=Ke(t);return IT.has(e)||IT.set(e,DC._fromUser(e)),IT.get(e)}const q0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(q0,"1"),this.storage.removeItem(q0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EX=1e3,SX=10;class Wj extends Kj{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Nj(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);sQ()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,SX):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},EX)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Wj.type="LOCAL";const kC=Wj;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj extends Kj{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Yj.type="SESSION";const vc=Yj;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AX(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new ib(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async d=>d(n.origin,s)),u=await AX(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ib.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CX{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,u)=>{const d=kg("",20);i.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(m){const v=m;if(v.data.eventId===d)switch(v.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(v.data.response);break;default:clearTimeout(f),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(){return window}function IX(t){Vn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OC(){return typeof Vn().WorkerGlobalScope<"u"&&typeof Vn().importScripts=="function"}async function RX(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function PX(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function NX(){return OC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jj="firebaseLocalStorageDb",MX=1,z0="firebaseLocalStorage",Qj="fbase_key";class Og{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function sb(t,e){return t.transaction([z0],e?"readwrite":"readonly").objectStore(z0)}function DX(){const t=indexedDB.deleteDatabase(Jj);return new Og(t).toPromise()}function XS(){const t=indexedDB.open(Jj,MX);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(z0,{keyPath:Qj})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(z0)?e(r):(r.close(),await DX(),e(await XS()))})})}async function pk(t,e,n){const r=sb(t,!0).put({[Qj]:e,value:n});return new Og(r).toPromise()}async function kX(t,e){const n=sb(t,!1).get(e),r=await new Og(n).toPromise();return r===void 0?null:r.value}function gk(t,e){const n=sb(t,!0).delete(e);return new Og(n).toPromise()}const OX=800,VX=3;class Xj{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await XS(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>VX)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return OC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ib._getInstance(NX()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await RX(),!this.activeServiceWorker)return;this.sender=new CX(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||PX()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await XS();return await pk(e,q0,"1"),await gk(e,q0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>pk(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>kX(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>gk(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=sb(i,!1).getAll();return new Og(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),OX)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Xj.type="LOCAL";const Yp=Xj;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yk(t,e){return wn(t,"POST","/v2/accounts/mfaSignIn:start",_n(t,e))}function LX(t,e){return wn(t,"POST","/v2/accounts/mfaSignIn:finalize",_n(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT=Dj("rcb"),UX=new Rg(3e4,6e4);class FX{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=Vn().grecaptcha)!=null&&e.render)}load(e,n=""){return be(jX(n),e,"argument-error"),this.shouldResolveImmediately(n)&&sk(Vn().grecaptcha)?Promise.resolve(Vn().grecaptcha):new Promise((r,i)=>{const s=Vn().setTimeout(()=>{i(Yn(e,"network-request-failed"))},UX.get());Vn()[RT]=()=>{Vn().clearTimeout(s),delete Vn()[RT];const l=Vn().grecaptcha;if(!l||!sk(l)){i(Yn(e,"internal-error"));return}const u=l.render;l.render=(d,f)=>{const m=u(d,f);return this.counter++,m},this.hostLanguage=n,r(l)};const o=`${fQ()}?${ah({onload:RT,render:"explicit",hl:n})}`;CC(o).catch(()=>{clearTimeout(s),i(Yn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!((n=Vn().grecaptcha)!=null&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function jX(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class BX{async load(e){return new yQ(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp="recaptcha",qX={theme:"light",type:"image"};let zX=class{constructor(e,n,r={...qX}){this.parameters=r,this.type=wp,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=pn(e),this.isInvisible=this.parameters.size==="invisible",be(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;be(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new BX:new FX,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){be(!this.parameters.sitekey,this.auth,"argument-error"),be(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),be(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=Vn()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){be(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){be(SC()&&!OC(),this.auth,"internal-error"),await $X(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await KJ(this.auth);be(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return be(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function $X(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=lc._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function GX(t,e,n){if(rn(t.app))return Promise.reject(cr(t));const r=pn(t),i=await ob(r,e,Ke(n));return new VC(i,s=>nb(r,s))}async function HX(t,e,n){const r=Ke(t);await tb(!1,r,"phone");const i=await ob(r.auth,e,Ke(n));return new VC(i,s=>qj(r,s))}async function KX(t,e,n){const r=Ke(t);if(rn(r.auth.app))return Promise.reject(cr(r.auth));const i=await ob(r.auth,e,Ke(n));return new VC(i,s=>zj(r,s))}async function ob(t,e,n){var r;if(!t._getRecaptchaConfig())try{await TQ(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const s=i.session;if("phoneNumber"in i){be(s.type==="enroll",t,"internal-error");const o={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await bl(t,o,"mfaSmsEnrollment",async(f,m)=>{if(m.phoneEnrollmentInfo.captchaResponse===_p){be((n==null?void 0:n.type)===wp,f,"argument-error");const v=await PT(f,m,n);return mk(f,v)}return mk(f,m)},"PHONE_PROVIDER").catch(f=>Promise.reject(f))).phoneSessionInfo.sessionInfo}else{be(s.type==="signin",t,"internal-error");const o=((r=i.multiFactorHint)==null?void 0:r.uid)||i.multiFactorUid;be(o,t,"missing-multi-factor-info");const l={mfaPendingCredential:s.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await bl(t,l,"mfaSmsSignIn",async(m,v)=>{if(v.phoneSignInInfo.captchaResponse===_p){be((n==null?void 0:n.type)===wp,m,"argument-error");const _=await PT(m,v,n);return yk(m,_)}return yk(m,v)},"PHONE_PROVIDER").catch(m=>Promise.reject(m))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await bl(t,s,"sendVerificationCode",async(d,f)=>{if(f.captchaResponse===_p){be((n==null?void 0:n.type)===wp,d,"argument-error");const m=await PT(d,f,n);return fk(d,m)}return fk(d,f)},"PHONE_PROVIDER").catch(d=>Promise.reject(d))).sessionInfo}}finally{n==null||n._reset()}}async function WX(t,e){const n=Ke(t);if(rn(n.auth.app))return Promise.reject(cr(n.auth));await IC(n,e)}async function PT(t,e,n){be(n.type===wp,t,"argument-error");const r=await n.verify();be(typeof r=="string",t,"argument-error");const i={...e};if("phoneEnrollmentInfo"in i){const s=i.phoneEnrollmentInfo.phoneNumber,o=i.phoneEnrollmentInfo.captchaResponse,l=i.phoneEnrollmentInfo.clientType,u=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:r,captchaResponse:o,clientType:l,recaptchaVersion:u}}),i}else if("phoneSignInInfo"in i){const s=i.phoneSignInInfo.captchaResponse,o=i.phoneSignInInfo.clientType,l=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:s,clientType:o,recaptchaVersion:l}}),i}else return Object.assign(i,{recaptchaToken:r}),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xc=class f0{constructor(e){this.providerId=f0.PROVIDER_ID,this.auth=pn(e)}verifyPhoneNumber(e,n){return ob(this.auth,e,Ke(n))}static credential(e,n){return lc._fromVerification(e,n)}static credentialFromResult(e){const n=e;return f0.credentialFromTaggedObject(n)}static credentialFromError(e){return f0.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?lc._fromTokenResponse(n,r):null}};xc.PROVIDER_ID="phone";xc.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lc(t,e){return e?Ii(e):(be(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC extends uh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Xo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Xo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function YX(t){return Bj(t.auth,new LC(t),t.bypassAuthState)}function JX(t){const{auth:e,user:n}=t;return be(n,e,"internal-error"),jj(n,new LC(t),t.bypassAuthState)}async function QX(t){const{auth:e,user:n}=t;return be(n,e,"internal-error"),IC(n,new LC(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return YX;case"linkViaPopup":case"linkViaRedirect":return QX;case"reauthViaPopup":case"reauthViaRedirect":return JX;default:Ar(this.auth,"internal-error")}}resolve(e){Is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XX=new Rg(2e3,1e4);async function ZX(t,e,n){if(rn(t.app))return Promise.reject(Yn(t,"operation-not-supported-in-this-environment"));const r=pn(t);lh(t,e,fa);const i=Lc(r,n);return new Wo(r,"signInViaPopup",e,i).executeNotNull()}async function eZ(t,e,n){const r=Ke(t);if(rn(r.auth.app))return Promise.reject(Yn(r.auth,"operation-not-supported-in-this-environment"));lh(r.auth,e,fa);const i=Lc(r.auth,n);return new Wo(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function tZ(t,e,n){const r=Ke(t);lh(r.auth,e,fa);const i=Lc(r.auth,n);return new Wo(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Wo extends Zj{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Wo.currentPopupAction&&Wo.currentPopupAction.cancel(),Wo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){Is(this.filter.length===1,"Popup operations only handle one event");const e=kg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Yn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Yn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,XX.get())};e()}}Wo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nZ="pendingRedirect",Tp=new Map;class rZ extends Zj{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Tp.get(this.auth._key());if(!e){try{const r=await iZ(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Tp.set(this.auth._key(),e)}return this.bypassAuthState||Tp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function iZ(t,e){const n=tB(e),r=eB(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function UC(t,e){return eB(t)._set(tB(e),"true")}function sZ(){Tp.clear()}function FC(t,e){Tp.set(t._key(),e)}function eB(t){return Ii(t._redirectPersistence)}function tB(t){return ac(nZ,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oZ(t,e,n){return aZ(t,e,n)}async function aZ(t,e,n){if(rn(t.app))return Promise.reject(cr(t));const r=pn(t);lh(t,e,fa),await r._initializationPromise;const i=Lc(r,n);return await UC(i,r),i._openRedirect(r,e,"signInViaRedirect")}function lZ(t,e,n){return uZ(t,e,n)}async function uZ(t,e,n){const r=Ke(t);if(lh(r.auth,e,fa),rn(r.auth.app))return Promise.reject(cr(r.auth));await r.auth._initializationPromise;const i=Lc(r.auth,n);await UC(i,r.auth);const s=await nB(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function cZ(t,e,n){return dZ(t,e,n)}async function dZ(t,e,n){const r=Ke(t);lh(r.auth,e,fa),await r.auth._initializationPromise;const i=Lc(r.auth,n);await tb(!1,r,e.providerId),await UC(i,r.auth);const s=await nB(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function fZ(t,e){return await pn(t)._initializationPromise,ab(t,e,!1)}async function ab(t,e,n=!1){if(rn(t.app))return Promise.reject(cr(t));const r=pn(t),i=Lc(r,e),o=await new rZ(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function nB(t){const e=kg(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hZ=600*1e3;class rB{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!mZ(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!iB(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Yn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=hZ&&this.cachedEventUids.clear(),this.cachedEventUids.has(vk(e))}saveEventToCache(e){this.cachedEventUids.add(vk(e)),this.lastProcessedEventTime=Date.now()}}function vk(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function iB({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function mZ(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iB(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sB(t,e={}){return wn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pZ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gZ=/^https?/;async function yZ(t){if(t.config.emulator)return;const{authorizedDomains:e}=await sB(t);for(const n of e)try{if(vZ(n))return}catch{}Ar(t,"unauthorized-domain")}function vZ(t){const e=Hp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!gZ.test(n))return!1;if(pZ.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xZ=new Rg(3e4,6e4);function xk(){const t=Vn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function bZ(t){return new Promise((e,n)=>{var i,s,o;function r(){xk(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{xk(),n(Yn(t,"network-request-failed"))},timeout:xZ.get()})}if((s=(i=Vn().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=Vn().gapi)!=null&&o.load)r();else{const l=Dj("iframefcb");return Vn()[l]=()=>{gapi.load?r():n(Yn(t,"network-request-failed"))},CC(`${mQ()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw h0=null,e})}let h0=null;function _Z(t){return h0=h0||bZ(t),h0}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wZ=new Rg(5e3,15e3),TZ="__/auth/iframe",EZ="emulator/auth/iframe",SZ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},AZ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function CZ(t){const e=t.config;be(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?AC(e,EZ):`https://${t.config.authDomain}/${TZ}`,r={apiKey:e.apiKey,appName:t.name,v:ql},i=AZ.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ah(r).slice(1)}`}async function IZ(t){const e=await _Z(t),n=Vn().gapi;return be(n,t,"internal-error"),e.open({where:document.body,url:CZ(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:SZ,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Yn(t,"network-request-failed"),l=Vn().setTimeout(()=>{s(o)},wZ.get());function u(){Vn().clearTimeout(l),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RZ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},PZ=500,NZ=600,MZ="_blank",DZ="http://localhost";class bk{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function kZ(t,e,n,r=PZ,i=NZ){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u={...RZ,width:r.toString(),height:i.toString(),top:s,left:o},d=mn().toLowerCase();n&&(l=Cj(d)?MZ:n),Sj(d)&&(e=e||DZ,u.scrollbars="yes");const f=Object.entries(u).reduce((v,[_,T])=>`${v}${_}=${T},`,"");if(iQ(d)&&l!=="_self")return OZ(e||"",l),new bk(null);const m=window.open(e||"",l,f);be(m,t,"popup-blocked");try{m.focus()}catch{}return new bk(m)}function OZ(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VZ="__/auth/handler",LZ="emulator/auth/handler",UZ=encodeURIComponent("fac");async function ZS(t,e,n,r,i,s){be(t.config.authDomain,t,"auth-domain-config-required"),be(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ql,eventId:i};if(e instanceof fa){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",dY(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries(s||{}))o[f]=m}if(e instanceof ch){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const u=await t._getAppCheckToken(),d=u?`#${UZ}=${encodeURIComponent(u)}`:"";return`${FZ(t)}?${ah(l).slice(1)}${d}`}function FZ({config:t}){return t.emulator?AC(t,LZ):`https://${t.authDomain}/${VZ}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="webStorageSupport";class jZ{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vc,this._completeRedirectFn=ab,this._overrideRedirectResult=FC}async _openPopup(e,n,r,i){var o;Is((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await ZS(e,n,r,Hp(),i);return kZ(e,s,kg())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await ZS(e,n,r,Hp(),i);return IX(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Is(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await IZ(e),r=new rB(e);return n.register("authEvent",i=>(be(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(NT,{type:NT},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[NT];s!==void 0&&n(!!s),Ar(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=yZ(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Nj()||Aj()||Ng()}}const BZ=jZ;class qZ{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return eo("unexpected MultiFactorSessionType")}}}class jC extends qZ{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new jC(e)}_finalizeEnroll(e,n,r){return _X(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return LX(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class oB{constructor(){}static assertion(e){return jC._fromCredential(e)}}oB.FACTOR_ID="phone";var _k="@firebase/auth",wk="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zZ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $Z(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function GZ(t){Rl(new ho("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;be(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Mj(t)},d=new cQ(r,i,s,u);return EQ(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Rl(new ho("auth-internal",e=>{const n=pn(e.getProvider("auth").getImmediate());return(r=>new zZ(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ss(_k,wk,$Z(t)),Ss(_k,wk,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HZ=300;ZW("authIdTokenMaxAge");function KZ(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}dQ({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Yn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",KZ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});GZ("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bc(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WZ=2e3;async function YZ(t,e,n){const{BuildInfo:r}=bc();Is(e.sessionId,"AuthEvent did not contain a session ID");const i=await eee(e.sessionId),s={};return Ng()?s.ibi=r.packageName:Pg()?s.apn=r.packageName:Ar(t,"operation-not-supported-in-this-environment"),r.displayName&&(s.appDisplayName=r.displayName),s.sessionId=i,ZS(t,n,e.type,void 0,e.eventId??void 0,s)}async function JZ(t){const{BuildInfo:e}=bc(),n={};Ng()?n.iosBundleId=e.packageName:Pg()?n.androidPackageName=e.packageName:Ar(t,"operation-not-supported-in-this-environment"),await sB(t,n)}function QZ(t){const{cordova:e}=bc();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,rQ()?"_blank":"_system","location=yes"),n(i)})})}async function XZ(t,e,n){const{cordova:r}=bc();let i=()=>{};try{await new Promise((s,o)=>{let l=null;function u(){var v;s();const m=(v=r.plugins.browsertab)==null?void 0:v.close;typeof m=="function"&&m(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function d(){l||(l=window.setTimeout(()=>{o(Yn(t,"redirect-cancelled-by-user"))},WZ))}function f(){(document==null?void 0:document.visibilityState)==="visible"&&d()}e.addPassiveListener(u),document.addEventListener("resume",d,!1),Pg()&&document.addEventListener("visibilitychange",f,!1),i=()=>{e.removePassiveListener(u),document.removeEventListener("resume",d,!1),document.removeEventListener("visibilitychange",f,!1),l&&window.clearTimeout(l)}})}finally{i()}}function ZZ(t){var n,r,i,s,o,l,u,d,f,m;const e=bc();be(typeof((n=e==null?void 0:e.universalLinks)==null?void 0:n.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),be(typeof((r=e==null?void 0:e.BuildInfo)==null?void 0:r.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),be(typeof((o=(s=(i=e==null?void 0:e.cordova)==null?void 0:i.plugins)==null?void 0:s.browsertab)==null?void 0:o.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),be(typeof((d=(u=(l=e==null?void 0:e.cordova)==null?void 0:l.plugins)==null?void 0:u.browsertab)==null?void 0:d.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),be(typeof((m=(f=e==null?void 0:e.cordova)==null?void 0:f.InAppBrowser)==null?void 0:m.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function eee(t){const e=tee(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function tee(t){if(Is(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nee=20;class ree extends rB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function iee(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:aee(),postBody:null,tenantId:t.tenantId,error:Yn(t,"no-auth-event")}}function see(t,e){return eA()._set(tA(t),e)}async function Tk(t){const e=await eA()._get(tA(t));return e&&await eA()._remove(tA(t)),e}function oee(t,e){var r,i;const n=uee(e);if(n.includes("/__/auth/callback")){const s=m0(n),o=s.firebaseError?lee(decodeURIComponent(s.firebaseError)):null,l=(i=(r=o==null?void 0:o.code)==null?void 0:r.split("auth/"))==null?void 0:i[1],u=l?Yn(l):null;return u?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:n,postBody:null}}return null}function aee(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<nee;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function eA(){return Ii(kC)}function tA(t){return ac("authEvent",t.config.apiKey,t.name)}function lee(t){try{return JSON.parse(t)}catch{return null}}function uee(t){const e=m0(t),n=e.link?decodeURIComponent(e.link):void 0,r=m0(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return m0(i).link||i||r||n||t}function m0(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return Xd(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cee=500;class dee{constructor(){this._redirectPersistence=vc,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ab,this._overrideRedirectResult=FC}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new ree(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){Ar(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){ZZ(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),sZ(),await this._originValidation(e);const o=iee(e,r,i);await see(e,o);const l=await YZ(e,o,n),u=await QZ(l);return XZ(e,s,u)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=JZ(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=bc(),o=setTimeout(async()=>{await Tk(e),n.onEvent(Ek())},cee),l=async f=>{clearTimeout(o);const m=await Tk(e);let v=null;m&&(f!=null&&f.url)&&(v=oee(m,f.url)),n.onEvent(v||Ek())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,l);const u=i,d=`${s.packageName.toLowerCase()}://`;bc().handleOpenURL=async f=>{if(f.toLowerCase().startsWith(d)&&l({url:f}),typeof u=="function")try{u(f)}catch(m){console.error(m)}}}}const fee=dee;function Ek(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Yn("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hee(t,e){pn(t)._logFramework(e)}var mee="@firebase/auth-compat",pee="0.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gee=1e3;function Ep(){var t;return((t=self==null?void 0:self.location)==null?void 0:t.protocol)||null}function yee(){return Ep()==="http:"||Ep()==="https:"}function aB(t=mn()){return!!((Ep()==="file:"||Ep()==="ionic:"||Ep()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function vee(){return yC()||Jx()}function xee(){return ZF()&&(document==null?void 0:document.documentMode)===11}function bee(t=mn()){return/Edge\/\d+/.test(t)}function _ee(t=mn()){return xee()||bee(t)}function lB(){try{const t=self.localStorage,e=kg();if(t)return t.setItem(e,"1"),t.removeItem(e),_ee()?zp():!0}catch{return BC()&&zp()}return!1}function BC(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function MT(){return(yee()||XF()||aB())&&!vee()&&lB()&&!BC()}function uB(){return aB()&&typeof document<"u"}async function wee(){return uB()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},gee);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function Tee(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei={LOCAL:"local",NONE:"none",SESSION:"session"},$m=be,cB="persistence";function Eee(t,e){if($m(Object.values(Ei).includes(e),t,"invalid-persistence-type"),yC()){$m(e!==Ei.SESSION,t,"unsupported-persistence-type");return}if(Jx()){$m(e===Ei.NONE,t,"unsupported-persistence-type");return}if(BC()){$m(e===Ei.NONE||e===Ei.LOCAL&&zp(),t,"unsupported-persistence-type");return}$m(e===Ei.NONE||lB(),t,"unsupported-persistence-type")}async function nA(t){await t._initializationPromise;const e=dB(),n=ac(cB,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistenceType())}function See(t,e){const n=dB();if(!n)return[];const r=ac(cB,t,e);switch(n.getItem(r)){case Ei.NONE:return[Rf];case Ei.LOCAL:return[Yp,vc];case Ei.SESSION:return[vc];default:return[]}}function dB(){var t;try{return((t=Tee())==null?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aee=be;class gl{constructor(){this.browserResolver=Ii(BZ),this.cordovaResolver=Ii(fee),this.underlyingResolver=null,this._redirectPersistence=vc,this._completeRedirectFn=ab,this._overrideRedirectResult=FC}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return uB()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Aee(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await wee();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fB(t){return t.unwrap()}function Cee(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iee(t){return hB(t)}function Ree(t,e){var r;const n=(r=e.customData)==null?void 0:r._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new Pee(t,bX(t,e))}else if(n){const i=hB(e),s=e;i&&(s.credential=i,s.tenantId=n.tenantId||void 0,s.email=n.email||void 0,s.phoneNumber=n.phoneNumber||void 0)}}function hB(t){const{_tokenResponse:e}=t instanceof Wr?t.customData:t;if(!e)return null;if(!(t instanceof Wr)&&"temporaryProof"in e&&"phoneNumber"in e)return xc.credentialFromResult(t);const n=e.providerId;if(!n||n===qm.PASSWORD)return null;let r;switch(n){case qm.GOOGLE:r=Qs;break;case qm.FACEBOOK:r=Js;break;case qm.GITHUB:r=Xs;break;case qm.TWITTER:r=Zs;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:l,nonce:u}=e;return!s&&!o&&!i&&!l?null:l?n.startsWith("saml.")?Pf._create(n,l):mo._fromParams({providerId:n,signInMethod:n,pendingToken:l,idToken:i,accessToken:s}):new pf(n).credential({idToken:i,accessToken:s,rawNonce:u})}return t instanceof Wr?r.credentialFromError(t):r.credentialFromResult(t)}function ri(t,e){return e.catch(n=>{throw n instanceof Wr&&Ree(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:Iee(n),additionalUserInfo:xX(n),user:lb.getOrCreate(i)}})}async function rA(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>ri(t,n.confirm(r))}}class Pee{constructor(e,n){this.resolver=n,this.auth=Cee(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return ri(fB(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lb=class cp{constructor(e){this._delegate=e,this.multiFactor=TX(e)}static getOrCreate(e){return cp.USER_MAP.has(e)||cp.USER_MAP.set(e,new cp(e)),cp.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return ri(this.auth,qj(this._delegate,e))}async linkWithPhoneNumber(e,n){return rA(this.auth,HX(this._delegate,e,n))}async linkWithPopup(e){return ri(this.auth,tZ(this._delegate,e,gl))}async linkWithRedirect(e){return await nA(pn(this.auth)),cZ(this._delegate,e,gl)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return ri(this.auth,zj(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return rA(this.auth,KX(this._delegate,e,n))}reauthenticateWithPopup(e){return ri(this.auth,eZ(this._delegate,e,gl))}async reauthenticateWithRedirect(e){return await nA(pn(this.auth)),lZ(this._delegate,e,gl)}sendEmailVerification(e){return lX(this._delegate,e)}async unlink(e){return await WQ(this._delegate,e),this}updateEmail(e){return fX(this._delegate,e)}updatePassword(e){return hX(this._delegate,e)}updatePhoneNumber(e){return WX(this._delegate,e)}updateProfile(e){return dX(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return uX(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};lb.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm=be;class iA{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;Gm(r,"invalid-api-key",{appName:e.name}),Gm(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?gl:void 0;this._delegate=n.initialize({options:{persistence:Nee(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(LJ),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?lb.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){SQ(this._delegate,e,n)}applyActionCode(e){return ZQ(this._delegate,e)}checkActionCode(e){return $j(this._delegate,e)}confirmPasswordReset(e,n){return XQ(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return ri(this._delegate,tX(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return aX(this._delegate,e)}isSignInWithEmailLink(e){return iX(this._delegate,e)}async getRedirectResult(){Gm(MT(),this._delegate,"operation-not-supported-in-this-environment");const e=await fZ(this._delegate,gl);return e?ri(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){hee(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:s,complete:o}=Sk(e,n,r);return this._delegate.onAuthStateChanged(i,s,o)}onIdTokenChanged(e,n,r){const{next:i,error:s,complete:o}=Sk(e,n,r);return this._delegate.onIdTokenChanged(i,s,o)}sendSignInLinkToEmail(e,n){return rX(this._delegate,e,n)}sendPasswordResetEmail(e,n){return QQ(this._delegate,e,n||void 0)}async setPersistence(e){Eee(this._delegate,e);let n;switch(e){case Ei.SESSION:n=vc;break;case Ei.LOCAL:n=await Ii(Yp)._isAvailable()?Yp:kC;break;case Ei.NONE:n=Rf;break;default:return Ar("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return ri(this._delegate,KQ(this._delegate))}signInWithCredential(e){return ri(this._delegate,nb(this._delegate,e))}signInWithCustomToken(e){return ri(this._delegate,JQ(this._delegate,e))}signInWithEmailAndPassword(e,n){return ri(this._delegate,nX(this._delegate,e,n))}signInWithEmailLink(e,n){return ri(this._delegate,sX(this._delegate,e,n))}signInWithPhoneNumber(e,n){return rA(this._delegate,GX(this._delegate,e,n))}async signInWithPopup(e){return Gm(MT(),this._delegate,"operation-not-supported-in-this-environment"),ri(this._delegate,ZX(this._delegate,e,gl))}async signInWithRedirect(e){return Gm(MT(),this._delegate,"operation-not-supported-in-this-environment"),await nA(this._delegate),oZ(this._delegate,e,gl)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return eX(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}iA.Persistence=Ei;function Sk(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:o=>i(o&&lb.getOrCreate(o)),error:e,complete:n}}function Nee(t,e){const n=See(t,e);if(typeof self<"u"&&!n.includes(Yp)&&n.push(Yp),typeof window<"u")for(const r of[kC,vc])n.includes(r)||n.push(r);return n.includes(Rf)||n.push(Rf),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{static credential(e,n){return xc.credential(e,n)}constructor(){this.providerId="phone",this._delegate=new xc(fB(wt.auth()))}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}qC.PHONE_SIGN_IN_METHOD=xc.PHONE_SIGN_IN_METHOD;qC.PROVIDER_ID=xc.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mee=be;class Dee{constructor(e,n,r=wt.app()){var i;Mee((i=r.options)==null?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new zX(r.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kee="auth-compat";function Oee(t){t.INTERNAL.registerComponent(new ho(kee,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new iA(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ud.EMAIL_SIGNIN,PASSWORD_RESET:Ud.PASSWORD_RESET,RECOVER_EMAIL:Ud.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Ud.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Ud.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Ud.VERIFY_EMAIL}},EmailAuthProvider:zl,FacebookAuthProvider:Js,GithubAuthProvider:Xs,GoogleAuthProvider:Qs,OAuthProvider:pf,SAMLAuthProvider:j0,PhoneAuthProvider:qC,PhoneMultiFactorGenerator:oB,RecaptchaVerifier:Dee,TwitterAuthProvider:Zs,Auth:iA,AuthCredential:uh,Error:Wr}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(mee,pee)}Oee(wt);async function Vee(){try{const t=new wt.auth.GoogleAuthProvider,e=await wt.auth().signInWithPopup(t);if(e.user){const n=await e.user.getIdToken();return{user:e.user,idToken:n}}else throw new Error("No user returned from Google sign-in")}catch(t){throw console.error("[nativeGoogleLogin.web] signIn error:",t),t}}var ht=(t=>(t.Founder="Founder",t.Developer="Developer",t.Investor="Investor",t))(ht||{}),Se=(t=>(t.LANDING="LANDING",t.AUTH="AUTH",t.ONBOARDING="ONBOARDING",t.DASHBOARD="DASHBOARD",t.ANALYTICS="ANALYTICS",t.MESSAGES="MESSAGES",t.PEOPLE="PEOPLE",t.IDEAS="IDEAS",t.REQUESTS="REQUESTS",t.NEGOTIATIONS="NEGOTIATIONS",t))(Se||{});function Sp(t){let e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function sA(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Lee(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function Ak(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Ck(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Uee(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function Fee(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function DT(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function jee(t,e){let n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(n*n+r*r+i*i)}function Bee(t,e){let n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function Ik(t){let e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function qee(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function zee(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function oA(t,e){let n=e[0],r=e[1],i=e[2],s=n*n+r*r+i*i;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function mB(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Rk(t,e,n){let r=e[0],i=e[1],s=e[2],o=n[0],l=n[1],u=n[2];return t[0]=i*u-s*l,t[1]=s*o-r*u,t[2]=r*l-i*o,t}function $ee(t,e,n,r){let i=e[0],s=e[1],o=e[2];return t[0]=i+r*(n[0]-i),t[1]=s+r*(n[1]-s),t[2]=o+r*(n[2]-o),t}function Gee(t,e,n,r,i){const s=Math.exp(-r*i);let o=e[0],l=e[1],u=e[2];return t[0]=n[0]+(o-n[0])*s,t[1]=n[1]+(l-n[1])*s,t[2]=n[2]+(u-n[2])*s,t}function Hee(t,e,n){let r=e[0],i=e[1],s=e[2],o=n[3]*r+n[7]*i+n[11]*s+n[15];return o=o||1,t[0]=(n[0]*r+n[4]*i+n[8]*s+n[12])/o,t[1]=(n[1]*r+n[5]*i+n[9]*s+n[13])/o,t[2]=(n[2]*r+n[6]*i+n[10]*s+n[14])/o,t}function Kee(t,e,n){let r=e[0],i=e[1],s=e[2],o=n[3]*r+n[7]*i+n[11]*s+n[15];return o=o||1,t[0]=(n[0]*r+n[4]*i+n[8]*s)/o,t[1]=(n[1]*r+n[5]*i+n[9]*s)/o,t[2]=(n[2]*r+n[6]*i+n[10]*s)/o,t}function Wee(t,e,n){let r=e[0],i=e[1],s=e[2];return t[0]=r*n[0]+i*n[3]+s*n[6],t[1]=r*n[1]+i*n[4]+s*n[7],t[2]=r*n[2]+i*n[5]+s*n[8],t}function Yee(t,e,n){let r=e[0],i=e[1],s=e[2],o=n[0],l=n[1],u=n[2],d=n[3],f=l*s-u*i,m=u*r-o*s,v=o*i-l*r,_=l*v-u*m,T=u*f-o*v,S=o*m-l*f,A=d*2;return f*=A,m*=A,v*=A,_*=2,T*=2,S*=2,t[0]=r+f+_,t[1]=i+m+T,t[2]=s+v+S,t}const Jee=(function(){const t=[0,0,0],e=[0,0,0];return function(n,r){sA(t,n),sA(e,r),oA(t,t),oA(e,e);let i=mB(t,e);return i>1?0:i<-1?Math.PI:Math.acos(i)}})();function Qee(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}class Es extends Array{constructor(e=0,n=e,r=e){return super(e,n,r),this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this[0]=e}set y(e){this[1]=e}set z(e){this[2]=e}set(e,n=e,r=e){return e.length?this.copy(e):(Lee(this,e,n,r),this)}copy(e){return sA(this,e),this}add(e,n){return n?Ak(this,e,n):Ak(this,this,e),this}sub(e,n){return n?Ck(this,e,n):Ck(this,this,e),this}multiply(e){return e.length?Uee(this,this,e):DT(this,this,e),this}divide(e){return e.length?Fee(this,this,e):DT(this,this,1/e),this}inverse(e=this){return zee(this,e),this}len(){return Sp(this)}distance(e){return e?jee(this,e):Sp(this)}squaredLen(){return Ik(this)}squaredDistance(e){return e?Bee(this,e):Ik(this)}negate(e=this){return qee(this,e),this}cross(e,n){return n?Rk(this,e,n):Rk(this,this,e),this}scale(e){return DT(this,this,e),this}normalize(){return oA(this,this),this}dot(e){return mB(this,e)}equals(e){return Qee(this,e)}applyMatrix3(e){return Wee(this,this,e),this}applyMatrix4(e){return Hee(this,this,e),this}scaleRotateMatrix4(e){return Kee(this,this,e),this}applyQuaternion(e){return Yee(this,this,e),this}angle(e){return Jee(this,e)}lerp(e,n){return $ee(this,this,e,n),this}smoothLerp(e,n,r){return Gee(this,this,e,n,r),this}clone(){return new Es(this[0],this[1],this[2])}fromArray(e,n=0){return this[0]=e[n],this[1]=e[n+1],this[2]=e[n+2],this}toArray(e=[],n=0){return e[n]=this[0],e[n+1]=this[1],e[n+2]=this[2],e}transformDirection(e){const n=this[0],r=this[1],i=this[2];return this[0]=e[0]*n+e[4]*r+e[8]*i,this[1]=e[1]*n+e[5]*r+e[9]*i,this[2]=e[2]*n+e[6]*r+e[10]*i,this.normalize()}}const Pk=new Es;let Xee=1,Zee=1,Nk=!1;class ete{constructor(e,n={}){e.canvas||console.error("gl not passed as first argument to Geometry"),this.gl=e,this.attributes=n,this.id=Xee++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state;for(let r in n)this.addAttribute(r,n[r])}addAttribute(e,n){if(this.attributes[e]=n,n.id=Zee++,n.size=n.size||1,n.type=n.type||(n.data.constructor===Float32Array?this.gl.FLOAT:n.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),n.target=e==="index"?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,n.normalized=n.normalized||!1,n.stride=n.stride||0,n.offset=n.offset||0,n.count=n.count||(n.stride?n.data.byteLength/n.stride:n.data.length/n.size),n.divisor=n.instanced||0,n.needsUpdate=!1,n.usage=n.usage||this.gl.STATIC_DRAW,n.buffer||this.updateAttribute(n),n.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==n.count*n.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.instancedCount=Math.min(this.instancedCount,n.count*n.divisor);this.instancedCount=n.count*n.divisor}else e==="index"?this.drawRange.count=n.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,n.count))}updateAttribute(e){const n=!e.buffer;n&&(e.buffer=this.gl.createBuffer()),this.glState.boundBuffer!==e.buffer&&(this.gl.bindBuffer(e.target,e.buffer),this.glState.boundBuffer=e.buffer),n?this.gl.bufferData(e.target,e.data,e.usage):this.gl.bufferSubData(e.target,0,e.data),e.needsUpdate=!1}setIndex(e){this.addAttribute("index",e)}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}setInstancedCount(e){this.instancedCount=e}createVAO(e){this.VAOs[e.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.bindAttributes(e)}bindAttributes(e){e.attributeLocations.forEach((n,{name:r,type:i})=>{if(!this.attributes[r]){console.warn(`active attribute ${r} not being supplied`);return}const s=this.attributes[r];this.gl.bindBuffer(s.target,s.buffer),this.glState.boundBuffer=s.buffer;let o=1;i===35674&&(o=2),i===35675&&(o=3),i===35676&&(o=4);const l=s.size/o,u=o===1?0:o*o*4,d=o===1?0:o*4;for(let f=0;f<o;f++)this.gl.vertexAttribPointer(n+f,l,s.type,s.normalized,s.stride+u,s.offset+f*d),this.gl.enableVertexAttribArray(n+f),this.gl.renderer.vertexAttribDivisor(n+f,s.divisor)}),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}draw({program:e,mode:n=this.gl.TRIANGLES}){var i;this.gl.renderer.currentGeometry!==`${this.id}_${e.attributeOrder}`&&(this.VAOs[e.attributeOrder]||this.createVAO(e),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.gl.renderer.currentGeometry=`${this.id}_${e.attributeOrder}`),e.attributeLocations.forEach((s,{name:o})=>{const l=this.attributes[o];l.needsUpdate&&this.updateAttribute(l)});let r=2;((i=this.attributes.index)==null?void 0:i.type)===this.gl.UNSIGNED_INT&&(r=4),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(n,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*r,this.instancedCount):this.gl.renderer.drawArraysInstanced(n,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(n,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*r):this.gl.drawArrays(n,this.drawRange.start,this.drawRange.count)}getPosition(){const e=this.attributes.position;if(e.data)return e;if(!Nk)return console.warn("No position buffer data found to compute bounds"),Nk=!0}computeBoundingBox(e){e||(e=this.getPosition());const n=e.data,r=e.size;this.bounds||(this.bounds={min:new Es,max:new Es,center:new Es,scale:new Es,radius:1/0});const i=this.bounds.min,s=this.bounds.max,o=this.bounds.center,l=this.bounds.scale;i.set(1/0),s.set(-1/0);for(let u=0,d=n.length;u<d;u+=r){const f=n[u],m=n[u+1],v=n[u+2];i.x=Math.min(f,i.x),i.y=Math.min(m,i.y),i.z=Math.min(v,i.z),s.x=Math.max(f,s.x),s.y=Math.max(m,s.y),s.z=Math.max(v,s.z)}l.sub(s,i),o.add(i,s).divide(2)}computeBoundingSphere(e){e||(e=this.getPosition());const n=e.data,r=e.size;this.bounds||this.computeBoundingBox(e);let i=0;for(let s=0,o=n.length;s<o;s+=r)Pk.fromArray(n,s),i=Math.max(i,this.bounds.center.squaredDistance(Pk));this.bounds.radius=Math.sqrt(i)}remove(){for(let e in this.VAOs)this.gl.renderer.deleteVertexArray(this.VAOs[e]),delete this.VAOs[e];for(let e in this.attributes)this.gl.deleteBuffer(this.attributes[e].buffer),delete this.attributes[e]}}let tte=1;const Mk={};class nte{constructor(e,{vertex:n,fragment:r,uniforms:i={},transparent:s=!1,cullFace:o=e.BACK,frontFace:l=e.CCW,depthTest:u=!0,depthWrite:d=!0,depthFunc:f=e.LEQUAL}={}){e.canvas||console.error("gl not passed as first argument to Program"),this.gl=e,this.uniforms=i,this.id=tte++,n||console.warn("vertex shader not supplied"),r||console.warn("fragment shader not supplied"),this.transparent=s,this.cullFace=o,this.frontFace=l,this.depthTest=u,this.depthWrite=d,this.depthFunc=f,this.blendFunc={},this.blendEquation={},this.stencilFunc={},this.stencilOp={},this.transparent&&!this.blendFunc.src&&(this.gl.renderer.premultipliedAlpha?this.setBlendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.setBlendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)),this.vertexShader=e.createShader(e.VERTEX_SHADER),this.fragmentShader=e.createShader(e.FRAGMENT_SHADER),this.program=e.createProgram(),e.attachShader(this.program,this.vertexShader),e.attachShader(this.program,this.fragmentShader),this.setShaders({vertex:n,fragment:r})}setShaders({vertex:e,fragment:n}){if(e&&(this.gl.shaderSource(this.vertexShader,e),this.gl.compileShader(this.vertexShader),this.gl.getShaderInfoLog(this.vertexShader)!==""&&console.warn(`${this.gl.getShaderInfoLog(this.vertexShader)}
Vertex Shader
${Dk(e)}`)),n&&(this.gl.shaderSource(this.fragmentShader,n),this.gl.compileShader(this.fragmentShader),this.gl.getShaderInfoLog(this.fragmentShader)!==""&&console.warn(`${this.gl.getShaderInfoLog(this.fragmentShader)}
Fragment Shader
${Dk(n)}`)),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))return console.warn(this.gl.getProgramInfoLog(this.program));this.uniformLocations=new Map;let r=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_UNIFORMS);for(let o=0;o<r;o++){let l=this.gl.getActiveUniform(this.program,o);this.uniformLocations.set(l,this.gl.getUniformLocation(this.program,l.name));const u=l.name.match(/(\w+)/g);l.uniformName=u[0],l.nameComponents=u.slice(1)}this.attributeLocations=new Map;const i=[],s=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES);for(let o=0;o<s;o++){const l=this.gl.getActiveAttrib(this.program,o),u=this.gl.getAttribLocation(this.program,l.name);u!==-1&&(i[u]=l.name,this.attributeLocations.set(l,u))}this.attributeOrder=i.join("")}setBlendFunc(e,n,r,i){this.blendFunc.src=e,this.blendFunc.dst=n,this.blendFunc.srcAlpha=r,this.blendFunc.dstAlpha=i,e&&(this.transparent=!0)}setBlendEquation(e,n){this.blendEquation.modeRGB=e,this.blendEquation.modeAlpha=n}setStencilFunc(e,n,r){this.stencilRef=n,this.stencilFunc.func=e,this.stencilFunc.ref=n,this.stencilFunc.mask=r}setStencilOp(e,n,r){this.stencilOp.stencilFail=e,this.stencilOp.depthFail=n,this.stencilOp.depthPass=r}applyState(){this.depthTest?this.gl.renderer.enable(this.gl.DEPTH_TEST):this.gl.renderer.disable(this.gl.DEPTH_TEST),this.cullFace?this.gl.renderer.enable(this.gl.CULL_FACE):this.gl.renderer.disable(this.gl.CULL_FACE),this.blendFunc.src?this.gl.renderer.enable(this.gl.BLEND):this.gl.renderer.disable(this.gl.BLEND),this.cullFace&&this.gl.renderer.setCullFace(this.cullFace),this.gl.renderer.setFrontFace(this.frontFace),this.gl.renderer.setDepthMask(this.depthWrite),this.gl.renderer.setDepthFunc(this.depthFunc),this.blendFunc.src&&this.gl.renderer.setBlendFunc(this.blendFunc.src,this.blendFunc.dst,this.blendFunc.srcAlpha,this.blendFunc.dstAlpha),this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB,this.blendEquation.modeAlpha),this.stencilFunc.func||this.stencilOp.stencilFail?this.gl.renderer.enable(this.gl.STENCIL_TEST):this.gl.renderer.disable(this.gl.STENCIL_TEST),this.gl.renderer.setStencilFunc(this.stencilFunc.func,this.stencilFunc.ref,this.stencilFunc.mask),this.gl.renderer.setStencilOp(this.stencilOp.stencilFail,this.stencilOp.depthFail,this.stencilOp.depthPass)}use({flipFaces:e=!1}={}){let n=-1;this.gl.renderer.state.currentProgram===this.id||(this.gl.useProgram(this.program),this.gl.renderer.state.currentProgram=this.id),this.uniformLocations.forEach((i,s)=>{let o=this.uniforms[s.uniformName];for(const l of s.nameComponents){if(!o)break;if(l in o)o=o[l];else{if(Array.isArray(o.value))break;o=void 0;break}}if(!o)return kk(`Active uniform ${s.name} has not been supplied`);if(o&&o.value===void 0)return kk(`${s.name} uniform is missing a value parameter`);if(o.value.texture)return n=n+1,o.value.update(n),kT(this.gl,s.type,i,n);if(o.value.length&&o.value[0].texture){const l=[];return o.value.forEach(u=>{n=n+1,u.update(n),l.push(n)}),kT(this.gl,s.type,i,l)}kT(this.gl,s.type,i,o.value)}),this.applyState(),e&&this.gl.renderer.setFrontFace(this.frontFace===this.gl.CCW?this.gl.CW:this.gl.CCW)}remove(){this.gl.deleteProgram(this.program)}}function kT(t,e,n,r){r=r.length?rte(r):r;const i=t.renderer.state.uniformLocations.get(n);if(r.length)if(i===void 0||i.length!==r.length)t.renderer.state.uniformLocations.set(n,r.slice(0));else{if(ite(i,r))return;i.set?i.set(r):ste(i,r),t.renderer.state.uniformLocations.set(n,i)}else{if(i===r)return;t.renderer.state.uniformLocations.set(n,r)}switch(e){case 5126:return r.length?t.uniform1fv(n,r):t.uniform1f(n,r);case 35664:return t.uniform2fv(n,r);case 35665:return t.uniform3fv(n,r);case 35666:return t.uniform4fv(n,r);case 35670:case 5124:case 35678:case 36306:case 35680:case 36289:return r.length?t.uniform1iv(n,r):t.uniform1i(n,r);case 35671:case 35667:return t.uniform2iv(n,r);case 35672:case 35668:return t.uniform3iv(n,r);case 35673:case 35669:return t.uniform4iv(n,r);case 35674:return t.uniformMatrix2fv(n,!1,r);case 35675:return t.uniformMatrix3fv(n,!1,r);case 35676:return t.uniformMatrix4fv(n,!1,r)}}function Dk(t){let e=t.split(`
`);for(let n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join(`
`)}function rte(t){const e=t.length,n=t[0].length;if(n===void 0)return t;const r=e*n;let i=Mk[r];i||(Mk[r]=i=new Float32Array(r));for(let s=0;s<e;s++)i.set(t[s],s*n);return i}function ite(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function ste(t,e){for(let n=0,r=t.length;n<r;n++)t[n]=e[n]}let OT=0;function kk(t){OT>100||(console.warn(t),OT++,OT>100&&console.warn("More than 100 program warnings - stopping logs."))}const VT=new Es;let ote=1;class ate{constructor({canvas:e=document.createElement("canvas"),width:n=300,height:r=150,dpr:i=1,alpha:s=!1,depth:o=!0,stencil:l=!1,antialias:u=!1,premultipliedAlpha:d=!1,preserveDrawingBuffer:f=!1,powerPreference:m="default",autoClear:v=!0,webgl:_=2}={}){const T={alpha:s,depth:o,stencil:l,antialias:u,premultipliedAlpha:d,preserveDrawingBuffer:f,powerPreference:m};this.dpr=i,this.alpha=s,this.color=!0,this.depth=o,this.stencil=l,this.premultipliedAlpha=d,this.autoClear=v,this.id=ote++,_===2&&(this.gl=e.getContext("webgl2",T)),this.isWebgl2=!!this.gl,this.gl||(this.gl=e.getContext("webgl",T)),this.gl||console.error("unable to create webgl context"),this.gl.renderer=this,this.setSize(n,r),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=!1,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LEQUAL,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={x:0,y:0,width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.state.currentProgram=null,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture"),this.getExtension("WEBGL_draw_buffers")),this.getExtension("WEBGL_compressed_texture_astc"),this.getExtension("EXT_texture_compression_bptc"),this.getExtension("WEBGL_compressed_texture_s3tc"),this.getExtension("WEBGL_compressed_texture_etc1"),this.getExtension("WEBGL_compressed_texture_pvrtc"),this.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES"),this.drawBuffers=this.getExtension("WEBGL_draw_buffers","drawBuffers","drawBuffersWEBGL"),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.parameters.maxAnisotropy=this.getExtension("EXT_texture_filter_anisotropic")?this.gl.getParameter(this.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}setSize(e,n){this.width=e,this.height=n,this.gl.canvas.width=e*this.dpr,this.gl.canvas.height=n*this.dpr,this.gl.canvas.style&&Object.assign(this.gl.canvas.style,{width:e+"px",height:n+"px"})}setViewport(e,n,r=0,i=0){this.state.viewport.width===e&&this.state.viewport.height===n||(this.state.viewport.width=e,this.state.viewport.height=n,this.state.viewport.x=r,this.state.viewport.y=i,this.gl.viewport(r,i,e,n))}setScissor(e,n,r=0,i=0){this.gl.scissor(r,i,e,n)}enable(e){this.state[e]!==!0&&(this.gl.enable(e),this.state[e]=!0)}disable(e){this.state[e]!==!1&&(this.gl.disable(e),this.state[e]=!1)}setBlendFunc(e,n,r,i){this.state.blendFunc.src===e&&this.state.blendFunc.dst===n&&this.state.blendFunc.srcAlpha===r&&this.state.blendFunc.dstAlpha===i||(this.state.blendFunc.src=e,this.state.blendFunc.dst=n,this.state.blendFunc.srcAlpha=r,this.state.blendFunc.dstAlpha=i,r!==void 0?this.gl.blendFuncSeparate(e,n,r,i):this.gl.blendFunc(e,n))}setBlendEquation(e,n){e=e||this.gl.FUNC_ADD,!(this.state.blendEquation.modeRGB===e&&this.state.blendEquation.modeAlpha===n)&&(this.state.blendEquation.modeRGB=e,this.state.blendEquation.modeAlpha=n,n!==void 0?this.gl.blendEquationSeparate(e,n):this.gl.blendEquation(e))}setCullFace(e){this.state.cullFace!==e&&(this.state.cullFace=e,this.gl.cullFace(e))}setFrontFace(e){this.state.frontFace!==e&&(this.state.frontFace=e,this.gl.frontFace(e))}setDepthMask(e){this.state.depthMask!==e&&(this.state.depthMask=e,this.gl.depthMask(e))}setDepthFunc(e){this.state.depthFunc!==e&&(this.state.depthFunc=e,this.gl.depthFunc(e))}setStencilMask(e){this.state.stencilMask!==e&&(this.state.stencilMask=e,this.gl.stencilMask(e))}setStencilFunc(e,n,r){this.state.stencilFunc===e&&this.state.stencilRef===n&&this.state.stencilFuncMask===r||(this.state.stencilFunc=e||this.gl.ALWAYS,this.state.stencilRef=n||0,this.state.stencilFuncMask=r||0,this.gl.stencilFunc(e||this.gl.ALWAYS,n||0,r||0))}setStencilOp(e,n,r){this.state.stencilFail===e&&this.state.stencilDepthFail===n&&this.state.stencilDepthPass===r||(this.state.stencilFail=e,this.state.stencilDepthFail=n,this.state.stencilDepthPass=r,this.gl.stencilOp(e,n,r))}activeTexture(e){this.state.activeTextureUnit!==e&&(this.state.activeTextureUnit=e,this.gl.activeTexture(this.gl.TEXTURE0+e))}bindFramebuffer({target:e=this.gl.FRAMEBUFFER,buffer:n=null}={}){this.state.framebuffer!==n&&(this.state.framebuffer=n,this.gl.bindFramebuffer(e,n))}getExtension(e,n,r){return n&&this.gl[n]?this.gl[n].bind(this.gl):(this.extensions[e]||(this.extensions[e]=this.gl.getExtension(e)),n?this.extensions[e]?this.extensions[e][r].bind(this.extensions[e]):null:this.extensions[e])}sortOpaque(e,n){return e.renderOrder!==n.renderOrder?e.renderOrder-n.renderOrder:e.program.id!==n.program.id?e.program.id-n.program.id:e.zDepth!==n.zDepth?e.zDepth-n.zDepth:n.id-e.id}sortTransparent(e,n){return e.renderOrder!==n.renderOrder?e.renderOrder-n.renderOrder:e.zDepth!==n.zDepth?n.zDepth-e.zDepth:n.id-e.id}sortUI(e,n){return e.renderOrder!==n.renderOrder?e.renderOrder-n.renderOrder:e.program.id!==n.program.id?e.program.id-n.program.id:n.id-e.id}getRenderList({scene:e,camera:n,frustumCull:r,sort:i}){let s=[];if(n&&r&&n.updateFrustum(),e.traverse(o=>{if(!o.visible)return!0;o.draw&&(r&&o.frustumCulled&&n&&!n.frustumIntersectsMesh(o)||s.push(o))}),i){const o=[],l=[],u=[];s.forEach(d=>{d.program.transparent?d.program.depthTest?l.push(d):u.push(d):o.push(d),d.zDepth=0,!(d.renderOrder!==0||!d.program.depthTest||!n)&&(d.worldMatrix.getTranslation(VT),VT.applyMatrix4(n.projectionViewMatrix),d.zDepth=VT.z)}),o.sort(this.sortOpaque),l.sort(this.sortTransparent),u.sort(this.sortUI),s=o.concat(l,u)}return s}render({scene:e,camera:n,target:r=null,update:i=!0,sort:s=!0,frustumCull:o=!0,clear:l}){r===null?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(r),this.setViewport(r.width,r.height)),(l||this.autoClear&&l!==!1)&&(this.depth&&(!r||r.depth)&&(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),(this.stencil||!r||r.stencil)&&(this.enable(this.gl.STENCIL_TEST),this.setStencilMask(255)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),i&&e.updateMatrixWorld(),n&&n.updateMatrixWorld(),this.getRenderList({scene:e,camera:n,frustumCull:o,sort:s}).forEach(d=>{d.draw({camera:n})})}}function lte(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function ute(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function cte(t,e){let n=e[0],r=e[1],i=e[2],s=e[3],o=n*n+r*r+i*i+s*s;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=r*o,t[2]=i*o,t[3]=s*o,t}function dte(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function fte(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function hte(t,e,n){n=n*.5;let r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function Ok(t,e,n){let r=e[0],i=e[1],s=e[2],o=e[3],l=n[0],u=n[1],d=n[2],f=n[3];return t[0]=r*f+o*l+i*d-s*u,t[1]=i*f+o*u+s*l-r*d,t[2]=s*f+o*d+r*u-i*l,t[3]=o*f-r*l-i*u-s*d,t}function mte(t,e,n){n*=.5;let r=e[0],i=e[1],s=e[2],o=e[3],l=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*l,t[1]=i*u+s*l,t[2]=s*u-i*l,t[3]=o*u-r*l,t}function pte(t,e,n){n*=.5;let r=e[0],i=e[1],s=e[2],o=e[3],l=Math.sin(n),u=Math.cos(n);return t[0]=r*u-s*l,t[1]=i*u+o*l,t[2]=s*u+r*l,t[3]=o*u-i*l,t}function gte(t,e,n){n*=.5;let r=e[0],i=e[1],s=e[2],o=e[3],l=Math.sin(n),u=Math.cos(n);return t[0]=r*u+i*l,t[1]=i*u-r*l,t[2]=s*u+o*l,t[3]=o*u-s*l,t}function yte(t,e,n,r){let i=e[0],s=e[1],o=e[2],l=e[3],u=n[0],d=n[1],f=n[2],m=n[3],v,_,T,S,A;return _=i*u+s*d+o*f+l*m,_<0&&(_=-_,u=-u,d=-d,f=-f,m=-m),1-_>1e-6?(v=Math.acos(_),T=Math.sin(v),S=Math.sin((1-r)*v)/T,A=Math.sin(r*v)/T):(S=1-r,A=r),t[0]=S*i+A*u,t[1]=S*s+A*d,t[2]=S*o+A*f,t[3]=S*l+A*m,t}function vte(t,e){let n=e[0],r=e[1],i=e[2],s=e[3],o=n*n+r*r+i*i+s*s,l=o?1/o:0;return t[0]=-n*l,t[1]=-r*l,t[2]=-i*l,t[3]=s*l,t}function xte(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function bte(t,e){let n=e[0]+e[4]+e[8],r;if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{let i=0;e[4]>e[0]&&(i=1),e[8]>e[i*3+i]&&(i=2);let s=(i+1)%3,o=(i+2)%3;r=Math.sqrt(e[i*3+i]-e[s*3+s]-e[o*3+o]+1),t[i]=.5*r,r=.5/r,t[3]=(e[s*3+o]-e[o*3+s])*r,t[s]=(e[s*3+i]+e[i*3+s])*r,t[o]=(e[o*3+i]+e[i*3+o])*r}return t}function _te(t,e,n="YXZ"){let r=Math.sin(e[0]*.5),i=Math.cos(e[0]*.5),s=Math.sin(e[1]*.5),o=Math.cos(e[1]*.5),l=Math.sin(e[2]*.5),u=Math.cos(e[2]*.5);return n==="XYZ"?(t[0]=r*o*u+i*s*l,t[1]=i*s*u-r*o*l,t[2]=i*o*l+r*s*u,t[3]=i*o*u-r*s*l):n==="YXZ"?(t[0]=r*o*u+i*s*l,t[1]=i*s*u-r*o*l,t[2]=i*o*l-r*s*u,t[3]=i*o*u+r*s*l):n==="ZXY"?(t[0]=r*o*u-i*s*l,t[1]=i*s*u+r*o*l,t[2]=i*o*l+r*s*u,t[3]=i*o*u-r*s*l):n==="ZYX"?(t[0]=r*o*u-i*s*l,t[1]=i*s*u+r*o*l,t[2]=i*o*l-r*s*u,t[3]=i*o*u+r*s*l):n==="YZX"?(t[0]=r*o*u+i*s*l,t[1]=i*s*u+r*o*l,t[2]=i*o*l-r*s*u,t[3]=i*o*u-r*s*l):n==="XZY"&&(t[0]=r*o*u-i*s*l,t[1]=i*s*u-r*o*l,t[2]=i*o*l+r*s*u,t[3]=i*o*u+r*s*l),t}const wte=lte,Tte=ute,Ete=dte,Ste=cte;class Ate extends Array{constructor(e=0,n=0,r=0,i=1){super(e,n,r,i),this.onChange=()=>{},this._target=this;const s=["0","1","2","3"];return new Proxy(this,{set(o,l){const u=Reflect.set(...arguments);return u&&s.includes(l)&&o.onChange(),u}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}get w(){return this[3]}set x(e){this._target[0]=e,this.onChange()}set y(e){this._target[1]=e,this.onChange()}set z(e){this._target[2]=e,this.onChange()}set w(e){this._target[3]=e,this.onChange()}identity(){return fte(this._target),this.onChange(),this}set(e,n,r,i){return e.length?this.copy(e):(Tte(this._target,e,n,r,i),this.onChange(),this)}rotateX(e){return mte(this._target,this._target,e),this.onChange(),this}rotateY(e){return pte(this._target,this._target,e),this.onChange(),this}rotateZ(e){return gte(this._target,this._target,e),this.onChange(),this}inverse(e=this._target){return vte(this._target,e),this.onChange(),this}conjugate(e=this._target){return xte(this._target,e),this.onChange(),this}copy(e){return wte(this._target,e),this.onChange(),this}normalize(e=this._target){return Ste(this._target,e),this.onChange(),this}multiply(e,n){return n?Ok(this._target,e,n):Ok(this._target,this._target,e),this.onChange(),this}dot(e){return Ete(this._target,e)}fromMatrix3(e){return bte(this._target,e),this.onChange(),this}fromEuler(e,n){return _te(this._target,e,e.order),n||this.onChange(),this}fromAxisAngle(e,n){return hte(this._target,e,n),this.onChange(),this}slerp(e,n){return yte(this._target,this._target,e,n),this.onChange(),this}fromArray(e,n=0){return this._target[0]=e[n],this._target[1]=e[n+1],this._target[2]=e[n+2],this._target[3]=e[n+3],this.onChange(),this}toArray(e=[],n=0){return e[n]=this[0],e[n+1]=this[1],e[n+2]=this[2],e[n+3]=this[3],e}}const Cte=1e-6;function Ite(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Rte(t,e,n,r,i,s,o,l,u,d,f,m,v,_,T,S,A){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=s,t[5]=o,t[6]=l,t[7]=u,t[8]=d,t[9]=f,t[10]=m,t[11]=v,t[12]=_,t[13]=T,t[14]=S,t[15]=A,t}function Pte(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Nte(t,e){let n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],l=e[5],u=e[6],d=e[7],f=e[8],m=e[9],v=e[10],_=e[11],T=e[12],S=e[13],A=e[14],I=e[15],D=n*l-r*o,N=n*u-i*o,U=n*d-s*o,O=r*u-i*l,q=r*d-s*l,M=i*d-s*u,R=f*S-m*T,k=f*A-v*T,F=f*I-_*T,j=m*A-v*S,G=m*I-_*S,$=v*I-_*A,de=D*$-N*G+U*j+O*F-q*k+M*R;return de?(de=1/de,t[0]=(l*$-u*G+d*j)*de,t[1]=(i*G-r*$-s*j)*de,t[2]=(S*M-A*q+I*O)*de,t[3]=(v*q-m*M-_*O)*de,t[4]=(u*F-o*$-d*k)*de,t[5]=(n*$-i*F+s*k)*de,t[6]=(A*U-T*M-I*N)*de,t[7]=(f*M-v*U+_*N)*de,t[8]=(o*G-l*F+d*R)*de,t[9]=(r*F-n*G-s*R)*de,t[10]=(T*q-S*U+I*D)*de,t[11]=(m*U-f*q-_*D)*de,t[12]=(l*k-o*j-u*R)*de,t[13]=(n*j-r*k+i*R)*de,t[14]=(S*N-T*O-A*D)*de,t[15]=(f*O-m*N+v*D)*de,t):null}function pB(t){let e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],o=t[5],l=t[6],u=t[7],d=t[8],f=t[9],m=t[10],v=t[11],_=t[12],T=t[13],S=t[14],A=t[15],I=e*o-n*s,D=e*l-r*s,N=e*u-i*s,U=n*l-r*o,O=n*u-i*o,q=r*u-i*l,M=d*T-f*_,R=d*S-m*_,k=d*A-v*_,F=f*S-m*T,j=f*A-v*T,G=m*A-v*S;return I*G-D*j+N*F+U*k-O*R+q*M}function Vk(t,e,n){let r=e[0],i=e[1],s=e[2],o=e[3],l=e[4],u=e[5],d=e[6],f=e[7],m=e[8],v=e[9],_=e[10],T=e[11],S=e[12],A=e[13],I=e[14],D=e[15],N=n[0],U=n[1],O=n[2],q=n[3];return t[0]=N*r+U*l+O*m+q*S,t[1]=N*i+U*u+O*v+q*A,t[2]=N*s+U*d+O*_+q*I,t[3]=N*o+U*f+O*T+q*D,N=n[4],U=n[5],O=n[6],q=n[7],t[4]=N*r+U*l+O*m+q*S,t[5]=N*i+U*u+O*v+q*A,t[6]=N*s+U*d+O*_+q*I,t[7]=N*o+U*f+O*T+q*D,N=n[8],U=n[9],O=n[10],q=n[11],t[8]=N*r+U*l+O*m+q*S,t[9]=N*i+U*u+O*v+q*A,t[10]=N*s+U*d+O*_+q*I,t[11]=N*o+U*f+O*T+q*D,N=n[12],U=n[13],O=n[14],q=n[15],t[12]=N*r+U*l+O*m+q*S,t[13]=N*i+U*u+O*v+q*A,t[14]=N*s+U*d+O*_+q*I,t[15]=N*o+U*f+O*T+q*D,t}function Mte(t,e,n){let r=n[0],i=n[1],s=n[2],o,l,u,d,f,m,v,_,T,S,A,I;return e===t?(t[12]=e[0]*r+e[4]*i+e[8]*s+e[12],t[13]=e[1]*r+e[5]*i+e[9]*s+e[13],t[14]=e[2]*r+e[6]*i+e[10]*s+e[14],t[15]=e[3]*r+e[7]*i+e[11]*s+e[15]):(o=e[0],l=e[1],u=e[2],d=e[3],f=e[4],m=e[5],v=e[6],_=e[7],T=e[8],S=e[9],A=e[10],I=e[11],t[0]=o,t[1]=l,t[2]=u,t[3]=d,t[4]=f,t[5]=m,t[6]=v,t[7]=_,t[8]=T,t[9]=S,t[10]=A,t[11]=I,t[12]=o*r+f*i+T*s+e[12],t[13]=l*r+m*i+S*s+e[13],t[14]=u*r+v*i+A*s+e[14],t[15]=d*r+_*i+I*s+e[15]),t}function Dte(t,e,n){let r=n[0],i=n[1],s=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function kte(t,e,n,r){let i=r[0],s=r[1],o=r[2],l=Math.hypot(i,s,o),u,d,f,m,v,_,T,S,A,I,D,N,U,O,q,M,R,k,F,j,G,$,de,ve;return Math.abs(l)<Cte?null:(l=1/l,i*=l,s*=l,o*=l,u=Math.sin(n),d=Math.cos(n),f=1-d,m=e[0],v=e[1],_=e[2],T=e[3],S=e[4],A=e[5],I=e[6],D=e[7],N=e[8],U=e[9],O=e[10],q=e[11],M=i*i*f+d,R=s*i*f+o*u,k=o*i*f-s*u,F=i*s*f-o*u,j=s*s*f+d,G=o*s*f+i*u,$=i*o*f+s*u,de=s*o*f-i*u,ve=o*o*f+d,t[0]=m*M+S*R+N*k,t[1]=v*M+A*R+U*k,t[2]=_*M+I*R+O*k,t[3]=T*M+D*R+q*k,t[4]=m*F+S*j+N*G,t[5]=v*F+A*j+U*G,t[6]=_*F+I*j+O*G,t[7]=T*F+D*j+q*G,t[8]=m*$+S*de+N*ve,t[9]=v*$+A*de+U*ve,t[10]=_*$+I*de+O*ve,t[11]=T*$+D*de+q*ve,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function Ote(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function gB(t,e){let n=e[0],r=e[1],i=e[2],s=e[4],o=e[5],l=e[6],u=e[8],d=e[9],f=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(s,o,l),t[2]=Math.hypot(u,d,f),t}function Vte(t){let e=t[0],n=t[1],r=t[2],i=t[4],s=t[5],o=t[6],l=t[8],u=t[9],d=t[10];const f=e*e+n*n+r*r,m=i*i+s*s+o*o,v=l*l+u*u+d*d;return Math.sqrt(Math.max(f,m,v))}const yB=(function(){const t=[1,1,1];return function(e,n){let r=t;gB(r,n);let i=1/r[0],s=1/r[1],o=1/r[2],l=n[0]*i,u=n[1]*s,d=n[2]*o,f=n[4]*i,m=n[5]*s,v=n[6]*o,_=n[8]*i,T=n[9]*s,S=n[10]*o,A=l+m+S,I=0;return A>0?(I=Math.sqrt(A+1)*2,e[3]=.25*I,e[0]=(v-T)/I,e[1]=(_-d)/I,e[2]=(u-f)/I):l>m&&l>S?(I=Math.sqrt(1+l-m-S)*2,e[3]=(v-T)/I,e[0]=.25*I,e[1]=(u+f)/I,e[2]=(_+d)/I):m>S?(I=Math.sqrt(1+m-l-S)*2,e[3]=(_-d)/I,e[0]=(u+f)/I,e[1]=.25*I,e[2]=(v+T)/I):(I=Math.sqrt(1+S-l-m)*2,e[3]=(u-f)/I,e[0]=(_+d)/I,e[1]=(v+T)/I,e[2]=.25*I),e}})();function Lte(t,e,n,r){let i=Sp([t[0],t[1],t[2]]);const s=Sp([t[4],t[5],t[6]]),o=Sp([t[8],t[9],t[10]]);pB(t)<0&&(i=-i),n[0]=t[12],n[1]=t[13],n[2]=t[14];const u=t.slice(),d=1/i,f=1/s,m=1/o;u[0]*=d,u[1]*=d,u[2]*=d,u[4]*=f,u[5]*=f,u[6]*=f,u[8]*=m,u[9]*=m,u[10]*=m,yB(e,u),r[0]=i,r[1]=s,r[2]=o}function Ute(t,e,n,r){const i=t,s=e[0],o=e[1],l=e[2],u=e[3],d=s+s,f=o+o,m=l+l,v=s*d,_=s*f,T=s*m,S=o*f,A=o*m,I=l*m,D=u*d,N=u*f,U=u*m,O=r[0],q=r[1],M=r[2];return i[0]=(1-(S+I))*O,i[1]=(_+U)*O,i[2]=(T-N)*O,i[3]=0,i[4]=(_-U)*q,i[5]=(1-(v+I))*q,i[6]=(A+D)*q,i[7]=0,i[8]=(T+N)*M,i[9]=(A-D)*M,i[10]=(1-(v+S))*M,i[11]=0,i[12]=n[0],i[13]=n[1],i[14]=n[2],i[15]=1,i}function Fte(t,e){let n=e[0],r=e[1],i=e[2],s=e[3],o=n+n,l=r+r,u=i+i,d=n*o,f=r*o,m=r*l,v=i*o,_=i*l,T=i*u,S=s*o,A=s*l,I=s*u;return t[0]=1-m-T,t[1]=f+I,t[2]=v-A,t[3]=0,t[4]=f-I,t[5]=1-d-T,t[6]=_+S,t[7]=0,t[8]=v+A,t[9]=_-S,t[10]=1-d-m,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function jte(t,e,n,r,i){let s=1/Math.tan(e/2),o=1/(r-i);return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*o,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*o,t[15]=0,t}function Bte(t,e,n,r,i,s,o){let l=1/(e-n),u=1/(r-i),d=1/(s-o);return t[0]=-2*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*d,t[11]=0,t[12]=(e+n)*l,t[13]=(i+r)*u,t[14]=(o+s)*d,t[15]=1,t}function qte(t,e,n,r){let i=e[0],s=e[1],o=e[2],l=r[0],u=r[1],d=r[2],f=i-n[0],m=s-n[1],v=o-n[2],_=f*f+m*m+v*v;_===0?v=1:(_=1/Math.sqrt(_),f*=_,m*=_,v*=_);let T=u*v-d*m,S=d*f-l*v,A=l*m-u*f;return _=T*T+S*S+A*A,_===0&&(d?l+=1e-6:u?d+=1e-6:u+=1e-6,T=u*v-d*m,S=d*f-l*v,A=l*m-u*f,_=T*T+S*S+A*A),_=1/Math.sqrt(_),T*=_,S*=_,A*=_,t[0]=T,t[1]=S,t[2]=A,t[3]=0,t[4]=m*A-v*S,t[5]=v*T-f*A,t[6]=f*S-m*T,t[7]=0,t[8]=f,t[9]=m,t[10]=v,t[11]=0,t[12]=i,t[13]=s,t[14]=o,t[15]=1,t}function Lk(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function Uk(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function zte(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}class $0 extends Array{constructor(e=1,n=0,r=0,i=0,s=0,o=1,l=0,u=0,d=0,f=0,m=1,v=0,_=0,T=0,S=0,A=1){return super(e,n,r,i,s,o,l,u,d,f,m,v,_,T,S,A),this}get x(){return this[12]}get y(){return this[13]}get z(){return this[14]}get w(){return this[15]}set x(e){this[12]=e}set y(e){this[13]=e}set z(e){this[14]=e}set w(e){this[15]=e}set(e,n,r,i,s,o,l,u,d,f,m,v,_,T,S,A){return e.length?this.copy(e):(Rte(this,e,n,r,i,s,o,l,u,d,f,m,v,_,T,S,A),this)}translate(e,n=this){return Mte(this,n,e),this}rotate(e,n,r=this){return kte(this,r,e,n),this}scale(e,n=this){return Dte(this,n,typeof e=="number"?[e,e,e]:e),this}add(e,n){return n?Lk(this,e,n):Lk(this,this,e),this}sub(e,n){return n?Uk(this,e,n):Uk(this,this,e),this}multiply(e,n){return e.length?n?Vk(this,e,n):Vk(this,this,e):zte(this,this,e),this}identity(){return Pte(this),this}copy(e){return Ite(this,e),this}fromPerspective({fov:e,aspect:n,near:r,far:i}={}){return jte(this,e,n,r,i),this}fromOrthogonal({left:e,right:n,bottom:r,top:i,near:s,far:o}){return Bte(this,e,n,r,i,s,o),this}fromQuaternion(e){return Fte(this,e),this}setPosition(e){return this.x=e[0],this.y=e[1],this.z=e[2],this}inverse(e=this){return Nte(this,e),this}compose(e,n,r){return Ute(this,e,n,r),this}decompose(e,n,r){return Lte(this,e,n,r),this}getRotation(e){return yB(e,this),this}getTranslation(e){return Ote(e,this),this}getScaling(e){return gB(e,this),this}getMaxScaleOnAxis(){return Vte(this)}lookAt(e,n,r){return qte(this,e,n,r),this}determinant(){return pB(this)}fromArray(e,n=0){return this[0]=e[n],this[1]=e[n+1],this[2]=e[n+2],this[3]=e[n+3],this[4]=e[n+4],this[5]=e[n+5],this[6]=e[n+6],this[7]=e[n+7],this[8]=e[n+8],this[9]=e[n+9],this[10]=e[n+10],this[11]=e[n+11],this[12]=e[n+12],this[13]=e[n+13],this[14]=e[n+14],this[15]=e[n+15],this}toArray(e=[],n=0){return e[n]=this[0],e[n+1]=this[1],e[n+2]=this[2],e[n+3]=this[3],e[n+4]=this[4],e[n+5]=this[5],e[n+6]=this[6],e[n+7]=this[7],e[n+8]=this[8],e[n+9]=this[9],e[n+10]=this[10],e[n+11]=this[11],e[n+12]=this[12],e[n+13]=this[13],e[n+14]=this[14],e[n+15]=this[15],e}}function $te(t,e,n="YXZ"){return n==="XYZ"?(t[1]=Math.asin(Math.min(Math.max(e[8],-1),1)),Math.abs(e[8])<.99999?(t[0]=Math.atan2(-e[9],e[10]),t[2]=Math.atan2(-e[4],e[0])):(t[0]=Math.atan2(e[6],e[5]),t[2]=0)):n==="YXZ"?(t[0]=Math.asin(-Math.min(Math.max(e[9],-1),1)),Math.abs(e[9])<.99999?(t[1]=Math.atan2(e[8],e[10]),t[2]=Math.atan2(e[1],e[5])):(t[1]=Math.atan2(-e[2],e[0]),t[2]=0)):n==="ZXY"?(t[0]=Math.asin(Math.min(Math.max(e[6],-1),1)),Math.abs(e[6])<.99999?(t[1]=Math.atan2(-e[2],e[10]),t[2]=Math.atan2(-e[4],e[5])):(t[1]=0,t[2]=Math.atan2(e[1],e[0]))):n==="ZYX"?(t[1]=Math.asin(-Math.min(Math.max(e[2],-1),1)),Math.abs(e[2])<.99999?(t[0]=Math.atan2(e[6],e[10]),t[2]=Math.atan2(e[1],e[0])):(t[0]=0,t[2]=Math.atan2(-e[4],e[5]))):n==="YZX"?(t[2]=Math.asin(Math.min(Math.max(e[1],-1),1)),Math.abs(e[1])<.99999?(t[0]=Math.atan2(-e[9],e[5]),t[1]=Math.atan2(-e[2],e[0])):(t[0]=0,t[1]=Math.atan2(e[8],e[10]))):n==="XZY"&&(t[2]=Math.asin(-Math.min(Math.max(e[4],-1),1)),Math.abs(e[4])<.99999?(t[0]=Math.atan2(e[6],e[5]),t[1]=Math.atan2(e[8],e[0])):(t[0]=Math.atan2(-e[9],e[10]),t[1]=0)),t}const Fk=new $0;class Gte extends Array{constructor(e=0,n=e,r=e,i="YXZ"){super(e,n,r),this.order=i,this.onChange=()=>{},this._target=this;const s=["0","1","2"];return new Proxy(this,{set(o,l){const u=Reflect.set(...arguments);return u&&s.includes(l)&&o.onChange(),u}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this._target[0]=e,this.onChange()}set y(e){this._target[1]=e,this.onChange()}set z(e){this._target[2]=e,this.onChange()}set(e,n=e,r=e){return e.length?this.copy(e):(this._target[0]=e,this._target[1]=n,this._target[2]=r,this.onChange(),this)}copy(e){return this._target[0]=e[0],this._target[1]=e[1],this._target[2]=e[2],this.onChange(),this}reorder(e){return this._target.order=e,this.onChange(),this}fromRotationMatrix(e,n=this.order){return $te(this._target,e,n),this.onChange(),this}fromQuaternion(e,n=this.order,r){return Fk.fromQuaternion(e),this._target.fromRotationMatrix(Fk,n),r||this.onChange(),this}fromArray(e,n=0){return this._target[0]=e[n],this._target[1]=e[n+1],this._target[2]=e[n+2],this}toArray(e=[],n=0){return e[n]=this[0],e[n+1]=this[1],e[n+2]=this[2],e}}class Hte{constructor(){this.parent=null,this.children=[],this.visible=!0,this.matrix=new $0,this.worldMatrix=new $0,this.matrixAutoUpdate=!0,this.worldMatrixNeedsUpdate=!1,this.position=new Es,this.quaternion=new Ate,this.scale=new Es(1),this.rotation=new Gte,this.up=new Es(0,1,0),this.rotation._target.onChange=()=>this.quaternion.fromEuler(this.rotation,!0),this.quaternion._target.onChange=()=>this.rotation.fromQuaternion(this.quaternion,void 0,!0)}setParent(e,n=!0){this.parent&&e!==this.parent&&this.parent.removeChild(this,!1),this.parent=e,n&&e&&e.addChild(this,!1)}addChild(e,n=!0){~this.children.indexOf(e)||this.children.push(e),n&&e.setParent(this,!1)}removeChild(e,n=!0){~this.children.indexOf(e)&&this.children.splice(this.children.indexOf(e),1),n&&e.setParent(null,!1)}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.worldMatrixNeedsUpdate||e)&&(this.parent===null?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiply(this.parent.worldMatrix,this.matrix),this.worldMatrixNeedsUpdate=!1,e=!0);for(let n=0,r=this.children.length;n<r;n++)this.children[n].updateMatrixWorld(e)}updateMatrix(){this.matrix.compose(this.quaternion,this.position,this.scale),this.worldMatrixNeedsUpdate=!0}traverse(e){if(!e(this))for(let n=0,r=this.children.length;n<r;n++)this.children[n].traverse(e)}decompose(){this.matrix.decompose(this.quaternion._target,this.position,this.scale),this.rotation.fromQuaternion(this.quaternion)}lookAt(e,n=!1){n?this.matrix.lookAt(this.position,e,this.up):this.matrix.lookAt(e,this.position,this.up),this.matrix.getRotation(this.quaternion._target),this.rotation.fromQuaternion(this.quaternion)}}function Kte(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function Wte(t,e){let n=e[0],r=e[1],i=e[2],s=e[3],o=n+n,l=r+r,u=i+i,d=n*o,f=r*o,m=r*l,v=i*o,_=i*l,T=i*u,S=s*o,A=s*l,I=s*u;return t[0]=1-m-T,t[3]=f-I,t[6]=v+A,t[1]=f+I,t[4]=1-d-T,t[7]=_-S,t[2]=v-A,t[5]=_+S,t[8]=1-d-m,t}function Yte(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Jte(t,e,n,r,i,s,o,l,u,d){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=s,t[5]=o,t[6]=l,t[7]=u,t[8]=d,t}function Qte(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Xte(t,e){let n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],l=e[5],u=e[6],d=e[7],f=e[8],m=f*o-l*d,v=-f*s+l*u,_=d*s-o*u,T=n*m+r*v+i*_;return T?(T=1/T,t[0]=m*T,t[1]=(-f*r+i*d)*T,t[2]=(l*r-i*o)*T,t[3]=v*T,t[4]=(f*n-i*u)*T,t[5]=(-l*n+i*s)*T,t[6]=_*T,t[7]=(-d*n+r*u)*T,t[8]=(o*n-r*s)*T,t):null}function jk(t,e,n){let r=e[0],i=e[1],s=e[2],o=e[3],l=e[4],u=e[5],d=e[6],f=e[7],m=e[8],v=n[0],_=n[1],T=n[2],S=n[3],A=n[4],I=n[5],D=n[6],N=n[7],U=n[8];return t[0]=v*r+_*o+T*d,t[1]=v*i+_*l+T*f,t[2]=v*s+_*u+T*m,t[3]=S*r+A*o+I*d,t[4]=S*i+A*l+I*f,t[5]=S*s+A*u+I*m,t[6]=D*r+N*o+U*d,t[7]=D*i+N*l+U*f,t[8]=D*s+N*u+U*m,t}function Zte(t,e,n){let r=e[0],i=e[1],s=e[2],o=e[3],l=e[4],u=e[5],d=e[6],f=e[7],m=e[8],v=n[0],_=n[1];return t[0]=r,t[1]=i,t[2]=s,t[3]=o,t[4]=l,t[5]=u,t[6]=v*r+_*o+d,t[7]=v*i+_*l+f,t[8]=v*s+_*u+m,t}function ene(t,e,n){let r=e[0],i=e[1],s=e[2],o=e[3],l=e[4],u=e[5],d=e[6],f=e[7],m=e[8],v=Math.sin(n),_=Math.cos(n);return t[0]=_*r+v*o,t[1]=_*i+v*l,t[2]=_*s+v*u,t[3]=_*o-v*r,t[4]=_*l-v*i,t[5]=_*u-v*s,t[6]=d,t[7]=f,t[8]=m,t}function tne(t,e,n){let r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function nne(t,e){let n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],l=e[5],u=e[6],d=e[7],f=e[8],m=e[9],v=e[10],_=e[11],T=e[12],S=e[13],A=e[14],I=e[15],D=n*l-r*o,N=n*u-i*o,U=n*d-s*o,O=r*u-i*l,q=r*d-s*l,M=i*d-s*u,R=f*S-m*T,k=f*A-v*T,F=f*I-_*T,j=m*A-v*S,G=m*I-_*S,$=v*I-_*A,de=D*$-N*G+U*j+O*F-q*k+M*R;return de?(de=1/de,t[0]=(l*$-u*G+d*j)*de,t[1]=(u*F-o*$-d*k)*de,t[2]=(o*G-l*F+d*R)*de,t[3]=(i*G-r*$-s*j)*de,t[4]=(n*$-i*F+s*k)*de,t[5]=(r*F-n*G-s*R)*de,t[6]=(S*M-A*q+I*O)*de,t[7]=(A*U-T*M-I*N)*de,t[8]=(T*q-S*U+I*D)*de,t):null}class rne extends Array{constructor(e=1,n=0,r=0,i=0,s=1,o=0,l=0,u=0,d=1){return super(e,n,r,i,s,o,l,u,d),this}set(e,n,r,i,s,o,l,u,d){return e.length?this.copy(e):(Jte(this,e,n,r,i,s,o,l,u,d),this)}translate(e,n=this){return Zte(this,n,e),this}rotate(e,n=this){return ene(this,n,e),this}scale(e,n=this){return tne(this,n,e),this}multiply(e,n){return n?jk(this,e,n):jk(this,this,e),this}identity(){return Qte(this),this}copy(e){return Yte(this,e),this}fromMatrix4(e){return Kte(this,e),this}fromQuaternion(e){return Wte(this,e),this}fromBasis(e,n,r){return this.set(e[0],e[1],e[2],n[0],n[1],n[2],r[0],r[1],r[2]),this}inverse(e=this){return Xte(this,e),this}getNormalMatrix(e){return nne(this,e),this}}let ine=0;class sne extends Hte{constructor(e,{geometry:n,program:r,mode:i=e.TRIANGLES,frustumCulled:s=!0,renderOrder:o=0}={}){super(),e.canvas||console.error("gl not passed as first argument to Mesh"),this.gl=e,this.id=ine++,this.geometry=n,this.program=r,this.mode=i,this.frustumCulled=s,this.renderOrder=o,this.modelViewMatrix=new $0,this.normalMatrix=new rne,this.beforeRenderCallbacks=[],this.afterRenderCallbacks=[]}onBeforeRender(e){return this.beforeRenderCallbacks.push(e),this}onAfterRender(e){return this.afterRenderCallbacks.push(e),this}draw({camera:e}={}){e&&(this.program.uniforms.modelMatrix||Object.assign(this.program.uniforms,{modelMatrix:{value:null},viewMatrix:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},cameraPosition:{value:null}}),this.program.uniforms.projectionMatrix.value=e.projectionMatrix,this.program.uniforms.cameraPosition.value=e.worldPosition,this.program.uniforms.viewMatrix.value=e.viewMatrix,this.modelViewMatrix.multiply(e.viewMatrix,this.worldMatrix),this.normalMatrix.getNormalMatrix(this.modelViewMatrix),this.program.uniforms.modelMatrix.value=this.worldMatrix,this.program.uniforms.modelViewMatrix.value=this.modelViewMatrix,this.program.uniforms.normalMatrix.value=this.normalMatrix),this.beforeRenderCallbacks.forEach(r=>r&&r({mesh:this,camera:e}));let n=this.program.cullFace&&this.worldMatrix.determinant()<0;this.program.use({flipFaces:n}),this.geometry.draw({mode:this.mode,program:this.program}),this.afterRenderCallbacks.forEach(r=>r&&r({mesh:this,camera:e}))}}class one extends ete{constructor(e,{attributes:n={}}={}){Object.assign(n,{position:{size:2,data:new Float32Array([-1,-1,3,-1,-1,3])},uv:{size:2,data:new Float32Array([0,0,2,0,0,2])}}),super(e,n)}}const ane="#ffffff",Bk=t=>{const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?[parseInt(e[1],16)/255,parseInt(e[2],16)/255,parseInt(e[3],16)/255]:[1,1,1]},qk=(t,e,n)=>{switch(t){case"top-left":return{anchor:[0,-.2*n],dir:[0,1]};case"top-right":return{anchor:[e,-.2*n],dir:[0,1]};case"left":return{anchor:[-.2*e,.5*n],dir:[1,0]};case"right":return{anchor:[(1+.2)*e,.5*n],dir:[-1,0]};case"bottom-left":return{anchor:[0,(1+.2)*n],dir:[0,-1]};case"bottom-center":return{anchor:[.5*e,(1+.2)*n],dir:[0,-1]};case"bottom-right":return{anchor:[e,(1+.2)*n],dir:[0,-1]};default:return{anchor:[.5*e,-.2*n],dir:[0,1]}}},lne=({raysOrigin:t="top-center",raysColor:e=ane,raysSpeed:n=1,lightSpread:r=1,rayLength:i=2,pulsating:s=!1,fadeDistance:o=1,saturation:l=1,followMouse:u=!0,mouseInfluence:d=.1,noiseAmount:f=0,distortion:m=0,className:v=""})=>{const _=P.useRef(null),T=P.useRef(null),S=P.useRef(null),A=P.useRef({x:.5,y:.5}),I=P.useRef({x:.5,y:.5}),D=P.useRef(null),N=P.useRef(null),U=P.useRef(null),[O,q]=P.useState(!1),M=P.useRef(null);return P.useEffect(()=>{if(_.current)return M.current=new IntersectionObserver(R=>{const k=R[0];q(k.isIntersecting)},{threshold:.1}),M.current.observe(_.current),()=>{M.current&&(M.current.disconnect(),M.current=null)}},[]),P.useEffect(()=>!O||!_.current?void 0:(U.current&&(U.current(),U.current=null),(async()=>{if(!_.current||(await new Promise(_e=>setTimeout(_e,10)),!_.current))return;const k=new ate({dpr:Math.min(window.devicePixelRatio,2),alpha:!0});S.current=k;const F=k.gl;for(F.canvas.style.width="100%",F.canvas.style.height="100%";_.current.firstChild;)_.current.removeChild(_.current.firstChild);_.current.appendChild(F.canvas);const j=`
attribute vec2 position;
varying vec2 vUv;
void main() {
  vUv = position * 0.5 + 0.5;
  gl_Position = vec4(position, 0.0, 1.0);
}`,G=`precision highp float;

uniform float iTime;
uniform vec2  iResolution;

uniform vec2  rayPos;
uniform vec2  rayDir;
uniform vec3  raysColor;
uniform float raysSpeed;
uniform float lightSpread;
uniform float rayLength;
uniform float pulsating;
uniform float fadeDistance;
uniform float saturation;
uniform vec2  mousePos;
uniform float mouseInfluence;
uniform float noiseAmount;
uniform float distortion;

varying vec2 vUv;

float noise(vec2 st) {
  return fract(sin(dot(st.xy, vec2(12.9898,78.233))) * 43758.5453123);
}

float rayStrength(vec2 raySource, vec2 rayRefDirection, vec2 coord,
                  float seedA, float seedB, float speed) {
  vec2 sourceToCoord = coord - raySource;
  vec2 dirNorm = normalize(sourceToCoord);
  float cosAngle = dot(dirNorm, rayRefDirection);

  float distortedAngle = cosAngle + distortion * sin(iTime * 2.0 + length(sourceToCoord) * 0.01) * 0.2;
  
  float spreadFactor = pow(max(distortedAngle, 0.0), 1.0 / max(lightSpread, 0.001));

  float distance = length(sourceToCoord);
  float maxDistance = iResolution.x * rayLength;
  float lengthFalloff = clamp((maxDistance - distance) / maxDistance, 0.0, 1.0);
  
  float fadeFalloff = clamp((iResolution.x * fadeDistance - distance) / (iResolution.x * fadeDistance), 0.5, 1.0);
  float pulse = pulsating > 0.5 ? (0.8 + 0.2 * sin(iTime * speed * 3.0)) : 1.0;

  float baseStrength = clamp(
    (0.45 + 0.15 * sin(distortedAngle * seedA + iTime * speed)) +
    (0.3 + 0.2 * cos(-distortedAngle * seedB + iTime * speed)),
    0.0, 1.0
  );

  return baseStrength * lengthFalloff * fadeFalloff * spreadFactor * pulse;
}

void mainImage(out vec4 fragColor, in vec2 fragCoord) {
  vec2 coord = vec2(fragCoord.x, iResolution.y - fragCoord.y);
  
  vec2 finalRayDir = rayDir;
  if (mouseInfluence > 0.0) {
    vec2 mouseScreenPos = mousePos * iResolution.xy;
    vec2 mouseDirection = normalize(mouseScreenPos - rayPos);
    finalRayDir = normalize(mix(rayDir, mouseDirection, mouseInfluence));
  }

  vec4 rays1 = vec4(1.0) *
               rayStrength(rayPos, finalRayDir, coord, 36.2214, 21.11349,
                           1.5 * raysSpeed);
  vec4 rays2 = vec4(1.0) *
               rayStrength(rayPos, finalRayDir, coord, 22.3991, 18.0234,
                           1.1 * raysSpeed);

  fragColor = rays1 * 0.5 + rays2 * 0.4;

  if (noiseAmount > 0.0) {
    float n = noise(coord * 0.01 + iTime * 0.1);
    fragColor.rgb *= (1.0 - noiseAmount + noiseAmount * n);
  }

  float brightness = 1.0 - (coord.y / iResolution.y);
  fragColor.x *= 0.1 + brightness * 0.8;
  fragColor.y *= 0.3 + brightness * 0.6;
  fragColor.z *= 0.5 + brightness * 0.5;

  if (saturation != 1.0) {
    float gray = dot(fragColor.rgb, vec3(0.299, 0.587, 0.114));
    fragColor.rgb = mix(vec3(gray), fragColor.rgb, saturation);
  }

  fragColor.rgb *= raysColor;
}

void main() {
  vec4 color;
  mainImage(color, gl_FragCoord.xy);
  gl_FragColor  = color;
}`,$={iTime:{value:0},iResolution:{value:[1,1]},rayPos:{value:[0,0]},rayDir:{value:[0,1]},raysColor:{value:Bk(e)},raysSpeed:{value:n},lightSpread:{value:r},rayLength:{value:i},pulsating:{value:s?1:0},fadeDistance:{value:o},saturation:{value:l},mousePos:{value:[.5,.5]},mouseInfluence:{value:d},noiseAmount:{value:f},distortion:{value:m}};T.current=$;const de=new one(F),ve=new nte(F,{vertex:j,fragment:G,uniforms:$}),Y=new sne(F,{geometry:de,program:ve});N.current=Y;const se=()=>{if(!_.current||!k)return;k.dpr=Math.min(window.devicePixelRatio,2);const{clientWidth:_e,clientHeight:H}=_.current;k.setSize(_e,H);const ae=k.dpr,le=_e*ae,ce=H*ae;$.iResolution.value=[le,ce];const{anchor:Ee,dir:Me}=qk(t,le,ce);$.rayPos.value=Ee,$.rayDir.value=Me},Q=_e=>{if(!(!S.current||!T.current||!N.current)){$.iTime.value=_e*.001,u&&d>0&&(I.current.x=I.current.x*.92+A.current.x*(1-.92),I.current.y=I.current.y*.92+A.current.y*(1-.92),$.mousePos.value=[I.current.x,I.current.y]);try{k.render({scene:Y}),D.current=requestAnimationFrame(Q)}catch(H){console.warn("WebGL rendering error:",H);return}}};window.addEventListener("resize",se),se(),D.current=requestAnimationFrame(Q),U.current=()=>{if(D.current&&(cancelAnimationFrame(D.current),D.current=null),window.removeEventListener("resize",se),k)try{const _e=k.gl.canvas,H=k.gl.getExtension("WEBGL_lose_context");H&&H.loseContext(),_e&&_e.parentNode&&_e.parentNode.removeChild(_e)}catch(_e){console.warn("Error during WebGL cleanup:",_e)}S.current=null,T.current=null,N.current=null}})(),()=>{U.current&&(U.current(),U.current=null)}),[O,t,e,n,r,i,s,o,l,u,d,f,m]),P.useEffect(()=>{if(!T.current||!_.current||!S.current)return;const R=T.current,k=S.current;R.raysColor.value=Bk(e),R.raysSpeed.value=n,R.lightSpread.value=r,R.rayLength.value=i,R.pulsating.value=s?1:0,R.fadeDistance.value=o,R.saturation.value=l,R.mouseInfluence.value=d,R.noiseAmount.value=f,R.distortion.value=m;const{clientWidth:F,clientHeight:j}=_.current,G=k.dpr,{anchor:$,dir:de}=qk(t,F*G,j*G);R.rayPos.value=$,R.rayDir.value=de},[e,n,r,t,i,s,o,l,d,f,m]),P.useEffect(()=>{const R=k=>{if(!_.current||!S.current)return;const F=_.current.getBoundingClientRect(),j=(k.clientX-F.left)/F.width,G=(k.clientY-F.top)/F.height;A.current={x:j,y:G}};if(u)return window.addEventListener("mousemove",R),()=>window.removeEventListener("mousemove",R)},[u]),x.jsx("div",{ref:_,className:`w-full h-full pointer-events-none z-[3] overflow-hidden relative ${v}`.trim()})},une=t=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[x.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),x.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),x.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),Zd=t=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...t,children:[x.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5-10-5-10 5z",opacity:"0.6"}),x.jsx("path",{d:"M2 12l10 5 10-5-10-5-10 5z"})]}),vB=t=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:x.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),p0=t=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[x.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),x.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),xB=t=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[x.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),x.jsx("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),wr=t=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:x.jsx("path",{d:"M9 18h6M10 22h4M12 2a7 7 0 0 0-7 7c0 3.03 1.09 5.25 3 7h8c1.91-1.75 3-3.97 3-7a7 7 0 0 0-7-7z"})}),zC=t=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[x.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),x.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),cne=t=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[x.jsx("path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.3.05-3.1S5.21 15.66 4.5 16.5z"}),x.jsx("path",{d:"M7.5 12.5c0-1.5-1.14-2.5-2.5-3S3.5 6.5 3.5 5c0-1.5 1.14-2.5 2.5-3S8.5 3.5 8.5 5c0 1.5-1.14 2.5-2.5 3S3.5 9.5 3.5 11"}),x.jsx("path",{d:"M14.5 6.5c1.5-1.26 2-5 2-5s-3.74.5-5 2c-.71.84-.7 2.3-.05 3.1s1.34 1.25 2.05 1.4z"}),x.jsx("path",{d:"M16.5 11.5c0 1.5 1.14 2.5 2.5 3s1.5 2.5 1.5 4c0 1.5-1.14 2.5-2.5 3s-2.5-1.5-2.5-3c0-1.5 1.14-2.5 2.5-3s1.5-2.5 1.5-4"}),x.jsx("path",{d:"M13 10.29V5a2 2 0 0 1 2-2h4"}),x.jsx("path",{d:"m5 19 4-4"})]}),ha=t=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[x.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),x.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),dne=t=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[x.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),x.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),fne=t=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:x.jsx("path",{d:"M12 2a2.5 2.5 0 0 0-2.5 2.5v.7a1 1 0 0 1-1.2.9L7.2 6.3a2.5 2.5 0 1 0-2.9 4.4l1.3 1.6a1 1 0 0 1 0 1.4l-1.3 1.6a2.5 2.5 0 1 0 2.9 4.4l1.1-.8a1 1 0 0 1 1.2.9v.7a2.5 2.5 0 1 0 5 0v-.7a1 1 0 0 1 1.2-.9l1.1.8a2.5 2.5 0 1 0 2.9-4.4l-1.3-1.6a1 1 0 0 1 0-1.4l1.3-1.6a2.5 2.5 0 1 0-2.9-4.4l-1.1.8a1 1 0 0 1-1.2-.9v-.7A2.5 2.5 0 0 0 12 2zM4.5 12.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2zM19.5 12.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2zM12 21.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2zM12 4.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"})}),$C=t=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[x.jsx("polyline",{points:"16 18 22 12 16 6"}),x.jsx("polyline",{points:"8 6 2 12 8 18"})]}),hne=t=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[x.jsx("circle",{cx:"12",cy:"12",r:"10"}),x.jsx("circle",{cx:"12",cy:"12",r:"6"}),x.jsx("circle",{cx:"12",cy:"12",r:"2"})]}),ef=t=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[x.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),x.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),aA=t=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:x.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),yf=t=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:x.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),io=t=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[x.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),x.jsx("circle",{cx:"9",cy:"7",r:"4"}),x.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),x.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),tf=t=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[x.jsx("path",{d:"M18 6 7 17l-5-5"}),x.jsx("path",{d:"m22 10-7.5 7.5L13 16"})]}),mne=t=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[x.jsx("path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}),x.jsx("polyline",{points:"10 17 15 12 10 7"}),x.jsx("line",{x1:"15",y1:"12",x2:"3",y2:"12"})]}),LT=t=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[x.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),x.jsx("polyline",{points:"16 17 21 12 16 7"}),x.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),G0=t=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[x.jsx("circle",{cx:"11",cy:"11",r:"8"}),x.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),bB=t=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[x.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),x.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),GC=t=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:x.jsx("polyline",{points:"20 6 9 17 4 12"})}),pne=t=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[x.jsx("circle",{cx:"12",cy:"12",r:"10"}),x.jsx("polyline",{points:"12 6 12 12 16 14"})]}),_l=t=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[x.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),x.jsx("circle",{cx:"8.5",cy:"7",r:"4"}),x.jsx("line",{x1:"20",y1:"8",x2:"20",y2:"14"}),x.jsx("line",{x1:"17",y1:"11",x2:"23",y2:"11"})]}),zk=t=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[x.jsx("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.72"}),x.jsx("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.72-1.72"})]}),_B=t=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[x.jsx("polyline",{points:"3 6 5 6 21 6"}),x.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),wB=t=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[x.jsx("circle",{cx:"12",cy:"12",r:"10"}),x.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),x.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),gne=t=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[x.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),x.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),x.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),nf=t=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:x.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),rf=t=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:x.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),yne=t=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:x.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),UT=t=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[x.jsx("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),x.jsx("polyline",{points:"17 6 23 6 23 12"})]}),vne=t=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[x.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),x.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]}),TB=t=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[x.jsx("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),x.jsx("polyline",{points:"12 19 5 12 12 5"})]}),xne=()=>{const t=()=>{window.location.href="/Grow-With-Me-AI/auth"};return x.jsxs("div",{className:"min-h-screen w-full font-sans text-white flex flex-col overflow-hidden",children:[x.jsx("div",{className:"fixed top-0 left-0 w-screen h-screen",children:x.jsx(lne,{raysOrigin:"top-center",raysColor:"#f6f8f8ff",raysSpeed:1.5,lightSpread:.8,rayLength:3,followMouse:!0,mouseInfluence:.3,noiseAmount:.1,distortion:.05,className:"w-full h-full"})}),x.jsxs("div",{className:"relative z-10 flex flex-col items-center w-full flex-grow",children:[x.jsxs("header",{className:"w-full flex items-center justify-between px-2 md:px-12 mb-8",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(Zd,{className:"w-8 h-8 text-indigo-500"}),x.jsx("span",{className:"text-md md:text-xl font-semibold text-white tracking-tight",children:"Grow With Me"})]}),x.jsx("button",{className:"bg-white text-[#18141c] rounded-2xl px-6 py-2 font-medium text-base shadow hover:bg-gray-200 transition",onClick:t,children:"Get Started"})]}),x.jsxs("main",{className:"flex flex-col items-stretch justify-start text-center max-w-3xl mx-auto w-full overflow-y-auto",children:[x.jsxs("h1",{className:"text-4xl md:text-7xl font-bold mb-6 leading-tight",children:["Find Your Perfect",x.jsx("br",{}),x.jsx("span",{className:"text-indigo-500",children:"Co-Founder"})]}),x.jsx("p",{className:"text-base md:text-lg text-gray-300 mb-8 font-light",children:"Empowering founders, innovators, and investors to connect, collaborate, and launch world-changing startups. Move your mouse to see the interactive light rays background!"}),x.jsxs("section",{className:"w-full mb-8 text-left bg-white/5 rounded-xl p-6 shadow-lg",children:[x.jsx("h2",{className:"text-2xl font-bold text-indigo-400 mb-3",children:"About Grow With Me"}),x.jsx("p",{className:"text-gray-200 text-base mb-4",children:"Grow With Me is a next-generation platform designed to break down barriers and make entrepreneurship accessible to everyone, everywhere."}),x.jsxs("ul",{className:"list-disc pl-5 text-gray-300 text-sm space-y-2",children:[x.jsx("li",{children:"AI-driven matchmaking for co-founders and teams"}),x.jsx("li",{children:"Secure, global networking and messaging"}),x.jsx("li",{children:"Real-time feedback and mentorship"}),x.jsx("li",{children:"Investor pitch and negotiation tools"})]})]}),x.jsxs("section",{className:"w-full mb-8",children:[x.jsx("h2",{className:"text-xl font-semibold text-indigo-400 mb-4 text-left",children:"Key Features"}),x.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[x.jsxs("div",{className:"bg-white/10 rounded-lg p-5 text-left",children:[x.jsx("h3",{className:"text-white font-semibold mb-2",children:"Smart Matchmaking"}),x.jsx("p",{className:"text-gray-300 text-sm",children:"Advanced algorithms analyze compatibility across skills, goals, and vision to connect you with the perfect co-founder."})]}),x.jsxs("div",{className:"bg-white/10 rounded-lg p-5 text-left",children:[x.jsx("h3",{className:"text-white font-semibold mb-2",children:"Global Community"}),x.jsx("p",{className:"text-gray-300 text-sm",children:"Connect with thousands of entrepreneurs, investors, and innovators from around the world."})]}),x.jsxs("div",{className:"bg-white/10 rounded-lg p-5 text-left",children:[x.jsx("h3",{className:"text-white font-semibold mb-2",children:"Secure Collaboration"}),x.jsx("p",{className:"text-gray-300 text-sm",children:"Bank-level encryption and privacy controls ensure your ideas and conversations remain confidential."})]}),x.jsxs("div",{className:"bg-white/10 rounded-lg p-5 text-left",children:[x.jsx("h3",{className:"text-white font-semibold mb-2",children:"Launch & Grow"}),x.jsx("p",{className:"text-gray-300 text-sm",children:"From ideation to execution, our platform provides the tools and connections to bring your vision to life."})]})]})]}),x.jsxs("section",{className:"w-full mb-8",children:[x.jsx("h2",{className:"text-xl font-semibold text-indigo-400 mb-4 text-left",children:"How It Works"}),x.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[x.jsxs("div",{className:"flex flex-col items-center",children:[x.jsx("div",{className:"bg-indigo-500 rounded-full w-10 h-10 flex items-center justify-center text-white font-bold mb-2",children:"1"}),x.jsx("span",{className:"text-gray-200 text-sm",children:"Sign Up & Create Profile"})]}),x.jsxs("div",{className:"flex flex-col items-center",children:[x.jsx("div",{className:"bg-indigo-500 rounded-full w-10 h-10 flex items-center justify-center text-white font-bold mb-2",children:"2"}),x.jsx("span",{className:"text-gray-200 text-sm",children:"Share Ideas & Connect"})]}),x.jsxs("div",{className:"flex flex-col items-center",children:[x.jsx("div",{className:"bg-indigo-500 rounded-full w-10 h-10 flex items-center justify-center text-white font-bold mb-2",children:"3"}),x.jsx("span",{className:"text-gray-200 text-sm",children:"Build Teams & Pitch"})]}),x.jsxs("div",{className:"flex flex-col items-center",children:[x.jsx("div",{className:"bg-indigo-500 rounded-full w-10 h-10 flex items-center justify-center text-white font-bold mb-2",children:"4"}),x.jsx("span",{className:"text-gray-200 text-sm",children:"Launch & Grow"})]})]})]}),x.jsxs("section",{className:"w-full mb-8",children:[x.jsx("h2",{className:"text-xl font-semibold text-indigo-400 mb-4 text-left",children:"Meet the Team"}),x.jsxs("div",{className:"flex flex-wrap gap-10 justify-center",children:[x.jsxs("div",{className:"flex flex-col items-center",children:[x.jsx("img",{src:"/team1.png",alt:"Namith KP",className:"w-16 h-16 rounded-full mb-2 border-2 border-indigo-500",onError:e=>{e.currentTarget.src="https://ui-avatars.com/api/?name=Namith+KP&background=4f46e5&color=fff"}}),x.jsx("span",{className:"text-white font-medium",children:"Namith"}),x.jsx("span",{className:"text-gray-400 text-xs",children:"Founder & Lead Developer"})]}),x.jsxs("div",{className:"flex flex-col items-center",children:[x.jsx("img",{src:"/team2.png",alt:"Co-Founder",className:"w-16 h-16 rounded-full mb-2 border-2 border-indigo-500",onError:e=>{e.currentTarget.src="https://ui-avatars.com/api/?name=Akash+Kumar&background=4f46e5&color=fff"}}),x.jsx("span",{className:"text-white font-medium",children:"Akash Kumar"}),x.jsx("span",{className:"text-gray-400 text-xs",children:"Co-Founder & Product"})]}),x.jsxs("div",{className:"flex flex-col items-center",children:[x.jsx("img",{src:"/team3.png",alt:"Marketing Specialist",className:"w-16 h-16 rounded-full mb-2 border-2 border-indigo-500",onError:e=>{e.currentTarget.src="https://ui-avatars.com/api/?name=Gagan&background=4f46e5&color=fff"}}),x.jsx("span",{className:"text-white font-medium",children:"Gagan"}),x.jsx("span",{className:"text-gray-400 text-xs",children:"Marketing Specialist"})]}),x.jsxs("div",{className:"flex flex-col items-center",children:[x.jsx("img",{src:"/team3.png",alt:"Product Analyst",className:"w-16 h-16 rounded-full mb-2 border-2 border-indigo-500",onError:e=>{e.currentTarget.src="https://ui-avatars.com/api/?name=Ujwal+Raj&background=4f46e5&color=fff"}}),x.jsx("span",{className:"text-white font-medium",children:"Ujwal Raj"}),x.jsx("span",{className:"text-gray-400 text-xs",children:"Product Analyst"})]})]})]})]})]})]})},bne=t=>x.jsxs("svg",{viewBox:"0 0 48 48",...t,children:[x.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12s5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24s8.955,20,20,20s20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),x.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),x.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),x.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571l6.19,5.238C42.02,35.625,44,30.036,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),_ne=()=>typeof navigator<"u"&&(/wv/.test(navigator.userAgent)||/Android/.test(navigator.userAgent)&&/Version\//.test(navigator.userAgent)),wne=({onGoogleLogin:t,onGuestLogin:e,error:n,authUser:r})=>{const i=()=>{_ne()&&typeof window<"u"&&window.AndroidBridge?window.AndroidBridge.triggerGoogleSignIn():t()};return x.jsxs("div",{className:"relative min-h-screen w-full overflow-hidden bg-black",children:[x.jsxs("div",{className:"fixed inset-0 z-0",children:[x.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-950 via-black to-slate-950"}),x.jsx("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 bg-emerald-500/10 rounded-full blur-3xl animate-pulse-slow"}),x.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-purple-500/10 rounded-full blur-3xl animate-pulse-slow",style:{animationDelay:"2s"}}),x.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(255,255,255,0.02)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.02)_1px,transparent_1px)] bg-[size:100px_100px]"})]}),x.jsxs("div",{className:"flex flex-col items-center z-30 pt-10 mb-5 relative",children:[x.jsxs("div",{className:"relative flex items-center justify-center mb-2",children:[x.jsx("div",{className:"absolute -inset-2 sm:-inset-3 rounded-full bg-gradient-to-br from-purple-500/40 via-fuchsia-400/30 to-blue-400/30 blur-xl animate-pulse-slow"}),x.jsx(Zd,{className:"w-20 h-20 sm:w-28 sm:h-28 text-emerald-400 drop-shadow-2xl z-10"})]}),x.jsxs("span",{className:"text-3xl md:text-4xl font-light mb-4",children:["Sign in to",x.jsx("span",{className:"text-emerald-400 font-light",children:" Grow With Me"})]})]}),x.jsxs("div",{className:"relative max-w-md w-full mx-auto bg-gradient-to-br from-neutral-900/90 via-neutral-900/80 to-neutral-800/90 border border-emerald-400/20 rounded-2xl p-8 space-y-6 shadow-2xl shadow-emerald-900/20 z-30 backdrop-blur-xl",children:[x.jsx("h2",{className:"text-3xl font-light text-white mb-2",children:"Join the Network"}),x.jsx("p",{className:"text-neutral-300 text-lg font-light",children:"Sign in to save your profile and connect with others, or continue as a guest to explore the platform."}),x.jsxs("div",{className:"flex flex-col space-y-4 pt-4",children:[n&&x.jsx("div",{className:"text-red-400 bg-red-900/50 p-3 rounded-lg text-sm mb-4 text-left",children:n}),!r&&x.jsxs("button",{onClick:i,className:"flex items-center justify-center gap-3 bg-gradient-to-r from-emerald-500 via-emerald-400 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700 text-white font-bold py-3 px-6 rounded-lg transition-all duration-300 shadow-lg shadow-emerald-600/20 text-lg tracking-wide border-2 border-white/10 focus:outline-none focus:ring-4 focus:ring-emerald-400/30",children:[x.jsx(bne,{className:"w-6 h-6"}),"Sign In with Google"]}),x.jsx("button",{onClick:e,className:"flex items-center justify-center gap-3 bg-neutral-800 hover:bg-neutral-700 text-white font-bold py-3 px-6 rounded-lg transition-colors duration-300 w-full border border-neutral-700/40 text-lg",children:"Continue as Guest"})]})]})]})},Tne=({onOnboardingComplete:t,userProfile:e,loading:n=!1,error:r=null})=>{const[i,s]=P.useState(1),[o,l]=P.useState({name:"",role:ht.Founder,location:"",interests:"",skills:"",experience:"",lookingFor:"",interestedDomains:"",investmentExperience:"",minBudget:"",maxBudget:"",minEquity:"",maxEquity:""});P.useEffect(()=>{var _,T,S,A,I,D;e&&l({name:e.name,role:e.role,location:e.location,interests:e.interests.join(", "),skills:e.skills.join(", "),experience:e.experience||"",lookingFor:e.lookingFor,interestedDomains:((_=e.investorProfile)==null?void 0:_.interestedDomains.join(", "))||"",investmentExperience:((T=e.investorProfile)==null?void 0:T.investmentExperience)||"",minBudget:((S=e.investorProfile)==null?void 0:S.budget.min.toString())||"",maxBudget:((A=e.investorProfile)==null?void 0:A.budget.max.toString())||"",minEquity:((I=e.investorProfile)==null?void 0:I.expectedEquity.min.toString())||"",maxEquity:((D=e.investorProfile)==null?void 0:D.expectedEquity.max.toString())||""})},[e]);const u=_=>{const{name:T,value:S}=_.target;l(A=>({...A,[T]:S}))},d=()=>s(_=>_+1),f=()=>s(_=>_-1),m=()=>{const _={name:o.name,role:o.role,location:o.location,interests:o.interests.split(",").map(S=>S.trim()).filter(S=>S),skills:o.skills.split(",").map(S=>S.trim()).filter(S=>S),lookingFor:o.lookingFor};let T;o.role===ht.Investor?T={..._,investorProfile:{interestedDomains:o.interestedDomains.split(",").map(S=>S.trim()).filter(S=>S),investmentExperience:o.investmentExperience,budget:{min:parseInt(o.minBudget,10)||0,max:parseInt(o.maxBudget,10)||0},expectedEquity:{min:parseInt(o.minEquity,10)||0,max:parseInt(o.maxEquity,10)||0}}}:T={..._,experience:o.experience},t(T)},v=[{title:"Your Role",icon:x.jsx(p0,{className:"w-6 h-6"})},{title:"About You",icon:x.jsx(xB,{className:"w-6 h-6"})},{title:"Your Vision",icon:x.jsx(wr,{className:"w-6 h-6"})},{title:"Confirmation",icon:x.jsx(zC,{className:"w-6 h-6"})}];return x.jsxs("div",{className:"max-w-3xl mx-auto p-4 sm:p-8 bg-neutral-900 rounded-2xl shadow-2xl shadow-purple-900/10 border border-neutral-800",children:[x.jsx("div",{className:"mb-8",children:x.jsx("ol",{className:"flex items-center w-full",children:v.map((_,T)=>x.jsx("li",{className:`flex w-full items-center ${T+1<v.length?"after:content-[''] after:w-full after:h-1 after:border-b after:border-neutral-700 after:inline-block":""} ${T<i?"text-purple-500":"text-neutral-500"}`,children:x.jsx("span",{className:`flex items-center justify-center w-10 h-10 rounded-full lg:h-12 lg:w-12 shrink-0 ${T<i?"bg-purple-900/50":"bg-neutral-800"}`,children:_.icon})},T))})}),x.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:v[i-1].title}),x.jsx("p",{className:"text-neutral-400 mb-8",children:"Let's build your profile to find the best matches."}),x.jsxs("div",{className:"space-y-6",children:[i===1&&x.jsxs(x.Fragment,{children:[x.jsxs("div",{children:[x.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-neutral-300 mb-2",children:"Full Name"}),x.jsx("input",{type:"text",name:"name",id:"name",value:o.name,onChange:u,className:"w-full bg-neutral-800 border border-neutral-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"e.g., Ada Lovelace",required:!0})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-neutral-300 mb-2",children:"What is your primary role?"}),x.jsx("select",{name:"role",id:"role",value:o.role,onChange:u,className:"w-full bg-neutral-800 border border-neutral-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500",required:!0,children:Object.values(ht).map(_=>x.jsx("option",{value:_,children:_},_))})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-neutral-300 mb-2",children:"Location"}),x.jsx("input",{type:"text",name:"location",id:"location",value:o.location,onChange:u,className:"w-full bg-neutral-800 border border-neutral-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"e.g., London, UK",required:!0})]})]}),i===2&&o.role===ht.Investor&&x.jsxs(x.Fragment,{children:[x.jsxs("div",{children:[x.jsx("label",{htmlFor:"interestedDomains",className:"block text-sm font-medium text-neutral-300 mb-2",children:"Domains of Interest (comma-separated)"}),x.jsx("input",{type:"text",name:"interestedDomains",id:"interestedDomains",value:o.interestedDomains,onChange:u,className:"w-full bg-neutral-800 border border-neutral-700 rounded-lg p-3 text-white",placeholder:"e.g., SaaS, Deep Tech, HealthTech",required:!0})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"investmentExperience",className:"block text-sm font-medium text-neutral-300 mb-2",children:"Investment Experience"}),x.jsx("textarea",{name:"investmentExperience",id:"investmentExperience",rows:4,value:o.investmentExperience,onChange:u,className:"w-full bg-neutral-800 border border-neutral-700 rounded-lg p-3 text-white",placeholder:"Describe your past investments and what you look for in a startup.",required:!0})]})]}),i===3&&o.role===ht.Investor&&x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[x.jsxs("div",{children:[x.jsx("label",{htmlFor:"minBudget",className:"block text-sm font-medium text-neutral-300 mb-2",children:"Investment Budget (Min)"}),x.jsx("input",{type:"number",name:"minBudget",id:"minBudget",value:o.minBudget,onChange:u,className:"w-full bg-neutral-800 border border-neutral-700 rounded-lg p-3 text-white",placeholder:"e.g., 25000",required:!0})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"maxBudget",className:"block text-sm font-medium text-neutral-300 mb-2",children:"Investment Budget (Max)"}),x.jsx("input",{type:"number",name:"maxBudget",id:"maxBudget",value:o.maxBudget,onChange:u,className:"w-full bg-neutral-800 border border-neutral-700 rounded-lg p-3 text-white",placeholder:"e.g., 100000",required:!0})]})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[x.jsxs("div",{children:[x.jsx("label",{htmlFor:"minEquity",className:"block text-sm font-medium text-neutral-300 mb-2",children:"Expected Equity (Min %)"}),x.jsx("input",{type:"number",name:"minEquity",id:"minEquity",value:o.minEquity,onChange:u,className:"w-full bg-neutral-800 border border-neutral-700 rounded-lg p-3 text-white",placeholder:"e.g., 5",required:!0})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"maxEquity",className:"block text-sm font-medium text-neutral-300 mb-2",children:"Expected Equity (Max %)"}),x.jsx("input",{type:"number",name:"maxEquity",id:"maxEquity",value:o.maxEquity,onChange:u,className:"w-full bg-neutral-800 border border-neutral-700 rounded-lg p-3 text-white",placeholder:"e.g., 15",required:!0})]})]})]}),i===2&&o.role!==ht.Investor&&x.jsxs(x.Fragment,{children:[x.jsxs("div",{children:[x.jsx("label",{htmlFor:"skills",className:"block text-sm font-medium text-neutral-300 mb-2",children:"Your Top Skills (comma-separated)"}),x.jsx("input",{type:"text",name:"skills",id:"skills",value:o.skills,onChange:u,className:"w-full bg-neutral-800 border border-neutral-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"e.g., React, Node.js, Product Management",required:!0})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"experience",className:"block text-sm font-medium text-neutral-300 mb-2",children:"Your Experience"}),x.jsx("textarea",{name:"experience",id:"experience",rows:4,value:o.experience,onChange:u,className:"w-full bg-neutral-800 border border-neutral-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Describe your professional background and key achievements.",required:!0})]})]}),i===3&&o.role!==ht.Investor&&x.jsxs(x.Fragment,{children:[x.jsxs("div",{children:[x.jsx("label",{htmlFor:"interests",className:"block text-sm font-medium text-neutral-300 mb-2",children:"Your Interests (comma-separated)"}),x.jsx("input",{type:"text",name:"interests",id:"interests",value:o.interests,onChange:u,className:"w-full bg-neutral-800 border border-neutral-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"e.g., AI, FinTech, Sustainable Tech",required:!0})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"lookingFor",className:"block text-sm font-medium text-neutral-300 mb-2",children:"What are you looking for in a co-founder?"}),x.jsx("textarea",{name:"lookingFor",id:"lookingFor",rows:4,value:o.lookingFor,onChange:u,className:"w-full bg-neutral-800 border border-neutral-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Describe your ideal partner's skills, role, and mindset.",required:!0})]})]}),i===4&&x.jsxs("div",{className:"bg-neutral-800/50 p-6 rounded-lg border border-neutral-700",children:[x.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Review Your Profile"}),x.jsxs("p",{children:[x.jsx("strong",{children:"Name:"})," ",o.name]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Role:"})," ",o.role]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Location:"})," ",o.location]}),o.role===ht.Investor?x.jsxs(x.Fragment,{children:[x.jsxs("p",{children:[x.jsx("strong",{children:"Domains:"})," ",o.interestedDomains]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Budget:"})," $",o.minBudget," - $",o.maxBudget]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Equity:"})," ",o.minEquity,"% - ",o.maxEquity,"%"]})]}):x.jsxs(x.Fragment,{children:[x.jsxs("p",{children:[x.jsx("strong",{children:"Skills:"})," ",o.skills]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Interests:"})," ",o.interests]})]}),x.jsx("p",{className:"mt-4",children:"Ready to find your match?"})]})]}),x.jsxs("div",{className:"mt-8 flex justify-between",children:[x.jsx("button",{onClick:f,disabled:i===1,className:"bg-neutral-700 hover:bg-neutral-600 text-white font-bold py-2 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Back"}),i<4?x.jsx("button",{onClick:d,className:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Next"}):x.jsxs("button",{onClick:m,disabled:n,className:`bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition-colors flex items-center gap-2 ${n?"opacity-50 cursor-not-allowed":""}`,children:[n?x.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[x.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),x.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})]}):x.jsx(cne,{className:"w-5 h-5"}),"Finish & Find Matches"]})]}),r&&x.jsx("div",{className:"mt-4 text-red-500 font-semibold text-center",children:r})]})};function EB(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=EB(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Bt(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=EB(t))&&(r&&(r+=" "),r+=e);return r}var FT={},jT={},$k;function Ene(){return $k||($k=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(jT)),jT}var BT={},Gk;function SB(){return Gk||(Gk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(BT)),BT}var qT={},Hk;function AB(){return Hk||(Hk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}t.toKey=e})(qT)),qT}var zT={},Kk;function HC(){return Kk||(Kk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){const r=[],i=n.length;if(i===0)return r;let s=0,o="",l="",u=!1;for(n.charCodeAt(0)===46&&(r.push(""),s++);s<i;){const d=n[s];l?d==="\\"&&s+1<i?(s++,o+=n[s]):d===l?l="":o+=d:u?d==='"'||d==="'"?l=d:d==="]"?(u=!1,r.push(o),o=""):o+=d:d==="["?(u=!0,o&&(r.push(o),o="")):d==="."?o&&(r.push(o),o=""):o+=d,s++}return o&&r.push(o),r}t.toPath=e})(zT)),zT}var Wk;function KC(){return Wk||(Wk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Ene(),n=SB(),r=AB(),i=HC();function s(l,u,d){if(l==null)return d;switch(typeof u){case"string":{if(e.isUnsafeProperty(u))return d;const f=l[u];return f===void 0?n.isDeepKey(u)?s(l,i.toPath(u),d):d:f}case"number":case"symbol":{typeof u=="number"&&(u=r.toKey(u));const f=l[u];return f===void 0?d:f}default:{if(Array.isArray(u))return o(l,u,d);if(Object.is(u==null?void 0:u.valueOf(),-0)?u="-0":u=String(u),e.isUnsafeProperty(u))return d;const f=l[u];return f===void 0?d:f}}}function o(l,u,d){if(u.length===0)return d;let f=l;for(let m=0;m<u.length;m++){if(f==null||e.isUnsafeProperty(u[m]))return d;f=f[u[m]]}return f===void 0?d:f}t.get=s})(FT)),FT}var $T,Yk;function Sne(){return Yk||(Yk=1,$T=KC().get),$T}var Ane=Sne();const _c=xo(Ane);var GT={exports:{}},Pt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jk;function Cne(){if(Jk)return Pt;Jk=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,r=t?Symbol.for("react.fragment"):60107,i=t?Symbol.for("react.strict_mode"):60108,s=t?Symbol.for("react.profiler"):60114,o=t?Symbol.for("react.provider"):60109,l=t?Symbol.for("react.context"):60110,u=t?Symbol.for("react.async_mode"):60111,d=t?Symbol.for("react.concurrent_mode"):60111,f=t?Symbol.for("react.forward_ref"):60112,m=t?Symbol.for("react.suspense"):60113,v=t?Symbol.for("react.suspense_list"):60120,_=t?Symbol.for("react.memo"):60115,T=t?Symbol.for("react.lazy"):60116,S=t?Symbol.for("react.block"):60121,A=t?Symbol.for("react.fundamental"):60117,I=t?Symbol.for("react.responder"):60118,D=t?Symbol.for("react.scope"):60119;function N(O){if(typeof O=="object"&&O!==null){var q=O.$$typeof;switch(q){case e:switch(O=O.type,O){case u:case d:case r:case s:case i:case m:return O;default:switch(O=O&&O.$$typeof,O){case l:case f:case T:case _:case o:return O;default:return q}}case n:return q}}}function U(O){return N(O)===d}return Pt.AsyncMode=u,Pt.ConcurrentMode=d,Pt.ContextConsumer=l,Pt.ContextProvider=o,Pt.Element=e,Pt.ForwardRef=f,Pt.Fragment=r,Pt.Lazy=T,Pt.Memo=_,Pt.Portal=n,Pt.Profiler=s,Pt.StrictMode=i,Pt.Suspense=m,Pt.isAsyncMode=function(O){return U(O)||N(O)===u},Pt.isConcurrentMode=U,Pt.isContextConsumer=function(O){return N(O)===l},Pt.isContextProvider=function(O){return N(O)===o},Pt.isElement=function(O){return typeof O=="object"&&O!==null&&O.$$typeof===e},Pt.isForwardRef=function(O){return N(O)===f},Pt.isFragment=function(O){return N(O)===r},Pt.isLazy=function(O){return N(O)===T},Pt.isMemo=function(O){return N(O)===_},Pt.isPortal=function(O){return N(O)===n},Pt.isProfiler=function(O){return N(O)===s},Pt.isStrictMode=function(O){return N(O)===i},Pt.isSuspense=function(O){return N(O)===m},Pt.isValidElementType=function(O){return typeof O=="string"||typeof O=="function"||O===r||O===d||O===s||O===i||O===m||O===v||typeof O=="object"&&O!==null&&(O.$$typeof===T||O.$$typeof===_||O.$$typeof===o||O.$$typeof===l||O.$$typeof===f||O.$$typeof===A||O.$$typeof===I||O.$$typeof===D||O.$$typeof===S)},Pt.typeOf=N,Pt}var Qk;function Ine(){return Qk||(Qk=1,GT.exports=Cne()),GT.exports}var Rne=Ine(),ts=t=>t===0?0:t>0?1:-1,ls=t=>typeof t=="number"&&t!=+t,Qu=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,qe=t=>(typeof t=="number"||t instanceof Number)&&!ls(t),po=t=>qe(t)||typeof t=="string",Pne=0,Jp=t=>{var e=++Pne;return"".concat(t||"").concat(e)},Pl=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!qe(e)&&typeof e!="string")return r;var s;if(Qu(e)){if(n==null)return r;var o=e.indexOf("%");s=n*parseFloat(e.slice(0,o))/100}else s=+e;return ls(s)&&(s=r),i&&n!=null&&s>n&&(s=n),s},CB=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[t[r]])n[t[r]]=!0;else return!0;return!1};function Hm(t,e,n){return qe(t)&&qe(e)?t+n*(e-t):e}function IB(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):_c(r,e))===n)}var Un=t=>t===null||typeof t>"u",Vg=t=>Un(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1)),Nne=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function WC(t){if(typeof t!="string")return!1;var e=Nne;return e.includes(t)}var Mne=["viewBox","children"],Xk=["points","pathLength"],HT={svg:Mne,polygon:Xk,polyline:Xk},YC=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(P.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{WC(i)&&(r[i]=(s=>n[i](n,s)))}),r},Dne=(t,e,n)=>r=>(t(e,n,r),null),RB=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var s=t[i];WC(i)&&typeof s=="function"&&(r||(r={}),r[i]=Dne(s,e,n))}),r},kne=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function PB(t){if(typeof t!="string")return!1;var e=kne;return e.includes(t)}function dh(t){var e=Object.entries(t).filter(n=>{var[r]=n;return PB(r)});return Object.fromEntries(e)}var Zk=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",eO=null,KT=null,NB=t=>{if(t===eO&&Array.isArray(KT))return KT;var e=[];return P.Children.forEach(t,n=>{Un(n)||(Rne.isFragment(n)?e=e.concat(NB(n.props.children)):e.push(n))}),KT=e,eO=t,e};function MB(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>Zk(i)):r=[Zk(e)],NB(t).forEach(i=>{var s=_c(i,"type.displayName")||_c(i,"type.name");r.indexOf(s)!==-1&&n.push(i)}),n}var DB=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,One=(t,e,n,r)=>{var i;if(typeof e=="symbol"||typeof e=="number")return!0;var s=(i=r&&(HT==null?void 0:HT[r]))!==null&&i!==void 0?i:[],o=e.startsWith("data-"),l=typeof t!="function"&&(!!r&&s.includes(e)||PB(e)),u=!!n&&WC(e);return o||l||u},Wn=(t,e,n)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(P.isValidElement(t)&&(r=t.props),typeof r!="object"&&typeof r!="function")return null;var i={};return Object.keys(r).forEach(s=>{var o;One((o=r)===null||o===void 0?void 0:o[s],s,e,n)&&(i[s]=r[s])}),i},Vne=["children","width","height","viewBox","className","style","title","desc"];function lA(){return lA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lA.apply(null,arguments)}function Lne(t,e){if(t==null)return{};var n,r,i=Une(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Une(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var JC=P.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:s,className:o,style:l,title:u,desc:d}=t,f=Lne(t,Vne),m=s||{width:r,height:i,x:0,y:0},v=Bt("recharts-surface",o);return P.createElement("svg",lA({},Wn(f,!0,"svg"),{className:v,width:r,height:i,style:l,viewBox:"".concat(m.x," ").concat(m.y," ").concat(m.width," ").concat(m.height),ref:e}),P.createElement("title",null,u),P.createElement("desc",null,d),n)}),Fne=["children","className"];function uA(){return uA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uA.apply(null,arguments)}function jne(t,e){if(t==null)return{};var n,r,i=Bne(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Bne(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Nf=P.forwardRef((t,e)=>{var{children:n,className:r}=t,i=jne(t,Fne),s=Bt("recharts-layer",r);return P.createElement("g",uA({className:s},Wn(i,!0),{ref:e}),n)}),kB=HF(),OB=P.createContext(null),qne=()=>P.useContext(OB);function Gt(t){return function(){return t}}const VB=Math.cos,H0=Math.sin,Ps=Math.sqrt,K0=Math.PI,ub=2*K0,cA=Math.PI,dA=2*cA,Fu=1e-6,zne=dA-Fu;function LB(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function $ne(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return LB;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Gne{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?LB:$ne(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,u=r-e,d=i-n,f=o-e,m=l-n,v=f*f+m*m;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(v>Fu)if(!(Math.abs(m*u-d*f)>Fu)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let _=r-o,T=i-l,S=u*u+d*d,A=_*_+T*T,I=Math.sqrt(S),D=Math.sqrt(v),N=s*Math.tan((cA-Math.acos((S+v-A)/(2*I*D)))/2),U=N/D,O=N/I;Math.abs(U-1)>Fu&&this._append`L${e+U*f},${n+U*m}`,this._append`A${s},${s},0,0,${+(m*_>f*T)},${this._x1=e+O*u},${this._y1=n+O*d}`}}arc(e,n,r,i,s,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),u=r*Math.sin(i),d=e+l,f=n+u,m=1^o,v=o?i-s:s-i;this._x1===null?this._append`M${d},${f}`:(Math.abs(this._x1-d)>Fu||Math.abs(this._y1-f)>Fu)&&this._append`L${d},${f}`,r&&(v<0&&(v=v%dA+dA),v>zne?this._append`A${r},${r},0,1,${m},${e-l},${n-u}A${r},${r},0,1,${m},${this._x1=d},${this._y1=f}`:v>Fu&&this._append`A${r},${r},0,${+(v>=cA)},${m},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function QC(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Gne(e)}function XC(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function UB(t){this._context=t}UB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function cb(t){return new UB(t)}function FB(t){return t[0]}function jB(t){return t[1]}function BB(t,e){var n=Gt(!0),r=null,i=cb,s=null,o=QC(l);t=typeof t=="function"?t:t===void 0?FB:Gt(t),e=typeof e=="function"?e:e===void 0?jB:Gt(e);function l(u){var d,f=(u=XC(u)).length,m,v=!1,_;for(r==null&&(s=i(_=o())),d=0;d<=f;++d)!(d<f&&n(m=u[d],d,u))===v&&((v=!v)?s.lineStart():s.lineEnd()),v&&s.point(+t(m,d,u),+e(m,d,u));if(_)return s=null,_+""||null}return l.x=function(u){return arguments.length?(t=typeof u=="function"?u:Gt(+u),l):t},l.y=function(u){return arguments.length?(e=typeof u=="function"?u:Gt(+u),l):e},l.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Gt(!!u),l):n},l.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),l):i},l.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),l):r},l}function Lv(t,e,n){var r=null,i=Gt(!0),s=null,o=cb,l=null,u=QC(d);t=typeof t=="function"?t:t===void 0?FB:Gt(+t),e=typeof e=="function"?e:Gt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?jB:Gt(+n);function d(m){var v,_,T,S=(m=XC(m)).length,A,I=!1,D,N=new Array(S),U=new Array(S);for(s==null&&(l=o(D=u())),v=0;v<=S;++v){if(!(v<S&&i(A=m[v],v,m))===I)if(I=!I)_=v,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),T=v-1;T>=_;--T)l.point(N[T],U[T]);l.lineEnd(),l.areaEnd()}I&&(N[v]=+t(A,v,m),U[v]=+e(A,v,m),l.point(r?+r(A,v,m):N[v],n?+n(A,v,m):U[v]))}if(D)return l=null,D+""||null}function f(){return BB().defined(i).curve(o).context(s)}return d.x=function(m){return arguments.length?(t=typeof m=="function"?m:Gt(+m),r=null,d):t},d.x0=function(m){return arguments.length?(t=typeof m=="function"?m:Gt(+m),d):t},d.x1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:Gt(+m),d):r},d.y=function(m){return arguments.length?(e=typeof m=="function"?m:Gt(+m),n=null,d):e},d.y0=function(m){return arguments.length?(e=typeof m=="function"?m:Gt(+m),d):e},d.y1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:Gt(+m),d):n},d.lineX0=d.lineY0=function(){return f().x(t).y(e)},d.lineY1=function(){return f().x(t).y(n)},d.lineX1=function(){return f().x(r).y(e)},d.defined=function(m){return arguments.length?(i=typeof m=="function"?m:Gt(!!m),d):i},d.curve=function(m){return arguments.length?(o=m,s!=null&&(l=o(s)),d):o},d.context=function(m){return arguments.length?(m==null?s=l=null:l=o(s=m),d):s},d}class qB{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function Hne(t){return new qB(t,!0)}function Kne(t){return new qB(t,!1)}const ZC={draw(t,e){const n=Ps(e/K0);t.moveTo(n,0),t.arc(0,0,n,0,ub)}},Wne={draw(t,e){const n=Ps(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},zB=Ps(1/3),Yne=zB*2,Jne={draw(t,e){const n=Ps(e/Yne),r=n*zB;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},Qne={draw(t,e){const n=Ps(e),r=-n/2;t.rect(r,r,n,n)}},Xne=.8908130915292852,$B=H0(K0/10)/H0(7*K0/10),Zne=H0(ub/10)*$B,ere=-VB(ub/10)*$B,tre={draw(t,e){const n=Ps(e*Xne),r=Zne*n,i=ere*n;t.moveTo(0,-n),t.lineTo(r,i);for(let s=1;s<5;++s){const o=ub*s/5,l=VB(o),u=H0(o);t.lineTo(u*n,-l*n),t.lineTo(l*r-u*i,u*r+l*i)}t.closePath()}},WT=Ps(3),nre={draw(t,e){const n=-Ps(e/(WT*3));t.moveTo(0,n*2),t.lineTo(-WT*n,-n),t.lineTo(WT*n,-n),t.closePath()}},Wi=-.5,Yi=Ps(3)/2,fA=1/Ps(12),rre=(fA/2+1)*3,ire={draw(t,e){const n=Ps(e/rre),r=n/2,i=n*fA,s=r,o=n*fA+n,l=-s,u=o;t.moveTo(r,i),t.lineTo(s,o),t.lineTo(l,u),t.lineTo(Wi*r-Yi*i,Yi*r+Wi*i),t.lineTo(Wi*s-Yi*o,Yi*s+Wi*o),t.lineTo(Wi*l-Yi*u,Yi*l+Wi*u),t.lineTo(Wi*r+Yi*i,Wi*i-Yi*r),t.lineTo(Wi*s+Yi*o,Wi*o-Yi*s),t.lineTo(Wi*l+Yi*u,Wi*u-Yi*l),t.closePath()}};function sre(t,e){let n=null,r=QC(i);t=typeof t=="function"?t:Gt(t||ZC),e=typeof e=="function"?e:Gt(e===void 0?64:+e);function i(){let s;if(n||(n=s=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:Gt(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:Gt(+s),i):e},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function W0(){}function Y0(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function GB(t){this._context=t}GB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Y0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Y0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function ore(t){return new GB(t)}function HB(t){this._context=t}HB.prototype={areaStart:W0,areaEnd:W0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Y0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function are(t){return new HB(t)}function KB(t){this._context=t}KB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Y0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function lre(t){return new KB(t)}function WB(t){this._context=t}WB.prototype={areaStart:W0,areaEnd:W0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function ure(t){return new WB(t)}function tO(t){return t<0?-1:1}function nO(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),l=(s*i+o*r)/(r+i);return(tO(s)+tO(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function rO(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function YT(t,e,n){var r=t._x0,i=t._y0,s=t._x1,o=t._y1,l=(s-r)/3;t._context.bezierCurveTo(r+l,i+l*e,s-l,o-l*n,s,o)}function J0(t){this._context=t}J0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:YT(this,this._t0,rO(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,YT(this,rO(this,n=nO(this,t,e)),n);break;default:YT(this,this._t0,n=nO(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function YB(t){this._context=new JB(t)}(YB.prototype=Object.create(J0.prototype)).point=function(t,e){J0.prototype.point.call(this,e,t)};function JB(t){this._context=t}JB.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function cre(t){return new J0(t)}function dre(t){return new YB(t)}function QB(t){this._context=t}QB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=iO(t),i=iO(e),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function iO(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,o[e]-=r*o[e-1];for(i[n-1]=o[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function fre(t){return new QB(t)}function db(t,e){this._context=t,this._t=e}db.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function hre(t){return new db(t,.5)}function mre(t){return new db(t,0)}function pre(t){return new db(t,1)}function Mf(t,e){if((o=t.length)>1)for(var n=1,r,i,s=t[e[0]],o,l=s.length;n<o;++n)for(i=s,s=t[e[n]],r=0;r<l;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function hA(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function gre(t,e){return t[e]}function yre(t){const e=[];return e.key=t,e}function vre(){var t=Gt([]),e=hA,n=Mf,r=gre;function i(s){var o=Array.from(t.apply(this,arguments),yre),l,u=o.length,d=-1,f;for(const m of s)for(l=0,++d;l<u;++l)(o[l][d]=[0,+r(m,o[l].key,d,s)]).data=m;for(l=0,f=XC(e(o));l<u;++l)o[f[l]].index=l;return n(o,f),o}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:Gt(Array.from(s)),i):t},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:Gt(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?hA:typeof s=="function"?s:Gt(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s??Mf,i):n},i}function xre(t,e){if((r=t.length)>0){for(var n,r,i=0,s=t[0].length,o;i<s;++i){for(o=n=0;n<r;++n)o+=t[n][i][1]||0;if(o)for(n=0;n<r;++n)t[n][i][1]/=o}Mf(t,e)}}function bre(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,s=r.length;n<s;++n){for(var o=0,l=0;o<i;++o)l+=t[o][n][1]||0;r[n][1]+=r[n][0]=-l/2}Mf(t,e)}}function _re(t,e){if(!(!((o=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,s,o;r<s;++r){for(var l=0,u=0,d=0;l<o;++l){for(var f=t[e[l]],m=f[r][1]||0,v=f[r-1][1]||0,_=(m-v)/2,T=0;T<l;++T){var S=t[e[T]],A=S[r][1]||0,I=S[r-1][1]||0;_+=A-I}u+=m,d+=_*m}i[r-1][1]+=i[r-1][0]=n,u&&(n-=d/u)}i[r-1][1]+=i[r-1][0]=n,Mf(t,e)}}var wre=["type","size","sizeType"];function mA(){return mA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mA.apply(null,arguments)}function sO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function oO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sO(Object(n),!0).forEach(function(r){Tre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tre(t,e,n){return(e=Ere(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ere(t){var e=Sre(t,"string");return typeof e=="symbol"?e:e+""}function Sre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Are(t,e){if(t==null)return{};var n,r,i=Cre(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Cre(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var XB={symbolCircle:ZC,symbolCross:Wne,symbolDiamond:Jne,symbolSquare:Qne,symbolStar:tre,symbolTriangle:nre,symbolWye:ire},Ire=Math.PI/180,Rre=t=>{var e="symbol".concat(Vg(t));return XB[e]||ZC},Pre=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*Ire;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Nre=(t,e)=>{XB["symbol".concat(Vg(t))]=e},ZB=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=Are(t,wre),s=oO(oO({},i),{},{type:e,size:n,sizeType:r}),o=()=>{var m=Rre(e),v=sre().type(m).size(Pre(n,r,e));return v()},{className:l,cx:u,cy:d}=s,f=Wn(s,!0);return u===+u&&d===+d&&n===+n?P.createElement("path",mA({},f,{className:Bt("recharts-symbols",l),transform:"translate(".concat(u,", ").concat(d,")"),d:o()})):null};ZB.registerSymbol=Nre;function pA(){return pA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pA.apply(null,arguments)}function aO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Mre(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aO(Object(n),!0).forEach(function(r){eI(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function eI(t,e,n){return(e=Dre(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dre(t){var e=kre(t,"string");return typeof e=="symbol"?e:e+""}function kre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ji=32;class tI extends P.PureComponent{renderIcon(e,n){var{inactiveColor:r}=this.props,i=Ji/2,s=Ji/6,o=Ji/3,l=e.inactive?r:e.color,u=n??e.type;if(u==="none")return null;if(u==="plainline")return P.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:i,x2:Ji,y2:i,className:"recharts-legend-icon"});if(u==="line")return P.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(i,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(i,`
            H`).concat(Ji,"M").concat(2*o,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(i),className:"recharts-legend-icon"});if(u==="rect")return P.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Ji/8,"h").concat(Ji,"v").concat(Ji*3/4,"h").concat(-Ji,"z"),className:"recharts-legend-icon"});if(P.isValidElement(e.legendIcon)){var d=Mre({},e);return delete d.legendIcon,P.cloneElement(e.legendIcon,d)}return P.createElement(ZB,{fill:l,cx:i,cy:i,size:Ji,sizeType:"diameter",type:u})}renderItems(){var{payload:e,iconSize:n,layout:r,formatter:i,inactiveColor:s,iconType:o}=this.props,l={x:0,y:0,width:Ji,height:Ji},u={display:r==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((f,m)=>{var v=f.formatter||i,_=Bt({"recharts-legend-item":!0,["legend-item-".concat(m)]:!0,inactive:f.inactive});if(f.type==="none")return null;var T=f.inactive?s:f.color,S=v?v(f.value,f,m):f.value;return P.createElement("li",pA({className:_,style:u,key:"legend-item-".concat(m)},RB(this.props,f,m)),P.createElement(JC,{width:n,height:n,viewBox:l,style:d,"aria-label":"".concat(S," legend icon")},this.renderIcon(f,o)),P.createElement("span",{className:"recharts-legend-item-text",style:{color:T}},S))})}render(){var{payload:e,layout:n,align:r}=this.props;if(!e||!e.length)return null;var i={padding:0,margin:0,textAlign:n==="horizontal"?r:"left"};return P.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}eI(tI,"displayName","Legend");eI(tI,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var JT={},QT={},lO;function Ore(){return lO||(lO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let s=0;s<n.length;s++){const o=n[s],l=r(o);i.has(l)||i.set(l,o)}return Array.from(i.values())}t.uniqBy=e})(QT)),QT}var XT={},uO;function e6(){return uO||(uO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(XT)),XT}var ZT={},eE={},tE={},cO;function Vre(){return cO||(cO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(tE)),tE}var dO;function nI(){return dO||(dO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Vre();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(eE)),eE}var nE={},fO;function Lre(){return fO||(fO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(nE)),nE}var hO;function Ure(){return hO||(hO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=nI(),n=Lre();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(ZT)),ZT}var rE={},iE={},mO;function Fre(){return mO||(mO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=KC();function n(r){return function(i){return e.get(i,r)}}t.property=n})(iE)),iE}var sE={},oE={},aE={},lE={},pO;function t6(){return pO||(pO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(lE)),lE}var uE={},gO;function n6(){return gO||(gO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(uE)),uE}var cE={},yO;function rI(){return yO||(yO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.eq=e})(cE)),cE}var vO;function jre(){return vO||(vO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=iI(),n=t6(),r=n6(),i=rI();function s(m,v,_){return typeof _!="function"?e.isMatch(m,v):o(m,v,function T(S,A,I,D,N,U){const O=_(S,A,I,D,N,U);return O!==void 0?!!O:o(S,A,T,U)},new Map)}function o(m,v,_,T){if(v===m)return!0;switch(typeof v){case"object":return l(m,v,_,T);case"function":return Object.keys(v).length>0?o(m,{...v},_,T):i.eq(m,v);default:return n.isObject(m)?typeof v=="string"?v==="":!0:i.eq(m,v)}}function l(m,v,_,T){if(v==null)return!0;if(Array.isArray(v))return d(m,v,_,T);if(v instanceof Map)return u(m,v,_,T);if(v instanceof Set)return f(m,v,_,T);const S=Object.keys(v);if(m==null)return S.length===0;if(S.length===0)return!0;if(T&&T.has(v))return T.get(v)===m;T&&T.set(v,m);try{for(let A=0;A<S.length;A++){const I=S[A];if(!r.isPrimitive(m)&&!(I in m)||v[I]===void 0&&m[I]!==void 0||v[I]===null&&m[I]!==null||!_(m[I],v[I],I,m,v,T))return!1}return!0}finally{T&&T.delete(v)}}function u(m,v,_,T){if(v.size===0)return!0;if(!(m instanceof Map))return!1;for(const[S,A]of v.entries()){const I=m.get(S);if(_(I,A,S,m,v,T)===!1)return!1}return!0}function d(m,v,_,T){if(v.length===0)return!0;if(!Array.isArray(m))return!1;const S=new Set;for(let A=0;A<v.length;A++){const I=v[A];let D=!1;for(let N=0;N<m.length;N++){if(S.has(N))continue;const U=m[N];let O=!1;if(_(U,I,A,m,v,T)&&(O=!0),O){S.add(N),D=!0;break}}if(!D)return!1}return!0}function f(m,v,_,T){return v.size===0?!0:m instanceof Set?d([...m],[...v],_,T):!1}t.isMatchWith=s,t.isSetMatch=f})(aE)),aE}var xO;function iI(){return xO||(xO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=jre();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(oE)),oE}var dE={},fE={},hE={},bO;function r6(){return bO||(bO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(hE)),hE}var mE={},_O;function sI(){return _O||(_O=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(mE)),mE}var pE={},wO;function oI(){return wO||(wO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",s="[object Arguments]",o="[object Symbol]",l="[object Date]",u="[object Map]",d="[object Set]",f="[object Array]",m="[object Function]",v="[object ArrayBuffer]",_="[object Object]",T="[object Error]",S="[object DataView]",A="[object Uint8Array]",I="[object Uint8ClampedArray]",D="[object Uint16Array]",N="[object Uint32Array]",U="[object BigUint64Array]",O="[object Int8Array]",q="[object Int16Array]",M="[object Int32Array]",R="[object BigInt64Array]",k="[object Float32Array]",F="[object Float64Array]";t.argumentsTag=s,t.arrayBufferTag=v,t.arrayTag=f,t.bigInt64ArrayTag=R,t.bigUint64ArrayTag=U,t.booleanTag=i,t.dataViewTag=S,t.dateTag=l,t.errorTag=T,t.float32ArrayTag=k,t.float64ArrayTag=F,t.functionTag=m,t.int16ArrayTag=q,t.int32ArrayTag=M,t.int8ArrayTag=O,t.mapTag=u,t.numberTag=r,t.objectTag=_,t.regexpTag=e,t.setTag=d,t.stringTag=n,t.symbolTag=o,t.uint16ArrayTag=D,t.uint32ArrayTag=N,t.uint8ArrayTag=A,t.uint8ClampedArrayTag=I})(pE)),pE}var gE={},TO;function Bre(){return TO||(TO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(gE)),gE}var EO;function i6(){return EO||(EO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=r6(),n=sI(),r=oI(),i=n6(),s=Bre();function o(f,m){return l(f,void 0,f,new Map,m)}function l(f,m,v,_=new Map,T=void 0){const S=T==null?void 0:T(f,m,v,_);if(S!==void 0)return S;if(i.isPrimitive(f))return f;if(_.has(f))return _.get(f);if(Array.isArray(f)){const A=new Array(f.length);_.set(f,A);for(let I=0;I<f.length;I++)A[I]=l(f[I],I,v,_,T);return Object.hasOwn(f,"index")&&(A.index=f.index),Object.hasOwn(f,"input")&&(A.input=f.input),A}if(f instanceof Date)return new Date(f.getTime());if(f instanceof RegExp){const A=new RegExp(f.source,f.flags);return A.lastIndex=f.lastIndex,A}if(f instanceof Map){const A=new Map;_.set(f,A);for(const[I,D]of f)A.set(I,l(D,I,v,_,T));return A}if(f instanceof Set){const A=new Set;_.set(f,A);for(const I of f)A.add(l(I,void 0,v,_,T));return A}if(typeof Buffer<"u"&&Buffer.isBuffer(f))return f.subarray();if(s.isTypedArray(f)){const A=new(Object.getPrototypeOf(f)).constructor(f.length);_.set(f,A);for(let I=0;I<f.length;I++)A[I]=l(f[I],I,v,_,T);return A}if(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer)return f.slice(0);if(f instanceof DataView){const A=new DataView(f.buffer.slice(0),f.byteOffset,f.byteLength);return _.set(f,A),u(A,f,v,_,T),A}if(typeof File<"u"&&f instanceof File){const A=new File([f],f.name,{type:f.type});return _.set(f,A),u(A,f,v,_,T),A}if(f instanceof Blob){const A=new Blob([f],{type:f.type});return _.set(f,A),u(A,f,v,_,T),A}if(f instanceof Error){const A=new f.constructor;return _.set(f,A),A.message=f.message,A.name=f.name,A.stack=f.stack,A.cause=f.cause,u(A,f,v,_,T),A}if(typeof f=="object"&&d(f)){const A=Object.create(Object.getPrototypeOf(f));return _.set(f,A),u(A,f,v,_,T),A}return f}function u(f,m,v=f,_,T){const S=[...Object.keys(m),...e.getSymbols(m)];for(let A=0;A<S.length;A++){const I=S[A],D=Object.getOwnPropertyDescriptor(f,I);(D==null||D.writable)&&(f[I]=l(m[I],I,v,_,T))}}function d(f){switch(n.getTag(f)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=o,t.cloneDeepWithImpl=l,t.copyProperties=u})(fE)),fE}var SO;function qre(){return SO||(SO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=i6();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(dE)),dE}var AO;function zre(){return AO||(AO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=iI(),n=qre();function r(i){return i=n.cloneDeep(i),s=>e.isMatch(s,i)}t.matches=r})(sE)),sE}var yE={},vE={},xE={},CO;function $re(){return CO||(CO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=i6(),n=oI();function r(i,s){return e.cloneDeepWith(i,(o,l,u,d)=>{const f=s==null?void 0:s(o,l,u,d);if(f!==void 0)return f;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const m=new i.constructor(i==null?void 0:i.valueOf());return e.copyProperties(m,i),m}case n.argumentsTag:{const m={};return e.copyProperties(m,i),m.length=i.length,m[Symbol.iterator]=i[Symbol.iterator],m}default:return}})}t.cloneDeepWith=r})(xE)),xE}var IO;function Gre(){return IO||(IO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$re();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(vE)),vE}var bE={},_E={},RO;function s6(){return RO||(RO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(_E)),_E}var wE={},PO;function Hre(){return PO||(PO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=sI();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(wE)),wE}var NO;function Kre(){return NO||(NO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=SB(),n=s6(),r=Hre(),i=HC();function s(o,l){let u;if(Array.isArray(l)?u=l:typeof l=="string"&&e.isDeepKey(l)&&(o==null?void 0:o[l])==null?u=i.toPath(l):u=[l],u.length===0)return!1;let d=o;for(let f=0;f<u.length;f++){const m=u[f];if((d==null||!Object.hasOwn(d,m))&&!((Array.isArray(d)||r.isArguments(d))&&n.isIndex(m)&&m<d.length))return!1;d=d[m]}return!0}t.has=s})(bE)),bE}var MO;function Wre(){return MO||(MO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=iI(),n=AB(),r=Gre(),i=KC(),s=Kre();function o(l,u){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=n.toKey(l);break}}return u=r.cloneDeep(u),function(d){const f=i.get(d,l);return f===void 0?s.has(d,l):u===void 0?f===void 0:e.isMatch(f,u)}}t.matchesProperty=o})(yE)),yE}var DO;function Yre(){return DO||(DO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=e6(),n=Fre(),r=zre(),i=Wre();function s(o){if(o==null)return e.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?i.matchesProperty(o[0],o[1]):r.matches(o);case"string":case"symbol":case"number":return n.property(o)}}t.iteratee=s})(rE)),rE}var kO;function Jre(){return kO||(kO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Ore(),n=e6(),r=Ure(),i=Yre();function s(o,l=n.identity){return r.isArrayLikeObject(o)?e.uniqBy(Array.from(o),i.iteratee(l)):[]}t.uniqBy=s})(JT)),JT}var TE,OO;function Qre(){return OO||(OO=1,TE=Jre().uniqBy),TE}var Xre=Qre();const VO=xo(Xre);function o6(t,e,n){return e===!0?VO(t,n):typeof e=="function"?VO(t,e):t}var EE={exports:{}},SE={},AE={exports:{}},CE={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LO;function Zre(){if(LO)return CE;LO=1;var t=sh();function e(m,v){return m===v&&(m!==0||1/m===1/v)||m!==m&&v!==v}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function l(m,v){var _=v(),T=r({inst:{value:_,getSnapshot:v}}),S=T[0].inst,A=T[1];return s(function(){S.value=_,S.getSnapshot=v,u(S)&&A({inst:S})},[m,_,v]),i(function(){return u(S)&&A({inst:S}),m(function(){u(S)&&A({inst:S})})},[m]),o(_),_}function u(m){var v=m.getSnapshot;m=m.value;try{var _=v();return!n(m,_)}catch{return!0}}function d(m,v){return v()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return CE.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:f,CE}var UO;function eie(){return UO||(UO=1,AE.exports=Zre()),AE.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FO;function tie(){if(FO)return SE;FO=1;var t=sh(),e=eie();function n(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,l=t.useMemo,u=t.useDebugValue;return SE.useSyncExternalStoreWithSelector=function(d,f,m,v,_){var T=s(null);if(T.current===null){var S={hasValue:!1,value:null};T.current=S}else S=T.current;T=l(function(){function I(q){if(!D){if(D=!0,N=q,q=v(q),_!==void 0&&S.hasValue){var M=S.value;if(_(M,q))return U=M}return U=q}if(M=U,r(N,q))return M;var R=v(q);return _!==void 0&&_(M,R)?(N=q,M):(N=q,U=R)}var D=!1,N,U,O=m===void 0?null:m;return[function(){return I(f())},O===null?void 0:function(){return I(O())}]},[f,m,v,_]);var A=i(d,T[0],T[1]);return o(function(){S.hasValue=!0,S.value=A},[A]),u(A),A},SE}var jO;function nie(){return jO||(jO=1,EE.exports=tie()),EE.exports}var rie=nie(),aI=P.createContext(null),iie=t=>t,Cr=()=>{var t=P.useContext(aI);return t?t.store.dispatch:iie},g0=()=>{},sie=()=>g0,oie=(t,e)=>t===e;function He(t){var e=P.useContext(aI);return rie.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:sie,e?e.store.getState:g0,e?e.store.getState:g0,e?t:g0,oie)}function aie(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function lie(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function uie(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var BO=t=>Array.isArray(t)?t:[t];function cie(t){const e=Array.isArray(t[0])?t[0]:t;return uie(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function die(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var fie=class{constructor(t){this.value=t}deref(){return this.value}},hie=typeof WeakRef<"u"?WeakRef:fie,mie=0,qO=1;function Uv(){return{s:mie,v:void 0,o:null,p:null}}function a6(t,e={}){let n=Uv();const{resultEqualityCheck:r}=e;let i,s=0;function o(){var m;let l=n;const{length:u}=arguments;for(let v=0,_=u;v<_;v++){const T=arguments[v];if(typeof T=="function"||typeof T=="object"&&T!==null){let S=l.o;S===null&&(l.o=S=new WeakMap);const A=S.get(T);A===void 0?(l=Uv(),S.set(T,l)):l=A}else{let S=l.p;S===null&&(l.p=S=new Map);const A=S.get(T);A===void 0?(l=Uv(),S.set(T,l)):l=A}}const d=l;let f;if(l.s===qO)f=l.v;else if(f=t.apply(null,arguments),s++,r){const v=((m=i==null?void 0:i.deref)==null?void 0:m.call(i))??i;v!=null&&r(v,f)&&(f=v,s!==0&&s--),i=typeof f=="object"&&f!==null||typeof f=="function"?new hie(f):f}return d.s=qO,d.v=f,f}return o.clearCache=()=>{n=Uv(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function pie(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let s=0,o=0,l,u={},d=i.pop();typeof d=="object"&&(u=d,d=i.pop()),aie(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const f={...n,...u},{memoize:m,memoizeOptions:v=[],argsMemoize:_=a6,argsMemoizeOptions:T=[]}=f,S=BO(v),A=BO(T),I=cie(i),D=m(function(){return s++,d.apply(null,arguments)},...S),N=_(function(){o++;const O=die(I,arguments);return l=D.apply(null,O),l},...A);return Object.assign(N,{resultFunc:d,memoizedResultFunc:D,dependencies:I,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:m,argsMemoize:_})};return Object.assign(r,{withTypes:()=>r}),r}var fe=pie(a6),gie=Object.assign((t,e=fe)=>{lie(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(s=>t[s]);return e(r,(...s)=>s.reduce((o,l,u)=>(o[n[u]]=l,o),{}))},{withTypes:()=>gie}),IE={},RE={},PE={},zO;function yie(){return zO||(zO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,s)=>{if(r!==i){const o=e(r),l=e(i);if(o===l&&o===0){if(r<i)return s==="desc"?1:-1;if(r>i)return s==="desc"?-1:1}return s==="desc"?l-o:o-l}return 0};t.compareValues=n})(PE)),PE}var NE={},ME={},$O;function l6(){return $O||($O=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(ME)),ME}var GO;function vie(){return GO||(GO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=l6(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,o){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(r.test(s)||!n.test(s))||o!=null&&Object.hasOwn(o,s)}t.isKey=i})(NE)),NE}var HO;function xie(){return HO||(HO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yie(),n=vie(),r=HC();function i(s,o,l,u){if(s==null)return[];l=u?void 0:l,Array.isArray(s)||(s=Object.values(s)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(_=>String(_));const d=(_,T)=>{let S=_;for(let A=0;A<T.length&&S!=null;++A)S=S[T[A]];return S},f=(_,T)=>T==null||_==null?T:typeof _=="object"&&"key"in _?Object.hasOwn(T,_.key)?T[_.key]:d(T,_.path):typeof _=="function"?_(T):Array.isArray(_)?d(T,_):typeof T=="object"?T[_]:T,m=o.map(_=>(Array.isArray(_)&&_.length===1&&(_=_[0]),_==null||typeof _=="function"||Array.isArray(_)||n.isKey(_)?_:{key:_,path:r.toPath(_)}));return s.map(_=>({original:_,criteria:m.map(T=>f(T,_))})).slice().sort((_,T)=>{for(let S=0;S<m.length;S++){const A=e.compareValues(_.criteria[S],T.criteria[S],l[S]);if(A!==0)return A}return 0}).map(_=>_.original)}t.orderBy=i})(RE)),RE}var DE={},KO;function bie(){return KO||(KO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],s=Math.floor(r),o=(l,u)=>{for(let d=0;d<l.length;d++){const f=l[d];Array.isArray(f)&&u<s?o(f,u+1):i.push(f)}};return o(n,0),i}t.flatten=e})(DE)),DE}var kE={},WO;function u6(){return WO||(WO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=s6(),n=nI(),r=t6(),i=rI();function s(o,l,u){return r.isObject(u)&&(typeof l=="number"&&n.isArrayLike(u)&&e.isIndex(l)&&l<u.length||typeof l=="string"&&l in u)?i.eq(u[l],o):!1}t.isIterateeCall=s})(kE)),kE}var YO;function _ie(){return YO||(YO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=xie(),n=bie(),r=u6();function i(s,...o){const l=o.length;return l>1&&r.isIterateeCall(s,o[0],o[1])?o=[]:l>2&&r.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),e.orderBy(s,n.flatten(o),["asc"])}t.sortBy=i})(IE)),IE}var OE,JO;function wie(){return JO||(JO=1,OE=_ie().sortBy),OE}var Tie=wie();const fb=xo(Tie);var c6=t=>t.legend.settings,Eie=t=>t.legend.size,Sie=t=>t.legend.payload,Aie=fe([Sie,c6],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?fb(r,n):r});function Cie(){return He(Aie)}var Fv=1;function d6(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=P.useState({height:0,left:0,top:0,width:0}),r=P.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),o={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(o.height-e.height)>Fv||Math.abs(o.left-e.left)>Fv||Math.abs(o.top-e.top)>Fv||Math.abs(o.width-e.width)>Fv)&&n({height:o.height,left:o.left,top:o.top,width:o.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function vr(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Iie=typeof Symbol=="function"&&Symbol.observable||"@@observable",QO=Iie,VE=()=>Math.random().toString(36).substring(7).split("").join("."),Rie={INIT:`@@redux/INIT${VE()}`,REPLACE:`@@redux/REPLACE${VE()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${VE()}`},Q0=Rie;function lI(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function f6(t,e,n){if(typeof t!="function")throw new Error(vr(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(vr(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(vr(1));return n(f6)(t,e)}let r=t,i=e,s=new Map,o=s,l=0,u=!1;function d(){o===s&&(o=new Map,s.forEach((A,I)=>{o.set(I,A)}))}function f(){if(u)throw new Error(vr(3));return i}function m(A){if(typeof A!="function")throw new Error(vr(4));if(u)throw new Error(vr(5));let I=!0;d();const D=l++;return o.set(D,A),function(){if(I){if(u)throw new Error(vr(6));I=!1,d(),o.delete(D),s=null}}}function v(A){if(!lI(A))throw new Error(vr(7));if(typeof A.type>"u")throw new Error(vr(8));if(typeof A.type!="string")throw new Error(vr(17));if(u)throw new Error(vr(9));try{u=!0,i=r(i,A)}finally{u=!1}return(s=o).forEach(D=>{D()}),A}function _(A){if(typeof A!="function")throw new Error(vr(10));r=A,v({type:Q0.REPLACE})}function T(){const A=m;return{subscribe(I){if(typeof I!="object"||I===null)throw new Error(vr(11));function D(){const U=I;U.next&&U.next(f())}return D(),{unsubscribe:A(D)}},[QO](){return this}}}return v({type:Q0.INIT}),{dispatch:v,subscribe:m,getState:f,replaceReducer:_,[QO]:T}}function Pie(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:Q0.INIT})>"u")throw new Error(vr(12));if(typeof n(void 0,{type:Q0.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(vr(13))})}function h6(t){const e=Object.keys(t),n={};for(let s=0;s<e.length;s++){const o=e[s];typeof t[o]=="function"&&(n[o]=t[o])}const r=Object.keys(n);let i;try{Pie(n)}catch(s){i=s}return function(o={},l){if(i)throw i;let u=!1;const d={};for(let f=0;f<r.length;f++){const m=r[f],v=n[m],_=o[m],T=v(_,l);if(typeof T>"u")throw l&&l.type,new Error(vr(14));d[m]=T,u=u||T!==_}return u=u||r.length!==Object.keys(o).length,u?d:o}}function X0(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function Nie(...t){return e=>(n,r)=>{const i=e(n,r);let s=()=>{throw new Error(vr(15))};const o={getState:i.getState,dispatch:(u,...d)=>s(u,...d)},l=t.map(u=>u(o));return s=X0(...l)(i.dispatch),{...i,dispatch:s}}}function m6(t){return lI(t)&&"type"in t&&typeof t.type=="string"}var p6=Symbol.for("immer-nothing"),XO=Symbol.for("immer-draftable"),Ni=Symbol.for("immer-state");function _s(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Df=Object.getPrototypeOf;function wc(t){return!!t&&!!t[Ni]}function ra(t){var e;return t?g6(t)||Array.isArray(t)||!!t[XO]||!!((e=t.constructor)!=null&&e[XO])||mb(t)||pb(t):!1}var Mie=Object.prototype.constructor.toString();function g6(t){if(!t||typeof t!="object")return!1;const e=Df(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Mie}function Z0(t,e){hb(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function hb(t){const e=t[Ni];return e?e.type_:Array.isArray(t)?1:mb(t)?2:pb(t)?3:0}function gA(t,e){return hb(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function y6(t,e,n){const r=hb(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function Die(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function mb(t){return t instanceof Map}function pb(t){return t instanceof Set}function ju(t){return t.copy_||t.base_}function yA(t,e){if(mb(t))return new Map(t);if(pb(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=g6(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[Ni];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],l=r[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(r[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[o]})}return Object.create(Df(t),r)}else{const r=Df(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function uI(t,e=!1){return gb(t)||wc(t)||!ra(t)||(hb(t)>1&&(t.set=t.add=t.clear=t.delete=kie),Object.freeze(t),e&&Object.entries(t).forEach(([n,r])=>uI(r,!0))),t}function kie(){_s(2)}function gb(t){return Object.isFrozen(t)}var Oie={};function Tc(t){const e=Oie[t];return e||_s(0,t),e}var Qp;function v6(){return Qp}function Vie(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function ZO(t,e){e&&(Tc("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function vA(t){xA(t),t.drafts_.forEach(Lie),t.drafts_=null}function xA(t){t===Qp&&(Qp=t.parent_)}function eV(t){return Qp=Vie(Qp,t)}function Lie(t){const e=t[Ni];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function tV(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Ni].modified_&&(vA(e),_s(4)),ra(t)&&(t=ex(e,t),e.parent_||tx(e,t)),e.patches_&&Tc("Patches").generateReplacementPatches_(n[Ni].base_,t,e.patches_,e.inversePatches_)):t=ex(e,n,[]),vA(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==p6?t:void 0}function ex(t,e,n){if(gb(e))return e;const r=e[Ni];if(!r)return Z0(e,(i,s)=>nV(t,r,e,i,s,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return tx(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),Z0(s,(l,u)=>nV(t,r,i,l,u,n,o)),tx(t,i,!1),n&&t.patches_&&Tc("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function nV(t,e,n,r,i,s,o){if(wc(i)){const l=s&&e&&e.type_!==3&&!gA(e.assigned_,r)?s.concat(r):void 0,u=ex(t,i,l);if(y6(n,r,u),wc(u))t.canAutoFreeze_=!1;else return}else o&&n.add(i);if(ra(i)&&!gb(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;ex(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&tx(t,i)}}function tx(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&uI(e,n)}function Uie(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:v6(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=cI;n&&(i=[r],s=Xp);const{revoke:o,proxy:l}=Proxy.revocable(i,s);return r.draft_=l,r.revoke_=o,l}var cI={get(t,e){if(e===Ni)return t;const n=ju(t);if(!gA(n,e))return Fie(t,n,e);const r=n[e];return t.finalized_||!ra(r)?r:r===LE(t.base_,e)?(UE(t),t.copy_[e]=_A(r,t)):r},has(t,e){return e in ju(t)},ownKeys(t){return Reflect.ownKeys(ju(t))},set(t,e,n){const r=x6(ju(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=LE(ju(t),e),s=i==null?void 0:i[Ni];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(Die(n,i)&&(n!==void 0||gA(t.base_,e)))return!0;UE(t),bA(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return LE(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,UE(t),bA(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=ju(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){_s(11)},getPrototypeOf(t){return Df(t.base_)},setPrototypeOf(){_s(12)}},Xp={};Z0(cI,(t,e)=>{Xp[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Xp.deleteProperty=function(t,e){return Xp.set.call(this,t,e,void 0)};Xp.set=function(t,e,n){return cI.set.call(this,t[0],e,n,t[0])};function LE(t,e){const n=t[Ni];return(n?ju(n):t)[e]}function Fie(t,e,n){var i;const r=x6(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function x6(t,e){if(!(e in t))return;let n=Df(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Df(n)}}function bA(t){t.modified_||(t.modified_=!0,t.parent_&&bA(t.parent_))}function UE(t){t.copy_||(t.copy_=yA(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var jie=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const o=this;return function(u=s,...d){return o.produce(u,f=>n.call(this,f,...d))}}typeof n!="function"&&_s(6),r!==void 0&&typeof r!="function"&&_s(7);let i;if(ra(e)){const s=eV(this),o=_A(e,void 0);let l=!0;try{i=n(o),l=!1}finally{l?vA(s):xA(s)}return ZO(s,r),tV(i,s)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===p6&&(i=void 0),this.autoFreeze_&&uI(i,!0),r){const s=[],o=[];Tc("Patches").generateReplacementPatches_(e,i,s,o),r(s,o)}return i}else _s(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(o,...l)=>this.produceWithPatches(o,u=>e(u,...l));let r,i;return[this.produce(e,n,(o,l)=>{r=o,i=l}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){ra(t)||_s(8),wc(t)&&(t=Zo(t));const e=eV(this),n=_A(t,void 0);return n[Ni].isManual_=!0,xA(e),n}finishDraft(t,e){const n=t&&t[Ni];(!n||!n.isManual_)&&_s(9);const{scope_:r}=n;return ZO(r,e),tV(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=Tc("Patches").applyPatches_;return wc(t)?r(t,e):this.produce(t,i=>r(i,e))}};function _A(t,e){const n=mb(t)?Tc("MapSet").proxyMap_(t,e):pb(t)?Tc("MapSet").proxySet_(t,e):Uie(t,e);return(e?e.scope_:v6()).drafts_.push(n),n}function Zo(t){return wc(t)||_s(10,t),b6(t)}function b6(t){if(!ra(t)||gb(t))return t;const e=t[Ni];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=yA(t,e.scope_.immer_.useStrictShallowCopy_)}else n=yA(t,!0);return Z0(n,(r,i)=>{y6(n,r,b6(i))}),e&&(e.finalized_=!1),n}var Mi=new jie,_6=Mi.produce;Mi.produceWithPatches.bind(Mi);Mi.setAutoFreeze.bind(Mi);Mi.setUseStrictShallowCopy.bind(Mi);Mi.applyPatches.bind(Mi);Mi.createDraft.bind(Mi);Mi.finishDraft.bind(Mi);function w6(t){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,t):i(s)}var Bie=w6(),qie=w6,zie=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?X0:X0.apply(null,arguments)};function us(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(Pi(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>m6(r)&&r.type===t,n}var T6=class dp extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,dp.prototype)}static get[Symbol.species](){return dp}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new dp(...e[0].concat(this)):new dp(...e.concat(this))}};function rV(t){return ra(t)?_6(t,()=>{}):t}function jv(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function $ie(t){return typeof t=="boolean"}var Gie=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=e??{};let o=new T6;return n&&($ie(n)?o.push(Bie):o.push(qie(n.extraArgument))),o},Hie="RTK_autoBatch",iV=t=>e=>{setTimeout(e,t)},Kie=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,s=!1,o=!1;const l=new Set,u=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:iV(10):t.type==="callback"?t.queueNotification:iV(t.timeout),d=()=>{o=!1,s&&(s=!1,l.forEach(f=>f()))};return Object.assign({},r,{subscribe(f){const m=()=>i&&f(),v=r.subscribe(m);return l.add(f),()=>{v(),l.delete(f)}},dispatch(f){var m;try{return i=!((m=f==null?void 0:f.meta)!=null&&m[Hie]),s=!i,s&&(o||(o=!0,u(d))),r.dispatch(f)}finally{i=!0}}})},Wie=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new T6(t);return r&&i.push(Kie(typeof r=="object"?r:void 0)),i};function Yie(t){const e=Gie(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=t||{};let l;if(typeof n=="function")l=n;else if(lI(n))l=h6(n);else throw new Error(Pi(1));let u;typeof r=="function"?u=r(e):u=e();let d=X0;i&&(d=zie({trace:!1,...typeof i=="object"&&i}));const f=Nie(...u),m=Wie(f);let v=typeof o=="function"?o(m):m();const _=d(...v);return f6(l,s,_)}function E6(t){const e={},n=[];let r;const i={addCase(s,o){const l=typeof s=="string"?s:s.type;if(!l)throw new Error(Pi(28));if(l in e)throw new Error(Pi(29));return e[l]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return t(i),[e,n,r]}function Jie(t){return typeof t=="function"}function Qie(t,e){let[n,r,i]=E6(e),s;if(Jie(t))s=()=>rV(t());else{const l=rV(t);s=()=>l}function o(l=s(),u){let d=[n[u.type],...r.filter(({matcher:f})=>f(u)).map(({reducer:f})=>f)];return d.filter(f=>!!f).length===0&&(d=[i]),d.reduce((f,m)=>{if(m)if(wc(f)){const _=m(f,u);return _===void 0?f:_}else{if(ra(f))return _6(f,v=>m(v,u));{const v=m(f,u);if(v===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return f},l)}return o.getInitialState=s,o}var Xie="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Zie=(t=21)=>{let e="",n=t;for(;n--;)e+=Xie[Math.random()*64|0];return e},ese=Symbol.for("rtk-slice-createasyncthunk");function tse(t,e){return`${t}/${e}`}function nse({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[ese];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(Pi(11));const l=(typeof i.reducers=="function"?i.reducers(ise()):i.reducers)||{},u=Object.keys(l),d={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(U,O){const q=typeof U=="string"?U:U.type;if(!q)throw new Error(Pi(12));if(q in d.sliceCaseReducersByType)throw new Error(Pi(13));return d.sliceCaseReducersByType[q]=O,f},addMatcher(U,O){return d.sliceMatchers.push({matcher:U,reducer:O}),f},exposeAction(U,O){return d.actionCreators[U]=O,f},exposeCaseReducer(U,O){return d.sliceCaseReducersByName[U]=O,f}};u.forEach(U=>{const O=l[U],q={reducerName:U,type:tse(s,U),createNotation:typeof i.reducers=="function"};ose(O)?lse(q,O,f,e):sse(q,O,f)});function m(){const[U={},O=[],q=void 0]=typeof i.extraReducers=="function"?E6(i.extraReducers):[i.extraReducers],M={...U,...d.sliceCaseReducersByType};return Qie(i.initialState,R=>{for(let k in M)R.addCase(k,M[k]);for(let k of d.sliceMatchers)R.addMatcher(k.matcher,k.reducer);for(let k of O)R.addMatcher(k.matcher,k.reducer);q&&R.addDefaultCase(q)})}const v=U=>U,_=new Map,T=new WeakMap;let S;function A(U,O){return S||(S=m()),S(U,O)}function I(){return S||(S=m()),S.getInitialState()}function D(U,O=!1){function q(R){let k=R[U];return typeof k>"u"&&O&&(k=jv(T,q,I)),k}function M(R=v){const k=jv(_,O,()=>new WeakMap);return jv(k,R,()=>{const F={};for(const[j,G]of Object.entries(i.selectors??{}))F[j]=rse(G,R,()=>jv(T,R,I),O);return F})}return{reducerPath:U,getSelectors:M,get selectors(){return M(q)},selectSlice:q}}const N={name:s,reducer:A,actions:d.actionCreators,caseReducers:d.sliceCaseReducersByName,getInitialState:I,...D(o),injectInto(U,{reducerPath:O,...q}={}){const M=O??o;return U.inject({reducerPath:M,reducer:A},q),{...N,...D(M,!0)}}};return N}}function rse(t,e,n,r){function i(s,...o){let l=e(s);return typeof l>"u"&&r&&(l=n()),t(l,...o)}return i.unwrapped=t,i}var ki=nse();function ise(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function sse({type:t,reducerName:e,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!ase(r))throw new Error(Pi(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,o?us(t,o):us(t))}function ose(t){return t._reducerDefinitionType==="asyncThunk"}function ase(t){return t._reducerDefinitionType==="reducerWithPrepare"}function lse({type:t,reducerName:e},n,r,i){if(!i)throw new Error(Pi(18));const{payloadCreator:s,fulfilled:o,pending:l,rejected:u,settled:d,options:f}=n,m=i(t,s,f);r.exposeAction(e,m),o&&r.addCase(m.fulfilled,o),l&&r.addCase(m.pending,l),u&&r.addCase(m.rejected,u),d&&r.addMatcher(m.settled,d),r.exposeCaseReducer(e,{fulfilled:o||Bv,pending:l||Bv,rejected:u||Bv,settled:d||Bv})}function Bv(){}var use="task",S6="listener",A6="completed",dI="cancelled",cse=`task-${dI}`,dse=`task-${A6}`,wA=`${S6}-${dI}`,fse=`${S6}-${A6}`,yb=class{constructor(t){pT(this,"name","TaskAbortError");pT(this,"message");this.code=t,this.message=`${use} ${dI} (reason: ${t})`}},fI=(t,e)=>{if(typeof t!="function")throw new TypeError(Pi(32))},nx=()=>{},C6=(t,e=nx)=>(t.catch(e),t),I6=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),uc=(t,e)=>{const n=t.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},cc=t=>{if(t.aborted){const{reason:e}=t;throw new yb(e)}};function R6(t,e){let n=nx;return new Promise((r,i)=>{const s=()=>i(new yb(t.reason));if(t.aborted){s();return}n=I6(t,s),e.finally(()=>n()).then(r,i)}).finally(()=>{n=nx})}var hse=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof yb?"cancelled":"rejected",error:n}}finally{e==null||e()}},rx=t=>e=>C6(R6(t,e).then(n=>(cc(t),n))),P6=t=>{const e=rx(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:vf}=Object,sV={},vb="listenerMiddleware",mse=(t,e)=>{const n=r=>I6(t,()=>uc(r,t.reason));return(r,i)=>{fI(r);const s=new AbortController;n(s);const o=hse(async()=>{cc(t),cc(s.signal);const l=await r({pause:rx(s.signal),delay:P6(s.signal),signal:s.signal});return cc(s.signal),l},()=>uc(s,dse));return i!=null&&i.autoJoin&&e.push(o.catch(nx)),{result:rx(t)(o),cancel(){uc(s,cse)}}}},pse=(t,e)=>{const n=async(r,i)=>{cc(e);let s=()=>{};const l=[new Promise((u,d)=>{let f=t({predicate:r,effect:(m,v)=>{v.unsubscribe(),u([m,v.getState(),v.getOriginalState()])}});s=()=>{f(),d()}})];i!=null&&l.push(new Promise(u=>setTimeout(u,i,null)));try{const u=await R6(e,Promise.race(l));return cc(e),u}finally{s()}};return(r,i)=>C6(n(r,i))},N6=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:s}=t;if(e)i=us(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Pi(21));return fI(s),{predicate:i,type:e,effect:s}},M6=vf(t=>{const{type:e,predicate:n,effect:r}=N6(t);return{id:Zie(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Pi(22))}}},{withTypes:()=>M6}),oV=(t,e)=>{const{type:n,effect:r,predicate:i}=N6(e);return Array.from(t.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===i)&&s.effect===r)},TA=t=>{t.pending.forEach(e=>{uc(e,wA)})},gse=t=>()=>{t.forEach(TA),t.clear()},aV=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},D6=vf(us(`${vb}/add`),{withTypes:()=>D6}),yse=us(`${vb}/removeAll`),k6=vf(us(`${vb}/remove`),{withTypes:()=>k6}),vse=(...t)=>{console.error(`${vb}/error`,...t)},Lg=(t={})=>{const e=new Map,{extra:n,onError:r=vse}=t;fI(r);const i=f=>(f.unsubscribe=()=>e.delete(f.id),e.set(f.id,f),m=>{f.unsubscribe(),m!=null&&m.cancelActive&&TA(f)}),s=f=>{const m=oV(e,f)??M6(f);return i(m)};vf(s,{withTypes:()=>s});const o=f=>{const m=oV(e,f);return m&&(m.unsubscribe(),f.cancelActive&&TA(m)),!!m};vf(o,{withTypes:()=>o});const l=async(f,m,v,_)=>{const T=new AbortController,S=pse(s,T.signal),A=[];try{f.pending.add(T),await Promise.resolve(f.effect(m,vf({},v,{getOriginalState:_,condition:(I,D)=>S(I,D).then(Boolean),take:S,delay:P6(T.signal),pause:rx(T.signal),extra:n,signal:T.signal,fork:mse(T.signal,A),unsubscribe:f.unsubscribe,subscribe:()=>{e.set(f.id,f)},cancelActiveListeners:()=>{f.pending.forEach((I,D,N)=>{I!==T&&(uc(I,wA),N.delete(I))})},cancel:()=>{uc(T,wA),f.pending.delete(T)},throwIfCancelled:()=>{cc(T.signal)}})))}catch(I){I instanceof yb||aV(r,I,{raisedBy:"effect"})}finally{await Promise.all(A),uc(T,fse),f.pending.delete(T)}},u=gse(e);return{middleware:f=>m=>v=>{if(!m6(v))return m(v);if(D6.match(v))return s(v.payload);if(yse.match(v)){u();return}if(k6.match(v))return o(v.payload);let _=f.getState();const T=()=>{if(_===sV)throw new Error(Pi(23));return _};let S;try{if(S=m(v),e.size>0){const A=f.getState(),I=Array.from(e.values());for(const D of I){let N=!1;try{N=D.predicate(v,A,_)}catch(U){N=!1,aV(r,U,{raisedBy:"predicate"})}N&&l(D,v,f,T)}}}finally{_=sV}return S},startListening:s,stopListening:o,clearListeners:u}};function Pi(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var xse={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},O6=ki({name:"chartLayout",initialState:xse,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){t.margin.top=e.payload.top,t.margin.right=e.payload.right,t.margin.bottom=e.payload.bottom,t.margin.left=e.payload.left},setScale(t,e){t.scale=e.payload}}}),{setMargin:bse,setLayout:_se,setChartSize:wse,setScale:Tse}=O6.actions,Ese=O6.reducer;function lV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function uV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lV(Object(n),!0).forEach(function(r){Sse(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Sse(t,e,n){return(e=Ase(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ase(t){var e=Cse(t,"string");return typeof e=="symbol"?e:e+""}function Cse(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ix=Math.PI/180,Ise=t=>t*180/Math.PI,Er=(t,e,n,r)=>({x:t+Math.cos(-ix*r)*n,y:e+Math.sin(-ix*r)*n}),Rse=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},Pse=(t,e)=>{var{x:n,y:r}=t,{x:i,y:s}=e;return Math.sqrt((n-i)**2+(r-s)**2)},Nse=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:s}=e,o=Pse({x:n,y:r},{x:i,y:s});if(o<=0)return{radius:o,angle:0};var l=(n-i)/o,u=Math.acos(l);return r>s&&(u=2*Math.PI-u),{radius:o,angle:Ise(u),angleInRadian:u}},Mse=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),s=Math.min(r,i);return{startAngle:e-s*360,endAngle:n-s*360}},Dse=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),s=Math.floor(r/360),o=Math.min(i,s);return t+o*360},kse=(t,e)=>{var{x:n,y:r}=t,{radius:i,angle:s}=Nse({x:n,y:r},e),{innerRadius:o,outerRadius:l}=e;if(i<o||i>l||i===0)return null;var{startAngle:u,endAngle:d}=Mse(e),f=s,m;if(u<=d){for(;f>d;)f-=360;for(;f<u;)f+=360;m=f>=u&&f<=d}else{for(;f>u;)f-=360;for(;f<d;)f+=360;m=f>=d&&f<=u}return m?uV(uV({},e),{},{radius:i,angle:Dse(f,e)}):null};function V6(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function cV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function es(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cV(Object(n),!0).forEach(function(r){Ose(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ose(t,e,n){return(e=Vse(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vse(t){var e=Lse(t,"string");return typeof e=="symbol"?e:e+""}function Lse(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yr(t,e,n){return Un(t)||Un(e)?n:po(e)?_c(t,e,n):typeof e=="function"?e(t):n}var Use=(t,e,n,r,i)=>{var s,o=-1,l=(s=e==null?void 0:e.length)!==null&&s!==void 0?s:0;if(l<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var u=0;u<l;u++){var d=u>0?n[u-1].coordinate:n[l-1].coordinate,f=n[u].coordinate,m=u>=l-1?n[0].coordinate:n[u+1].coordinate,v=void 0;if(ts(f-d)!==ts(m-f)){var _=[];if(ts(m-f)===ts(i[1]-i[0])){v=m;var T=f+i[1]-i[0];_[0]=Math.min(T,(T+d)/2),_[1]=Math.max(T,(T+d)/2)}else{v=d;var S=m+i[1]-i[0];_[0]=Math.min(f,(S+f)/2),_[1]=Math.max(f,(S+f)/2)}var A=[Math.min(f,(v+f)/2),Math.max(f,(v+f)/2)];if(t>A[0]&&t<=A[1]||t>=_[0]&&t<=_[1]){({index:o}=n[u]);break}}else{var I=Math.min(d,m),D=Math.max(d,m);if(t>(I+f)/2&&t<=(D+f)/2){({index:o}=n[u]);break}}}else if(e){for(var N=0;N<l;N++)if(N===0&&t<=(e[N].coordinate+e[N+1].coordinate)/2||N>0&&N<l-1&&t>(e[N].coordinate+e[N-1].coordinate)/2&&t<=(e[N].coordinate+e[N+1].coordinate)/2||N===l-1&&t>(e[N].coordinate+e[N-1].coordinate)/2){({index:o}=e[N]);break}}return o},Fse=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:s,verticalAlign:o,layout:l}=e;if((l==="vertical"||l==="horizontal"&&o==="middle")&&s!=="center"&&qe(t[s]))return es(es({},t),{},{[s]:t[s]+(r||0)});if((l==="horizontal"||l==="vertical"&&s==="center")&&o!=="middle"&&qe(t[o]))return es(es({},t),{},{[o]:t[o]+(i||0)})}return t},$l=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",L6=(t,e,n,r)=>{if(r)return t.map(l=>l.coordinate);var i,s,o=t.map(l=>(l.coordinate===e&&(i=!0),l.coordinate===n&&(s=!0),l.coordinate));return i||o.push(e),s||o.push(n),o},U6=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:i,range:s,scale:o,realScaleType:l,isCategorical:u,categoricalDomain:d,tickCount:f,ticks:m,niceTicks:v,axisType:_}=t;if(!o)return null;var T=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,S=i==="category"&&o.bandwidth?o.bandwidth()/T:0;if(S=_==="angleAxis"&&s&&s.length>=2?ts(s[0]-s[1])*2*S:S,m||v){var A=(m||v||[]).map((I,D)=>{var N=r?r.indexOf(I):I;return{coordinate:o(N)+S,value:I,offset:S,index:D}});return A.filter(I=>!ls(I.coordinate))}return u&&d?d.map((I,D)=>({coordinate:o(I)+S,value:I,index:D,offset:S})):o.ticks&&f!=null?o.ticks(f).map((I,D)=>({coordinate:o(I)+S,value:I,offset:S,index:D})):o.domain().map((I,D)=>({coordinate:o(I)+S,value:r?r[I]:I,index:D,offset:S}))},dV=1e-4,jse=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),i=Math.min(r[0],r[1])-dV,s=Math.max(r[0],r[1])+dV,o=t(e[0]),l=t(e[n-1]);(o<i||o>s||l<i||l>s)&&t.domain([e[0],e[n-1]])}},Bse=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,s=0,o=0;o<e;++o){var l=ls(t[o][n][1])?t[o][n][0]:t[o][n][1];l>=0?(t[o][n][0]=i,t[o][n][1]=i+l,i=t[o][n][1]):(t[o][n][0]=s,t[o][n][1]=s+l,s=t[o][n][1])}},qse=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,s=0;s<e;++s){var o=ls(t[s][n][1])?t[s][n][0]:t[s][n][1];o>=0?(t[s][n][0]=i,t[s][n][1]=i+o,i=t[s][n][1]):(t[s][n][0]=0,t[s][n][1]=0)}},zse={sign:Bse,expand:xre,none:Mf,silhouette:bre,wiggle:_re,positive:qse},$se=(t,e,n)=>{var r=zse[n],i=vre().keys(e).value((s,o)=>+Yr(s,o,0)).order(hA).offset(r);return i(t)};function fV(t){var{axis:e,ticks:n,bandSize:r,entry:i,index:s,dataKey:o}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Un(i[e.dataKey])){var l=IB(n,"value",i[e.dataKey]);if(l)return l.coordinate+r/2}return n[s]?n[s].coordinate+r/2:null}var u=Yr(i,Un(o)?e.dataKey:o);return Un(u)?null:e.scale(u)}var Gse=t=>{var e=t.flat(2).filter(qe);return[Math.min(...e),Math.max(...e)]},Hse=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],Kse=(t,e,n)=>{if(t!=null)return Hse(Object.keys(t).reduce((r,i)=>{var s=t[i],{stackedData:o}=s,l=o.reduce((u,d)=>{var f=V6(d,e,n),m=Gse(f);return[Math.min(u[0],m[0]),Math.max(u[1],m[1])]},[1/0,-1/0]);return[Math.min(l[0],r[0]),Math.max(l[1],r[1])]},[1/0,-1/0]))},hV=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,mV=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,EA=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=fb(e,f=>f.coordinate),s=1/0,o=1,l=i.length;o<l;o++){var u=i[o],d=i[o-1];s=Math.min((u.coordinate||0)-(d.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0};function pV(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:s}=t;return es(es({},e),{},{dataKey:n,payload:r,value:i,name:s})}function F6(t,e){if(t)return String(t);if(typeof e=="string")return e}function Wse(t,e,n,r,i){if(n==="horizontal"||n==="vertical"){var s=t>=i.left&&t<=i.left+i.width&&e>=i.top&&e<=i.top+i.height;return s?{x:t,y:e}:null}return r?kse({x:t,y:e},r):null}var Yse=(t,e,n,r)=>{var i=e.find(d=>d&&d.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.y};if(t==="vertical")return{x:r.x,y:i.coordinate};if(t==="centric"){var s=i.coordinate,{radius:o}=r;return es(es(es({},r),Er(r.cx,r.cy,o,s)),{},{angle:s,radius:o})}var l=i.coordinate,{angle:u}=r;return es(es(es({},r),Er(r.cx,r.cy,l,u)),{},{angle:u,radius:l})}return{x:0,y:0}},Jse=(t,e)=>e==="horizontal"?t.x:e==="vertical"?t.y:e==="centric"?t.angle:t.radius,ma=t=>t.layout.width,pa=t=>t.layout.height,Qse=t=>t.layout.scale,j6=t=>t.layout.margin,hI=fe(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),mI=fe(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),Xse="data-recharts-item-index",Zse="data-recharts-item-data-key",xb=60;function gV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gV(Object(n),!0).forEach(function(r){eoe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function eoe(t,e,n){return(e=toe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function toe(t){var e=noe(t,"string");return typeof e=="symbol"?e:e+""}function noe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var roe=t=>t.brush.height,Ir=fe([ma,pa,j6,roe,hI,mI,c6,Eie],(t,e,n,r,i,s,o,l)=>{var u=s.reduce((T,S)=>{var{orientation:A}=S;if(!S.mirror&&!S.hide){var I=typeof S.width=="number"?S.width:xb;return rl(rl({},T),{},{[A]:T[A]+I})}return T},{left:n.left||0,right:n.right||0}),d=i.reduce((T,S)=>{var{orientation:A}=S;return!S.mirror&&!S.hide?rl(rl({},T),{},{[A]:_c(T,"".concat(A))+S.height}):T},{top:n.top||0,bottom:n.bottom||0}),f=rl(rl({},d),u),m=f.bottom;f.bottom+=r,f=Fse(f,o,l);var v=t-f.left-f.right,_=e-f.top-f.bottom;return rl(rl({brushBottom:m},f),{},{width:Math.max(v,0),height:Math.max(_,0)})}),ioe=fe(Ir,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),B6=fe(ma,pa,(t,e)=>({x:0,y:0,width:t,height:e})),soe=P.createContext(null),ds=()=>P.useContext(soe)!=null,bb=t=>t.brush,_b=fe([bb,Ir,j6],(t,e,n)=>({height:t.height,x:qe(t.x)?t.x:e.left,y:qe(t.y)?t.y:e.top+e.height+e.brushBottom-((n==null?void 0:n.bottom)||0),width:qe(t.width)?t.width:e.width})),pI=()=>{var t,e=ds(),n=He(ioe),r=He(_b),i=(t=He(bb))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},ooe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},q6=()=>{var t;return(t=He(Ir))!==null&&t!==void 0?t:ooe},gI=()=>He(ma),yI=()=>He(pa),aoe={top:0,right:0,bottom:0,left:0},loe=()=>{var t;return(t=He(e=>e.layout.margin))!==null&&t!==void 0?t:aoe},Zt=t=>t.layout.layoutType,vI=()=>He(Zt),uoe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},z6=ki({name:"legend",initialState:uoe,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload(t,e){t.payload.push(e.payload)},removeLegendPayload(t,e){var n=Zo(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)}}}),{setLegendSize:yV,setLegendSettings:coe,addLegendPayload:doe,removeLegendPayload:foe}=z6.actions,hoe=z6.reducer,moe=["contextPayload"];function SA(){return SA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},SA.apply(null,arguments)}function vV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vV(Object(n),!0).forEach(function(r){xI(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xI(t,e,n){return(e=poe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function poe(t){var e=goe(t,"string");return typeof e=="symbol"?e:e+""}function goe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yoe(t,e){if(t==null)return{};var n,r,i=voe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function voe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function xoe(t){return t.value}function boe(t){var{contextPayload:e}=t,n=yoe(t,moe),r=o6(e,t.payloadUniqBy,xoe),i=kf(kf({},n),{},{payload:r});return P.isValidElement(t.content)?P.cloneElement(t.content,i):typeof t.content=="function"?P.createElement(t.content,i):P.createElement(tI,i)}function _oe(t,e,n,r,i,s){var{layout:o,align:l,verticalAlign:u}=e,d,f;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(l==="center"&&o==="vertical"?d={left:((r||0)-s.width)/2}:d=l==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(u==="middle"?f={top:((i||0)-s.height)/2}:f=u==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),kf(kf({},d),f)}function woe(t){var e=Cr();return P.useEffect(()=>{e(coe(t))},[e,t]),null}function Toe(t){var e=Cr();return P.useEffect(()=>(e(yV(t)),()=>{e(yV({width:0,height:0}))}),[e,t]),null}function Eoe(t){var e=Cie(),n=qne(),r=loe(),{width:i,height:s,wrapperStyle:o,portal:l}=t,[u,d]=d6([e]),f=gI(),m=yI(),v=f-(r.left||0)-(r.right||0),_=wb.getWidthOrHeight(t.layout,s,i,v),T=l?o:kf(kf({position:"absolute",width:(_==null?void 0:_.width)||i||"auto",height:(_==null?void 0:_.height)||s||"auto"},_oe(o,t,r,f,m,u)),o),S=l??n;if(S==null)return null;var A=P.createElement("div",{className:"recharts-legend-wrapper",style:T,ref:d},P.createElement(woe,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),P.createElement(Toe,{width:u.width,height:u.height}),P.createElement(boe,SA({},t,_,{margin:r,chartWidth:f,chartHeight:m,contextPayload:e})));return kB.createPortal(A,S)}class wb extends P.PureComponent{static getWidthOrHeight(e,n,r,i){return e==="vertical"&&qe(n)?{height:n}:e==="horizontal"?{width:r||i}:null}render(){return P.createElement(Eoe,this.props)}}xI(wb,"displayName","Legend");xI(wb,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function AA(){return AA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AA.apply(null,arguments)}function xV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function FE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xV(Object(n),!0).forEach(function(r){Soe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Soe(t,e,n){return(e=Aoe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Aoe(t){var e=Coe(t,"string");return typeof e=="symbol"?e:e+""}function Coe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ioe(t){return Array.isArray(t)&&po(t[0])&&po(t[1])?t.join(" ~ "):t}var Roe=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:s,formatter:o,itemSorter:l,wrapperClassName:u,labelClassName:d,label:f,labelFormatter:m,accessibilityLayer:v=!1}=t,_=()=>{if(s&&s.length){var O={padding:0,margin:0},q=(l?fb(s,l):s).map((M,R)=>{if(M.type==="none")return null;var k=M.formatter||o||Ioe,{value:F,name:j}=M,G=F,$=j;if(k){var de=k(F,j,M,R,s);if(Array.isArray(de))[G,$]=de;else if(de!=null)G=de;else return null}var ve=FE({display:"block",paddingTop:4,paddingBottom:4,color:M.color||"#000"},r);return P.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(R),style:ve},po($)?P.createElement("span",{className:"recharts-tooltip-item-name"},$):null,po($)?P.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,P.createElement("span",{className:"recharts-tooltip-item-value"},G),P.createElement("span",{className:"recharts-tooltip-item-unit"},M.unit||""))});return P.createElement("ul",{className:"recharts-tooltip-item-list",style:O},q)}return null},T=FE({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),S=FE({margin:0},i),A=!Un(f),I=A?f:"",D=Bt("recharts-default-tooltip",u),N=Bt("recharts-tooltip-label",d);A&&m&&s!==void 0&&s!==null&&(I=m(f,s));var U=v?{role:"status","aria-live":"assertive"}:{};return P.createElement("div",AA({className:D,style:T},U),P.createElement("p",{className:N,style:S},P.isValidElement(I)?I:"".concat(I)),_())},Km="recharts-tooltip-wrapper",Poe={visibility:"hidden"};function Noe(t){var{coordinate:e,translateX:n,translateY:r}=t;return Bt(Km,{["".concat(Km,"-right")]:qe(n)&&e&&qe(e.x)&&n>=e.x,["".concat(Km,"-left")]:qe(n)&&e&&qe(e.x)&&n<e.x,["".concat(Km,"-bottom")]:qe(r)&&e&&qe(e.y)&&r>=e.y,["".concat(Km,"-top")]:qe(r)&&e&&qe(e.y)&&r<e.y})}function bV(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:i,position:s,reverseDirection:o,tooltipDimension:l,viewBox:u,viewBoxDimension:d}=t;if(s&&qe(s[r]))return s[r];var f=n[r]-l-(i>0?i:0),m=n[r]+i;if(e[r])return o[r]?f:m;var v=u[r];if(v==null)return 0;if(o[r]){var _=f,T=v;return _<T?Math.max(m,v):Math.max(f,v)}if(d==null)return 0;var S=m+l,A=v+d;return S>A?Math.max(f,v):Math.max(m,v)}function Moe(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function Doe(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:s,tooltipBox:o,useTranslate3d:l,viewBox:u}=t,d,f,m;return o.height>0&&o.width>0&&n?(f=bV({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:o.width,viewBox:u,viewBoxDimension:u.width}),m=bV({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:o.height,viewBox:u,viewBoxDimension:u.height}),d=Moe({translateX:f,translateY:m,useTranslate3d:l})):d=Poe,{cssProperties:d,cssClasses:Noe({translateX:f,translateY:m,coordinate:n})}}function _V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_V(Object(n),!0).forEach(function(r){CA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_V(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function CA(t,e,n){return(e=koe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function koe(t){var e=Ooe(t,"string");return typeof e=="symbol"?e:e+""}function Ooe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class Voe extends P.PureComponent{constructor(){super(...arguments),CA(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),CA(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:s,coordinate:o,hasPayload:l,isAnimationActive:u,offset:d,position:f,reverseDirection:m,useTranslate3d:v,viewBox:_,wrapperStyle:T,lastBoundingBox:S,innerRef:A,hasPortalFromProps:I}=this.props,{cssClasses:D,cssProperties:N}=Doe({allowEscapeViewBox:n,coordinate:o,offsetTopLeft:d,position:f,reverseDirection:m,tooltipBox:{height:S.height,width:S.width},useTranslate3d:v,viewBox:_}),U=I?{}:qv(qv({transition:u&&e?"transform ".concat(r,"ms ").concat(i):void 0},N),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&l?"visible":"hidden",position:"absolute",top:0,left:0}),O=qv(qv({},U),{},{visibility:!this.state.dismissed&&e&&l?"visible":"hidden"},T);return P.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:D,style:O,ref:A},s)}}var Loe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Ug={isSsr:Loe()},$6=()=>He(t=>t.rootProps.accessibilityLayer);function Rs(t){return Number.isFinite(t)}function sx(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function IA(){return IA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},IA.apply(null,arguments)}function wV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function TV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wV(Object(n),!0).forEach(function(r){Uoe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Uoe(t,e,n){return(e=Foe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Foe(t){var e=joe(t,"string");return typeof e=="symbol"?e:e+""}function joe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var EV={curveBasisClosed:are,curveBasisOpen:lre,curveBasis:ore,curveBumpX:Hne,curveBumpY:Kne,curveLinearClosed:ure,curveLinear:cb,curveMonotoneX:cre,curveMonotoneY:dre,curveNatural:fre,curveStep:hre,curveStepAfter:pre,curveStepBefore:mre},zv=t=>Rs(t.x)&&Rs(t.y),Wm=t=>t.x,Ym=t=>t.y,Boe=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(Vg(t));return(n==="curveMonotone"||n==="curveBump")&&e?EV["".concat(n).concat(e==="vertical"?"Y":"X")]:EV[n]||cb},qoe=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:i,connectNulls:s=!1}=t,o=Boe(e,i),l=s?n.filter(zv):n,u;if(Array.isArray(r)){var d=s?r.filter(m=>zv(m)):r,f=l.map((m,v)=>TV(TV({},m),{},{base:d[v]}));return i==="vertical"?u=Lv().y(Ym).x1(Wm).x0(m=>m.base.x):u=Lv().x(Wm).y1(Ym).y0(m=>m.base.y),u.defined(zv).curve(o),u(f)}return i==="vertical"&&qe(r)?u=Lv().y(Ym).x1(Wm).x0(r):qe(r)?u=Lv().x(Wm).y1(Ym).y0(r):u=BB().x(Wm).y(Ym),u.defined(zv).curve(o),u(l)},G6=t=>{var{className:e,points:n,path:r,pathRef:i}=t;if((!n||!n.length)&&!r)return null;var s=n&&n.length?qoe(t):r;return P.createElement("path",IA({},dh(t),YC(t),{className:Bt("recharts-curve",e),d:s===null?void 0:s,ref:i}))},zoe=["x","y","top","left","width","height","className"];function RA(){return RA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},RA.apply(null,arguments)}function SV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $oe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SV(Object(n),!0).forEach(function(r){Goe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Goe(t,e,n){return(e=Hoe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hoe(t){var e=Koe(t,"string");return typeof e=="symbol"?e:e+""}function Koe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Woe(t,e){if(t==null)return{};var n,r,i=Yoe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Yoe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Joe=(t,e,n,r,i,s)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(s,",").concat(e,"h").concat(n),Qoe=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:s=0,height:o=0,className:l}=t,u=Woe(t,zoe),d=$oe({x:e,y:n,top:r,left:i,width:s,height:o},u);return!qe(e)||!qe(n)||!qe(s)||!qe(o)||!qe(r)||!qe(i)?null:P.createElement("path",RA({},Wn(d,!0),{className:Bt("recharts-cross",l),d:Joe(e,n,s,o,r,i)}))};function Xoe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function AV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zoe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AV(Object(n),!0).forEach(function(r){eae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function eae(t,e,n){return(e=tae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tae(t){var e=nae(t,"string");return typeof e=="symbol"?e:e+""}function nae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gl(t,e){var n=Zoe({},t),r=e,i=Object.keys(e),s=i.reduce((o,l)=>(o[l]===void 0&&r[l]!==void 0&&(o[l]=r[l]),o),n);return s}var jE={},BE={},qE={},CV;function rae(){return CV||(CV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(!n||typeof n!="object")return!1;const r=Object.getPrototypeOf(n);return r===null||r===Object.prototype||Object.getPrototypeOf(r)===null?Object.prototype.toString.call(n)==="[object Object]":!1}t.isPlainObject=e})(qE)),qE}var IV;function iae(){return IV||(IV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=rae(),n=r6(),r=sI(),i=oI(),s=rI();function o(d,f,m){return l(d,f,void 0,void 0,void 0,void 0,m)}function l(d,f,m,v,_,T,S){const A=S(d,f,m,v,_,T);if(A!==void 0)return A;if(typeof d==typeof f)switch(typeof d){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return d===f;case"number":return d===f||Object.is(d,f);case"function":return d===f;case"object":return u(d,f,T,S)}return u(d,f,T,S)}function u(d,f,m,v){if(Object.is(d,f))return!0;let _=r.getTag(d),T=r.getTag(f);if(_===i.argumentsTag&&(_=i.objectTag),T===i.argumentsTag&&(T=i.objectTag),_!==T)return!1;switch(_){case i.stringTag:return d.toString()===f.toString();case i.numberTag:{const I=d.valueOf(),D=f.valueOf();return s.eq(I,D)}case i.booleanTag:case i.dateTag:case i.symbolTag:return Object.is(d.valueOf(),f.valueOf());case i.regexpTag:return d.source===f.source&&d.flags===f.flags;case i.functionTag:return d===f}m=m??new Map;const S=m.get(d),A=m.get(f);if(S!=null&&A!=null)return S===f;m.set(d,f),m.set(f,d);try{switch(_){case i.mapTag:{if(d.size!==f.size)return!1;for(const[I,D]of d.entries())if(!f.has(I)||!l(D,f.get(I),I,d,f,m,v))return!1;return!0}case i.setTag:{if(d.size!==f.size)return!1;const I=Array.from(d.values()),D=Array.from(f.values());for(let N=0;N<I.length;N++){const U=I[N],O=D.findIndex(q=>l(U,q,void 0,d,f,m,v));if(O===-1)return!1;D.splice(O,1)}return!0}case i.arrayTag:case i.uint8ArrayTag:case i.uint8ClampedArrayTag:case i.uint16ArrayTag:case i.uint32ArrayTag:case i.bigUint64ArrayTag:case i.int8ArrayTag:case i.int16ArrayTag:case i.int32ArrayTag:case i.bigInt64ArrayTag:case i.float32ArrayTag:case i.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(d)!==Buffer.isBuffer(f)||d.length!==f.length)return!1;for(let I=0;I<d.length;I++)if(!l(d[I],f[I],I,d,f,m,v))return!1;return!0}case i.arrayBufferTag:return d.byteLength!==f.byteLength?!1:u(new Uint8Array(d),new Uint8Array(f),m,v);case i.dataViewTag:return d.byteLength!==f.byteLength||d.byteOffset!==f.byteOffset?!1:u(new Uint8Array(d),new Uint8Array(f),m,v);case i.errorTag:return d.name===f.name&&d.message===f.message;case i.objectTag:{if(!(u(d.constructor,f.constructor,m,v)||e.isPlainObject(d)&&e.isPlainObject(f)))return!1;const D=[...Object.keys(d),...n.getSymbols(d)],N=[...Object.keys(f),...n.getSymbols(f)];if(D.length!==N.length)return!1;for(let U=0;U<D.length;U++){const O=D[U],q=d[O];if(!Object.hasOwn(f,O))return!1;const M=f[O];if(!l(q,M,O,d,f,m,v))return!1}return!0}default:return!1}}finally{m.delete(d),m.delete(f)}}t.isEqualWith=o})(BE)),BE}var zE={},RV;function sae(){return RV||(RV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(){}t.noop=e})(zE)),zE}var PV;function oae(){return PV||(PV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=iae(),n=sae();function r(i,s){return e.isEqualWith(i,s,n.noop)}t.isEqual=r})(jE)),jE}var $E,NV;function aae(){return NV||(NV=1,$E=oae().isEqual),$E}var lae=aae();const uae=xo(lae);var ox=1e-4,H6=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],K6=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),MV=(t,e)=>n=>{var r=H6(t,e);return K6(r,n)},cae=(t,e)=>n=>{var r=H6(t,e),i=[...r.map((s,o)=>s*o).slice(1),0];return K6(i,n)},DV=function(){for(var e,n,r,i,s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];if(o.length===1)switch(o[0]){case"linear":[e,r,n,i]=[0,0,1,1];break;case"ease":[e,r,n,i]=[.25,.1,.25,1];break;case"ease-in":[e,r,n,i]=[.42,0,1,1];break;case"ease-out":[e,r,n,i]=[.42,0,.58,1];break;case"ease-in-out":[e,r,n,i]=[0,0,.58,1];break;default:{var u=o[0].split("(");u[0]==="cubic-bezier"&&u[1].split(")")[0].split(",").length===4&&([e,r,n,i]=u[1].split(")")[0].split(",").map(T=>parseFloat(T)))}}else o.length===4&&([e,r,n,i]=o);var d=MV(e,n),f=MV(r,i),m=cae(e,n),v=T=>T>1?1:T<0?0:T,_=T=>{for(var S=T>1?1:T,A=S,I=0;I<8;++I){var D=d(A)-S,N=m(A);if(Math.abs(D-S)<ox||N<ox)return f(A);A=v(A-D/N)}return f(A)};return _.isStepper=!1,_},dae=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,s=(o,l,u)=>{var d=-(o-l)*n,f=u*r,m=u+(d-f)*i/1e3,v=u*i/1e3+o;return Math.abs(v-l)<ox&&Math.abs(m)<ox?[l,0]:[v,m]};return s.isStepper=!0,s.dt=i,s},W6=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return DV(t);case"spring":return dae();default:if(t.split("(")[0]==="cubic-bezier")return DV(t)}return typeof t=="function"?t:null};function kV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function OV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kV(Object(n),!0).forEach(function(r){fae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fae(t,e,n){return(e=hae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hae(t){var e=mae(t,"string");return typeof e=="symbol"?e:e+""}function mae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pae=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),gae=(t,e,n)=>t.map(r=>"".concat(pae(r)," ").concat(e,"ms ").concat(n)).join(","),yae=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),Zp=(t,e)=>Object.keys(e).reduce((n,r)=>OV(OV({},n),{},{[r]:t(r,e[r])}),{});function VV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function br(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VV(Object(n),!0).forEach(function(r){vae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vae(t,e,n){return(e=xae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xae(t){var e=bae(t,"string");return typeof e=="symbol"?e:e+""}function bae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ax=(t,e,n)=>t+(e-t)*n,PA=t=>{var{from:e,to:n}=t;return e!==n},Y6=(t,e,n)=>{var r=Zp((i,s)=>{if(PA(s)){var[o,l]=t(s.from,s.to,s.velocity);return br(br({},s),{},{from:o,velocity:l})}return s},e);return n<1?Zp((i,s)=>PA(s)?br(br({},s),{},{velocity:ax(s.velocity,r[i].velocity,n),from:ax(s.from,r[i].from,n)}):s,e):Y6(t,r,n-1)};function _ae(t,e,n,r,i,s){var o,l=r.reduce((v,_)=>br(br({},v),{},{[_]:{from:t[_],velocity:0,to:e[_]}}),{}),u=()=>Zp((v,_)=>_.from,l),d=()=>!Object.values(l).filter(PA).length,f=null,m=v=>{o||(o=v);var _=v-o,T=_/n.dt;l=Y6(n,l,T),i(br(br(br({},t),e),u())),o=v,d()||(f=s.setTimeout(m))};return()=>(f=s.setTimeout(m),()=>{f()})}function wae(t,e,n,r,i,s,o){var l=null,u=i.reduce((m,v)=>br(br({},m),{},{[v]:[t[v],e[v]]}),{}),d,f=m=>{d||(d=m);var v=(m-d)/r,_=Zp((S,A)=>ax(...A,n(v)),u);if(s(br(br(br({},t),e),_)),v<1)l=o.setTimeout(f);else{var T=Zp((S,A)=>ax(...A,n(1)),u);s(br(br(br({},t),e),T))}};return()=>(l=o.setTimeout(f),()=>{l()})}const J6=(t,e,n,r,i,s)=>{var o=yae(t,e);return n.isStepper===!0?_ae(t,e,n,o,i,s):wae(t,e,n,r,o,i,s)};function Tae(t){var e,n=()=>null,r=!1,i=null,s=o=>{if(!r){if(Array.isArray(o)){if(!o.length)return;var l=o,[u,...d]=l;if(typeof u=="number"){i=t.setTimeout(s.bind(null,d),u);return}s(u),i=t.setTimeout(s.bind(null,d));return}typeof o=="string"&&(e=o,n(e)),typeof o=="object"&&(e=o,n(e)),typeof o=="function"&&o()}};return{stop:()=>{r=!0},start:o=>{r=!1,i&&(i(),i=null),s(o)},subscribe:o=>(n=o,()=>{n=()=>null}),getTimeoutController:()=>t}}class Eae{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,s=o=>{o-r>=n?e(o):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{cancelAnimationFrame(i)}}}function Sae(){return Tae(new Eae)}var Aae=P.createContext(Sae);function Q6(t,e){var n=P.useContext(Aae);return P.useMemo(()=>e??n(t),[t,e,n])}var Cae=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function NA(){return NA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NA.apply(null,arguments)}function Iae(t,e){if(t==null)return{};var n,r,i=Rae(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Rae(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function LV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function il(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LV(Object(n),!0).forEach(function(r){Xu(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xu(t,e,n){return(e=Pae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pae(t){var e=Nae(t,"string");return typeof e=="symbol"?e:e+""}function Nae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class bI extends P.PureComponent{constructor(e,n){super(e,n),Xu(this,"mounted",!1),Xu(this,"manager",void 0),Xu(this,"stopJSAnimation",null),Xu(this,"unSubscribe",null);var{isActive:r,attributeName:i,from:s,to:o,children:l,duration:u,animationManager:d}=this.props;if(this.manager=d,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!r||u<=0){this.state={style:{}},typeof l=="function"&&(this.state={style:o});return}if(s){if(typeof l=="function"){this.state={style:s};return}this.state={style:i?{[i]:s}:s}}else this.state={style:{}}}componentDidMount(){var{isActive:e,canBegin:n}=this.props;this.mounted=!0,!(!e||!n)&&this.runAnimation(this.props)}componentDidUpdate(e){var{isActive:n,canBegin:r,attributeName:i,shouldReAnimate:s,to:o,from:l}=this.props,{style:u}=this.state;if(r){if(!n){var d={style:i?{[i]:o}:o};this.state&&u&&(i&&u[i]!==o||!i&&u!==o)&&this.setState(d);return}if(!(uae(e.to,o)&&e.canBegin&&e.isActive)){var f=!e.canBegin||!e.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var m=f||s?l:e.to;if(this.state&&u){var v={style:i?{[i]:m}:m};(i&&u[i]!==m||!i&&u!==m)&&this.setState(v)}this.runAnimation(il(il({},this.props),{},{from:m,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:e}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),e&&e()}handleStyleChange(e){this.changeStyle(e)}changeStyle(e){this.mounted&&this.setState({style:e})}runJSAnimation(e){var{from:n,to:r,duration:i,easing:s,begin:o,onAnimationEnd:l,onAnimationStart:u}=e,d=J6(n,r,W6(s),i,this.changeStyle,this.manager.getTimeoutController()),f=()=>{this.stopJSAnimation=d()};this.manager.start([u,o,f,i,l])}runAnimation(e){var{begin:n,duration:r,attributeName:i,to:s,easing:o,onAnimationStart:l,onAnimationEnd:u,children:d}=e;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof o=="function"||typeof d=="function"||o==="spring"){this.runJSAnimation(e);return}var f=i?{[i]:s}:s,m=gae(Object.keys(f),r,o);this.manager.start([l,n,il(il({},f),{},{transition:m}),r,u])}render(){var e=this.props,{children:n,begin:r,duration:i,attributeName:s,easing:o,isActive:l,from:u,to:d,canBegin:f,onAnimationEnd:m,shouldReAnimate:v,onAnimationReStart:_,animationManager:T}=e,S=Iae(e,Cae),A=P.Children.count(n),I=this.state.style;if(typeof n=="function")return n(I);if(!l||A===0||i<=0)return n;var D=N=>{var{style:U={},className:O}=N.props,q=P.cloneElement(N,il(il({},S),{},{style:il(il({},U),I),className:O}));return q};return A===1?D(P.Children.only(n)):P.createElement("div",null,P.Children.map(n,N=>D(N)))}}Xu(bI,"displayName","Animate");Xu(bI,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});function UV(t){var e,n=Q6((e=t.attributeName)!==null&&e!==void 0?e:Object.keys(t.to).join(","),t.animationManager);return P.createElement(bI,NA({},t,{animationManager:n}))}function lx(){return lx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lx.apply(null,arguments)}var FV=(t,e,n,r,i)=>{var s=Math.min(Math.abs(n)/2,Math.abs(r)/2),o=r>=0?1:-1,l=n>=0?1:-1,u=r>=0&&n>=0||r<0&&n<0?1:0,d;if(s>0&&i instanceof Array){for(var f=[0,0,0,0],m=0,v=4;m<v;m++)f[m]=i[m]>s?s:i[m];d="M".concat(t,",").concat(e+o*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(t+l*f[0],",").concat(e)),d+="L ".concat(t+n-l*f[1],",").concat(e),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(e+o*f[1])),d+="L ".concat(t+n,",").concat(e+r-o*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(t+n-l*f[2],",").concat(e+r)),d+="L ".concat(t+l*f[3],",").concat(e+r),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(e+r-o*f[3])),d+="Z"}else if(s>0&&i===+i&&i>0){var _=Math.min(s,i);d="M ".concat(t,",").concat(e+o*_,`
            A `).concat(_,",").concat(_,",0,0,").concat(u,",").concat(t+l*_,",").concat(e,`
            L `).concat(t+n-l*_,",").concat(e,`
            A `).concat(_,",").concat(_,",0,0,").concat(u,",").concat(t+n,",").concat(e+o*_,`
            L `).concat(t+n,",").concat(e+r-o*_,`
            A `).concat(_,",").concat(_,",0,0,").concat(u,",").concat(t+n-l*_,",").concat(e+r,`
            L `).concat(t+l*_,",").concat(e+r,`
            A `).concat(_,",").concat(_,",0,0,").concat(u,",").concat(t,",").concat(e+r-o*_," Z")}else d="M ".concat(t,",").concat(e," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return d},Mae={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Dae=t=>{var e=Gl(t,Mae),n=P.useRef(null),[r,i]=P.useState(-1);P.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var I=n.current.getTotalLength();I&&i(I)}catch{}},[]);var{x:s,y:o,width:l,height:u,radius:d,className:f}=e,{animationEasing:m,animationDuration:v,animationBegin:_,isAnimationActive:T,isUpdateAnimationActive:S}=e;if(s!==+s||o!==+o||l!==+l||u!==+u||l===0||u===0)return null;var A=Bt("recharts-rectangle",f);return S?P.createElement(UV,{canBegin:r>0,from:{width:l,height:u,x:s,y:o},to:{width:l,height:u,x:s,y:o},duration:v,animationEasing:m,isActive:S},I=>{var{width:D,height:N,x:U,y:O}=I;return P.createElement(UV,{canBegin:r>0,from:"0px ".concat(r===-1?1:r,"px"),to:"".concat(r,"px 0px"),attributeName:"strokeDasharray",begin:_,duration:v,isActive:T,easing:m},P.createElement("path",lx({},Wn(e,!0),{className:A,d:FV(U,O,D,N,d),ref:n})))}):P.createElement("path",lx({},Wn(e,!0),{className:A,d:FV(s,o,l,u,d)}))};function X6(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:s}=t,o=Er(e,n,r,i),l=Er(e,n,r,s);return{points:[o,l],cx:e,cy:n,radius:r,startAngle:i,endAngle:s}}function MA(){return MA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},MA.apply(null,arguments)}var kae=(t,e)=>{var n=ts(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},$v=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:s,isExternal:o,cornerRadius:l,cornerIsExternal:u}=t,d=l*(o?1:-1)+r,f=Math.asin(l/d)/ix,m=u?i:i+s*f,v=Er(e,n,d,m),_=Er(e,n,r,m),T=u?i-s*f:i,S=Er(e,n,d*Math.cos(f*ix),T);return{center:v,circleTangency:_,lineTangency:S,theta:f}},Z6=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:s,endAngle:o}=t,l=kae(s,o),u=s+l,d=Er(e,n,i,s),f=Er(e,n,i,u),m="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(s>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(r>0){var v=Er(e,n,r,s),_=Er(e,n,r,u);m+="L ".concat(_.x,",").concat(_.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(s<=u),`,
            `).concat(v.x,",").concat(v.y," Z")}else m+="L ".concat(e,",").concat(n," Z");return m},Oae=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:l,startAngle:u,endAngle:d}=t,f=ts(d-u),{circleTangency:m,lineTangency:v,theta:_}=$v({cx:e,cy:n,radius:i,angle:u,sign:f,cornerRadius:s,cornerIsExternal:l}),{circleTangency:T,lineTangency:S,theta:A}=$v({cx:e,cy:n,radius:i,angle:d,sign:-f,cornerRadius:s,cornerIsExternal:l}),I=l?Math.abs(u-d):Math.abs(u-d)-_-A;if(I<0)return o?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):Z6({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:u,endAngle:d});var D="M ".concat(v.x,",").concat(v.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(I>180),",").concat(+(f<0),",").concat(T.x,",").concat(T.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(S.x,",").concat(S.y,`
  `);if(r>0){var{circleTangency:N,lineTangency:U,theta:O}=$v({cx:e,cy:n,radius:r,angle:u,sign:f,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),{circleTangency:q,lineTangency:M,theta:R}=$v({cx:e,cy:n,radius:r,angle:d,sign:-f,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),k=l?Math.abs(u-d):Math.abs(u-d)-O-R;if(k<0&&s===0)return"".concat(D,"L").concat(e,",").concat(n,"Z");D+="L".concat(M.x,",").concat(M.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(q.x,",").concat(q.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(k>180),",").concat(+(f>0),",").concat(N.x,",").concat(N.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(U.x,",").concat(U.y,"Z")}else D+="L".concat(e,",").concat(n,"Z");return D},Vae={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Lae=t=>{var e=Gl(t,Vae),{cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:f,className:m}=e;if(s<i||d===f)return null;var v=Bt("recharts-sector",m),_=s-i,T=Pl(o,_,0,!0),S;return T>0&&Math.abs(d-f)<360?S=Oae({cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:Math.min(T,_/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:f}):S=Z6({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:d,endAngle:f}),P.createElement("path",MA({},Wn(e,!0),{className:v,d:S}))};function Uae(t,e,n){var r,i,s,o;if(t==="horizontal")r=e.x,s=r,i=n.top,o=n.top+n.height;else if(t==="vertical")i=e.y,o=i,r=n.left,s=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var{cx:l,cy:u,innerRadius:d,outerRadius:f,angle:m}=e,v=Er(l,u,d,m),_=Er(l,u,f,m);r=v.x,i=v.y,s=_.x,o=_.y}else return X6(e);return[{x:r,y:i},{x:s,y:o}]}var GE={},HE={},KE={},jV;function Fae(){return jV||(jV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=l6();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(KE)),KE}var BV;function jae(){return BV||(BV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Fae();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(HE)),HE}var qV;function Bae(){return qV||(qV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=u6(),n=jae();function r(i,s,o){o&&typeof o!="number"&&e.isIterateeCall(i,s,o)&&(s=o=void 0),i=n.toFinite(i),s===void 0?(s=i,i=0):s=n.toFinite(s),o=o===void 0?i<s?1:-1:n.toFinite(o);const l=Math.max(Math.ceil((s-i)/(o||1)),0),u=new Array(l);for(let d=0;d<l;d++)u[d]=i,i+=o;return u}t.range=r})(GE)),GE}var WE,zV;function qae(){return zV||(zV=1,WE=Bae().range),WE}var zae=qae();const eq=xo(zae);function wl(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function $ae(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function _I(t){let e,n,r;t.length!==2?(e=wl,n=(l,u)=>wl(t(l),u),r=(l,u)=>t(l)-u):(e=t===wl||t===$ae?t:Gae,n=t,r=t);function i(l,u,d=0,f=l.length){if(d<f){if(e(u,u)!==0)return f;do{const m=d+f>>>1;n(l[m],u)<0?d=m+1:f=m}while(d<f)}return d}function s(l,u,d=0,f=l.length){if(d<f){if(e(u,u)!==0)return f;do{const m=d+f>>>1;n(l[m],u)<=0?d=m+1:f=m}while(d<f)}return d}function o(l,u,d=0,f=l.length){const m=i(l,u,d,f-1);return m>d&&r(l[m-1],u)>-r(l[m],u)?m-1:m}return{left:i,center:o,right:s}}function Gae(){return 0}function tq(t){return t===null?NaN:+t}function*Hae(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const Kae=_I(wl),Fg=Kae.right;_I(tq).center;class $V extends Map{constructor(e,n=Jae){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(GV(this,e))}has(e){return super.has(GV(this,e))}set(e,n){return super.set(Wae(this,e),n)}delete(e){return super.delete(Yae(this,e))}}function GV({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Wae({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Yae({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Jae(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Qae(t=wl){if(t===wl)return nq;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function nq(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Xae=Math.sqrt(50),Zae=Math.sqrt(10),ele=Math.sqrt(2);function ux(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=Xae?10:s>=Zae?5:s>=ele?2:1;let l,u,d;return i<0?(d=Math.pow(10,-i)/o,l=Math.round(t*d),u=Math.round(e*d),l/d<t&&++l,u/d>e&&--u,d=-d):(d=Math.pow(10,i)*o,l=Math.round(t/d),u=Math.round(e/d),l*d<t&&++l,u*d>e&&--u),u<l&&.5<=n&&n<2?ux(t,e,n*2):[l,u,d]}function DA(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,o]=r?ux(e,t,n):ux(t,e,n);if(!(s>=i))return[];const l=s-i+1,u=new Array(l);if(r)if(o<0)for(let d=0;d<l;++d)u[d]=(s-d)/-o;else for(let d=0;d<l;++d)u[d]=(s-d)*o;else if(o<0)for(let d=0;d<l;++d)u[d]=(i+d)/-o;else for(let d=0;d<l;++d)u[d]=(i+d)*o;return u}function kA(t,e,n){return e=+e,t=+t,n=+n,ux(t,e,n)[2]}function OA(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?kA(e,t,n):kA(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function HV(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function KV(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function rq(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?nq:Qae(i);r>n;){if(r-n>600){const u=r-n+1,d=e-n+1,f=Math.log(u),m=.5*Math.exp(2*f/3),v=.5*Math.sqrt(f*m*(u-m)/u)*(d-u/2<0?-1:1),_=Math.max(n,Math.floor(e-d*m/u+v)),T=Math.min(r,Math.floor(e+(u-d)*m/u+v));rq(t,e,_,T,i)}const s=t[e];let o=n,l=r;for(Jm(t,n,e),i(t[r],s)>0&&Jm(t,n,r);o<l;){for(Jm(t,o,l),++o,--l;i(t[o],s)<0;)++o;for(;i(t[l],s)>0;)--l}i(t[n],s)===0?Jm(t,n,l):(++l,Jm(t,l,r)),l<=e&&(n=l+1),e<=l&&(r=l-1)}return t}function Jm(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function tle(t,e,n){if(t=Float64Array.from(Hae(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return KV(t);if(e>=1)return HV(t);var r,i=(r-1)*e,s=Math.floor(i),o=HV(rq(t,s).subarray(0,s+1)),l=KV(t.subarray(s+1));return o+(l-o)*(i-s)}}function nle(t,e,n=tq){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,s=Math.floor(i),o=+n(t[s],s,t),l=+n(t[s+1],s+1,t);return o+(l-o)*(i-s)}}function rle(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function fs(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function ga(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const VA=Symbol("implicit");function wI(){var t=new $V,e=[],n=[],r=VA;function i(s){let o=t.get(s);if(o===void 0){if(r!==VA)return r;t.set(s,o=e.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new $V;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return wI(e,n).unknown(r)},fs.apply(i,arguments),i}function TI(){var t=wI().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,o,l=!1,u=0,d=0,f=.5;delete t.unknown;function m(){var v=e().length,_=i<r,T=_?i:r,S=_?r:i;s=(S-T)/Math.max(1,v-u+d*2),l&&(s=Math.floor(s)),T+=(S-T-s*(v-u))*f,o=s*(1-u),l&&(T=Math.round(T),o=Math.round(o));var A=rle(v).map(function(I){return T+s*I});return n(_?A.reverse():A)}return t.domain=function(v){return arguments.length?(e(v),m()):e()},t.range=function(v){return arguments.length?([r,i]=v,r=+r,i=+i,m()):[r,i]},t.rangeRound=function(v){return[r,i]=v,r=+r,i=+i,l=!0,m()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(v){return arguments.length?(l=!!v,m()):l},t.padding=function(v){return arguments.length?(u=Math.min(1,d=+v),m()):u},t.paddingInner=function(v){return arguments.length?(u=Math.min(1,v),m()):u},t.paddingOuter=function(v){return arguments.length?(d=+v,m()):d},t.align=function(v){return arguments.length?(f=Math.max(0,Math.min(1,v)),m()):f},t.copy=function(){return TI(e(),[r,i]).round(l).paddingInner(u).paddingOuter(d).align(f)},fs.apply(m(),arguments)}function iq(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return iq(e())},t}function ile(){return iq(TI.apply(null,arguments).paddingInner(1))}function EI(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function sq(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function jg(){}var eg=.7,cx=1/eg,xf="\\s*([+-]?\\d+)\\s*",tg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",so="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",sle=/^#([0-9a-f]{3,8})$/,ole=new RegExp(`^rgb\\(${xf},${xf},${xf}\\)$`),ale=new RegExp(`^rgb\\(${so},${so},${so}\\)$`),lle=new RegExp(`^rgba\\(${xf},${xf},${xf},${tg}\\)$`),ule=new RegExp(`^rgba\\(${so},${so},${so},${tg}\\)$`),cle=new RegExp(`^hsl\\(${tg},${so},${so}\\)$`),dle=new RegExp(`^hsla\\(${tg},${so},${so},${tg}\\)$`),WV={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};EI(jg,ng,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:YV,formatHex:YV,formatHex8:fle,formatHsl:hle,formatRgb:JV,toString:JV});function YV(){return this.rgb().formatHex()}function fle(){return this.rgb().formatHex8()}function hle(){return oq(this).formatHsl()}function JV(){return this.rgb().formatRgb()}function ng(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=sle.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?QV(e):n===3?new ii(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Gv(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Gv(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=ole.exec(t))?new ii(e[1],e[2],e[3],1):(e=ale.exec(t))?new ii(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=lle.exec(t))?Gv(e[1],e[2],e[3],e[4]):(e=ule.exec(t))?Gv(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=cle.exec(t))?eL(e[1],e[2]/100,e[3]/100,1):(e=dle.exec(t))?eL(e[1],e[2]/100,e[3]/100,e[4]):WV.hasOwnProperty(t)?QV(WV[t]):t==="transparent"?new ii(NaN,NaN,NaN,0):null}function QV(t){return new ii(t>>16&255,t>>8&255,t&255,1)}function Gv(t,e,n,r){return r<=0&&(t=e=n=NaN),new ii(t,e,n,r)}function mle(t){return t instanceof jg||(t=ng(t)),t?(t=t.rgb(),new ii(t.r,t.g,t.b,t.opacity)):new ii}function LA(t,e,n,r){return arguments.length===1?mle(t):new ii(t,e,n,r??1)}function ii(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}EI(ii,LA,sq(jg,{brighter(t){return t=t==null?cx:Math.pow(cx,t),new ii(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?eg:Math.pow(eg,t),new ii(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ii(dc(this.r),dc(this.g),dc(this.b),dx(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:XV,formatHex:XV,formatHex8:ple,formatRgb:ZV,toString:ZV}));function XV(){return`#${Zu(this.r)}${Zu(this.g)}${Zu(this.b)}`}function ple(){return`#${Zu(this.r)}${Zu(this.g)}${Zu(this.b)}${Zu((isNaN(this.opacity)?1:this.opacity)*255)}`}function ZV(){const t=dx(this.opacity);return`${t===1?"rgb(":"rgba("}${dc(this.r)}, ${dc(this.g)}, ${dc(this.b)}${t===1?")":`, ${t})`}`}function dx(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function dc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Zu(t){return t=dc(t),(t<16?"0":"")+t.toString(16)}function eL(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ws(t,e,n,r)}function oq(t){if(t instanceof ws)return new ws(t.h,t.s,t.l,t.opacity);if(t instanceof jg||(t=ng(t)),!t)return new ws;if(t instanceof ws)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,l=s-i,u=(s+i)/2;return l?(e===s?o=(n-r)/l+(n<r)*6:n===s?o=(r-e)/l+2:o=(e-n)/l+4,l/=u<.5?s+i:2-s-i,o*=60):l=u>0&&u<1?0:o,new ws(o,l,u,t.opacity)}function gle(t,e,n,r){return arguments.length===1?oq(t):new ws(t,e,n,r??1)}function ws(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}EI(ws,gle,sq(jg,{brighter(t){return t=t==null?cx:Math.pow(cx,t),new ws(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?eg:Math.pow(eg,t),new ws(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ii(YE(t>=240?t-240:t+120,i,r),YE(t,i,r),YE(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new ws(tL(this.h),Hv(this.s),Hv(this.l),dx(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=dx(this.opacity);return`${t===1?"hsl(":"hsla("}${tL(this.h)}, ${Hv(this.s)*100}%, ${Hv(this.l)*100}%${t===1?")":`, ${t})`}`}}));function tL(t){return t=(t||0)%360,t<0?t+360:t}function Hv(t){return Math.max(0,Math.min(1,t||0))}function YE(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const SI=t=>()=>t;function yle(t,e){return function(n){return t+n*e}}function vle(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function xle(t){return(t=+t)==1?aq:function(e,n){return n-e?vle(e,n,t):SI(isNaN(e)?n:e)}}function aq(t,e){var n=e-t;return n?yle(t,n):SI(isNaN(t)?e:t)}const nL=(function t(e){var n=xle(e);function r(i,s){var o=n((i=LA(i)).r,(s=LA(s)).r),l=n(i.g,s.g),u=n(i.b,s.b),d=aq(i.opacity,s.opacity);return function(f){return i.r=o(f),i.g=l(f),i.b=u(f),i.opacity=d(f),i+""}}return r.gamma=t,r})(1);function ble(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function _le(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function wle(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=fh(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(l){for(o=0;o<r;++o)s[o]=i[o](l);return s}}function Tle(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function fx(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Ele(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=fh(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var UA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,JE=new RegExp(UA.source,"g");function Sle(t){return function(){return t}}function Ale(t){return function(e){return t(e)+""}}function Cle(t,e){var n=UA.lastIndex=JE.lastIndex=0,r,i,s,o=-1,l=[],u=[];for(t=t+"",e=e+"";(r=UA.exec(t))&&(i=JE.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,u.push({i:o,x:fx(r,i)})),n=JE.lastIndex;return n<e.length&&(s=e.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?u[0]?Ale(u[0].x):Sle(e):(e=u.length,function(d){for(var f=0,m;f<e;++f)l[(m=u[f]).i]=m.x(d);return l.join("")})}function fh(t,e){var n=typeof e,r;return e==null||n==="boolean"?SI(e):(n==="number"?fx:n==="string"?(r=ng(e))?(e=r,nL):Cle:e instanceof ng?nL:e instanceof Date?Tle:_le(e)?ble:Array.isArray(e)?wle:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Ele:fx)(t,e)}function AI(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Ile(t,e){e===void 0&&(e=t,t=fh);for(var n=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(i,i=e[++n]);return function(o){var l=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[l](o-l)}}function Rle(t){return function(){return t}}function hx(t){return+t}var rL=[0,1];function Hr(t){return t}function FA(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Rle(isNaN(e)?NaN:.5)}function Ple(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Nle(t,e,n){var r=t[0],i=t[1],s=e[0],o=e[1];return i<r?(r=FA(i,r),s=n(o,s)):(r=FA(r,i),s=n(s,o)),function(l){return s(r(l))}}function Mle(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=FA(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(l){var u=Fg(t,l,1,r)-1;return s[u](i[u](l))}}function Bg(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Tb(){var t=rL,e=rL,n=fh,r,i,s,o=Hr,l,u,d;function f(){var v=Math.min(t.length,e.length);return o!==Hr&&(o=Ple(t[0],t[v-1])),l=v>2?Mle:Nle,u=d=null,m}function m(v){return v==null||isNaN(v=+v)?s:(u||(u=l(t.map(r),e,n)))(r(o(v)))}return m.invert=function(v){return o(i((d||(d=l(e,t.map(r),fx)))(v)))},m.domain=function(v){return arguments.length?(t=Array.from(v,hx),f()):t.slice()},m.range=function(v){return arguments.length?(e=Array.from(v),f()):e.slice()},m.rangeRound=function(v){return e=Array.from(v),n=AI,f()},m.clamp=function(v){return arguments.length?(o=v?!0:Hr,f()):o!==Hr},m.interpolate=function(v){return arguments.length?(n=v,f()):n},m.unknown=function(v){return arguments.length?(s=v,m):s},function(v,_){return r=v,i=_,f()}}function CI(){return Tb()(Hr,Hr)}function Dle(t,e){return function(n,r){for(var i=n.length,s=[],o=0,l=t[0],u=0;i>0&&l>0&&(u+l+1>r&&(l=Math.max(1,r-u)),s.push(n.substring(i-=l,i+l)),!((u+=l+1)>r));)l=t[o=(o+1)%t.length];return s.reverse().join(e)}}function kle(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Ole=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function rg(t){if(!(e=Ole.exec(t)))throw new Error("invalid format: "+t);var e;return new II({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}rg.prototype=II.prototype;function II(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}II.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Vle(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}function Lle(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function jA(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}var lq;function Ule(t,e){var n=jA(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(lq=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+jA(t,Math.max(0,e+s-1))[0]}function iL(t,e){var n=jA(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const sL={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Lle,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>iL(t*100,e),r:iL,s:Ule,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function oL(t){return t}var aL=Array.prototype.map,lL=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Fle(t){var e=t.grouping===void 0||t.thousands===void 0?oL:Dle(aL.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?oL:kle(aL.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function d(m){m=rg(m);var v=m.fill,_=m.align,T=m.sign,S=m.symbol,A=m.zero,I=m.width,D=m.comma,N=m.precision,U=m.trim,O=m.type;O==="n"?(D=!0,O="g"):sL[O]||(N===void 0&&(N=12),U=!0,O="g"),(A||v==="0"&&_==="=")&&(A=!0,v="0",_="=");var q=S==="$"?n:S==="#"&&/[boxX]/.test(O)?"0"+O.toLowerCase():"",M=S==="$"?r:/[%p]/.test(O)?o:"",R=sL[O],k=/[defgprs%]/.test(O);N=N===void 0?6:/[gprs]/.test(O)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function F(j){var G=q,$=M,de,ve,Y;if(O==="c")$=R(j)+$,j="";else{j=+j;var se=j<0||1/j<0;if(j=isNaN(j)?u:R(Math.abs(j),N),U&&(j=Vle(j)),se&&+j==0&&T!=="+"&&(se=!1),G=(se?T==="("?T:l:T==="-"||T==="("?"":T)+G,$=(O==="s"?lL[8+lq/3]:"")+$+(se&&T==="("?")":""),k){for(de=-1,ve=j.length;++de<ve;)if(Y=j.charCodeAt(de),48>Y||Y>57){$=(Y===46?i+j.slice(de+1):j.slice(de))+$,j=j.slice(0,de);break}}}D&&!A&&(j=e(j,1/0));var Q=G.length+j.length+$.length,_e=Q<I?new Array(I-Q+1).join(v):"";switch(D&&A&&(j=e(_e+j,_e.length?I-$.length:1/0),_e=""),_){case"<":j=G+j+$+_e;break;case"=":j=G+_e+j+$;break;case"^":j=_e.slice(0,Q=_e.length>>1)+G+j+$+_e.slice(Q);break;default:j=_e+G+j+$;break}return s(j)}return F.toString=function(){return m+""},F}function f(m,v){var _=d((m=rg(m),m.type="f",m)),T=Math.max(-8,Math.min(8,Math.floor(Af(v)/3)))*3,S=Math.pow(10,-T),A=lL[8+T/3];return function(I){return _(S*I)+A}}return{format:d,formatPrefix:f}}var Kv,RI,uq;jle({thousands:",",grouping:[3],currency:["$",""]});function jle(t){return Kv=Fle(t),RI=Kv.format,uq=Kv.formatPrefix,Kv}function Ble(t){return Math.max(0,-Af(Math.abs(t)))}function qle(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Af(e)/3)))*3-Af(Math.abs(t)))}function zle(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Af(e)-Af(t))+1}function cq(t,e,n,r){var i=OA(t,e,n),s;switch(r=rg(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=qle(i,o))&&(r.precision=s),uq(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=zle(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=Ble(i))&&(r.precision=s-(r.type==="%")*2);break}}return RI(r)}function Hl(t){var e=t.domain;return t.ticks=function(n){var r=e();return DA(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return cq(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,o=r[i],l=r[s],u,d,f=10;for(l<o&&(d=o,o=l,l=d,d=i,i=s,s=d);f-- >0;){if(d=kA(o,l,n),d===u)return r[i]=o,r[s]=l,e(r);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;u=d}return t},t}function dq(){var t=CI();return t.copy=function(){return Bg(t,dq())},fs.apply(t,arguments),Hl(t)}function fq(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,hx),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return fq(t).unknown(e)},t=arguments.length?Array.from(t,hx):[0,1],Hl(n)}function hq(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),t[n]=e.floor(i),t[r]=e.ceil(s),t}function uL(t){return Math.log(t)}function cL(t){return Math.exp(t)}function $le(t){return-Math.log(-t)}function Gle(t){return-Math.exp(-t)}function Hle(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Kle(t){return t===10?Hle:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Wle(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function dL(t){return(e,n)=>-t(-e,n)}function PI(t){const e=t(uL,cL),n=e.domain;let r=10,i,s;function o(){return i=Wle(r),s=Kle(r),n()[0]<0?(i=dL(i),s=dL(s),t($le,Gle)):t(uL,cL),e}return e.base=function(l){return arguments.length?(r=+l,o()):r},e.domain=function(l){return arguments.length?(n(l),o()):n()},e.ticks=l=>{const u=n();let d=u[0],f=u[u.length-1];const m=f<d;m&&([d,f]=[f,d]);let v=i(d),_=i(f),T,S;const A=l==null?10:+l;let I=[];if(!(r%1)&&_-v<A){if(v=Math.floor(v),_=Math.ceil(_),d>0){for(;v<=_;++v)for(T=1;T<r;++T)if(S=v<0?T/s(-v):T*s(v),!(S<d)){if(S>f)break;I.push(S)}}else for(;v<=_;++v)for(T=r-1;T>=1;--T)if(S=v>0?T/s(-v):T*s(v),!(S<d)){if(S>f)break;I.push(S)}I.length*2<A&&(I=DA(d,f,A))}else I=DA(v,_,Math.min(_-v,A)).map(s);return m?I.reverse():I},e.tickFormat=(l,u)=>{if(l==null&&(l=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=rg(u)).precision==null&&(u.trim=!0),u=RI(u)),l===1/0)return u;const d=Math.max(1,r*l/e.ticks().length);return f=>{let m=f/s(Math.round(i(f)));return m*r<r-.5&&(m*=r),m<=d?u(f):""}},e.nice=()=>n(hq(n(),{floor:l=>s(Math.floor(i(l))),ceil:l=>s(Math.ceil(i(l)))})),e}function mq(){const t=PI(Tb()).domain([1,10]);return t.copy=()=>Bg(t,mq()).base(t.base()),fs.apply(t,arguments),t}function fL(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function hL(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function NI(t){var e=1,n=t(fL(e),hL(e));return n.constant=function(r){return arguments.length?t(fL(e=+r),hL(e)):e},Hl(n)}function pq(){var t=NI(Tb());return t.copy=function(){return Bg(t,pq()).constant(t.constant())},fs.apply(t,arguments)}function mL(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Yle(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Jle(t){return t<0?-t*t:t*t}function MI(t){var e=t(Hr,Hr),n=1;function r(){return n===1?t(Hr,Hr):n===.5?t(Yle,Jle):t(mL(n),mL(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Hl(e)}function DI(){var t=MI(Tb());return t.copy=function(){return Bg(t,DI()).exponent(t.exponent())},fs.apply(t,arguments),t}function Qle(){return DI.apply(null,arguments).exponent(.5)}function pL(t){return Math.sign(t)*t*t}function Xle(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function gq(){var t=CI(),e=[0,1],n=!1,r;function i(s){var o=Xle(t(s));return isNaN(o)?r:n?Math.round(o):o}return i.invert=function(s){return t.invert(pL(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,hx)).map(pL)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return gq(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},fs.apply(i,arguments),Hl(i)}function yq(){var t=[],e=[],n=[],r;function i(){var o=0,l=Math.max(1,e.length);for(n=new Array(l-1);++o<l;)n[o-1]=nle(t,o/l);return s}function s(o){return o==null||isNaN(o=+o)?r:e[Fg(n,o)]}return s.invertExtent=function(o){var l=e.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let l of o)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(wl),i()},s.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return yq().domain(t).range(e).unknown(r)},fs.apply(s,arguments)}function vq(){var t=0,e=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[Fg(r,u,0,n)]:s}function l(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*e-(u-n)*t)/(n+1);return o}return o.domain=function(u){return arguments.length?([t,e]=u,t=+t,e=+e,l()):[t,e]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,l()):i.slice()},o.invertExtent=function(u){var d=i.indexOf(u);return d<0?[NaN,NaN]:d<1?[t,r[0]]:d>=n?[r[n-1],e]:[r[d-1],r[d]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return vq().domain([t,e]).range(i).unknown(s)},fs.apply(Hl(o),arguments)}function xq(){var t=[.5],e=[0,1],n,r=1;function i(s){return s!=null&&s<=s?e[Fg(t,s,0,r)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return xq().domain(t).range(e).unknown(n)},fs.apply(i,arguments)}const QE=new Date,XE=new Date;function Jn(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const o=i(s),l=i.ceil(s);return s-o<l-s?o:l},i.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,l)=>{const u=[];if(s=i.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return u;let d;do u.push(d=new Date(+s)),e(s,l),t(s);while(d<s&&s<o);return u},i.filter=s=>Jn(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!s(o););else for(;--l>=0;)for(;e(o,1),!s(o););}),n&&(i.count=(s,o)=>(QE.setTime(+s),XE.setTime(+o),t(QE),t(XE),Math.floor(n(QE,XE))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const mx=Jn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);mx.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Jn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):mx);mx.range;const Yo=1e3,ns=Yo*60,Jo=ns*60,ia=Jo*24,kI=ia*7,gL=ia*30,ZE=ia*365,ec=Jn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Yo)},(t,e)=>(e-t)/Yo,t=>t.getUTCSeconds());ec.range;const OI=Jn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Yo)},(t,e)=>{t.setTime(+t+e*ns)},(t,e)=>(e-t)/ns,t=>t.getMinutes());OI.range;const VI=Jn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*ns)},(t,e)=>(e-t)/ns,t=>t.getUTCMinutes());VI.range;const LI=Jn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Yo-t.getMinutes()*ns)},(t,e)=>{t.setTime(+t+e*Jo)},(t,e)=>(e-t)/Jo,t=>t.getHours());LI.range;const UI=Jn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Jo)},(t,e)=>(e-t)/Jo,t=>t.getUTCHours());UI.range;const qg=Jn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ns)/ia,t=>t.getDate()-1);qg.range;const Eb=Jn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ia,t=>t.getUTCDate()-1);Eb.range;const bq=Jn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ia,t=>Math.floor(t/ia));bq.range;function Uc(t){return Jn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*ns)/kI)}const Sb=Uc(0),px=Uc(1),Zle=Uc(2),eue=Uc(3),Of=Uc(4),tue=Uc(5),nue=Uc(6);Sb.range;px.range;Zle.range;eue.range;Of.range;tue.range;nue.range;function Fc(t){return Jn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/kI)}const Ab=Fc(0),gx=Fc(1),rue=Fc(2),iue=Fc(3),Vf=Fc(4),sue=Fc(5),oue=Fc(6);Ab.range;gx.range;rue.range;iue.range;Vf.range;sue.range;oue.range;const FI=Jn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());FI.range;const jI=Jn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());jI.range;const sa=Jn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());sa.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Jn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});sa.range;const oa=Jn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());oa.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Jn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});oa.range;function _q(t,e,n,r,i,s){const o=[[ec,1,Yo],[ec,5,5*Yo],[ec,15,15*Yo],[ec,30,30*Yo],[s,1,ns],[s,5,5*ns],[s,15,15*ns],[s,30,30*ns],[i,1,Jo],[i,3,3*Jo],[i,6,6*Jo],[i,12,12*Jo],[r,1,ia],[r,2,2*ia],[n,1,kI],[e,1,gL],[e,3,3*gL],[t,1,ZE]];function l(d,f,m){const v=f<d;v&&([d,f]=[f,d]);const _=m&&typeof m.range=="function"?m:u(d,f,m),T=_?_.range(d,+f+1):[];return v?T.reverse():T}function u(d,f,m){const v=Math.abs(f-d)/m,_=_I(([,,A])=>A).right(o,v);if(_===o.length)return t.every(OA(d/ZE,f/ZE,m));if(_===0)return mx.every(Math.max(OA(d,f,m),1));const[T,S]=o[v/o[_-1][2]<o[_][2]/v?_-1:_];return T.every(S)}return[l,u]}const[aue,lue]=_q(oa,jI,Ab,bq,UI,VI),[uue,cue]=_q(sa,FI,Sb,qg,LI,OI);function eS(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function tS(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Qm(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function due(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,o=t.shortDays,l=t.months,u=t.shortMonths,d=Xm(i),f=Zm(i),m=Xm(s),v=Zm(s),_=Xm(o),T=Zm(o),S=Xm(l),A=Zm(l),I=Xm(u),D=Zm(u),N={a:se,A:Q,b:_e,B:H,c:null,d:wL,e:wL,f:kue,g:$ue,G:Hue,H:Nue,I:Mue,j:Due,L:wq,m:Oue,M:Vue,p:ae,q:le,Q:SL,s:AL,S:Lue,u:Uue,U:Fue,V:jue,w:Bue,W:que,x:null,X:null,y:zue,Y:Gue,Z:Kue,"%":EL},U={a:ce,A:Ee,b:Me,B:je,c:null,d:TL,e:TL,f:Que,g:ace,G:uce,H:Wue,I:Yue,j:Jue,L:Eq,m:Xue,M:Zue,p:xe,q:ot,Q:SL,s:AL,S:ece,u:tce,U:nce,V:rce,w:ice,W:sce,x:null,X:null,y:oce,Y:lce,Z:cce,"%":EL},O={a:F,A:j,b:G,B:$,c:de,d:bL,e:bL,f:Cue,g:xL,G:vL,H:_L,I:_L,j:Tue,L:Aue,m:wue,M:Eue,p:k,q:_ue,Q:Rue,s:Pue,S:Sue,u:gue,U:yue,V:vue,w:pue,W:xue,x:ve,X:Y,y:xL,Y:vL,Z:bue,"%":Iue};N.x=q(n,N),N.X=q(r,N),N.c=q(e,N),U.x=q(n,U),U.X=q(r,U),U.c=q(e,U);function q(Te,we){return function(Pe){var ue=[],It=-1,it=0,Wt=Te.length,un,cn,Sa;for(Pe instanceof Date||(Pe=new Date(+Pe));++It<Wt;)Te.charCodeAt(It)===37&&(ue.push(Te.slice(it,It)),(cn=yL[un=Te.charAt(++It)])!=null?un=Te.charAt(++It):cn=un==="e"?" ":"0",(Sa=we[un])&&(un=Sa(Pe,cn)),ue.push(un),it=It+1);return ue.push(Te.slice(it,It)),ue.join("")}}function M(Te,we){return function(Pe){var ue=Qm(1900,void 0,1),It=R(ue,Te,Pe+="",0),it,Wt;if(It!=Pe.length)return null;if("Q"in ue)return new Date(ue.Q);if("s"in ue)return new Date(ue.s*1e3+("L"in ue?ue.L:0));if(we&&!("Z"in ue)&&(ue.Z=0),"p"in ue&&(ue.H=ue.H%12+ue.p*12),ue.m===void 0&&(ue.m="q"in ue?ue.q:0),"V"in ue){if(ue.V<1||ue.V>53)return null;"w"in ue||(ue.w=1),"Z"in ue?(it=tS(Qm(ue.y,0,1)),Wt=it.getUTCDay(),it=Wt>4||Wt===0?gx.ceil(it):gx(it),it=Eb.offset(it,(ue.V-1)*7),ue.y=it.getUTCFullYear(),ue.m=it.getUTCMonth(),ue.d=it.getUTCDate()+(ue.w+6)%7):(it=eS(Qm(ue.y,0,1)),Wt=it.getDay(),it=Wt>4||Wt===0?px.ceil(it):px(it),it=qg.offset(it,(ue.V-1)*7),ue.y=it.getFullYear(),ue.m=it.getMonth(),ue.d=it.getDate()+(ue.w+6)%7)}else("W"in ue||"U"in ue)&&("w"in ue||(ue.w="u"in ue?ue.u%7:"W"in ue?1:0),Wt="Z"in ue?tS(Qm(ue.y,0,1)).getUTCDay():eS(Qm(ue.y,0,1)).getDay(),ue.m=0,ue.d="W"in ue?(ue.w+6)%7+ue.W*7-(Wt+5)%7:ue.w+ue.U*7-(Wt+6)%7);return"Z"in ue?(ue.H+=ue.Z/100|0,ue.M+=ue.Z%100,tS(ue)):eS(ue)}}function R(Te,we,Pe,ue){for(var It=0,it=we.length,Wt=Pe.length,un,cn;It<it;){if(ue>=Wt)return-1;if(un=we.charCodeAt(It++),un===37){if(un=we.charAt(It++),cn=O[un in yL?we.charAt(It++):un],!cn||(ue=cn(Te,Pe,ue))<0)return-1}else if(un!=Pe.charCodeAt(ue++))return-1}return ue}function k(Te,we,Pe){var ue=d.exec(we.slice(Pe));return ue?(Te.p=f.get(ue[0].toLowerCase()),Pe+ue[0].length):-1}function F(Te,we,Pe){var ue=_.exec(we.slice(Pe));return ue?(Te.w=T.get(ue[0].toLowerCase()),Pe+ue[0].length):-1}function j(Te,we,Pe){var ue=m.exec(we.slice(Pe));return ue?(Te.w=v.get(ue[0].toLowerCase()),Pe+ue[0].length):-1}function G(Te,we,Pe){var ue=I.exec(we.slice(Pe));return ue?(Te.m=D.get(ue[0].toLowerCase()),Pe+ue[0].length):-1}function $(Te,we,Pe){var ue=S.exec(we.slice(Pe));return ue?(Te.m=A.get(ue[0].toLowerCase()),Pe+ue[0].length):-1}function de(Te,we,Pe){return R(Te,e,we,Pe)}function ve(Te,we,Pe){return R(Te,n,we,Pe)}function Y(Te,we,Pe){return R(Te,r,we,Pe)}function se(Te){return o[Te.getDay()]}function Q(Te){return s[Te.getDay()]}function _e(Te){return u[Te.getMonth()]}function H(Te){return l[Te.getMonth()]}function ae(Te){return i[+(Te.getHours()>=12)]}function le(Te){return 1+~~(Te.getMonth()/3)}function ce(Te){return o[Te.getUTCDay()]}function Ee(Te){return s[Te.getUTCDay()]}function Me(Te){return u[Te.getUTCMonth()]}function je(Te){return l[Te.getUTCMonth()]}function xe(Te){return i[+(Te.getUTCHours()>=12)]}function ot(Te){return 1+~~(Te.getUTCMonth()/3)}return{format:function(Te){var we=q(Te+="",N);return we.toString=function(){return Te},we},parse:function(Te){var we=M(Te+="",!1);return we.toString=function(){return Te},we},utcFormat:function(Te){var we=q(Te+="",U);return we.toString=function(){return Te},we},utcParse:function(Te){var we=M(Te+="",!0);return we.toString=function(){return Te},we}}}var yL={"-":"",_:" ",0:"0"},dr=/^\s*\d+/,fue=/^%/,hue=/[\\^$*+?|[\]().{}]/g;function Et(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function mue(t){return t.replace(hue,"\\$&")}function Xm(t){return new RegExp("^(?:"+t.map(mue).join("|")+")","i")}function Zm(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function pue(t,e,n){var r=dr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function gue(t,e,n){var r=dr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function yue(t,e,n){var r=dr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function vue(t,e,n){var r=dr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function xue(t,e,n){var r=dr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function vL(t,e,n){var r=dr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function xL(t,e,n){var r=dr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function bue(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function _ue(t,e,n){var r=dr.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function wue(t,e,n){var r=dr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function bL(t,e,n){var r=dr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Tue(t,e,n){var r=dr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function _L(t,e,n){var r=dr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Eue(t,e,n){var r=dr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Sue(t,e,n){var r=dr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Aue(t,e,n){var r=dr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Cue(t,e,n){var r=dr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Iue(t,e,n){var r=fue.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Rue(t,e,n){var r=dr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Pue(t,e,n){var r=dr.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function wL(t,e){return Et(t.getDate(),e,2)}function Nue(t,e){return Et(t.getHours(),e,2)}function Mue(t,e){return Et(t.getHours()%12||12,e,2)}function Due(t,e){return Et(1+qg.count(sa(t),t),e,3)}function wq(t,e){return Et(t.getMilliseconds(),e,3)}function kue(t,e){return wq(t,e)+"000"}function Oue(t,e){return Et(t.getMonth()+1,e,2)}function Vue(t,e){return Et(t.getMinutes(),e,2)}function Lue(t,e){return Et(t.getSeconds(),e,2)}function Uue(t){var e=t.getDay();return e===0?7:e}function Fue(t,e){return Et(Sb.count(sa(t)-1,t),e,2)}function Tq(t){var e=t.getDay();return e>=4||e===0?Of(t):Of.ceil(t)}function jue(t,e){return t=Tq(t),Et(Of.count(sa(t),t)+(sa(t).getDay()===4),e,2)}function Bue(t){return t.getDay()}function que(t,e){return Et(px.count(sa(t)-1,t),e,2)}function zue(t,e){return Et(t.getFullYear()%100,e,2)}function $ue(t,e){return t=Tq(t),Et(t.getFullYear()%100,e,2)}function Gue(t,e){return Et(t.getFullYear()%1e4,e,4)}function Hue(t,e){var n=t.getDay();return t=n>=4||n===0?Of(t):Of.ceil(t),Et(t.getFullYear()%1e4,e,4)}function Kue(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Et(e/60|0,"0",2)+Et(e%60,"0",2)}function TL(t,e){return Et(t.getUTCDate(),e,2)}function Wue(t,e){return Et(t.getUTCHours(),e,2)}function Yue(t,e){return Et(t.getUTCHours()%12||12,e,2)}function Jue(t,e){return Et(1+Eb.count(oa(t),t),e,3)}function Eq(t,e){return Et(t.getUTCMilliseconds(),e,3)}function Que(t,e){return Eq(t,e)+"000"}function Xue(t,e){return Et(t.getUTCMonth()+1,e,2)}function Zue(t,e){return Et(t.getUTCMinutes(),e,2)}function ece(t,e){return Et(t.getUTCSeconds(),e,2)}function tce(t){var e=t.getUTCDay();return e===0?7:e}function nce(t,e){return Et(Ab.count(oa(t)-1,t),e,2)}function Sq(t){var e=t.getUTCDay();return e>=4||e===0?Vf(t):Vf.ceil(t)}function rce(t,e){return t=Sq(t),Et(Vf.count(oa(t),t)+(oa(t).getUTCDay()===4),e,2)}function ice(t){return t.getUTCDay()}function sce(t,e){return Et(gx.count(oa(t)-1,t),e,2)}function oce(t,e){return Et(t.getUTCFullYear()%100,e,2)}function ace(t,e){return t=Sq(t),Et(t.getUTCFullYear()%100,e,2)}function lce(t,e){return Et(t.getUTCFullYear()%1e4,e,4)}function uce(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Vf(t):Vf.ceil(t),Et(t.getUTCFullYear()%1e4,e,4)}function cce(){return"+0000"}function EL(){return"%"}function SL(t){return+t}function AL(t){return Math.floor(+t/1e3)}var Fd,Aq,Cq;dce({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function dce(t){return Fd=due(t),Aq=Fd.format,Fd.parse,Cq=Fd.utcFormat,Fd.utcParse,Fd}function fce(t){return new Date(t)}function hce(t){return t instanceof Date?+t:+new Date(+t)}function BI(t,e,n,r,i,s,o,l,u,d){var f=CI(),m=f.invert,v=f.domain,_=d(".%L"),T=d(":%S"),S=d("%I:%M"),A=d("%I %p"),I=d("%a %d"),D=d("%b %d"),N=d("%B"),U=d("%Y");function O(q){return(u(q)<q?_:l(q)<q?T:o(q)<q?S:s(q)<q?A:r(q)<q?i(q)<q?I:D:n(q)<q?N:U)(q)}return f.invert=function(q){return new Date(m(q))},f.domain=function(q){return arguments.length?v(Array.from(q,hce)):v().map(fce)},f.ticks=function(q){var M=v();return t(M[0],M[M.length-1],q??10)},f.tickFormat=function(q,M){return M==null?O:d(M)},f.nice=function(q){var M=v();return(!q||typeof q.range!="function")&&(q=e(M[0],M[M.length-1],q??10)),q?v(hq(M,q)):f},f.copy=function(){return Bg(f,BI(t,e,n,r,i,s,o,l,u,d))},f}function mce(){return fs.apply(BI(uue,cue,sa,FI,Sb,qg,LI,OI,ec,Aq).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function pce(){return fs.apply(BI(aue,lue,oa,jI,Ab,Eb,UI,VI,ec,Cq).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Cb(){var t=0,e=1,n,r,i,s,o=Hr,l=!1,u;function d(m){return m==null||isNaN(m=+m)?u:o(i===0?.5:(m=(s(m)-n)*i,l?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([t,e]=m,n=s(t=+t),r=s(e=+e),i=n===r?0:1/(r-n),d):[t,e]},d.clamp=function(m){return arguments.length?(l=!!m,d):l},d.interpolator=function(m){return arguments.length?(o=m,d):o};function f(m){return function(v){var _,T;return arguments.length?([_,T]=v,o=m(_,T),d):[o(0),o(1)]}}return d.range=f(fh),d.rangeRound=f(AI),d.unknown=function(m){return arguments.length?(u=m,d):u},function(m){return s=m,n=m(t),r=m(e),i=n===r?0:1/(r-n),d}}function Kl(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Iq(){var t=Hl(Cb()(Hr));return t.copy=function(){return Kl(t,Iq())},ga.apply(t,arguments)}function Rq(){var t=PI(Cb()).domain([1,10]);return t.copy=function(){return Kl(t,Rq()).base(t.base())},ga.apply(t,arguments)}function Pq(){var t=NI(Cb());return t.copy=function(){return Kl(t,Pq()).constant(t.constant())},ga.apply(t,arguments)}function qI(){var t=MI(Cb());return t.copy=function(){return Kl(t,qI()).exponent(t.exponent())},ga.apply(t,arguments)}function gce(){return qI.apply(null,arguments).exponent(.5)}function Nq(){var t=[],e=Hr;function n(r){if(r!=null&&!isNaN(r=+r))return e((Fg(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(wl),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>tle(t,s/r))},n.copy=function(){return Nq(e).domain(t)},ga.apply(n,arguments)}function Ib(){var t=0,e=.5,n=1,r=1,i,s,o,l,u,d=Hr,f,m=!1,v;function _(S){return isNaN(S=+S)?v:(S=.5+((S=+f(S))-s)*(r*S<r*s?l:u),d(m?Math.max(0,Math.min(1,S)):S))}_.domain=function(S){return arguments.length?([t,e,n]=S,i=f(t=+t),s=f(e=+e),o=f(n=+n),l=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,_):[t,e,n]},_.clamp=function(S){return arguments.length?(m=!!S,_):m},_.interpolator=function(S){return arguments.length?(d=S,_):d};function T(S){return function(A){var I,D,N;return arguments.length?([I,D,N]=A,d=Ile(S,[I,D,N]),_):[d(0),d(.5),d(1)]}}return _.range=T(fh),_.rangeRound=T(AI),_.unknown=function(S){return arguments.length?(v=S,_):v},function(S){return f=S,i=S(t),s=S(e),o=S(n),l=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,_}}function Mq(){var t=Hl(Ib()(Hr));return t.copy=function(){return Kl(t,Mq())},ga.apply(t,arguments)}function Dq(){var t=PI(Ib()).domain([.1,1,10]);return t.copy=function(){return Kl(t,Dq()).base(t.base())},ga.apply(t,arguments)}function kq(){var t=NI(Ib());return t.copy=function(){return Kl(t,kq()).constant(t.constant())},ga.apply(t,arguments)}function zI(){var t=MI(Ib());return t.copy=function(){return Kl(t,zI()).exponent(t.exponent())},ga.apply(t,arguments)}function yce(){return zI.apply(null,arguments).exponent(.5)}const fp=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:TI,scaleDiverging:Mq,scaleDivergingLog:Dq,scaleDivergingPow:zI,scaleDivergingSqrt:yce,scaleDivergingSymlog:kq,scaleIdentity:fq,scaleImplicit:VA,scaleLinear:dq,scaleLog:mq,scaleOrdinal:wI,scalePoint:ile,scalePow:DI,scaleQuantile:yq,scaleQuantize:vq,scaleRadial:gq,scaleSequential:Iq,scaleSequentialLog:Rq,scaleSequentialPow:qI,scaleSequentialQuantile:Nq,scaleSequentialSqrt:gce,scaleSequentialSymlog:Pq,scaleSqrt:Qle,scaleSymlog:pq,scaleThreshold:xq,scaleTime:mce,scaleUtc:pce,tickFormat:cq},Symbol.toStringTag,{value:"Module"}));var Wl=t=>t.chartData,vce=fe([Wl],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),$I=(t,e,n,r)=>r?vce(t):Wl(t);function Lf(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(Rs(e)&&Rs(n))return!0}return!1}function CL(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function xce(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,s;if(Rs(n))i=n;else if(typeof n=="function")return;if(Rs(r))s=r;else if(typeof r=="function")return;var o=[i,s];if(Lf(o))return o}}function bce(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(Lf(r))return CL(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,s]=t,o,l;if(i==="auto")e!=null&&(o=Math.min(...e));else if(qe(i))o=i;else if(typeof i=="function")try{e!=null&&(o=i(e==null?void 0:e[0]))}catch{}else if(typeof i=="string"&&hV.test(i)){var u=hV.exec(i);if(u==null||e==null)o=void 0;else{var d=+u[1];o=e[0]-d}}else o=e==null?void 0:e[0];if(s==="auto")e!=null&&(l=Math.max(...e));else if(qe(s))l=s;else if(typeof s=="function")try{e!=null&&(l=s(e==null?void 0:e[1]))}catch{}else if(typeof s=="string"&&mV.test(s)){var f=mV.exec(s);if(f==null||e==null)l=void 0;else{var m=+f[1];l=e[1]+m}}else l=e==null?void 0:e[1];var v=[o,l];if(Lf(v))return e==null?v:CL(v,e,n)}}}var hh=1e9,_ce={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},HI,an=!0,cs="[DecimalError] ",fc=cs+"Invalid argument: ",GI=cs+"Exponent out of range: ",mh=Math.floor,Bu=Math.pow,wce=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ai,ar=1e7,Qt=7,Oq=9007199254740991,yx=mh(Oq/Qt),De={};De.absoluteValue=De.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};De.comparedTo=De.cmp=function(t){var e,n,r,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(r=s.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};De.decimalPlaces=De.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Qt;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};De.dividedBy=De.div=function(t){return ea(this,new this.constructor(t))};De.dividedToIntegerBy=De.idiv=function(t){var e=this,n=e.constructor;return zt(ea(e,new n(t),0,1),n.precision)};De.equals=De.eq=function(t){return!this.cmp(t)};De.exponent=function(){return Fn(this)};De.greaterThan=De.gt=function(t){return this.cmp(t)>0};De.greaterThanOrEqualTo=De.gte=function(t){return this.cmp(t)>=0};De.isInteger=De.isint=function(){return this.e>this.d.length-2};De.isNegative=De.isneg=function(){return this.s<0};De.isPositive=De.ispos=function(){return this.s>0};De.isZero=function(){return this.s===0};De.lessThan=De.lt=function(t){return this.cmp(t)<0};De.lessThanOrEqualTo=De.lte=function(t){return this.cmp(t)<1};De.logarithm=De.log=function(t){var e,n=this,r=n.constructor,i=r.precision,s=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Ai))throw Error(cs+"NaN");if(n.s<1)throw Error(cs+(n.s?"NaN":"-Infinity"));return n.eq(Ai)?new r(0):(an=!1,e=ea(ig(n,s),ig(t,s),s),an=!0,zt(e,i))};De.minus=De.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Uq(e,t):Vq(e,(t.s=-t.s,t))};De.modulo=De.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(cs+"NaN");return n.s?(an=!1,e=ea(n,t,0,1).times(t),an=!0,n.minus(e)):zt(new r(n),i)};De.naturalExponential=De.exp=function(){return Lq(this)};De.naturalLogarithm=De.ln=function(){return ig(this)};De.negated=De.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};De.plus=De.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Vq(e,t):Uq(e,(t.s=-t.s,t))};De.precision=De.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(fc+t);if(e=Fn(i)+1,r=i.d.length-1,n=r*Qt+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};De.squareRoot=De.sqrt=function(){var t,e,n,r,i,s,o,l=this,u=l.constructor;if(l.s<1){if(!l.s)return new u(0);throw Error(cs+"NaN")}for(t=Fn(l),an=!1,i=Math.sqrt(+l),i==0||i==1/0?(e=to(l.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=mh((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new u(e)):r=new u(i.toString()),n=u.precision,i=o=n+3;;)if(s=r,r=s.plus(ea(l,s,o+2)).times(.5),to(s.d).slice(0,o)===(e=to(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(zt(s,n+1,0),s.times(s).eq(l)){r=s;break}}else if(e!="9999")break;o+=4}return an=!0,zt(r,n)};De.times=De.mul=function(t){var e,n,r,i,s,o,l,u,d,f=this,m=f.constructor,v=f.d,_=(t=new m(t)).d;if(!f.s||!t.s)return new m(0);for(t.s*=f.s,n=f.e+t.e,u=v.length,d=_.length,u<d&&(s=v,v=_,_=s,o=u,u=d,d=o),s=[],o=u+d,r=o;r--;)s.push(0);for(r=d;--r>=0;){for(e=0,i=u+r;i>r;)l=s[i]+_[r]*v[i-r-1]+e,s[i--]=l%ar|0,e=l/ar|0;s[i]=(s[i]+e)%ar|0}for(;!s[--o];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,an?zt(t,m.precision):t};De.toDecimalPlaces=De.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(go(t,0,hh),e===void 0?e=r.rounding:go(e,0,8),zt(n,t+Fn(n)+1,e))};De.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Ec(r,!0):(go(t,0,hh),e===void 0?e=i.rounding:go(e,0,8),r=zt(new i(r),t+1,e),n=Ec(r,!0,t+1)),n};De.toFixed=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?Ec(i):(go(t,0,hh),e===void 0?e=s.rounding:go(e,0,8),r=zt(new s(i),t+Fn(i)+1,e),n=Ec(r.abs(),!1,t+Fn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};De.toInteger=De.toint=function(){var t=this,e=t.constructor;return zt(new e(t),Fn(t)+1,e.rounding)};De.toNumber=function(){return+this};De.toPower=De.pow=function(t){var e,n,r,i,s,o,l=this,u=l.constructor,d=12,f=+(t=new u(t));if(!t.s)return new u(Ai);if(l=new u(l),!l.s){if(t.s<1)throw Error(cs+"Infinity");return l}if(l.eq(Ai))return l;if(r=u.precision,t.eq(Ai))return zt(l,r);if(e=t.e,n=t.d.length-1,o=e>=n,s=l.s,o){if((n=f<0?-f:f)<=Oq){for(i=new u(Ai),e=Math.ceil(r/Qt+4),an=!1;n%2&&(i=i.times(l),RL(i.d,e)),n=mh(n/2),n!==0;)l=l.times(l),RL(l.d,e);return an=!0,t.s<0?new u(Ai).div(i):zt(i,r)}}else if(s<0)throw Error(cs+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,l.s=1,an=!1,i=t.times(ig(l,r+d)),an=!0,i=Lq(i),i.s=s,i};De.toPrecision=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?(n=Fn(i),r=Ec(i,n<=s.toExpNeg||n>=s.toExpPos)):(go(t,1,hh),e===void 0?e=s.rounding:go(e,0,8),i=zt(new s(i),t,e),n=Fn(i),r=Ec(i,t<=n||n<=s.toExpNeg,t)),r};De.toSignificantDigits=De.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(go(t,1,hh),e===void 0?e=r.rounding:go(e,0,8)),zt(new r(n),t,e)};De.toString=De.valueOf=De.val=De.toJSON=De[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Fn(t),n=t.constructor;return Ec(t,e<=n.toExpNeg||e>=n.toExpPos)};function Vq(t,e){var n,r,i,s,o,l,u,d,f=t.constructor,m=f.precision;if(!t.s||!e.s)return e.s||(e=new f(t)),an?zt(e,m):e;if(u=t.d,d=e.d,o=t.e,i=e.e,u=u.slice(),s=o-i,s){for(s<0?(r=u,s=-s,l=d.length):(r=d,i=o,l=u.length),o=Math.ceil(m/Qt),l=o>l?o+1:l+1,s>l&&(s=l,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(l=u.length,s=d.length,l-s<0&&(s=l,r=d,d=u,u=r),n=0;s;)n=(u[--s]=u[s]+d[s]+n)/ar|0,u[s]%=ar;for(n&&(u.unshift(n),++i),l=u.length;u[--l]==0;)u.pop();return e.d=u,e.e=i,an?zt(e,m):e}function go(t,e,n){if(t!==~~t||t<e||t>n)throw Error(fc+t)}function to(t){var e,n,r,i=t.length-1,s="",o=t[0];if(i>0){for(s+=o,e=1;e<i;e++)r=t[e]+"",n=Qt-r.length,n&&(s+=fl(n)),s+=r;o=t[e],r=o+"",n=Qt-r.length,n&&(s+=fl(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var ea=(function(){function t(r,i){var s,o=0,l=r.length;for(r=r.slice();l--;)s=r[l]*i+o,r[l]=s%ar|0,o=s/ar|0;return o&&r.unshift(o),r}function e(r,i,s,o){var l,u;if(s!=o)u=s>o?1:-1;else for(l=u=0;l<s;l++)if(r[l]!=i[l]){u=r[l]>i[l]?1:-1;break}return u}function n(r,i,s){for(var o=0;s--;)r[s]-=o,o=r[s]<i[s]?1:0,r[s]=o*ar+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,o){var l,u,d,f,m,v,_,T,S,A,I,D,N,U,O,q,M,R,k=r.constructor,F=r.s==i.s?1:-1,j=r.d,G=i.d;if(!r.s)return new k(r);if(!i.s)throw Error(cs+"Division by zero");for(u=r.e-i.e,M=G.length,O=j.length,_=new k(F),T=_.d=[],d=0;G[d]==(j[d]||0);)++d;if(G[d]>(j[d]||0)&&--u,s==null?D=s=k.precision:o?D=s+(Fn(r)-Fn(i))+1:D=s,D<0)return new k(0);if(D=D/Qt+2|0,d=0,M==1)for(f=0,G=G[0],D++;(d<O||f)&&D--;d++)N=f*ar+(j[d]||0),T[d]=N/G|0,f=N%G|0;else{for(f=ar/(G[0]+1)|0,f>1&&(G=t(G,f),j=t(j,f),M=G.length,O=j.length),U=M,S=j.slice(0,M),A=S.length;A<M;)S[A++]=0;R=G.slice(),R.unshift(0),q=G[0],G[1]>=ar/2&&++q;do f=0,l=e(G,S,M,A),l<0?(I=S[0],M!=A&&(I=I*ar+(S[1]||0)),f=I/q|0,f>1?(f>=ar&&(f=ar-1),m=t(G,f),v=m.length,A=S.length,l=e(m,S,v,A),l==1&&(f--,n(m,M<v?R:G,v))):(f==0&&(l=f=1),m=G.slice()),v=m.length,v<A&&m.unshift(0),n(S,m,A),l==-1&&(A=S.length,l=e(G,S,M,A),l<1&&(f++,n(S,M<A?R:G,A))),A=S.length):l===0&&(f++,S=[0]),T[d++]=f,l&&S[0]?S[A++]=j[U]||0:(S=[j[U]],A=1);while((U++<O||S[0]!==void 0)&&D--)}return T[0]||T.shift(),_.e=u,zt(_,o?s+Fn(_)+1:s)}})();function Lq(t,e){var n,r,i,s,o,l,u=0,d=0,f=t.constructor,m=f.precision;if(Fn(t)>16)throw Error(GI+Fn(t));if(!t.s)return new f(Ai);for(an=!1,l=m,o=new f(.03125);t.abs().gte(.1);)t=t.times(o),d+=5;for(r=Math.log(Bu(2,d))/Math.LN10*2+5|0,l+=r,n=i=s=new f(Ai),f.precision=l;;){if(i=zt(i.times(t),l),n=n.times(++u),o=s.plus(ea(i,n,l)),to(o.d).slice(0,l)===to(s.d).slice(0,l)){for(;d--;)s=zt(s.times(s),l);return f.precision=m,e==null?(an=!0,zt(s,m)):s}s=o}}function Fn(t){for(var e=t.e*Qt,n=t.d[0];n>=10;n/=10)e++;return e}function nS(t,e,n){if(e>t.LN10.sd())throw an=!0,n&&(t.precision=n),Error(cs+"LN10 precision limit exceeded");return zt(new t(t.LN10),e)}function fl(t){for(var e="";t--;)e+="0";return e}function ig(t,e){var n,r,i,s,o,l,u,d,f,m=1,v=10,_=t,T=_.d,S=_.constructor,A=S.precision;if(_.s<1)throw Error(cs+(_.s?"NaN":"-Infinity"));if(_.eq(Ai))return new S(0);if(e==null?(an=!1,d=A):d=e,_.eq(10))return e==null&&(an=!0),nS(S,d);if(d+=v,S.precision=d,n=to(T),r=n.charAt(0),s=Fn(_),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)_=_.times(t),n=to(_.d),r=n.charAt(0),m++;s=Fn(_),r>1?(_=new S("0."+n),s++):_=new S(r+"."+n.slice(1))}else return u=nS(S,d+2,A).times(s+""),_=ig(new S(r+"."+n.slice(1)),d-v).plus(u),S.precision=A,e==null?(an=!0,zt(_,A)):_;for(l=o=_=ea(_.minus(Ai),_.plus(Ai),d),f=zt(_.times(_),d),i=3;;){if(o=zt(o.times(f),d),u=l.plus(ea(o,new S(i),d)),to(u.d).slice(0,d)===to(l.d).slice(0,d))return l=l.times(2),s!==0&&(l=l.plus(nS(S,d+2,A).times(s+""))),l=ea(l,new S(m),d),S.precision=A,e==null?(an=!0,zt(l,A)):l;l=u,i+=2}}function IL(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=mh(n/Qt),t.d=[],r=(n+1)%Qt,n<0&&(r+=Qt),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Qt;r<i;)t.d.push(+e.slice(r,r+=Qt));e=e.slice(r),r=Qt-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),an&&(t.e>yx||t.e<-yx))throw Error(GI+n)}else t.s=0,t.e=0,t.d=[0];return t}function zt(t,e,n){var r,i,s,o,l,u,d,f,m=t.d;for(o=1,s=m[0];s>=10;s/=10)o++;if(r=e-o,r<0)r+=Qt,i=e,d=m[f=0];else{if(f=Math.ceil((r+1)/Qt),s=m.length,f>=s)return t;for(d=s=m[f],o=1;s>=10;s/=10)o++;r%=Qt,i=r-Qt+o}if(n!==void 0&&(s=Bu(10,o-i-1),l=d/s%10|0,u=e<0||m[f+1]!==void 0||d%s,u=n<4?(l||u)&&(n==0||n==(t.s<0?3:2)):l>5||l==5&&(n==4||u||n==6&&(r>0?i>0?d/Bu(10,o-i):0:m[f-1])%10&1||n==(t.s<0?8:7))),e<1||!m[0])return u?(s=Fn(t),m.length=1,e=e-s-1,m[0]=Bu(10,(Qt-e%Qt)%Qt),t.e=mh(-e/Qt)||0):(m.length=1,m[0]=t.e=t.s=0),t;if(r==0?(m.length=f,s=1,f--):(m.length=f+1,s=Bu(10,Qt-r),m[f]=i>0?(d/Bu(10,o-i)%Bu(10,i)|0)*s:0),u)for(;;)if(f==0){(m[0]+=s)==ar&&(m[0]=1,++t.e);break}else{if(m[f]+=s,m[f]!=ar)break;m[f--]=0,s=1}for(r=m.length;m[--r]===0;)m.pop();if(an&&(t.e>yx||t.e<-yx))throw Error(GI+Fn(t));return t}function Uq(t,e){var n,r,i,s,o,l,u,d,f,m,v=t.constructor,_=v.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new v(t),an?zt(e,_):e;if(u=t.d,m=e.d,r=e.e,d=t.e,u=u.slice(),o=d-r,o){for(f=o<0,f?(n=u,o=-o,l=m.length):(n=m,r=d,l=u.length),i=Math.max(Math.ceil(_/Qt),l)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=u.length,l=m.length,f=i<l,f&&(l=i),i=0;i<l;i++)if(u[i]!=m[i]){f=u[i]<m[i];break}o=0}for(f&&(n=u,u=m,m=n,e.s=-e.s),l=u.length,i=m.length-l;i>0;--i)u[l++]=0;for(i=m.length;i>o;){if(u[--i]<m[i]){for(s=i;s&&u[--s]===0;)u[s]=ar-1;--u[s],u[i]+=ar}u[i]-=m[i]}for(;u[--l]===0;)u.pop();for(;u[0]===0;u.shift())--r;return u[0]?(e.d=u,e.e=r,an?zt(e,_):e):new v(0)}function Ec(t,e,n){var r,i=Fn(t),s=to(t.d),o=s.length;return e?(n&&(r=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+fl(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+fl(-i-1)+s,n&&(r=n-o)>0&&(s+=fl(r))):i>=o?(s+=fl(i+1-o),n&&(r=n-i-1)>0&&(s=s+"."+fl(r))):((r=i+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(s+="."),s+=fl(r))),t.s<0?"-"+s:s}function RL(t,e){if(t.length>e)return t.length=e,!0}function Fq(t){var e,n,r;function i(s){var o=this;if(!(o instanceof i))return new i(s);if(o.constructor=i,s instanceof i){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(fc+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return IL(o,s.toString())}else if(typeof s!="string")throw Error(fc+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,wce.test(s))IL(o,s);else throw Error(fc+s)}if(i.prototype=De,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=Fq,i.config=i.set=Tce,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function Tce(t){if(!t||typeof t!="object")throw Error(cs+"Object expected");var e,n,r,i=["precision",1,hh,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(mh(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(fc+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(fc+n+": "+r);return this}var HI=Fq(_ce);Ai=new HI(1);const kt=HI;var Ece=t=>t,jq={},Bq=t=>t===jq,PL=t=>function e(){return arguments.length===0||arguments.length===1&&Bq(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},qq=(t,e)=>t===1?e:PL(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=r.filter(o=>o!==jq).length;return s>=t?e(...r):qq(t-s,PL(function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];var d=r.map(f=>Bq(f)?l.shift():f);return e(...d,...l)}))}),Rb=t=>qq(t.length,t),BA=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},Sce=Rb((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),Ace=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return Ece;var i=n.reverse(),s=i[0],o=i.slice(1);return function(){return o.reduce((l,u)=>u(l),s(...arguments))}},qA=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join(""),zq=t=>{var e=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return e&&i.every((o,l)=>{var u;return o===((u=e)===null||u===void 0?void 0:u[l])})||(e=i,n=t(...i)),n}};function $q(t){var e;return t===0?e=1:e=Math.floor(new kt(t).abs().log(10).toNumber())+1,e}function Gq(t,e,n){for(var r=new kt(t),i=0,s=[];r.lt(e)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}Rb((t,e,n)=>{var r=+t,i=+e;return r+n*(i-r)});Rb((t,e,n)=>{var r=e-+t;return r=r||1/0,(n-t)/r});Rb((t,e,n)=>{var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});var Hq=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},Kq=(t,e,n)=>{if(t.lte(0))return new kt(0);var r=$q(t.toNumber()),i=new kt(10).pow(r),s=t.div(i),o=r!==1?.05:.1,l=new kt(Math.ceil(s.div(o).toNumber())).add(n).mul(o),u=l.mul(i);return e?new kt(u.toNumber()):new kt(Math.ceil(u.toNumber()))},Cce=(t,e,n)=>{var r=new kt(1),i=new kt(t);if(!i.isint()&&n){var s=Math.abs(t);s<1?(r=new kt(10).pow($q(t)-1),i=new kt(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new kt(Math.floor(t)))}else t===0?i=new kt(Math.floor((e-1)/2)):n||(i=new kt(Math.floor(t)));var o=Math.floor((e-1)/2),l=Ace(Sce(u=>i.add(new kt(u-o).mul(r)).toNumber()),BA);return l(0,e)},Wq=function(e,n,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new kt(0),tickMin:new kt(0),tickMax:new kt(0)};var o=Kq(new kt(n).sub(e).div(r-1),i,s),l;e<=0&&n>=0?l=new kt(0):(l=new kt(e).add(n).div(2),l=l.sub(new kt(l).mod(o)));var u=Math.ceil(l.sub(e).div(o).toNumber()),d=Math.ceil(new kt(n).sub(l).div(o).toNumber()),f=u+d+1;return f>r?Wq(e,n,r,i,s+1):(f<r&&(d=n>0?d+(r-f):d,u=n>0?u:u+(r-f)),{step:o,tickMin:l.sub(new kt(u).mul(o)),tickMax:l.add(new kt(d).mul(o))})};function Ice(t){var[e,n]=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(r,2),[o,l]=Hq([e,n]);if(o===-1/0||l===1/0){var u=l===1/0?[o,...BA(0,r-1).map(()=>1/0)]:[...BA(0,r-1).map(()=>-1/0),l];return e>n?qA(u):u}if(o===l)return Cce(o,r,i);var{step:d,tickMin:f,tickMax:m}=Wq(o,l,s,i,0),v=Gq(f,m.add(new kt(.1).mul(d)),d);return e>n?qA(v):v}function Rce(t,e){var[n,r]=t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,o]=Hq([n,r]);if(s===-1/0||o===1/0)return[n,r];if(s===o)return[s];var l=Math.max(e,2),u=Kq(new kt(o).sub(s).div(l-1),i,0),d=[...Gq(new kt(s),new kt(o),u),o];return i===!1&&(d=d.map(f=>Math.round(f))),n>r?qA(d):d}var Pce=zq(Ice),Nce=zq(Rce),Mce=t=>t.rootProps.barCategoryGap,Pb=t=>t.rootProps.stackOffset,KI=t=>t.options.chartName,WI=t=>t.rootProps.syncId,Yq=t=>t.rootProps.syncMethod,YI=t=>t.options.eventEmitter,Ho={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},wi={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Nb=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},Dce={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Ho.angleAxisId,includeHidden:!1,name:void 0,reversed:Ho.reversed,scale:Ho.scale,tick:Ho.tick,tickCount:void 0,ticks:void 0,type:Ho.type,unit:void 0},kce={allowDataOverflow:wi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:wi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:wi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:wi.scale,tick:wi.tick,tickCount:wi.tickCount,ticks:void 0,type:wi.type,unit:void 0},Oce={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Ho.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ho.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ho.scale,tick:Ho.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},Vce={allowDataOverflow:wi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:wi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:wi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:wi.scale,tick:wi.tick,tickCount:wi.tickCount,ticks:void 0,type:"category",unit:void 0},JI=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?Oce:Dce,QI=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?Vce:kce,Mb=t=>t.polarOptions,XI=fe([ma,pa,Ir],Rse),Jq=fe([Mb,XI],(t,e)=>{if(t!=null)return Pl(t.innerRadius,e,0)}),Qq=fe([Mb,XI],(t,e)=>{if(t!=null)return Pl(t.outerRadius,e,e*.8)}),Lce=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},Xq=fe([Mb],Lce);fe([JI,Xq],Nb);var Zq=fe([XI,Jq,Qq],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});fe([QI,Zq],Nb);var ez=fe([Zt,Mb,Jq,Qq,ma,pa],(t,e,n,r,i,s)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:o,cy:l,startAngle:u,endAngle:d}=e;return{cx:Pl(o,i,i/2),cy:Pl(l,s,s/2),innerRadius:n,outerRadius:r,startAngle:u,endAngle:d,clockWise:!1}}}),jn=(t,e)=>e,Db=(t,e,n)=>n;function tz(t){return t==null?void 0:t.id}var Qn=t=>{var e=Zt(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},ph=t=>t.tooltip.settings.axisId,Xn=t=>{var e=Qn(t),n=ph(t);return zg(t,e,n)};function nz(t,e,n){var{chartData:r=[]}=e,i=n==null?void 0:n.dataKey,s=new Map;return t.forEach(o=>{var l,u=(l=o.data)!==null&&l!==void 0?l:r;if(!(u==null||u.length===0)){var d=tz(o);u.forEach((f,m)=>{var v=i==null?m:String(Yr(f,i,null)),_=Yr(f,o.dataKey,0),T;s.has(v)?T=s.get(v):T={},Object.assign(T,{[d]:_}),s.set(v,T)})}}),Array.from(s.values())}function ZI(t){return t.stackId!=null&&t.dataKey!=null}function NL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NL(Object(n),!0).forEach(function(r){Uce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Uce(t,e,n){return(e=Fce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fce(t){var e=jce(t,"string");return typeof e=="symbol"?e:e+""}function jce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zA=[0,"auto"],bi={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},ya=(t,e)=>{var n=t.cartesianAxis.xAxis[e];return n??bi},_i={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:zA,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:xb},Yl=(t,e)=>{var n=t.cartesianAxis.yAxis[e];return n??_i},Bce={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},eR=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??Bce},ui=(t,e,n)=>{switch(e){case"xAxis":return ya(t,n);case"yAxis":return Yl(t,n);case"zAxis":return eR(t,n);case"angleAxis":return JI(t,n);case"radiusAxis":return QI(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},qce=(t,e,n)=>{switch(e){case"xAxis":return ya(t,n);case"yAxis":return Yl(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},zg=(t,e,n)=>{switch(e){case"xAxis":return ya(t,n);case"yAxis":return Yl(t,n);case"angleAxis":return JI(t,n);case"radiusAxis":return QI(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},rz=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function iz(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var sz=t=>t.graphicalItems.cartesianItems,zce=fe([jn,Db],iz),oz=(t,e,n)=>t.filter(n).filter(r=>(e==null?void 0:e.includeHidden)===!0?!0:!r.hide),$g=fe([sz,ui,zce],oz),az=fe([$g],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(ZI)),lz=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),uz=fe([$g],lz),cz=t=>t.map(e=>e.data).filter(Boolean).flat(1),$ce=fe([$g],cz),dz=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},tR=fe([$ce,$I],dz),fz=(t,e,n)=>(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:Yr(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:Yr(i,r)}))):t.map(r=>({value:r})),kb=fe([tR,ui,$g],fz);function hz(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function jc(t){return t.filter(e=>po(e)||e instanceof Date).map(Number).filter(e=>ls(e)===!1)}function Gce(t,e,n){return!n||typeof e!="number"||ls(e)?[]:n.length?jc(n.flatMap(r=>{var i=Yr(t,r.dataKey),s,o;if(Array.isArray(i)?[s,o]=i:s=o=i,!(!Rs(s)||!Rs(o)))return[e-s,e+o]})):[]}var Hce=fe([az,$I,Xn],nz),mz=(t,e,n)=>{var r={},i=e.reduce((s,o)=>(o.stackId==null||(s[o.stackId]==null&&(s[o.stackId]=[]),s[o.stackId].push(o)),s),r);return Object.fromEntries(Object.entries(i).map(s=>{var[o,l]=s,u=l.map(tz);return[o,{stackedData:$se(t,u,n),graphicalItems:l}]}))},Kce=fe([Hce,az,Pb],mz),pz=(t,e,n)=>{var{dataStartIndex:r,dataEndIndex:i}=e;if(n!=="zAxis"){var s=Kse(t,r,i);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},Wce=fe([Kce,Wl,jn],pz),gz=(t,e,n,r,i)=>n.length>0?t.flatMap(s=>n.flatMap(o=>{var l,u,d=(l=r[o.id])===null||l===void 0?void 0:l.filter(m=>hz(i,m)),f=Yr(s,(u=e.dataKey)!==null&&u!==void 0?u:o.dataKey);return{value:f,errorDomain:Gce(s,f,d)}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(s=>({value:Yr(s,e.dataKey),errorDomain:[]})):t.map(s=>({value:s,errorDomain:[]})),Ob=t=>t.errorBars,yz=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>hz(n,r));fe([uz,Ob,jn],yz);var Yce=fe([tR,ui,uz,Ob,jn],gz);function Jce(t){var{value:e}=t;if(po(e)||e instanceof Date)return e}var ML=t=>{var e=t.flatMap(r=>[r.value,r.errorDomain]).flat(1),n=jc(e);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Qce=(t,e,n)=>{var r=t.map(Jce).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&CB(r))?eq(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},nR=t=>{var e;if(t==null||!("domain"in t))return zA;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var n=jc(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:zA},xx=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var s=i.flat(),o=Math.min(...s),l=Math.max(...s);return[o,l]}},vz=t=>t.referenceElements.dots,gh=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),Xce=fe([vz,jn,Db],gh),xz=t=>t.referenceElements.areas,Zce=fe([xz,jn,Db],gh),bz=t=>t.referenceElements.lines,ede=fe([bz,jn,Db],gh),_z=(t,e)=>{var n=jc(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},tde=fe(Xce,jn,_z),wz=(t,e)=>{var n=jc(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},nde=fe([Zce,jn],wz),Tz=(t,e)=>{var n=jc(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},rde=fe(ede,jn,Tz),ide=fe(tde,rde,nde,(t,e,n)=>xx(t,n,e)),sde=fe([ui],nR),Ez=(t,e,n,r,i,s,o)=>{var l=xce(e,t.allowDataOverflow);if(l!=null)return l;var u=s==="vertical"&&o==="xAxis"||s==="horizontal"&&o==="yAxis",d=u?xx(n,i,ML(r)):xx(i,ML(r));return bce(e,d,t.allowDataOverflow)},ode=fe([ui,sde,Wce,Yce,ide,Zt,jn],Ez),ade=[0,1],Sz=(t,e,n,r,i,s,o)=>{if(!((t==null||n==null||n.length===0)&&o===void 0)){var{dataKey:l,type:u}=t,d=$l(e,s);return d&&l==null?eq(0,n.length):u==="category"?Qce(r,t,d):i==="expand"?ade:o}},rR=fe([ui,Zt,tR,kb,Pb,jn,ode],Sz),Az=(t,e,n,r,i)=>{if(t!=null){var{scale:s,type:o}=t;if(s==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":o==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":o==="category"?"band":"linear";if(typeof s=="string"){var l="scale".concat(Vg(s));return l in fp?l:"point"}}},Gg=fe([ui,Zt,rz,KI,jn],Az);function lde(t){if(t!=null){if(t in fp)return fp[t]();var e="scale".concat(Vg(t));if(e in fp)return fp[e]()}}function iR(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var i=lde(e);if(i!=null){var s=i.domain(n).range(r);return jse(s),s}}}var Cz=(t,e,n)=>{var r=nR(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Lf(t))return Pce(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Lf(t))return Nce(t,e.tickCount,e.allowDecimals)}},sR=fe([rR,zg,Gg],Cz),Iz=(t,e,n,r)=>{if(r!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&Lf(e)&&Array.isArray(n)&&n.length>0){var i=e[0],s=n[0],o=e[1],l=n[n.length-1];return[Math.min(i,s),Math.max(o,l)]}return e},ude=fe([ui,rR,sR,jn],Iz),cde=fe(kb,ui,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(jc(t.map(l=>l.value))).sort((l,u)=>l-u);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var s=0;s<r.length-1;s++){var o=r[s+1]-r[s];n=Math.min(n,o)}return n/i}}),Rz=fe(cde,Zt,Mce,Ir,(t,e,n,r)=>r,(t,e,n,r,i)=>{if(!Rs(t))return 0;var s=e==="vertical"?r.height:r.width;if(i==="gap")return t*s/2;if(i==="no-gap"){var o=Pl(n,t*s),l=t*s/2;return l-o-(l-o)/s*o}return 0}),dde=(t,e)=>{var n=ya(t,e);return n==null||typeof n.padding!="string"?0:Rz(t,"xAxis",e,n.padding)},fde=(t,e)=>{var n=Yl(t,e);return n==null||typeof n.padding!="string"?0:Rz(t,"yAxis",e,n.padding)},hde=fe(ya,dde,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),mde=fe(Yl,fde,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),pde=fe([Ir,hde,_b,bb,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:s}=r;return i?[s.left,n.width-s.right]:[t.left+e.left,t.left+t.width-e.right]}),gde=fe([Ir,Zt,mde,_b,bb,(t,e,n)=>n],(t,e,n,r,i,s)=>{var{padding:o}=i;return s?[r.height-o.bottom,o.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),Hg=(t,e,n,r)=>{var i;switch(e){case"xAxis":return pde(t,n,r);case"yAxis":return gde(t,n,r);case"zAxis":return(i=eR(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return Xq(t);case"radiusAxis":return Zq(t,n);default:return}},Pz=fe([ui,Hg],Nb),yh=fe([ui,Gg,ude,Pz],iR);fe([$g,Ob,jn],yz);function Nz(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var Vb=(t,e)=>e,Lb=(t,e,n)=>n,yde=fe(hI,Vb,Lb,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(Nz)),vde=fe(mI,Vb,Lb,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(Nz)),Mz=(t,e)=>({width:t.width,height:e.height}),xde=(t,e)=>{var n=typeof e.width=="number"?e.width:xb;return{width:n,height:t.height}},bde=fe(Ir,ya,Mz),_de=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},wde=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},Tde=fe(pa,Ir,yde,Vb,Lb,(t,e,n,r,i)=>{var s={},o;return n.forEach(l=>{var u=Mz(e,l);o==null&&(o=_de(e,r,t));var d=r==="top"&&!i||r==="bottom"&&i;s[l.id]=o-Number(d)*u.height,o+=(d?-1:1)*u.height}),s}),Ede=fe(ma,Ir,vde,Vb,Lb,(t,e,n,r,i)=>{var s={},o;return n.forEach(l=>{var u=xde(e,l);o==null&&(o=wde(e,r,t));var d=r==="left"&&!i||r==="right"&&i;s[l.id]=o-Number(d)*u.width,o+=(d?-1:1)*u.width}),s}),Sde=(t,e)=>{var n=Ir(t),r=ya(t,e);if(r!=null){var i=Tde(t,r.orientation,r.mirror),s=i[e];return s==null?{x:n.left,y:0}:{x:n.left,y:s}}},Ade=(t,e)=>{var n=Ir(t),r=Yl(t,e);if(r!=null){var i=Ede(t,r.orientation,r.mirror),s=i[e];return s==null?{x:0,y:n.top}:{x:s,y:n.top}}},Cde=fe(Ir,Yl,(t,e)=>{var n=typeof e.width=="number"?e.width:xb;return{width:n,height:t.height}}),Dz=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:s,dataKey:o}=n,l=$l(t,r),u=e.map(d=>d.value);if(o&&l&&s==="category"&&i&&CB(u))return u}},oR=fe([Zt,kb,ui,jn],Dz),kz=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:s}=n,o=$l(t,r);if(o&&(i==="number"||s!=="auto"))return e.map(l=>l.value)}},aR=fe([Zt,kb,zg,jn],kz),DL=fe([Zt,qce,Gg,yh,oR,aR,Hg,sR,jn],(t,e,n,r,i,s,o,l,u)=>{if(e==null)return null;var d=$l(t,u);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:u,categoricalDomain:s,duplicateDomain:i,isCategorical:d,niceTicks:l,range:o,realScaleType:n,scale:r}}),Ide=(t,e,n,r,i,s,o,l,u)=>{if(!(e==null||r==null)){var d=$l(t,u),{type:f,ticks:m,tickCount:v}=e,_=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,T=f==="category"&&r.bandwidth?r.bandwidth()/_:0;T=u==="angleAxis"&&s!=null&&s.length>=2?ts(s[0]-s[1])*2*T:T;var S=m||i;if(S){var A=S.map((I,D)=>{var N=o?o.indexOf(I):I;return{index:D,coordinate:r(N)+T,value:I,offset:T}});return A.filter(I=>!ls(I.coordinate))}return d&&l?l.map((I,D)=>({coordinate:r(I)+T,value:I,index:D,offset:T})):r.ticks?r.ticks(v).map(I=>({coordinate:r(I)+T,value:I,offset:T})):r.domain().map((I,D)=>({coordinate:r(I)+T,value:o?o[I]:I,index:D,offset:T}))}},Oz=fe([Zt,zg,Gg,yh,sR,Hg,oR,aR,jn],Ide),Rde=(t,e,n,r,i,s,o)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var l=$l(t,o),{tickCount:u}=e,d=0;return d=o==="angleAxis"&&(r==null?void 0:r.length)>=2?ts(r[0]-r[1])*2*d:d,l&&s?s.map((f,m)=>({coordinate:n(f)+d,value:f,index:m,offset:d})):n.ticks?n.ticks(u).map(f=>({coordinate:n(f)+d,value:f,offset:d})):n.domain().map((f,m)=>({coordinate:n(f)+d,value:i?i[f]:f,index:m,offset:d}))}},Vz=fe([Zt,zg,yh,Hg,oR,aR,jn],Rde),Lz=fe(ui,yh,(t,e)=>{if(!(t==null||e==null))return vx(vx({},t),{},{scale:e})}),Pde=fe([ui,Gg,rR,Pz],iR);fe((t,e,n)=>eR(t,n),Pde,(t,e)=>{if(!(t==null||e==null))return vx(vx({},t),{},{scale:e})});var Nde=fe([Zt,hI,mI],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Uz=t=>t.options.defaultTooltipEventType,Fz=t=>t.options.validateTooltipEventTypes;function jz(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function lR(t,e){var n=Uz(t),r=Fz(t);return jz(e,n,r)}function Mde(t){return He(e=>lR(e,t))}var Bz=(t,e)=>{var n,r=Number(e);if(!(ls(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},Dde=t=>t.tooltip.settings,hl={active:!1,index:null,dataKey:void 0,coordinate:void 0},kde={itemInteraction:{click:hl,hover:hl},axisInteraction:{click:hl,hover:hl},keyboardInteraction:hl,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},qz=ki({name:"tooltip",initialState:kde,reducers:{addTooltipEntrySettings(t,e){t.tooltipItemPayloads.push(e.payload)},removeTooltipEntrySettings(t,e){var n=Zo(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:Ode,removeTooltipEntrySettings:Vde,setTooltipSettingsState:Lde,setActiveMouseOverItemIndex:Ude,mouseLeaveItem:Eke,mouseLeaveChart:zz,setActiveClickItemIndex:Ske,setMouseOverAxisIndex:$z,setMouseClickAxisIndex:Fde,setSyncInteraction:$A,setKeyboardInteraction:GA}=qz.actions,jde=qz.reducer;function kL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Wv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kL(Object(n),!0).forEach(function(r){Bde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bde(t,e,n){return(e=qde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qde(t){var e=zde(t,"string");return typeof e=="symbol"?e:e+""}function zde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $de(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function Gde(t){return t.index!=null}var Gz=(t,e,n,r)=>{if(e==null)return hl;var i=$de(t,e,n);if(i==null)return hl;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var s=t.settings.active===!0;if(Gde(i)){if(s)return Wv(Wv({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return Wv(Wv({},hl),{},{coordinate:i.coordinate})},uR=(t,e)=>{var n=t==null?void 0:t.index;if(n==null)return null;var r=Number(n);if(!Rs(r))return n;var i=0,s=1/0;return e.length>0&&(s=e.length-1),String(Math.max(i,Math.min(r,s)))},Hz=(t,e,n,r,i,s,o,l)=>{if(!(s==null||l==null)){var u=o[0],d=u==null?void 0:l(u.positions,s);if(d!=null)return d;var f=i==null?void 0:i[Number(s)];if(f)switch(n){case"horizontal":return{x:f.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:f.coordinate}}}},Kz=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=t.itemInteraction.hover.dataKey:i=t.itemInteraction.click.dataKey,i==null&&r!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(s=>{var o;return((o=s.settings)===null||o===void 0?void 0:o.dataKey)===i})},Kg=t=>t.options.tooltipPayloadSearcher,vh=t=>t.tooltip;function OL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function VL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OL(Object(n),!0).forEach(function(r){Hde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hde(t,e,n){return(e=Kde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kde(t){var e=Wde(t,"string");return typeof e=="symbol"?e:e+""}function Wde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yde(t,e){return t??e}var Wz=(t,e,n,r,i,s,o)=>{if(!(e==null||s==null)){var{chartData:l,computedData:u,dataStartIndex:d,dataEndIndex:f}=n,m=[];return t.reduce((v,_)=>{var T,{dataDefinedOnItem:S,settings:A}=_,I=Yde(S,l),D=Array.isArray(I)?V6(I,d,f):I,N=(T=A==null?void 0:A.dataKey)!==null&&T!==void 0?T:r==null?void 0:r.dataKey,U=A==null?void 0:A.nameKey,O;if(r!=null&&r.dataKey&&Array.isArray(D)&&!Array.isArray(D[0])&&o==="axis"?O=IB(D,r.dataKey,i):O=s(D,e,u,U),Array.isArray(O))O.forEach(M=>{var R=VL(VL({},A),{},{name:M.name,unit:M.unit,color:void 0,fill:void 0});v.push(pV({tooltipEntrySettings:R,dataKey:M.dataKey,payload:M.payload,value:Yr(M.payload,M.dataKey),name:M.name}))});else{var q;v.push(pV({tooltipEntrySettings:A,dataKey:N,payload:O,value:Yr(O,N),name:(q=Yr(O,U))!==null&&q!==void 0?q:A==null?void 0:A.name}))}return v},m)}},cR=fe([Xn,Zt,rz,KI,Qn],Az),Jde=fe([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),Qde=fe([Qn,ph],iz),Wg=fe([Jde,Xn,Qde],oz),Xde=fe([Wg],t=>t.filter(ZI)),Zde=fe([Wg],cz),xh=fe([Zde,Wl],dz),efe=fe([Xde,Wl,Xn],nz),dR=fe([xh,Xn,Wg],fz),tfe=fe([Xn],nR),nfe=fe([Wg],t=>t.filter(ZI)),rfe=fe([efe,nfe,Pb],mz),ife=fe([rfe,Wl,Qn],pz),sfe=fe([Wg],lz),ofe=fe([xh,Xn,sfe,Ob,Qn],gz),afe=fe([vz,Qn,ph],gh),lfe=fe([afe,Qn],_z),ufe=fe([xz,Qn,ph],gh),cfe=fe([ufe,Qn],wz),dfe=fe([bz,Qn,ph],gh),ffe=fe([dfe,Qn],Tz),hfe=fe([lfe,ffe,cfe],xx),mfe=fe([Xn,tfe,ife,ofe,hfe,Zt,Qn],Ez),Yz=fe([Xn,Zt,xh,dR,Pb,Qn,mfe],Sz),pfe=fe([Yz,Xn,cR],Cz),gfe=fe([Xn,Yz,pfe,Qn],Iz),Jz=t=>{var e=Qn(t),n=ph(t),r=!1;return Hg(t,e,n,r)},Qz=fe([Xn,Jz],Nb),Xz=fe([Xn,cR,gfe,Qz],iR),yfe=fe([Zt,dR,Xn,Qn],Dz),vfe=fe([Zt,dR,Xn,Qn],kz),xfe=(t,e,n,r,i,s,o,l)=>{if(e){var{type:u}=e,d=$l(t,l);if(r){var f=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,m=u==="category"&&r.bandwidth?r.bandwidth()/f:0;return m=l==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?ts(i[0]-i[1])*2*m:m,d&&o?o.map((v,_)=>({coordinate:r(v)+m,value:v,index:_,offset:m})):r.domain().map((v,_)=>({coordinate:r(v)+m,value:s?s[v]:v,index:_,offset:m}))}}},va=fe([Zt,Xn,cR,Xz,Jz,yfe,vfe,Qn],xfe),fR=fe([Uz,Fz,Dde],(t,e,n)=>jz(n.shared,t,e)),Zz=t=>t.tooltip.settings.trigger,hR=t=>t.tooltip.settings.defaultIndex,Ub=fe([vh,fR,Zz,hR],Gz),sg=fe([Ub,xh],uR),e9=fe([va,sg],Bz),bfe=fe([Ub],t=>{if(t)return t.dataKey}),t9=fe([vh,fR,Zz,hR],Kz),_fe=fe([ma,pa,Zt,Ir,va,hR,t9,Kg],Hz),wfe=fe([Ub,_fe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),Tfe=fe([Ub],t=>t.active),Efe=fe([t9,sg,Wl,Xn,e9,Kg,fR],Wz),Sfe=fe([Efe],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function LL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function UL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LL(Object(n),!0).forEach(function(r){Afe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Afe(t,e,n){return(e=Cfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cfe(t){var e=Ife(t,"string");return typeof e=="symbol"?e:e+""}function Ife(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Rfe=()=>He(Xn),Pfe=()=>{var t=Rfe(),e=He(va),n=He(Xz);return EA(UL(UL({},t),{},{scale:n}),e)},Nfe=()=>He(KI),mR=(t,e)=>e,n9=(t,e,n)=>n,pR=(t,e,n,r)=>r,Mfe=fe(va,t=>fb(t,e=>e.coordinate)),gR=fe([vh,mR,n9,pR],Gz),r9=fe([gR,xh],uR),Dfe=(t,e,n)=>{if(e!=null){var r=vh(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},i9=fe([vh,mR,n9,pR],Kz),bx=fe([ma,pa,Zt,Ir,va,pR,i9,Kg],Hz),kfe=fe([gR,bx],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),s9=fe(va,r9,Bz),Ofe=fe([i9,r9,Wl,Xn,s9,Kg,mR],Wz),Vfe=fe([gR],t=>({isActive:t.active,activeIndex:t.index})),Lfe=(t,e,n,r,i,s,o,l)=>{if(!(!t||!e||!r||!i||!s)){var u=Wse(t.chartX,t.chartY,e,n,l);if(u){var d=Jse(u,e),f=Use(d,o,s,r,i),m=Yse(e,s,f,u);return{activeIndex:String(f),activeCoordinate:m}}}};function HA(){return HA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},HA.apply(null,arguments)}function FL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Yv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FL(Object(n),!0).forEach(function(r){Ufe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ufe(t,e,n){return(e=Ffe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ffe(t){var e=jfe(t,"string");return typeof e=="symbol"?e:e+""}function jfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Bfe(t){var{coordinate:e,payload:n,index:r,offset:i,tooltipAxisBandSize:s,layout:o,cursor:l,tooltipEventType:u,chartName:d}=t,f=e,m=n,v=r;if(!l||!f||d!=="ScatterChart"&&u!=="axis")return null;var _,T;if(d==="ScatterChart")_=f,T=Qoe;else if(d==="BarChart")_=Xoe(o,f,i,s),T=Dae;else if(o==="radial"){var{cx:S,cy:A,radius:I,startAngle:D,endAngle:N}=X6(f);_={cx:S,cy:A,startAngle:D,endAngle:N,innerRadius:I,outerRadius:I},T=Lae}else _={points:Uae(o,f,i)},T=G6;var U=typeof l=="object"&&"className"in l?l.className:void 0,O=Yv(Yv(Yv(Yv({stroke:"#ccc",pointerEvents:"none"},i),_),Wn(l,!1)),{},{payload:m,payloadIndex:v,className:Bt("recharts-tooltip-cursor",U)});return P.isValidElement(l)?P.cloneElement(l,O):P.createElement(T,O)}function qfe(t){var e=Pfe(),n=q6(),r=vI(),i=Nfe();return P.createElement(Bfe,HA({},t,{coordinate:t.coordinate,index:t.index,payload:t.payload,offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var o9=P.createContext(null),zfe=()=>P.useContext(o9),rS={exports:{}},jL;function $fe(){return jL||(jL=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(u,d,f){this.fn=u,this.context=d,this.once=f||!1}function s(u,d,f,m,v){if(typeof f!="function")throw new TypeError("The listener must be a function");var _=new i(f,m||u,v),T=n?n+d:d;return u._events[T]?u._events[T].fn?u._events[T]=[u._events[T],_]:u._events[T].push(_):(u._events[T]=_,u._eventsCount++),u}function o(u,d){--u._eventsCount===0?u._events=new r:delete u._events[d]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],f,m;if(this._eventsCount===0)return d;for(m in f=this._events)e.call(f,m)&&d.push(n?m.slice(1):m);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(f)):d},l.prototype.listeners=function(d){var f=n?n+d:d,m=this._events[f];if(!m)return[];if(m.fn)return[m.fn];for(var v=0,_=m.length,T=new Array(_);v<_;v++)T[v]=m[v].fn;return T},l.prototype.listenerCount=function(d){var f=n?n+d:d,m=this._events[f];return m?m.fn?1:m.length:0},l.prototype.emit=function(d,f,m,v,_,T){var S=n?n+d:d;if(!this._events[S])return!1;var A=this._events[S],I=arguments.length,D,N;if(A.fn){switch(A.once&&this.removeListener(d,A.fn,void 0,!0),I){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,f),!0;case 3:return A.fn.call(A.context,f,m),!0;case 4:return A.fn.call(A.context,f,m,v),!0;case 5:return A.fn.call(A.context,f,m,v,_),!0;case 6:return A.fn.call(A.context,f,m,v,_,T),!0}for(N=1,D=new Array(I-1);N<I;N++)D[N-1]=arguments[N];A.fn.apply(A.context,D)}else{var U=A.length,O;for(N=0;N<U;N++)switch(A[N].once&&this.removeListener(d,A[N].fn,void 0,!0),I){case 1:A[N].fn.call(A[N].context);break;case 2:A[N].fn.call(A[N].context,f);break;case 3:A[N].fn.call(A[N].context,f,m);break;case 4:A[N].fn.call(A[N].context,f,m,v);break;default:if(!D)for(O=1,D=new Array(I-1);O<I;O++)D[O-1]=arguments[O];A[N].fn.apply(A[N].context,D)}}return!0},l.prototype.on=function(d,f,m){return s(this,d,f,m,!1)},l.prototype.once=function(d,f,m){return s(this,d,f,m,!0)},l.prototype.removeListener=function(d,f,m,v){var _=n?n+d:d;if(!this._events[_])return this;if(!f)return o(this,_),this;var T=this._events[_];if(T.fn)T.fn===f&&(!v||T.once)&&(!m||T.context===m)&&o(this,_);else{for(var S=0,A=[],I=T.length;S<I;S++)(T[S].fn!==f||v&&!T[S].once||m&&T[S].context!==m)&&A.push(T[S]);A.length?this._events[_]=A.length===1?A[0]:A:o(this,_)}return this},l.prototype.removeAllListeners=function(d){var f;return d?(f=n?n+d:d,this._events[f]&&o(this,f)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l})(rS)),rS.exports}var Gfe=$fe();const Hfe=xo(Gfe);var og=new Hfe,KA="recharts.syncEvent.tooltip",BL="recharts.syncEvent.brush";function Kfe(t,e){if(e){var n=Number.parseInt(e,10);if(!ls(n))return t==null?void 0:t[n]}}var Wfe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},a9=ki({name:"options",initialState:Wfe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Yfe=a9.reducer,{createEventEmitter:Jfe}=a9.actions;function Qfe(t){return t.tooltip.syncInteraction}var Xfe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},l9=ki({name:"chartData",initialState:Xfe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:qL,setDataStartEndIndexes:Zfe,setComputedData:Ake}=l9.actions,ehe=l9.reducer,u9=()=>{};function the(){var t=He(WI),e=He(YI),n=Cr(),r=He(Yq),i=He(va),s=vI(),o=pI(),l=He(u=>u.rootProps.className);P.useEffect(()=>{if(t==null)return u9;var u=(d,f,m)=>{if(e!==m&&t===d){if(r==="index"){n(f);return}if(i!=null){var v;if(typeof r=="function"){var _={activeTooltipIndex:f.payload.index==null?void 0:Number(f.payload.index),isTooltipActive:f.payload.active,activeIndex:f.payload.index==null?void 0:Number(f.payload.index),activeLabel:f.payload.label,activeDataKey:f.payload.dataKey,activeCoordinate:f.payload.coordinate},T=r(i,_);v=i[T]}else r==="value"&&(v=i.find(q=>String(q.value)===f.payload.label));var{coordinate:S}=f.payload;if(v==null||f.payload.active===!1||S==null||o==null){n($A({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:A,y:I}=S,D=Math.min(A,o.x+o.width),N=Math.min(I,o.y+o.height),U={x:s==="horizontal"?v.coordinate:D,y:s==="horizontal"?N:v.coordinate},O=$A({active:f.payload.active,coordinate:U,dataKey:f.payload.dataKey,index:String(v.index),label:f.payload.label});n(O)}}};return og.on(KA,u),()=>{og.off(KA,u)}},[l,n,e,t,r,i,s,o])}function nhe(){var t=He(WI),e=He(YI),n=Cr();P.useEffect(()=>{if(t==null)return u9;var r=(i,s,o)=>{e!==o&&t===i&&n(Zfe(s))};return og.on(BL,r),()=>{og.off(BL,r)}},[n,e,t])}function rhe(){var t=Cr();P.useEffect(()=>{t(Jfe())},[t]),the(),nhe()}function ihe(t,e,n,r,i,s){var o=He(v=>Dfe(v,t,e)),l=He(YI),u=He(WI),d=He(Yq),f=He(Qfe),m=f==null?void 0:f.active;P.useEffect(()=>{if(!m&&u!=null&&l!=null){var v=$A({active:s,coordinate:n,dataKey:o,index:i,label:typeof r=="number"?String(r):r});og.emit(KA,u,v,l)}},[m,n,o,i,r,l,u,d,s])}function zL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $L(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zL(Object(n),!0).forEach(function(r){she(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function she(t,e,n){return(e=ohe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ohe(t){var e=ahe(t,"string");return typeof e=="symbol"?e:e+""}function ahe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lhe(t){return t.dataKey}function uhe(t,e){return P.isValidElement(t)?P.cloneElement(t,e):typeof t=="function"?P.createElement(t,e):P.createElement(Roe,e)}var GL=[],che={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Ug.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function dhe(t){var e=Gl(t,che),{active:n,allowEscapeViewBox:r,animationDuration:i,animationEasing:s,content:o,filterNull:l,isAnimationActive:u,offset:d,payloadUniqBy:f,position:m,reverseDirection:v,useTranslate3d:_,wrapperStyle:T,cursor:S,shared:A,trigger:I,defaultIndex:D,portal:N,axisId:U}=e,O=Cr(),q=typeof D=="number"?String(D):D;P.useEffect(()=>{O(Lde({shared:A,trigger:I,axisId:U,active:n,defaultIndex:q}))},[O,A,I,U,n,q]);var M=pI(),R=$6(),k=Mde(A),{activeIndex:F,isActive:j}=He(Me=>Vfe(Me,k,I,q)),G=He(Me=>Ofe(Me,k,I,q)),$=He(Me=>s9(Me,k,I,q)),de=He(Me=>kfe(Me,k,I,q)),ve=G,Y=zfe(),se=n??j,[Q,_e]=d6([ve,se]),H=k==="axis"?$:void 0;ihe(k,I,de,H,F,se);var ae=N??Y;if(ae==null)return null;var le=ve??GL;se||(le=GL),l&&le.length&&(le=o6(ve.filter(Me=>Me.value!=null&&(Me.hide!==!0||e.includeHidden)),f,lhe));var ce=le.length>0,Ee=P.createElement(Voe,{allowEscapeViewBox:r,animationDuration:i,animationEasing:s,isAnimationActive:u,active:se,coordinate:de,hasPayload:ce,offset:d,position:m,reverseDirection:v,useTranslate3d:_,viewBox:M,wrapperStyle:T,lastBoundingBox:Q,innerRef:_e,hasPortalFromProps:!!N},uhe(o,$L($L({},e),{},{payload:le,label:H,active:se,coordinate:de,accessibilityLayer:R})));return P.createElement(P.Fragment,null,kB.createPortal(Ee,ae),se&&P.createElement(qfe,{cursor:S,tooltipEventType:k,coordinate:de,payload:ve,index:F}))}var iS={},sS={},oS={},HL;function fhe(){return HL||(HL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:s}={}){let o,l=null;const u=s!=null&&s.includes("leading"),d=s==null||s.includes("trailing"),f=()=>{l!==null&&(n.apply(o,l),o=void 0,l=null)},m=()=>{d&&f(),S()};let v=null;const _=()=>{v!=null&&clearTimeout(v),v=setTimeout(()=>{v=null,m()},r)},T=()=>{v!==null&&(clearTimeout(v),v=null)},S=()=>{T(),o=void 0,l=null},A=()=>{f()},I=function(...D){if(i!=null&&i.aborted)return;o=this,l=D;const N=v==null;_(),u&&N&&f()};return I.schedule=_,I.cancel=S,I.flush=A,i==null||i.addEventListener("abort",S,{once:!0}),I}t.debounce=e})(oS)),oS}var KL;function hhe(){return KL||(KL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=fhe();function n(r,i=0,s={}){typeof s!="object"&&(s={});const{leading:o=!1,trailing:l=!0,maxWait:u}=s,d=Array(2);o&&(d[0]="leading"),l&&(d[1]="trailing");let f,m=null;const v=e.debounce(function(...S){f=r.apply(this,S),m=null},i,{edges:d}),_=function(...S){return u!=null&&(m===null&&(m=Date.now()),Date.now()-m>=u)?(f=r.apply(this,S),m=Date.now(),v.cancel(),v.schedule(),f):(v.apply(this,S),f)},T=()=>(v.flush(),f);return _.cancel=v.cancel,_.flush=T,_}t.debounce=n})(sS)),sS}var WL;function mhe(){return WL||(WL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=hhe();function n(r,i=0,s={}){const{leading:o=!0,trailing:l=!0}=s;return e.debounce(r,i,{leading:o,maxWait:i,trailing:l})}t.throttle=n})(iS)),iS}var aS,YL;function phe(){return YL||(YL=1,aS=mhe().throttle),aS}var ghe=phe();const yhe=xo(ghe);var Ap=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]};function JL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JL(Object(n),!0).forEach(function(r){vhe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vhe(t,e,n){return(e=xhe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xhe(t){var e=bhe(t,"string");return typeof e=="symbol"?e:e+""}function bhe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _he=P.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i="100%",height:s="100%",minWidth:o=0,minHeight:l,maxHeight:u,children:d,debounce:f=0,id:m,className:v,onResize:_,style:T={}}=t,S=P.useRef(null),A=P.useRef();A.current=_,P.useImperativeHandle(e,()=>S.current);var[I,D]=P.useState({containerWidth:r.width,containerHeight:r.height}),N=P.useCallback((O,q)=>{D(M=>{var R=Math.round(O),k=Math.round(q);return M.containerWidth===R&&M.containerHeight===k?M:{containerWidth:R,containerHeight:k}})},[]);P.useEffect(()=>{var O=k=>{var F,{width:j,height:G}=k[0].contentRect;N(j,G),(F=A.current)===null||F===void 0||F.call(A,j,G)};f>0&&(O=yhe(O,f,{trailing:!0,leading:!1}));var q=new ResizeObserver(O),{width:M,height:R}=S.current.getBoundingClientRect();return N(M,R),q.observe(S.current),()=>{q.disconnect()}},[N,f]);var U=P.useMemo(()=>{var{containerWidth:O,containerHeight:q}=I;if(O<0||q<0)return null;Ap(Qu(i)||Qu(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,s),Ap(!n||n>0,"The aspect(%s) must be greater than zero.",n);var M=Qu(i)?O:i,R=Qu(s)?q:s;return n&&n>0&&(M?R=M/n:R&&(M=R*n),u&&R>u&&(R=u)),Ap(M>0||R>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,M,R,i,s,o,l,n),P.Children.map(d,k=>P.cloneElement(k,{width:M,height:R,style:lS({width:M,height:R},k.props.style)}))},[n,d,s,u,l,o,I,i]);return P.createElement("div",{id:m?"".concat(m):void 0,className:Bt("recharts-responsive-container",v),style:lS(lS({},T),{},{width:i,height:s,minWidth:o,minHeight:l,maxHeight:u}),ref:S},P.createElement("div",{style:{width:0,height:0,overflow:"visible"}},U))});function whe(t,e,n){return(e=The(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function The(t){var e=Ehe(t,"string");return typeof e=="symbol"?e:e+""}function Ehe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class She{constructor(e){whe(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function QL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ahe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QL(Object(n),!0).forEach(function(r){Che(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Che(t,e,n){return(e=Ihe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ihe(t){var e=Rhe(t,"string");return typeof e=="symbol"?e:e+""}function Rhe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Phe={cacheSize:2e3,enableCache:!0},c9=Ahe({},Phe),XL=new She(c9.cacheSize),Nhe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},ZL="recharts_measurement_span";function Mhe(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",s=e.fontStyle||"",o=e.letterSpacing||"",l=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(s,"|").concat(o,"|").concat(l)}var e4=(t,e)=>{try{var n=document.getElementById(ZL);n||(n=document.createElement("span"),n.setAttribute("id",ZL),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,Nhe,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},Cp=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Ug.isSsr)return{width:0,height:0};if(!c9.enableCache)return e4(e,n);var r=Mhe(e,n),i=XL.get(r);if(i)return i;var s=e4(e,n);return XL.set(r,s),s},t4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,n4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Dhe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,khe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,d9={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Ohe=Object.keys(d9),sf="NaN";function Vhe(t,e){return t*d9[e]}class ni{static parse(e){var n,[,r,i]=(n=khe.exec(e))!==null&&n!==void 0?n:[];return new ni(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,ls(e)&&(this.unit=""),n!==""&&!Dhe.test(n)&&(this.num=NaN,this.unit=""),Ohe.includes(n)&&(this.num=Vhe(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new ni(NaN,""):new ni(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new ni(NaN,""):new ni(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new ni(NaN,""):new ni(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new ni(NaN,""):new ni(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return ls(this.num)}}function f9(t){if(t.includes(sf))return sf;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,s]=(n=t4.exec(e))!==null&&n!==void 0?n:[],o=ni.parse(r??""),l=ni.parse(s??""),u=i==="*"?o.multiply(l):o.divide(l);if(u.isNaN())return sf;e=e.replace(t4,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,[,f,m,v]=(d=n4.exec(e))!==null&&d!==void 0?d:[],_=ni.parse(f??""),T=ni.parse(v??""),S=m==="+"?_.add(T):_.subtract(T);if(S.isNaN())return sf;e=e.replace(n4,S.toString())}return e}var r4=/\(([^()]*)\)/;function Lhe(t){for(var e=t,n;(n=r4.exec(e))!=null;){var[,r]=n;e=e.replace(r4,f9(r))}return e}function Uhe(t){var e=t.replace(/\s+/g,"");return e=Lhe(e),e=f9(e),e}function Fhe(t){try{return Uhe(t)}catch{return sf}}function uS(t){var e=Fhe(t.slice(5,-1));return e===sf?"":e}var jhe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Bhe=["dx","dy","angle","className","breakAll"];function WA(){return WA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},WA.apply(null,arguments)}function i4(t,e){if(t==null)return{};var n,r,i=qhe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function qhe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var h9=/[ \f\n\r\t\v\u2028\u2029]+/,m9=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];Un(e)||(n?i=e.toString().split(""):i=e.toString().split(h9));var s=i.map(l=>({word:l,width:Cp(l,r).width})),o=n?0:Cp("",r).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}},zhe=(t,e,n,r,i)=>{var{maxLines:s,children:o,style:l,breakAll:u}=t,d=qe(s),f=o,m=function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return j.reduce((G,$)=>{var{word:de,width:ve}=$,Y=G[G.length-1];if(Y&&(r==null||i||Y.width+ve+n<Number(r)))Y.words.push(de),Y.width+=ve+n;else{var se={words:[de],width:ve};G.push(se)}return G},[])},v=m(e),_=F=>F.reduce((j,G)=>j.width>G.width?j:G);if(!d||i)return v;var T=v.length>s||_(v).width>Number(r);if(!T)return v;for(var S="",A=F=>{var j=f.slice(0,F),G=m9({breakAll:u,style:l,children:j+S}).wordsWithComputedWidth,$=m(G),de=$.length>s||_($).width>Number(r);return[de,$]},I=0,D=f.length-1,N=0,U;I<=D&&N<=f.length-1;){var O=Math.floor((I+D)/2),q=O-1,[M,R]=A(q),[k]=A(O);if(!M&&!k&&(I=O+1),M&&k&&(D=O-1),!M&&k){U=R;break}N++}return U||v},s4=t=>{var e=Un(t)?[]:t.toString().split(h9);return[{words:e}]},$he=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:s,maxLines:o}=t;if((e||n)&&!Ug.isSsr){var l,u,d=m9({breakAll:s,children:r,style:i});if(d){var{wordsWithComputedWidth:f,spaceWidth:m}=d;l=f,u=m}else return s4(r);return zhe({breakAll:s,children:r,maxLines:o,style:i},l,u,e,n)}return s4(r)},o4="#808080",yR=P.forwardRef((t,e)=>{var{x:n=0,y:r=0,lineHeight:i="1em",capHeight:s="0.71em",scaleToFit:o=!1,textAnchor:l="start",verticalAnchor:u="end",fill:d=o4}=t,f=i4(t,jhe),m=P.useMemo(()=>$he({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:o,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,o,f.style,f.width]),{dx:v,dy:_,angle:T,className:S,breakAll:A}=f,I=i4(f,Bhe);if(!po(n)||!po(r))return null;var D=n+(qe(v)?v:0),N=r+(qe(_)?_:0),U;switch(u){case"start":U=uS("calc(".concat(s,")"));break;case"middle":U=uS("calc(".concat((m.length-1)/2," * -").concat(i," + (").concat(s," / 2))"));break;default:U=uS("calc(".concat(m.length-1," * -").concat(i,")"));break}var O=[];if(o){var q=m[0].width,{width:M}=f;O.push("scale(".concat(qe(M)?M/q:1,")"))}return T&&O.push("rotate(".concat(T,", ").concat(D,", ").concat(N,")")),O.length&&(I.transform=O.join(" ")),P.createElement("text",WA({},Wn(I,!0),{ref:e,x:D,y:N,className:Bt("recharts-text",S),textAnchor:l,fill:d.includes("url")?o4:d}),m.map((R,k)=>{var F=R.words.join(A?"":" ");return P.createElement("tspan",{x:D,dy:k===0?U:i,key:"".concat(F,"-").concat(k)},F)}))});yR.displayName="Text";var Ghe=["offset"],Hhe=["labelRef"];function a4(t,e){if(t==null)return{};var n,r,i=Khe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Khe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function l4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?l4(Object(n),!0).forEach(function(r){Whe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Whe(t,e,n){return(e=Yhe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yhe(t){var e=Jhe(t,"string");return typeof e=="symbol"?e:e+""}function Jhe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ko(){return Ko=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ko.apply(null,arguments)}var Qhe=t=>{var{value:e,formatter:n}=t,r=Un(t.children)?e:t.children;return typeof n=="function"?n(r):r},vR=t=>t!=null&&typeof t=="function",Xhe=(t,e)=>{var n=ts(e-t),r=Math.min(Math.abs(e-t),360);return n*r},Zhe=(t,e,n,r)=>{var{position:i,offset:s,className:o}=t,{cx:l,cy:u,innerRadius:d,outerRadius:f,startAngle:m,endAngle:v,clockWise:_}=r,T=(d+f)/2,S=Xhe(m,v),A=S>=0?1:-1,I,D;i==="insideStart"?(I=m+A*s,D=_):i==="insideEnd"?(I=v-A*s,D=!_):i==="end"&&(I=v+A*s,D=_),D=S<=0?D:!D;var N=Er(l,u,T,I),U=Er(l,u,T,I+(D?1:-1)*359),O="M".concat(N.x,",").concat(N.y,`
    A`).concat(T,",").concat(T,",0,1,").concat(D?0:1,`,
    `).concat(U.x,",").concat(U.y),q=Un(t.id)?Jp("recharts-radial-line-"):t.id;return P.createElement("text",Ko({},n,{dominantBaseline:"central",className:Bt("recharts-radial-bar-label",o)}),P.createElement("defs",null,P.createElement("path",{id:q,d:O})),P.createElement("textPath",{xlinkHref:"#".concat(q)},e))},eme=(t,e,n)=>{var{cx:r,cy:i,innerRadius:s,outerRadius:o,startAngle:l,endAngle:u}=t,d=(l+u)/2;if(n==="outside"){var{x:f,y:m}=Er(r,i,o+e,d);return{x:f,y:m,textAnchor:f>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var v=(s+o)/2,{x:_,y:T}=Er(r,i,v,d);return{x:_,y:T,textAnchor:"middle",verticalAnchor:"middle"}},tme=(t,e)=>{var{parentViewBox:n,offset:r,position:i}=t,{x:s,y:o,width:l,height:u}=e,d=u>=0?1:-1,f=d*r,m=d>0?"end":"start",v=d>0?"start":"end",_=l>=0?1:-1,T=_*r,S=_>0?"end":"start",A=_>0?"start":"end";if(i==="top"){var I={x:s+l/2,y:o-d*r,textAnchor:"middle",verticalAnchor:m};return vn(vn({},I),n?{height:Math.max(o-n.y,0),width:l}:{})}if(i==="bottom"){var D={x:s+l/2,y:o+u+f,textAnchor:"middle",verticalAnchor:v};return vn(vn({},D),n?{height:Math.max(n.y+n.height-(o+u),0),width:l}:{})}if(i==="left"){var N={x:s-T,y:o+u/2,textAnchor:S,verticalAnchor:"middle"};return vn(vn({},N),n?{width:Math.max(N.x-n.x,0),height:u}:{})}if(i==="right"){var U={x:s+l+T,y:o+u/2,textAnchor:A,verticalAnchor:"middle"};return vn(vn({},U),n?{width:Math.max(n.x+n.width-U.x,0),height:u}:{})}var O=n?{width:l,height:u}:{};return i==="insideLeft"?vn({x:s+T,y:o+u/2,textAnchor:A,verticalAnchor:"middle"},O):i==="insideRight"?vn({x:s+l-T,y:o+u/2,textAnchor:S,verticalAnchor:"middle"},O):i==="insideTop"?vn({x:s+l/2,y:o+f,textAnchor:"middle",verticalAnchor:v},O):i==="insideBottom"?vn({x:s+l/2,y:o+u-f,textAnchor:"middle",verticalAnchor:m},O):i==="insideTopLeft"?vn({x:s+T,y:o+f,textAnchor:A,verticalAnchor:v},O):i==="insideTopRight"?vn({x:s+l-T,y:o+f,textAnchor:S,verticalAnchor:v},O):i==="insideBottomLeft"?vn({x:s+T,y:o+u-f,textAnchor:A,verticalAnchor:m},O):i==="insideBottomRight"?vn({x:s+l-T,y:o+u-f,textAnchor:S,verticalAnchor:m},O):i&&typeof i=="object"&&(qe(i.x)||Qu(i.x))&&(qe(i.y)||Qu(i.y))?vn({x:s+Pl(i.x,l),y:o+Pl(i.y,u),textAnchor:"end",verticalAnchor:"end"},O):vn({x:s+l/2,y:o+u/2,textAnchor:"middle",verticalAnchor:"middle"},O)},nme=t=>"cx"in t&&qe(t.cx);function Si(t){var{offset:e=5}=t,n=a4(t,Ghe),r=vn({offset:e},n),{viewBox:i,position:s,value:o,children:l,content:u,className:d="",textBreakAll:f,labelRef:m}=r,v=He(ez),_=pI(),T=s==="center"?_:v??_,S=i||T;if(!S||Un(o)&&Un(l)&&!P.isValidElement(u)&&typeof u!="function")return null;var A=vn(vn({},r),{},{viewBox:S});if(P.isValidElement(u)){var{labelRef:I}=A,D=a4(A,Hhe);return P.cloneElement(u,D)}var N;if(typeof u=="function"){if(N=P.createElement(u,A),P.isValidElement(N))return N}else N=Qhe(r);var U=nme(S),O=Wn(r,!0);if(U&&(s==="insideStart"||s==="insideEnd"||s==="end"))return Zhe(r,N,O,S);var q=U?eme(S,r.offset,r.position):tme(r,S);return P.createElement(yR,Ko({ref:m,className:Bt("recharts-label",d)},O,q,{breakAll:f}),N)}Si.displayName="Label";var p9=t=>{var{cx:e,cy:n,angle:r,startAngle:i,endAngle:s,r:o,radius:l,innerRadius:u,outerRadius:d,x:f,y:m,top:v,left:_,width:T,height:S,clockWise:A,labelViewBox:I}=t;if(I)return I;if(qe(T)&&qe(S)){if(qe(f)&&qe(m))return{x:f,y:m,width:T,height:S};if(qe(v)&&qe(_))return{x:v,y:_,width:T,height:S}}if(qe(f)&&qe(m))return{x:f,y:m,width:0,height:0};if(qe(e)&&qe(n))return{cx:e,cy:n,startAngle:i||r||0,endAngle:s||r||0,innerRadius:u||0,outerRadius:d||l||o||0,clockWise:A};if(t.viewBox)return t.viewBox},rme=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?P.createElement(Si,Ko({key:"label-implicit"},r)):po(t)?P.createElement(Si,Ko({key:"label-implicit",value:t},r)):P.isValidElement(t)?t.type===Si?P.cloneElement(t,vn({key:"label-implicit"},r)):P.createElement(Si,Ko({key:"label-implicit",content:t},r)):vR(t)?P.createElement(Si,Ko({key:"label-implicit",content:t},r)):t&&typeof t=="object"?P.createElement(Si,Ko({},t,{key:"label-implicit"},r)):null},ime=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:i,labelRef:s}=e,o=p9(e),l=MB(i,Si).map((d,f)=>P.cloneElement(d,{viewBox:n||o,key:"label-".concat(f)}));if(!r)return l;var u=rme(e.label,n||o,s);return[u,...l]};Si.parseViewBox=p9;Si.renderCallByParent=ime;var cS={},dS={},u4;function sme(){return u4||(u4=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(dS)),dS}var fS={},c4;function ome(){return c4||(c4=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(fS)),fS}var d4;function ame(){return d4||(d4=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=sme(),n=ome(),r=nI();function i(s){if(r.isArrayLike(s))return e.last(n.toArray(s))}t.last=i})(cS)),cS}var hS,f4;function lme(){return f4||(f4=1,hS=ame().last),hS}var ume=lme();const cme=xo(ume);var dme=["valueAccessor"],fme=["data","dataKey","clockWise","id","textBreakAll"];function _x(){return _x=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_x.apply(null,arguments)}function h4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function m4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?h4(Object(n),!0).forEach(function(r){hme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hme(t,e,n){return(e=mme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mme(t){var e=pme(t,"string");return typeof e=="symbol"?e:e+""}function pme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function p4(t,e){if(t==null)return{};var n,r,i=gme(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function gme(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var yme=t=>Array.isArray(t.value)?cme(t.value):t.value;function hc(t){var{valueAccessor:e=yme}=t,n=p4(t,dme),{data:r,dataKey:i,clockWise:s,id:o,textBreakAll:l}=n,u=p4(n,fme);return!r||!r.length?null:P.createElement(Nf,{className:"recharts-label-list"},r.map((d,f)=>{var m=Un(i)?e(d,f):Yr(d&&d.payload,i),v=Un(o)?{}:{id:"".concat(o,"-").concat(f)};return P.createElement(Si,_x({},Wn(d,!0),u,v,{parentViewBox:d.parentViewBox,value:m,textBreakAll:l,viewBox:Si.parseViewBox(Un(s)?d:m4(m4({},d),{},{clockWise:s})),key:"label-".concat(f),index:f}))}))}hc.displayName="LabelList";function vme(t,e){return t?t===!0?P.createElement(hc,{key:"labelList-implicit",data:e}):P.isValidElement(t)||vR(t)?P.createElement(hc,{key:"labelList-implicit",data:e,content:t}):typeof t=="object"?P.createElement(hc,_x({data:e},t,{key:"labelList-implicit"})):null:null}function xme(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var{children:r}=t,i=MB(r,hc).map((o,l)=>P.cloneElement(o,{data:e,key:"labelList-".concat(l)}));if(!n)return i;var s=vme(t.label,e);return[s,...i]}hc.renderCallByParent=xme;function YA(){return YA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},YA.apply(null,arguments)}var g9=t=>{var{cx:e,cy:n,r,className:i}=t,s=Bt("recharts-dot",i);return e===+e&&n===+n&&r===+r?P.createElement("circle",YA({},dh(t),YC(t),{className:s,cx:e,cy:n,r})):null},bme={radiusAxis:{},angleAxis:{}},y9=ki({name:"polarAxis",initialState:bme,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:Cke,removeRadiusAxis:Ike,addAngleAxis:Rke,removeAngleAxis:Pke}=y9.actions,_me=y9.reducer;function wme(t){var{fn:e,args:n}=t,r=Cr(),i=ds();return P.useEffect(()=>{if(!i){var s=e(n);return r(Ode(s)),()=>{r(Vde(s))}}},[e,n,r,i]),null}var Tme=()=>{};function Eme(t){var{legendPayload:e}=t,n=Cr(),r=ds();return P.useEffect(()=>r?Tme:(n(doe(e)),()=>{n(foe(e))}),[n,r,e]),null}function Sme(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=P.useRef(Jp(e)),r=P.useRef(t);return r.current!==t&&(n.current=Jp(e),r.current=t),n.current}var mS,Ame=()=>{var[t]=P.useState(()=>Jp("uid-"));return t},Cme=(mS=OW.useId)!==null&&mS!==void 0?mS:Ame;function Ime(t,e){var n=Cme();return e||(t?"".concat(t,"-").concat(n):n)}var Rme=P.createContext(void 0),Pme=t=>{var{id:e,type:n,children:r}=t,i=Ime("recharts-".concat(n),e);return P.createElement(Rme.Provider,{value:i},r(i))},Nme={cartesianItems:[],polarItems:[]},v9=ki({name:"graphicalItems",initialState:Nme,reducers:{addCartesianGraphicalItem(t,e){t.cartesianItems.push(e.payload)},replaceCartesianGraphicalItem(t,e){var{prev:n,next:r}=e.payload,i=Zo(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},removeCartesianGraphicalItem(t,e){var n=Zo(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},addPolarGraphicalItem(t,e){t.polarItems.push(e.payload)},removePolarGraphicalItem(t,e){var n=Zo(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)}}}),{addCartesianGraphicalItem:Mme,replaceCartesianGraphicalItem:Dme,removeCartesianGraphicalItem:kme,addPolarGraphicalItem:Nke,removePolarGraphicalItem:Mke}=v9.actions,Ome=v9.reducer;function Vme(t){var e=Cr(),n=P.useRef(null);return P.useEffect(()=>{n.current===null?e(Mme(t)):n.current!==t&&e(Dme({prev:n.current,next:t})),n.current=t},[e,t]),P.useEffect(()=>()=>{n.current&&(e(kme(n.current)),n.current=null)},[e]),null}function Lme(){}var Ume={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},g4={t:0},pS={t:1};function Fme(t){var e=Gl(t,Ume),{isActive:n,canBegin:r,duration:i,easing:s,begin:o,onAnimationEnd:l,onAnimationStart:u,children:d}=e,f=Q6("JavascriptAnimate",e.animationManager),[m,v]=P.useState(n?g4:pS),_=P.useRef(null);return P.useEffect(()=>{n||v(pS)},[n]),P.useEffect(()=>{if(!n||!r)return Lme;var T=J6(g4,pS,W6(s),i,v,f.getTimeoutController()),S=()=>{_.current=T()};return f.start([u,o,S,i,l]),()=>{f.stop(),_.current&&_.current(),l()}},[n,r,i,s,o,u,l,f]),d(m.t)}var jme=fe([Ir],t=>{if(t)return{top:t.top,bottom:t.bottom,left:t.left,right:t.right}}),Bme=fe([jme,ma,pa],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),xR=()=>He(Bme),qme=()=>He(Sfe);function y4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function v4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y4(Object(n),!0).forEach(function(r){zme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zme(t,e,n){return(e=$me(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $me(t){var e=Gme(t,"string");return typeof e=="symbol"?e:e+""}function Gme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Hme=t=>{var{point:e,childIndex:n,mainColor:r,activeDot:i,dataKey:s}=t;if(i===!1||e.x==null||e.y==null)return null;var o=v4(v4({index:n,dataKey:s,cx:e.x,cy:e.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},Wn(i,!1)),YC(i)),l;return P.isValidElement(i)?l=P.cloneElement(i,o):typeof i=="function"?l=i(o):l=P.createElement(g9,o),P.createElement(Nf,{className:"recharts-active-dot"},l)};function Kme(t){var{points:e,mainColor:n,activeDot:r,itemDataKey:i}=t,s=He(sg),o=qme();if(e==null||o==null)return null;var l=e.find(u=>o.includes(u.payload));return Un(l)?null:Hme({point:l,childIndex:Number(s),mainColor:n,dataKey:i,activeDot:r})}var Wme={},x9=ki({name:"errorBars",initialState:Wme,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:Dke,removeErrorBar:kke}=x9.actions,Yme=x9.reducer,Jme=["children"];function Qme(t,e){if(t==null)return{};var n,r,i=Xme(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Xme(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Zme={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},epe=P.createContext(Zme);function tpe(t){var{children:e}=t,n=Qme(t,Jme);return P.createElement(epe.Provider,{value:n},e)}function b9(t,e){var n,r,i=He(d=>ya(d,t)),s=He(d=>Yl(d,e)),o=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:bi.allowDataOverflow,l=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:_i.allowDataOverflow,u=o||l;return{needClip:u,needClipX:o,needClipY:l}}function npe(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=xR(),{needClipX:s,needClipY:o,needClip:l}=b9(e,n);if(!l)return null;var{x:u,y:d,width:f,height:m}=i;return P.createElement("clipPath",{id:"clipPath-".concat(r)},P.createElement("rect",{x:s?u:u-f/2,y:o?d:d-m/2,width:s?f:f*2,height:o?m:m*2}))}var rpe=t=>{var{chartData:e}=t,n=Cr(),r=ds();return P.useEffect(()=>r?()=>{}:(n(qL(e)),()=>{n(qL(void 0))}),[e,n,r]),null},x4={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},_9=ki({name:"brush",initialState:x4,reducers:{setBrushSettings(t,e){return e.payload==null?x4:e.payload}}}),{setBrushSettings:Oke}=_9.actions,ipe=_9.reducer;function spe(t,e,n){return(e=ope(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ope(t){var e=ape(t,"string");return typeof e=="symbol"?e:e+""}function ape(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class bR{static create(e){return new bR(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}default:return this.scale(e)}if(n){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+o}return this.scale(e)}}isInRange(e){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?e>=r&&e<=i:e>=i&&e<=r}}spe(bR,"EPS",1e-4);function lpe(t){return(t%180+180)%180}var upe=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=lpe(i),o=s*Math.PI/180,l=Math.atan(r/n),u=o>l&&o<Math.PI-l?r/Math.sin(o):n/Math.cos(o);return Math.abs(u)},cpe={dots:[],areas:[],lines:[]},w9=ki({name:"referenceElements",initialState:cpe,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=Zo(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=Zo(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=Zo(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:Vke,removeDot:Lke,addArea:Uke,removeArea:Fke,addLine:jke,removeLine:Bke}=w9.actions,dpe=w9.reducer,fpe=P.createContext(void 0),hpe=t=>{var{children:e}=t,[n]=P.useState("".concat(Jp("recharts"),"-clip")),r=xR();if(r==null)return null;var{x:i,y:s,width:o,height:l}=r;return P.createElement(fpe.Provider,{value:n},P.createElement("defs",null,P.createElement("clipPath",{id:n},P.createElement("rect",{x:i,y:s,height:l,width:o}))),e)};function gS(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function T9(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function mpe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return upe(r,n)}function ppe(t,e,n){var r=n==="width",{x:i,y:s,width:o,height:l}=t;return e===1?{start:r?i:s,end:r?i+o:s+l}:{start:r?i+o:s+l,end:r?i:s}}function wx(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var s=n();return t*(e-t*s/2-r)>=0&&t*(e+t*s/2-i)<=0}function gpe(t,e){return T9(t,e+1)}function ype(t,e,n,r,i){for(var s=(r||[]).slice(),{start:o,end:l}=e,u=0,d=1,f=o,m=function(){var T=r==null?void 0:r[u];if(T===void 0)return{v:T9(r,d)};var S=u,A,I=()=>(A===void 0&&(A=n(T,S)),A),D=T.coordinate,N=u===0||wx(t,D,I,f,l);N||(u=0,f=o,d+=1),N&&(f=D+t*(I()/2+i),u+=d)},v;d<=s.length;)if(v=m(),v)return v.v;return[]}function b4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Mr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?b4(Object(n),!0).forEach(function(r){vpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vpe(t,e,n){return(e=xpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xpe(t){var e=bpe(t,"string");return typeof e=="symbol"?e:e+""}function bpe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _pe(t,e,n,r,i){for(var s=(r||[]).slice(),o=s.length,{start:l}=e,{end:u}=e,d=function(v){var _=s[v],T,S=()=>(T===void 0&&(T=n(_,v)),T);if(v===o-1){var A=t*(_.coordinate+t*S()/2-u);s[v]=_=Mr(Mr({},_),{},{tickCoord:A>0?_.coordinate-A*t:_.coordinate})}else s[v]=_=Mr(Mr({},_),{},{tickCoord:_.coordinate});var I=wx(t,_.tickCoord,S,l,u);I&&(u=_.tickCoord-t*(S()/2+i),s[v]=Mr(Mr({},_),{},{isShow:!0}))},f=o-1;f>=0;f--)d(f);return s}function wpe(t,e,n,r,i,s){var o=(r||[]).slice(),l=o.length,{start:u,end:d}=e;if(s){var f=r[l-1],m=n(f,l-1),v=t*(f.coordinate+t*m/2-d);o[l-1]=f=Mr(Mr({},f),{},{tickCoord:v>0?f.coordinate-v*t:f.coordinate});var _=wx(t,f.tickCoord,()=>m,u,d);_&&(d=f.tickCoord-t*(m/2+i),o[l-1]=Mr(Mr({},f),{},{isShow:!0}))}for(var T=s?l-1:l,S=function(D){var N=o[D],U,O=()=>(U===void 0&&(U=n(N,D)),U);if(D===0){var q=t*(N.coordinate-t*O()/2-u);o[D]=N=Mr(Mr({},N),{},{tickCoord:q<0?N.coordinate-q*t:N.coordinate})}else o[D]=N=Mr(Mr({},N),{},{tickCoord:N.coordinate});var M=wx(t,N.tickCoord,O,u,d);M&&(u=N.tickCoord+t*(O()/2+i),o[D]=Mr(Mr({},N),{},{isShow:!0}))},A=0;A<T;A++)S(A);return o}function _R(t,e,n){var{tick:r,ticks:i,viewBox:s,minTickGap:o,orientation:l,interval:u,tickFormatter:d,unit:f,angle:m}=t;if(!i||!i.length||!r)return[];if(qe(u)||Ug.isSsr){var v;return(v=gpe(i,qe(u)?u:0))!==null&&v!==void 0?v:[]}var _=[],T=l==="top"||l==="bottom"?"width":"height",S=f&&T==="width"?Cp(f,{fontSize:e,letterSpacing:n}):{width:0,height:0},A=(N,U)=>{var O=typeof d=="function"?d(N.value,U):N.value;return T==="width"?mpe(Cp(O,{fontSize:e,letterSpacing:n}),S,m):Cp(O,{fontSize:e,letterSpacing:n})[T]},I=i.length>=2?ts(i[1].coordinate-i[0].coordinate):1,D=ppe(s,I,T);return u==="equidistantPreserveStart"?ype(I,D,A,i,o):(u==="preserveStart"||u==="preserveStartEnd"?_=wpe(I,D,A,i,o,u==="preserveStartEnd"):_=_pe(I,D,A,i,o),_.filter(N=>N.isShow))}var Tpe=["viewBox"],Epe=["viewBox"];function of(){return of=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},of.apply(null,arguments)}function _4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Hn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_4(Object(n),!0).forEach(function(r){wR(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function w4(t,e){if(t==null)return{};var n,r,i=Spe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Spe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function wR(t,e,n){return(e=Ape(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ape(t){var e=Cpe(t,"string");return typeof e=="symbol"?e:e+""}function Cpe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class Jl extends P.Component{constructor(e){super(e),this.tickRefs=P.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(e,n){var{viewBox:r}=e,i=w4(e,Tpe),s=this.props,{viewBox:o}=s,l=w4(s,Epe);return!gS(r,o)||!gS(i,l)||!gS(n,this.state)}getTickLineCoord(e){var{x:n,y:r,width:i,height:s,orientation:o,tickSize:l,mirror:u,tickMargin:d}=this.props,f,m,v,_,T,S,A=u?-1:1,I=e.tickSize||l,D=qe(e.tickCoord)?e.tickCoord:e.coordinate;switch(o){case"top":f=m=e.coordinate,_=r+ +!u*s,v=_-A*I,S=v-A*d,T=D;break;case"left":v=_=e.coordinate,m=n+ +!u*i,f=m-A*I,T=f-A*d,S=D;break;case"right":v=_=e.coordinate,m=n+ +u*i,f=m+A*I,T=f+A*d,S=D;break;default:f=m=e.coordinate,_=r+ +u*s,v=_+A*I,S=v+A*d,T=D;break}return{line:{x1:f,y1:v,x2:m,y2:_},tick:{x:T,y:S}}}getTickTextAnchor(){var{orientation:e,mirror:n}=this.props,r;switch(e){case"left":r=n?"start":"end";break;case"right":r=n?"end":"start";break;default:r="middle";break}return r}getTickVerticalAnchor(){var{orientation:e,mirror:n}=this.props;switch(e){case"left":case"right":return"middle";case"top":return n?"start":"end";default:return n?"end":"start"}}renderAxisLine(){var{x:e,y:n,width:r,height:i,orientation:s,mirror:o,axisLine:l}=this.props,u=Hn(Hn(Hn({},Wn(this.props,!1)),Wn(l,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var d=+(s==="top"&&!o||s==="bottom"&&o);u=Hn(Hn({},u),{},{x1:e,y1:n+d*i,x2:e+r,y2:n+d*i})}else{var f=+(s==="left"&&!o||s==="right"&&o);u=Hn(Hn({},u),{},{x1:e+f*r,y1:n,x2:e+f*r,y2:n+i})}return P.createElement("line",of({},u,{className:Bt("recharts-cartesian-axis-line",_c(l,"className"))}))}static renderTickItem(e,n,r){var i,s=Bt(n.className,"recharts-cartesian-axis-tick-value");if(P.isValidElement(e))i=P.cloneElement(e,Hn(Hn({},n),{},{className:s}));else if(typeof e=="function")i=e(Hn(Hn({},n),{},{className:s}));else{var o="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(o=Bt(o,e.className)),i=P.createElement(yR,of({},n,{className:o}),r)}return i}renderTicks(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:i,stroke:s,tick:o,tickFormatter:l,unit:u,padding:d}=this.props,f=_R(Hn(Hn({},this.props),{},{ticks:r}),e,n),m=this.getTickTextAnchor(),v=this.getTickVerticalAnchor(),_=dh(this.props),T=Wn(o,!1),S=Hn(Hn({},_),{},{fill:"none"},Wn(i,!1)),A=f.map((I,D)=>{var{line:N,tick:U}=this.getTickLineCoord(I),O=Hn(Hn(Hn(Hn({textAnchor:m,verticalAnchor:v},_),{},{stroke:"none",fill:s},T),U),{},{index:D,payload:I,visibleTicksCount:f.length,tickFormatter:l,padding:d});return P.createElement(Nf,of({className:"recharts-cartesian-axis-tick",key:"tick-".concat(I.value,"-").concat(I.coordinate,"-").concat(I.tickCoord)},RB(this.props,I,D)),i&&P.createElement("line",of({},S,N,{className:Bt("recharts-cartesian-axis-tick-line",_c(i,"className"))})),o&&Jl.renderTickItem(o,O,"".concat(typeof l=="function"?l(I.value,D):I.value).concat(u||"")))});return A.length>0?P.createElement("g",{className:"recharts-cartesian-axis-ticks"},A):null}render(){var{axisLine:e,width:n,height:r,className:i,hide:s}=this.props;if(s)return null;var{ticks:o}=this.props;return n!=null&&n<=0||r!=null&&r<=0?null:P.createElement(Nf,{className:Bt("recharts-cartesian-axis",i),ref:l=>{if(l){var u=l.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(u);var d=u[0];if(d){var f=window.getComputedStyle(d).fontSize,m=window.getComputedStyle(d).letterSpacing;(f!==this.state.fontSize||m!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(d).fontSize,letterSpacing:window.getComputedStyle(d).letterSpacing})}}}},e&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,o),Si.renderCallByParent(this.props))}}wR(Jl,"displayName","CartesianAxis");wR(Jl,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Ipe=["x1","y1","x2","y2","key"],Rpe=["offset"],Ppe=["xAxisId","yAxisId"],Npe=["xAxisId","yAxisId"];function T4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?T4(Object(n),!0).forEach(function(r){Mpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mpe(t,e,n){return(e=Dpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dpe(t){var e=kpe(t,"string");return typeof e=="symbol"?e:e+""}function kpe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tc(){return tc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tc.apply(null,arguments)}function Tx(t,e){if(t==null)return{};var n,r,i=Ope(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Ope(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Vpe=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:i,width:s,height:o,ry:l}=t;return P.createElement("rect",{x:r,y:i,ry:l,width:s,height:o,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function E9(t,e){var n;if(P.isValidElement(t))n=P.cloneElement(t,e);else if(typeof t=="function")n=t(e);else{var{x1:r,y1:i,x2:s,y2:o,key:l}=e,u=Tx(e,Ipe),d=dh(u),{offset:f}=d,m=Tx(d,Rpe);n=P.createElement("line",tc({},m,{x1:r,y1:i,x2:s,y2:o,fill:"none",key:l}))}return n}function Lpe(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:o}=t,l=Tx(t,Ppe),u=i.map((d,f)=>{var m=kr(kr({},l),{},{x1:e,y1:d,x2:e+n,y2:d,key:"line-".concat(f),index:f});return E9(r,m)});return P.createElement("g",{className:"recharts-cartesian-grid-horizontal"},u)}function Upe(t){var{y:e,height:n,vertical:r=!0,verticalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:o}=t,l=Tx(t,Npe),u=i.map((d,f)=>{var m=kr(kr({},l),{},{x1:d,y1:e,x2:d,y2:e+n,key:"line-".concat(f),index:f});return E9(r,m)});return P.createElement("g",{className:"recharts-cartesian-grid-vertical"},u)}function Fpe(t){var{horizontalFill:e,fillOpacity:n,x:r,y:i,width:s,height:o,horizontalPoints:l,horizontal:u=!0}=t;if(!u||!e||!e.length)return null;var d=l.map(m=>Math.round(m+i-i)).sort((m,v)=>m-v);i!==d[0]&&d.unshift(0);var f=d.map((m,v)=>{var _=!d[v+1],T=_?i+o-m:d[v+1]-m;if(T<=0)return null;var S=v%e.length;return P.createElement("rect",{key:"react-".concat(v),y:m,x:r,height:T,width:s,stroke:"none",fill:e[S],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return P.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function jpe(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:i,y:s,width:o,height:l,verticalPoints:u}=t;if(!e||!n||!n.length)return null;var d=u.map(m=>Math.round(m+i-i)).sort((m,v)=>m-v);i!==d[0]&&d.unshift(0);var f=d.map((m,v)=>{var _=!d[v+1],T=_?i+o-m:d[v+1]-m;if(T<=0)return null;var S=v%n.length;return P.createElement("rect",{key:"react-".concat(v),x:m,y:s,width:T,height:l,stroke:"none",fill:n[S],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return P.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var Bpe=(t,e)=>{var{xAxis:n,width:r,height:i,offset:s}=t;return L6(_R(kr(kr(kr({},Jl.defaultProps),n),{},{ticks:U6(n),viewBox:{x:0,y:0,width:r,height:i}})),s.left,s.left+s.width,e)},qpe=(t,e)=>{var{yAxis:n,width:r,height:i,offset:s}=t;return L6(_R(kr(kr(kr({},Jl.defaultProps),n),{},{ticks:U6(n),viewBox:{x:0,y:0,width:r,height:i}})),s.top,s.top+s.height,e)},zpe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function S9(t){var e=gI(),n=yI(),r=q6(),i=kr(kr({},Gl(t,zpe)),{},{x:qe(t.x)?t.x:r.left,y:qe(t.y)?t.y:r.top,width:qe(t.width)?t.width:r.width,height:qe(t.height)?t.height:r.height}),{xAxisId:s,yAxisId:o,x:l,y:u,width:d,height:f,syncWithTicks:m,horizontalValues:v,verticalValues:_}=i,T=ds(),S=He(k=>DL(k,"xAxis",s,T)),A=He(k=>DL(k,"yAxis",o,T));if(!qe(d)||d<=0||!qe(f)||f<=0||!qe(l)||l!==+l||!qe(u)||u!==+u)return null;var I=i.verticalCoordinatesGenerator||Bpe,D=i.horizontalCoordinatesGenerator||qpe,{horizontalPoints:N,verticalPoints:U}=i;if((!N||!N.length)&&typeof D=="function"){var O=v&&v.length,q=D({yAxis:A?kr(kr({},A),{},{ticks:O?v:A.ticks}):void 0,width:e,height:n,offset:r},O?!0:m);Ap(Array.isArray(q),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof q,"]")),Array.isArray(q)&&(N=q)}if((!U||!U.length)&&typeof I=="function"){var M=_&&_.length,R=I({xAxis:S?kr(kr({},S),{},{ticks:M?_:S.ticks}):void 0,width:e,height:n,offset:r},M?!0:m);Ap(Array.isArray(R),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof R,"]")),Array.isArray(R)&&(U=R)}return P.createElement("g",{className:"recharts-cartesian-grid"},P.createElement(Vpe,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),P.createElement(Fpe,tc({},i,{horizontalPoints:N})),P.createElement(jpe,tc({},i,{verticalPoints:U})),P.createElement(Lpe,tc({},i,{offset:r,horizontalPoints:N,xAxis:S,yAxis:A})),P.createElement(Upe,tc({},i,{offset:r,verticalPoints:U,xAxis:S,yAxis:A})))}S9.displayName="CartesianGrid";var A9=(t,e,n,r)=>Lz(t,"xAxis",e,r),C9=(t,e,n,r)=>Vz(t,"xAxis",e,r),I9=(t,e,n,r)=>Lz(t,"yAxis",n,r),R9=(t,e,n,r)=>Vz(t,"yAxis",n,r),$pe=fe([Zt,A9,I9,C9,R9],(t,e,n,r,i)=>$l(t,"xAxis")?EA(e,r,!1):EA(n,i,!1)),Gpe=(t,e,n,r,i)=>i;function Hpe(t){return t.type==="line"}var Kpe=fe([sz,Gpe],(t,e)=>t.filter(Hpe).find(n=>n.id===e)),Wpe=fe([Zt,A9,I9,C9,R9,Kpe,$pe,$I],(t,e,n,r,i,s,o,l)=>{var{chartData:u,dataStartIndex:d,dataEndIndex:f}=l;if(!(s==null||e==null||n==null||r==null||i==null||r.length===0||i.length===0||o==null)){var{dataKey:m,data:v}=s,_;if(v!=null&&v.length>0?_=v:_=u==null?void 0:u.slice(d,f+1),_!=null)return pge({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataKey:m,bandSize:o,displayedData:_})}}),Ype=["id"],Jpe=["type","layout","connectNulls","needClip"],Qpe=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function E4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?E4(Object(n),!0).forEach(function(r){Xpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xpe(t,e,n){return(e=Zpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zpe(t){var e=ege(t,"string");return typeof e=="symbol"?e:e+""}function ege(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function TR(t,e){if(t==null)return{};var n,r,i=tge(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function tge(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Sc(){return Sc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sc.apply(null,arguments)}var nge=t=>{var{dataKey:e,name:n,stroke:r,legendType:i,hide:s}=t;return[{inactive:s,dataKey:e,type:i,color:r,value:F6(n,e),payload:t}]};function rge(t){var{dataKey:e,data:n,stroke:r,strokeWidth:i,fill:s,name:o,hide:l,unit:u}=t;return{dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:s,dataKey:e,nameKey:void 0,name:F6(o,e),hide:l,type:t.tooltipType,color:t.stroke,unit:u}}}var P9=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function ige(t,e){for(var n=t.length%2!==0?[...t,0]:t,r=[],i=0;i<e;++i)r=[...r,...n];return r}var sge=(t,e,n)=>{var r=n.reduce((m,v)=>m+v);if(!r)return P9(e,t);for(var i=Math.floor(t/r),s=t%r,o=e-t,l=[],u=0,d=0;u<n.length;d+=n[u],++u)if(d+n[u]>s){l=[...n.slice(0,u),s-d];break}var f=l.length%2===0?[0,o]:[o];return[...ige(n,i),...l,...f].map(m=>"".concat(m,"px")).join(", ")};function oge(t,e){var n;if(P.isValidElement(t))n=P.cloneElement(t,e);else if(typeof t=="function")n=t(e);else{var r=Bt("recharts-line-dot",typeof t!="boolean"?t.className:"");n=P.createElement(g9,Sc({},e,{className:r}))}return n}function age(t,e){return t==null?!1:e?!0:t.length===1}function lge(t){var{clipPathId:e,points:n,props:r}=t,{dot:i,dataKey:s,needClip:o}=r;if(!age(n,i))return null;var{id:l}=r,u=TR(r,Ype),d=DB(i),f=dh(u),m=Wn(i,!0),v=n.map((T,S)=>{var A=bs(bs(bs({key:"dot-".concat(S),r:3},f),m),{},{index:S,cx:T.x,cy:T.y,dataKey:s,value:T.value,payload:T.payload,points:n});return oge(i,A)}),_={clipPath:o?"url(#clipPath-".concat(d?"":"dots-").concat(e,")"):void 0};return P.createElement(Nf,Sc({className:"recharts-line-dots",key:"dots"},_),v)}function JA(t){var{clipPathId:e,pathRef:n,points:r,strokeDasharray:i,props:s,showLabels:o}=t,{type:l,layout:u,connectNulls:d,needClip:f}=s,m=TR(s,Jpe),v=bs(bs({},Wn(m,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:f?"url(#clipPath-".concat(e,")"):void 0,points:r,type:l,layout:u,connectNulls:d,strokeDasharray:i??s.strokeDasharray});return P.createElement(P.Fragment,null,(r==null?void 0:r.length)>1&&P.createElement(G6,Sc({},v,{pathRef:n})),P.createElement(lge,{points:r,clipPathId:e,props:s}),o&&hc.renderCallByParent(s,r))}function uge(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function cge(t){var{clipPathId:e,props:n,pathRef:r,previousPointsRef:i,longestAnimatedLengthRef:s}=t,{points:o,strokeDasharray:l,isAnimationActive:u,animationBegin:d,animationDuration:f,animationEasing:m,animateNewValues:v,width:_,height:T,onAnimationEnd:S,onAnimationStart:A}=n,I=i.current,D=Sme(n,"recharts-line-"),[N,U]=P.useState(!1),O=P.useCallback(()=>{typeof S=="function"&&S(),U(!1)},[S]),q=P.useCallback(()=>{typeof A=="function"&&A(),U(!0)},[A]),M=uge(r.current),R=s.current;return P.createElement(Fme,{begin:d,duration:f,isActive:u,easing:m,onAnimationEnd:O,onAnimationStart:q,key:D},k=>{var F=Hm(R,M+R,k),j=Math.min(F,M),G;if(l){var $="".concat(l).split(/[,\s]+/gim).map(Y=>parseFloat(Y));G=sge(j,M,$)}else G=P9(M,j);if(I){var de=I.length/o.length,ve=k===1?o:o.map((Y,se)=>{var Q=Math.floor(se*de);if(I[Q]){var _e=I[Q];return bs(bs({},Y),{},{x:Hm(_e.x,Y.x,k),y:Hm(_e.y,Y.y,k)})}return v?bs(bs({},Y),{},{x:Hm(_*2,Y.x,k),y:Hm(T/2,Y.y,k)}):bs(bs({},Y),{},{x:Y.x,y:Y.y})});return i.current=ve,P.createElement(JA,{props:n,points:ve,clipPathId:e,pathRef:r,showLabels:!N,strokeDasharray:G})}return k>0&&M>0&&(i.current=o,s.current=j),P.createElement(JA,{props:n,points:o,clipPathId:e,pathRef:r,showLabels:!N,strokeDasharray:G})})}function dge(t){var{clipPathId:e,props:n}=t,{points:r,isAnimationActive:i}=n,s=P.useRef(null),o=P.useRef(0),l=P.useRef(null),u=s.current;return i&&r&&r.length&&u!==r?P.createElement(cge,{props:n,clipPathId:e,previousPointsRef:s,longestAnimatedLengthRef:o,pathRef:l}):P.createElement(JA,{props:n,points:r,clipPathId:e,pathRef:l,showLabels:!0})}var fge=(t,e)=>({x:t.x,y:t.y,value:t.value,errorVal:Yr(t.payload,e)});class hge extends P.Component{render(){var e,{hide:n,dot:r,points:i,className:s,xAxisId:o,yAxisId:l,top:u,left:d,width:f,height:m,id:v,needClip:_}=this.props;if(n)return null;var T=Bt("recharts-line",s),S=v,{r:A=3,strokeWidth:I=2}=(e=Wn(r,!1))!==null&&e!==void 0?e:{r:3,strokeWidth:2},D=DB(r),N=A*2+I;return P.createElement(P.Fragment,null,P.createElement(Nf,{className:T},_&&P.createElement("defs",null,P.createElement(npe,{clipPathId:S,xAxisId:o,yAxisId:l}),!D&&P.createElement("clipPath",{id:"clipPath-dots-".concat(S)},P.createElement("rect",{x:d-N/2,y:u-N/2,width:f+N,height:m+N}))),P.createElement(dge,{props:this.props,clipPathId:S}),P.createElement(tpe,{xAxisId:o,yAxisId:l,data:i,dataPointFormatter:fge,errorBarOffset:0},this.props.children)),P.createElement(Kme,{activeDot:this.props.activeDot,points:i,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var N9={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Ug.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function mge(t){var e=Gl(t,N9),{activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:s,animationEasing:o,connectNulls:l,dot:u,hide:d,isAnimationActive:f,label:m,legendType:v,xAxisId:_,yAxisId:T,id:S}=e,A=TR(e,Qpe),{needClip:I}=b9(_,T),D=xR(),N=vI(),U=ds(),O=He(F=>Wpe(F,_,T,U,S));if(N!=="horizontal"&&N!=="vertical"||O==null||D==null)return null;var{height:q,width:M,x:R,y:k}=D;return P.createElement(hge,Sc({},A,{id:S,connectNulls:l,dot:u,activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:s,animationEasing:o,isAnimationActive:f,hide:d,label:m,legendType:v,xAxisId:_,yAxisId:T,points:O,layout:N,height:q,width:M,left:R,top:k,needClip:I}))}function pge(t){var{layout:e,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:s,dataKey:o,bandSize:l,displayedData:u}=t;return u.map((d,f)=>{var m=Yr(d,o);if(e==="horizontal"){var v=fV({axis:n,ticks:i,bandSize:l,entry:d,index:f}),_=Un(m)?null:r.scale(m);return{x:v,y:_,value:m,payload:d}}var T=Un(m)?null:n.scale(m),S=fV({axis:r,ticks:s,bandSize:l,entry:d,index:f});return T==null||S==null?null:{x:T,y:S,value:m,payload:d}}).filter(Boolean)}function M9(t){var e=Gl(t,N9),n=ds();return P.createElement(Pme,{id:e.id,type:"line"},r=>P.createElement(P.Fragment,null,P.createElement(Eme,{legendPayload:nge(e)}),P.createElement(wme,{fn:rge,args:e}),P.createElement(Vme,{type:"line",id:r,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:n}),P.createElement(mge,Sc({},e,{id:r}))))}M9.displayName="Line";function S4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function A4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?S4(Object(n),!0).forEach(function(r){gge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gge(t,e,n){return(e=yge(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yge(t){var e=vge(t,"string");return typeof e=="symbol"?e:e+""}function vge(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xge={xAxis:{},yAxis:{},zAxis:{}},D9=ki({name:"cartesianAxis",initialState:xge,reducers:{addXAxis(t,e){t.xAxis[e.payload.id]=e.payload},removeXAxis(t,e){delete t.xAxis[e.payload.id]},addYAxis(t,e){t.yAxis[e.payload.id]=e.payload},removeYAxis(t,e){delete t.yAxis[e.payload.id]},addZAxis(t,e){t.zAxis[e.payload.id]=e.payload},removeZAxis(t,e){delete t.zAxis[e.payload.id]},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload;t.yAxis[n]&&(t.yAxis[n]=A4(A4({},t.yAxis[n]),{},{width:r}))}}}),{addXAxis:bge,removeXAxis:_ge,addYAxis:wge,removeYAxis:Tge,addZAxis:qke,removeZAxis:zke,updateYAxisWidth:Ege}=D9.actions,Sge=D9.reducer,Age=["children"],Cge=["dangerouslySetInnerHTML","ticks"];function k9(t,e,n){return(e=Ige(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ige(t){var e=Rge(t,"string");return typeof e=="symbol"?e:e+""}function Rge(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function QA(){return QA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},QA.apply(null,arguments)}function O9(t,e){if(t==null)return{};var n,r,i=Pge(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Pge(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Nge(t){var e=Cr(),n=P.useMemo(()=>{var{children:s}=t,o=O9(t,Age);return o},[t]),r=He(s=>ya(s,n.id)),i=n===r;return P.useEffect(()=>(e(bge(n)),()=>{e(_ge(n))}),[n,e]),i?t.children:null}var Mge=t=>{var{xAxisId:e,className:n}=t,r=He(B6),i=ds(),s="xAxis",o=He(_=>yh(_,s,e,i)),l=He(_=>Oz(_,s,e,i)),u=He(_=>bde(_,e)),d=He(_=>Sde(_,e));if(u==null||d==null)return null;var{dangerouslySetInnerHTML:f,ticks:m}=t,v=O9(t,Cge);return P.createElement(Jl,QA({},v,{scale:o,x:d.x,y:d.y,width:u.width,height:u.height,className:Bt("recharts-".concat(s," ").concat(s),n),viewBox:r,ticks:l}))},Dge=t=>{var e,n,r,i,s;return P.createElement(Nge,{interval:(e=t.interval)!==null&&e!==void 0?e:"preserveEnd",id:t.xAxisId,scale:t.scale,type:t.type,padding:t.padding,allowDataOverflow:t.allowDataOverflow,domain:t.domain,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,includeHidden:(n=t.includeHidden)!==null&&n!==void 0?n:!1,reversed:t.reversed,ticks:t.ticks,height:t.height,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:(r=t.angle)!==null&&r!==void 0?r:0,minTickGap:(i=t.minTickGap)!==null&&i!==void 0?i:5,tick:(s=t.tick)!==null&&s!==void 0?s:!0,tickFormatter:t.tickFormatter},P.createElement(Mge,t))};class ER extends P.Component{render(){return P.createElement(Dge,this.props)}}k9(ER,"displayName","XAxis");k9(ER,"defaultProps",{allowDataOverflow:bi.allowDataOverflow,allowDecimals:bi.allowDecimals,allowDuplicatedCategory:bi.allowDuplicatedCategory,height:bi.height,hide:!1,mirror:bi.mirror,orientation:bi.orientation,padding:bi.padding,reversed:bi.reversed,scale:bi.scale,tickCount:bi.tickCount,type:bi.type,xAxisId:0});var kge=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:s=0}=t,o=0;if(e){e.forEach(f=>{if(f){var m=f.getBoundingClientRect();m.width>o&&(o=m.width)}});var l=n?n.getBoundingClientRect().width:0,u=i+s,d=o+u+l+(n?r:0);return Math.round(d)}return 0},Oge=["dangerouslySetInnerHTML","ticks"];function V9(t,e,n){return(e=Vge(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vge(t){var e=Lge(t,"string");return typeof e=="symbol"?e:e+""}function Lge(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function XA(){return XA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},XA.apply(null,arguments)}function Uge(t,e){if(t==null)return{};var n,r,i=Fge(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Fge(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function jge(t){var e=Cr();return P.useEffect(()=>(e(wge(t)),()=>{e(Tge(t))}),[t,e]),null}var Bge=t=>{var e,{yAxisId:n,className:r,width:i,label:s}=t,o=P.useRef(null),l=P.useRef(null),u=He(B6),d=ds(),f=Cr(),m="yAxis",v=He(N=>yh(N,m,n,d)),_=He(N=>Cde(N,n)),T=He(N=>Ade(N,n)),S=He(N=>Oz(N,m,n,d));if(P.useLayoutEffect(()=>{var N;if(!(i!=="auto"||!_||vR(s)||P.isValidElement(s))){var U=o.current,O=U==null||(N=U.tickRefs)===null||N===void 0?void 0:N.current,{tickSize:q,tickMargin:M}=U.props,R=kge({ticks:O,label:l.current,labelGapWithTick:5,tickSize:q,tickMargin:M});Math.round(_.width)!==Math.round(R)&&f(Ege({id:n,width:R}))}},[o,o==null||(e=o.current)===null||e===void 0||(e=e.tickRefs)===null||e===void 0?void 0:e.current,_==null?void 0:_.width,_,f,s,n,i]),_==null||T==null)return null;var{dangerouslySetInnerHTML:A,ticks:I}=t,D=Uge(t,Oge);return P.createElement(Jl,XA({},D,{ref:o,labelRef:l,scale:v,x:T.x,y:T.y,width:_.width,height:_.height,className:Bt("recharts-".concat(m," ").concat(m),r),viewBox:u,ticks:S}))},qge=t=>{var e,n,r,i,s;return P.createElement(P.Fragment,null,P.createElement(jge,{interval:(e=t.interval)!==null&&e!==void 0?e:"preserveEnd",id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:(n=t.includeHidden)!==null&&n!==void 0?n:!1,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:(r=t.angle)!==null&&r!==void 0?r:0,minTickGap:(i=t.minTickGap)!==null&&i!==void 0?i:5,tick:(s=t.tick)!==null&&s!==void 0?s:!0,tickFormatter:t.tickFormatter}),P.createElement(Bge,t))},zge={allowDataOverflow:_i.allowDataOverflow,allowDecimals:_i.allowDecimals,allowDuplicatedCategory:_i.allowDuplicatedCategory,hide:!1,mirror:_i.mirror,orientation:_i.orientation,padding:_i.padding,reversed:_i.reversed,scale:_i.scale,tickCount:_i.tickCount,type:_i.type,width:_i.width,yAxisId:0};class SR extends P.Component{render(){return P.createElement(qge,this.props)}}V9(SR,"displayName","YAxis");V9(SR,"defaultProps",zge);var yS={exports:{}},vS={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C4;function $ge(){if(C4)return vS;C4=1;var t=sh();function e(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,s=t.useEffect,o=t.useMemo,l=t.useDebugValue;return vS.useSyncExternalStoreWithSelector=function(u,d,f,m,v){var _=i(null);if(_.current===null){var T={hasValue:!1,value:null};_.current=T}else T=_.current;_=o(function(){function A(O){if(!I){if(I=!0,D=O,O=m(O),v!==void 0&&T.hasValue){var q=T.value;if(v(q,O))return N=q}return N=O}if(q=N,n(D,O))return q;var M=m(O);return v!==void 0&&v(q,M)?(D=O,q):(D=O,N=M)}var I=!1,D,N,U=f===void 0?null:f;return[function(){return A(d())},U===null?void 0:function(){return A(U())}]},[d,f,m,v]);var S=r(u,_[0],_[1]);return s(function(){T.hasValue=!0,T.value=S},[S]),l(S),S},vS}var I4;function Gge(){return I4||(I4=1,yS.exports=$ge()),yS.exports}Gge();function Hge(t){t()}function Kge(){let t=null,e=null;return{clear(){t=null,e=null},notify(){Hge(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var R4={notify(){},get:()=>[]};function Wge(t,e){let n,r=R4,i=0,s=!1;function o(S){f();const A=r.subscribe(S);let I=!1;return()=>{I||(I=!0,A(),m())}}function l(){r.notify()}function u(){T.onStateChange&&T.onStateChange()}function d(){return s}function f(){i++,n||(n=t.subscribe(u),r=Kge())}function m(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=R4)}function v(){s||(s=!0,f())}function _(){s&&(s=!1,m())}const T={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:u,isSubscribed:d,trySubscribe:v,tryUnsubscribe:_,getListeners:()=>r};return T}var Yge=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Jge=Yge(),Qge=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Xge=Qge(),Zge=()=>Jge||Xge?P.useLayoutEffect:P.useEffect,eye=Zge(),xS=Symbol.for("react-redux-context"),bS=typeof globalThis<"u"?globalThis:{};function tye(){if(!P.createContext)return{};const t=bS[xS]??(bS[xS]=new Map);let e=t.get(P.createContext);return e||(e=P.createContext(null),t.set(P.createContext,e)),e}var nye=tye();function rye(t){const{children:e,context:n,serverState:r,store:i}=t,s=P.useMemo(()=>{const u=Wge(i);return{store:i,subscription:u,getServerState:r?()=>r:void 0}},[i,r]),o=P.useMemo(()=>i.getState(),[i]);eye(()=>{const{subscription:u}=s;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),o!==i.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[s,o]);const l=n||nye;return P.createElement(l.Provider,{value:s},e)}var iye=rye,sye=(t,e)=>e,AR=fe([sye,Zt,ez,Qn,Qz,va,Mfe,Ir],Lfe),CR=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},L9=us("mouseClick"),U9=Lg();U9.startListening({actionCreator:L9,effect:(t,e)=>{var n=t.payload,r=AR(e.getState(),CR(n));(r==null?void 0:r.activeIndex)!=null&&e.dispatch(Fde({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var ZA=us("mouseMove"),F9=Lg();F9.startListening({actionCreator:ZA,effect:(t,e)=>{var n=t.payload,r=e.getState(),i=lR(r,r.tooltip.settings.shared),s=AR(r,CR(n));i==="axis"&&((s==null?void 0:s.activeIndex)!=null?e.dispatch($z({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):e.dispatch(zz()))}});function oye(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":e}var P4={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},j9=ki({name:"rootProps",initialState:P4,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:P4.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className}}}),aye=j9.reducer,{updateOptions:lye}=j9.actions,B9=ki({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:$ke}=B9.actions,uye=B9.reducer,q9=us("keyDown"),z9=us("focus"),IR=Lg();IR.startListening({actionCreator:q9,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,s=t.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var o=Number(uR(i,xh(n))),l=va(n);if(s==="Enter"){var u=bx(n,"axis","hover",String(i.index));e.dispatch(GA({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:u}));return}var d=Nde(n),f=d==="left-to-right"?1:-1,m=s==="ArrowRight"?1:-1,v=o+m*f;if(!(l==null||v>=l.length||v<0)){var _=bx(n,"axis","hover",String(v));e.dispatch(GA({active:!0,activeIndex:v.toString(),activeDataKey:void 0,activeCoordinate:_}))}}}}});IR.startListening({actionCreator:z9,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var s="0",o=bx(n,"axis","hover",String(s));e.dispatch(GA({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:o}))}}}});var Xi=us("externalEvent"),$9=Lg();$9.startListening({actionCreator:Xi,effect:(t,e)=>{if(t.payload.handler!=null){var n=e.getState(),r={activeCoordinate:wfe(n),activeDataKey:bfe(n),activeIndex:sg(n),activeLabel:e9(n),activeTooltipIndex:sg(n),isTooltipActive:Tfe(n)};t.payload.handler(r,t.payload.reactEvent)}}});var cye=fe([vh],t=>t.tooltipItemPayloads),dye=fe([cye,Kg,(t,e,n)=>e,(t,e,n)=>n],(t,e,n,r)=>{var i=t.find(l=>l.settings.dataKey===r);if(i!=null){var{positions:s}=i;if(s!=null){var o=e(s,n);return o}}}),G9=us("touchMove"),H9=Lg();H9.startListening({actionCreator:G9,effect:(t,e)=>{var n=t.payload,r=e.getState(),i=lR(r,r.tooltip.settings.shared);if(i==="axis"){var s=AR(r,CR({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&e.dispatch($z({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var o,l=n.touches[0],u=document.elementFromPoint(l.clientX,l.clientY);if(!u||!u.getAttribute)return;var d=u.getAttribute(Xse),f=(o=u.getAttribute(Zse))!==null&&o!==void 0?o:void 0,m=dye(e.getState(),d,f);e.dispatch(Ude({activeDataKey:f,activeIndex:d,activeCoordinate:m}))}}});var fye=h6({brush:ipe,cartesianAxis:Sge,chartData:ehe,errorBars:Yme,graphicalItems:Ome,layout:Ese,legend:hoe,options:Yfe,polarAxis:_me,polarOptions:uye,referenceElements:dpe,rootProps:aye,tooltip:jde}),hye=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return Yie({reducer:fye,preloadedState:e,middleware:r=>r({serializableCheck:!1}).concat([U9.middleware,F9.middleware,IR.middleware,$9.middleware,H9.middleware]),devTools:{serialize:{replacer:oye},name:"recharts-".concat(n)}})};function mye(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=ds(),s=P.useRef(null);if(i)return n;s.current==null&&(s.current=hye(e,r));var o=aI;return P.createElement(iye,{context:o,store:s.current},n)}function pye(t){var{layout:e,width:n,height:r,margin:i}=t,s=Cr(),o=ds();return P.useEffect(()=>{o||(s(_se(e)),s(wse({width:n,height:r})),s(bse(i)))},[s,o,e,n,r,i]),null}function gye(t){var e=Cr();return P.useEffect(()=>{e(lye(t))},[e,t]),null}var yye=["children"];function vye(t,e){if(t==null)return{};var n,r,i=xye(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function xye(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Ex(){return Ex=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ex.apply(null,arguments)}var bye={width:"100%",height:"100%"},_ye=P.forwardRef((t,e)=>{var n=gI(),r=yI(),i=$6();if(!sx(n)||!sx(r))return null;var{children:s,otherAttributes:o,title:l,desc:u}=t,d,f;return typeof o.tabIndex=="number"?d=o.tabIndex:d=i?0:void 0,typeof o.role=="string"?f=o.role:f=i?"application":void 0,P.createElement(JC,Ex({},o,{title:l,desc:u,role:f,tabIndex:d,width:n,height:r,style:bye,ref:e}),s)}),wye=t=>{var{children:e}=t,n=He(_b);if(!n)return null;var{width:r,height:i,y:s,x:o}=n;return P.createElement(JC,{width:r,height:i,x:o,y:s},e)},N4=P.forwardRef((t,e)=>{var{children:n}=t,r=vye(t,yye),i=ds();return i?P.createElement(wye,null,n):P.createElement(_ye,Ex({ref:e},r),n)});function Tye(){var t=Cr(),[e,n]=P.useState(null),r=He(Qse);return P.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),s=i.width/e.offsetWidth;Rs(s)&&s!==r&&t(Tse(s))}},[e,t,r]),n}function M4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Eye(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M4(Object(n),!0).forEach(function(r){Sye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Sye(t,e,n){return(e=Aye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Aye(t){var e=Cye(t,"string");return typeof e=="symbol"?e:e+""}function Cye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Iye=P.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:s,onContextMenu:o,onDoubleClick:l,onMouseDown:u,onMouseEnter:d,onMouseLeave:f,onMouseMove:m,onMouseUp:v,onTouchEnd:_,onTouchMove:T,onTouchStart:S,style:A,width:I}=t,D=Cr(),[N,U]=P.useState(null),[O,q]=P.useState(null);rhe();var M=Tye(),R=P.useCallback(le=>{M(le),typeof e=="function"&&e(le),U(le),q(le)},[M,e,U,q]),k=P.useCallback(le=>{D(L9(le)),D(Xi({handler:s,reactEvent:le}))},[D,s]),F=P.useCallback(le=>{D(ZA(le)),D(Xi({handler:d,reactEvent:le}))},[D,d]),j=P.useCallback(le=>{D(zz()),D(Xi({handler:f,reactEvent:le}))},[D,f]),G=P.useCallback(le=>{D(ZA(le)),D(Xi({handler:m,reactEvent:le}))},[D,m]),$=P.useCallback(()=>{D(z9())},[D]),de=P.useCallback(le=>{D(q9(le.key))},[D]),ve=P.useCallback(le=>{D(Xi({handler:o,reactEvent:le}))},[D,o]),Y=P.useCallback(le=>{D(Xi({handler:l,reactEvent:le}))},[D,l]),se=P.useCallback(le=>{D(Xi({handler:u,reactEvent:le}))},[D,u]),Q=P.useCallback(le=>{D(Xi({handler:v,reactEvent:le}))},[D,v]),_e=P.useCallback(le=>{D(Xi({handler:S,reactEvent:le}))},[D,S]),H=P.useCallback(le=>{D(G9(le)),D(Xi({handler:T,reactEvent:le}))},[D,T]),ae=P.useCallback(le=>{D(Xi({handler:_,reactEvent:le}))},[D,_]);return P.createElement(o9.Provider,{value:N},P.createElement(OB.Provider,{value:O},P.createElement("div",{className:Bt("recharts-wrapper",r),style:Eye({position:"relative",cursor:"default",width:I,height:i},A),onClick:k,onContextMenu:ve,onDoubleClick:Y,onFocus:$,onKeyDown:de,onMouseDown:se,onMouseEnter:F,onMouseLeave:j,onMouseMove:G,onMouseUp:Q,onTouchEnd:ae,onTouchMove:H,onTouchStart:_e,ref:R},n)))}),Rye=["children","className","width","height","style","compact","title","desc"];function Pye(t,e){if(t==null)return{};var n,r,i=Nye(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Nye(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Mye=P.forwardRef((t,e)=>{var{children:n,className:r,width:i,height:s,style:o,compact:l,title:u,desc:d}=t,f=Pye(t,Rye),m=dh(f);return l?P.createElement(N4,{otherAttributes:m,title:u,desc:d},n):P.createElement(Iye,{className:r,style:o,width:i,height:s,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},P.createElement(N4,{otherAttributes:m,title:u,desc:d,ref:e},P.createElement(hpe,null,n)))}),Dye=["width","height"];function e1(){return e1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},e1.apply(null,arguments)}function kye(t,e){if(t==null)return{};var n,r,i=Oye(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Oye(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Vye={top:5,right:5,bottom:5,left:5},Lye={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Vye,reverseStackOrder:!1,syncMethod:"index"},Uye=P.forwardRef(function(e,n){var r,i=Gl(e.categoricalChartProps,Lye),{width:s,height:o}=i,l=kye(i,Dye);if(!sx(s)||!sx(o))return null;var{chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:m,categoricalChartProps:v}=e,_={chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:m,eventEmitter:void 0};return P.createElement(mye,{preloadedState:{options:_},reduxStoreName:(r=v.id)!==null&&r!==void 0?r:u},P.createElement(rpe,{chartData:v.data}),P.createElement(pye,{width:s,height:o,layout:i.layout,margin:i.margin}),P.createElement(gye,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),P.createElement(Mye,e1({},l,{width:s,height:o,ref:n})))}),Fye=["axis"],jye=P.forwardRef((t,e)=>P.createElement(Uye,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Fye,tooltipPayloadSearcher:Kfe,categoricalChartProps:t,ref:e}));const ku=({title:t,value:e,icon:n,subtext:r})=>x.jsxs("div",{className:"bg-neutral-900 border border-neutral-800 p-6 rounded-2xl flex items-start justify-between",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-neutral-400 text-sm font-medium uppercase",children:t}),x.jsx("p",{className:"text-3xl font-bold text-white mt-2",children:e}),x.jsx("p",{className:"text-neutral-500 text-sm mt-1",children:r})]}),x.jsx("div",{className:"bg-purple-900/50 p-3 rounded-lg text-purple-400",children:n})]}),K9=({data:t,founderEngagement:e,totalIdeas:n,totalNegotiations:r,totalDealsAccepted:i})=>x.jsxs("div",{className:"space-y-8 mt-9",children:[x.jsx("h1",{className:"text-3xl font-bold text-white",children:"Platform Analytics"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[x.jsx(ku,{title:"Daily Active Users",value:t.userEngagement.dailyActiveUsers,icon:x.jsx(io,{className:"w-6 h-6"}),subtext:"Last 24 hours"}),x.jsx(ku,{title:"Match Success Rate",value:`${t.matchSuccess.successRate}%`,icon:x.jsx(tf,{className:"w-6 h-6"}),subtext:"Total successful connections"}),x.jsx(ku,{title:"Total Ideas Posted",value:typeof n=="number"?n:0,icon:x.jsx(wr,{className:"w-6 h-6"}),subtext:"All time"}),x.jsx(ku,{title:"Total Negotiations Started",value:typeof r=="number"?r:0,icon:x.jsx(vB,{className:"w-6 h-6"}),subtext:"All time"}),x.jsx(ku,{title:"Total Deals Accepted",value:typeof i=="number"?i:0,icon:x.jsx(tf,{className:"w-6 h-6"}),subtext:"All time"}),e&&x.jsxs(x.Fragment,{children:[x.jsx(ku,{title:"Total Likes on Your Ideas",value:e.totalLikes,icon:x.jsx(nf,{className:"w-6 h-6"}),subtext:"All your ideas"}),x.jsx(ku,{title:"Total Comments on Your Ideas",value:e.totalComments,icon:x.jsx(rf,{className:"w-6 h-6"}),subtext:"All your ideas"})]})]}),x.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:x.jsxs("div",{className:"bg-neutral-900 border border-neutral-800 p-6 rounded-2xl",children:[x.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Daily Active Users (Last 7 Days)"}),x.jsx(_he,{width:"100%",height:300,children:x.jsxs(jye,{data:t.platformPerformance.dau_data,margin:{top:5,right:20,left:-10,bottom:5},children:[x.jsx(S9,{strokeDasharray:"3 3",stroke:"#374151"}),x.jsx(ER,{dataKey:"name",stroke:"#9ca3af",fontSize:12}),x.jsx(SR,{stroke:"#9ca3af",fontSize:12}),x.jsx(dhe,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"0.5rem"},labelStyle:{color:"#f3f4f6"}}),x.jsx(wb,{}),x.jsx(M9,{type:"monotone",dataKey:"users",stroke:"#8b5cf6",strokeWidth:2,activeDot:{r:8}})]})})]})})]}),RR=P.createContext({});function PR(t){const e=P.useRef(null);return e.current===null&&(e.current=t()),e.current}const NR=typeof window<"u",W9=NR?P.useLayoutEffect:P.useEffect,Fb=P.createContext(null);function MR(t,e){t.indexOf(e)===-1&&t.push(e)}function DR(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const aa=(t,e,n)=>n>e?e:n<t?t:n;let kR=()=>{};const la={},Y9=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function J9(t){return typeof t=="object"&&t!==null}const Q9=t=>/^0[^.\s]+$/u.test(t);function OR(t){let e;return()=>(e===void 0&&(e=t()),e)}const is=t=>t,Bye=(t,e)=>n=>e(t(n)),Yg=(...t)=>t.reduce(Bye),ag=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class VR{constructor(){this.subscriptions=[]}add(e){return MR(this.subscriptions,e),()=>DR(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const oo=t=>t*1e3,ao=t=>t/1e3;function X9(t,e){return e?t*(1e3/e):0}const Z9=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,qye=1e-7,zye=12;function $ye(t,e,n,r,i){let s,o,l=0;do o=e+(n-e)/2,s=Z9(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>qye&&++l<zye);return o}function Jg(t,e,n,r){if(t===e&&n===r)return is;const i=s=>$ye(s,0,1,t,n);return s=>s===0||s===1?s:Z9(i(s),e,r)}const e$=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,t$=t=>e=>1-t(1-e),n$=Jg(.33,1.53,.69,.99),LR=t$(n$),r$=e$(LR),i$=t=>(t*=2)<1?.5*LR(t):.5*(2-Math.pow(2,-10*(t-1))),UR=t=>1-Math.sin(Math.acos(t)),s$=t$(UR),o$=e$(UR),Gye=Jg(.42,0,1,1),Hye=Jg(0,0,.58,1),a$=Jg(.42,0,.58,1),Kye=t=>Array.isArray(t)&&typeof t[0]!="number",l$=t=>Array.isArray(t)&&typeof t[0]=="number",Wye={linear:is,easeIn:Gye,easeInOut:a$,easeOut:Hye,circIn:UR,circInOut:o$,circOut:s$,backIn:LR,backInOut:r$,backOut:n$,anticipate:i$},Yye=t=>typeof t=="string",D4=t=>{if(l$(t)){kR(t.length===4);const[e,n,r,i]=t;return Jg(e,n,r,i)}else if(Yye(t))return Wye[t];return t},Jv=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Jye(t,e){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function u(f){o.has(f)&&(d.schedule(f),t()),f(l)}const d={schedule:(f,m=!1,v=!1)=>{const T=v&&i?n:r;return m&&o.add(f),T.has(f)||T.add(f),f},cancel:f=>{r.delete(f),o.delete(f)},process:f=>{if(l=f,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(u),n.clear(),i=!1,s&&(s=!1,d.process(f))}};return d}const Qye=40;function u$(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Jv.reduce((N,U)=>(N[U]=Jye(s),N),{}),{setup:l,read:u,resolveKeyframes:d,preUpdate:f,update:m,preRender:v,render:_,postRender:T}=o,S=()=>{const N=la.useManualTiming?i.timestamp:performance.now();n=!1,la.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(N-i.timestamp,Qye),1)),i.timestamp=N,i.isProcessing=!0,l.process(i),u.process(i),d.process(i),f.process(i),m.process(i),v.process(i),_.process(i),T.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(S))},A=()=>{n=!0,r=!0,i.isProcessing||t(S)};return{schedule:Jv.reduce((N,U)=>{const O=o[U];return N[U]=(q,M=!1,R=!1)=>(n||A(),O.schedule(q,M,R)),N},{}),cancel:N=>{for(let U=0;U<Jv.length;U++)o[Jv[U]].cancel(N)},state:i,steps:o}}const{schedule:ln,cancel:Nl,state:xr,steps:_S}=u$(typeof requestAnimationFrame<"u"?requestAnimationFrame:is,!0);let y0;function Xye(){y0=void 0}const si={now:()=>(y0===void 0&&si.set(xr.isProcessing||la.useManualTiming?xr.timestamp:performance.now()),y0),set:t=>{y0=t,queueMicrotask(Xye)}},c$=t=>e=>typeof e=="string"&&e.startsWith(t),FR=c$("--"),Zye=c$("var(--"),jR=t=>Zye(t)?eve.test(t.split("/*")[0].trim()):!1,eve=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,bh={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},lg={...bh,transform:t=>aa(0,1,t)},Qv={...bh,default:1},Ip=t=>Math.round(t*1e5)/1e5,BR=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function tve(t){return t==null}const nve=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,qR=(t,e)=>n=>!!(typeof n=="string"&&nve.test(n)&&n.startsWith(t)||e&&!tve(n)&&Object.prototype.hasOwnProperty.call(n,e)),d$=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,l]=r.match(BR);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},rve=t=>aa(0,255,t),wS={...bh,transform:t=>Math.round(rve(t))},nc={test:qR("rgb","red"),parse:d$("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+wS.transform(t)+", "+wS.transform(e)+", "+wS.transform(n)+", "+Ip(lg.transform(r))+")"};function ive(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const t1={test:qR("#"),parse:ive,transform:nc.transform},Qg=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),dl=Qg("deg"),lo=Qg("%"),Ze=Qg("px"),sve=Qg("vh"),ove=Qg("vw"),k4={...lo,parse:t=>lo.parse(t)/100,transform:t=>lo.transform(t*100)},af={test:qR("hsl","hue"),parse:d$("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+lo.transform(Ip(e))+", "+lo.transform(Ip(n))+", "+Ip(lg.transform(r))+")"},On={test:t=>nc.test(t)||t1.test(t)||af.test(t),parse:t=>nc.test(t)?nc.parse(t):af.test(t)?af.parse(t):t1.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?nc.transform(t):af.transform(t),getAnimatableNone:t=>{const e=On.parse(t);return e.alpha=0,On.transform(e)}},ave=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function lve(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(BR))==null?void 0:e.length)||0)+(((n=t.match(ave))==null?void 0:n.length)||0)>0}const f$="number",h$="color",uve="var",cve="var(",O4="${}",dve=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ug(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const l=e.replace(dve,u=>(On.test(u)?(r.color.push(s),i.push(h$),n.push(On.parse(u))):u.startsWith(cve)?(r.var.push(s),i.push(uve),n.push(u)):(r.number.push(s),i.push(f$),n.push(parseFloat(u))),++s,O4)).split(O4);return{values:n,split:l,indexes:r,types:i}}function m$(t){return ug(t).values}function p$(t){const{split:e,types:n}=ug(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const l=n[o];l===f$?s+=Ip(i[o]):l===h$?s+=On.transform(i[o]):s+=i[o]}return s}}const fve=t=>typeof t=="number"?0:On.test(t)?On.getAnimatableNone(t):t;function hve(t){const e=m$(t);return p$(t)(e.map(fve))}const Ml={test:lve,parse:m$,createTransformer:p$,getAnimatableNone:hve};function TS(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function mve({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const l=n<.5?n*(1+e):n+e-n*e,u=2*n-l;i=TS(u,l,t+1/3),s=TS(u,l,t),o=TS(u,l,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Sx(t,e){return n=>n>0?e:t}const hn=(t,e,n)=>t+(e-t)*n,ES=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},pve=[t1,nc,af],gve=t=>pve.find(e=>e.test(t));function V4(t){const e=gve(t);if(!e)return!1;let n=e.parse(t);return e===af&&(n=mve(n)),n}const L4=(t,e)=>{const n=V4(t),r=V4(e);if(!n||!r)return Sx(t,e);const i={...n};return s=>(i.red=ES(n.red,r.red,s),i.green=ES(n.green,r.green,s),i.blue=ES(n.blue,r.blue,s),i.alpha=hn(n.alpha,r.alpha,s),nc.transform(i))},n1=new Set(["none","hidden"]);function yve(t,e){return n1.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function vve(t,e){return n=>hn(t,e,n)}function zR(t){return typeof t=="number"?vve:typeof t=="string"?jR(t)?Sx:On.test(t)?L4:_ve:Array.isArray(t)?g$:typeof t=="object"?On.test(t)?L4:xve:Sx}function g$(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>zR(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function xve(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=zR(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function bve(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=t.indexes[s][r[s]],l=t.values[o]??0;n[i]=l,r[s]++}return n}const _ve=(t,e)=>{const n=Ml.createTransformer(e),r=ug(t),i=ug(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?n1.has(t)&&!i.values.length||n1.has(e)&&!r.values.length?yve(t,e):Yg(g$(bve(r,i),i.values),n):Sx(t,e)};function y$(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?hn(t,e,n):zR(t)(t,e)}const wve=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>ln.update(e,n),stop:()=>Nl(e),now:()=>xr.isProcessing?xr.timestamp:si.now()}},v$=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Ax=2e4;function $R(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Ax;)e+=n,r=t.next(e);return e>=Ax?1/0:e}function Tve(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min($R(r),Ax);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:ao(i)}}const Eve=5;function x$(t,e,n){const r=Math.max(e-Eve,0);return X9(n-t(r),e-r)}const xn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},SS=.001;function Sve({duration:t=xn.duration,bounce:e=xn.bounce,velocity:n=xn.velocity,mass:r=xn.mass}){let i,s,o=1-e;o=aa(xn.minDamping,xn.maxDamping,o),t=aa(xn.minDuration,xn.maxDuration,ao(t)),o<1?(i=d=>{const f=d*o,m=f*t,v=f-n,_=r1(d,o),T=Math.exp(-m);return SS-v/_*T},s=d=>{const m=d*o*t,v=m*n+n,_=Math.pow(o,2)*Math.pow(d,2)*t,T=Math.exp(-m),S=r1(Math.pow(d,2),o);return(-i(d)+SS>0?-1:1)*((v-_)*T)/S}):(i=d=>{const f=Math.exp(-d*t),m=(d-n)*t+1;return-SS+f*m},s=d=>{const f=Math.exp(-d*t),m=(n-d)*(t*t);return f*m});const l=5/t,u=Cve(i,s,l);if(t=oo(t),isNaN(u))return{stiffness:xn.stiffness,damping:xn.damping,duration:t};{const d=Math.pow(u,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:t}}}const Ave=12;function Cve(t,e,n){let r=n;for(let i=1;i<Ave;i++)r=r-t(r)/e(r);return r}function r1(t,e){return t*Math.sqrt(1-e*e)}const Ive=["duration","bounce"],Rve=["stiffness","damping","mass"];function U4(t,e){return e.some(n=>t[n]!==void 0)}function Pve(t){let e={velocity:xn.velocity,stiffness:xn.stiffness,damping:xn.damping,mass:xn.mass,isResolvedFromDuration:!1,...t};if(!U4(t,Rve)&&U4(t,Ive))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*aa(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:xn.mass,stiffness:i,damping:s}}else{const n=Sve(t);e={...e,...n,mass:xn.mass},e.isResolvedFromDuration=!0}return e}function Cx(t=xn.visualDuration,e=xn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:s},{stiffness:u,damping:d,mass:f,duration:m,velocity:v,isResolvedFromDuration:_}=Pve({...n,velocity:-ao(n.velocity||0)}),T=v||0,S=d/(2*Math.sqrt(u*f)),A=o-s,I=ao(Math.sqrt(u/f)),D=Math.abs(A)<5;r||(r=D?xn.restSpeed.granular:xn.restSpeed.default),i||(i=D?xn.restDelta.granular:xn.restDelta.default);let N;if(S<1){const O=r1(I,S);N=q=>{const M=Math.exp(-S*I*q);return o-M*((T+S*I*A)/O*Math.sin(O*q)+A*Math.cos(O*q))}}else if(S===1)N=O=>o-Math.exp(-I*O)*(A+(T+I*A)*O);else{const O=I*Math.sqrt(S*S-1);N=q=>{const M=Math.exp(-S*I*q),R=Math.min(O*q,300);return o-M*((T+S*I*A)*Math.sinh(R)+O*A*Math.cosh(R))/O}}const U={calculatedDuration:_&&m||null,next:O=>{const q=N(O);if(_)l.done=O>=m;else{let M=O===0?T:0;S<1&&(M=O===0?oo(T):x$(N,O,q));const R=Math.abs(M)<=r,k=Math.abs(o-q)<=i;l.done=R&&k}return l.value=l.done?o:q,l},toString:()=>{const O=Math.min($R(U),Ax),q=v$(M=>U.next(O*M).value,O,30);return O+"ms "+q},toTransition:()=>{}};return U}Cx.applyToOptions=t=>{const e=Tve(t,100,Cx);return t.ease=e.ease,t.duration=oo(e.duration),t.type="keyframes",t};function i1({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:l,max:u,restDelta:d=.5,restSpeed:f}){const m=t[0],v={done:!1,value:m},_=R=>l!==void 0&&R<l||u!==void 0&&R>u,T=R=>l===void 0?u:u===void 0||Math.abs(l-R)<Math.abs(u-R)?l:u;let S=n*e;const A=m+S,I=o===void 0?A:o(A);I!==A&&(S=I-m);const D=R=>-S*Math.exp(-R/r),N=R=>I+D(R),U=R=>{const k=D(R),F=N(R);v.done=Math.abs(k)<=d,v.value=v.done?I:F};let O,q;const M=R=>{_(v.value)&&(O=R,q=Cx({keyframes:[v.value,T(v.value)],velocity:x$(N,R,v.value),damping:i,stiffness:s,restDelta:d,restSpeed:f}))};return M(0),{calculatedDuration:null,next:R=>{let k=!1;return!q&&O===void 0&&(k=!0,U(R),M(R)),O!==void 0&&R>=O?q.next(R-O):(!k&&U(R),v)}}}function Nve(t,e,n){const r=[],i=n||la.mix||y$,s=t.length-1;for(let o=0;o<s;o++){let l=i(t[o],t[o+1]);if(e){const u=Array.isArray(e)?e[o]||is:e;l=Yg(u,l)}r.push(l)}return r}function Mve(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(kR(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=Nve(e,r,i),u=l.length,d=f=>{if(o&&f<t[0])return e[0];let m=0;if(u>1)for(;m<t.length-2&&!(f<t[m+1]);m++);const v=ag(t[m],t[m+1],f);return l[m](v)};return n?f=>d(aa(t[0],t[s-1],f)):d}function Dve(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=ag(0,e,r);t.push(hn(n,1,i))}}function kve(t){const e=[0];return Dve(e,t.length-1),e}function Ove(t,e){return t.map(n=>n*e)}function Vve(t,e){return t.map(()=>e||a$).splice(0,t.length-1)}function Rp({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=Kye(r)?r.map(D4):D4(r),s={done:!1,value:e[0]},o=Ove(n&&n.length===e.length?n:kve(e),t),l=Mve(o,e,{ease:Array.isArray(i)?i:Vve(e,i)});return{calculatedDuration:t,next:u=>(s.value=l(u),s.done=u>=t,s)}}const Lve=t=>t!==null;function GR(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(Lve),l=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!l||r===void 0?s[l]:r}const Uve={decay:i1,inertia:i1,tween:Rp,keyframes:Rp,spring:Cx};function b$(t){typeof t.type=="string"&&(t.type=Uve[t.type])}class HR{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const Fve=t=>t/100;class KR extends HR{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==si.now()&&this.tick(si.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;b$(e);const{type:n=Rp,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:l}=e;const u=n||Rp;u!==Rp&&typeof l[0]!="number"&&(this.mixKeyframes=Yg(Fve,y$(l[0],l[1])),l=[0,100]);const d=u({...e,keyframes:l});s==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...l].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=$R(d));const{calculatedDuration:f}=d;this.calculatedDuration=f,this.resolvedDuration=f+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=d}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:u}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:f,repeat:m,repeatType:v,repeatDelay:_,type:T,onUpdate:S,finalKeyframe:A}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const I=this.currentTime-d*(this.playbackSpeed>=0?1:-1),D=this.playbackSpeed>=0?I<0:I>i;this.currentTime=Math.max(I,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let N=this.currentTime,U=r;if(m){const R=Math.min(this.currentTime,i)/l;let k=Math.floor(R),F=R%1;!F&&R>=1&&(F=1),F===1&&k--,k=Math.min(k,m+1),!!(k%2)&&(v==="reverse"?(F=1-F,_&&(F-=_/l)):v==="mirror"&&(U=o)),N=aa(0,1,F)*l}const O=D?{done:!1,value:f[0]}:U.next(N);s&&(O.value=s(O.value));let{done:q}=O;!D&&u!==null&&(q=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const M=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&q);return M&&T!==i1&&(O.value=GR(f,this.options,A,this.speed)),S&&S(O.value),M&&this.finish(),O}then(e,n){return this.finished.then(e,n)}get duration(){return ao(this.calculatedDuration)}get time(){return ao(this.currentTime)}set time(e){var n;e=oo(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(si.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=ao(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=wve,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(si.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function jve(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const rc=t=>t*180/Math.PI,s1=t=>{const e=rc(Math.atan2(t[1],t[0]));return o1(e)},Bve={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:s1,rotateZ:s1,skewX:t=>rc(Math.atan(t[1])),skewY:t=>rc(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},o1=t=>(t=t%360,t<0&&(t+=360),t),F4=s1,j4=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),B4=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),qve={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:j4,scaleY:B4,scale:t=>(j4(t)+B4(t))/2,rotateX:t=>o1(rc(Math.atan2(t[6],t[5]))),rotateY:t=>o1(rc(Math.atan2(-t[2],t[0]))),rotateZ:F4,rotate:F4,skewX:t=>rc(Math.atan(t[4])),skewY:t=>rc(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function a1(t){return t.includes("scale")?1:0}function l1(t,e){if(!t||t==="none")return a1(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=qve,i=n;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Bve,i=l}if(!i)return a1(e);const s=r[e],o=i[1].split(",").map($ve);return typeof s=="function"?s(o):o[s]}const zve=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return l1(n,e)};function $ve(t){return parseFloat(t.trim())}const _h=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],wh=new Set(_h),q4=t=>t===bh||t===Ze,Gve=new Set(["x","y","z"]),Hve=_h.filter(t=>!Gve.has(t));function Kve(t){const e=[];return Hve.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const mc={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>l1(e,"x"),y:(t,{transform:e})=>l1(e,"y")};mc.translateX=mc.x;mc.translateY=mc.y;const pc=new Set;let u1=!1,c1=!1,d1=!1;function _$(){if(c1){const t=Array.from(pc).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=Kve(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var l;(l=r.getValue(s))==null||l.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}c1=!1,u1=!1,pc.forEach(t=>t.complete(d1)),pc.clear()}function w$(){pc.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(c1=!0)})}function Wve(){d1=!0,w$(),_$(),d1=!1}class WR{constructor(e,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(pc.add(this),u1||(u1=!0,ln.read(w$),ln.resolveKeyframes(_$))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const l=r.readValue(n,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}jve(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),pc.delete(this)}cancel(){this.state==="scheduled"&&(pc.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Yve=t=>t.startsWith("--");function Jve(t,e,n){Yve(e)?t.style.setProperty(e,n):t.style[e]=n}const Qve=OR(()=>window.ScrollTimeline!==void 0),Xve={};function Zve(t,e){const n=OR(t);return()=>Xve[e]??n()}const T$=Zve(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),hp=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,z4={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:hp([0,.65,.55,1]),circOut:hp([.55,0,1,.45]),backIn:hp([.31,.01,.66,-.59]),backOut:hp([.33,1.53,.69,.99])};function E$(t,e){if(t)return typeof t=="function"?T$()?v$(t,e):"ease-out":l$(t)?hp(t):Array.isArray(t)?t.map(n=>E$(n,e)||z4.easeOut):z4[t]}function e0e(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:l="easeOut",times:u}={},d=void 0){const f={[e]:n};u&&(f.offset=u);const m=E$(l,i);Array.isArray(m)&&(f.easing=m);const v={delay:r,duration:i,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return d&&(v.pseudoElement=d),t.animate(f,v)}function S$(t){return typeof t=="function"&&"applyToOptions"in t}function t0e({type:t,...e}){return S$(t)&&T$()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class n0e extends HR{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:l,onComplete:u}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,kR(typeof e.type!="string");const d=t0e(e);this.animation=e0e(n,r,i,d,s),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const f=GR(i,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(f):Jve(n,r,f),this.animation.cancel()}u==null||u(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return ao(Number(e))}get time(){return ao(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=oo(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&Qve()?(this.animation.timeline=e,is):n(this)}}const A$={anticipate:i$,backInOut:r$,circInOut:o$};function r0e(t){return t in A$}function i0e(t){typeof t.ease=="string"&&r0e(t.ease)&&(t.ease=A$[t.ease])}const $4=10;class s0e extends n0e{constructor(e){i0e(e),b$(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const l=new KR({...o,autoplay:!1}),u=oo(this.finishedTime??this.time);n.setWithVelocity(l.sample(u-$4).value,l.sample(u).value,$4),l.stop()}}const G4=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ml.test(t)||t==="0")&&!t.startsWith("url("));function o0e(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function a0e(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=G4(i,e),l=G4(s,e);return!o||!l?!1:o0e(t)||(n==="spring"||S$(n))&&r}function f1(t){t.duration=0,t.type}const l0e=new Set(["opacity","clipPath","filter","transform"]),u0e=OR(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function c0e(t){var f;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=t;if(!(((f=e==null?void 0:e.owner)==null?void 0:f.current)instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:d}=e.owner.getProps();return u0e()&&n&&l0e.has(n)&&(n!=="transform"||!d)&&!u&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const d0e=40;class f0e extends HR{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:l,name:u,motionValue:d,element:f,...m}){var T;super(),this.stop=()=>{var S,A;this._animation&&(this._animation.stop(),(S=this.stopTimeline)==null||S.call(this)),(A=this.keyframeResolver)==null||A.cancel()},this.createdAt=si.now();const v={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:u,motionValue:d,element:f,...m},_=(f==null?void 0:f.KeyframeResolver)||WR;this.keyframeResolver=new _(l,(S,A,I)=>this.onKeyframesResolved(S,A,v,!I),u,d,f),(T=this.keyframeResolver)==null||T.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:l,delay:u,isHandoff:d,onUpdate:f}=r;this.resolvedAt=si.now(),a0e(e,s,o,l)||((la.instantAnimations||!u)&&(f==null||f(GR(e,r,n))),e[0]=e[e.length-1],f1(r),r.repeat=0);const v={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>d0e?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},_=!d&&c0e(v)?new s0e({...v,element:v.motionValue.owner.current}):new KR(v);_.finished.then(()=>this.notifyFinished()).catch(is),this.pendingTimeline&&(this.stopTimeline=_.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=_}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),Wve()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const h0e=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function m0e(t){const e=h0e.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function C$(t,e,n=1){const[r,i]=m0e(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return Y9(o)?parseFloat(o):o}return jR(i)?C$(i,e,n+1):i}function YR(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const I$=new Set(["width","height","top","left","right","bottom",..._h]),p0e={test:t=>t==="auto",parse:t=>t},R$=t=>e=>e.test(t),P$=[bh,Ze,lo,dl,ove,sve,p0e],H4=t=>P$.find(R$(t));function g0e(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Q9(t):!0}const y0e=new Set(["brightness","contrast","saturate","opacity"]);function v0e(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(BR)||[];if(!r)return t;const i=n.replace(r,"");let s=y0e.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const x0e=/\b([a-z-]*)\(.*?\)/gu,h1={...Ml,getAnimatableNone:t=>{const e=t.match(x0e);return e?e.map(v0e).join(" "):t}},K4={...bh,transform:Math.round},b0e={rotate:dl,rotateX:dl,rotateY:dl,rotateZ:dl,scale:Qv,scaleX:Qv,scaleY:Qv,scaleZ:Qv,skew:dl,skewX:dl,skewY:dl,distance:Ze,translateX:Ze,translateY:Ze,translateZ:Ze,x:Ze,y:Ze,z:Ze,perspective:Ze,transformPerspective:Ze,opacity:lg,originX:k4,originY:k4,originZ:Ze},JR={borderWidth:Ze,borderTopWidth:Ze,borderRightWidth:Ze,borderBottomWidth:Ze,borderLeftWidth:Ze,borderRadius:Ze,radius:Ze,borderTopLeftRadius:Ze,borderTopRightRadius:Ze,borderBottomRightRadius:Ze,borderBottomLeftRadius:Ze,width:Ze,maxWidth:Ze,height:Ze,maxHeight:Ze,top:Ze,right:Ze,bottom:Ze,left:Ze,padding:Ze,paddingTop:Ze,paddingRight:Ze,paddingBottom:Ze,paddingLeft:Ze,margin:Ze,marginTop:Ze,marginRight:Ze,marginBottom:Ze,marginLeft:Ze,backgroundPositionX:Ze,backgroundPositionY:Ze,...b0e,zIndex:K4,fillOpacity:lg,strokeOpacity:lg,numOctaves:K4},_0e={...JR,color:On,backgroundColor:On,outlineColor:On,fill:On,stroke:On,borderColor:On,borderTopColor:On,borderRightColor:On,borderBottomColor:On,borderLeftColor:On,filter:h1,WebkitFilter:h1},N$=t=>_0e[t];function M$(t,e){let n=N$(t);return n!==h1&&(n=Ml),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const w0e=new Set(["auto","none","0"]);function T0e(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!w0e.has(s)&&ug(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=M$(n,i)}class E0e extends WR{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let d=e[u];if(typeof d=="string"&&(d=d.trim(),jR(d))){const f=C$(d,n.current);f!==void 0&&(e[u]=f),u===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!I$.has(r)||e.length!==2)return;const[i,s]=e,o=H4(i),l=H4(s);if(o!==l)if(q4(o)&&q4(l))for(let u=0;u<e.length;u++){const d=e[u];typeof d=="string"&&(e[u]=parseFloat(d))}else mc[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||g0e(e[i]))&&r.push(i);r.length&&T0e(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=mc[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var l;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=mc[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([u,d])=>{e.getValue(u).set(d)}),this.resolveNoneKeyframes()}}function S0e(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const D$=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function k$(t){return J9(t)&&"offsetHeight"in t}const W4=30,A0e=t=>!isNaN(parseFloat(t));class C0e{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=si.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=si.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=A0e(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new VR);const r=this.events[e].add(n);return e==="change"?()=>{r(),ln.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=si.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>W4)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,W4);return X9(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Uf(t,e){return new C0e(t,e)}const{schedule:QR}=u$(queueMicrotask,!1),vs={x:!1,y:!1};function O$(){return vs.x||vs.y}function I0e(t){return t==="x"||t==="y"?vs[t]?null:(vs[t]=!0,()=>{vs[t]=!1}):vs.x||vs.y?null:(vs.x=vs.y=!0,()=>{vs.x=vs.y=!1})}function V$(t,e){const n=S0e(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function Y4(t){return!(t.pointerType==="touch"||O$())}function R0e(t,e,n={}){const[r,i,s]=V$(t,n),o=l=>{if(!Y4(l))return;const{target:u}=l,d=e(u,l);if(typeof d!="function"||!u)return;const f=m=>{Y4(m)&&(d(m),u.removeEventListener("pointerleave",f))};u.addEventListener("pointerleave",f,i)};return r.forEach(l=>{l.addEventListener("pointerenter",o,i)}),s}const L$=(t,e)=>e?t===e?!0:L$(t,e.parentElement):!1,XR=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,P0e=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function N0e(t){return P0e.has(t.tagName)||t.tabIndex!==-1}const v0=new WeakSet;function J4(t){return e=>{e.key==="Enter"&&t(e)}}function AS(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const M0e=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=J4(()=>{if(v0.has(n))return;AS(n,"down");const i=J4(()=>{AS(n,"up")}),s=()=>AS(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function Q4(t){return XR(t)&&!O$()}function D0e(t,e,n={}){const[r,i,s]=V$(t,n),o=l=>{const u=l.currentTarget;if(!Q4(l))return;v0.add(u);const d=e(u,l),f=(_,T)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",v),v0.has(u)&&v0.delete(u),Q4(_)&&typeof d=="function"&&d(_,{success:T})},m=_=>{f(_,u===window||u===document||n.useGlobalTarget||L$(u,_.target))},v=_=>{f(_,!1)};window.addEventListener("pointerup",m,i),window.addEventListener("pointercancel",v,i)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",o,i),k$(l)&&(l.addEventListener("focus",d=>M0e(d,i)),!N0e(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),s}function U$(t){return J9(t)&&"ownerSVGElement"in t}function k0e(t){return U$(t)&&t.tagName==="svg"}const Vr=t=>!!(t&&t.getVelocity),O0e=[...P$,On,Ml],V0e=t=>O0e.find(R$(t)),ZR=P.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class L0e extends P.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=k$(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function U0e({children:t,isPresent:e,anchorX:n,root:r}){const i=P.useId(),s=P.useRef(null),o=P.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=P.useContext(ZR);return P.useInsertionEffect(()=>{const{width:u,height:d,top:f,left:m,right:v}=o.current;if(e||!s.current||!u||!d)return;const _=n==="left"?`left: ${m}`:`right: ${v}`;s.current.dataset.motionPopId=i;const T=document.createElement("style");l&&(T.nonce=l);const S=r??document.head;return S.appendChild(T),T.sheet&&T.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${d}px !important;
            ${_}px !important;
            top: ${f}px !important;
          }
        `),()=>{S.contains(T)&&S.removeChild(T)}},[e]),x.jsx(L0e,{isPresent:e,childRef:s,sizeRef:o,children:P.cloneElement(t,{ref:s})})}const F0e=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:l,root:u})=>{const d=PR(j0e),f=P.useId();let m=!0,v=P.useMemo(()=>(m=!1,{id:f,initial:e,isPresent:n,custom:i,onExitComplete:_=>{d.set(_,!0);for(const T of d.values())if(!T)return;r&&r()},register:_=>(d.set(_,!1),()=>d.delete(_))}),[n,d,r]);return s&&m&&(v={...v}),P.useMemo(()=>{d.forEach((_,T)=>d.set(T,!1))},[n]),P.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),o==="popLayout"&&(t=x.jsx(U0e,{isPresent:n,anchorX:l,root:u,children:t})),x.jsx(Fb.Provider,{value:v,children:t})};function j0e(){return new Map}function F$(t=!0){const e=P.useContext(Fb);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=P.useId();P.useEffect(()=>{if(t)return i(s)},[t]);const o=P.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const Xv=t=>t.key||"";function X4(t){const e=[];return P.Children.forEach(t,n=>{P.isValidElement(n)&&e.push(n)}),e}const Dl=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:l="left",root:u})=>{const[d,f]=F$(o),m=P.useMemo(()=>X4(t),[t]),v=o&&!d?[]:m.map(Xv),_=P.useRef(!0),T=P.useRef(m),S=PR(()=>new Map),[A,I]=P.useState(m),[D,N]=P.useState(m);W9(()=>{_.current=!1,T.current=m;for(let q=0;q<D.length;q++){const M=Xv(D[q]);v.includes(M)?S.delete(M):S.get(M)!==!0&&S.set(M,!1)}},[D,v.length,v.join("-")]);const U=[];if(m!==A){let q=[...m];for(let M=0;M<D.length;M++){const R=D[M],k=Xv(R);v.includes(k)||(q.splice(M,0,R),U.push(R))}return s==="wait"&&U.length&&(q=U),N(X4(q)),I(m),null}const{forceRender:O}=P.useContext(RR);return x.jsx(x.Fragment,{children:D.map(q=>{const M=Xv(q),R=o&&!d?!1:m===D||v.includes(M),k=()=>{if(S.has(M))S.set(M,!0);else return;let F=!0;S.forEach(j=>{j||(F=!1)}),F&&(O==null||O(),N(T.current),o&&(f==null||f()),r&&r())};return x.jsx(F0e,{isPresent:R,initial:!_.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:u,onExitComplete:R?void 0:k,anchorX:l,children:q},M)})})},j$=P.createContext({strict:!1}),Z4={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ff={};for(const t in Z4)Ff[t]={isEnabled:e=>Z4[t].some(n=>!!e[n])};function B0e(t){for(const e in t)Ff[e]={...Ff[e],...t[e]}}const q0e=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ix(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||q0e.has(t)}let B$=t=>!Ix(t);function z0e(t){typeof t=="function"&&(B$=e=>e.startsWith("on")?!Ix(e):t(e))}try{z0e(require("@emotion/is-prop-valid").default)}catch{}function $0e(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(B$(i)||n===!0&&Ix(i)||!e&&!Ix(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const jb=P.createContext({});function Bb(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function cg(t){return typeof t=="string"||Array.isArray(t)}const eP=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],tP=["initial",...eP];function qb(t){return Bb(t.animate)||tP.some(e=>cg(t[e]))}function q$(t){return!!(qb(t)||t.variants)}function G0e(t,e){if(qb(t)){const{initial:n,animate:r}=t;return{initial:n===!1||cg(n)?n:void 0,animate:cg(r)?r:void 0}}return t.inherit!==!1?e:{}}function H0e(t){const{initial:e,animate:n}=G0e(t,P.useContext(jb));return P.useMemo(()=>({initial:e,animate:n}),[e3(e),e3(n)])}function e3(t){return Array.isArray(t)?t.join(" "):t}const dg={};function K0e(t){for(const e in t)dg[e]=t[e],FR(e)&&(dg[e].isCSSVariable=!0)}function z$(t,{layout:e,layoutId:n}){return wh.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!dg[t]||t==="opacity")}const W0e={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Y0e=_h.length;function J0e(t,e,n){let r="",i=!0;for(let s=0;s<Y0e;s++){const o=_h[s],l=t[o];if(l===void 0)continue;let u=!0;if(typeof l=="number"?u=l===(o.startsWith("scale")?1:0):u=parseFloat(l)===0,!u||n){const d=D$(l,JR[o]);if(!u){i=!1;const f=W0e[o]||o;r+=`${f}(${d}) `}n&&(e[o]=d)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function nP(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,l=!1;for(const u in e){const d=e[u];if(wh.has(u)){o=!0;continue}else if(FR(u)){i[u]=d;continue}else{const f=D$(d,JR[u]);u.startsWith("origin")?(l=!0,s[u]=f):r[u]=f}}if(e.transform||(o||n?r.transform=J0e(e,t.transform,n):r.transform&&(r.transform="none")),l){const{originX:u="50%",originY:d="50%",originZ:f=0}=s;r.transformOrigin=`${u} ${d} ${f}`}}const rP=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function $$(t,e,n){for(const r in e)!Vr(e[r])&&!z$(r,n)&&(t[r]=e[r])}function Q0e({transformTemplate:t},e){return P.useMemo(()=>{const n=rP();return nP(n,e,t),Object.assign({},n.vars,n.style)},[e])}function X0e(t,e){const n=t.style||{},r={};return $$(r,n,t),Object.assign(r,Q0e(t,e)),r}function Z0e(t,e){const n={},r=X0e(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const exe={offset:"stroke-dashoffset",array:"stroke-dasharray"},txe={offset:"strokeDashoffset",array:"strokeDasharray"};function nxe(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?exe:txe;t[s.offset]=Ze.transform(-r);const o=Ze.transform(e),l=Ze.transform(n);t[s.array]=`${o} ${l}`}function G$(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...l},u,d,f){if(nP(t,l,d),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:v}=t;m.transform&&(v.transform=m.transform,delete m.transform),(v.transform||m.transformOrigin)&&(v.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),v.transform&&(v.transformBox=(f==null?void 0:f.transformBox)??"fill-box",delete m.transformBox),e!==void 0&&(m.x=e),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),i!==void 0&&nxe(m,i,s,o,!1)}const H$=()=>({...rP(),attrs:{}}),K$=t=>typeof t=="string"&&t.toLowerCase()==="svg";function rxe(t,e,n,r){const i=P.useMemo(()=>{const s=H$();return G$(s,e,K$(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};$$(s,t.style,t),i.style={...s,...i.style}}return i}const ixe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function iP(t){return typeof t!="string"||t.includes("-")?!1:!!(ixe.indexOf(t)>-1||/[A-Z]/u.test(t))}function sxe(t,e,n,{latestValues:r},i,s=!1){const l=(iP(t)?rxe:Z0e)(e,r,i,t),u=$0e(e,typeof t=="string",s),d=t!==P.Fragment?{...u,...l,ref:n}:{},{children:f}=e,m=P.useMemo(()=>Vr(f)?f.get():f,[f]);return P.createElement(t,{...d,children:m})}function t3(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function sP(t,e,n,r){if(typeof e=="function"){const[i,s]=t3(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=t3(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function x0(t){return Vr(t)?t.get():t}function oxe({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:axe(n,r,i,t),renderState:e()}}function axe(t,e,n,r){const i={},s=r(t,{});for(const v in s)i[v]=x0(s[v]);let{initial:o,animate:l}=t;const u=qb(t),d=q$(t);e&&d&&!u&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let f=n?n.initial===!1:!1;f=f||o===!1;const m=f?l:o;if(m&&typeof m!="boolean"&&!Bb(m)){const v=Array.isArray(m)?m:[m];for(let _=0;_<v.length;_++){const T=sP(t,v[_]);if(T){const{transitionEnd:S,transition:A,...I}=T;for(const D in I){let N=I[D];if(Array.isArray(N)){const U=f?N.length-1:0;N=N[U]}N!==null&&(i[D]=N)}for(const D in S)i[D]=S[D]}}}return i}const W$=t=>(e,n)=>{const r=P.useContext(jb),i=P.useContext(Fb),s=()=>oxe(t,e,r,i);return n?s():PR(s)};function oP(t,e,n){var s;const{style:r}=t,i={};for(const o in r)(Vr(r[o])||e.style&&Vr(e.style[o])||z$(o,t)||((s=n==null?void 0:n.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(i[o]=r[o]);return i}const lxe=W$({scrapeMotionValuesFromProps:oP,createRenderState:rP});function Y$(t,e,n){const r=oP(t,e,n);for(const i in t)if(Vr(t[i])||Vr(e[i])){const s=_h.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const uxe=W$({scrapeMotionValuesFromProps:Y$,createRenderState:H$}),cxe=Symbol.for("motionComponentSymbol");function lf(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function dxe(t,e,n){return P.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):lf(n)&&(n.current=r))},[e])}const aP=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),fxe="framerAppearId",J$="data-"+aP(fxe),Q$=P.createContext({});function hxe(t,e,n,r,i){var S,A;const{visualElement:s}=P.useContext(jb),o=P.useContext(j$),l=P.useContext(Fb),u=P.useContext(ZR).reducedMotion,d=P.useRef(null);r=r||o.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:s,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:u}));const f=d.current,m=P.useContext(Q$);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&mxe(d.current,n,i,m);const v=P.useRef(!1);P.useInsertionEffect(()=>{f&&v.current&&f.update(n,l)});const _=n[J$],T=P.useRef(!!_&&!((S=window.MotionHandoffIsComplete)!=null&&S.call(window,_))&&((A=window.MotionHasOptimisedAnimation)==null?void 0:A.call(window,_)));return W9(()=>{f&&(v.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),T.current&&f.animationState&&f.animationState.animateChanges())}),P.useEffect(()=>{f&&(!T.current&&f.animationState&&f.animationState.animateChanges(),T.current&&(queueMicrotask(()=>{var I;(I=window.MotionHandoffMarkAsComplete)==null||I.call(window,_)}),T.current=!1),f.enteringChildren=void 0)}),f}function mxe(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:l,layoutScroll:u,layoutRoot:d,layoutCrossfade:f}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:X$(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||l&&lf(l),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:f,layoutScroll:u,layoutRoot:d})}function X$(t){if(t)return t.options.allowProjection!==!1?t.projection:X$(t.parent)}function CS(t,{forwardMotionProps:e=!1}={},n,r){n&&B0e(n);const i=iP(t)?uxe:lxe;function s(l,u){let d;const f={...P.useContext(ZR),...l,layoutId:pxe(l)},{isStatic:m}=f,v=H0e(l),_=i(l,m);if(!m&&NR){gxe();const T=yxe(f);d=T.MeasureLayout,v.visualElement=hxe(t,_,f,r,T.ProjectionNode)}return x.jsxs(jb.Provider,{value:v,children:[d&&v.visualElement?x.jsx(d,{visualElement:v.visualElement,...f}):null,sxe(t,l,dxe(_,v.visualElement,u),_,m,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=P.forwardRef(s);return o[cxe]=t,o}function pxe({layoutId:t}){const e=P.useContext(RR).id;return e&&t!==void 0?e+"-"+t:t}function gxe(t,e){P.useContext(j$).strict}function yxe(t){const{drag:e,layout:n}=Ff;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function vxe(t,e){if(typeof Proxy>"u")return CS;const n=new Map,r=(s,o)=>CS(s,o,t,e),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,CS(o,void 0,t,e)),n.get(o))})}function Z$({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function xxe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function bxe(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function IS(t){return t===void 0||t===1}function m1({scale:t,scaleX:e,scaleY:n}){return!IS(t)||!IS(e)||!IS(n)}function qu(t){return m1(t)||eG(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function eG(t){return n3(t.x)||n3(t.y)}function n3(t){return t&&t!=="0%"}function Rx(t,e,n){const r=t-n,i=e*r;return n+i}function r3(t,e,n,r,i){return i!==void 0&&(t=Rx(t,i,r)),Rx(t,n,r)+e}function p1(t,e=0,n=1,r,i){t.min=r3(t.min,e,n,r,i),t.max=r3(t.max,e,n,r,i)}function tG(t,{x:e,y:n}){p1(t.x,e.translate,e.scale,e.originPoint),p1(t.y,n.translate,n.scale,n.originPoint)}const i3=.999999999999,s3=1.0000000000001;function _xe(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let l=0;l<i;l++){s=n[l],o=s.projectionDelta;const{visualElement:u}=s.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&cf(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,tG(t,o)),r&&qu(s.latestValues)&&cf(t,s.latestValues))}e.x<s3&&e.x>i3&&(e.x=1),e.y<s3&&e.y>i3&&(e.y=1)}function uf(t,e){t.min=t.min+e,t.max=t.max+e}function o3(t,e,n,r,i=.5){const s=hn(t.min,t.max,i);p1(t,e,n,s,r)}function cf(t,e){o3(t.x,e.x,e.scaleX,e.scale,e.originX),o3(t.y,e.y,e.scaleY,e.scale,e.originY)}function nG(t,e){return Z$(bxe(t.getBoundingClientRect(),e))}function wxe(t,e,n){const r=nG(t,n),{scroll:i}=e;return i&&(uf(r.x,i.offset.x),uf(r.y,i.offset.y)),r}const a3=()=>({translate:0,scale:1,origin:0,originPoint:0}),df=()=>({x:a3(),y:a3()}),l3=()=>({min:0,max:0}),An=()=>({x:l3(),y:l3()}),g1={current:null},rG={current:!1};function Txe(){if(rG.current=!0,!!NR)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>g1.current=t.matches;t.addEventListener("change",e),e()}else g1.current=!1}const Exe=new WeakMap;function Sxe(t,e,n){for(const r in e){const i=e[r],s=n[r];if(Vr(i))t.addValue(r,i);else if(Vr(s))t.addValue(r,Uf(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Uf(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const u3=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Axe{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=WR,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=si.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,ln.render(this.render,!1,!0))};const{latestValues:u,renderState:d}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=qb(n),this.isVariantNode=q$(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const v in m){const _=m[v];u[v]!==void 0&&Vr(_)&&_.set(u[v])}}mount(e){var n;this.current=e,Exe.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),rG.current||Txe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:g1.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Nl(this.notifyUpdate),Nl(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=wh.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&ln.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ff){const n=Ff[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):An()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<u3.length;r++){const i=u3[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=Sxe(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Uf(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(Y9(r)||Q9(r))?r=parseFloat(r):!V0e(r)&&Ml.test(n)&&(r=M$(e,n)),this.setBaseTarget(e,Vr(r)?r.get():r)),Vr(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=sP(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Vr(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new VR),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){QR.render(this.render)}}class iG extends Axe{constructor(){super(...arguments),this.KeyframeResolver=E0e}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Vr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function sG(t,{style:e,vars:n},r,i){const s=t.style;let o;for(o in e)s[o]=e[o];i==null||i.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function Cxe(t){return window.getComputedStyle(t)}class Ixe extends iG{constructor(){super(...arguments),this.type="html",this.renderInstance=sG}readValueFromInstance(e,n){var r;if(wh.has(n))return(r=this.projection)!=null&&r.isProjecting?a1(n):zve(e,n);{const i=Cxe(e),s=(FR(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return nG(e,n)}build(e,n,r){nP(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return oP(e,n,r)}}const oG=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Rxe(t,e,n,r){sG(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(oG.has(i)?i:aP(i),e.attrs[i])}class Pxe extends iG{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=An}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(wh.has(n)){const r=N$(n);return r&&r.default||0}return n=oG.has(n)?n:aP(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return Y$(e,n,r)}build(e,n,r){G$(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){Rxe(e,n,r,i)}mount(e){this.isSVGTag=K$(e.tagName),super.mount(e)}}const Nxe=(t,e)=>iP(t)?new Pxe(e):new Ixe(e,{allowProjection:t!==P.Fragment});function bf(t,e,n){const r=t.getProps();return sP(r,e,n!==void 0?n:r.custom,t)}const y1=t=>Array.isArray(t);function Mxe(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Uf(n))}function Dxe(t){return y1(t)?t[t.length-1]||0:t}function kxe(t,e){const n=bf(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const l=Dxe(s[o]);Mxe(t,o,l)}}function Oxe(t){return!!(Vr(t)&&t.add)}function v1(t,e){const n=t.getValue("willChange");if(Oxe(n))return n.add(e);if(!n&&la.WillChange){const r=new la.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function aG(t){return t.props[J$]}const Vxe=t=>t!==null;function Lxe(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(Vxe),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}const Uxe={type:"spring",stiffness:500,damping:25,restSpeed:10},Fxe=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),jxe={type:"keyframes",duration:.8},Bxe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},qxe=(t,{keyframes:e})=>e.length>2?jxe:wh.has(t)?t.startsWith("scale")?Fxe(e[1]):Uxe:Bxe;function zxe({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:l,from:u,elapsed:d,...f}){return!!Object.keys(f).length}const lP=(t,e,n,r={},i,s)=>o=>{const l=YR(r,t)||{},u=l.delay||r.delay||0;let{elapsed:d=0}=r;d=d-oo(u);const f={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-d,onUpdate:v=>{e.set(v),l.onUpdate&&l.onUpdate(v)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:s?void 0:i};zxe(l)||Object.assign(f,qxe(t,f)),f.duration&&(f.duration=oo(f.duration)),f.repeatDelay&&(f.repeatDelay=oo(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let m=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(f1(f),f.delay===0&&(m=!0)),(la.instantAnimations||la.skipAnimations)&&(m=!0,f1(f),f.delay=0),f.allowFlatten=!l.type&&!l.ease,m&&!s&&e.get()!==void 0){const v=Lxe(f.keyframes,l);if(v!==void 0){ln.update(()=>{f.onUpdate(v),f.onComplete()});return}}return l.isSync?new KR(f):new f0e(f)};function $xe({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function lG(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...l}=e;r&&(s=r);const u=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const f in l){const m=t.getValue(f,t.latestValues[f]??null),v=l[f];if(v===void 0||d&&$xe(d,f))continue;const _={delay:n,...YR(s||{},f)},T=m.get();if(T!==void 0&&!m.isAnimating&&!Array.isArray(v)&&v===T&&!_.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const I=aG(t);if(I){const D=window.MotionHandoffAnimation(I,f,ln);D!==null&&(_.startTime=D,S=!0)}}v1(t,f),m.start(lP(f,m,v,t.shouldReduceMotion&&I$.has(f)?{type:!1}:_,t,S));const A=m.animation;A&&u.push(A)}return o&&Promise.all(u).then(()=>{ln.update(()=>{o&&kxe(t,o)})}),u}function uG(t,e,n,r=0,i=1){const s=Array.from(t).sort((d,f)=>d.sortNodePosition(f)).indexOf(e),o=t.size,l=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:l-s*r}function x1(t,e,n={}){var u;const r=bf(t,e,n.type==="exit"?(u=t.presenceContext)==null?void 0:u.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(lG(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:f=0,staggerChildren:m,staggerDirection:v}=i;return Gxe(t,e,d,f,m,v,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[d,f]=l==="beforeChildren"?[s,o]:[o,s];return d().then(()=>f())}else return Promise.all([s(),o(n.delay)])}function Gxe(t,e,n=0,r=0,i=0,s=1,o){const l=[];for(const u of t.variantChildren)u.notify("AnimationStart",e),l.push(x1(u,e,{...o,delay:n+(typeof r=="function"?0:r)+uG(t.variantChildren,u,r,i,s)}).then(()=>u.notify("AnimationComplete",e)));return Promise.all(l)}function Hxe(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>x1(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=x1(t,e,n);else{const i=typeof e=="function"?bf(t,e,n.custom):e;r=Promise.all(lG(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function cG(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const Kxe=tP.length;function dG(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?dG(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Kxe;n++){const r=tP[n],i=t.props[r];(cg(i)||i===!1)&&(e[r]=i)}return e}const Wxe=[...eP].reverse(),Yxe=eP.length;function Jxe(t){return e=>Promise.all(e.map(({animation:n,options:r})=>Hxe(t,n,r)))}function Qxe(t){let e=Jxe(t),n=c3(),r=!0;const i=u=>(d,f)=>{var v;const m=bf(t,f,u==="exit"?(v=t.presenceContext)==null?void 0:v.custom:void 0);if(m){const{transition:_,transitionEnd:T,...S}=m;d={...d,...S,...T}}return d};function s(u){e=u(t)}function o(u){const{props:d}=t,f=dG(t.parent)||{},m=[],v=new Set;let _={},T=1/0;for(let A=0;A<Yxe;A++){const I=Wxe[A],D=n[I],N=d[I]!==void 0?d[I]:f[I],U=cg(N),O=I===u?D.isActive:null;O===!1&&(T=A);let q=N===f[I]&&N!==d[I]&&U;if(q&&r&&t.manuallyAnimateOnMount&&(q=!1),D.protectedKeys={..._},!D.isActive&&O===null||!N&&!D.prevProp||Bb(N)||typeof N=="boolean")continue;const M=Xxe(D.prevProp,N);let R=M||I===u&&D.isActive&&!q&&U||A>T&&U,k=!1;const F=Array.isArray(N)?N:[N];let j=F.reduce(i(I),{});O===!1&&(j={});const{prevResolvedValues:G={}}=D,$={...G,...j},de=se=>{R=!0,v.has(se)&&(k=!0,v.delete(se)),D.needsAnimating[se]=!0;const Q=t.getValue(se);Q&&(Q.liveStyle=!1)};for(const se in $){const Q=j[se],_e=G[se];if(_.hasOwnProperty(se))continue;let H=!1;y1(Q)&&y1(_e)?H=!cG(Q,_e):H=Q!==_e,H?Q!=null?de(se):v.add(se):Q!==void 0&&v.has(se)?de(se):D.protectedKeys[se]=!0}D.prevProp=N,D.prevResolvedValues=j,D.isActive&&(_={..._,...j}),r&&t.blockInitialAnimation&&(R=!1);const ve=q&&M;R&&(!ve||k)&&m.push(...F.map(se=>{const Q={type:I};if(typeof se=="string"&&r&&!ve&&t.manuallyAnimateOnMount&&t.parent){const{parent:_e}=t,H=bf(_e,se);if(_e.enteringChildren&&H){const{delayChildren:ae}=H.transition||{};Q.delay=uG(_e.enteringChildren,t,ae)}}return{animation:se,options:Q}}))}if(v.size){const A={};if(typeof d.initial!="boolean"){const I=bf(t,Array.isArray(d.initial)?d.initial[0]:d.initial);I&&I.transition&&(A.transition=I.transition)}v.forEach(I=>{const D=t.getBaseTarget(I),N=t.getValue(I);N&&(N.liveStyle=!0),A[I]=D??null}),m.push({animation:A})}let S=!!m.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(S=!1),r=!1,S?e(m):Promise.resolve()}function l(u,d){var m;if(n[u].isActive===d)return Promise.resolve();(m=t.variantChildren)==null||m.forEach(v=>{var _;return(_=v.animationState)==null?void 0:_.setActive(u,d)}),n[u].isActive=d;const f=o(u);for(const v in n)n[v].protectedKeys={};return f}return{animateChanges:o,setActive:l,setAnimateFunction:s,getState:()=>n,reset:()=>{n=c3(),r=!0}}}function Xxe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!cG(e,t):!1}function Ou(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function c3(){return{animate:Ou(!0),whileInView:Ou(),whileHover:Ou(),whileTap:Ou(),whileDrag:Ou(),whileFocus:Ou(),exit:Ou()}}class Ql{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Zxe extends Ql{constructor(e){super(e),e.animationState||(e.animationState=Qxe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Bb(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let ebe=0;class tbe extends Ql{constructor(){super(...arguments),this.id=ebe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const nbe={animation:{Feature:Zxe},exit:{Feature:tbe}};function fg(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Xg(t){return{point:{x:t.pageX,y:t.pageY}}}const rbe=t=>e=>XR(e)&&t(e,Xg(e));function Pp(t,e,n,r){return fg(t,e,rbe(n),r)}const fG=1e-4,ibe=1-fG,sbe=1+fG,hG=.01,obe=0-hG,abe=0+hG;function Kr(t){return t.max-t.min}function lbe(t,e,n){return Math.abs(t-e)<=n}function d3(t,e,n,r=.5){t.origin=r,t.originPoint=hn(e.min,e.max,t.origin),t.scale=Kr(n)/Kr(e),t.translate=hn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=ibe&&t.scale<=sbe||isNaN(t.scale))&&(t.scale=1),(t.translate>=obe&&t.translate<=abe||isNaN(t.translate))&&(t.translate=0)}function Np(t,e,n,r){d3(t.x,e.x,n.x,r?r.originX:void 0),d3(t.y,e.y,n.y,r?r.originY:void 0)}function f3(t,e,n){t.min=n.min+e.min,t.max=t.min+Kr(e)}function ube(t,e,n){f3(t.x,e.x,n.x),f3(t.y,e.y,n.y)}function h3(t,e,n){t.min=e.min-n.min,t.max=t.min+Kr(e)}function Mp(t,e,n){h3(t.x,e.x,n.x),h3(t.y,e.y,n.y)}function Zi(t){return[t("x"),t("y")]}const mG=({current:t})=>t?t.ownerDocument.defaultView:null,m3=(t,e)=>Math.abs(t-e);function cbe(t,e){const n=m3(t.x,e.x),r=m3(t.y,e.y);return Math.sqrt(n**2+r**2)}class pG{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=PS(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,T=cbe(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!_&&!T)return;const{point:S}=v,{timestamp:A}=xr;this.history.push({...S,timestamp:A});const{onStart:I,onMove:D}=this.handlers;_||(I&&I(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),D&&D(this.lastMoveEvent,v)},this.handlePointerMove=(v,_)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=RS(_,this.transformPagePoint),ln.update(this.updatePoint,!0)},this.handlePointerUp=(v,_)=>{this.end();const{onEnd:T,onSessionEnd:S,resumeAnimation:A}=this.handlers;if(this.dragSnapToOrigin&&A&&A(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const I=PS(v.type==="pointercancel"?this.lastMoveEventInfo:RS(_,this.transformPagePoint),this.history);this.startEvent&&T&&T(v,I),S&&S(v,I)},!XR(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const l=Xg(e),u=RS(l,this.transformPagePoint),{point:d}=u,{timestamp:f}=xr;this.history=[{...d,timestamp:f}];const{onSessionStart:m}=n;m&&m(e,PS(u,this.history)),this.removeListeners=Yg(Pp(this.contextWindow,"pointermove",this.handlePointerMove),Pp(this.contextWindow,"pointerup",this.handlePointerUp),Pp(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Nl(this.updatePoint)}}function RS(t,e){return e?{point:e(t.point)}:t}function p3(t,e){return{x:t.x-e.x,y:t.y-e.y}}function PS({point:t},e){return{point:t,delta:p3(t,gG(e)),offset:p3(t,dbe(e)),velocity:fbe(e,.1)}}function dbe(t){return t[0]}function gG(t){return t[t.length-1]}function fbe(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=gG(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>oo(e)));)n--;if(!r)return{x:0,y:0};const s=ao(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function hbe(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?hn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?hn(n,t,r.max):Math.min(t,n)),t}function g3(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function mbe(t,{top:e,left:n,bottom:r,right:i}){return{x:g3(t.x,n,i),y:g3(t.y,e,r)}}function y3(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function pbe(t,e){return{x:y3(t.x,e.x),y:y3(t.y,e.y)}}function gbe(t,e){let n=.5;const r=Kr(t),i=Kr(e);return i>r?n=ag(e.min,e.max-r,t.min):r>i&&(n=ag(t.min,t.max-i,e.min)),aa(0,1,n)}function ybe(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const b1=.35;function vbe(t=b1){return t===!1?t=0:t===!0&&(t=b1),{x:v3(t,"left","right"),y:v3(t,"top","bottom")}}function v3(t,e,n){return{min:x3(t,e),max:x3(t,n)}}function x3(t,e){return typeof t=="number"?t:t[e]||0}const xbe=new WeakMap;class bbe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=An(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=m=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Xg(m).point)},o=(m,v)=>{const{drag:_,dragPropagation:T,onDragStart:S}=this.getProps();if(_&&!T&&(this.openDragLock&&this.openDragLock(),this.openDragLock=I0e(_),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Zi(I=>{let D=this.getAxisMotionValue(I).get()||0;if(lo.test(D)){const{projection:N}=this.visualElement;if(N&&N.layout){const U=N.layout.layoutBox[I];U&&(D=Kr(U)*(parseFloat(D)/100))}}this.originPoint[I]=D}),S&&ln.postRender(()=>S(m,v)),v1(this.visualElement,"transform");const{animationState:A}=this.visualElement;A&&A.setActive("whileDrag",!0)},l=(m,v)=>{this.latestPointerEvent=m,this.latestPanInfo=v;const{dragPropagation:_,dragDirectionLock:T,onDirectionLock:S,onDrag:A}=this.getProps();if(!_&&!this.openDragLock)return;const{offset:I}=v;if(T&&this.currentDirection===null){this.currentDirection=_be(I),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",v.point,I),this.updateAxis("y",v.point,I),this.visualElement.render(),A&&A(m,v)},u=(m,v)=>{this.latestPointerEvent=m,this.latestPanInfo=v,this.stop(m,v),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>Zi(m=>{var v;return this.getAnimationState(m)==="paused"&&((v=this.getAxisMotionValue(m).animation)==null?void 0:v.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new pG(e,{onSessionStart:s,onStart:o,onMove:l,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:r,contextWindow:mG(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&ln.postRender(()=>l(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Zv(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=hbe(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&lf(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=mbe(r.layoutBox,e):this.constraints=!1,this.elastic=vbe(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Zi(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=ybe(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!lf(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=wxe(r,i.root,this.visualElement.getTransformPagePoint());let o=pbe(i.layout.layoutBox,s);if(n){const l=n(xxe(o));this.hasMutatedConstraints=!!l,l&&(o=Z$(l))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),u=this.constraints||{},d=Zi(f=>{if(!Zv(f,n,this.currentDirection))return;let m=u&&u[f]||{};o&&(m={min:0,max:0});const v=i?200:1e6,_=i?40:1e7,T={type:"inertia",velocity:r?e[f]:0,bounceStiffness:v,bounceDamping:_,timeConstant:750,restDelta:1,restSpeed:10,...s,...m};return this.startAxisValueAnimation(f,T)});return Promise.all(d).then(l)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return v1(this.visualElement,e),r.start(lP(e,r,0,n,this.visualElement,!1))}stopAnimation(){Zi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Zi(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Zi(n=>{const{drag:r}=this.getProps();if(!Zv(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[n];s.set(e[n]-hn(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!lf(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Zi(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const u=l.get();i[o]=gbe({min:u,max:u},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Zi(o=>{if(!Zv(o,e,null))return;const l=this.getAxisMotionValue(o),{min:u,max:d}=this.constraints[o];l.set(hn(u,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;xbe.set(this.visualElement,this);const e=this.visualElement.current,n=Pp(e,"pointerdown",u=>{const{drag:d,dragListener:f=!0}=this.getProps();d&&f&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();lf(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),ln.read(r);const o=fg(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(Zi(f=>{const m=this.getAxisMotionValue(f);m&&(this.originPoint[f]+=u[f].translate,m.set(m.get()+u[f].translate))}),this.visualElement.render())}));return()=>{o(),n(),s(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=b1,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:l}}}function Zv(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function _be(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class wbe extends Ql{constructor(e){super(e),this.removeGroupControls=is,this.removeListeners=is,this.controls=new bbe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||is}unmount(){this.removeGroupControls(),this.removeListeners()}}const b3=t=>(e,n)=>{t&&ln.postRender(()=>t(e,n))};class Tbe extends Ql{constructor(){super(...arguments),this.removePointerDownListener=is}onPointerDown(e){this.session=new pG(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:mG(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:b3(e),onStart:b3(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&ln.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Pp(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const b0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function _3(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ep={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ze.test(t))t=parseFloat(t);else return t;const n=_3(t,e.target.x),r=_3(t,e.target.y);return`${n}% ${r}%`}},Ebe={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Ml.parse(t);if(i.length>5)return r;const s=Ml.createTransformer(t),o=typeof i[0]!="number"?1:0,l=n.x.scale*e.x,u=n.y.scale*e.y;i[0+o]/=l,i[1+o]/=u;const d=hn(l,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),s(i)}};let NS=!1;class Sbe extends P.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;K0e(Abe),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),NS&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),b0.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,NS=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||ln.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),QR.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;NS=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function yG(t){const[e,n]=F$(),r=P.useContext(RR);return x.jsx(Sbe,{...t,layoutGroup:r,switchLayoutGroup:P.useContext(Q$),isPresent:e,safeToRemove:n})}const Abe={borderRadius:{...ep,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ep,borderTopRightRadius:ep,borderBottomLeftRadius:ep,borderBottomRightRadius:ep,boxShadow:Ebe};function Cbe(t,e,n){const r=Vr(t)?t:Uf(t);return r.start(lP("",r,e,n)),r.animation}const Ibe=(t,e)=>t.depth-e.depth;class Rbe{constructor(){this.children=[],this.isDirty=!1}add(e){MR(this.children,e),this.isDirty=!0}remove(e){DR(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Ibe),this.isDirty=!1,this.children.forEach(e)}}function Pbe(t,e){const n=si.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(Nl(r),t(s-e))};return ln.setup(r,!0),()=>Nl(r)}const vG=["TopLeft","TopRight","BottomLeft","BottomRight"],Nbe=vG.length,w3=t=>typeof t=="string"?parseFloat(t):t,T3=t=>typeof t=="number"||Ze.test(t);function Mbe(t,e,n,r,i,s){i?(t.opacity=hn(0,n.opacity??1,Dbe(r)),t.opacityExit=hn(e.opacity??1,0,kbe(r))):s&&(t.opacity=hn(e.opacity??1,n.opacity??1,r));for(let o=0;o<Nbe;o++){const l=`border${vG[o]}Radius`;let u=E3(e,l),d=E3(n,l);if(u===void 0&&d===void 0)continue;u||(u=0),d||(d=0),u===0||d===0||T3(u)===T3(d)?(t[l]=Math.max(hn(w3(u),w3(d),r),0),(lo.test(d)||lo.test(u))&&(t[l]+="%")):t[l]=d}(e.rotate||n.rotate)&&(t.rotate=hn(e.rotate||0,n.rotate||0,r))}function E3(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Dbe=xG(0,.5,s$),kbe=xG(.5,.95,is);function xG(t,e,n){return r=>r<t?0:r>e?1:n(ag(t,e,r))}function S3(t,e){t.min=e.min,t.max=e.max}function Qi(t,e){S3(t.x,e.x),S3(t.y,e.y)}function A3(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function C3(t,e,n,r,i){return t-=e,t=Rx(t,1/n,r),i!==void 0&&(t=Rx(t,1/i,r)),t}function Obe(t,e=0,n=1,r=.5,i,s=t,o=t){if(lo.test(e)&&(e=parseFloat(e),e=hn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=hn(s.min,s.max,r);t===s&&(l-=e),t.min=C3(t.min,e,n,l,i),t.max=C3(t.max,e,n,l,i)}function I3(t,e,[n,r,i],s,o){Obe(t,e[n],e[r],e[i],e.scale,s,o)}const Vbe=["x","scaleX","originX"],Lbe=["y","scaleY","originY"];function R3(t,e,n,r){I3(t.x,e,Vbe,n?n.x:void 0,r?r.x:void 0),I3(t.y,e,Lbe,n?n.y:void 0,r?r.y:void 0)}function P3(t){return t.translate===0&&t.scale===1}function bG(t){return P3(t.x)&&P3(t.y)}function N3(t,e){return t.min===e.min&&t.max===e.max}function Ube(t,e){return N3(t.x,e.x)&&N3(t.y,e.y)}function M3(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function _G(t,e){return M3(t.x,e.x)&&M3(t.y,e.y)}function D3(t){return Kr(t.x)/Kr(t.y)}function k3(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Fbe{constructor(){this.members=[]}add(e){MR(this.members,e),e.scheduleRender()}remove(e){if(DR(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function jbe(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:d,rotate:f,rotateX:m,rotateY:v,skewX:_,skewY:T}=n;d&&(r=`perspective(${d}px) ${r}`),f&&(r+=`rotate(${f}deg) `),m&&(r+=`rotateX(${m}deg) `),v&&(r+=`rotateY(${v}deg) `),_&&(r+=`skewX(${_}deg) `),T&&(r+=`skewY(${T}deg) `)}const l=t.x.scale*e.x,u=t.y.scale*e.y;return(l!==1||u!==1)&&(r+=`scale(${l}, ${u})`),r||"none"}const MS=["","X","Y","Z"],Bbe=1e3;let qbe=0;function DS(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function wG(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=aG(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",ln,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&wG(r)}function TG({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},l=e==null?void 0:e()){this.id=qbe++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Gbe),this.nodes.forEach(Ybe),this.nodes.forEach(Jbe),this.nodes.forEach(Hbe)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new Rbe)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new VR),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const u=this.eventHandlers.get(o);u&&u.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=U$(o)&&!k0e(o),this.instance=o;const{layoutId:l,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||l)&&(this.isLayoutDirty=!0),t){let f,m=0;const v=()=>this.root.updateBlockedByResize=!1;ln.read(()=>{m=window.innerWidth}),t(o,()=>{const _=window.innerWidth;_!==m&&(m=_,this.root.updateBlockedByResize=!0,f&&f(),f=Pbe(v,250),b0.hasAnimatedSinceResize&&(b0.hasAnimatedSinceResize=!1,this.nodes.forEach(L3)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:m,hasRelativeLayoutChanged:v,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const T=this.options.transition||d.getDefaultTransition()||t_e,{onLayoutAnimationStart:S,onLayoutAnimationComplete:A}=d.getProps(),I=!this.targetLayout||!_G(this.targetLayout,_),D=!m&&v;if(this.options.layoutRoot||this.resumeFrom||D||m&&(I||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const N={...YR(T,"layout"),onPlay:S,onComplete:A};(d.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N),this.setAnimationOrigin(f,D)}else m||L3(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Nl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Qbe),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&wG(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const m=this.path[f];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:l,layout:u}=this.options;if(l===void 0&&!u)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(O3);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(V3);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Wbe),this.nodes.forEach(zbe),this.nodes.forEach($be)):this.nodes.forEach(V3),this.clearAllSnapshots();const l=si.now();xr.delta=aa(0,1e3/60,l-xr.timestamp),xr.timestamp=l,xr.isProcessing=!0,_S.update.process(xr),_S.preRender.process(xr),_S.render.process(xr),xr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,QR.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Kbe),this.sharedNodes.forEach(Xbe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ln.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ln.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Kr(this.snapshot.measuredBox.x)&&!Kr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=An(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!bG(this.projectionDelta),u=this.getTransformTemplate(),d=u?u(this.latestValues,""):void 0,f=d!==this.prevTransformTemplateValue;o&&this.instance&&(l||qu(this.latestValues)||f)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let u=this.removeElementScroll(l);return o&&(u=this.removeTransform(u)),n_e(u),{animationId:this.root.animationId,measuredBox:l,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var d;const{visualElement:o}=this.options;if(!o)return An();const l=o.measureViewportBox();if(!(((d=this.scroll)==null?void 0:d.wasRoot)||this.path.some(r_e))){const{scroll:f}=this.root;f&&(uf(l.x,f.offset.x),uf(l.y,f.offset.y))}return l}removeElementScroll(o){var u;const l=An();if(Qi(l,o),(u=this.scroll)!=null&&u.wasRoot)return l;for(let d=0;d<this.path.length;d++){const f=this.path[d],{scroll:m,options:v}=f;f!==this.root&&m&&v.layoutScroll&&(m.wasRoot&&Qi(l,o),uf(l.x,m.offset.x),uf(l.y,m.offset.y))}return l}applyTransform(o,l=!1){const u=An();Qi(u,o);for(let d=0;d<this.path.length;d++){const f=this.path[d];!l&&f.options.layoutScroll&&f.scroll&&f!==f.root&&cf(u,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),qu(f.latestValues)&&cf(u,f.latestValues)}return qu(this.latestValues)&&cf(u,this.latestValues),u}removeTransform(o){const l=An();Qi(l,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];if(!d.instance||!qu(d.latestValues))continue;m1(d.latestValues)&&d.updateSnapshot();const f=An(),m=d.measurePageBox();Qi(f,m),R3(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,f)}return qu(this.latestValues)&&R3(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==xr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var v;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:m}=this.options;if(!(!this.layout||!(f||m))){if(this.resolvedRelativeTargetAt=xr.timestamp,!this.targetDelta&&!this.relativeTarget){const _=this.getClosestProjectingParent();_&&_.layout&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=An(),this.relativeTargetOrigin=An(),Mp(this.relativeTargetOrigin,this.layout.layoutBox,_.layout.layoutBox),Qi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=An(),this.targetWithTransforms=An()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),ube(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Qi(this.target,this.layout.layoutBox),tG(this.target,this.targetDelta)):Qi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const _=this.getClosestProjectingParent();_&&!!_.resumingFrom==!!this.resumingFrom&&!_.options.layoutScroll&&_.target&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=An(),this.relativeTargetOrigin=An(),Mp(this.relativeTargetOrigin,this.target,_.target),Qi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||m1(this.parent.latestValues)||eG(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var T;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||(T=this.parent)!=null&&T.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===xr.timestamp&&(u=!1),u)return;const{layout:d,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||f))return;Qi(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,v=this.treeScale.y;_xe(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=An());const{target:_}=o;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(A3(this.prevProjectionDelta.x,this.projectionDelta.x),A3(this.prevProjectionDelta.y,this.projectionDelta.y)),Np(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==v||!k3(this.projectionDelta.x,this.prevProjectionDelta.x)||!k3(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=df(),this.projectionDelta=df(),this.projectionDeltaWithTransform=df()}setAnimationOrigin(o,l=!1){const u=this.snapshot,d=u?u.latestValues:{},f={...this.latestValues},m=df();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const v=An(),_=u?u.source:void 0,T=this.layout?this.layout.source:void 0,S=_!==T,A=this.getStack(),I=!A||A.members.length<=1,D=!!(S&&!I&&this.options.crossfade===!0&&!this.path.some(e_e));this.animationProgress=0;let N;this.mixTargetDelta=U=>{const O=U/1e3;U3(m.x,o.x,O),U3(m.y,o.y,O),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Mp(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Zbe(this.relativeTarget,this.relativeTargetOrigin,v,O),N&&Ube(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=An()),Qi(N,this.relativeTarget)),S&&(this.animationValues=f,Mbe(f,d,this.latestValues,O,D,I)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=O},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,u,d;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(d=(u=this.resumingFrom)==null?void 0:u.currentAnimation)==null||d.stop(),this.pendingAnimation&&(Nl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ln.update(()=>{b0.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Uf(0)),this.currentAnimation=Cbe(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:f=>{this.mixTargetDelta(f),o.onUpdate&&o.onUpdate(f)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Bbe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:u,layout:d,latestValues:f}=o;if(!(!l||!u||!d)){if(this!==o&&this.layout&&d&&EG(this.options.animationType,this.layout.layoutBox,d.layoutBox)){u=this.target||An();const m=Kr(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+m;const v=Kr(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+v}Qi(l,u),cf(l,f),Np(this.projectionDeltaWithTransform,this.layoutCorrected,l,f)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Fbe),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:u}={}){const d=this.getStack();d&&d.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(l=!0),!l)return;const d={};u.z&&DS("z",o,d,this.animationValues);for(let f=0;f<MS.length;f++)DS(`rotate${MS[f]}`,o,d,this.animationValues),DS(`skew${MS[f]}`,o,d,this.animationValues);o.render();for(const f in d)o.setStaticValue(f,d[f]),this.animationValues&&(this.animationValues[f]=d[f]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=x0(l==null?void 0:l.pointerEvents)||"",o.transform=u?u(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=x0(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!qu(this.latestValues)&&(o.transform=u?u({},""):"none",this.hasProjected=!1);return}o.visibility="";const f=d.animationValues||d.latestValues;this.applyTransformsToTarget();let m=jbe(this.projectionDeltaWithTransform,this.treeScale,f);u&&(m=u(f,m)),o.transform=m;const{x:v,y:_}=this.projectionDelta;o.transformOrigin=`${v.origin*100}% ${_.origin*100}% 0`,d.animationValues?o.opacity=d===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:o.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const T in dg){if(f[T]===void 0)continue;const{correct:S,applyTo:A,isCSSVariable:I}=dg[T],D=m==="none"?f[T]:S(f[T],d);if(A){const N=A.length;for(let U=0;U<N;U++)o[A[U]]=D}else I?this.options.visualElement.renderState.vars[T]=D:o[T]=D}this.options.layoutId&&(o.pointerEvents=d===this?x0(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(O3),this.root.sharedNodes.clear()}}}function zbe(t){t.updateLayout()}function $be(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?Zi(m=>{const v=o?e.measuredBox[m]:e.layoutBox[m],_=Kr(v);v.min=r[m].min,v.max=v.min+_}):EG(s,e.layoutBox,r)&&Zi(m=>{const v=o?e.measuredBox[m]:e.layoutBox[m],_=Kr(r[m]);v.max=v.min+_,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[m].max=t.relativeTarget[m].min+_)});const l=df();Np(l,r,e.layoutBox);const u=df();o?Np(u,t.applyTransform(i,!0),e.measuredBox):Np(u,r,e.layoutBox);const d=!bG(l);let f=!1;if(!t.resumeFrom){const m=t.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:v,layout:_}=m;if(v&&_){const T=An();Mp(T,e.layoutBox,v.layoutBox);const S=An();Mp(S,r,_.layoutBox),_G(T,S)||(f=!0),m.options.layoutRoot&&(t.relativeTarget=S,t.relativeTargetOrigin=T,t.relativeParent=m)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:u,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:f})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function Gbe(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Hbe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Kbe(t){t.clearSnapshot()}function O3(t){t.clearMeasurements()}function V3(t){t.isLayoutDirty=!1}function Wbe(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function L3(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Ybe(t){t.resolveTargetDelta()}function Jbe(t){t.calcProjection()}function Qbe(t){t.resetSkewAndRotation()}function Xbe(t){t.removeLeadSnapshot()}function U3(t,e,n){t.translate=hn(e.translate,0,n),t.scale=hn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function F3(t,e,n,r){t.min=hn(e.min,n.min,r),t.max=hn(e.max,n.max,r)}function Zbe(t,e,n,r){F3(t.x,e.x,n.x,r),F3(t.y,e.y,n.y,r)}function e_e(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const t_e={duration:.45,ease:[.4,0,.1,1]},j3=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),B3=j3("applewebkit/")&&!j3("chrome/")?Math.round:is;function q3(t){t.min=B3(t.min),t.max=B3(t.max)}function n_e(t){q3(t.x),q3(t.y)}function EG(t,e,n){return t==="position"||t==="preserve-aspect"&&!lbe(D3(e),D3(n),.2)}function r_e(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const i_e=TG({attachResizeListener:(t,e)=>fg(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),kS={current:void 0},SG=TG({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!kS.current){const t=new i_e({});t.mount(window),t.setOptions({layoutScroll:!0}),kS.current=t}return kS.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),s_e={pan:{Feature:Tbe},drag:{Feature:wbe,ProjectionNode:SG,MeasureLayout:yG}};function z3(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&ln.postRender(()=>s(e,Xg(e)))}class o_e extends Ql{mount(){const{current:e}=this.node;e&&(this.unmount=R0e(e,(n,r)=>(z3(this.node,r,"Start"),i=>z3(this.node,i,"End"))))}unmount(){}}class a_e extends Ql{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Yg(fg(this.node.current,"focus",()=>this.onFocus()),fg(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function $3(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&ln.postRender(()=>s(e,Xg(e)))}class l_e extends Ql{mount(){const{current:e}=this.node;e&&(this.unmount=D0e(e,(n,r)=>($3(this.node,r,"Start"),(i,{success:s})=>$3(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const _1=new WeakMap,OS=new WeakMap,u_e=t=>{const e=_1.get(t.target);e&&e(t)},c_e=t=>{t.forEach(u_e)};function d_e({root:t,...e}){const n=t||document;OS.has(n)||OS.set(n,{});const r=OS.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(c_e,{root:t,...e})),r[i]}function f_e(t,e,n){const r=d_e(e);return _1.set(t,n),r.observe(t),()=>{_1.delete(t),r.unobserve(t)}}const h_e={some:0,all:1};class m_e extends Ql{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:h_e[i]},l=u=>{const{isIntersecting:d}=u;if(this.isInView===d||(this.isInView=d,s&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:f,onViewportLeave:m}=this.node.getProps(),v=d?f:m;v&&v(u)};return f_e(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(p_e(e,n))&&this.startObserver()}unmount(){}}function p_e({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const g_e={inView:{Feature:m_e},tap:{Feature:l_e},focus:{Feature:a_e},hover:{Feature:o_e}},y_e={layout:{ProjectionNode:SG,MeasureLayout:yG}},v_e={...nbe,...g_e,...s_e,...y_e},nt=vxe(v_e,Nxe),uP="-",x_e=t=>{const e=__e(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(uP);return l[0]===""&&l.length!==1&&l.shift(),AG(l,e)||b_e(o)},getConflictingClassGroupIds:(o,l)=>{const u=n[o]||[];return l&&r[o]?[...u,...r[o]]:u}}},AG=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?AG(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(uP);return(o=e.validators.find(({validator:l})=>l(s)))==null?void 0:o.classGroupId},G3=/^\[(.+)\]$/,b_e=t=>{if(G3.test(t)){const e=G3.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},__e=t=>{const{theme:e,classGroups:n}=t,r={nextPart:new Map,validators:[]};for(const i in n)w1(n[i],r,i,e);return r},w1=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:H3(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(w_e(i)){w1(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{w1(o,H3(e,s),n,r)})})},H3=(t,e)=>{let n=t;return e.split(uP).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},w_e=t=>t.isThemeGetter,T_e=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},T1="!",E1=":",E_e=E1.length,S_e=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=i=>{const s=[];let o=0,l=0,u=0,d;for(let T=0;T<i.length;T++){let S=i[T];if(o===0&&l===0){if(S===E1){s.push(i.slice(u,T)),u=T+E_e;continue}if(S==="/"){d=T;continue}}S==="["?o++:S==="]"?o--:S==="("?l++:S===")"&&l--}const f=s.length===0?i:i.substring(u),m=A_e(f),v=m!==f,_=d&&d>u?d-u:void 0;return{modifiers:s,hasImportantModifier:v,baseClassName:m,maybePostfixModifierPosition:_}};if(e){const i=e+E1,s=r;r=o=>o.startsWith(i)?s(o.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(n){const i=r;r=s=>n({className:s,parseClassName:i})}return r},A_e=t=>t.endsWith(T1)?t.substring(0,t.length-1):t.startsWith(T1)?t.substring(1):t,C_e=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let s=[];return r.forEach(o=>{o[0]==="["||e[o]?(i.push(...s.sort(),o),s=[]):s.push(o)}),i.push(...s.sort()),i}},I_e=t=>({cache:T_e(t.cacheSize),parseClassName:S_e(t),sortModifiers:C_e(t),...x_e(t)}),R_e=/\s+/,P_e=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:s}=e,o=[],l=t.trim().split(R_e);let u="";for(let d=l.length-1;d>=0;d-=1){const f=l[d],{isExternal:m,modifiers:v,hasImportantModifier:_,baseClassName:T,maybePostfixModifierPosition:S}=n(f);if(m){u=f+(u.length>0?" "+u:u);continue}let A=!!S,I=r(A?T.substring(0,S):T);if(!I){if(!A){u=f+(u.length>0?" "+u:u);continue}if(I=r(T),!I){u=f+(u.length>0?" "+u:u);continue}A=!1}const D=s(v).join(":"),N=_?D+T1:D,U=N+I;if(o.includes(U))continue;o.push(U);const O=i(I,A);for(let q=0;q<O.length;++q){const M=O[q];o.push(N+M)}u=f+(u.length>0?" "+u:u)}return u};function N_e(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=CG(e))&&(r&&(r+=" "),r+=n);return r}const CG=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=CG(t[r]))&&(n&&(n+=" "),n+=e);return n};function M_e(t,...e){let n,r,i,s=o;function o(u){const d=e.reduce((f,m)=>m(f),t());return n=I_e(d),r=n.cache.get,i=n.cache.set,s=l,l(u)}function l(u){const d=r(u);if(d)return d;const f=P_e(u,n);return i(u,f),f}return function(){return s(N_e.apply(null,arguments))}}const Kn=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},IG=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,RG=/^\((?:(\w[\w-]*):)?(.+)\)$/i,D_e=/^\d+\/\d+$/,k_e=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,O_e=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,V_e=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,L_e=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,U_e=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,jd=t=>D_e.test(t),lt=t=>!!t&&!Number.isNaN(Number(t)),sl=t=>!!t&&Number.isInteger(Number(t)),VS=t=>t.endsWith("%")&&lt(t.slice(0,-1)),Go=t=>k_e.test(t),F_e=()=>!0,j_e=t=>O_e.test(t)&&!V_e.test(t),PG=()=>!1,B_e=t=>L_e.test(t),q_e=t=>U_e.test(t),z_e=t=>!Ve(t)&&!Le(t),$_e=t=>Th(t,DG,PG),Ve=t=>IG.test(t),Vu=t=>Th(t,kG,j_e),LS=t=>Th(t,Y_e,lt),K3=t=>Th(t,NG,PG),G_e=t=>Th(t,MG,q_e),e0=t=>Th(t,OG,B_e),Le=t=>RG.test(t),tp=t=>Eh(t,kG),H_e=t=>Eh(t,J_e),W3=t=>Eh(t,NG),K_e=t=>Eh(t,DG),W_e=t=>Eh(t,MG),t0=t=>Eh(t,OG,!0),Th=(t,e,n)=>{const r=IG.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},Eh=(t,e,n=!1)=>{const r=RG.exec(t);return r?r[1]?e(r[1]):n:!1},NG=t=>t==="position"||t==="percentage",MG=t=>t==="image"||t==="url",DG=t=>t==="length"||t==="size"||t==="bg-size",kG=t=>t==="length",Y_e=t=>t==="number",J_e=t=>t==="family-name",OG=t=>t==="shadow",Q_e=()=>{const t=Kn("color"),e=Kn("font"),n=Kn("text"),r=Kn("font-weight"),i=Kn("tracking"),s=Kn("leading"),o=Kn("breakpoint"),l=Kn("container"),u=Kn("spacing"),d=Kn("radius"),f=Kn("shadow"),m=Kn("inset-shadow"),v=Kn("text-shadow"),_=Kn("drop-shadow"),T=Kn("blur"),S=Kn("perspective"),A=Kn("aspect"),I=Kn("ease"),D=Kn("animate"),N=()=>["auto","avoid","all","avoid-page","page","left","right","column"],U=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],O=()=>[...U(),Le,Ve],q=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto","contain","none"],R=()=>[Le,Ve,u],k=()=>[jd,"full","auto",...R()],F=()=>[sl,"none","subgrid",Le,Ve],j=()=>["auto",{span:["full",sl,Le,Ve]},sl,Le,Ve],G=()=>[sl,"auto",Le,Ve],$=()=>["auto","min","max","fr",Le,Ve],de=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ve=()=>["start","end","center","stretch","center-safe","end-safe"],Y=()=>["auto",...R()],se=()=>[jd,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...R()],Q=()=>[t,Le,Ve],_e=()=>[...U(),W3,K3,{position:[Le,Ve]}],H=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ae=()=>["auto","cover","contain",K_e,$_e,{size:[Le,Ve]}],le=()=>[VS,tp,Vu],ce=()=>["","none","full",d,Le,Ve],Ee=()=>["",lt,tp,Vu],Me=()=>["solid","dashed","dotted","double"],je=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],xe=()=>[lt,VS,W3,K3],ot=()=>["","none",T,Le,Ve],Te=()=>["none",lt,Le,Ve],we=()=>["none",lt,Le,Ve],Pe=()=>[lt,Le,Ve],ue=()=>[jd,"full",...R()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Go],breakpoint:[Go],color:[F_e],container:[Go],"drop-shadow":[Go],ease:["in","out","in-out"],font:[z_e],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Go],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Go],shadow:[Go],spacing:["px",lt],text:[Go],"text-shadow":[Go],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",jd,Ve,Le,A]}],container:["container"],columns:[{columns:[lt,Ve,Le,l]}],"break-after":[{"break-after":N()}],"break-before":[{"break-before":N()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:O()}],overflow:[{overflow:q()}],"overflow-x":[{"overflow-x":q()}],"overflow-y":[{"overflow-y":q()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:k()}],"inset-x":[{"inset-x":k()}],"inset-y":[{"inset-y":k()}],start:[{start:k()}],end:[{end:k()}],top:[{top:k()}],right:[{right:k()}],bottom:[{bottom:k()}],left:[{left:k()}],visibility:["visible","invisible","collapse"],z:[{z:[sl,"auto",Le,Ve]}],basis:[{basis:[jd,"full","auto",l,...R()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[lt,jd,"auto","initial","none",Ve]}],grow:[{grow:["",lt,Le,Ve]}],shrink:[{shrink:["",lt,Le,Ve]}],order:[{order:[sl,"first","last","none",Le,Ve]}],"grid-cols":[{"grid-cols":F()}],"col-start-end":[{col:j()}],"col-start":[{"col-start":G()}],"col-end":[{"col-end":G()}],"grid-rows":[{"grid-rows":F()}],"row-start-end":[{row:j()}],"row-start":[{"row-start":G()}],"row-end":[{"row-end":G()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":$()}],"auto-rows":[{"auto-rows":$()}],gap:[{gap:R()}],"gap-x":[{"gap-x":R()}],"gap-y":[{"gap-y":R()}],"justify-content":[{justify:[...de(),"normal"]}],"justify-items":[{"justify-items":[...ve(),"normal"]}],"justify-self":[{"justify-self":["auto",...ve()]}],"align-content":[{content:["normal",...de()]}],"align-items":[{items:[...ve(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ve(),{baseline:["","last"]}]}],"place-content":[{"place-content":de()}],"place-items":[{"place-items":[...ve(),"baseline"]}],"place-self":[{"place-self":["auto",...ve()]}],p:[{p:R()}],px:[{px:R()}],py:[{py:R()}],ps:[{ps:R()}],pe:[{pe:R()}],pt:[{pt:R()}],pr:[{pr:R()}],pb:[{pb:R()}],pl:[{pl:R()}],m:[{m:Y()}],mx:[{mx:Y()}],my:[{my:Y()}],ms:[{ms:Y()}],me:[{me:Y()}],mt:[{mt:Y()}],mr:[{mr:Y()}],mb:[{mb:Y()}],ml:[{ml:Y()}],"space-x":[{"space-x":R()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":R()}],"space-y-reverse":["space-y-reverse"],size:[{size:se()}],w:[{w:[l,"screen",...se()]}],"min-w":[{"min-w":[l,"screen","none",...se()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[o]},...se()]}],h:[{h:["screen","lh",...se()]}],"min-h":[{"min-h":["screen","lh","none",...se()]}],"max-h":[{"max-h":["screen","lh",...se()]}],"font-size":[{text:["base",n,tp,Vu]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Le,LS]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",VS,Ve]}],"font-family":[{font:[H_e,Ve,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Le,Ve]}],"line-clamp":[{"line-clamp":[lt,"none",Le,LS]}],leading:[{leading:[s,...R()]}],"list-image":[{"list-image":["none",Le,Ve]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Le,Ve]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Q()}],"text-color":[{text:Q()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Me(),"wavy"]}],"text-decoration-thickness":[{decoration:[lt,"from-font","auto",Le,Vu]}],"text-decoration-color":[{decoration:Q()}],"underline-offset":[{"underline-offset":[lt,"auto",Le,Ve]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Le,Ve]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Le,Ve]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:_e()}],"bg-repeat":[{bg:H()}],"bg-size":[{bg:ae()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},sl,Le,Ve],radial:["",Le,Ve],conic:[sl,Le,Ve]},W_e,G_e]}],"bg-color":[{bg:Q()}],"gradient-from-pos":[{from:le()}],"gradient-via-pos":[{via:le()}],"gradient-to-pos":[{to:le()}],"gradient-from":[{from:Q()}],"gradient-via":[{via:Q()}],"gradient-to":[{to:Q()}],rounded:[{rounded:ce()}],"rounded-s":[{"rounded-s":ce()}],"rounded-e":[{"rounded-e":ce()}],"rounded-t":[{"rounded-t":ce()}],"rounded-r":[{"rounded-r":ce()}],"rounded-b":[{"rounded-b":ce()}],"rounded-l":[{"rounded-l":ce()}],"rounded-ss":[{"rounded-ss":ce()}],"rounded-se":[{"rounded-se":ce()}],"rounded-ee":[{"rounded-ee":ce()}],"rounded-es":[{"rounded-es":ce()}],"rounded-tl":[{"rounded-tl":ce()}],"rounded-tr":[{"rounded-tr":ce()}],"rounded-br":[{"rounded-br":ce()}],"rounded-bl":[{"rounded-bl":ce()}],"border-w":[{border:Ee()}],"border-w-x":[{"border-x":Ee()}],"border-w-y":[{"border-y":Ee()}],"border-w-s":[{"border-s":Ee()}],"border-w-e":[{"border-e":Ee()}],"border-w-t":[{"border-t":Ee()}],"border-w-r":[{"border-r":Ee()}],"border-w-b":[{"border-b":Ee()}],"border-w-l":[{"border-l":Ee()}],"divide-x":[{"divide-x":Ee()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Ee()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Me(),"hidden","none"]}],"divide-style":[{divide:[...Me(),"hidden","none"]}],"border-color":[{border:Q()}],"border-color-x":[{"border-x":Q()}],"border-color-y":[{"border-y":Q()}],"border-color-s":[{"border-s":Q()}],"border-color-e":[{"border-e":Q()}],"border-color-t":[{"border-t":Q()}],"border-color-r":[{"border-r":Q()}],"border-color-b":[{"border-b":Q()}],"border-color-l":[{"border-l":Q()}],"divide-color":[{divide:Q()}],"outline-style":[{outline:[...Me(),"none","hidden"]}],"outline-offset":[{"outline-offset":[lt,Le,Ve]}],"outline-w":[{outline:["",lt,tp,Vu]}],"outline-color":[{outline:Q()}],shadow:[{shadow:["","none",f,t0,e0]}],"shadow-color":[{shadow:Q()}],"inset-shadow":[{"inset-shadow":["none",m,t0,e0]}],"inset-shadow-color":[{"inset-shadow":Q()}],"ring-w":[{ring:Ee()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Q()}],"ring-offset-w":[{"ring-offset":[lt,Vu]}],"ring-offset-color":[{"ring-offset":Q()}],"inset-ring-w":[{"inset-ring":Ee()}],"inset-ring-color":[{"inset-ring":Q()}],"text-shadow":[{"text-shadow":["none",v,t0,e0]}],"text-shadow-color":[{"text-shadow":Q()}],opacity:[{opacity:[lt,Le,Ve]}],"mix-blend":[{"mix-blend":[...je(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":je()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[lt]}],"mask-image-linear-from-pos":[{"mask-linear-from":xe()}],"mask-image-linear-to-pos":[{"mask-linear-to":xe()}],"mask-image-linear-from-color":[{"mask-linear-from":Q()}],"mask-image-linear-to-color":[{"mask-linear-to":Q()}],"mask-image-t-from-pos":[{"mask-t-from":xe()}],"mask-image-t-to-pos":[{"mask-t-to":xe()}],"mask-image-t-from-color":[{"mask-t-from":Q()}],"mask-image-t-to-color":[{"mask-t-to":Q()}],"mask-image-r-from-pos":[{"mask-r-from":xe()}],"mask-image-r-to-pos":[{"mask-r-to":xe()}],"mask-image-r-from-color":[{"mask-r-from":Q()}],"mask-image-r-to-color":[{"mask-r-to":Q()}],"mask-image-b-from-pos":[{"mask-b-from":xe()}],"mask-image-b-to-pos":[{"mask-b-to":xe()}],"mask-image-b-from-color":[{"mask-b-from":Q()}],"mask-image-b-to-color":[{"mask-b-to":Q()}],"mask-image-l-from-pos":[{"mask-l-from":xe()}],"mask-image-l-to-pos":[{"mask-l-to":xe()}],"mask-image-l-from-color":[{"mask-l-from":Q()}],"mask-image-l-to-color":[{"mask-l-to":Q()}],"mask-image-x-from-pos":[{"mask-x-from":xe()}],"mask-image-x-to-pos":[{"mask-x-to":xe()}],"mask-image-x-from-color":[{"mask-x-from":Q()}],"mask-image-x-to-color":[{"mask-x-to":Q()}],"mask-image-y-from-pos":[{"mask-y-from":xe()}],"mask-image-y-to-pos":[{"mask-y-to":xe()}],"mask-image-y-from-color":[{"mask-y-from":Q()}],"mask-image-y-to-color":[{"mask-y-to":Q()}],"mask-image-radial":[{"mask-radial":[Le,Ve]}],"mask-image-radial-from-pos":[{"mask-radial-from":xe()}],"mask-image-radial-to-pos":[{"mask-radial-to":xe()}],"mask-image-radial-from-color":[{"mask-radial-from":Q()}],"mask-image-radial-to-color":[{"mask-radial-to":Q()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":U()}],"mask-image-conic-pos":[{"mask-conic":[lt]}],"mask-image-conic-from-pos":[{"mask-conic-from":xe()}],"mask-image-conic-to-pos":[{"mask-conic-to":xe()}],"mask-image-conic-from-color":[{"mask-conic-from":Q()}],"mask-image-conic-to-color":[{"mask-conic-to":Q()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:_e()}],"mask-repeat":[{mask:H()}],"mask-size":[{mask:ae()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Le,Ve]}],filter:[{filter:["","none",Le,Ve]}],blur:[{blur:ot()}],brightness:[{brightness:[lt,Le,Ve]}],contrast:[{contrast:[lt,Le,Ve]}],"drop-shadow":[{"drop-shadow":["","none",_,t0,e0]}],"drop-shadow-color":[{"drop-shadow":Q()}],grayscale:[{grayscale:["",lt,Le,Ve]}],"hue-rotate":[{"hue-rotate":[lt,Le,Ve]}],invert:[{invert:["",lt,Le,Ve]}],saturate:[{saturate:[lt,Le,Ve]}],sepia:[{sepia:["",lt,Le,Ve]}],"backdrop-filter":[{"backdrop-filter":["","none",Le,Ve]}],"backdrop-blur":[{"backdrop-blur":ot()}],"backdrop-brightness":[{"backdrop-brightness":[lt,Le,Ve]}],"backdrop-contrast":[{"backdrop-contrast":[lt,Le,Ve]}],"backdrop-grayscale":[{"backdrop-grayscale":["",lt,Le,Ve]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[lt,Le,Ve]}],"backdrop-invert":[{"backdrop-invert":["",lt,Le,Ve]}],"backdrop-opacity":[{"backdrop-opacity":[lt,Le,Ve]}],"backdrop-saturate":[{"backdrop-saturate":[lt,Le,Ve]}],"backdrop-sepia":[{"backdrop-sepia":["",lt,Le,Ve]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":R()}],"border-spacing-x":[{"border-spacing-x":R()}],"border-spacing-y":[{"border-spacing-y":R()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Le,Ve]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[lt,"initial",Le,Ve]}],ease:[{ease:["linear","initial",I,Le,Ve]}],delay:[{delay:[lt,Le,Ve]}],animate:[{animate:["none",D,Le,Ve]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[S,Le,Ve]}],"perspective-origin":[{"perspective-origin":O()}],rotate:[{rotate:Te()}],"rotate-x":[{"rotate-x":Te()}],"rotate-y":[{"rotate-y":Te()}],"rotate-z":[{"rotate-z":Te()}],scale:[{scale:we()}],"scale-x":[{"scale-x":we()}],"scale-y":[{"scale-y":we()}],"scale-z":[{"scale-z":we()}],"scale-3d":["scale-3d"],skew:[{skew:Pe()}],"skew-x":[{"skew-x":Pe()}],"skew-y":[{"skew-y":Pe()}],transform:[{transform:[Le,Ve,"","none","gpu","cpu"]}],"transform-origin":[{origin:O()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ue()}],"translate-x":[{"translate-x":ue()}],"translate-y":[{"translate-y":ue()}],"translate-z":[{"translate-z":ue()}],"translate-none":["translate-none"],accent:[{accent:Q()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Q()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Le,Ve]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Le,Ve]}],fill:[{fill:["none",...Q()]}],"stroke-w":[{stroke:[lt,tp,Vu,LS]}],stroke:[{stroke:["none",...Q()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},X_e=M_e(Q_e);function bt(...t){return X_e(Bt(t))}var Y3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Tl,VG;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,R){function k(){}k.prototype=R.prototype,M.D=R.prototype,M.prototype=new k,M.prototype.constructor=M,M.C=function(F,j,G){for(var $=Array(arguments.length-2),de=2;de<arguments.length;de++)$[de-2]=arguments[de];return R.prototype[j].apply(F,$)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(M,R,k){k||(k=0);var F=Array(16);if(typeof R=="string")for(var j=0;16>j;++j)F[j]=R.charCodeAt(k++)|R.charCodeAt(k++)<<8|R.charCodeAt(k++)<<16|R.charCodeAt(k++)<<24;else for(j=0;16>j;++j)F[j]=R[k++]|R[k++]<<8|R[k++]<<16|R[k++]<<24;R=M.g[0],k=M.g[1],j=M.g[2];var G=M.g[3],$=R+(G^k&(j^G))+F[0]+3614090360&4294967295;R=k+($<<7&4294967295|$>>>25),$=G+(j^R&(k^j))+F[1]+3905402710&4294967295,G=R+($<<12&4294967295|$>>>20),$=j+(k^G&(R^k))+F[2]+606105819&4294967295,j=G+($<<17&4294967295|$>>>15),$=k+(R^j&(G^R))+F[3]+3250441966&4294967295,k=j+($<<22&4294967295|$>>>10),$=R+(G^k&(j^G))+F[4]+4118548399&4294967295,R=k+($<<7&4294967295|$>>>25),$=G+(j^R&(k^j))+F[5]+1200080426&4294967295,G=R+($<<12&4294967295|$>>>20),$=j+(k^G&(R^k))+F[6]+2821735955&4294967295,j=G+($<<17&4294967295|$>>>15),$=k+(R^j&(G^R))+F[7]+4249261313&4294967295,k=j+($<<22&4294967295|$>>>10),$=R+(G^k&(j^G))+F[8]+1770035416&4294967295,R=k+($<<7&4294967295|$>>>25),$=G+(j^R&(k^j))+F[9]+2336552879&4294967295,G=R+($<<12&4294967295|$>>>20),$=j+(k^G&(R^k))+F[10]+4294925233&4294967295,j=G+($<<17&4294967295|$>>>15),$=k+(R^j&(G^R))+F[11]+2304563134&4294967295,k=j+($<<22&4294967295|$>>>10),$=R+(G^k&(j^G))+F[12]+1804603682&4294967295,R=k+($<<7&4294967295|$>>>25),$=G+(j^R&(k^j))+F[13]+4254626195&4294967295,G=R+($<<12&4294967295|$>>>20),$=j+(k^G&(R^k))+F[14]+2792965006&4294967295,j=G+($<<17&4294967295|$>>>15),$=k+(R^j&(G^R))+F[15]+1236535329&4294967295,k=j+($<<22&4294967295|$>>>10),$=R+(j^G&(k^j))+F[1]+4129170786&4294967295,R=k+($<<5&4294967295|$>>>27),$=G+(k^j&(R^k))+F[6]+3225465664&4294967295,G=R+($<<9&4294967295|$>>>23),$=j+(R^k&(G^R))+F[11]+643717713&4294967295,j=G+($<<14&4294967295|$>>>18),$=k+(G^R&(j^G))+F[0]+3921069994&4294967295,k=j+($<<20&4294967295|$>>>12),$=R+(j^G&(k^j))+F[5]+3593408605&4294967295,R=k+($<<5&4294967295|$>>>27),$=G+(k^j&(R^k))+F[10]+38016083&4294967295,G=R+($<<9&4294967295|$>>>23),$=j+(R^k&(G^R))+F[15]+3634488961&4294967295,j=G+($<<14&4294967295|$>>>18),$=k+(G^R&(j^G))+F[4]+3889429448&4294967295,k=j+($<<20&4294967295|$>>>12),$=R+(j^G&(k^j))+F[9]+568446438&4294967295,R=k+($<<5&4294967295|$>>>27),$=G+(k^j&(R^k))+F[14]+3275163606&4294967295,G=R+($<<9&4294967295|$>>>23),$=j+(R^k&(G^R))+F[3]+4107603335&4294967295,j=G+($<<14&4294967295|$>>>18),$=k+(G^R&(j^G))+F[8]+1163531501&4294967295,k=j+($<<20&4294967295|$>>>12),$=R+(j^G&(k^j))+F[13]+2850285829&4294967295,R=k+($<<5&4294967295|$>>>27),$=G+(k^j&(R^k))+F[2]+4243563512&4294967295,G=R+($<<9&4294967295|$>>>23),$=j+(R^k&(G^R))+F[7]+1735328473&4294967295,j=G+($<<14&4294967295|$>>>18),$=k+(G^R&(j^G))+F[12]+2368359562&4294967295,k=j+($<<20&4294967295|$>>>12),$=R+(k^j^G)+F[5]+4294588738&4294967295,R=k+($<<4&4294967295|$>>>28),$=G+(R^k^j)+F[8]+2272392833&4294967295,G=R+($<<11&4294967295|$>>>21),$=j+(G^R^k)+F[11]+1839030562&4294967295,j=G+($<<16&4294967295|$>>>16),$=k+(j^G^R)+F[14]+4259657740&4294967295,k=j+($<<23&4294967295|$>>>9),$=R+(k^j^G)+F[1]+2763975236&4294967295,R=k+($<<4&4294967295|$>>>28),$=G+(R^k^j)+F[4]+1272893353&4294967295,G=R+($<<11&4294967295|$>>>21),$=j+(G^R^k)+F[7]+4139469664&4294967295,j=G+($<<16&4294967295|$>>>16),$=k+(j^G^R)+F[10]+3200236656&4294967295,k=j+($<<23&4294967295|$>>>9),$=R+(k^j^G)+F[13]+681279174&4294967295,R=k+($<<4&4294967295|$>>>28),$=G+(R^k^j)+F[0]+3936430074&4294967295,G=R+($<<11&4294967295|$>>>21),$=j+(G^R^k)+F[3]+3572445317&4294967295,j=G+($<<16&4294967295|$>>>16),$=k+(j^G^R)+F[6]+76029189&4294967295,k=j+($<<23&4294967295|$>>>9),$=R+(k^j^G)+F[9]+3654602809&4294967295,R=k+($<<4&4294967295|$>>>28),$=G+(R^k^j)+F[12]+3873151461&4294967295,G=R+($<<11&4294967295|$>>>21),$=j+(G^R^k)+F[15]+530742520&4294967295,j=G+($<<16&4294967295|$>>>16),$=k+(j^G^R)+F[2]+3299628645&4294967295,k=j+($<<23&4294967295|$>>>9),$=R+(j^(k|~G))+F[0]+4096336452&4294967295,R=k+($<<6&4294967295|$>>>26),$=G+(k^(R|~j))+F[7]+1126891415&4294967295,G=R+($<<10&4294967295|$>>>22),$=j+(R^(G|~k))+F[14]+2878612391&4294967295,j=G+($<<15&4294967295|$>>>17),$=k+(G^(j|~R))+F[5]+4237533241&4294967295,k=j+($<<21&4294967295|$>>>11),$=R+(j^(k|~G))+F[12]+1700485571&4294967295,R=k+($<<6&4294967295|$>>>26),$=G+(k^(R|~j))+F[3]+2399980690&4294967295,G=R+($<<10&4294967295|$>>>22),$=j+(R^(G|~k))+F[10]+4293915773&4294967295,j=G+($<<15&4294967295|$>>>17),$=k+(G^(j|~R))+F[1]+2240044497&4294967295,k=j+($<<21&4294967295|$>>>11),$=R+(j^(k|~G))+F[8]+1873313359&4294967295,R=k+($<<6&4294967295|$>>>26),$=G+(k^(R|~j))+F[15]+4264355552&4294967295,G=R+($<<10&4294967295|$>>>22),$=j+(R^(G|~k))+F[6]+2734768916&4294967295,j=G+($<<15&4294967295|$>>>17),$=k+(G^(j|~R))+F[13]+1309151649&4294967295,k=j+($<<21&4294967295|$>>>11),$=R+(j^(k|~G))+F[4]+4149444226&4294967295,R=k+($<<6&4294967295|$>>>26),$=G+(k^(R|~j))+F[11]+3174756917&4294967295,G=R+($<<10&4294967295|$>>>22),$=j+(R^(G|~k))+F[2]+718787259&4294967295,j=G+($<<15&4294967295|$>>>17),$=k+(G^(j|~R))+F[9]+3951481745&4294967295,M.g[0]=M.g[0]+R&4294967295,M.g[1]=M.g[1]+(j+($<<21&4294967295|$>>>11))&4294967295,M.g[2]=M.g[2]+j&4294967295,M.g[3]=M.g[3]+G&4294967295}r.prototype.u=function(M,R){R===void 0&&(R=M.length);for(var k=R-this.blockSize,F=this.B,j=this.h,G=0;G<R;){if(j==0)for(;G<=k;)i(this,M,G),G+=this.blockSize;if(typeof M=="string"){for(;G<R;)if(F[j++]=M.charCodeAt(G++),j==this.blockSize){i(this,F),j=0;break}}else for(;G<R;)if(F[j++]=M[G++],j==this.blockSize){i(this,F),j=0;break}}this.h=j,this.o+=R},r.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var R=1;R<M.length-8;++R)M[R]=0;var k=8*this.o;for(R=M.length-8;R<M.length;++R)M[R]=k&255,k/=256;for(this.u(M),M=Array(16),R=k=0;4>R;++R)for(var F=0;32>F;F+=8)M[k++]=this.g[R]>>>F&255;return M};function s(M,R){var k=l;return Object.prototype.hasOwnProperty.call(k,M)?k[M]:k[M]=R(M)}function o(M,R){this.h=R;for(var k=[],F=!0,j=M.length-1;0<=j;j--){var G=M[j]|0;F&&G==R||(k[j]=G,F=!1)}this.g=k}var l={};function u(M){return-128<=M&&128>M?s(M,function(R){return new o([R|0],0>R?-1:0)}):new o([M|0],0>M?-1:0)}function d(M){if(isNaN(M)||!isFinite(M))return m;if(0>M)return A(d(-M));for(var R=[],k=1,F=0;M>=k;F++)R[F]=M/k|0,k*=4294967296;return new o(R,0)}function f(M,R){if(M.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(M.charAt(0)=="-")return A(f(M.substring(1),R));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=d(Math.pow(R,8)),F=m,j=0;j<M.length;j+=8){var G=Math.min(8,M.length-j),$=parseInt(M.substring(j,j+G),R);8>G?(G=d(Math.pow(R,G)),F=F.j(G).add(d($))):(F=F.j(k),F=F.add(d($)))}return F}var m=u(0),v=u(1),_=u(16777216);t=o.prototype,t.m=function(){if(S(this))return-A(this).m();for(var M=0,R=1,k=0;k<this.g.length;k++){var F=this.i(k);M+=(0<=F?F:4294967296+F)*R,R*=4294967296}return M},t.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(T(this))return"0";if(S(this))return"-"+A(this).toString(M);for(var R=d(Math.pow(M,6)),k=this,F="";;){var j=U(k,R).g;k=I(k,j.j(R));var G=((0<k.g.length?k.g[0]:k.h)>>>0).toString(M);if(k=j,T(k))return G+F;for(;6>G.length;)G="0"+G;F=G+F}},t.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function T(M){if(M.h!=0)return!1;for(var R=0;R<M.g.length;R++)if(M.g[R]!=0)return!1;return!0}function S(M){return M.h==-1}t.l=function(M){return M=I(this,M),S(M)?-1:T(M)?0:1};function A(M){for(var R=M.g.length,k=[],F=0;F<R;F++)k[F]=~M.g[F];return new o(k,~M.h).add(v)}t.abs=function(){return S(this)?A(this):this},t.add=function(M){for(var R=Math.max(this.g.length,M.g.length),k=[],F=0,j=0;j<=R;j++){var G=F+(this.i(j)&65535)+(M.i(j)&65535),$=(G>>>16)+(this.i(j)>>>16)+(M.i(j)>>>16);F=$>>>16,G&=65535,$&=65535,k[j]=$<<16|G}return new o(k,k[k.length-1]&-2147483648?-1:0)};function I(M,R){return M.add(A(R))}t.j=function(M){if(T(this)||T(M))return m;if(S(this))return S(M)?A(this).j(A(M)):A(A(this).j(M));if(S(M))return A(this.j(A(M)));if(0>this.l(_)&&0>M.l(_))return d(this.m()*M.m());for(var R=this.g.length+M.g.length,k=[],F=0;F<2*R;F++)k[F]=0;for(F=0;F<this.g.length;F++)for(var j=0;j<M.g.length;j++){var G=this.i(F)>>>16,$=this.i(F)&65535,de=M.i(j)>>>16,ve=M.i(j)&65535;k[2*F+2*j]+=$*ve,D(k,2*F+2*j),k[2*F+2*j+1]+=G*ve,D(k,2*F+2*j+1),k[2*F+2*j+1]+=$*de,D(k,2*F+2*j+1),k[2*F+2*j+2]+=G*de,D(k,2*F+2*j+2)}for(F=0;F<R;F++)k[F]=k[2*F+1]<<16|k[2*F];for(F=R;F<2*R;F++)k[F]=0;return new o(k,0)};function D(M,R){for(;(M[R]&65535)!=M[R];)M[R+1]+=M[R]>>>16,M[R]&=65535,R++}function N(M,R){this.g=M,this.h=R}function U(M,R){if(T(R))throw Error("division by zero");if(T(M))return new N(m,m);if(S(M))return R=U(A(M),R),new N(A(R.g),A(R.h));if(S(R))return R=U(M,A(R)),new N(A(R.g),R.h);if(30<M.g.length){if(S(M)||S(R))throw Error("slowDivide_ only works with positive integers.");for(var k=v,F=R;0>=F.l(M);)k=O(k),F=O(F);var j=q(k,1),G=q(F,1);for(F=q(F,2),k=q(k,2);!T(F);){var $=G.add(F);0>=$.l(M)&&(j=j.add(k),G=$),F=q(F,1),k=q(k,1)}return R=I(M,j.j(R)),new N(j,R)}for(j=m;0<=M.l(R);){for(k=Math.max(1,Math.floor(M.m()/R.m())),F=Math.ceil(Math.log(k)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),G=d(k),$=G.j(R);S($)||0<$.l(M);)k-=F,G=d(k),$=G.j(R);T(G)&&(G=v),j=j.add(G),M=I(M,$)}return new N(j,M)}t.A=function(M){return U(this,M).h},t.and=function(M){for(var R=Math.max(this.g.length,M.g.length),k=[],F=0;F<R;F++)k[F]=this.i(F)&M.i(F);return new o(k,this.h&M.h)},t.or=function(M){for(var R=Math.max(this.g.length,M.g.length),k=[],F=0;F<R;F++)k[F]=this.i(F)|M.i(F);return new o(k,this.h|M.h)},t.xor=function(M){for(var R=Math.max(this.g.length,M.g.length),k=[],F=0;F<R;F++)k[F]=this.i(F)^M.i(F);return new o(k,this.h^M.h)};function O(M){for(var R=M.g.length+1,k=[],F=0;F<R;F++)k[F]=M.i(F)<<1|M.i(F-1)>>>31;return new o(k,M.h)}function q(M,R){var k=R>>5;R%=32;for(var F=M.g.length-k,j=[],G=0;G<F;G++)j[G]=0<R?M.i(G+k)>>>R|M.i(G+k+1)<<32-R:M.i(G+k);return new o(j,M.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,VG=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Tl=o}).apply(typeof Y3<"u"?Y3:typeof self<"u"?self:typeof window<"u"?window:{});var n0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var LG,mp,UG,_0,S1,FG,jG,BG;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(b,C,V){return b==Array.prototype||b==Object.prototype||(b[C]=V.value),b};function n(b){b=[typeof globalThis=="object"&&globalThis,b,typeof window=="object"&&window,typeof self=="object"&&self,typeof n0=="object"&&n0];for(var C=0;C<b.length;++C){var V=b[C];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var r=n(this);function i(b,C){if(C)e:{var V=r;b=b.split(".");for(var z=0;z<b.length-1;z++){var X=b[z];if(!(X in V))break e;V=V[X]}b=b[b.length-1],z=V[b],C=C(z),C!=z&&C!=null&&e(V,b,{configurable:!0,writable:!0,value:C})}}function s(b,C){b instanceof String&&(b+="");var V=0,z=!1,X={next:function(){if(!z&&V<b.length){var oe=V++;return{value:C(oe,b[oe]),done:!1}}return z=!0,{done:!0,value:void 0}}};return X[Symbol.iterator]=function(){return X},X}i("Array.prototype.values",function(b){return b||function(){return s(this,function(C,V){return V})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(b){var C=typeof b;return C=C!="object"?C:b?Array.isArray(b)?"array":C:"null",C=="array"||C=="object"&&typeof b.length=="number"}function d(b){var C=typeof b;return C=="object"&&b!=null||C=="function"}function f(b,C,V){return b.call.apply(b.bind,arguments)}function m(b,C,V){if(!b)throw Error();if(2<arguments.length){var z=Array.prototype.slice.call(arguments,2);return function(){var X=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(X,z),b.apply(C,X)}}return function(){return b.apply(C,arguments)}}function v(b,C,V){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,v.apply(null,arguments)}function _(b,C){var V=Array.prototype.slice.call(arguments,1);return function(){var z=V.slice();return z.push.apply(z,arguments),b.apply(this,z)}}function T(b,C){function V(){}V.prototype=C.prototype,b.aa=C.prototype,b.prototype=new V,b.prototype.constructor=b,b.Qb=function(z,X,oe){for(var Ae=Array(arguments.length-2),gt=2;gt<arguments.length;gt++)Ae[gt-2]=arguments[gt];return C.prototype[X].apply(z,Ae)}}function S(b){const C=b.length;if(0<C){const V=Array(C);for(let z=0;z<C;z++)V[z]=b[z];return V}return[]}function A(b,C){for(let V=1;V<arguments.length;V++){const z=arguments[V];if(u(z)){const X=b.length||0,oe=z.length||0;b.length=X+oe;for(let Ae=0;Ae<oe;Ae++)b[X+Ae]=z[Ae]}else b.push(z)}}class I{constructor(C,V){this.i=C,this.j=V,this.h=0,this.g=null}get(){let C;return 0<this.h?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function D(b){return/^[\s\xa0]*$/.test(b)}function N(){var b=l.navigator;return b&&(b=b.userAgent)?b:""}function U(b){return U[" "](b),b}U[" "]=function(){};var O=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function q(b,C,V){for(const z in b)C.call(V,b[z],z,b)}function M(b,C){for(const V in b)C.call(void 0,b[V],V,b)}function R(b){const C={};for(const V in b)C[V]=b[V];return C}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(b,C){let V,z;for(let X=1;X<arguments.length;X++){z=arguments[X];for(V in z)b[V]=z[V];for(let oe=0;oe<k.length;oe++)V=k[oe],Object.prototype.hasOwnProperty.call(z,V)&&(b[V]=z[V])}}function j(b){var C=1;b=b.split(":");const V=[];for(;0<C&&b.length;)V.push(b.shift()),C--;return b.length&&V.push(b.join(":")),V}function G(b){l.setTimeout(()=>{throw b},0)}function $(){var b=_e;let C=null;return b.g&&(C=b.g,b.g=b.g.next,b.g||(b.h=null),C.next=null),C}class de{constructor(){this.h=this.g=null}add(C,V){const z=ve.get();z.set(C,V),this.h?this.h.next=z:this.g=z,this.h=z}}var ve=new I(()=>new Y,b=>b.reset());class Y{constructor(){this.next=this.g=this.h=null}set(C,V){this.h=C,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let se,Q=!1,_e=new de,H=()=>{const b=l.Promise.resolve(void 0);se=()=>{b.then(ae)}};var ae=()=>{for(var b;b=$();){try{b.h.call(b.g)}catch(V){G(V)}var C=ve;C.j(b),100>C.h&&(C.h++,b.next=C.g,C.g=b)}Q=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ce(b,C){this.type=b,this.g=this.target=C,this.defaultPrevented=!1}ce.prototype.h=function(){this.defaultPrevented=!0};var Ee=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var b=!1,C=Object.defineProperty({},"passive",{get:function(){b=!0}});try{const V=()=>{};l.addEventListener("test",V,C),l.removeEventListener("test",V,C)}catch{}return b})();function Me(b,C){if(ce.call(this,b?b.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,b){var V=this.type=b.type,z=b.changedTouches&&b.changedTouches.length?b.changedTouches[0]:null;if(this.target=b.target||b.srcElement,this.g=C,C=b.relatedTarget){if(O){e:{try{U(C.nodeName);var X=!0;break e}catch{}X=!1}X||(C=null)}}else V=="mouseover"?C=b.fromElement:V=="mouseout"&&(C=b.toElement);this.relatedTarget=C,z?(this.clientX=z.clientX!==void 0?z.clientX:z.pageX,this.clientY=z.clientY!==void 0?z.clientY:z.pageY,this.screenX=z.screenX||0,this.screenY=z.screenY||0):(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0),this.button=b.button,this.key=b.key||"",this.ctrlKey=b.ctrlKey,this.altKey=b.altKey,this.shiftKey=b.shiftKey,this.metaKey=b.metaKey,this.pointerId=b.pointerId||0,this.pointerType=typeof b.pointerType=="string"?b.pointerType:je[b.pointerType]||"",this.state=b.state,this.i=b,b.defaultPrevented&&Me.aa.h.call(this)}}T(Me,ce);var je={2:"touch",3:"pen",4:"mouse"};Me.prototype.h=function(){Me.aa.h.call(this);var b=this.i;b.preventDefault?b.preventDefault():b.returnValue=!1};var xe="closure_listenable_"+(1e6*Math.random()|0),ot=0;function Te(b,C,V,z,X){this.listener=b,this.proxy=null,this.src=C,this.type=V,this.capture=!!z,this.ha=X,this.key=++ot,this.da=this.fa=!1}function we(b){b.da=!0,b.listener=null,b.proxy=null,b.src=null,b.ha=null}function Pe(b){this.src=b,this.g={},this.h=0}Pe.prototype.add=function(b,C,V,z,X){var oe=b.toString();b=this.g[oe],b||(b=this.g[oe]=[],this.h++);var Ae=It(b,C,z,X);return-1<Ae?(C=b[Ae],V||(C.fa=!1)):(C=new Te(C,this.src,oe,!!z,X),C.fa=V,b.push(C)),C};function ue(b,C){var V=C.type;if(V in b.g){var z=b.g[V],X=Array.prototype.indexOf.call(z,C,void 0),oe;(oe=0<=X)&&Array.prototype.splice.call(z,X,1),oe&&(we(C),b.g[V].length==0&&(delete b.g[V],b.h--))}}function It(b,C,V,z){for(var X=0;X<b.length;++X){var oe=b[X];if(!oe.da&&oe.listener==C&&oe.capture==!!V&&oe.ha==z)return X}return-1}var it="closure_lm_"+(1e6*Math.random()|0),Wt={};function un(b,C,V,z,X){if(Array.isArray(C)){for(var oe=0;oe<C.length;oe++)un(b,C[oe],V,z,X);return null}return V=Wc(V),b&&b[xe]?b.K(C,V,d(z)?!!z.capture:!1,X):cn(b,C,V,!1,z,X)}function cn(b,C,V,z,X,oe){if(!C)throw Error("Invalid event type");var Ae=d(X)?!!X.capture:!!X,gt=Aa(b);if(gt||(b[it]=gt=new Pe(b)),V=gt.add(C,V,z,Ae,oe),V.proxy)return V;if(z=Sa(),V.proxy=z,z.src=b,z.listener=V,b.addEventListener)Ee||(X=Ae),X===void 0&&(X=!1),b.addEventListener(C.toString(),z,X);else if(b.attachEvent)b.attachEvent(dn(C.toString()),z);else if(b.addListener&&b.removeListener)b.addListener(z);else throw Error("addEventListener and attachEvent are unavailable.");return V}function Sa(){function b(V){return C.call(b.src,b.listener,V)}const C=Kc;return b}function ru(b,C,V,z,X){if(Array.isArray(C))for(var oe=0;oe<C.length;oe++)ru(b,C[oe],V,z,X);else z=d(z)?!!z.capture:!!z,V=Wc(V),b&&b[xe]?(b=b.i,C=String(C).toString(),C in b.g&&(oe=b.g[C],V=It(oe,V,z,X),-1<V&&(we(oe[V]),Array.prototype.splice.call(oe,V,1),oe.length==0&&(delete b.g[C],b.h--)))):b&&(b=Aa(b))&&(C=b.g[C.toString()],b=-1,C&&(b=It(C,V,z,X)),(V=-1<b?C[b]:null)&&Oi(V))}function Oi(b){if(typeof b!="number"&&b&&!b.da){var C=b.src;if(C&&C[xe])ue(C.i,b);else{var V=b.type,z=b.proxy;C.removeEventListener?C.removeEventListener(V,z,b.capture):C.detachEvent?C.detachEvent(dn(V),z):C.addListener&&C.removeListener&&C.removeListener(z),(V=Aa(C))?(ue(V,b),V.h==0&&(V.src=null,C[it]=null)):we(b)}}}function dn(b){return b in Wt?Wt[b]:Wt[b]="on"+b}function Kc(b,C){if(b.da)b=!0;else{C=new Me(C,this);var V=b.listener,z=b.ha||b.src;b.fa&&Oi(b),b=V.call(z,C)}return b}function Aa(b){return b=b[it],b instanceof Pe?b:null}var iu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wc(b){return typeof b=="function"?b:(b[iu]||(b[iu]=function(C){return b.handleEvent(C)}),b[iu])}function Yt(){le.call(this),this.i=new Pe(this),this.M=this,this.F=null}T(Yt,le),Yt.prototype[xe]=!0,Yt.prototype.removeEventListener=function(b,C,V,z){ru(this,b,C,V,z)};function St(b,C){var V,z=b.F;if(z)for(V=[];z;z=z.F)V.push(z);if(b=b.M,z=C.type||C,typeof C=="string")C=new ce(C,b);else if(C instanceof ce)C.target=C.target||b;else{var X=C;C=new ce(z,b),F(C,X)}if(X=!0,V)for(var oe=V.length-1;0<=oe;oe--){var Ae=C.g=V[oe];X=er(Ae,z,!0,C)&&X}if(Ae=C.g=b,X=er(Ae,z,!0,C)&&X,X=er(Ae,z,!1,C)&&X,V)for(oe=0;oe<V.length;oe++)Ae=C.g=V[oe],X=er(Ae,z,!1,C)&&X}Yt.prototype.N=function(){if(Yt.aa.N.call(this),this.i){var b=this.i,C;for(C in b.g){for(var V=b.g[C],z=0;z<V.length;z++)we(V[z]);delete b.g[C],b.h--}}this.F=null},Yt.prototype.K=function(b,C,V,z){return this.i.add(String(b),C,!1,V,z)},Yt.prototype.L=function(b,C,V,z){return this.i.add(String(b),C,!0,V,z)};function er(b,C,V,z){if(C=b.i.g[String(C)],!C)return!0;C=C.concat();for(var X=!0,oe=0;oe<C.length;++oe){var Ae=C[oe];if(Ae&&!Ae.da&&Ae.capture==V){var gt=Ae.listener,qn=Ae.ha||Ae.src;Ae.fa&&ue(b.i,Ae),X=gt.call(qn,z)!==!1&&X}}return X&&!z.defaultPrevented}function tr(b,C,V){if(typeof b=="function")V&&(b=v(b,V));else if(b&&typeof b.handleEvent=="function")b=v(b.handleEvent,b);else throw Error("Invalid listener argument");return 2147483647<Number(C)?-1:l.setTimeout(b,C||0)}function Ca(b){b.g=tr(()=>{b.g=null,b.i&&(b.i=!1,Ca(b))},b.l);const C=b.h;b.h=null,b.m.apply(null,C)}class Lh extends le{constructor(C,V){super(),this.m=C,this.l=V,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:Ca(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ns(b){le.call(this),this.h=b,this.g={}}T(Ns,le);var bo=[];function ke(b){q(b.g,function(C,V){this.g.hasOwnProperty(V)&&Oi(C)},b),b.g={}}Ns.prototype.N=function(){Ns.aa.N.call(this),ke(this)},Ns.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ge=l.JSON.stringify,Ye=l.JSON.parse,tt=class{stringify(b){return l.JSON.stringify(b,void 0)}parse(b){return l.JSON.parse(b,void 0)}};function Je(){}Je.prototype.h=null;function fr(b){return b.h||(b.h=b.i())}function ci(){}var di={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function _o(){ce.call(this,"d")}T(_o,ce);function Uh(){ce.call(this,"c")}T(Uh,ce);var Ms={},Fh=null;function Ia(){return Fh=Fh||new Yt}Ms.La="serverreachability";function Yc(b){ce.call(this,Ms.La,b)}T(Yc,ce);function Ra(b){const C=Ia();St(C,new Yc(C))}Ms.STAT_EVENT="statevent";function py(b,C){ce.call(this,Ms.STAT_EVENT,b),this.stat=C}T(py,ce);function en(b){const C=Ia();St(C,new py(C,b))}Ms.Ma="timingevent";function Bn(b,C){ce.call(this,Ms.Ma,b),this.size=C}T(Bn,ce);function Pn(b,C){if(typeof b!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){b()},C)}function Vi(){this.g=!0}Vi.prototype.xa=function(){this.g=!1};function jh(b,C,V,z,X,oe){b.info(function(){if(b.g)if(oe)for(var Ae="",gt=oe.split("&"),qn=0;qn<gt.length;qn++){var yt=gt[qn].split("=");if(1<yt.length){var rr=yt[0];yt=yt[1];var zn=rr.split("_");Ae=2<=zn.length&&zn[1]=="type"?Ae+(rr+"="+yt+"&"):Ae+(rr+"=redacted&")}}else Ae=null;else Ae=oe;return"XMLHTTP REQ ("+z+") [attempt "+X+"]: "+C+`
`+V+`
`+Ae})}function v_(b,C,V,z,X,oe,Ae){b.info(function(){return"XMLHTTP RESP ("+z+") [ attempt "+X+"]: "+C+`
`+V+`
`+oe+" "+Ae})}function Pa(b,C,V,z){b.info(function(){return"XMLHTTP TEXT ("+C+"): "+su(b,V)+(z?" "+z:"")})}function gy(b,C){b.info(function(){return"TIMEOUT: "+C})}Vi.prototype.info=function(){};function su(b,C){if(!b.g)return C;if(!C)return null;try{var V=JSON.parse(C);if(V){for(b=0;b<V.length;b++)if(Array.isArray(V[b])){var z=V[b];if(!(2>z.length)){var X=z[1];if(Array.isArray(X)&&!(1>X.length)){var oe=X[0];if(oe!="noop"&&oe!="stop"&&oe!="close")for(var Ae=1;Ae<X.length;Ae++)X[Ae]=""}}}}return Ge(V)}catch{return C}}var Na={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},wo={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ds;function ks(){}T(ks,Je),ks.prototype.g=function(){return new XMLHttpRequest},ks.prototype.i=function(){return{}},Ds=new ks;function jr(b,C,V,z){this.j=b,this.i=C,this.l=V,this.R=z||1,this.U=new Ns(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Tn}function Tn(){this.i=null,this.g="",this.h=!1}var Bh={},Jc={};function hs(b,C,V){b.L=1,b.v=cu(fi(C)),b.m=V,b.P=!0,To(b,null)}function To(b,C){b.F=Date.now(),ou(b),b.A=fi(b.v);var V=b.A,z=b.R;Array.isArray(z)||(z=[String(z)]),Kh(V.i,"t",z),b.C=0,V=b.j.J,b.h=new Tn,b.g=My(b.j,V?C:null,!b.m),0<b.O&&(b.M=new Lh(v(b.Y,b,b.g),b.O)),C=b.U,V=b.g,z=b.ca;var X="readystatechange";Array.isArray(X)||(X&&(bo[0]=X.toString()),X=bo);for(var oe=0;oe<X.length;oe++){var Ae=un(V,X[oe],z||C.handleEvent,!1,C.h||C);if(!Ae)break;C.g[Ae.key]=Ae}C=b.H?R(b.H):{},b.m?(b.u||(b.u="POST"),C["Content-Type"]="application/x-www-form-urlencoded",b.g.ea(b.A,b.u,b.m,C)):(b.u="GET",b.g.ea(b.A,b.u,null,C)),Ra(),jh(b.i,b.u,b.A,b.l,b.R,b.m)}jr.prototype.ca=function(b){b=b.target;const C=this.M;C&&ji(b)==3?C.j():this.Y(b)},jr.prototype.Y=function(b){try{if(b==this.g)e:{const zn=ji(this.g);var C=this.g.Ba();const No=this.g.Z();if(!(3>zn)&&(zn!=3||this.g&&(this.h.h||this.g.oa()||Ey(this.g)))){this.J||zn!=4||C==7||(C==8||0>=No?Ra(3):Ra(2)),Ma(this);var V=this.g.Z();this.X=V;t:if(yy(this)){var z=Ey(this.g);b="";var X=z.length,oe=ji(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){hr(this),Os(this);var Ae="";break t}this.h.i=new l.TextDecoder}for(C=0;C<X;C++)this.h.h=!0,b+=this.h.i.decode(z[C],{stream:!(oe&&C==X-1)});z.length=0,this.h.g+=b,this.C=0,Ae=this.h.g}else Ae=this.g.oa();if(this.o=V==200,v_(this.i,this.u,this.A,this.l,this.R,zn,V),this.o){if(this.T&&!this.K){t:{if(this.g){var gt,qn=this.g;if((gt=qn.g?qn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(gt)){var yt=gt;break t}}yt=null}if(V=yt)Pa(this.i,this.l,V,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,au(this,V);else{this.o=!1,this.s=3,en(12),hr(this),Os(this);break e}}if(this.P){V=!0;let mr;for(;!this.J&&this.C<Ae.length;)if(mr=vy(this,Ae),mr==Jc){zn==4&&(this.s=4,en(14),V=!1),Pa(this.i,this.l,null,"[Incomplete Response]");break}else if(mr==Bh){this.s=4,en(15),Pa(this.i,this.l,Ae,"[Invalid Chunk]"),V=!1;break}else Pa(this.i,this.l,mr,null),au(this,mr);if(yy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),zn!=4||Ae.length!=0||this.h.h||(this.s=1,en(16),V=!1),this.o=this.o&&V,!V)Pa(this.i,this.l,Ae,"[Invalid Chunked Response]"),hr(this),Os(this);else if(0<Ae.length&&!this.W){this.W=!0;var rr=this.j;rr.g==this&&rr.ba&&!rr.M&&(rr.j.info("Great, no buffering proxy detected. Bytes received: "+Ae.length),vu(rr),rr.M=!0,en(11))}}else Pa(this.i,this.l,Ae,null),au(this,Ae);zn==4&&hr(this),this.o&&!this.J&&(zn==4?Ry(this.j,this):(this.o=!1,ou(this)))}else T_(this.g),V==400&&0<Ae.indexOf("Unknown SID")?(this.s=3,en(12)):(this.s=0,en(13)),hr(this),Os(this)}}}catch{}finally{}};function yy(b){return b.g?b.u=="GET"&&b.L!=2&&b.j.Ca:!1}function vy(b,C){var V=b.C,z=C.indexOf(`
`,V);return z==-1?Jc:(V=Number(C.substring(V,z)),isNaN(V)?Bh:(z+=1,z+V>C.length?Jc:(C=C.slice(z,z+V),b.C=z+V,C)))}jr.prototype.cancel=function(){this.J=!0,hr(this)};function ou(b){b.S=Date.now()+b.I,xy(b,b.I)}function xy(b,C){if(b.B!=null)throw Error("WatchDog timer not null");b.B=Pn(v(b.ba,b),C)}function Ma(b){b.B&&(l.clearTimeout(b.B),b.B=null)}jr.prototype.ba=function(){this.B=null;const b=Date.now();0<=b-this.S?(gy(this.i,this.A),this.L!=2&&(Ra(),en(17)),hr(this),this.s=2,Os(this)):xy(this,this.S-b)};function Os(b){b.j.G==0||b.J||Ry(b.j,b)}function hr(b){Ma(b);var C=b.M;C&&typeof C.ma=="function"&&C.ma(),b.M=null,ke(b.U),b.g&&(C=b.g,b.g=null,C.abort(),C.ma())}function au(b,C){try{var V=b.j;if(V.G!=0&&(V.g==b||qh(V.h,b))){if(!b.K&&qh(V.h,b)&&V.G==3){try{var z=V.Da.g.parse(C)}catch{z=null}if(Array.isArray(z)&&z.length==3){var X=z;if(X[0]==0){e:if(!V.u){if(V.g)if(V.g.F+3e3<b.F)ld(V),od(V);else break e;Xh(V),en(18)}}else V.za=X[1],0<V.za-V.T&&37500>X[2]&&V.F&&V.v==0&&!V.C&&(V.C=Pn(v(V.Za,V),6e3));if(1>=Xc(V.h)&&V.ca){try{V.ca()}catch{}V.ca=void 0}}else Po(V,11)}else if((b.K||V.g==b)&&ld(V),!D(C))for(X=V.Da.g.parse(C),C=0;C<X.length;C++){let yt=X[C];if(V.T=yt[0],yt=yt[1],V.G==2)if(yt[0]=="c"){V.K=yt[1],V.ia=yt[2];const rr=yt[3];rr!=null&&(V.la=rr,V.j.info("VER="+V.la));const zn=yt[4];zn!=null&&(V.Aa=zn,V.j.info("SVER="+V.Aa));const No=yt[5];No!=null&&typeof No=="number"&&0<No&&(z=1.5*No,V.L=z,V.j.info("backChannelRequestTimeoutMs_="+z)),z=V;const mr=b.g;if(mr){const qs=mr.g?mr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qs){var oe=z.h;oe.g||qs.indexOf("spdy")==-1&&qs.indexOf("quic")==-1&&qs.indexOf("h2")==-1||(oe.j=oe.l,oe.g=new Set,oe.h&&(Zc(oe,oe.h),oe.h=null))}if(z.D){const em=mr.g?mr.g.getResponseHeader("X-HTTP-Session-Id"):null;em&&(z.ya=em,Lt(z.I,z.D,em))}}V.G=3,V.l&&V.l.ua(),V.ba&&(V.R=Date.now()-b.F,V.j.info("Handshake RTT: "+V.R+"ms")),z=V;var Ae=b;if(z.qa=Ny(z,z.J?z.ia:null,z.W),Ae.K){Br(z.h,Ae);var gt=Ae,qn=z.L;qn&&(gt.I=qn),gt.B&&(Ma(gt),ou(gt)),z.g=Ae}else Cy(z);0<V.i.length&&ad(V)}else yt[0]!="stop"&&yt[0]!="close"||Po(V,7);else V.G==3&&(yt[0]=="stop"||yt[0]=="close"?yt[0]=="stop"?Po(V,7):Jh(V):yt[0]!="noop"&&V.l&&V.l.ta(yt),V.v=0)}}Ra(4)}catch{}}var by=class{constructor(b,C){this.g=b,this.map=C}};function Eo(b){this.l=b||10,l.PerformanceNavigationTiming?(b=l.performance.getEntriesByType("navigation"),b=0<b.length&&(b[0].nextHopProtocol=="hq"||b[0].nextHopProtocol=="h2")):b=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=b?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qc(b){return b.h?!0:b.g?b.g.size>=b.j:!1}function Xc(b){return b.h?1:b.g?b.g.size:0}function qh(b,C){return b.h?b.h==C:b.g?b.g.has(C):!1}function Zc(b,C){b.g?b.g.add(C):b.h=C}function Br(b,C){b.h&&b.h==C?b.h=null:b.g&&b.g.has(C)&&b.g.delete(C)}Eo.prototype.cancel=function(){if(this.i=zh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const b of this.g.values())b.cancel();this.g.clear()}};function zh(b){if(b.h!=null)return b.i.concat(b.h.D);if(b.g!=null&&b.g.size!==0){let C=b.i;for(const V of b.g.values())C=C.concat(V.D);return C}return S(b.i)}function x_(b){if(b.V&&typeof b.V=="function")return b.V();if(typeof Map<"u"&&b instanceof Map||typeof Set<"u"&&b instanceof Set)return Array.from(b.values());if(typeof b=="string")return b.split("");if(u(b)){for(var C=[],V=b.length,z=0;z<V;z++)C.push(b[z]);return C}C=[],V=0;for(z in b)C[V++]=b[z];return C}function ed(b){if(b.na&&typeof b.na=="function")return b.na();if(!b.V||typeof b.V!="function"){if(typeof Map<"u"&&b instanceof Map)return Array.from(b.keys());if(!(typeof Set<"u"&&b instanceof Set)){if(u(b)||typeof b=="string"){var C=[];b=b.length;for(var V=0;V<b;V++)C.push(V);return C}C=[],V=0;for(const z in b)C[V++]=z;return C}}}function $h(b,C){if(b.forEach&&typeof b.forEach=="function")b.forEach(C,void 0);else if(u(b)||typeof b=="string")Array.prototype.forEach.call(b,C,void 0);else for(var V=ed(b),z=x_(b),X=z.length,oe=0;oe<X;oe++)C.call(void 0,z[oe],V&&V[oe],b)}var lu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function b_(b,C){if(b){b=b.split("&");for(var V=0;V<b.length;V++){var z=b[V].indexOf("="),X=null;if(0<=z){var oe=b[V].substring(0,z);X=b[V].substring(z+1)}else oe=b[V];C(oe,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function Nn(b){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,b instanceof Nn){this.h=b.h,uu(this,b.j),this.o=b.o,this.g=b.g,Da(this,b.s),this.l=b.l;var C=b.i,V=new Ao;V.i=C.i,C.g&&(V.g=new Map(C.g),V.h=C.h),So(this,V),this.m=b.m}else b&&(C=String(b).match(lu))?(this.h=!1,uu(this,C[1]||"",!0),this.o=Li(C[2]||""),this.g=Li(C[3]||"",!0),Da(this,C[4]),this.l=Li(C[5]||"",!0),So(this,C[6]||"",!0),this.m=Li(C[7]||"")):(this.h=!1,this.i=new Ao(null,this.h))}Nn.prototype.toString=function(){var b=[],C=this.j;C&&b.push(du(C,Gh,!0),":");var V=this.g;return(V||C=="file")&&(b.push("//"),(C=this.o)&&b.push(du(C,Gh,!0),"@"),b.push(encodeURIComponent(String(V)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.s,V!=null&&b.push(":",String(V))),(V=this.l)&&(this.g&&V.charAt(0)!="/"&&b.push("/"),b.push(du(V,V.charAt(0)=="/"?__:Hh,!0))),(V=this.i.toString())&&b.push("?",V),(V=this.m)&&b.push("#",du(V,td)),b.join("")};function fi(b){return new Nn(b)}function uu(b,C,V){b.j=V?Li(C,!0):C,b.j&&(b.j=b.j.replace(/:$/,""))}function Da(b,C){if(C){if(C=Number(C),isNaN(C)||0>C)throw Error("Bad port number "+C);b.s=C}else b.s=null}function So(b,C,V){C instanceof Ao?(b.i=C,wy(b.i,b.h)):(V||(C=du(C,w_)),b.i=new Ao(C,b.h))}function Lt(b,C,V){b.i.set(C,V)}function cu(b){return Lt(b,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),b}function Li(b,C){return b?C?decodeURI(b.replace(/%25/g,"%2525")):decodeURIComponent(b):""}function du(b,C,V){return typeof b=="string"?(b=encodeURI(b).replace(C,_y),V&&(b=b.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b):null}function _y(b){return b=b.charCodeAt(0),"%"+(b>>4&15).toString(16)+(b&15).toString(16)}var Gh=/[#\/\?@]/g,Hh=/[#\?:]/g,__=/[#\?]/g,w_=/[#\?@]/g,td=/#/g;function Ao(b,C){this.h=this.g=null,this.i=b||null,this.j=!!C}function Ui(b){b.g||(b.g=new Map,b.h=0,b.i&&b_(b.i,function(C,V){b.add(decodeURIComponent(C.replace(/\+/g," ")),V)}))}t=Ao.prototype,t.add=function(b,C){Ui(this),this.i=null,b=Vs(this,b);var V=this.g.get(b);return V||this.g.set(b,V=[]),V.push(C),this.h+=1,this};function Co(b,C){Ui(b),C=Vs(b,C),b.g.has(C)&&(b.i=null,b.h-=b.g.get(C).length,b.g.delete(C))}function Io(b,C){return Ui(b),C=Vs(b,C),b.g.has(C)}t.forEach=function(b,C){Ui(this),this.g.forEach(function(V,z){V.forEach(function(X){b.call(C,X,z,this)},this)},this)},t.na=function(){Ui(this);const b=Array.from(this.g.values()),C=Array.from(this.g.keys()),V=[];for(let z=0;z<C.length;z++){const X=b[z];for(let oe=0;oe<X.length;oe++)V.push(C[z])}return V},t.V=function(b){Ui(this);let C=[];if(typeof b=="string")Io(this,b)&&(C=C.concat(this.g.get(Vs(this,b))));else{b=Array.from(this.g.values());for(let V=0;V<b.length;V++)C=C.concat(b[V])}return C},t.set=function(b,C){return Ui(this),this.i=null,b=Vs(this,b),Io(this,b)&&(this.h-=this.g.get(b).length),this.g.set(b,[C]),this.h+=1,this},t.get=function(b,C){return b?(b=this.V(b),0<b.length?String(b[0]):C):C};function Kh(b,C,V){Co(b,C),0<V.length&&(b.i=null,b.g.set(Vs(b,C),S(V)),b.h+=V.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const b=[],C=Array.from(this.g.keys());for(var V=0;V<C.length;V++){var z=C[V];const oe=encodeURIComponent(String(z)),Ae=this.V(z);for(z=0;z<Ae.length;z++){var X=oe;Ae[z]!==""&&(X+="="+encodeURIComponent(String(Ae[z]))),b.push(X)}}return this.i=b.join("&")};function Vs(b,C){return C=String(C),b.j&&(C=C.toLowerCase()),C}function wy(b,C){C&&!b.j&&(Ui(b),b.i=null,b.g.forEach(function(V,z){var X=z.toLowerCase();z!=X&&(Co(this,z),Kh(this,X,V))},b)),b.j=C}function fu(b,C){const V=new Vi;if(l.Image){const z=new Image;z.onload=_(Fi,V,"TestLoadImage: loaded",!0,C,z),z.onerror=_(Fi,V,"TestLoadImage: error",!1,C,z),z.onabort=_(Fi,V,"TestLoadImage: abort",!1,C,z),z.ontimeout=_(Fi,V,"TestLoadImage: timeout",!1,C,z),l.setTimeout(function(){z.ontimeout&&z.ontimeout()},1e4),z.src=b}else C(!1)}function ms(b,C){const V=new Vi,z=new AbortController,X=setTimeout(()=>{z.abort(),Fi(V,"TestPingServer: timeout",!1,C)},1e4);fetch(b,{signal:z.signal}).then(oe=>{clearTimeout(X),oe.ok?Fi(V,"TestPingServer: ok",!0,C):Fi(V,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(X),Fi(V,"TestPingServer: error",!1,C)})}function Fi(b,C,V,z,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),z(V)}catch{}}function hu(){this.g=new tt}function Ls(b,C,V){const z=V||"";try{$h(b,function(X,oe){let Ae=X;d(X)&&(Ae=Ge(X)),C.push(z+oe+"="+encodeURIComponent(Ae))})}catch(X){throw C.push(z+"type="+encodeURIComponent("_badmap")),X}}function ka(b){this.l=b.Ub||null,this.j=b.eb||!1}T(ka,Je),ka.prototype.g=function(){return new Ro(this.l,this.j)},ka.prototype.i=(function(b){return function(){return b}})({});function Ro(b,C){Yt.call(this),this.D=b,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Ro,Yt),t=Ro.prototype,t.open=function(b,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=b,this.A=C,this.readyState=1,Fs(this)},t.send=function(b){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const C={headers:this.u,method:this.B,credentials:this.m,cache:void 0};b&&(C.body=b),(this.D||l).fetch(new Request(this.A,C)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Us(this)),this.readyState=0},t.Sa=function(b){if(this.g&&(this.l=b,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=b.headers,this.readyState=2,Fs(this)),this.g&&(this.readyState=3,Fs(this),this.g)))if(this.responseType==="arraybuffer")b.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in b){if(this.j=b.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Wh(this)}else b.text().then(this.Ra.bind(this),this.ga.bind(this))};function Wh(b){b.j.read().then(b.Pa.bind(b)).catch(b.ga.bind(b))}t.Pa=function(b){if(this.g){if(this.o&&b.value)this.response.push(b.value);else if(!this.o){var C=b.value?b.value:new Uint8Array(0);(C=this.v.decode(C,{stream:!b.done}))&&(this.response=this.responseText+=C)}b.done?Us(this):Fs(this),this.readyState==3&&Wh(this)}},t.Ra=function(b){this.g&&(this.response=this.responseText=b,Us(this))},t.Qa=function(b){this.g&&(this.response=b,Us(this))},t.ga=function(){this.g&&Us(this)};function Us(b){b.readyState=4,b.l=null,b.j=null,b.v=null,Fs(b)}t.setRequestHeader=function(b,C){this.u.append(b,C)},t.getResponseHeader=function(b){return this.h&&this.h.get(b.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const b=[],C=this.h.entries();for(var V=C.next();!V.done;)V=V.value,b.push(V[0]+": "+V[1]),V=C.next();return b.join(`\r
`)};function Fs(b){b.onreadystatechange&&b.onreadystatechange.call(b)}Object.defineProperty(Ro.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(b){this.m=b?"include":"same-origin"}});function Yh(b){let C="";return q(b,function(V,z){C+=z,C+=":",C+=V,C+=`\r
`}),C}function nr(b,C,V){e:{for(z in V){var z=!1;break e}z=!0}z||(V=Yh(V),typeof b=="string"?V!=null&&encodeURIComponent(String(V)):Lt(b,C,V))}function Rt(b){Yt.call(this),this.headers=new Map,this.o=b||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(Rt,Yt);var nd=/^https?$/i,mu=["POST","PUT"];t=Rt.prototype,t.Ha=function(b){this.J=b},t.ea=function(b,C,V,z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+b);C=C?C.toUpperCase():"GET",this.D=b,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ds.g(),this.v=this.o?fr(this.o):fr(Ds),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(C,String(b),!0),this.B=!1}catch(oe){Ty(this,oe);return}if(b=V||"",V=new Map(this.headers),z)if(Object.getPrototypeOf(z)===Object.prototype)for(var X in z)V.set(X,z[X]);else if(typeof z.keys=="function"&&typeof z.get=="function")for(const oe of z.keys())V.set(oe,z.get(oe));else throw Error("Unknown input type for opt_headers: "+String(z));z=Array.from(V.keys()).find(oe=>oe.toLowerCase()=="content-type"),X=l.FormData&&b instanceof l.FormData,!(0<=Array.prototype.indexOf.call(mu,C,void 0))||z||X||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[oe,Ae]of V)this.g.setRequestHeader(oe,Ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{pu(this),this.u=!0,this.g.send(b),this.u=!1}catch(oe){Ty(this,oe)}};function Ty(b,C){b.h=!1,b.g&&(b.j=!0,b.g.abort(),b.j=!1),b.l=C,b.m=5,rd(b),js(b)}function rd(b){b.A||(b.A=!0,St(b,"complete"),St(b,"error"))}t.abort=function(b){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=b||7,St(this,"complete"),St(this,"abort"),js(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),js(this,!0)),Rt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?id(this):this.bb())},t.bb=function(){id(this)};function id(b){if(b.h&&typeof o<"u"&&(!b.v[1]||ji(b)!=4||b.Z()!=2)){if(b.u&&ji(b)==4)tr(b.Ea,0,b);else if(St(b,"readystatechange"),ji(b)==4){b.h=!1;try{const Ae=b.Z();e:switch(Ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var V;if(!(V=C)){var z;if(z=Ae===0){var X=String(b.D).match(lu)[1]||null;!X&&l.self&&l.self.location&&(X=l.self.location.protocol.slice(0,-1)),z=!nd.test(X?X.toLowerCase():"")}V=z}if(V)St(b,"complete"),St(b,"success");else{b.m=6;try{var oe=2<ji(b)?b.g.statusText:""}catch{oe=""}b.l=oe+" ["+b.Z()+"]",rd(b)}}finally{js(b)}}}}function js(b,C){if(b.g){pu(b);const V=b.g,z=b.v[0]?()=>{}:null;b.g=null,b.v=null,C||St(b,"ready");try{V.onreadystatechange=z}catch{}}}function pu(b){b.I&&(l.clearTimeout(b.I),b.I=null)}t.isActive=function(){return!!this.g};function ji(b){return b.g?b.g.readyState:0}t.Z=function(){try{return 2<ji(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(b){if(this.g){var C=this.g.responseText;return b&&C.indexOf(b)==0&&(C=C.substring(b.length)),Ye(C)}};function Ey(b){try{if(!b.g)return null;if("response"in b.g)return b.g.response;switch(b.H){case"":case"text":return b.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in b.g)return b.g.mozResponseArrayBuffer}return null}catch{return null}}function T_(b){const C={};b=(b.g&&2<=ji(b)&&b.g.getAllResponseHeaders()||"").split(`\r
`);for(let z=0;z<b.length;z++){if(D(b[z]))continue;var V=j(b[z]);const X=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();const oe=C[X]||[];C[X]=oe,oe.push(V)}M(C,function(z){return z.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function gu(b,C,V){return V&&V.internalChannelParams&&V.internalChannelParams[b]||C}function sd(b){this.Aa=0,this.i=[],this.j=new Vi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=gu("failFast",!1,b),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=gu("baseRetryDelayMs",5e3,b),this.cb=gu("retryDelaySeedMs",1e4,b),this.Wa=gu("forwardChannelMaxRetries",2,b),this.wa=gu("forwardChannelRequestTimeoutMs",2e4,b),this.pa=b&&b.xmlHttpFactory||void 0,this.Xa=b&&b.Tb||void 0,this.Ca=b&&b.useFetchStreams||!1,this.L=void 0,this.J=b&&b.supportsCrossDomainXhr||!1,this.K="",this.h=new Eo(b&&b.concurrentRequestLimit),this.Da=new hu,this.P=b&&b.fastHandshake||!1,this.O=b&&b.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=b&&b.Rb||!1,b&&b.xa&&this.j.xa(),b&&b.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&b&&b.detectBufferingProxy||!1,this.ja=void 0,b&&b.longPollingTimeout&&0<b.longPollingTimeout&&(this.ja=b.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=sd.prototype,t.la=8,t.G=1,t.connect=function(b,C,V,z){en(0),this.W=b,this.H=C||{},V&&z!==void 0&&(this.H.OSID=V,this.H.OAID=z),this.F=this.X,this.I=Ny(this,null,this.W),ad(this)};function Jh(b){if(Sy(b),b.G==3){var C=b.U++,V=fi(b.I);if(Lt(V,"SID",b.K),Lt(V,"RID",C),Lt(V,"TYPE","terminate"),yu(b,V),C=new jr(b,b.j,C),C.L=2,C.v=cu(fi(V)),V=!1,l.navigator&&l.navigator.sendBeacon)try{V=l.navigator.sendBeacon(C.v.toString(),"")}catch{}!V&&l.Image&&(new Image().src=C.v,V=!0),V||(C.g=My(C.j,null),C.g.ea(C.v)),C.F=Date.now(),ou(C)}Py(b)}function od(b){b.g&&(vu(b),b.g.cancel(),b.g=null)}function Sy(b){od(b),b.u&&(l.clearTimeout(b.u),b.u=null),ld(b),b.h.cancel(),b.s&&(typeof b.s=="number"&&l.clearTimeout(b.s),b.s=null)}function ad(b){if(!Qc(b.h)&&!b.s){b.s=!0;var C=b.Ga;se||H(),Q||(se(),Q=!0),_e.add(C,b),b.B=0}}function E_(b,C){return Xc(b.h)>=b.h.j-(b.s?1:0)?!1:b.s?(b.i=C.D.concat(b.i),!0):b.G==1||b.G==2||b.B>=(b.Va?0:b.Wa)?!1:(b.s=Pn(v(b.Ga,b,C),Zh(b,b.B)),b.B++,!0)}t.Ga=function(b){if(this.s)if(this.s=null,this.G==1){if(!b){this.U=Math.floor(1e5*Math.random()),b=this.U++;const X=new jr(this,this.j,b);let oe=this.o;if(this.S&&(oe?(oe=R(oe),F(oe,this.S)):oe=this.S),this.m!==null||this.O||(X.H=oe,oe=null),this.P)e:{for(var C=0,V=0;V<this.i.length;V++){t:{var z=this.i[V];if("__data__"in z.map&&(z=z.map.__data__,typeof z=="string")){z=z.length;break t}z=void 0}if(z===void 0)break;if(C+=z,4096<C){C=V;break e}if(C===4096||V===this.i.length-1){C=V+1;break e}}C=1e3}else C=1e3;C=Ay(this,X,C),V=fi(this.I),Lt(V,"RID",b),Lt(V,"CVER",22),this.D&&Lt(V,"X-HTTP-Session-Id",this.D),yu(this,V),oe&&(this.O?C="headers="+encodeURIComponent(String(Yh(oe)))+"&"+C:this.m&&nr(V,this.m,oe)),Zc(this.h,X),this.Ua&&Lt(V,"TYPE","init"),this.P?(Lt(V,"$req",C),Lt(V,"SID","null"),X.T=!0,hs(X,V,null)):hs(X,V,C),this.G=2}}else this.G==3&&(b?Qh(this,b):this.i.length==0||Qc(this.h)||Qh(this))};function Qh(b,C){var V;C?V=C.l:V=b.U++;const z=fi(b.I);Lt(z,"SID",b.K),Lt(z,"RID",V),Lt(z,"AID",b.T),yu(b,z),b.m&&b.o&&nr(z,b.m,b.o),V=new jr(b,b.j,V,b.B+1),b.m===null&&(V.H=b.o),C&&(b.i=C.D.concat(b.i)),C=Ay(b,V,1e3),V.I=Math.round(.5*b.wa)+Math.round(.5*b.wa*Math.random()),Zc(b.h,V),hs(V,z,C)}function yu(b,C){b.H&&q(b.H,function(V,z){Lt(C,z,V)}),b.l&&$h({},function(V,z){Lt(C,z,V)})}function Ay(b,C,V){V=Math.min(b.i.length,V);var z=b.l?v(b.l.Na,b.l,b):null;e:{var X=b.i;let oe=-1;for(;;){const Ae=["count="+V];oe==-1?0<V?(oe=X[0].g,Ae.push("ofs="+oe)):oe=0:Ae.push("ofs="+oe);let gt=!0;for(let qn=0;qn<V;qn++){let yt=X[qn].g;const rr=X[qn].map;if(yt-=oe,0>yt)oe=Math.max(0,X[qn].g-100),gt=!1;else try{Ls(rr,Ae,"req"+yt+"_")}catch{z&&z(rr)}}if(gt){z=Ae.join("&");break e}}}return b=b.i.splice(0,V),C.D=b,z}function Cy(b){if(!b.g&&!b.u){b.Y=1;var C=b.Fa;se||H(),Q||(se(),Q=!0),_e.add(C,b),b.v=0}}function Xh(b){return b.g||b.u||3<=b.v?!1:(b.Y++,b.u=Pn(v(b.Fa,b),Zh(b,b.v)),b.v++,!0)}t.Fa=function(){if(this.u=null,Iy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var b=2*this.R;this.j.info("BP detection timer enabled: "+b),this.A=Pn(v(this.ab,this),b)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,en(10),od(this),Iy(this))};function vu(b){b.A!=null&&(l.clearTimeout(b.A),b.A=null)}function Iy(b){b.g=new jr(b,b.j,"rpc",b.Y),b.m===null&&(b.g.H=b.o),b.g.O=0;var C=fi(b.qa);Lt(C,"RID","rpc"),Lt(C,"SID",b.K),Lt(C,"AID",b.T),Lt(C,"CI",b.F?"0":"1"),!b.F&&b.ja&&Lt(C,"TO",b.ja),Lt(C,"TYPE","xmlhttp"),yu(b,C),b.m&&b.o&&nr(C,b.m,b.o),b.L&&(b.g.I=b.L);var V=b.g;b=b.ia,V.L=1,V.v=cu(fi(C)),V.m=null,V.P=!0,To(V,b)}t.Za=function(){this.C!=null&&(this.C=null,od(this),Xh(this),en(19))};function ld(b){b.C!=null&&(l.clearTimeout(b.C),b.C=null)}function Ry(b,C){var V=null;if(b.g==C){ld(b),vu(b),b.g=null;var z=2}else if(qh(b.h,C))V=C.D,Br(b.h,C),z=1;else return;if(b.G!=0){if(C.o)if(z==1){V=C.m?C.m.length:0,C=Date.now()-C.F;var X=b.B;z=Ia(),St(z,new Bn(z,V)),ad(b)}else Cy(b);else if(X=C.s,X==3||X==0&&0<C.X||!(z==1&&E_(b,C)||z==2&&Xh(b)))switch(V&&0<V.length&&(C=b.h,C.i=C.i.concat(V)),X){case 1:Po(b,5);break;case 4:Po(b,10);break;case 3:Po(b,6);break;default:Po(b,2)}}}function Zh(b,C){let V=b.Ta+Math.floor(Math.random()*b.cb);return b.isActive()||(V*=2),V*C}function Po(b,C){if(b.j.info("Error code "+C),C==2){var V=v(b.fb,b),z=b.Xa;const X=!z;z=new Nn(z||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||uu(z,"https"),cu(z),X?fu(z.toString(),V):ms(z.toString(),V)}else en(2);b.G=0,b.l&&b.l.sa(C),Py(b),Sy(b)}t.fb=function(b){b?(this.j.info("Successfully pinged google.com"),en(2)):(this.j.info("Failed to ping google.com"),en(1))};function Py(b){if(b.G=0,b.ka=[],b.l){const C=zh(b.h);(C.length!=0||b.i.length!=0)&&(A(b.ka,C),A(b.ka,b.i),b.h.i.length=0,S(b.i),b.i.length=0),b.l.ra()}}function Ny(b,C,V){var z=V instanceof Nn?fi(V):new Nn(V);if(z.g!="")C&&(z.g=C+"."+z.g),Da(z,z.s);else{var X=l.location;z=X.protocol,C=C?C+"."+X.hostname:X.hostname,X=+X.port;var oe=new Nn(null);z&&uu(oe,z),C&&(oe.g=C),X&&Da(oe,X),V&&(oe.l=V),z=oe}return V=b.D,C=b.ya,V&&C&&Lt(z,V,C),Lt(z,"VER",b.la),yu(b,z),z}function My(b,C,V){if(C&&!b.J)throw Error("Can't create secondary domain capable XhrIo object.");return C=b.Ca&&!b.pa?new Rt(new ka({eb:V})):new Rt(b.pa),C.Ha(b.J),C}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Dy(){}t=Dy.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ud(){}ud.prototype.g=function(b,C){return new qr(b,C)};function qr(b,C){Yt.call(this),this.g=new sd(C),this.l=b,this.h=C&&C.messageUrlParams||null,b=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(b?b["X-Client-Protocol"]="webchannel":b={"X-Client-Protocol":"webchannel"}),this.g.o=b,b=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(b?b["X-WebChannel-Content-Type"]=C.messageContentType:b={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.va&&(b?b["X-WebChannel-Client-Profile"]=C.va:b={"X-WebChannel-Client-Profile":C.va}),this.g.S=b,(b=C&&C.Sb)&&!D(b)&&(this.g.m=b),this.v=C&&C.supportsCrossDomainXhr||!1,this.u=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!D(C)&&(this.g.D=C,b=this.h,b!==null&&C in b&&(b=this.h,C in b&&delete b[C])),this.j=new Bs(this)}T(qr,Yt),qr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qr.prototype.close=function(){Jh(this.g)},qr.prototype.o=function(b){var C=this.g;if(typeof b=="string"){var V={};V.__data__=b,b=V}else this.u&&(V={},V.__data__=Ge(b),b=V);C.i.push(new by(C.Ya++,b)),C.G==3&&ad(C)},qr.prototype.N=function(){this.g.l=null,delete this.j,Jh(this.g),delete this.g,qr.aa.N.call(this)};function ky(b){_o.call(this),b.__headers__&&(this.headers=b.__headers__,this.statusCode=b.__status__,delete b.__headers__,delete b.__status__);var C=b.__sm__;if(C){e:{for(const V in C){b=V;break e}b=void 0}(this.i=b)&&(b=this.i,C=C!==null&&b in C?C[b]:void 0),this.data=C}else this.data=b}T(ky,_o);function Oy(){Uh.call(this),this.status=1}T(Oy,Uh);function Bs(b){this.g=b}T(Bs,Dy),Bs.prototype.ua=function(){St(this.g,"a")},Bs.prototype.ta=function(b){St(this.g,new ky(b))},Bs.prototype.sa=function(b){St(this.g,new Oy)},Bs.prototype.ra=function(){St(this.g,"b")},ud.prototype.createWebChannel=ud.prototype.g,qr.prototype.send=qr.prototype.o,qr.prototype.open=qr.prototype.m,qr.prototype.close=qr.prototype.close,BG=function(){return new ud},jG=function(){return Ia()},FG=Ms,S1={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Na.NO_ERROR=0,Na.TIMEOUT=8,Na.HTTP_ERROR=6,_0=Na,wo.COMPLETE="complete",UG=wo,ci.EventType=di,di.OPEN="a",di.CLOSE="b",di.ERROR="c",di.MESSAGE="d",Yt.prototype.listen=Yt.prototype.K,mp=ci,Rt.prototype.listenOnce=Rt.prototype.L,Rt.prototype.getLastError=Rt.prototype.Ka,Rt.prototype.getLastErrorCode=Rt.prototype.Ba,Rt.prototype.getStatus=Rt.prototype.Z,Rt.prototype.getResponseJson=Rt.prototype.Oa,Rt.prototype.getResponseText=Rt.prototype.oa,Rt.prototype.send=Rt.prototype.ea,Rt.prototype.setWithCredentials=Rt.prototype.Ha,LG=Rt}).apply(typeof n0<"u"?n0:typeof self<"u"?self:typeof window<"u"?window:{});const J3="@firebase/firestore",Q3="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ur.UNAUTHENTICATED=new ur(null),ur.GOOGLE_CREDENTIALS=new ur("google-credentials-uid"),ur.FIRST_PARTY=new ur("first-party-uid"),ur.MOCK_USER=new ur("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sh="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl=new Qx("@firebase/firestore");function Kd(){return kl.logLevel}function Z_e(t){kl.setLogLevel(t)}function ye(t,...e){if(kl.logLevel<=ft.DEBUG){const n=e.map(cP);kl.debug(`Firestore (${Sh}): ${t}`,...n)}}function Cn(t,...e){if(kl.logLevel<=ft.ERROR){const n=e.map(cP);kl.error(`Firestore (${Sh}): ${t}`,...n)}}function yo(t,...e){if(kl.logLevel<=ft.WARN){const n=e.map(cP);kl.warn(`Firestore (${Sh}): ${t}`,...n)}}function cP(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,qG(t,r,n)}function qG(t,e,n){let r=`FIRESTORE (${Sh}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Cn(r),new Error(r)}function Ue(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||qG(e,i,r)}function ewe(t,e){t||Ne(57014,e)}function Re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends Wr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zG{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class twe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(ur.UNAUTHENTICATED)))}shutdown(){}}class nwe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class rwe{constructor(e){this.t=e,this.currentUser=ur.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ue(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Sr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Sr,e.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const u=s;e.enqueueRetryable((async()=>{await u.promise,await i(this.currentUser)}))},l=u=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((u=>l(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Sr)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ue(typeof r.accessToken=="string",31837,{l:r}),new zG(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ue(e===null||typeof e=="string",2055,{h:e}),new ur(e)}}class iwe{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ur.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class swe{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new iwe(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(ur.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class X3{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class owe{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,rn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ue(this.o===void 0,3512);const r=s=>{s.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,ye("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>r(s)))};const i=s=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new X3(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ue(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new X3(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function awe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=awe(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function et(t,e){return t<e?-1:t>e?1:0}function A1(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return US(i)===US(s)?et(i,s):US(i)?1:-1}return et(t.length,e.length)}const lwe=55296,uwe=57343;function US(t){const e=t.charCodeAt(0);return e>=lwe&&e<=uwe}function jf(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}function $G(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3="__name__";class Ws{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ne(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ne(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ws.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ws?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Ws.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return et(e.length,n.length)}static compareSegments(e,n){const r=Ws.isNumericId(e),i=Ws.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Ws.extractNumericId(e).compare(Ws.extractNumericId(n)):A1(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Tl.fromString(e.substring(4,e.length-2))}}class mt extends Ws{construct(e,n,r){return new mt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ge(ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new mt(n)}static emptyPath(){return new mt([])}}const cwe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sn extends Ws{construct(e,n,r){return new sn(e,n,r)}static isValidIdentifier(e){return cwe.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Z3}static keyField(){return new sn([Z3])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ge(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new ge(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ge(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new ge(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new sn(n)}static emptyPath(){return new sn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(mt.fromString(e))}static fromName(e){return new Ce(mt.fromString(e).popFirst(5))}static empty(){return new Ce(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return mt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new mt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fP(t,e,n){if(!n)throw new ge(ie.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function GG(t,e,n,r){if(e===!0&&r===!0)throw new ge(ie.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function eU(t){if(!Ce.isDocumentKey(t))throw new ge(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function tU(t){if(Ce.isDocumentKey(t))throw new ge(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function HG(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function zb(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ne(12329,{type:typeof t})}function Tt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ge(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=zb(t);throw new ge(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function KG(t,e){if(e<=0)throw new ge(ie.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(t,e){const n={typeString:t};return e&&(n.value=e),n}function Zg(t,e){if(!HG(t))throw new ge(ie.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new ge(ie.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nU=-62135596800,rU=1e6;class Nt{static now(){return Nt.fromMillis(Date.now())}static fromDate(e){return Nt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*rU);return new Nt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ge(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ge(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<nU)throw new ge(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/rU}_compareTo(e){return this.seconds===e.seconds?et(this.nanoseconds,e.nanoseconds):et(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Nt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Zg(e,Nt._jsonSchema))return new Nt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-nU;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Nt._jsonSchemaVersion="firestore/timestamp/1.0",Nt._jsonSchema={type:Ln("string",Nt._jsonSchemaVersion),seconds:Ln("number"),nanoseconds:Ln("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{static fromTimestamp(e){return new Be(e)}static min(){return new Be(new Nt(0,0))}static max(){return new Be(new Nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bf=-1;class Px{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function C1(t){return t.fields.find((e=>e.kind===2))}function zu(t){return t.fields.filter((e=>e.kind!==2))}Px.UNKNOWN_ID=-1;class w0{constructor(e,n){this.fieldPath=e,this.kind=n}}class hg{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new hg(0,Di.min())}}function WG(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Be.fromTimestamp(r===1e9?new Nt(n+1,0):new Nt(n,r));return new Di(i,Ce.empty(),e)}function YG(t){return new Di(t.readTime,t.key,Bf)}class Di{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Di(Be.min(),Ce.empty(),Bf)}static max(){return new Di(Be.max(),Ce.empty(),Bf)}}function hP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ce.comparator(t.documentKey,e.documentKey),n!==0?n:et(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JG="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QG{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xl(t){if(t.code!==ie.FAILED_PRECONDITION||t.message!==JG)throw t;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Z(((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Z?n:Z.resolve(n)}catch(n){return Z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Z.reject(n)}static resolve(e){return new Z(((n,r)=>{n(e)}))}static reject(e){return new Z(((n,r)=>{r(e)}))}static waitFor(e){return new Z(((n,r)=>{let i=0,s=0,o=!1;e.forEach((l=>{++i,l.next((()=>{++s,o&&s===i&&n()}),(u=>r(u)))})),o=!0,s===i&&n()}))}static or(e){let n=Z.resolve(!1);for(const r of e)n=n.next((i=>i?Z.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,s)=>{r.push(n.call(this,i,s))})),this.waitFor(r)}static mapArray(e,n){return new Z(((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const d=u;n(e[d]).next((f=>{o[d]=f,++l,l===s&&r(o)}),(f=>i(f)))}}))}static doWhile(e,n){return new Z(((r,i)=>{const s=()=>{e()===!0?n().next((()=>{s()}),i):r()};s()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti="SimpleDb";class $b{static open(e,n,r,i){try{return new $b(n,e.transaction(i,r))}catch(s){throw new Dp(n,s)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new Sr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Dp(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=mP(r.target.error);this.S.reject(new Dp(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ye(Ti,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new fwe(n)}}class uo{static delete(e){return ye(Ti,"Removing database:",e),Gu(mC().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!zp())return!1;if(uo.F())return!0;const e=mn(),n=uo.M(e),r=0<n&&n<10,i=XG(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,uo.M(mn())===12.2&&Cn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ye(Ti,"Opening database:",this.name),this.db=await new Promise(((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new Dp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new ge(ie.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new ge(ie.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Dp(e,o))},i.onupgradeneeded=s=>{ye(Ti,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.N.k(o,i.transaction,s.oldVersion,this.version).next((()=>{ye(Ti,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const l=$b.open(this.db,e,s?"readonly":"readwrite",r),u=i(l).next((d=>(l.C(),d))).catch((d=>(l.abort(d),Z.reject(d)))).toPromise();return u.catch((()=>{})),await l.D,u}catch(l){const u=l,d=u.name!=="FirebaseError"&&o<3;if(ye(Ti,"Transaction failed with error:",u.message,"Retrying:",d),this.close(),!d)return Promise.reject(u)}}}close(){this.db&&this.db.close(),this.db=void 0}}function XG(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class dwe{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Gu(this.U.delete())}}class Dp extends ge{constructor(e,n){super(ie.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Zl(t){return t.name==="IndexedDbTransactionError"}class fwe{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(ye(Ti,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(ye(Ti,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Gu(r)}add(e){return ye(Ti,"ADD",this.store.name,e,e),Gu(this.store.add(e))}get(e){return Gu(this.store.get(e)).next((n=>(n===void 0&&(n=null),ye(Ti,"GET",this.store.name,e,n),n)))}delete(e){return ye(Ti,"DELETE",this.store.name,e),Gu(this.store.delete(e))}count(){return ye(Ti,"COUNT",this.store.name),Gu(this.store.count())}J(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new Z(((o,l)=>{s.onerror=u=>{l(u.target.error)},s.onsuccess=u=>{o(u.target.result)}}))}{const s=this.cursor(r),o=[];return this.H(s,((l,u)=>{o.push(u)})).next((()=>o))}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new Z(((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}}))}Z(e,n){ye(Ti,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const i=this.cursor(r);return this.H(i,((s,o,l)=>l.delete()))}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}te(e){const n=this.cursor({});return new Z(((r,i)=>{n.onerror=s=>{const o=mP(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next((l=>{l?o.continue():r()})):r()}}))}H(e,n){const r=[];return new Z(((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const l=o.target.result;if(!l)return void i();const u=new dwe(l),d=n(l.primaryKey,l.value,u);if(d instanceof Z){const f=d.catch((m=>(u.done(),Z.reject(m))));r.push(f)}u.isDone?i():u.G===null?l.continue():l.continue(u.G)}})).next((()=>Z.waitFor(r)))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Gu(t){return new Z(((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=mP(r.target.error);n(i)}}))}let iU=!1;function mP(t){const e=uo.M(mn());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new ge("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return iU||(iU=!0,setTimeout((()=>{throw r}),0)),r}}return t}const kp="IndexBackfiller";class hwe{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ye(kp,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const n=await this.ne.ie();ye(kp,`Documents written: ${n}`)}catch(n){Zl(n)?ye(kp,"Ignoring IndexedDB error during index backfill: ",n):await Xl(n)}await this.re(6e4)}))}}class mwe{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.se(n,e)))}se(e,n){const r=new Set;let i=n,s=!0;return Z.doWhile((()=>s===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((o=>{if(o!==null&&!r.has(o))return ye(kp,`Processing collection: ${o}`),this.oe(e,o,i).next((l=>{i-=l,r.add(o)}));s=!1})))).next((()=>n-i))}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next((i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next((s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next((()=>this._e(i,s))).next((l=>(ye(kp,`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,n,l)))).next((()=>o.size))}))))}_e(e,n){let r=e;return n.changes.forEach(((i,s)=>{const o=YG(s);hP(o,r)>0&&(r=o)})),new Di(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}oi.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const El=-1;function ey(t){return t==null}function mg(t){return t===0&&1/t==-1/0}function ZG(t){return typeof t=="number"&&Number.isInteger(t)&&!mg(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx="";function Ur(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=sU(e)),e=pwe(t.get(n),e);return sU(e)}function pwe(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case Nx:n+="";break;default:n+=s}}return n}function sU(t){return t+Nx+""}function no(t){const e=t.length;if(Ue(e>=2,64408,{path:t}),e===2)return Ue(t.charAt(0)===Nx&&t.charAt(1)==="",56145,{path:t}),mt.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf(Nx,s);switch((o<0||o>n)&&Ne(50515,{path:t}),t.charAt(o+1)){case"":const l=t.substring(s,o);let u;i.length===0?u=l:(i+=l,u=i,i=""),r.push(u);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:Ne(61167,{path:t})}s=o+2}return new mt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $u="remoteDocuments",ty="owner",Bd="owner",pg="mutationQueues",gwe="userId",xs="mutations",oU="batchId",ic="userMutationsIndex",aU=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(t,e){return[t,Ur(e)]}function e8(t,e,n){return[t,Ur(e),n]}const ywe={},qf="documentMutations",Mx="remoteDocumentsV14",vwe=["prefixPath","collectionGroup","readTime","documentId"],E0="documentKeyIndex",xwe=["prefixPath","collectionGroup","documentId"],t8="collectionGroupIndex",bwe=["collectionGroup","readTime","prefixPath","documentId"],gg="remoteDocumentGlobal",I1="remoteDocumentGlobalKey",zf="targets",n8="queryTargetsIndex",_we=["canonicalId","targetId"],$f="targetDocuments",wwe=["targetId","path"],pP="documentTargetsIndex",Twe=["path","targetId"],Dx="targetGlobalKey",gc="targetGlobal",yg="collectionParents",Ewe=["collectionId","parent"],Gf="clientMetadata",Swe="clientId",Gb="bundles",Awe="bundleId",Hb="namedQueries",Cwe="name",gP="indexConfiguration",Iwe="indexId",R1="collectionGroupIndex",Rwe="collectionGroup",Op="indexState",Pwe=["indexId","uid"],r8="sequenceNumberIndex",Nwe=["uid","sequenceNumber"],Vp="indexEntries",Mwe=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],i8="documentKeyIndex",Dwe=["indexId","uid","orderedDocumentKey"],Kb="documentOverlays",kwe=["userId","collectionPath","documentId"],P1="collectionPathOverlayIndex",Owe=["userId","collectionPath","largestBatchId"],s8="collectionGroupOverlayIndex",Vwe=["userId","collectionGroup","largestBatchId"],yP="globals",Lwe="name",o8=[pg,xs,qf,$u,zf,ty,gc,$f,Gf,gg,yg,Gb,Hb],Uwe=[...o8,Kb],a8=[pg,xs,qf,Mx,zf,ty,gc,$f,Gf,gg,yg,Gb,Hb,Kb],l8=a8,vP=[...l8,gP,Op,Vp],Fwe=vP,u8=[...vP,yP],jwe=u8;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1 extends QG{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Zn(t,e){const n=Re(t);return uo.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lU(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function eu(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function c8(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,n){this.comparator=e,this.root=n||_r.EMPTY}insert(e,n){return new Kt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,_r.BLACK,null,null))}remove(e){return new Kt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_r.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new r0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new r0(this.root,e,this.comparator,!1)}getReverseIterator(){return new r0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new r0(this.root,e,this.comparator,!0)}}class r0{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _r{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??_r.RED,this.left=i??_r.EMPTY,this.right=s??_r.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new _r(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return _r.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return _r.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_r.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_r.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ne(27949);return e+(this.isRed()?0:1)}}_r.EMPTY=null,_r.RED=!0,_r.BLACK=!1;_r.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne(57766)}get value(){throw Ne(16141)}get color(){throw Ne(16727)}get left(){throw Ne(29726)}get right(){throw Ne(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new _r(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.comparator=e,this.data=new Kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new uU(this.data.getIterator())}getIteratorFrom(e){return new uU(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Vt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Vt(this.comparator);return n.data=e,n}}class uU{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function qd(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this.fields=e,e.sort(sn.comparator)}static empty(){return new ai([])}unionWith(e){let n=new Vt(sn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ai(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return jf(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d8 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bwe(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new d8("Invalid base64 string: "+s):s}})(e);return new bn(n)}static fromUint8Array(e){const n=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new bn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return et(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bn.EMPTY_BYTE_STRING=new bn("");const qwe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ua(t){if(Ue(!!t,39018),typeof t=="string"){let e=0;const n=qwe.exec(t);if(Ue(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nn(t.seconds),nanos:nn(t.nanos)}}function nn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ca(t){return typeof t=="string"?bn.fromBase64String(t):bn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f8="server_timestamp",h8="__type__",m8="__previous_value__",p8="__local_write_time__";function Wb(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[h8])==null?void 0:r.stringValue)===f8}function Yb(t){const e=t.mapValue.fields[m8];return Wb(e)?Yb(e):e}function vg(t){const e=ua(t.mapValue.fields[p8].timestampValue);return new Nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zwe{constructor(e,n,r,i,s,o,l,u,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=f}}const M1="(default)";class Ol{constructor(e,n){this.projectId=e,this.database=n||M1}static empty(){return new Ol("","")}get isDefaultDatabase(){return this.database===M1}isEqual(e){return e instanceof Ol&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xP="__type__",g8="__max__",yl={mapValue:{fields:{__type__:{stringValue:g8}}}},bP="__vector__",Hf="value",S0={nullValue:"NULL_VALUE"};function Vl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Wb(t)?4:y8(t)?9007199254740991:Jb(t)?10:11:Ne(28295,{value:t})}function vo(t,e){if(t===e)return!0;const n=Vl(t);if(n!==Vl(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return vg(t).isEqual(vg(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ua(i.timestampValue),l=ua(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,s){return ca(i.bytesValue).isEqual(ca(s.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,s){return nn(i.geoPointValue.latitude)===nn(s.geoPointValue.latitude)&&nn(i.geoPointValue.longitude)===nn(s.geoPointValue.longitude)})(t,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return nn(i.integerValue)===nn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=nn(i.doubleValue),l=nn(s.doubleValue);return o===l?mg(o)===mg(l):isNaN(o)&&isNaN(l)}return!1})(t,e);case 9:return jf(t.arrayValue.values||[],e.arrayValue.values||[],vo);case 10:case 11:return(function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(lU(o)!==lU(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!vo(o[u],l[u])))return!1;return!0})(t,e);default:return Ne(52216,{left:t})}}function xg(t,e){return(t.values||[]).find((n=>vo(n,e)))!==void 0}function Ll(t,e){if(t===e)return 0;const n=Vl(t),r=Vl(e);if(n!==r)return et(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return et(t.booleanValue,e.booleanValue);case 2:return(function(s,o){const l=nn(s.integerValue||s.doubleValue),u=nn(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1})(t,e);case 3:return cU(t.timestampValue,e.timestampValue);case 4:return cU(vg(t),vg(e));case 5:return A1(t.stringValue,e.stringValue);case 6:return(function(s,o){const l=ca(s),u=ca(o);return l.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(s,o){const l=s.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const f=et(l[d],u[d]);if(f!==0)return f}return et(l.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(s,o){const l=et(nn(s.latitude),nn(o.latitude));return l!==0?l:et(nn(s.longitude),nn(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return dU(t.arrayValue,e.arrayValue);case 10:return(function(s,o){var v,_,T,S;const l=s.fields||{},u=o.fields||{},d=(v=l[Hf])==null?void 0:v.arrayValue,f=(_=u[Hf])==null?void 0:_.arrayValue,m=et(((T=d==null?void 0:d.values)==null?void 0:T.length)||0,((S=f==null?void 0:f.values)==null?void 0:S.length)||0);return m!==0?m:dU(d,f)})(t.mapValue,e.mapValue);case 11:return(function(s,o){if(s===yl.mapValue&&o===yl.mapValue)return 0;if(s===yl.mapValue)return 1;if(o===yl.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const v=A1(u[m],f[m]);if(v!==0)return v;const _=Ll(l[u[m]],d[f[m]]);if(_!==0)return _}return et(u.length,f.length)})(t.mapValue,e.mapValue);default:throw Ne(23264,{he:n})}}function cU(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return et(t,e);const n=ua(t),r=ua(e),i=et(n.seconds,r.seconds);return i!==0?i:et(n.nanos,r.nanos)}function dU(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ll(n[i],r[i]);if(s)return s}return et(n.length,r.length)}function Kf(t){return D1(t)}function D1(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=ua(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return ca(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Ce.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=D1(s);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${D1(n.fields[o])}`;return i+"}"})(t.mapValue):Ne(61005,{value:t})}function A0(t){switch(Vl(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Yb(t);return e?16+A0(e):16;case 5:return 2*t.stringValue.length;case 6:return ca(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,s)=>i+A0(s)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return eu(r.fields,((s,o)=>{i+=s.length+A0(o)})),i})(t.mapValue);default:throw Ne(13486,{value:t})}}function Ac(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function k1(t){return!!t&&"integerValue"in t}function bg(t){return!!t&&"arrayValue"in t}function fU(t){return!!t&&"nullValue"in t}function hU(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function C0(t){return!!t&&"mapValue"in t}function Jb(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[xP])==null?void 0:r.stringValue)===bP}function Lp(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return eu(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Lp(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Lp(t.arrayValue.values[n]);return e}return{...t}}function y8(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===g8}const v8={mapValue:{fields:{[xP]:{stringValue:bP},[Hf]:{arrayValue:{}}}}};function $we(t){return"nullValue"in t?S0:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Ac(Ol.empty(),Ce.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Jb(t)?v8:{mapValue:{}}:Ne(35942,{value:t})}function Gwe(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Ac(Ol.empty(),Ce.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?v8:"mapValue"in t?Jb(t)?{mapValue:{}}:yl:Ne(61959,{value:t})}function mU(t,e){const n=Ll(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function pU(t,e){const n=Ll(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this.value=e}static empty(){return new Tr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!C0(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lp(n)}setAll(e){let n=sn.emptyPath(),r={},i=[];e.forEach(((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=Lp(o):i.push(l.lastSegment())}));const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());C0(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vo(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];C0(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){eu(n,((i,s)=>e[i]=s));for(const i of r)delete e[i]}clone(){return new Tr(Lp(this.value))}}function x8(t){const e=[];return eu(t.fields,((n,r)=>{const i=new sn([n]);if(C0(r)){const s=x8(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)})),new ai(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Xt(e,0,Be.min(),Be.min(),Be.min(),Tr.empty(),0)}static newFoundDocument(e,n,r,i){return new Xt(e,1,n,Be.min(),r,i,0)}static newNoDocument(e,n){return new Xt(e,2,n,Be.min(),Be.min(),Tr.empty(),0)}static newUnknownDocument(e,n){return new Xt(e,3,n,Be.min(),Be.min(),Tr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,n){this.position=e,this.inclusive=n}}function gU(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Ce.comparator(Ce.fromName(o.referenceValue),n.key):r=Ll(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function yU(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vo(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e,n="asc"){this.field=e,this.dir=n}}function Hwe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b8{}class pt extends b8{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Kwe(e,n,r):n==="array-contains"?new Jwe(e,r):n==="in"?new A8(e,r):n==="not-in"?new Qwe(e,r):n==="array-contains-any"?new Xwe(e,r):new pt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Wwe(e,r):new Ywe(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ll(n,this.value)):n!==null&&Vl(this.value)===Vl(n)&&this.matchesComparison(Ll(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ot extends b8{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ot(e,n)}matches(e){return Wf(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Wf(t){return t.op==="and"}function O1(t){return t.op==="or"}function _P(t){return _8(t)&&Wf(t)}function _8(t){for(const e of t.filters)if(e instanceof Ot)return!1;return!0}function V1(t){if(t instanceof pt)return t.field.canonicalString()+t.op.toString()+Kf(t.value);if(_P(t))return t.filters.map((e=>V1(e))).join(",");{const e=t.filters.map((n=>V1(n))).join(",");return`${t.op}(${e})`}}function w8(t,e){return t instanceof pt?(function(r,i){return i instanceof pt&&r.op===i.op&&r.field.isEqual(i.field)&&vo(r.value,i.value)})(t,e):t instanceof Ot?(function(r,i){return i instanceof Ot&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((s,o,l)=>s&&w8(o,i.filters[l])),!0):!1})(t,e):void Ne(19439)}function T8(t,e){const n=t.filters.concat(e);return Ot.create(n,t.op)}function E8(t){return t instanceof pt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Kf(n.value)}`})(t):t instanceof Ot?(function(n){return n.op.toString()+" {"+n.getFilters().map(E8).join(" ,")+"}"})(t):"Filter"}class Kwe extends pt{constructor(e,n,r){super(e,n,r),this.key=Ce.fromName(r.referenceValue)}matches(e){const n=Ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class Wwe extends pt{constructor(e,n){super(e,"in",n),this.keys=S8("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class Ywe extends pt{constructor(e,n){super(e,"not-in",n),this.keys=S8("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function S8(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((r=>Ce.fromName(r.referenceValue)))}class Jwe extends pt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return bg(n)&&xg(n.arrayValue,this.value)}}class A8 extends pt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&xg(this.value.arrayValue,n)}}class Qwe extends pt{constructor(e,n){super(e,"not-in",n)}matches(e){if(xg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!xg(this.value.arrayValue,n)}}class Xwe extends pt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!bg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>xg(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zwe{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.Te=null}}function L1(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Zwe(t,e,n,r,i,s,o)}function Cc(t){const e=Re(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>V1(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(s){return s.field.canonicalString()+s.dir})(r))).join(","),ey(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Kf(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Kf(r))).join(",")),e.Te=n}return e.Te}function ny(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Hwe(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!w8(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!yU(t.startAt,e.startAt)&&yU(t.endAt,e.endAt)}function kx(t){return Ce.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Ox(t,e){return t.filters.filter((n=>n instanceof pt&&n.field.isEqual(e)))}function vU(t,e,n){let r=S0,i=!0;for(const s of Ox(t,e)){let o=S0,l=!0;switch(s.op){case"<":case"<=":o=$we(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,l=!1;break;case"!=":case"not-in":o=S0}mU({value:r,inclusive:i},{value:o,inclusive:l})<0&&(r=o,i=l)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];mU({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function xU(t,e,n){let r=yl,i=!0;for(const s of Ox(t,e)){let o=yl,l=!0;switch(s.op){case">=":case">":o=Gwe(s.value),l=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,l=!1;break;case"!=":case"not-in":o=yl}pU({value:r,inclusive:i},{value:o,inclusive:l})>0&&(r=o,i=l)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];pU({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function C8(t,e,n,r,i,s,o,l){return new xa(t,e,n,r,i,s,o,l)}function Ah(t){return new xa(t)}function bU(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function wP(t){return t.collectionGroup!==null}function _f(t){const e=Re(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Vt(sn.comparator);return o.filters.forEach((u=>{u.getFlattenedFilters().forEach((d=>{d.isInequality()&&(l=l.add(d.field))}))})),l})(e).forEach((s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new _g(s,r))})),n.has(sn.keyField().canonicalString())||e.Ie.push(new _g(sn.keyField(),r))}return e.Ie}function Jr(t){const e=Re(t);return e.Ee||(e.Ee=eTe(e,_f(t))),e.Ee}function eTe(t,e){if(t.limitType==="F")return L1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new _g(i.field,s)}));const n=t.endAt?new Ul(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ul(t.startAt.position,t.startAt.inclusive):null;return L1(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function U1(t,e){const n=t.filters.concat([e]);return new xa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Vx(t,e,n){return new xa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ry(t,e){return ny(Jr(t),Jr(e))&&t.limitType===e.limitType}function I8(t){return`${Cc(Jr(t))}|lt:${t.limitType}`}function Wd(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>E8(i))).join(", ")}]`),ey(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>Kf(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>Kf(i))).join(",")),`Target(${r})`})(Jr(t))}; limitType=${t.limitType})`}function iy(t,e){return e.isFoundDocument()&&(function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Ce.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(t,e)&&(function(r,i){for(const s of _f(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(o,l,u){const d=gU(o,l,u);return o.inclusive?d<=0:d<0})(r.startAt,_f(r),i)||r.endAt&&!(function(o,l,u){const d=gU(o,l,u);return o.inclusive?d>=0:d>0})(r.endAt,_f(r),i))})(t,e)}function R8(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function P8(t){return(e,n)=>{let r=!1;for(const i of _f(t)){const s=tTe(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function tTe(t,e,n){const r=t.field.isKeyField()?Ce.comparator(e.key,n.key):(function(s,o,l){const u=o.data.field(s),d=l.data.field(s);return u!==null&&d!==null?Ll(u,d):Ne(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ne(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){eu(this.inner,((n,r)=>{for(const[i,s]of r)e(i,s)}))}isEmpty(){return c8(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nTe=new Kt(Ce.comparator);function li(){return nTe}const N8=new Kt(Ce.comparator);function pp(...t){let e=N8;for(const n of t)e=e.insert(n.key,n);return e}function M8(t){let e=N8;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function ro(){return Up()}function D8(){return Up()}function Up(){return new ba((t=>t.toString()),((t,e)=>t.isEqual(e)))}const rTe=new Kt(Ce.comparator),iTe=new Vt(Ce.comparator);function rt(...t){let e=iTe;for(const n of t)e=e.add(n);return e}const sTe=new Vt(et);function TP(){return sTe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EP(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mg(e)?"-0":e}}function k8(t){return{integerValue:""+t}}function O8(t,e){return ZG(e)?k8(e):EP(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(){this._=void 0}}function oTe(t,e,n){return t instanceof Yf?(function(i,s){const o={fields:{[h8]:{stringValue:f8},[p8]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Wb(s)&&(s=Yb(s)),s&&(o.fields[m8]=s),{mapValue:o}})(n,e):t instanceof Ic?L8(t,e):t instanceof Rc?U8(t,e):(function(i,s){const o=V8(i,s),l=_U(o)+_U(i.Ae);return k1(o)&&k1(i.Ae)?k8(l):EP(i.serializer,l)})(t,e)}function aTe(t,e,n){return t instanceof Ic?L8(t,e):t instanceof Rc?U8(t,e):n}function V8(t,e){return t instanceof Jf?(function(r){return k1(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}class Yf extends Qb{}class Ic extends Qb{constructor(e){super(),this.elements=e}}function L8(t,e){const n=F8(e);for(const r of t.elements)n.some((i=>vo(i,r)))||n.push(r);return{arrayValue:{values:n}}}class Rc extends Qb{constructor(e){super(),this.elements=e}}function U8(t,e){let n=F8(e);for(const r of t.elements)n=n.filter((i=>!vo(i,r)));return{arrayValue:{values:n}}}class Jf extends Qb{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function _U(t){return nn(t.integerValue||t.doubleValue)}function F8(t){return bg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e,n){this.field=e,this.transform=n}}function lTe(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Ic&&i instanceof Ic||r instanceof Rc&&i instanceof Rc?jf(r.elements,i.elements,vo):r instanceof Jf&&i instanceof Jf?vo(r.Ae,i.Ae):r instanceof Yf&&i instanceof Yf})(t.transform,e.transform)}class uTe{constructor(e,n){this.version=e,this.transformResults=n}}class on{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new on}static exists(e){return new on(void 0,e)}static updateTime(e){return new on(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function I0(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Xb{}function j8(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ih(t.key,on.none()):new Ch(t.key,t.data,on.none());{const n=t.data,r=Tr.empty();let i=new Vt(sn.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new _a(t.key,r,new ai(i.toArray()),on.none())}}function cTe(t,e,n){t instanceof Ch?(function(i,s,o){const l=i.value.clone(),u=TU(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(t,e,n):t instanceof _a?(function(i,s,o){if(!I0(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=TU(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(B8(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()})(t,e,n):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function Fp(t,e,n,r){return t instanceof Ch?(function(s,o,l,u){if(!I0(s.precondition,o))return l;const d=s.value.clone(),f=EU(s.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null})(t,e,n,r):t instanceof _a?(function(s,o,l,u){if(!I0(s.precondition,o))return l;const d=EU(s.fieldTransforms,u,o),f=o.data;return f.setAll(B8(s)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((m=>m.field)))})(t,e,n,r):(function(s,o,l){return I0(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l})(t,e,n)}function dTe(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=V8(r.transform,i||null);s!=null&&(n===null&&(n=Tr.empty()),n.set(r.field,s))}return n||null}function wU(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&jf(r,i,((s,o)=>lTe(s,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ch extends Xb{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class _a extends Xb{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function B8(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function TU(t,e,n){const r=new Map;Ue(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,aTe(o,l,n[i]))}return r}function EU(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,oTe(s,o,e))}return r}class Ih extends Xb{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class SP extends Xb{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&cTe(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Fp(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Fp(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=D8();return this.mutations.forEach((i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const u=j8(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Be.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),rt())}isEqual(e){return this.batchId===e.batchId&&jf(this.mutations,e.mutations,((n,r)=>wU(n,r)))&&jf(this.baseMutations,e.baseMutations,((n,r)=>wU(n,r)))}}class CP{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ue(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return rTe})();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new CP(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fTe{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kn,xt;function q8(t){switch(t){case ie.OK:return Ne(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return Ne(15467,{code:t})}}function z8(t){if(t===void 0)return Cn("GRPC error has no .code"),ie.UNKNOWN;switch(t){case kn.OK:return ie.OK;case kn.CANCELLED:return ie.CANCELLED;case kn.UNKNOWN:return ie.UNKNOWN;case kn.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case kn.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case kn.INTERNAL:return ie.INTERNAL;case kn.UNAVAILABLE:return ie.UNAVAILABLE;case kn.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case kn.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case kn.NOT_FOUND:return ie.NOT_FOUND;case kn.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case kn.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case kn.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case kn.ABORTED:return ie.ABORTED;case kn.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case kn.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case kn.DATA_LOSS:return ie.DATA_LOSS;default:return Ne(39323,{code:t})}}(xt=kn||(kn={}))[xt.OK=0]="OK",xt[xt.CANCELLED=1]="CANCELLED",xt[xt.UNKNOWN=2]="UNKNOWN",xt[xt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xt[xt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xt[xt.NOT_FOUND=5]="NOT_FOUND",xt[xt.ALREADY_EXISTS=6]="ALREADY_EXISTS",xt[xt.PERMISSION_DENIED=7]="PERMISSION_DENIED",xt[xt.UNAUTHENTICATED=16]="UNAUTHENTICATED",xt[xt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xt[xt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xt[xt.ABORTED=10]="ABORTED",xt[xt.OUT_OF_RANGE=11]="OUT_OF_RANGE",xt[xt.UNIMPLEMENTED=12]="UNIMPLEMENTED",xt[xt.INTERNAL=13]="INTERNAL",xt[xt.UNAVAILABLE=14]="UNAVAILABLE",xt[xt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $8(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hTe=new Tl([4294967295,4294967295],0);function SU(t){const e=$8().encode(t),n=new VG;return n.update(e),new Uint8Array(n.digest())}function AU(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Tl([n,r],0),new Tl([i,s],0)]}class RP{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new gp(`Invalid padding: ${n}`);if(r<0)throw new gp(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new gp(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new gp(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Tl.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Tl.fromNumber(r)));return i.compare(hTe)===1&&(i=new Tl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=SU(e),[r,i]=AU(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new RP(s,i,n);return r.forEach((l=>o.insert(l))),o}insert(e){if(this.ge===0)return;const n=SU(e),[r,i]=AU(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class gp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ay.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new oy(Be.min(),i,new Kt(et),li(),rt())}}class ay{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ay(r,n,rt(),rt(),rt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class G8{constructor(e,n){this.targetId=e,this.Ce=n}}class H8{constructor(e,n,r=bn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class CU{constructor(){this.ve=0,this.Fe=IU(),this.Me=bn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=rt(),n=rt(),r=rt();return this.Fe.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ne(38017,{changeType:s})}})),new ay(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=IU()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ue(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class mTe{constructor(e){this.Ge=e,this.ze=new Map,this.je=li(),this.Je=i0(),this.He=i0(),this.Ye=new Kt(et)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Ne(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(kx(s))if(r===0){const o=new Ce(s.path);this.et(n,o,Xt.newNoDocument(o,Be.min()))}else Ue(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),u=l?this.ct(l,e,o):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=ca(r).toUint8Array()}catch(u){if(u instanceof d8)return yo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new RP(o,i,s)}catch(u){return yo(u instanceof gp?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((s=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.et(n,s,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((s,o)=>{const l=this.ot(o);if(l){if(s.current&&kx(l.target)){const u=new Ce(l.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,Xt.newNoDocument(u,e))}s.Be&&(n.set(o,s.ke()),s.qe())}}));let r=rt();this.He.forEach(((s,o)=>{let l=!0;o.forEachWhile((u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(r=r.add(s))})),this.je.forEach(((s,o)=>o.setReadTime(e)));const i=new oy(e,n,this.Ye,this.je,r);return this.je=li(),this.Je=i0(),this.He=i0(),this.Ye=new Kt(et),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new CU,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Vt(et),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Vt(et),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ye("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new CU),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function i0(){return new Kt(Ce.comparator)}function IU(){return new Kt(Ce.comparator)}const pTe={asc:"ASCENDING",desc:"DESCENDING"},gTe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yTe={and:"AND",or:"OR"};class vTe{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function F1(t,e){return t.useProto3Json||ey(e)?e:{value:e}}function Qf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function K8(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function xTe(t,e){return Qf(t,e.toTimestamp())}function In(t){return Ue(!!t,49232),Be.fromTimestamp((function(n){const r=ua(n);return new Nt(r.seconds,r.nanos)})(t))}function PP(t,e){return j1(t,e).canonicalString()}function j1(t,e){const n=(function(i){return new mt(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function W8(t){const e=mt.fromString(t);return Ue(iH(e),10190,{key:e.toString()}),e}function wg(t,e){return PP(t.databaseId,e.path)}function co(t,e){const n=W8(e);if(n.get(1)!==t.databaseId.projectId)throw new ge(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ge(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ce(Q8(n))}function Y8(t,e){return PP(t.databaseId,e)}function J8(t){const e=W8(t);return e.length===4?mt.emptyPath():Q8(e)}function B1(t){return new mt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Q8(t){return Ue(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function RU(t,e,n){return{name:wg(t,e),fields:n.value.mapValue.fields}}function X8(t,e,n){const r=co(t,e.name),i=In(e.updateTime),s=e.createTime?In(e.createTime):Be.min(),o=new Tr({mapValue:{fields:e.fields}}),l=Xt.newFoundDocument(r,i,s,o);return n&&l.setHasCommittedMutations(),n?l.setHasCommittedMutations():l}function bTe(t,e){return"found"in e?(function(r,i){Ue(!!i.found,43571),i.found.name,i.found.updateTime;const s=co(r,i.found.name),o=In(i.found.updateTime),l=i.found.createTime?In(i.found.createTime):Be.min(),u=new Tr({mapValue:{fields:i.found.fields}});return Xt.newFoundDocument(s,o,l,u)})(t,e):"missing"in e?(function(r,i){Ue(!!i.missing,3894),Ue(!!i.readTime,22933);const s=co(r,i.missing),o=In(i.readTime);return Xt.newNoDocument(s,o)})(t,e):Ne(7234,{result:e})}function _Te(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Ne(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(d,f){return d.useProto3Json?(Ue(f===void 0||typeof f=="string",58123),bn.fromBase64String(f||"")):(Ue(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),bn.fromUint8Array(f||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&(function(d){const f=d.code===void 0?ie.UNKNOWN:z8(d.code);return new ge(f,d.message||"")})(o);n=new H8(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=co(t,r.document.name),s=In(r.document.updateTime),o=r.document.createTime?In(r.document.createTime):Be.min(),l=new Tr({mapValue:{fields:r.document.fields}}),u=Xt.newFoundDocument(i,s,o,l),d=r.targetIds||[],f=r.removedTargetIds||[];n=new R0(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=co(t,r.document),s=r.readTime?In(r.readTime):Be.min(),o=Xt.newNoDocument(i,s),l=r.removedTargetIds||[];n=new R0([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=co(t,r.document),s=r.removedTargetIds||[];n=new R0([],s,i,null)}else{if(!("filter"in e))return Ne(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new fTe(i,s),l=r.targetId;n=new G8(l,o)}}return n}function Tg(t,e){let n;if(e instanceof Ch)n={update:RU(t,e.key,e.value)};else if(e instanceof Ih)n={delete:wg(t,e.key)};else if(e instanceof _a)n={update:RU(t,e.key,e.data),updateMask:CTe(e.fieldMask)};else{if(!(e instanceof SP))return Ne(16599,{Vt:e.type});n={verify:wg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(s,o){const l=o.transform;if(l instanceof Yf)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ic)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Rc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Jf)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw Ne(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:xTe(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ne(27497)})(t,e.precondition)),n}function q1(t,e){const n=e.currentDocument?(function(s){return s.updateTime!==void 0?on.updateTime(In(s.updateTime)):s.exists!==void 0?on.exists(s.exists):on.none()})(e.currentDocument):on.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(o,l){let u=null;if("setToServerValue"in l)Ue(l.setToServerValue==="REQUEST_TIME",16630,{proto:l}),u=new Yf;else if("appendMissingElements"in l){const f=l.appendMissingElements.values||[];u=new Ic(f)}else if("removeAllFromArray"in l){const f=l.removeAllFromArray.values||[];u=new Rc(f)}else"increment"in l?u=new Jf(o,l.increment):Ne(16584,{proto:l});const d=sn.fromServerFormat(l.fieldPath);return new sy(d,u)})(t,i))):[];if(e.update){e.update.name;const i=co(t,e.update.name),s=new Tr({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=(function(u){const d=u.fieldPaths||[];return new ai(d.map((f=>sn.fromServerFormat(f))))})(e.updateMask);return new _a(i,s,o,n,r)}return new Ch(i,s,n,r)}if(e.delete){const i=co(t,e.delete);return new Ih(i,n)}if(e.verify){const i=co(t,e.verify);return new SP(i,n)}return Ne(1463,{proto:e})}function wTe(t,e){return t&&t.length>0?(Ue(e!==void 0,14353),t.map((n=>(function(i,s){let o=i.updateTime?In(i.updateTime):In(s);return o.isEqual(Be.min())&&(o=In(s)),new uTe(o,i.transformResults||[])})(n,e)))):[]}function Z8(t,e){return{documents:[Y8(t,e.path)]}}function eH(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Y8(t,i);const s=(function(d){if(d.length!==0)return rH(Ot.create(d,"and"))})(e.filters);s&&(n.structuredQuery.where=s);const o=(function(d){if(d.length!==0)return d.map((f=>(function(v){return{field:Yd(v.field),direction:ETe(v.dir)}})(f)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=F1(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:n,parent:i}}function tH(t){let e=J8(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ue(r===1,65062);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=(function(m){const v=nH(m);return v instanceof Ot&&_P(v)?v.getFilters():[v]})(n.where));let o=[];n.orderBy&&(o=(function(m){return m.map((v=>(function(T){return new _g(Jd(T.field),(function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(T.direction))})(v)))})(n.orderBy));let l=null;n.limit&&(l=(function(m){let v;return v=typeof m=="object"?m.value:m,ey(v)?null:v})(n.limit));let u=null;n.startAt&&(u=(function(m){const v=!!m.before,_=m.values||[];return new Ul(_,v)})(n.startAt));let d=null;return n.endAt&&(d=(function(m){const v=!m.before,_=m.values||[];return new Ul(_,v)})(n.endAt)),C8(e,i,o,s,l,"F",u,d)}function TTe(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function nH(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Jd(n.unaryFilter.field);return pt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Jd(n.unaryFilter.field);return pt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Jd(n.unaryFilter.field);return pt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Jd(n.unaryFilter.field);return pt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ne(61313);default:return Ne(60726)}})(t):t.fieldFilter!==void 0?(function(n){return pt.create(Jd(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ne(58110);default:return Ne(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Ot.create(n.compositeFilter.filters.map((r=>nH(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ne(1026)}})(n.compositeFilter.op))})(t):Ne(30097,{filter:t})}function ETe(t){return pTe[t]}function STe(t){return gTe[t]}function ATe(t){return yTe[t]}function Yd(t){return{fieldPath:t.canonicalString()}}function Jd(t){return sn.fromServerFormat(t.fieldPath)}function rH(t){return t instanceof pt?(function(n){if(n.op==="=="){if(hU(n.value))return{unaryFilter:{field:Yd(n.field),op:"IS_NAN"}};if(fU(n.value))return{unaryFilter:{field:Yd(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(hU(n.value))return{unaryFilter:{field:Yd(n.field),op:"IS_NOT_NAN"}};if(fU(n.value))return{unaryFilter:{field:Yd(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yd(n.field),op:STe(n.op),value:n.value}}})(t):t instanceof Ot?(function(n){const r=n.getFilters().map((i=>rH(i)));return r.length===1?r[0]:{compositeFilter:{op:ATe(n.op),filters:r}}})(t):Ne(54877,{filter:t})}function CTe(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function iH(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,n,r,i,s=Be.min(),o=Be.min(),l=bn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Qo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Qo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sH{constructor(e){this.yt=e}}function ITe(t,e){let n;if(e.document)n=X8(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ce.fromSegments(e.noDocument.path),i=Nc(e.noDocument.readTime);n=Xt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ne(56709);{const r=Ce.fromSegments(e.unknownDocument.path),i=Nc(e.unknownDocument.version);n=Xt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime((function(i){const s=new Nt(i[0],i[1]);return Be.fromTimestamp(s)})(e.readTime)),n}function PU(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Lx(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(s,o){return{name:wg(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Qf(s,o.version.toTimestamp()),createTime:Qf(s,o.createTime.toTimestamp())}})(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Pc(e.version)};else{if(!e.isUnknownDocument())return Ne(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Pc(e.version)}}return r}function Lx(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Pc(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Nc(t){const e=new Nt(t.seconds,t.nanoseconds);return Be.fromTimestamp(e)}function Hu(t,e){const n=(e.baseMutations||[]).map((s=>q1(t.yt,s)));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const l=e.mutations[s+1];o.updateTransforms=l.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map((s=>q1(t.yt,s))),i=Nt.fromMillis(e.localWriteTimeMs);return new AP(e.batchId,i,n,r)}function yp(t){const e=Nc(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Nc(t.lastLimboFreeSnapshotVersion):Be.min();let r;return r=(function(s){return s.documents!==void 0})(t.query)?(function(s){const o=s.documents.length;return Ue(o===1,1966,{count:o}),Jr(Ah(J8(s.documents[0])))})(t.query):(function(s){return Jr(tH(s))})(t.query),new Qo(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,bn.fromBase64String(t.resumeToken))}function oH(t,e){const n=Pc(e.snapshotVersion),r=Pc(e.lastLimboFreeSnapshotVersion);let i;i=kx(e.target)?Z8(t.yt,e.target):eH(t.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Cc(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function NP(t){const e=tH({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Vx(e,e.limit,"L"):e}function FS(t,e){return new IP(e.largestBatchId,q1(t.yt,e.overlayMutation))}function NU(t,e){const n=e.path.lastSegment();return[t,Ur(e.path.popLast()),n]}function MU(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Pc(r.readTime),documentKey:Ur(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RTe{getBundleMetadata(e,n){return DU(e).get(n).next((r=>{if(r)return(function(s){return{id:s.bundleId,createTime:Nc(s.createTime),version:s.version}})(r)}))}saveBundleMetadata(e,n){return DU(e).put((function(i){return{bundleId:i.id,createTime:Pc(In(i.createTime)),version:i.version}})(n))}getNamedQuery(e,n){return kU(e).get(n).next((r=>{if(r)return(function(s){return{name:s.name,query:NP(s.bundledQuery),readTime:Nc(s.readTime)}})(r)}))}saveNamedQuery(e,n){return kU(e).put((function(i){return{name:i.name,readTime:Pc(In(i.readTime)),bundledQuery:i.bundledQuery}})(n))}}function DU(t){return Zn(t,Gb)}function kU(t){return Zn(t,Hb)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new Zb(e,r)}getOverlay(e,n){return np(e).get(NU(this.userId,n)).next((r=>r?FS(this.serializer,r):null))}getOverlays(e,n){const r=ro();return Z.forEach(n,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,n,r){const i=[];return r.forEach(((s,o)=>{const l=new IP(n,o);i.push(this.St(e,l))})),Z.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach((o=>i.add(Ur(o.getCollectionPath()))));const s=[];return i.forEach((o=>{const l=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(np(e).Z(P1,l))})),Z.waitFor(s)}getOverlaysForCollection(e,n,r){const i=ro(),s=Ur(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return np(e).J(P1,o).next((l=>{for(const u of l){const d=FS(this.serializer,u);i.set(d.getKey(),d)}return i}))}getOverlaysForCollectionGroup(e,n,r,i){const s=ro();let o;const l=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return np(e).ee({index:s8,range:l},((u,d,f)=>{const m=FS(this.serializer,d);s.size()<i||m.largestBatchId===o?(s.set(m.getKey(),m),o=m.largestBatchId):f.done()})).next((()=>s))}St(e,n){return np(e).put((function(i,s,o){const[l,u,d]=NU(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:d,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Tg(i.yt,o.mutation)}})(this.serializer,this.userId,n))}}function np(t){return Zn(t,Kb)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PTe{bt(e){return Zn(e,yP)}getSessionToken(e){return this.bt(e).get("sessionToken").next((n=>{const r=n==null?void 0:n.value;return r?bn.fromUint8Array(r):bn.EMPTY_BYTE_STRING}))}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(nn(e.integerValue));else if("doubleValue"in e){const r=nn(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),mg(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=ua(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(ca(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?y8(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):Jb(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):Ne(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){var o,l;const r=e.fields||{};this.Ft(n,53);const i=Hf,s=((l=(o=r[i].arrayValue)==null?void 0:o.values)==null?void 0:l.length)||0;this.Ft(n,15),n.Mt(nn(s)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),Ce.fromName(e).path.forEach((r=>{this.Ft(n,60),this.Ut(r,n)}))}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}Ku.Kt=new Ku;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd=255;function NTe(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function OU(t){const e=64-(function(r){let i=0;for(let s=0;s<8;++s){const o=NTe(255&r[s]);if(i+=o,o!==8)break}return i})(t);return Math.ceil(e/8)}class MTe{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=n.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const n=this.en(e),r=OU(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=OU(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(zd),this.sn(255)}_n(){this.an(zd),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=(function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)})(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===zd?(this.sn(zd),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===zd?(this.an(zd),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class DTe{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class kTe{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class rp{constructor(){this.cn=new MTe,this.ln=new DTe(this.cn),this.hn=new kTe(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,n,r,i){this.Tn=e,this.In=n,this.En=r,this.dn=i}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new Wu(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:P0(this.En),directionalValue:P0(this.dn),orderedDocumentKey:P0(n),documentKey:r.path.toArray()}}Vn(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function ol(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=VU(t.En,e.En),n!==0?n:(n=VU(t.dn,e.dn),n!==0?n:Ce.comparator(t.In,e.In)))}function VU(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function P0(t){return tj()?(function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r})(t):t}function LU(t){return typeof t!="string"?t:(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(t)}class UU{constructor(e){this.mn=new Vt(((n,r)=>sn.comparator(n.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(Ue(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=C1(e);if(n!==void 0&&!this.wn(n))return!1;const r=zu(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const l=this.mn.getIterator().getNext();if(!i.has(l.field.canonicalString())){const u=r[s];if(!this.Sn(l,u)||!this.bn(this.fn[o++],u))return!1}++s}for(;s<r.length;++s){const l=r[s];if(o>=this.fn.length||!this.bn(this.fn[o++],l))return!1}return!0}Dn(){if(this.pn)return null;let e=new Vt(sn.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new w0(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new w0(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new w0(r.field,r.dir==="asc"?0:1)));return new Px(Px.UNKNOWN_ID,this.collectionId,n,hg.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aH(t){var n,r;if(Ue(t instanceof pt||t instanceof Ot,20012),t instanceof pt){if(t instanceof A8){const i=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map((s=>pt.create(t.field,"==",s))))||[];return Ot.create(i,"or")}return t}const e=t.filters.map((i=>aH(i)));return Ot.create(e,t.op)}function OTe(t){if(t.getFilters().length===0)return[];const e=G1(aH(t));return Ue(lH(e),7391),z1(e)||$1(e)?[e]:e.getFilters()}function z1(t){return t instanceof pt}function $1(t){return t instanceof Ot&&_P(t)}function lH(t){return z1(t)||$1(t)||(function(n){if(n instanceof Ot&&O1(n)){for(const r of n.getFilters())if(!z1(r)&&!$1(r))return!1;return!0}return!1})(t)}function G1(t){if(Ue(t instanceof pt||t instanceof Ot,34018),t instanceof pt)return t;if(t.filters.length===1)return G1(t.filters[0]);const e=t.filters.map((r=>G1(r)));let n=Ot.create(e,t.op);return n=Ux(n),lH(n)?n:(Ue(n instanceof Ot,64498),Ue(Wf(n),40251),Ue(n.filters.length>1,57927),n.filters.reduce(((r,i)=>MP(r,i))))}function MP(t,e){let n;return Ue(t instanceof pt||t instanceof Ot,38388),Ue(e instanceof pt||e instanceof Ot,25473),n=t instanceof pt?e instanceof pt?(function(i,s){return Ot.create([i,s],"and")})(t,e):FU(t,e):e instanceof pt?FU(e,t):(function(i,s){if(Ue(i.filters.length>0&&s.filters.length>0,48005),Wf(i)&&Wf(s))return T8(i,s.getFilters());const o=O1(i)?i:s,l=O1(i)?s:i,u=o.filters.map((d=>MP(d,l)));return Ot.create(u,"or")})(t,e),Ux(n)}function FU(t,e){if(Wf(e))return T8(e,t.getFilters());{const n=e.filters.map((r=>MP(t,r)));return Ot.create(n,"or")}}function Ux(t){if(Ue(t instanceof pt||t instanceof Ot,11850),t instanceof pt)return t;const e=t.getFilters();if(e.length===1)return Ux(e[0]);if(_8(t))return t;const n=e.map((i=>Ux(i))),r=[];return n.forEach((i=>{i instanceof pt?r.push(i):i instanceof Ot&&(i.op===t.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:Ot.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VTe{constructor(){this.Cn=new DP}addToCollectionParentIndex(e,n){return this.Cn.add(n),Z.resolve()}getCollectionParents(e,n){return Z.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Z.resolve()}deleteFieldIndex(e,n){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,n){return Z.resolve()}getDocumentsMatchingTarget(e,n){return Z.resolve(null)}getIndexType(e,n){return Z.resolve(0)}getFieldIndexes(e,n){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,n){return Z.resolve(Di.min())}getMinOffsetFromCollectionGroup(e,n){return Z.resolve(Di.min())}updateCollectionGroup(e,n,r){return Z.resolve()}updateIndexEntries(e,n){return Z.resolve()}}class DP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Vt(mt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Vt(mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jU="IndexedDbIndexManager",s0=new Uint8Array(0);class LTe{constructor(e,n){this.databaseId=n,this.vn=new DP,this.Fn=new ba((r=>Cc(r)),((r,i)=>ny(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener((()=>{this.vn.add(n)}));const s={collectionId:r,parent:Ur(i)};return BU(e).put(s)}return Z.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[$G(n),""],!1,!0);return BU(e).J(i).next((s=>{for(const o of s){if(o.collectionId!==n)break;r.push(no(o.parent))}return r}))}addFieldIndex(e,n){const r=ip(e),i=(function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map((u=>[u.fieldPath.canonicalString(),u.kind]))}})(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=Gd(e);return s.next((l=>{o.put(MU(l,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return s.next()}deleteFieldIndex(e,n){const r=ip(e),i=Gd(e),s=$d(e);return r.delete(n.indexId).next((()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const n=ip(e),r=$d(e),i=Gd(e);return n.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,n){return Z.forEach(this.Mn(n),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const s=new UU(r).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))))}getDocumentsMatchingTarget(e,n){const r=$d(e);let i=!0;const s=new Map;return Z.forEach(this.Mn(n),(o=>this.xn(e,o).next((l=>{i&&(i=!!l),s.set(o,l)})))).next((()=>{if(i){let o=rt();const l=[];return Z.forEach(s,((u,d)=>{ye(jU,`Using index ${(function(N){return`id=${N.indexId}|cg=${N.collectionGroup}|f=${N.fields.map((U=>`${U.fieldPath}:${U.kind}`)).join(",")}`})(u)} to execute ${Cc(n)}`);const f=(function(N,U){const O=C1(U);if(O===void 0)return null;for(const q of Ox(N,O.fieldPath))switch(q.op){case"array-contains-any":return q.value.arrayValue.values||[];case"array-contains":return[q.value]}return null})(d,u),m=(function(N,U){const O=new Map;for(const q of zu(U))for(const M of Ox(N,q.fieldPath))switch(M.op){case"==":case"in":O.set(q.fieldPath.canonicalString(),M.value);break;case"not-in":case"!=":return O.set(q.fieldPath.canonicalString(),M.value),Array.from(O.values())}return null})(d,u),v=(function(N,U){const O=[];let q=!0;for(const M of zu(U)){const R=M.kind===0?vU(N,M.fieldPath,N.startAt):xU(N,M.fieldPath,N.startAt);O.push(R.value),q&&(q=R.inclusive)}return new Ul(O,q)})(d,u),_=(function(N,U){const O=[];let q=!0;for(const M of zu(U)){const R=M.kind===0?xU(N,M.fieldPath,N.endAt):vU(N,M.fieldPath,N.endAt);O.push(R.value),q&&(q=R.inclusive)}return new Ul(O,q)})(d,u),T=this.On(u,d,v),S=this.On(u,d,_),A=this.Nn(u,d,m),I=this.Bn(u.indexId,f,T,v.inclusive,S,_.inclusive,A);return Z.forEach(I,(D=>r.Y(D,n.limit).next((N=>{N.forEach((U=>{const O=Ce.fromSegments(U.documentKey);o.has(O)||(o=o.add(O),l.push(O))}))}))))})).next((()=>l))}return Z.resolve(null)}))}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=OTe(Ot.create(e.filters,"and")).map((r=>L1(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,n),n)}Bn(e,n,r,i,s,o,l){const u=(n!=null?n.length:1)*Math.max(r.length,s.length),d=u/(n!=null?n.length:1),f=[];for(let m=0;m<u;++m){const v=n?this.Ln(n[m/d]):s0,_=this.kn(e,v,r[m%d],i),T=this.qn(e,v,s[m%d],o),S=l.map((A=>this.kn(e,v,A,!0)));f.push(...this.createRange(_,T,S))}return f}kn(e,n,r,i){const s=new Wu(e,Ce.empty(),n,r);return i?s:s.An()}qn(e,n,r,i){const s=new Wu(e,Ce.empty(),n,r);return i?s.An():s}xn(e,n){const r=new UU(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next((s=>{let o=null;for(const l of s)r.yn(l)&&(!o||l.fields.length>o.fields.length)&&(o=l);return o}))}getIndexType(e,n){let r=2;const i=this.Mn(n);return Z.forEach(i,(s=>this.xn(e,s).next((o=>{o?r!==0&&o.fields.length<(function(u){let d=new Vt(sn.comparator),f=!1;for(const m of u.filters)for(const v of m.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?f=!0:d=d.add(v.field));for(const m of u.orderBy)m.field.isKeyField()||(d=d.add(m.field));return d.size+(f?1:0)})(s)&&(r=1):r=0})))).next((()=>(function(o){return o.limit!==null})(n)&&i.length>1&&r===2?1:r))}Qn(e,n){const r=new rp;for(const i of zu(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Pn(i.kind);Ku.Kt.Dt(s,o)}return r.un()}Ln(e){const n=new rp;return Ku.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new rp;return Ku.Kt.Dt(Ac(this.databaseId,n),r.Pn((function(s){const o=zu(s);return o.length===0?0:o[o.length-1].kind})(e))),r.un()}Nn(e,n,r){if(r===null)return[];let i=[];i.push(new rp);let s=0;for(const o of zu(e)){const l=r[s++];for(const u of i)if(this.Un(n,o.fieldPath)&&bg(l))i=this.Kn(i,o,l);else{const d=u.Pn(o.kind);Ku.Kt.Dt(l,d)}}return this.Wn(i)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const l of i){const u=new rp;u.seed(l.un()),Ku.Kt.Dt(o,u.Pn(n.kind)),s.push(u)}return s}Un(e,n){return!!e.filters.find((r=>r instanceof pt&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,n){const r=ip(e),i=Gd(e);return(n?r.J(R1,IDBKeyRange.bound(n,n)):r.J()).next((s=>{const o=[];return Z.forEach(s,(l=>i.get([l.indexId,this.uid]).next((u=>{o.push((function(f,m){const v=m?new hg(m.sequenceNumber,new Di(Nc(m.readTime),new Ce(no(m.documentKey)),m.largestBatchId)):hg.empty(),_=f.fields.map((([T,S])=>new w0(sn.fromServerFormat(T),S)));return new Px(f.indexId,f.collectionGroup,_,v)})(l,u))})))).next((()=>o))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((n=>n.length===0?null:(n.sort(((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:et(r.collectionGroup,i.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(e,n,r){const i=ip(e),s=Gd(e);return this.Gn(e).next((o=>i.J(R1,IDBKeyRange.bound(n,n)).next((l=>Z.forEach(l,(u=>s.put(MU(u.indexId,this.uid,o,r))))))))}updateIndexEntries(e,n){const r=new Map;return Z.forEach(n,((i,s)=>{const o=r.get(i.collectionGroup);return(o?Z.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next((l=>(r.set(i.collectionGroup,l),Z.forEach(l,(u=>this.zn(e,i,u).next((d=>{const f=this.jn(s,u);return d.isEqual(f)?Z.resolve():this.Jn(e,s,u,d,f)})))))))}))}Hn(e,n,r,i){return $d(e).put(i.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,i){return $d(e).delete(i.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const i=$d(e);let s=new Vt(ol);return i.ee({index:i8,range:IDBKeyRange.only([r.indexId,this.uid,P0(this.$n(r,n))])},((o,l)=>{s=s.add(new Wu(r.indexId,n,LU(l.arrayValue),LU(l.directionalValue)))})).next((()=>s))}jn(e,n){let r=new Vt(ol);const i=this.Qn(n,e);if(i==null)return r;const s=C1(n);if(s!=null){const o=e.data.field(s.fieldPath);if(bg(o))for(const l of o.arrayValue.values||[])r=r.add(new Wu(n.indexId,e.key,this.Ln(l),i))}else r=r.add(new Wu(n.indexId,e.key,s0,i));return r}Jn(e,n,r,i,s){ye(jU,"Updating index entries for document '%s'",n.key);const o=[];return(function(u,d,f,m,v){const _=u.getIterator(),T=d.getIterator();let S=qd(_),A=qd(T);for(;S||A;){let I=!1,D=!1;if(S&&A){const N=f(S,A);N<0?D=!0:N>0&&(I=!0)}else S!=null?D=!0:I=!0;I?(m(A),A=qd(T)):D?(v(S),S=qd(_)):(S=qd(_),A=qd(T))}})(i,s,ol,(l=>{o.push(this.Hn(e,n,r,l))}),(l=>{o.push(this.Yn(e,n,r,l))})),Z.waitFor(o)}Gn(e){let n=1;return Gd(e).ee({index:r8,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,s)=>{s.done(),n=i.sequenceNumber+1})).next((()=>n))}createRange(e,n,r){r=r.sort(((o,l)=>ol(o,l))).filter(((o,l,u)=>!l||ol(o,u[l-1])!==0));const i=[];i.push(e);for(const o of r){const l=ol(o,e),u=ol(o,n);if(l===0)i[0]=e.An();else if(l>0&&u<0)i.push(o),i.push(o.An());else if(u>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Zn(i[o],i[o+1]))return[];const l=i[o].Vn(this.uid,s0,Ce.empty()),u=i[o+1].Vn(this.uid,s0,Ce.empty());s.push(IDBKeyRange.bound(l,u))}return s}Zn(e,n){return ol(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(qU)}getMinOffset(e,n){return Z.mapArray(this.Mn(n),(r=>this.xn(e,r).next((i=>i||Ne(44426))))).next(qU)}}function BU(t){return Zn(t,yg)}function $d(t){return Zn(t,Vp)}function ip(t){return Zn(t,gP)}function Gd(t){return Zn(t,Op)}function qU(t){Ue(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;hP(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Di(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zU={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},uH=41943040;class Dr{static withCacheSize(e){return new Dr(e,Dr.DEFAULT_COLLECTION_PERCENTILE,Dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cH(t,e,n){const r=t.store(xs),i=t.store(qf),s=[],o=IDBKeyRange.only(n.batchId);let l=0;const u=r.ee({range:o},((f,m,v)=>(l++,v.delete())));s.push(u.next((()=>{Ue(l===1,47070,{batchId:n.batchId})})));const d=[];for(const f of n.mutations){const m=e8(e,f.key.path,n.batchId);s.push(i.delete(m)),d.push(f.key)}return Z.waitFor(s).next((()=>d))}function Fx(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ne(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dr.DEFAULT_COLLECTION_PERCENTILE=10,Dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dr.DEFAULT=new Dr(uH,Dr.DEFAULT_COLLECTION_PERCENTILE,Dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dr.DISABLED=new Dr(-1,0,0);class e_{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,n,r,i){Ue(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new e_(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return al(e).ee({index:ic,range:r},((i,s,o)=>{n=!1,o.done()})).next((()=>n))}addMutationBatch(e,n,r,i){const s=Qd(e),o=al(e);return o.add({}).next((l=>{Ue(typeof l=="number",49019);const u=new AP(l,n,r,i),d=(function(_,T,S){const A=S.baseMutations.map((D=>Tg(_.yt,D))),I=S.mutations.map((D=>Tg(_.yt,D)));return{userId:T,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:A,mutations:I}})(this.serializer,this.userId,u),f=[];let m=new Vt(((v,_)=>et(v.canonicalString(),_.canonicalString())));for(const v of i){const _=e8(this.userId,v.key.path,l);m=m.add(v.key.path.popLast()),f.push(o.put(d)),f.push(s.put(_,ywe))}return m.forEach((v=>{f.push(this.indexManager.addToCollectionParentIndex(e,v))})),e.addOnCommittedListener((()=>{this.Xn[l]=u.keys()})),Z.waitFor(f).next((()=>u))}))}lookupMutationBatch(e,n){return al(e).get(n).next((r=>r?(Ue(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),Hu(this.serializer,r)):null))}er(e,n){return this.Xn[n]?Z.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next((r=>{if(r){const i=r.keys();return this.Xn[n]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return al(e).ee({index:ic,range:i},((o,l,u)=>{l.userId===this.userId&&(Ue(l.batchId>=r,47524,{tr:r}),s=Hu(this.serializer,l)),u.done()})).next((()=>s))}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=El;return al(e).ee({index:ic,range:n,reverse:!0},((i,s,o)=>{r=s.batchId,o.done()})).next((()=>r))}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,El],[this.userId,Number.POSITIVE_INFINITY]);return al(e).J(ic,n).next((r=>r.map((i=>Hu(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=T0(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Qd(e).ee({range:i},((o,l,u)=>{const[d,f,m]=o,v=no(f);if(d===this.userId&&n.path.isEqual(v))return al(e).get(m).next((_=>{if(!_)throw Ne(61480,{nr:o,batchId:m});Ue(_.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:_.userId,batchId:m}),s.push(Hu(this.serializer,_))}));u.done()})).next((()=>s))}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Vt(et);const i=[];return n.forEach((s=>{const o=T0(this.userId,s.path),l=IDBKeyRange.lowerBound(o),u=Qd(e).ee({range:l},((d,f,m)=>{const[v,_,T]=d,S=no(_);v===this.userId&&s.path.isEqual(S)?r=r.add(T):m.done()}));i.push(u)})),Z.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=T0(this.userId,r),o=IDBKeyRange.lowerBound(s);let l=new Vt(et);return Qd(e).ee({range:o},((u,d,f)=>{const[m,v,_]=u,T=no(v);m===this.userId&&r.isPrefixOf(T)?T.length===i&&(l=l.add(_)):f.done()})).next((()=>this.rr(e,l)))}rr(e,n){const r=[],i=[];return n.forEach((s=>{i.push(al(e).get(s).next((o=>{if(o===null)throw Ne(35274,{batchId:s});Ue(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:s}),r.push(Hu(this.serializer,o))})))})),Z.waitFor(i).next((()=>r))}removeMutationBatch(e,n){return cH(e.le,this.userId,n).next((r=>(e.addOnCommittedListener((()=>{this.ir(n.batchId)})),Z.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((n=>{if(!n)return Z.resolve();const r=IDBKeyRange.lowerBound((function(o){return[o]})(this.userId)),i=[];return Qd(e).ee({range:r},((s,o,l)=>{if(s[0]===this.userId){const u=no(s[1]);i.push(u)}else l.done()})).next((()=>{Ue(i.length===0,56720,{sr:i.map((s=>s.canonicalString()))})}))}))}containsKey(e,n){return dH(e,this.userId,n)}_r(e){return fH(e).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:El,lastStreamToken:""}))}}function dH(t,e,n){const r=T0(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Qd(t).ee({range:s,X:!0},((l,u,d)=>{const[f,m,v]=l;f===e&&m===i&&(o=!0),d.done()})).next((()=>o))}function al(t){return Zn(t,xs)}function Qd(t){return Zn(t,qf)}function fH(t){return Zn(t,pg)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Mc(0)}static cr(){return new Mc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UTe{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next((n=>{const r=new Mc(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((n=>Be.fromTimestamp(new Nt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(e,n,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.hr(e,i))))}addTargetData(e,n){return this.Pr(e,n).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next((()=>Hd(e).delete(n.targetId))).next((()=>this.lr(e))).next((r=>(Ue(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,n,r){let i=0;const s=[];return Hd(e).ee(((o,l)=>{const u=yp(l);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(i++,s.push(this.removeTargetData(e,u)))})).next((()=>Z.waitFor(s))).next((()=>i))}forEachTarget(e,n){return Hd(e).ee(((r,i)=>{const s=yp(i);n(s)}))}lr(e){return $U(e).get(Dx).next((n=>(Ue(n!==null,2888),n)))}hr(e,n){return $U(e).put(Dx,n)}Pr(e,n){return Hd(e).put(oH(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((n=>n.targetCount))}getTargetData(e,n){const r=Cc(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Hd(e).ee({range:i,index:n8},((o,l,u)=>{const d=yp(l);ny(n,d.target)&&(s=d,u.done())})).next((()=>s))}addMatchingKeys(e,n,r){const i=[],s=ml(e);return n.forEach((o=>{const l=Ur(o.path);i.push(s.put({targetId:r,path:l})),i.push(this.referenceDelegate.addReference(e,r,o))})),Z.waitFor(i)}removeMatchingKeys(e,n,r){const i=ml(e);return Z.forEach(n,(s=>{const o=Ur(s.path);return Z.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])}))}removeMatchingKeysForTargetId(e,n){const r=ml(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=ml(e);let s=rt();return i.ee({range:r,X:!0},((o,l,u)=>{const d=no(o[1]),f=new Ce(d);s=s.add(f)})).next((()=>s))}containsKey(e,n){const r=Ur(n.path),i=IDBKeyRange.bound([r],[$G(r)],!1,!0);let s=0;return ml(e).ee({index:pP,X:!0,range:i},(([o,l],u,d)=>{o!==0&&(s++,d.done())})).next((()=>s>0))}At(e,n){return Hd(e).get(n).next((r=>r?yp(r):null))}}function Hd(t){return Zn(t,zf)}function $U(t){return Zn(t,gc)}function ml(t){return Zn(t,$f)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GU="LruGarbageCollector",FTe=1048576;function HU([t,e],[n,r]){const i=et(t,n);return i===0?et(e,r):i}class jTe{constructor(e){this.Ir=e,this.buffer=new Vt(HU),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();HU(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class hH{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ye(GU,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Zl(n)?ye(GU,"Ignoring IndexedDB error during garbage collection: ",n):await Xl(n)}await this.Vr(3e5)}))}}class BTe{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return Z.resolve(oi.ce);const r=new jTe(n);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(zU)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zU):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,l,u,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((m=>(m>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i)))).next((m=>(r=m,l=Date.now(),this.removeTargets(e,r,n)))).next((m=>(s=m,u=Date.now(),this.removeOrphanedDocuments(e,r)))).next((m=>(d=Date.now(),Kd()<=ft.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${i} in `+(l-o)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${m} documents in `+(d-u)+`ms
Total Duration: ${d-f}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m}))))}}function mH(t,e){return new BTe(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qTe{constructor(e,n){this.db=e,this.garbageCollector=mH(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,((r,i)=>n(i)))}addReference(e,n,r){return o0(e,r)}removeReference(e,n,r){return o0(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return o0(e,n)}br(e,n){return(function(i,s){let o=!1;return fH(i).te((l=>dH(i,l,s).next((u=>(u&&(o=!0),Z.resolve(!u)))))).next((()=>o))})(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,((o,l)=>{if(l<=n){const u=this.br(e,o).next((d=>{if(!d)return s++,r.getEntry(e,o).next((()=>(r.removeEntry(o,Be.min()),ml(e).delete((function(m){return[0,Ur(m.path)]})(o)))))}));i.push(u)}})).next((()=>Z.waitFor(i))).next((()=>r.apply(e))).next((()=>s))}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return o0(e,n)}Sr(e,n){const r=ml(e);let i,s=oi.ce;return r.ee({index:pP},(([o,l],{path:u,sequenceNumber:d})=>{o===0?(s!==oi.ce&&n(new Ce(no(i)),s),s=d,i=u):s=oi.ce})).next((()=>{s!==oi.ce&&n(new Ce(no(i)),s)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function o0(t,e){return ml(t).put((function(r,i){return{targetId:0,path:Ur(r.path),sequenceNumber:i}})(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pH{constructor(){this.changes=new ba((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Xt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zTe{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Lu(e).put(r)}removeEntry(e,n,r){return Lu(e).delete((function(s,o){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Lx(o),l[l.length-1]]})(n,r))}updateMetadata(e,n){return this.getMetadata(e).next((r=>(r.byteSize+=n,this.Dr(e,r))))}getEntry(e,n){let r=Xt.newInvalidDocument(n);return Lu(e).ee({index:E0,range:IDBKeyRange.only(sp(n))},((i,s)=>{r=this.Cr(n,s)})).next((()=>r))}vr(e,n){let r={size:0,document:Xt.newInvalidDocument(n)};return Lu(e).ee({index:E0,range:IDBKeyRange.only(sp(n))},((i,s)=>{r={document:this.Cr(n,s),size:Fx(s)}})).next((()=>r))}getEntries(e,n){let r=li();return this.Fr(e,n,((i,s)=>{const o=this.Cr(i,s);r=r.insert(i,o)})).next((()=>r))}Mr(e,n){let r=li(),i=new Kt(Ce.comparator);return this.Fr(e,n,((s,o)=>{const l=this.Cr(s,o);r=r.insert(s,l),i=i.insert(s,Fx(o))})).next((()=>({documents:r,Or:i})))}Fr(e,n,r){if(n.isEmpty())return Z.resolve();let i=new Vt(YU);n.forEach((u=>i=i.add(u)));const s=IDBKeyRange.bound(sp(i.first()),sp(i.last())),o=i.getIterator();let l=o.getNext();return Lu(e).ee({index:E0,range:s},((u,d,f)=>{const m=Ce.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;l&&YU(l,m)<0;)r(l,null),l=o.getNext();l&&l.isEqual(m)&&(r(l,d),l=o.hasNext()?o.getNext():null),l?f.j(sp(l)):f.done()})).next((()=>{for(;l;)r(l,null),l=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,l=[o.popLast().toArray(),o.lastSegment(),Lx(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Lu(e).J(IDBKeyRange.bound(l,u,!0)).next((d=>{s==null||s.incrementDocumentReadCount(d.length);let f=li();for(const m of d){const v=this.Cr(Ce.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);v.isFoundDocument()&&(iy(n,v)||i.has(v.key))&&(f=f.insert(v.key,v))}return f}))}getAllFromCollectionGroup(e,n,r,i){let s=li();const o=WU(n,r),l=WU(n,Di.max());return Lu(e).ee({index:t8,range:IDBKeyRange.bound(o,l,!0)},((u,d,f)=>{const m=this.Cr(Ce.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);s=s.insert(m.key,m),s.size===i&&f.done()})).next((()=>s))}newChangeBuffer(e){return new $Te(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((n=>n.byteSize))}getMetadata(e){return KU(e).get(I1).next((n=>(Ue(!!n,20021),n)))}Dr(e,n){return KU(e).put(I1,n)}Cr(e,n){if(n){const r=ITe(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Be.min())))return r}return Xt.newInvalidDocument(e)}}function gH(t){return new zTe(t)}class $Te extends pH{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new ba((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const n=[];let r=0,i=new Vt(((s,o)=>et(s.canonicalString(),o.canonicalString())));return this.changes.forEach(((s,o)=>{const l=this.Br.get(s);if(n.push(this.Nr.removeEntry(e,s,l.readTime)),o.isValidDocument()){const u=PU(this.Nr.serializer,o);i=i.add(s.path.popLast());const d=Fx(u);r+=d-l.size,n.push(this.Nr.addEntry(e,s,u))}else if(r-=l.size,this.trackRemovals){const u=PU(this.Nr.serializer,o.convertToNoDocument(Be.min()));n.push(this.Nr.addEntry(e,s,u))}})),i.forEach((s=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))})),n.push(this.Nr.updateMetadata(e,r)),Z.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next((r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next((({documents:r,Or:i})=>(i.forEach(((s,o)=>{this.Br.set(s,{size:o,readTime:r.get(s).readTime})})),r)))}}function KU(t){return Zn(t,gg)}function Lu(t){return Zn(t,Mx)}function sp(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function WU(t,e){const n=e.documentKey.path.toArray();return[t,Lx(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function YU(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=et(n[s],r[s]),i)return i;return i=et(n.length,r.length),i||(i=et(n[n.length-2],r[r.length-2]),i||et(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GTe{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yH{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&Fp(r.mutation,i,ai.empty(),Nt.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,rt()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=rt()){const i=ro();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((s=>{let o=pp();return s.forEach(((l,u)=>{o=o.insert(l,u.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=ro();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,rt())))}populateOverlays(e,n,r){const i=[];return r.forEach((s=>{n.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((o,l)=>{n.set(o,l)}))}))}computeViews(e,n,r,i){let s=li();const o=Up(),l=(function(){return Up()})();return n.forEach(((u,d)=>{const f=r.get(d.key);i.has(d.key)&&(f===void 0||f.mutation instanceof _a)?s=s.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),Fp(f.mutation,d,f.mutation.getFieldMask(),Nt.now())):o.set(d.key,ai.empty())})),this.recalculateAndSaveOverlays(e,s).next((u=>(u.forEach(((d,f)=>o.set(d,f))),n.forEach(((d,f)=>l.set(d,new GTe(f,o.get(d)??null)))),l)))}recalculateAndSaveOverlays(e,n){const r=Up();let i=new Kt(((o,l)=>o-l)),s=rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const l of o)l.keys().forEach((u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||ai.empty();f=l.applyToLocalView(d,f),r.set(u,f);const m=(i.get(l.batchId)||rt()).add(u);i=i.insert(l.batchId,m)}))})).next((()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,f=u.value,m=D8();f.forEach((v=>{if(!s.has(v)){const _=j8(n.get(v),r.get(v));_!==null&&m.set(v,_),s=s.add(v)}})),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return Z.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return(function(o){return Ce.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):wP(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):Z.resolve(ro());let l=Bf,u=s;return o.next((d=>Z.forEach(d,((f,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),s.get(f)?Z.resolve():this.remoteDocumentCache.getEntry(e,f).next((v=>{u=u.insert(f,v)}))))).next((()=>this.populateOverlays(e,d,s))).next((()=>this.computeViews(e,u,d,rt()))).next((f=>({batchId:l,changes:M8(f)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ce(n)).next((r=>{let i=pp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=pp();return this.indexManager.getCollectionParents(e,s).next((l=>Z.forEach(l,(u=>{const d=(function(m,v){return new xa(v,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)})(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next((f=>{f.forEach(((m,v)=>{o=o.insert(m,v)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i)))).next((o=>{s.forEach(((u,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,Xt.newInvalidDocument(f)))}));let l=pp();return o.forEach(((u,d)=>{const f=s.get(u);f!==void 0&&Fp(f.mutation,d,ai.empty(),Nt.now()),iy(n,d)&&(l=l.insert(u,d))})),l}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HTe{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Z.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:In(i.createTime)}})(n)),Z.resolve()}getNamedQuery(e,n){return Z.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:NP(i.bundledQuery),readTime:In(i.readTime)}})(n)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KTe{constructor(){this.overlays=new Kt(Ce.comparator),this.qr=new Map}getOverlay(e,n){return Z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ro();return Z.forEach(n,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,s)=>{this.St(e,n,s)})),Z.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.qr.delete(r)),Z.resolve()}getOverlaysForCollection(e,n,r){const i=ro(),s=n.length+1,o=new Ce(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Z.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Kt(((d,f)=>d-f));const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=s.get(d.largestBatchId);f===null&&(f=ro(),s=s.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const l=ro(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((d,f)=>l.set(d,f))),!(l.size()>=i)););return Z.resolve(l)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new IP(n,r));let s=this.qr.get(n);s===void 0&&(s=rt(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WTe{constructor(){this.sessionToken=bn.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(){this.Qr=new Vt(lr.$r),this.Ur=new Vt(lr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new lr(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new lr(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new Ce(new mt([])),r=new lr(n,e),i=new lr(n,e+1),s=[];return this.Ur.forEachInRange([r,i],(o=>{this.Gr(o),s.push(o.key)})),s}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ce(new mt([])),r=new lr(n,e),i=new lr(n,e+1);let s=rt();return this.Ur.forEachInRange([r,i],(o=>{s=s.add(o.key)})),s}containsKey(e){const n=new lr(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class lr{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ce.comparator(e.key,n.key)||et(e.Yr,n.Yr)}static Kr(e,n){return et(e.Yr,n.Yr)||Ce.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YTe{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Vt(lr.$r)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new AP(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.Zr=this.Zr.add(new lr(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return Z.resolve(o)}lookupMutationBatch(e,n){return Z.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return Z.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?El:this.tr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new lr(n,0),i=new lr(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],(o=>{const l=this.Xr(o.Yr);s.push(l)})),Z.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Vt(et);return n.forEach((i=>{const s=new lr(i,0),o=new lr(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],(l=>{r=r.add(l.Yr)}))})),Z.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Ce.isDocumentKey(s)||(s=s.child(""));const o=new lr(new Ce(s),0);let l=new Vt(et);return this.Zr.forEachWhile((u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(l=l.add(u.Yr)),!0)}),o),Z.resolve(this.ti(l))}ti(e){const n=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){Ue(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Z.forEach(n.mutations,(i=>{const s=new lr(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new lr(n,0),i=this.Zr.firstAfterOrEqual(r);return Z.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JTe{constructor(e){this.ri=e,this.docs=(function(){return new Kt(Ce.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Z.resolve(r?r.document.mutableCopy():Xt.newInvalidDocument(n))}getEntries(e,n){let r=li();return n.forEach((i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Xt.newInvalidDocument(i))})),Z.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=li();const o=n.path,l=new Ce(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||hP(YG(f),r)<=0||(i.has(f.key)||iy(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return Z.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Ne(9500)}ii(e,n){return Z.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new QTe(this)}getSize(e){return Z.resolve(this.size)}}class QTe extends pH{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),Z.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XTe{constructor(e){this.persistence=e,this.si=new ba((n=>Cc(n)),ny),this.lastRemoteSnapshotVersion=Be.min(),this.highestTargetId=0,this.oi=0,this._i=new kP,this.targetCount=0,this.ai=Mc.ur()}forEachTarget(e,n){return this.si.forEach(((r,i)=>n(i))),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),Z.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Mc(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Z.resolve()}updateTargetData(e,n){return this.Pr(n),Z.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach(((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)})),Z.waitFor(s).next((()=>i))}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return Z.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),Z.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach((o=>{s.push(i.markPotentiallyOrphaned(e,o))})),Z.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Z.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return Z.resolve(r)}containsKey(e,n){return Z.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e,n){this.ui={},this.overlays={},this.ci=new oi(0),this.li=!1,this.li=!0,this.hi=new WTe,this.referenceDelegate=e(this),this.Pi=new XTe(this),this.indexManager=new VTe,this.remoteDocumentCache=(function(i){return new JTe(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new sH(n),this.Ii=new HTe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new KTe,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new YTe(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ye("MemoryPersistence","Starting transaction:",e);const i=new ZTe(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((s=>this.referenceDelegate.di(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Ai(e,n){return Z.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class ZTe extends QG{constructor(e){super(),this.currentSequenceNumber=e}}class t_{constructor(e){this.persistence=e,this.Ri=new kP,this.Vi=null}static mi(e){return new t_(e)}get fi(){if(this.Vi)return this.Vi;throw Ne(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),Z.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),Z.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Z.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((s=>this.fi.add(s.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.fi,(r=>{const i=Ce.fromPath(r);return this.gi(e,i).next((s=>{s||n.removeEntry(i,Be.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return Z.or([()=>Z.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class jx{constructor(e,n){this.persistence=e,this.pi=new ba((r=>Ur(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=mH(this,n)}static mi(e,n){return new jx(e,n)}Ei(){}di(e){return Z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return Z.forEach(this.pi,((r,i)=>this.br(e,r,i).next((s=>s?Z.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,(o=>this.br(e,o,n).next((l=>{l||(r++,s.removeEntry(o,Be.min()))})))).next((()=>s.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Z.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=A0(e.data.value)),n}br(e,n,r){return Z.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return Z.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eEe{constructor(e){this.serializer=e}k(e,n,r,i){const s=new $b("createOrUpgrade",n);r<1&&i>=1&&((function(u){u.createObjectStore(ty)})(e),(function(u){u.createObjectStore(pg,{keyPath:gwe}),u.createObjectStore(xs,{keyPath:oU,autoIncrement:!0}).createIndex(ic,aU,{unique:!0}),u.createObjectStore(qf)})(e),JU(e),(function(u){u.createObjectStore($u)})(e));let o=Z.resolve();return r<3&&i>=3&&(r!==0&&((function(u){u.deleteObjectStore($f),u.deleteObjectStore(zf),u.deleteObjectStore(gc)})(e),JU(e)),o=o.next((()=>(function(u){const d=u.store(gc),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Be.min().toTimestamp(),targetCount:0};return d.put(Dx,f)})(s)))),r<4&&i>=4&&(r!==0&&(o=o.next((()=>(function(u,d){return d.store(xs).J().next((m=>{u.deleteObjectStore(xs),u.createObjectStore(xs,{keyPath:oU,autoIncrement:!0}).createIndex(ic,aU,{unique:!0});const v=d.store(xs),_=m.map((T=>v.put(T)));return Z.waitFor(_)}))})(e,s)))),o=o.next((()=>{(function(u){u.createObjectStore(Gf,{keyPath:Swe})})(e)}))),r<5&&i>=5&&(o=o.next((()=>this.yi(s)))),r<6&&i>=6&&(o=o.next((()=>((function(u){u.createObjectStore(gg)})(e),this.wi(s))))),r<7&&i>=7&&(o=o.next((()=>this.Si(s)))),r<8&&i>=8&&(o=o.next((()=>this.bi(e,s)))),r<9&&i>=9&&(o=o.next((()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(o=o.next((()=>this.Di(s)))),r<11&&i>=11&&(o=o.next((()=>{(function(u){u.createObjectStore(Gb,{keyPath:Awe})})(e),(function(u){u.createObjectStore(Hb,{keyPath:Cwe})})(e)}))),r<12&&i>=12&&(o=o.next((()=>{(function(u){const d=u.createObjectStore(Kb,{keyPath:kwe});d.createIndex(P1,Owe,{unique:!1}),d.createIndex(s8,Vwe,{unique:!1})})(e)}))),r<13&&i>=13&&(o=o.next((()=>(function(u){const d=u.createObjectStore(Mx,{keyPath:vwe});d.createIndex(E0,xwe),d.createIndex(t8,bwe)})(e))).next((()=>this.Ci(e,s))).next((()=>e.deleteObjectStore($u)))),r<14&&i>=14&&(o=o.next((()=>this.Fi(e,s)))),r<15&&i>=15&&(o=o.next((()=>(function(u){u.createObjectStore(gP,{keyPath:Iwe,autoIncrement:!0}).createIndex(R1,Rwe,{unique:!1}),u.createObjectStore(Op,{keyPath:Pwe}).createIndex(r8,Nwe,{unique:!1}),u.createObjectStore(Vp,{keyPath:Mwe}).createIndex(i8,Dwe,{unique:!1})})(e)))),r<16&&i>=16&&(o=o.next((()=>{n.objectStore(Op).clear()})).next((()=>{n.objectStore(Vp).clear()}))),r<17&&i>=17&&(o=o.next((()=>{(function(u){u.createObjectStore(yP,{keyPath:Lwe})})(e)}))),r<18&&i>=18&&tj()&&(o=o.next((()=>{n.objectStore(Op).clear()})).next((()=>{n.objectStore(Vp).clear()}))),o}wi(e){let n=0;return e.store($u).ee(((r,i)=>{n+=Fx(i)})).next((()=>{const r={byteSize:n};return e.store(gg).put(I1,r)}))}yi(e){const n=e.store(pg),r=e.store(xs);return n.J().next((i=>Z.forEach(i,(s=>{const o=IDBKeyRange.bound([s.userId,El],[s.userId,s.lastAcknowledgedBatchId]);return r.J(ic,o).next((l=>Z.forEach(l,(u=>{Ue(u.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:u.batchId});const d=Hu(this.serializer,u);return cH(e,s.userId,d).next((()=>{}))}))))}))))}Si(e){const n=e.store($f),r=e.store($u);return e.store(gc).get(Dx).next((i=>{const s=[];return r.ee(((o,l)=>{const u=new mt(o),d=(function(m){return[0,Ur(m)]})(u);s.push(n.get(d).next((f=>f?Z.resolve():(m=>n.put({targetId:0,path:Ur(m),sequenceNumber:i.highestListenSequenceNumber}))(u))))})).next((()=>Z.waitFor(s)))}))}bi(e,n){e.createObjectStore(yg,{keyPath:Ewe});const r=n.store(yg),i=new DP,s=o=>{if(i.add(o)){const l=o.lastSegment(),u=o.popLast();return r.put({collectionId:l,parent:Ur(u)})}};return n.store($u).ee({X:!0},((o,l)=>{const u=new mt(o);return s(u.popLast())})).next((()=>n.store(qf).ee({X:!0},(([o,l,u],d)=>{const f=no(l);return s(f.popLast())}))))}Di(e){const n=e.store(zf);return n.ee(((r,i)=>{const s=yp(i),o=oH(this.serializer,s);return n.put(o)}))}Ci(e,n){const r=n.store($u),i=[];return r.ee(((s,o)=>{const l=n.store(Mx),u=(function(m){return m.document?new Ce(mt.fromString(m.document.name).popFirst(5)):m.noDocument?Ce.fromSegments(m.noDocument.path):m.unknownDocument?Ce.fromSegments(m.unknownDocument.path):Ne(36783)})(o).path.toArray(),d={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(l.put(d))})).next((()=>Z.waitFor(i)))}Fi(e,n){const r=n.store(xs),i=gH(this.serializer),s=new OP(t_.mi,this.serializer.yt);return r.J().next((o=>{const l=new Map;return o.forEach((u=>{let d=l.get(u.userId)??rt();Hu(this.serializer,u).keys().forEach((f=>d=d.add(f))),l.set(u.userId,d)})),Z.forEach(l,((u,d)=>{const f=new ur(d),m=Zb.wt(this.serializer,f),v=s.getIndexManager(f),_=e_.wt(f,this.serializer,v,s.referenceDelegate);return new yH(i,_,m,v).recalculateAndSaveOverlaysForDocumentKeys(new N1(n,oi.ce),u).next()}))}))}}function JU(t){t.createObjectStore($f,{keyPath:wwe}).createIndex(pP,Twe,{unique:!0}),t.createObjectStore(zf,{keyPath:"targetId"}).createIndex(n8,_we,{unique:!0}),t.createObjectStore(gc)}const ll="IndexedDbPersistence",jS=18e5,BS=5e3,qS="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",vH="main";class VP{constructor(e,n,r,i,s,o,l,u,d,f,m=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=s,this.window=o,this.document=l,this.xi=d,this.Oi=f,this.Ni=m,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=v=>Promise.resolve(),!VP.v())throw new ge(ie.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new qTe(this,i),this.$i=n+vH,this.serializer=new sH(u),this.Ui=new uo(this.$i,this.Ni,new eEe(this.serializer)),this.hi=new PTe,this.Pi=new UTe(this.referenceDelegate,this.serializer),this.remoteDocumentCache=gH(this.serializer),this.Ii=new RTe,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,f===!1&&Cn(ll,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ge(ie.FAILED_PRECONDITION,qS);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new oi(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async n=>{n.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>a0(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((n=>this.isPrimary&&!n?this.Zi(e).next((()=>!1)):!!n&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Zl(e))return ye(ll,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ye(ll,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return op(e).get(Bd).next((n=>Z.resolve(this.es(n))))}ts(e){return a0(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,jS)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const r=Zn(n,Gf);return r.J().next((i=>{const s=this.ss(i,jS),o=i.filter((l=>s.indexOf(l)===-1));return Z.forEach(o,(l=>r.delete(l.clientId))).next((()=>o))}))})).catch((()=>[]));if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?Z.resolve(!0):op(e).get(Bd).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,BS)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new ge(ie.FAILED_PRECONDITION,qS);return!1}}return!(!this.networkEnabled||!this.inForeground)||a0(e).J().next((r=>this.ss(r,BS).find((i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,l=this.networkEnabled===i.networkEnabled;if(s||o&&l)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&ye(ll,`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[ty,Gf],(e=>{const n=new N1(e,oi.ce);return this.Zi(n).next((()=>this.ts(n)))})),this.Ui.close(),this.Ps()}ss(e,n){return e.filter((r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>a0(e).J().next((n=>this.ss(n,jS).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return e_.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new LTe(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Zb.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){ye(ll,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=(function(u){return u===18?jwe:u===17?u8:u===16?Fwe:u===15?vP:u===14?l8:u===13?a8:u===12?Uwe:u===11?o8:void Ne(60245)})(this.Ni);let o;return this.Ui.runTransaction(e,i,s,(l=>(o=new N1(l,this.ci?this.ci.next():oi.ce),n==="readwrite-primary"?this.Hi(o).next((u=>!!u||this.Yi(o))).next((u=>{if(!u)throw Cn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new ge(ie.FAILED_PRECONDITION,JG);return r(o)})).next((u=>this.Xi(o).next((()=>u)))):this.Is(o).next((()=>r(o)))))).then((l=>(o.raiseOnCommittedEvent(),l)))}Is(e){return op(e).get(Bd).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,BS)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new ge(ie.FAILED_PRECONDITION,qS)}))}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return op(e).put(Bd,n)}static v(){return uo.v()}Zi(e){const n=op(e);return n.get(Bd).next((r=>this.es(r)?(ye(ll,"Releasing primary lease."),n.delete(Bd)):Z.resolve()))}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Cn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;ej()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return ye(ll,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Cn(ll,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Cn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function op(t){return Zn(t,ty)}function a0(t){return Zn(t,Gf)}function LP(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=rt(),i=rt();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new UP(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tEe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xH{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return ej()?8:XG(mn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next((o=>{s.result=o})).next((()=>{if(!s.result)return this.ws(e,n,i,r).next((o=>{s.result=o}))})).next((()=>{if(s.result)return;const o=new tEe;return this.Ss(e,n,o).next((l=>{if(s.result=l,this.Vs)return this.bs(e,n,o,l.size)}))})).next((()=>s.result))}bs(e,n,r,i){return r.documentReadCount<this.fs?(Kd()<=ft.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",Wd(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Z.resolve()):(Kd()<=ft.DEBUG&&ye("QueryEngine","Query:",Wd(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Kd()<=ft.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",Wd(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jr(n))):Z.resolve())}ys(e,n){if(bU(n))return Z.resolve(null);let r=Jr(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=Vx(n,null,"F"),r=Jr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((s=>{const o=rt(...s);return this.ps.getDocuments(e,o).next((l=>this.indexManager.getMinOffset(e,r).next((u=>{const d=this.Ds(n,l);return this.Cs(n,d,o,u.readTime)?this.ys(e,Vx(n,null,"F")):this.vs(e,d,n,u)}))))})))))}ws(e,n,r,i){return bU(n)||i.isEqual(Be.min())?Z.resolve(null):this.ps.getDocuments(e,r).next((s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?Z.resolve(null):(Kd()<=ft.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Wd(n)),this.vs(e,o,n,WG(i,Bf)).next((l=>l)))}))}Ds(e,n){let r=new Vt(P8(e));return n.forEach(((i,s)=>{iy(e,s)&&(r=r.add(s))})),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return Kd()<=ft.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",Wd(n)),this.ps.getDocumentsMatchingQuery(e,n,Di.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((s=>(n.forEach((o=>{s=s.insert(o.key,o)})),s)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP="LocalStore",nEe=3e8;class rEe{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Kt(et),this.xs=new ba((s=>Cc(s)),ny),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yH(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function bH(t,e,n,r){return new rEe(t,e,n,r)}async function _H(t,e){const n=Re(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((s=>{const o=[],l=[];let u=rt();for(const d of i){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of s){l.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next((d=>({Ls:d,removedBatchIds:o,addedBatchIds:l})))}))}))}function iEe(t,e){const n=Re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(l,u,d,f){const m=d.batch,v=m.keys();let _=Z.resolve();return v.forEach((T=>{_=_.next((()=>f.getEntry(u,T))).next((S=>{const A=d.docVersions.get(T);Ue(A!==null,48541),S.version.compareTo(A)<0&&(m.applyToRemoteDocument(S,d),S.isValidDocument()&&(S.setReadTime(d.commitVersion),f.addEntry(S)))}))})),_.next((()=>l.mutationQueue.removeMutationBatch(u,m)))})(n,r,e,s).next((()=>s.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(l){let u=rt();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function wH(t){const e=Re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function sEe(t,e){const n=Re(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const l=[];e.targetChanges.forEach(((f,m)=>{const v=i.get(m);if(!v)return;l.push(n.Pi.removeMatchingKeys(s,f.removedDocuments,m).next((()=>n.Pi.addMatchingKeys(s,f.addedDocuments,m))));let _=v.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?_=_.withResumeToken(bn.EMPTY_BYTE_STRING,Be.min()).withLastLimboFreeSnapshotVersion(Be.min()):f.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(f.resumeToken,r)),i=i.insert(m,_),(function(S,A,I){return S.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=nEe?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0})(v,_,f)&&l.push(n.Pi.updateTargetData(s,_))}));let u=li(),d=rt();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))})),l.push(TH(s,o,e.documentUpdates).next((f=>{u=f.ks,d=f.qs}))),!r.isEqual(Be.min())){const f=n.Pi.getLastRemoteSnapshotVersion(s).next((m=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r)));l.push(f)}return Z.waitFor(l).next((()=>o.apply(s))).next((()=>n.localDocuments.getLocalViewOfDocuments(s,u,d))).next((()=>u))})).then((s=>(n.Ms=i,s)))}function TH(t,e,n){let r=rt(),i=rt();return n.forEach((s=>r=r.add(s))),e.getEntries(t,r).next((s=>{let o=li();return n.forEach(((l,u)=>{const d=s.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(Be.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):ye(FP,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)})),{ks:o,qs:i}}))}function oEe(t,e){const n=Re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=El),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Xf(t,e){const n=Re(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Pi.getTargetData(r,e).next((s=>s?(i=s,Z.resolve(i)):n.Pi.allocateTargetId(r).next((o=>(i=new Qo(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function Zf(t,e,n){const r=Re(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Zl(o))throw o;ye(FP,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Bx(t,e,n){const r=Re(t);let i=Be.min(),s=rt();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(u,d,f){const m=Re(u),v=m.xs.get(f);return v!==void 0?Z.resolve(m.Ms.get(v)):m.Pi.getTargetData(d,f)})(r,o,Jr(e)).next((l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next((u=>{s=u}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:Be.min(),n?s:rt()))).next((l=>(AH(r,R8(e),l),{documents:l,Qs:s})))))}function EH(t,e){const n=Re(t),r=Re(n.Pi),i=n.Ms.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(s=>r.At(s,e).next((o=>o?o.target:null))))}function SH(t,e){const n=Re(t),r=n.Os.get(e)||Be.min();return n.persistence.runTransaction("Get new document changes","readonly",(i=>n.Ns.getAllFromCollectionGroup(i,e,WG(r,Bf),Number.MAX_SAFE_INTEGER))).then((i=>(AH(n,e,i),i)))}function AH(t,e,n){let r=t.Os.get(e)||Be.min();n.forEach(((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)})),t.Os.set(e,r)}async function aEe(t,e,n,r){const i=Re(t);let s=rt(),o=li();for(const d of n){const f=e.$s(d.metadata.name);d.document&&(s=s.add(f));const m=e.Us(d);m.setReadTime(e.Ks(d.metadata.readTime)),o=o.insert(f,m)}const l=i.Ns.newChangeBuffer({trackRemovals:!0}),u=await Xf(i,(function(f){return Jr(Ah(mt.fromString(`__bundle__/docs/${f}`)))})(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(d=>TH(d,l,o).next((f=>(l.apply(d),f))).next((f=>i.Pi.removeMatchingKeysForTargetId(d,u.targetId).next((()=>i.Pi.addMatchingKeys(d,s,u.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(d,f.ks,f.qs))).next((()=>f.ks))))))}async function lEe(t,e,n=rt()){const r=await Xf(t,Jr(NP(e.bundledQuery))),i=Re(t);return i.persistence.runTransaction("Save named query","readwrite",(s=>{const o=In(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ii.saveNamedQuery(s,e);const l=r.withResumeToken(bn.EMPTY_BYTE_STRING,o);return i.Ms=i.Ms.insert(l.targetId,l),i.Pi.updateTargetData(s,l).next((()=>i.Pi.removeMatchingKeysForTargetId(s,r.targetId))).next((()=>i.Pi.addMatchingKeys(s,n,r.targetId))).next((()=>i.Ii.saveNamedQuery(s,e)))}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CH="firestore_clients";function QU(t,e){return`${CH}_${t}_${e}`}const IH="firestore_mutations";function XU(t,e,n){let r=`${IH}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const RH="firestore_targets";function zS(t,e){return`${RH}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys="SharedClientState";class qx{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ws(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new ge(i.error.code,i.error.message))),o?new qx(e,n,i.state,s):(Cn(Ys,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class jp{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new ge(r.error.code,r.error.message))),s?new jp(e,r.state,i):(Cn(Ys,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class zx{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=TP();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=ZG(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new zx(e,s):(Cn(Ys,`Failed to parse client data for instance '${e}': ${n}`),null)}}class jP{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new jP(n.clientId,n.onlineState):(Cn(Ys,`Failed to parse online state: ${e}`),null)}}class H1{constructor(){this.activeTargetIds=TP()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $S{constructor(e,n,r,i,s){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Kt(et),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=QU(this.persistenceKey,this.Js),this.no=(function(u){return`firestore_sequence_number_${u}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new H1),this.ro=new RegExp(`^${CH}_${o}_([^_]*)$`),this.io=new RegExp(`^${IH}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${RH}_${o}_(\\d+)$`),this.oo=(function(u){return`firestore_online_state_${u}`})(this.persistenceKey),this._o=(function(u){return`firestore_bundle_loaded_v2_${u}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(QU(this.persistenceKey,r));if(i){const s=zx.Ws(r,i);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach(((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)})),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(zS(this.persistenceKey,e));if(i){const s=jp.Ws(e,i);s&&(r=s.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(zS(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach((i=>{this.Po(i)})),this.currentUser=e,r.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return ye(Ys,"READ",e,n),n}setItem(e,n){ye(Ys,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){ye(Ys,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(ye(Ys,"EVENT",n.key,n.newValue),n.key===this.eo)return void Cn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=(function(s){let o=oi.ce;if(s!=null)try{const l=JSON.parse(s);Ue(typeof l=="number",30636,{So:s}),o=l}catch(l){Cn(Ys,"Failed to read sequence number from WebStorage",l)}return o})(n.newValue);r!==oi.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map((i=>this.syncEngine.Do(i))))}}}else this.Xs.push(n)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const i=new qx(this.currentUser,e,n,r),s=XU(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Gs())}Po(e){const n=XU(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const i=zS(this.persistenceKey,e),s=new jp(e,n,r);this.setItem(i,s.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return zx.Ws(r,n)}fo(e,n){const r=this.io.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return qx.Ws(new ur(s),i,n)}yo(e,n){const r=this.so.exec(e),i=Number(r[1]);return jp.Ws(i,n)}uo(e){return jP.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);ye(Ys,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),i=this.lo(this.Zs),s=this.lo(r),o=[],l=[];return s.forEach((u=>{i.has(u)||o.push(u)})),i.forEach((u=>{s.has(u)||l.push(u)})),this.syncEngine.Fo(o,l).then((()=>{this.Zs=r}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=TP();return e.forEach(((r,i)=>{n=n.unionWith(i.activeTargetIds)})),n}}class PH{constructor(){this.Mo=new H1,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new H1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uEe{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZU="ConnectivityMonitor";class e5{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ye(ZU,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ye(ZU,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let l0=null;function K1(){return l0===null?l0=(function(){return 268435456+Math.round(2147483648*Math.random())})():l0++,"0x"+l0.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="RestConnection",cEe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dEe{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===M1?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=K1(),l=this.zo(e,n.toUriEncodedString());ye(GS,`Sending RPC '${e}' ${o}:`,l,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,s);const{host:d}=new URL(l),f=oh(d);return this.Jo(e,l,u,r,f).then((m=>(ye(GS,`Received RPC '${e}' ${o}: `,m),m)),(m=>{throw yo(GS,`RPC '${e}' ${o} failed with error: `,m,"url: ",l,"request:",r),m}))}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Sh})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,s)=>e[s]=i)),r&&r.headers.forEach(((i,s)=>e[s]=i))}zo(e,n){const r=cEe[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fEe{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr="WebChannelConnection";class hEe extends dEe{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=K1();return new Promise(((l,u)=>{const d=new LG;d.setWithCredentials(!0),d.listenOnce(UG.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case _0.NO_ERROR:const m=d.getResponseJson();ye(Nr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),l(m);break;case _0.TIMEOUT:ye(Nr,`RPC '${e}' ${o} timed out`),u(new ge(ie.DEADLINE_EXCEEDED,"Request time out"));break;case _0.HTTP_ERROR:const v=d.getStatus();if(ye(Nr,`RPC '${e}' ${o} failed with status:`,v,"response text:",d.getResponseText()),v>0){let _=d.getResponseJson();Array.isArray(_)&&(_=_[0]);const T=_==null?void 0:_.error;if(T&&T.status&&T.message){const S=(function(I){const D=I.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(D)>=0?D:ie.UNKNOWN})(T.status);u(new ge(S,T.message))}else u(new ge(ie.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new ge(ie.UNAVAILABLE,"Connection failed."));break;default:Ne(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{ye(Nr,`RPC '${e}' ${o} completed.`)}}));const f=JSON.stringify(i);ye(Nr,`RPC '${e}' ${o} sending request:`,i),d.send(n,"POST",f,r,15)}))}T_(e,n,r){const i=K1(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=BG(),l=jG(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=s.join("");ye(Nr,`Creating RPC '${e}' stream ${i}: ${f}`,u);const m=o.createWebChannel(f,u);this.I_(m);let v=!1,_=!1;const T=new fEe({Yo:A=>{_?ye(Nr,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(v||(ye(Nr,`Opening RPC '${e}' stream ${i} transport.`),m.open(),v=!0),ye(Nr,`RPC '${e}' stream ${i} sending:`,A),m.send(A))},Zo:()=>m.close()}),S=(A,I,D)=>{A.listen(I,(N=>{try{D(N)}catch(U){setTimeout((()=>{throw U}),0)}}))};return S(m,mp.EventType.OPEN,(()=>{_||(ye(Nr,`RPC '${e}' stream ${i} transport opened.`),T.o_())})),S(m,mp.EventType.CLOSE,(()=>{_||(_=!0,ye(Nr,`RPC '${e}' stream ${i} transport closed`),T.a_(),this.E_(m))})),S(m,mp.EventType.ERROR,(A=>{_||(_=!0,yo(Nr,`RPC '${e}' stream ${i} transport errored. Name:`,A.name,"Message:",A.message),T.a_(new ge(ie.UNAVAILABLE,"The operation could not be completed")))})),S(m,mp.EventType.MESSAGE,(A=>{var I;if(!_){const D=A.data[0];Ue(!!D,16349);const N=D,U=(N==null?void 0:N.error)||((I=N[0])==null?void 0:I.error);if(U){ye(Nr,`RPC '${e}' stream ${i} received error:`,U);const O=U.status;let q=(function(k){const F=kn[k];if(F!==void 0)return z8(F)})(O),M=U.message;q===void 0&&(q=ie.INTERNAL,M="Unknown error status: "+O+" with message "+U.message),_=!0,T.a_(new ge(q,M)),m.close()}else ye(Nr,`RPC '${e}' stream ${i} received:`,D),T.u_(D)}})),S(l,FG.STAT_EVENT,(A=>{A.stat===S1.PROXY?ye(Nr,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===S1.NOPROXY&&ye(Nr,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{T.__()}),0),T}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NH(){return typeof window<"u"?window:null}function N0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ly(t){return new vTe(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&ye("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t5="PersistentStream";class MH{constructor(e,n,r,i,s,o,l,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new BP(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ie.RESOURCE_EXHAUSTED?(Cn(n.toString()),Cn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new ge(ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ye(t5,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ye(t5,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class mEe extends MH{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=_Te(this.serializer,e),r=(function(s){if(!("targetChange"in s))return Be.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Be.min():o.readTime?In(o.readTime):Be.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=B1(this.serializer),n.addTarget=(function(s,o){let l;const u=o.target;if(l=kx(u)?{documents:Z8(s,u)}:{query:eH(s,u).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=K8(s,o.resumeToken);const d=F1(s,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(Be.min())>0){l.readTime=Qf(s,o.snapshotVersion.toTimestamp());const d=F1(s,o.expectedCount);d!==null&&(l.expectedCount=d)}return l})(this.serializer,e);const r=TTe(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=B1(this.serializer),n.removeTarget=e,this.q_(n)}}class pEe extends MH{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ue(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ue(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ue(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=wTe(e.writeResults,e.commitTime),r=In(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=B1(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>Tg(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gEe{}class yEe extends gEe{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ge(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.Go(e,j1(n,r),i,s,o))).catch((s=>{throw s.name==="FirebaseError"?(s.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ge(ie.UNKNOWN,s.toString())}))}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Ho(e,j1(n,r),i,o,l,s))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ge(ie.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class vEe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Cn(n),this.aa=!1):ye("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dc="RemoteStore";class xEe{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{tu(this)&&(ye(Dc,"Restarting streams for network reachability change."),await(async function(u){const d=Re(u);d.Ea.add(4),await Rh(d),d.Ra.set("Unknown"),d.Ea.delete(4),await uy(d)})(this))}))})),this.Ra=new vEe(r,i)}}async function uy(t){if(tu(t))for(const e of t.da)await e(!0)}async function Rh(t){for(const e of t.da)await e(!1)}function n_(t,e){const n=Re(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),$P(n)?zP(n):Nh(n).O_()&&qP(n,e))}function eh(t,e){const n=Re(t),r=Nh(n);n.Ia.delete(e),r.O_()&&DH(n,e),n.Ia.size===0&&(r.O_()?r.L_():tu(n)&&n.Ra.set("Unknown"))}function qP(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Be.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Nh(t).Y_(e)}function DH(t,e){t.Va.Ue(e),Nh(t).Z_(e)}function zP(t){t.Va=new mTe({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Nh(t).start(),t.Ra.ua()}function $P(t){return tu(t)&&!Nh(t).x_()&&t.Ia.size>0}function tu(t){return Re(t).Ea.size===0}function kH(t){t.Va=void 0}async function bEe(t){t.Ra.set("Online")}async function _Ee(t){t.Ia.forEach(((e,n)=>{qP(t,e)}))}async function wEe(t,e){kH(t),$P(t)?(t.Ra.ha(e),zP(t)):t.Ra.set("Unknown")}async function TEe(t,e,n){if(t.Ra.set("Online"),e instanceof H8&&e.state===2&&e.cause)try{await(async function(i,s){const o=s.cause;for(const l of s.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.Ia.delete(l),i.Va.removeTarget(l))})(t,e)}catch(r){ye(Dc,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await $x(t,r)}else if(e instanceof R0?t.Va.Ze(e):e instanceof G8?t.Va.st(e):t.Va.tt(e),!n.isEqual(Be.min()))try{const r=await wH(t.localStore);n.compareTo(r)>=0&&await(function(s,o){const l=s.Va.Tt(o);return l.targetChanges.forEach(((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.Ia.get(d);f&&s.Ia.set(d,f.withResumeToken(u.resumeToken,o))}})),l.targetMismatches.forEach(((u,d)=>{const f=s.Ia.get(u);if(!f)return;s.Ia.set(u,f.withResumeToken(bn.EMPTY_BYTE_STRING,f.snapshotVersion)),DH(s,u);const m=new Qo(f.target,u,d,f.sequenceNumber);qP(s,m)})),s.remoteSyncer.applyRemoteEvent(l)})(t,n)}catch(r){ye(Dc,"Failed to raise snapshot:",r),await $x(t,r)}}async function $x(t,e,n){if(!Zl(e))throw e;t.Ea.add(1),await Rh(t),t.Ra.set("Offline"),n||(n=()=>wH(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ye(Dc,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await uy(t)}))}function OH(t,e){return e().catch((n=>$x(t,n,e)))}async function Ph(t){const e=Re(t),n=Fl(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:El;for(;EEe(e);)try{const i=await oEe(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,SEe(e,i)}catch(i){await $x(e,i)}VH(e)&&LH(e)}function EEe(t){return tu(t)&&t.Ta.length<10}function SEe(t,e){t.Ta.push(e);const n=Fl(t);n.O_()&&n.X_&&n.ea(e.mutations)}function VH(t){return tu(t)&&!Fl(t).x_()&&t.Ta.length>0}function LH(t){Fl(t).start()}async function AEe(t){Fl(t).ra()}async function CEe(t){const e=Fl(t);for(const n of t.Ta)e.ea(n.mutations)}async function IEe(t,e,n){const r=t.Ta.shift(),i=CP.from(r,e,n);await OH(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await Ph(t)}async function REe(t,e){e&&Fl(t).X_&&await(async function(r,i){if((function(o){return q8(o)&&o!==ie.ABORTED})(i.code)){const s=r.Ta.shift();Fl(r).B_(),await OH(r,(()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i))),await Ph(r)}})(t,e),VH(t)&&LH(t)}async function n5(t,e){const n=Re(t);n.asyncQueue.verifyOperationInProgress(),ye(Dc,"RemoteStore received new credentials");const r=tu(n);n.Ea.add(3),await Rh(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await uy(n)}async function W1(t,e){const n=Re(t);e?(n.Ea.delete(2),await uy(n)):e||(n.Ea.add(2),await Rh(n),n.Ra.set("Unknown"))}function Nh(t){return t.ma||(t.ma=(function(n,r,i){const s=Re(n);return s.sa(),new mEe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Xo:bEe.bind(null,t),t_:_Ee.bind(null,t),r_:wEe.bind(null,t),H_:TEe.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),$P(t)?zP(t):t.Ra.set("Unknown")):(await t.ma.stop(),kH(t))}))),t.ma}function Fl(t){return t.fa||(t.fa=(function(n,r,i){const s=Re(n);return s.sa(),new pEe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:AEe.bind(null,t),r_:REe.bind(null,t),ta:CEe.bind(null,t),na:IEe.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Ph(t)):(await t.fa.stop(),t.Ta.length>0&&(ye(Dc,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new GP(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mh(t,e){if(Cn("AsyncQueue",`${e}: ${t}`),Zl(t))return new ge(ie.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{static emptySet(e){return new wf(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ce.comparator(n.key,r.key):(n,r)=>Ce.comparator(n.key,r.key),this.keyedMap=pp(),this.sortedSet=new Kt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof wf)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new wf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(){this.ga=new Kt(Ce.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ne(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class th{constructor(e,n,r,i,s,o,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach((l=>{o.push({type:0,doc:l})})),new th(e,n,wf.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ry(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PEe{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class NEe{constructor(){this.queries=i5(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=Re(n),s=i.queries;i.queries=i5(),s.forEach(((o,l)=>{for(const u of l.Sa)u.onError(r)}))})(this,new ge(ie.ABORTED,"Firestore shutting down"))}}function i5(){return new ba((t=>I8(t)),ry)}async function HP(t,e){const n=Re(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new PEe,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=Mh(o,`Initialization of query '${Wd(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&WP(n)}async function KP(t,e){const n=Re(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function MEe(t,e){const n=Re(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.Sa)l.Fa(i)&&(r=!0);o.wa=i}}r&&WP(n)}function DEe(t,e,n){const r=Re(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function WP(t){t.Ca.forEach((e=>{e.next()}))}var Y1,s5;(s5=Y1||(Y1={})).Ma="default",s5.Cache="cache";class YP{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new th(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=th.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Y1.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kEe{constructor(e,n){this.Qa=e,this.byteLength=n}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(e){this.serializer=e}$s(e){return co(this.serializer,e)}Us(e){return e.metadata.exists?X8(this.serializer,e.document,!1):Xt.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return In(e)}}class OEe{constructor(e,n){this.Ua=e,this.serializer=n,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=UH(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++n;const r=mt.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,{...this.progress}):null}za(e){const n=new Map,r=new o5(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.$s(i.metadata.name);for(const o of i.metadata.queries){const l=(n.get(o)||rt()).add(s);n.set(o,l)}}return n}async ja(e){const n=await aEe(e,new o5(this.serializer),this.Wa,this.Ua.id),r=this.za(this.documents);for(const i of this.Ka)await lEe(e,i,r.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:n}}}function UH(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FH{constructor(e){this.key=e}}class jH{constructor(e){this.key=e}}class BH{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=rt(),this.mutatedKeys=rt(),this.eu=P8(e),this.tu=new wf(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new r5,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((f,m)=>{const v=i.get(f),_=iy(this.query,m)?m:null,T=!!v&&this.mutatedKeys.has(v.key),S=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let A=!1;v&&_?v.data.isEqual(_.data)?T!==S&&(r.track({type:3,doc:_}),A=!0):this.su(v,_)||(r.track({type:2,doc:_}),A=!0,(u&&this.eu(_,u)>0||d&&this.eu(_,d)<0)&&(l=!0)):!v&&_?(r.track({type:0,doc:_}),A=!0):v&&!_&&(r.track({type:1,doc:v}),A=!0,(u||d)&&(l=!0)),A&&(_?(o=o.add(_),s=S?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{tu:o,iu:r,Cs:l,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((f,m)=>(function(_,T){const S=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne(20277,{Rt:A})}};return S(_)-S(T)})(f.type,m.type)||this.eu(f.doc,m.doc))),this.ou(r),i=i??!1;const l=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,d=u!==this.Za;return this.Za=u,o.length!==0||d?{snapshot:new th(this.query,e.tu,s,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new r5,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=rt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new jH(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new FH(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=rt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return th.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const nu="SyncEngine";class VEe{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class LEe{constructor(e){this.key=e,this.hu=!1}}class UEe{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ba((l=>I8(l)),ry),this.Iu=new Map,this.Eu=new Set,this.du=new Kt(Ce.comparator),this.Au=new Map,this.Ru=new kP,this.Vu={},this.mu=new Map,this.fu=Mc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function FEe(t,e,n=!0){const r=r_(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await qH(r,e,n,!0),i}async function jEe(t,e){const n=r_(t);await qH(n,e,!0,!1)}async function qH(t,e,n,r){const i=await Xf(t.localStore,Jr(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await JP(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&n_(t.remoteStore,i),l}async function JP(t,e,n,r,i){t.pu=(m,v,_)=>(async function(S,A,I,D){let N=A.view.ru(I);N.Cs&&(N=await Bx(S.localStore,A.query,!1).then((({documents:M})=>A.view.ru(M,N))));const U=D&&D.targetChanges.get(A.targetId),O=D&&D.targetMismatches.get(A.targetId)!=null,q=A.view.applyChanges(N,S.isPrimaryClient,U,O);return J1(S,A.targetId,q.au),q.snapshot})(t,m,v,_);const s=await Bx(t.localStore,e,!0),o=new BH(e,s.Qs),l=o.ru(s.documents),u=ay.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=o.applyChanges(l,t.isPrimaryClient,u);J1(t,n,d.au);const f=new VEe(e,n,o);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function BEe(t,e,n){const r=Re(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter((o=>!ry(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Zf(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&eh(r.remoteStore,i.targetId),nh(r,i.targetId)})).catch(Xl)):(nh(r,i.targetId),await Zf(r.localStore,i.targetId,!0))}async function qEe(t,e){const n=Re(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),eh(n.remoteStore,r.targetId))}async function zEe(t,e,n){const r=eN(t);try{const i=await(function(o,l){const u=Re(o),d=Nt.now(),f=l.reduce(((_,T)=>_.add(T.key)),rt());let m,v;return u.persistence.runTransaction("Locally write mutations","readwrite",(_=>{let T=li(),S=rt();return u.Ns.getEntries(_,f).next((A=>{T=A,T.forEach(((I,D)=>{D.isValidDocument()||(S=S.add(I))}))})).next((()=>u.localDocuments.getOverlayedDocuments(_,T))).next((A=>{m=A;const I=[];for(const D of l){const N=dTe(D,m.get(D.key).overlayedDocument);N!=null&&I.push(new _a(D.key,N,x8(N.value.mapValue),on.exists(!0)))}return u.mutationQueue.addMutationBatch(_,d,I,l)})).next((A=>{v=A;const I=A.applyToLocalDocumentSet(m,S);return u.documentOverlayCache.saveOverlays(_,A.batchId,I)}))})).then((()=>({batchId:v.batchId,changes:M8(m)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,l,u){let d=o.Vu[o.currentUser.toKey()];d||(d=new Kt(et)),d=d.insert(l,u),o.Vu[o.currentUser.toKey()]=d})(r,i.batchId,n),await wa(r,i.changes),await Ph(r.remoteStore)}catch(i){const s=Mh(i,"Failed to persist write");n.reject(s)}}async function zH(t,e){const n=Re(t);try{const r=await sEe(n.localStore,e);e.targetChanges.forEach(((i,s)=>{const o=n.Au.get(s);o&&(Ue(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Ue(o.hu,14607):i.removedDocuments.size>0&&(Ue(o.hu,42227),o.hu=!1))})),await wa(n,r,e)}catch(r){await Xl(r)}}function a5(t,e,n){const r=Re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((s,o)=>{const l=o.view.va(e);l.snapshot&&i.push(l.snapshot)})),(function(o,l){const u=Re(o);u.onlineState=l;let d=!1;u.queries.forEach(((f,m)=>{for(const v of m.Sa)v.va(l)&&(d=!0)})),d&&WP(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function $Ee(t,e,n){const r=Re(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new Kt(Ce.comparator);o=o.insert(s,Xt.newNoDocument(s,Be.min()));const l=rt().add(s),u=new oy(Be.min(),new Map,new Kt(et),o,l);await zH(r,u),r.du=r.du.remove(s),r.Au.delete(e),ZP(r)}else await Zf(r.localStore,e,!1).then((()=>nh(r,e,n))).catch(Xl)}async function GEe(t,e){const n=Re(t),r=e.batch.batchId;try{const i=await iEe(n.localStore,e);XP(n,r,null),QP(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await wa(n,i)}catch(i){await Xl(i)}}async function HEe(t,e,n){const r=Re(t);try{const i=await(function(o,l){const u=Re(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let f;return u.mutationQueue.lookupMutationBatch(d,l).next((m=>(Ue(m!==null,37113),f=m.keys(),u.mutationQueue.removeMutationBatch(d,m)))).next((()=>u.mutationQueue.performConsistencyCheck(d))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,l))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f))).next((()=>u.localDocuments.getDocuments(d,f)))}))})(r.localStore,e);XP(r,e,n),QP(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await wa(r,i)}catch(i){await Xl(i)}}async function KEe(t,e){const n=Re(t);tu(n.remoteStore)||ye(nu,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await(function(o){const l=Re(o);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(u=>l.mutationQueue.getHighestUnacknowledgedBatchId(u)))})(n.localStore);if(r===El)return void e.resolve();const i=n.mu.get(r)||[];i.push(e),n.mu.set(r,i)}catch(r){const i=Mh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function QP(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function XP(t,e,n){const r=Re(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function nh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||$H(t,r)}))}function $H(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(eh(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),ZP(t))}function J1(t,e,n){for(const r of n)r instanceof FH?(t.Ru.addReference(r.key,e),WEe(t,r)):r instanceof jH?(ye(nu,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||$H(t,r.key)):Ne(19791,{wu:r})}function WEe(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(ye(nu,"New document in limbo: "+n),t.Eu.add(r),ZP(t))}function ZP(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Ce(mt.fromString(e)),r=t.fu.next();t.Au.set(r,new LEe(n)),t.du=t.du.insert(n,r),n_(t.remoteStore,new Qo(Jr(Ah(n.path)),r,"TargetPurposeLimboResolution",oi.ce))}}async function wa(t,e,n){const r=Re(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((l,u)=>{o.push(r.pu(u,e,n).then((d=>{var f;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){i.push(d);const m=UP.As(u.targetId,d);s.push(m)}})))})),await Promise.all(o),r.Pu.H_(i),await(async function(u,d){const f=Re(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(m=>Z.forEach(d,(v=>Z.forEach(v.Es,(_=>f.persistence.referenceDelegate.addReference(m,v.targetId,_))).next((()=>Z.forEach(v.ds,(_=>f.persistence.referenceDelegate.removeReference(m,v.targetId,_)))))))))}catch(m){if(!Zl(m))throw m;ye(FP,"Failed to update sequence numbers: "+m)}for(const m of d){const v=m.targetId;if(!m.fromCache){const _=f.Ms.get(v),T=_.snapshotVersion,S=_.withLastLimboFreeSnapshotVersion(T);f.Ms=f.Ms.insert(v,S)}}})(r.localStore,s))}async function YEe(t,e){const n=Re(t);if(!n.currentUser.isEqual(e)){ye(nu,"User change. New user:",e.toKey());const r=await _H(n.localStore,e);n.currentUser=e,(function(s,o){s.mu.forEach((l=>{l.forEach((u=>{u.reject(new ge(ie.CANCELLED,o))}))})),s.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await wa(n,r.Ls)}}function JEe(t,e){const n=Re(t),r=n.Au.get(e);if(r&&r.hu)return rt().add(r.key);{let i=rt();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const l=n.Tu.get(o);i=i.unionWith(l.view.nu)}return i}}async function QEe(t,e){const n=Re(t),r=await Bx(n.localStore,e.query,!0),i=e.view.cu(r);return n.isPrimaryClient&&J1(n,e.targetId,i.au),i}async function XEe(t,e){const n=Re(t);return SH(n.localStore,e).then((r=>wa(n,r)))}async function ZEe(t,e,n,r){const i=Re(t),s=await(function(l,u){const d=Re(l),f=Re(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",(m=>f.er(m,u).next((v=>v?d.localDocuments.getDocuments(m,v):Z.resolve(null)))))})(i.localStore,e);s!==null?(n==="pending"?await Ph(i.remoteStore):n==="acknowledged"||n==="rejected"?(XP(i,e,r||null),QP(i,e),(function(l,u){Re(Re(l).mutationQueue).ir(u)})(i.localStore,e)):Ne(6720,"Unknown batchState",{Su:n}),await wa(i,s)):ye(nu,"Cannot apply mutation batch with id: "+e)}async function eSe(t,e){const n=Re(t);if(r_(n),eN(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await l5(n,r.toArray());n.gu=!0,await W1(n.remoteStore,!0);for(const s of i)n_(n.remoteStore,s)}else if(e===!1&&n.gu!==!1){const r=[];let i=Promise.resolve();n.Iu.forEach(((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then((()=>(nh(n,o),Zf(n.localStore,o,!0)))),eh(n.remoteStore,o)})),await i,await l5(n,r),(function(o){const l=Re(o);l.Au.forEach(((u,d)=>{eh(l.remoteStore,d)})),l.Ru.Jr(),l.Au=new Map,l.du=new Kt(Ce.comparator)})(n),n.gu=!1,await W1(n.remoteStore,!1)}}async function l5(t,e,n){const r=Re(t),i=[],s=[];for(const o of e){let l;const u=r.Iu.get(o);if(u&&u.length!==0){l=await Xf(r.localStore,Jr(u[0]));for(const d of u){const f=r.Tu.get(d),m=await QEe(r,f);m.snapshot&&s.push(m.snapshot)}}else{const d=await EH(r.localStore,o);l=await Xf(r.localStore,d),await JP(r,GH(d),o,!1,l.resumeToken)}i.push(l)}return r.Pu.H_(s),i}function GH(t){return C8(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function tSe(t){return(function(n){return Re(Re(n).persistence).Ts()})(Re(t).localStore)}async function nSe(t,e,n,r){const i=Re(t);if(i.gu)return void ye(nu,"Ignoring unexpected query state notification.");const s=i.Iu.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await SH(i.localStore,R8(s[0])),l=oy.createSynthesizedRemoteEventForCurrentChange(e,n==="current",bn.EMPTY_BYTE_STRING);await wa(i,o,l);break}case"rejected":await Zf(i.localStore,e,!0),nh(i,e,r);break;default:Ne(64155,n)}}async function rSe(t,e,n){const r=r_(t);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){ye(nu,"Adding an already active target "+i);continue}const s=await EH(r.localStore,i),o=await Xf(r.localStore,s);await JP(r,GH(s),o.targetId,!1,o.resumeToken),n_(r.remoteStore,o)}for(const i of n)r.Iu.has(i)&&await Zf(r.localStore,i,!1).then((()=>{eh(r.remoteStore,i),nh(r,i)})).catch(Xl)}}function r_(t){const e=Re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=zH.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=JEe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$Ee.bind(null,e),e.Pu.H_=MEe.bind(null,e.eventManager),e.Pu.yu=DEe.bind(null,e.eventManager),e}function eN(t){const e=Re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=GEe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=HEe.bind(null,e),e}function iSe(t,e,n){const r=Re(t);(async function(s,o,l){try{const u=await o.getMetadata();if(await(function(_,T){const S=Re(_),A=In(T.createTime);return S.persistence.runTransaction("hasNewerBundle","readonly",(I=>S.Ii.getBundleMetadata(I,T.id))).then((I=>!!I&&I.createTime.compareTo(A)>=0))})(s.localStore,u))return await o.close(),l._completeWith((function(_){return{taskState:"Success",documentsLoaded:_.totalDocuments,bytesLoaded:_.totalBytes,totalDocuments:_.totalDocuments,totalBytes:_.totalBytes}})(u)),Promise.resolve(new Set);l._updateProgress(UH(u));const d=new OEe(u,o.serializer);let f=await o.bu();for(;f;){const v=await d.Ga(f);v&&l._updateProgress(v),f=await o.bu()}const m=await d.ja(s.localStore);return await wa(s,m.Ha,void 0),await(function(_,T){const S=Re(_);return S.persistence.runTransaction("Save bundle","readwrite",(A=>S.Ii.saveBundleMetadata(A,T)))})(s.localStore,u),l._completeWith(m.progress),Promise.resolve(m.Ja)}catch(u){return yo(nu,`Loading bundle failed with ${u}`),l._failWith(u),Promise.resolve(new Set)}})(r,e,n).then((i=>{r.sharedClientState.notifyBundleLoaded(i)}))}class Eg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ly(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return bH(this.persistence,new xH,e.initialUser,this.serializer)}Cu(e){return new OP(t_.mi,this.serializer)}Du(e){return new PH}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Eg.provider={build:()=>new Eg};class sSe extends Eg{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ue(this.persistence.referenceDelegate instanceof jx,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new hH(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Dr.withCacheSize(this.cacheSizeBytes):Dr.DEFAULT;return new OP((r=>jx.mi(r,n)),this.serializer)}}class HH extends Eg{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await eN(this.xu.syncEngine),await Ph(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return bH(this.persistence,new xH,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new hH(r,e.asyncQueue,n)}Mu(e,n){const r=new mwe(n,this.persistence);return new hwe(e.asyncQueue,r)}Cu(e){const n=LP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Dr.withCacheSize(this.cacheSizeBytes):Dr.DEFAULT;return new VP(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,NH(),N0(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new PH}}class oSe extends HH{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof $S&&(this.sharedClientState.syncEngine={Co:ZEe.bind(null,n),vo:nSe.bind(null,n),Fo:rSe.bind(null,n),Ts:tSe.bind(null,n),Do:XEe.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await eSe(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const n=NH();if(!$S.v(n))throw new ge(ie.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=LP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new $S(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Sg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>a5(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=YEe.bind(null,this.syncEngine),await W1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new NEe})()}createDatastore(e){const n=ly(e.databaseInfo.databaseId),r=(function(s){return new hEe(s)})(e.databaseInfo);return(function(s,o,l,u){return new yEe(s,o,l,u)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,s,o,l){return new xEe(r,i,s,o,l)})(this.localStore,this.datastore,e.asyncQueue,(n=>a5(this.syncEngine,n,0)),(function(){return e5.v()?new e5:new uEe})())}createSyncEngine(e,n){return(function(i,s,o,l,u,d,f){const m=new UEe(i,s,o,l,u,d);return f&&(m.gu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(i){const s=Re(i);ye(Dc,"RemoteStore shutting down."),s.Ea.add(5),await Rh(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Sg.provider={build:()=>new Sg};function u5(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Cn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aSe{constructor(e,n){this.Bu=e,this.serializer=n,this.metadata=new Sr,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((r=>{r&&r.$a()?this.metadata.resolve(r.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Qa)}`))}),(r=>this.metadata.reject(r)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const n=this.Lu.decode(e),r=Number(n);isNaN(r)&&this.Qu(`length string (${n}) is not valid number`);const i=await this.$u(r);return new kEe(JSON.parse(i),e.length+r)}Uu(){return this.buffer.findIndex((e=>e===123))}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const n=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lSe{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ge(ie.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(i,s){const o=Re(i),l={documents:s.map((m=>wg(o.serializer,m)))},u=await o.Ho("BatchGetDocuments",o.serializer.databaseId,mt.emptyPath(),l,s.length),d=new Map;u.forEach((m=>{const v=bTe(o.serializer,m);d.set(v.key.toString(),v)}));const f=[];return s.forEach((m=>{const v=d.get(m.toString());Ue(!!v,55234,{key:m}),f.push(v)})),f})(this.datastore,e);return n.forEach((r=>this.recordVersion(r))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ih(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,r)=>{const i=Ce.fromPath(r);this.mutations.push(new SP(i,this.precondition(i)))})),await(async function(r,i){const s=Re(r),o={writes:i.map((l=>Tg(s.serializer,l)))};await s.Go("Commit",s.serializer.databaseId,mt.emptyPath(),o)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Ne(50498,{Gu:e.constructor.name});n=Be.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new ge(ie.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Be.min())?on.exists(!1):on.updateTime(n):on.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Be.min()))throw new ge(ie.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return on.updateTime(n)}return on.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uSe{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.zu=r.maxAttempts,this.M_=new BP(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new lSe(this.datastore),n=this.Hu(e);n&&n.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((i=>{this.Yu(i)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const n=this.updateFunction(e);return!ey(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!q8(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jl="FirestoreClient";class cSe{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ur.UNAUTHENTICATED,this.clientId=dP.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,(async o=>{ye(jl,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(ye(jl,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Mh(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function HS(t,e){t.asyncQueue.verifyOperationInProgress(),ye(jl,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await _H(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function c5(t,e){t.asyncQueue.verifyOperationInProgress();const n=await tN(t);ye(jl,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>n5(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>n5(e.remoteStore,i))),t._onlineComponents=e}async function tN(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ye(jl,"Using user provided OfflineComponentProvider");try{await HS(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ie.FAILED_PRECONDITION||i.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;yo("Error using user provided cache. Falling back to memory cache: "+n),await HS(t,new Eg)}}else ye(jl,"Using default OfflineComponentProvider"),await HS(t,new sSe(void 0));return t._offlineComponents}async function s_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ye(jl,"Using user provided OnlineComponentProvider"),await c5(t,t._uninitializedComponentsProvider._online)):(ye(jl,"Using default OnlineComponentProvider"),await c5(t,new Sg))),t._onlineComponents}function KH(t){return tN(t).then((e=>e.persistence))}function nN(t){return tN(t).then((e=>e.localStore))}function WH(t){return s_(t).then((e=>e.remoteStore))}function rN(t){return s_(t).then((e=>e.syncEngine))}function dSe(t){return s_(t).then((e=>e.datastore))}async function rh(t){const e=await s_(t),n=e.eventManager;return n.onListen=FEe.bind(null,e.syncEngine),n.onUnlisten=BEe.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=jEe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=qEe.bind(null,e.syncEngine),n}function fSe(t){return t.asyncQueue.enqueue((async()=>{const e=await KH(t),n=await WH(t);return e.setNetworkEnabled(!0),(function(i){const s=Re(i);return s.Ea.delete(0),uy(s)})(n)}))}function hSe(t){return t.asyncQueue.enqueue((async()=>{const e=await KH(t),n=await WH(t);return e.setNetworkEnabled(!1),(async function(i){const s=Re(i);s.Ea.add(0),await Rh(s),s.Ra.set("Offline")})(n)}))}function mSe(t,e){const n=new Sr;return t.asyncQueue.enqueueAndForget((async()=>(async function(i,s,o){try{const l=await(function(d,f){const m=Re(d);return m.persistence.runTransaction("read document","readonly",(v=>m.localDocuments.getDocument(v,f)))})(i,s);l.isFoundDocument()?o.resolve(l):l.isNoDocument()?o.resolve(null):o.reject(new ge(ie.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const u=Mh(l,`Failed to get document '${s} from cache`);o.reject(u)}})(await nN(t),e,n))),n.promise}function YH(t,e,n={}){const r=new Sr;return t.asyncQueue.enqueueAndForget((async()=>(function(s,o,l,u,d){const f=new i_({next:v=>{f.Nu(),o.enqueueAndForget((()=>KP(s,m)));const _=v.docs.has(l);!_&&v.fromCache?d.reject(new ge(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&v.fromCache&&u&&u.source==="server"?d.reject(new ge(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(v)},error:v=>d.reject(v)}),m=new YP(Ah(l.path),f,{includeMetadataChanges:!0,qa:!0});return HP(s,m)})(await rh(t),t.asyncQueue,e,n,r))),r.promise}function pSe(t,e){const n=new Sr;return t.asyncQueue.enqueueAndForget((async()=>(async function(i,s,o){try{const l=await Bx(i,s,!0),u=new BH(s,l.Qs),d=u.ru(l.documents),f=u.applyChanges(d,!1);o.resolve(f.snapshot)}catch(l){const u=Mh(l,`Failed to execute query '${s} against cache`);o.reject(u)}})(await nN(t),e,n))),n.promise}function JH(t,e,n={}){const r=new Sr;return t.asyncQueue.enqueueAndForget((async()=>(function(s,o,l,u,d){const f=new i_({next:v=>{f.Nu(),o.enqueueAndForget((()=>KP(s,m))),v.fromCache&&u.source==="server"?d.reject(new ge(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(v)},error:v=>d.reject(v)}),m=new YP(l,f,{includeMetadataChanges:!0,qa:!0});return HP(s,m)})(await rh(t),t.asyncQueue,e,n,r))),r.promise}function gSe(t,e){const n=new i_(e);return t.asyncQueue.enqueueAndForget((async()=>(function(i,s){Re(i).Ca.add(s),s.next()})(await rh(t),n))),()=>{n.Nu(),t.asyncQueue.enqueueAndForget((async()=>(function(i,s){Re(i).Ca.delete(s)})(await rh(t),n)))}}function ySe(t,e,n,r){const i=(function(o,l){let u;return u=typeof o=="string"?$8().encode(o):o,(function(f,m){return new aSe(f,m)})((function(f,m){if(f instanceof Uint8Array)return u5(f,m);if(f instanceof ArrayBuffer)return u5(new Uint8Array(f),m);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(u),l)})(n,ly(e));t.asyncQueue.enqueueAndForget((async()=>{iSe(await rN(t),i,r)}))}function vSe(t,e){return t.asyncQueue.enqueue((async()=>(function(r,i){const s=Re(r);return s.persistence.runTransaction("Get named query","readonly",(o=>s.Ii.getNamedQuery(o,i)))})(await nN(t),e)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QH(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d5=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XH="firestore.googleapis.com",f5=!0;class h5{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=XH,this.ssl=f5}else this.host=e.host,this.ssl=e.ssl??f5;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=uH;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<FTe)throw new ge(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GG("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=QH(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ge(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ge(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ge(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cy{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new h5({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new h5(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new twe;switch(r.type){case"firstParty":return new swe(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ge(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=d5.get(n);r&&(ye("ComponentProvider","Removing Datastore"),d5.delete(n),r.terminate())})(this),Promise.resolve()}}function xSe(t,e,n,r={}){var d;t=Tt(t,cy);const i=oh(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;i&&(YF(`https://${l}`),JF("Firestore",!0)),s.host!==XH&&s.host!==l&&yo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:l,ssl:i,emulatorOptions:r};if(!Al(u,o)&&(t._setSettings(u),r.mockUserToken)){let f,m;if(typeof r.mockUserToken=="string")f=r.mockUserToken,m=ur.MOCK_USER;else{f=tY(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new ge(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new ur(v)}t._authCredentials=new nwe(new zG(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qr=class ZH{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ZH(this.firestore,e,this._query)}},Ht=class vp{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vp(this.firestore,e,this._key)}toJSON(){return{type:vp._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Zg(n,vp._jsonSchema))return new vp(e,r||null,new Ce(mt.fromString(n.referencePath)))}};Ht._jsonSchemaVersion="firestore/documentReference/1.0",Ht._jsonSchema={type:Ln("string",Ht._jsonSchemaVersion),referencePath:Ln("string")};let Sl=class e7 extends Qr{constructor(e,n,r){super(e,n,Ah(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ht(this.firestore,null,new Ce(e))}withConverter(e){return new e7(this.firestore,e,this._path)}};function t7(t,e,...n){if(t=Ke(t),fP("collection","path",e),t instanceof cy){const r=mt.fromString(e,...n);return tU(r),new Sl(t,null,r)}{if(!(t instanceof Ht||t instanceof Sl))throw new ge(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(mt.fromString(e,...n));return tU(r),new Sl(t.firestore,null,r)}}function bSe(t,e){if(t=Tt(t,cy),fP("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ge(ie.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Qr(t,null,(function(r){return new xa(mt.emptyPath(),r)})(e))}function Gx(t,e,...n){if(t=Ke(t),arguments.length===1&&(e=dP.newId()),fP("doc","path",e),t instanceof cy){const r=mt.fromString(e,...n);return eU(r),new Ht(t,null,new Ce(r))}{if(!(t instanceof Ht||t instanceof Sl))throw new ge(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(mt.fromString(e,...n));return eU(r),new Ht(t.firestore,t instanceof Sl?t.converter:null,new Ce(r))}}function n7(t,e){return t=Ke(t),e=Ke(e),(t instanceof Ht||t instanceof Sl)&&(e instanceof Ht||e instanceof Sl)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function r7(t,e){return t=Ke(t),e=Ke(e),t instanceof Qr&&e instanceof Qr&&t.firestore===e.firestore&&ry(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m5="AsyncQueue";class p5{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new BP(this,"async_queue_retry"),this._c=()=>{const r=N0();r&&ye(m5,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=N0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=N0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Sr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Zl(e))throw e;ye(m5,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Cn("INTERNAL UNHANDLED ERROR: ",g5(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=GP.createAndSchedule(this,e,n,r,(s=>this.hc(s)));return this.tc.push(i),i}uc(){this.nc&&Ne(47125,{Pc:g5(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function g5(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(t,["next","error","complete"])}class _Se{constructor(){this._progressObserver={},this._taskCompletionResolver=new Sr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wSe=-1;let Rn=class extends cy{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new p5,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new p5(e),this._firestoreClient=void 0,await e}}};function Fr(t){if(t._terminated)throw new ge(ie.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||i7(t),t._firestoreClient}function i7(t){var r,i,s;const e=t._freezeSettings(),n=(function(l,u,d,f){return new zwe(l,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,QH(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)})(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new cSe(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}})(t._componentsProvider))}function TSe(t,e){yo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return s7(t,Sg.provider,{build:r=>new HH(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function ESe(t){yo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();s7(t,Sg.provider,{build:n=>new oSe(n,e.cacheSizeBytes)})}function s7(t,e,n){if((t=Tt(t,Rn))._firestoreClient||t._terminated)throw new ge(ie.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new ge(ie.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},i7(t)}function SSe(t){if(t._initialized&&!t._terminated)throw new ge(ie.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Sr;return t._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(r){if(!uo.v())return Promise.resolve();const i=r+vH;await uo.delete(i)})(LP(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function ASe(t){return(function(n){const r=new Sr;return n.asyncQueue.enqueueAndForget((async()=>KEe(await rN(n),r))),r.promise})(Fr(t=Tt(t,Rn)))}function CSe(t){return fSe(Fr(t=Tt(t,Rn)))}function ISe(t){return hSe(Fr(t=Tt(t,Rn)))}function RSe(t,e){const n=Fr(t=Tt(t,Rn)),r=new _Se;return ySe(n,t._databaseId,e,r),r}function PSe(t,e){return vSe(Fr(t=Tt(t,Rn)),e).then((n=>n?new Qr(t,null,n.query):null))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Or(bn.fromBase64String(e))}catch(n){throw new ge(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Or(bn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Or._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Zg(e,Or._jsonSchema))return Or.fromBase64String(e.bytes)}}Or._jsonSchemaVersion="firestore/bytes/1.0",Or._jsonSchema={type:Ln("string",Or._jsonSchemaVersion),bytes:Ln("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bl=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ge(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bc=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ge(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ge(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return et(this._lat,e._lat)||et(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:As._jsonSchemaVersion}}static fromJSON(e){if(Zg(e,As._jsonSchema))return new As(e.latitude,e.longitude)}}As._jsonSchemaVersion="firestore/geoPoint/1.0",As._jsonSchema={type:Ln("string",As._jsonSchemaVersion),latitude:Ln("number"),longitude:Ln("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:fo._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Zg(e,fo._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new fo(e.vectorValues);throw new ge(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}fo._jsonSchemaVersion="firestore/vectorValue/1.0",fo._jsonSchema={type:Ln("string",fo._jsonSchemaVersion),vectorValues:Ln("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NSe=/^__.*__$/;class MSe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new _a(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ch(e,this.data,n,this.fieldTransforms)}}class o7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new _a(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function a7(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne(40011,{Ac:t})}}class o_{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new o_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Hx(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(a7(this.Ac)&&NSe.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class DSe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ly(e)}Cc(e,n,r,i=!1){return new o_({Ac:e,methodName:n,Dc:r,path:sn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qc(t){const e=t._freezeSettings(),n=ly(t._databaseId);return new DSe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function a_(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);cN("Data must be an object, but it was:",o,r);const l=c7(r,o);let u,d;if(s.merge)u=new ai(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const m of s.mergeFields){const v=X1(e,m,n);if(!o.contains(v))throw new ge(ie.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);f7(f,v)||f.push(v)}u=new ai(f),d=o.fieldTransforms.filter((m=>u.covers(m.field)))}else u=null,d=o.fieldTransforms;return new MSe(new Tr(l),u,d)}class dy extends Bc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof dy}}function l7(t,e,n){return new o_({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class iN extends Bc{_toFieldTransform(e){return new sy(e.path,new Yf)}isEqual(e){return e instanceof iN}}class sN extends Bc{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=l7(this,e,!0),r=this.vc.map((s=>zc(s,n))),i=new Ic(r);return new sy(e.path,i)}isEqual(e){return e instanceof sN&&Al(this.vc,e.vc)}}class oN extends Bc{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=l7(this,e,!0),r=this.vc.map((s=>zc(s,n))),i=new Rc(r);return new sy(e.path,i)}isEqual(e){return e instanceof oN&&Al(this.vc,e.vc)}}class aN extends Bc{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new Jf(e.serializer,O8(e.serializer,this.Fc));return new sy(e.path,n)}isEqual(e){return e instanceof aN&&this.Fc===e.Fc}}function lN(t,e,n,r){const i=t.Cc(1,e,n);cN("Data must be an object, but it was:",i,r);const s=[],o=Tr.empty();eu(r,((u,d)=>{const f=dN(e,u,n);d=Ke(d);const m=i.yc(f);if(d instanceof dy)s.push(f);else{const v=zc(d,m);v!=null&&(s.push(f),o.set(f,v))}}));const l=new ai(s);return new o7(o,l,i.fieldTransforms)}function uN(t,e,n,r,i,s){const o=t.Cc(1,e,n),l=[X1(e,r,n)],u=[i];if(s.length%2!=0)throw new ge(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<s.length;v+=2)l.push(X1(e,s[v])),u.push(s[v+1]);const d=[],f=Tr.empty();for(let v=l.length-1;v>=0;--v)if(!f7(d,l[v])){const _=l[v];let T=u[v];T=Ke(T);const S=o.yc(_);if(T instanceof dy)d.push(_);else{const A=zc(T,S);A!=null&&(d.push(_),f.set(_,A))}}const m=new ai(d);return new o7(f,m,o.fieldTransforms)}function u7(t,e,n,r=!1){return zc(n,t.Cc(r?4:3,e))}function zc(t,e){if(d7(t=Ke(t)))return cN("Unsupported field value:",e,t),c7(t,e);if(t instanceof Bc)return(function(r,i){if(!a7(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const s=[];let o=0;for(const l of r){let u=zc(l,i.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}})(t,e)}return(function(r,i){if((r=Ke(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return O8(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Nt.fromDate(r);return{timestampValue:Qf(i.serializer,s)}}if(r instanceof Nt){const s=new Nt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qf(i.serializer,s)}}if(r instanceof As)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Or)return{bytesValue:K8(i.serializer,r._byteString)};if(r instanceof Ht){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:PP(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof fo)return(function(o,l){return{mapValue:{fields:{[xP]:{stringValue:bP},[Hf]:{arrayValue:{values:o.toArray().map((d=>{if(typeof d!="number")throw l.Sc("VectorValues must only contain numeric values.");return EP(l.serializer,d)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${zb(r)}`)})(t,e)}function c7(t,e){const n={};return c8(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):eu(t,((r,i)=>{const s=zc(i,e.mc(r));s!=null&&(n[r]=s)})),{mapValue:{fields:n}}}function d7(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Nt||t instanceof As||t instanceof Or||t instanceof Ht||t instanceof Bc||t instanceof fo)}function cN(t,e,n){if(!d7(n)||!HG(n)){const r=zb(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function X1(t,e,n){if((e=Ke(e))instanceof Bl)return e._internalPath;if(typeof e=="string")return dN(t,e);throw Hx("Field path arguments must be of type string or ",t,!1,void 0,n)}const kSe=new RegExp("[~\\*/\\[\\]]");function dN(t,e,n){if(e.search(kSe)>=0)throw Hx(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Bl(...e.split("."))._internalPath}catch{throw Hx(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Hx(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new ge(ie.INVALID_ARGUMENT,l+t+u)}function f7(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new OSe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(l_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class OSe extends Ag{data(){return super.data()}}function l_(t,e){return typeof e=="string"?dN(t,e):e instanceof Bl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h7(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ge(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fN{}class fy extends fN{}function ul(t,e,...n){let r=[];e instanceof fN&&r.push(e),r=r.concat(n),(function(s){const o=s.filter((u=>u instanceof hN)).length,l=s.filter((u=>u instanceof u_)).length;if(o>1||o>0&&l>0)throw new ge(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class u_ extends fy{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new u_(e,n,r)}_apply(e){const n=this._parse(e);return p7(e._query,n),new Qr(e.firestore,e.converter,U1(e._query,n))}_parse(e){const n=qc(e.firestore);return(function(s,o,l,u,d,f,m){let v;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new ge(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){v5(m,f);const T=[];for(const S of m)T.push(y5(u,s,S));v={arrayValue:{values:T}}}else v=y5(u,s,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||v5(m,f),v=u7(l,o,m,f==="in"||f==="not-in");return pt.create(d,f,v)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function VSe(t,e,n){const r=e,i=l_("where",t);return u_._create(i,r,n)}class hN extends fN{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new hN(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Ot.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,s){let o=i;const l=s.getFlattenedFilters();for(const u of l)p7(o,u),o=U1(o,u)})(e._query,n),new Qr(e.firestore,e.converter,U1(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class mN extends fy{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new mN(e,n)}_apply(e){const n=(function(i,s,o){if(i.startAt!==null)throw new ge(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ge(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _g(s,o)})(e._query,this._field,this._direction);return new Qr(e.firestore,e.converter,(function(i,s){const o=i.explicitOrderBy.concat([s]);return new xa(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}}function LSe(t,e="asc"){const n=e,r=l_("orderBy",t);return mN._create(r,n)}class c_ extends fy{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new c_(e,n,r)}_apply(e){return new Qr(e.firestore,e.converter,Vx(e._query,this._limit,this._limitType))}}function USe(t){return KG("limit",t),c_._create("limit",t,"F")}function FSe(t){return KG("limitToLast",t),c_._create("limitToLast",t,"L")}class d_ extends fy{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new d_(e,n,r)}_apply(e){const n=m7(e,this.type,this._docOrFields,this._inclusive);return new Qr(e.firestore,e.converter,(function(i,s){return new xa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)})(e._query,n))}}function jSe(...t){return d_._create("startAt",t,!0)}function BSe(...t){return d_._create("startAfter",t,!1)}class f_ extends fy{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new f_(e,n,r)}_apply(e){const n=m7(e,this.type,this._docOrFields,this._inclusive);return new Qr(e.firestore,e.converter,(function(i,s){return new xa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)})(e._query,n))}}function qSe(...t){return f_._create("endBefore",t,!1)}function zSe(...t){return f_._create("endAt",t,!0)}function m7(t,e,n,r){if(n[0]=Ke(n[0]),n[0]instanceof Ag)return(function(s,o,l,u,d){if(!u)throw new ge(ie.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const f=[];for(const m of _f(s))if(m.field.isKeyField())f.push(Ac(o,u.key));else{const v=u.data.field(m.field);if(Wb(v))throw new ge(ie.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(v===null){const _=m.field.canonicalString();throw new ge(ie.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${_}' (used as the orderBy) does not exist.`)}f.push(v)}return new Ul(f,d)})(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=qc(t.firestore);return(function(o,l,u,d,f,m){const v=o.explicitOrderBy;if(f.length>v.length)throw new ge(ie.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const _=[];for(let T=0;T<f.length;T++){const S=f[T];if(v[T].field.isKeyField()){if(typeof S!="string")throw new ge(ie.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof S}`);if(!wP(o)&&S.indexOf("/")!==-1)throw new ge(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${S}' contains a slash.`);const A=o.path.child(mt.fromString(S));if(!Ce.isDocumentKey(A))throw new ge(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${A}' is not because it contains an odd number of segments.`);const I=new Ce(A);_.push(Ac(l,I))}else{const A=u7(u,d,S);_.push(A)}}return new Ul(_,m)})(t._query,t.firestore._databaseId,i,e,n,r)}}function y5(t,e,n){if(typeof(n=Ke(n))=="string"){if(n==="")throw new ge(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wP(e)&&n.indexOf("/")!==-1)throw new ge(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(mt.fromString(n));if(!Ce.isDocumentKey(r))throw new ge(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ac(t,new Ce(r))}if(n instanceof Ht)return Ac(t,n._key);throw new ge(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zb(n)}.`)}function v5(t,e){if(!Array.isArray(t)||t.length===0)throw new ge(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function p7(t,e){const n=(function(i,s){for(const o of i)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ge(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class pN{convertValue(e,n="none"){switch(Vl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ca(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return eu(e,((i,s)=>{r[i]=this.convertValue(s,n)})),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[Hf].arrayValue)==null?void 0:i.values)==null?void 0:s.map((o=>nn(o.doubleValue)));return new fo(n)}convertGeoPoint(e){return new As(nn(e.latitude),nn(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Yb(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(vg(e));default:return null}}convertTimestamp(e){const n=ua(e);return new Nt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=mt.fromString(e);Ue(iH(r),9688,{name:e});const i=new Ol(r.get(1),r.get(3)),s=new Ce(r.popFirst(5));return i.isEqual(n)||Cn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h_(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class $Se extends pN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Or(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ht(this.firestore,null,n)}}class sc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let ss=class g7 extends Ag{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Bp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(l_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=g7._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};ss._jsonSchemaVersion="firestore/documentSnapshot/1.0",ss._jsonSchema={type:Ln("string",ss._jsonSchemaVersion),bundleSource:Ln("string","DocumentSnapshot"),bundleName:Ln("string"),bundle:Ln("string")};let Bp=class extends ss{data(e={}){return super.data(e)}},Cs=class y7{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new sc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Bp(this._firestore,this._userDataWriter,r.key,r,new sc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ge(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((l=>{const u=new Bp(i._firestore,i._userDataWriter,l.doc.key,l.doc,new sc(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((l=>s||l.type!==3)).map((l=>{const u=new Bp(i._firestore,i._userDataWriter,l.doc.key,l.doc,new sc(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,f=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:GSe(l.type),doc:u,oldIndex:d,newIndex:f}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=y7._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=dP.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function GSe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne(61501,{type:t})}}function v7(t,e){return t instanceof ss&&e instanceof ss?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Cs&&e instanceof Cs&&t._firestore===e._firestore&&r7(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HSe(t){t=Tt(t,Ht);const e=Tt(t.firestore,Rn);return YH(Fr(e),t._key).then((n=>gN(e,t,n)))}Cs._jsonSchemaVersion="firestore/querySnapshot/1.0",Cs._jsonSchema={type:Ln("string",Cs._jsonSchemaVersion),bundleSource:Ln("string","QuerySnapshot"),bundleName:Ln("string"),bundle:Ln("string")};class $c extends pN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Or(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ht(this.firestore,null,n)}}function KSe(t){t=Tt(t,Ht);const e=Tt(t.firestore,Rn),n=Fr(e),r=new $c(e);return mSe(n,t._key).then((i=>new ss(e,r,t._key,i,new sc(i!==null&&i.hasLocalMutations,!0),t.converter)))}function WSe(t){t=Tt(t,Ht);const e=Tt(t.firestore,Rn);return YH(Fr(e),t._key,{source:"server"}).then((n=>gN(e,t,n)))}function YSe(t){t=Tt(t,Qr);const e=Tt(t.firestore,Rn),n=Fr(e),r=new $c(e);return h7(t._query),JH(n,t._query).then((i=>new Cs(e,r,t,i)))}function JSe(t){t=Tt(t,Qr);const e=Tt(t.firestore,Rn),n=Fr(e),r=new $c(e);return pSe(n,t._query).then((i=>new Cs(e,r,t,i)))}function QSe(t){t=Tt(t,Qr);const e=Tt(t.firestore,Rn),n=Fr(e),r=new $c(e);return JH(n,t._query,{source:"server"}).then((i=>new Cs(e,r,t,i)))}function x5(t,e,n){t=Tt(t,Ht);const r=Tt(t.firestore,Rn),i=h_(t.converter,e,n);return hy(r,[a_(qc(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,on.none())])}function b5(t,e,n,...r){t=Tt(t,Ht);const i=Tt(t.firestore,Rn),s=qc(i);let o;return o=typeof(e=Ke(e))=="string"||e instanceof Bl?uN(s,"updateDoc",t._key,e,n,r):lN(s,"updateDoc",t._key,e),hy(i,[o.toMutation(t._key,on.exists(!0))])}function XSe(t){return hy(Tt(t.firestore,Rn),[new Ih(t._key,on.none())])}function ZSe(t,e){const n=Tt(t.firestore,Rn),r=Gx(t),i=h_(t.converter,e);return hy(n,[a_(qc(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,on.exists(!1))]).then((()=>r))}function x7(t,...e){var u,d,f;t=Ke(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Q1(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Q1(e[r])){const m=e[r];e[r]=(u=m.next)==null?void 0:u.bind(m),e[r+1]=(d=m.error)==null?void 0:d.bind(m),e[r+2]=(f=m.complete)==null?void 0:f.bind(m)}let s,o,l;if(t instanceof Ht)o=Tt(t.firestore,Rn),l=Ah(t._key.path),s={next:m=>{e[r]&&e[r](gN(o,t,m))},error:e[r+1],complete:e[r+2]};else{const m=Tt(t,Qr);o=Tt(m.firestore,Rn),l=m._query;const v=new $c(o);s={next:_=>{e[r]&&e[r](new Cs(o,v,m,_))},error:e[r+1],complete:e[r+2]},h7(t._query)}return(function(v,_,T,S){const A=new i_(S),I=new YP(_,A,T);return v.asyncQueue.enqueueAndForget((async()=>HP(await rh(v),I))),()=>{A.Nu(),v.asyncQueue.enqueueAndForget((async()=>KP(await rh(v),I)))}})(Fr(o),l,i,s)}function eAe(t,e){return gSe(Fr(t=Tt(t,Rn)),Q1(e)?e:{next:e})}function hy(t,e){return(function(r,i){const s=new Sr;return r.asyncQueue.enqueueAndForget((async()=>zEe(await rN(r),i,s))),s.promise})(Fr(t),e)}function gN(t,e,n){const r=n.docs.get(e._key),i=new $c(t);return new ss(t,i,e._key,r,new sc(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tAe={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nAe=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=qc(e)}set(e,n,r){this._verifyNotCommitted();const i=vl(e,this._firestore),s=h_(i.converter,n,r),o=a_(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,on.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=vl(e,this._firestore);let o;return o=typeof(n=Ke(n))=="string"||n instanceof Bl?uN(this._dataReader,"WriteBatch.update",s._key,n,r,i):lN(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,on.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=vl(e,this._firestore);return this._mutations=this._mutations.concat(new Ih(n._key,on.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ge(ie.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function vl(t,e){if((t=Ke(t)).firestore!==e)throw new ge(ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rAe{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=qc(e)}get(e){const n=vl(e,this._firestore),r=new $Se(this._firestore);return this._transaction.lookup([n._key]).then((i=>{if(!i||i.length!==1)return Ne(24041);const s=i[0];if(s.isFoundDocument())return new Ag(this._firestore,r,s.key,s,n.converter);if(s.isNoDocument())return new Ag(this._firestore,r,n._key,null,n.converter);throw Ne(18433,{doc:s})}))}set(e,n,r){const i=vl(e,this._firestore),s=h_(i.converter,n,r),o=a_(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,o),this}update(e,n,r,...i){const s=vl(e,this._firestore);let o;return o=typeof(n=Ke(n))=="string"||n instanceof Bl?uN(this._dataReader,"Transaction.update",s._key,n,r,i):lN(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,o),this}delete(e){const n=vl(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iAe=class extends rAe{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=vl(e,this._firestore),r=new $c(this._firestore);return super.get(e).then((i=>new ss(this._firestore,r,n._key,i._document,new sc(!1,!1),n.converter)))}};function sAe(t,e,n){t=Tt(t,Rn);const r={...tAe,...n};return(function(s){if(s.maxAttempts<1)throw new ge(ie.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(s,o,l){const u=new Sr;return s.asyncQueue.enqueueAndForget((async()=>{const d=await dSe(s);new uSe(s.asyncQueue,d,l,o,u).ju()})),u.promise})(Fr(t),(i=>e(new iAe(t,i))),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oAe(){return new dy("deleteField")}function aAe(){return new iN("serverTimestamp")}function lAe(...t){return new sN("arrayUnion",t)}function uAe(...t){return new oN("arrayRemove",t)}function cAe(t){return new aN("increment",t)}(function(e,n=!0){(function(i){Sh=i})(ql),Rl(new ho("firestore",((r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new Rn(new rwe(r.getProvider("auth-internal")),new owe(o,r.getProvider("app-check-internal")),(function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ge(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ol(d.options.projectId,f)})(o,i),o);return s={useFetchStreams:n,...s},l._setSettings(s),l}),"PUBLIC").setMultipleInstances(!0)),Ss(J3,Q3,e),Ss(J3,Q3,"esm2020")})();const dAe="@firebase/firestore-compat",fAe="0.4.0";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new ge("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _5(){if(typeof Uint8Array>"u")throw new ge("unimplemented","Uint8Arrays are not available in this environment.")}function w5(){if(!Bwe())throw new ge("unimplemented","Blobs are unavailable in Firestore in this environment.")}let b7=class Z1{constructor(e){this._delegate=e}static fromBase64String(e){return w5(),new Z1(Or.fromBase64String(e))}static fromUint8Array(e){return _5(),new Z1(Or.fromUint8Array(e))}toBase64(){return w5(),this._delegate.toBase64()}toUint8Array(){return _5(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eC(t){return hAe(t,["next","error","complete"])}function hAe(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mAe{enableIndexedDbPersistence(e,n){return TSe(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return ESe(e._delegate)}clearIndexedDbPersistence(e){return SSe(e._delegate)}}class _7{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ol||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&yo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...n,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){xSe(this._delegate,e,n,r)}enableNetwork(){return CSe(this._delegate)}disableNetwork(){return ISe(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,GG("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return ASe(this._delegate)}onSnapshotsInSync(e){return eAe(this._delegate,e)}get app(){if(!this._appCompat)throw new ge("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ih(this,t7(this._delegate,e))}catch(n){throw Gr(n,"collection()","Firestore.collection()")}}doc(e){try{return new rs(this,Gx(this._delegate,e))}catch(n){throw Gr(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new $r(this,bSe(this._delegate,e))}catch(n){throw Gr(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return sAe(this._delegate,n=>e(new w7(this,n)))}batch(){return Fr(this._delegate),new T7(new nAe(this._delegate,e=>hy(this._delegate,e)))}loadBundle(e){return RSe(this._delegate,e)}namedQuery(e){return PSe(this._delegate,e).then(n=>n?new $r(this,n):null)}}class m_ extends pN{constructor(e){super(),this.firestore=e}convertBytes(e){return new b7(new Or(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return rs.forKey(n,this.firestore,null)}}function pAe(t){Z_e(t)}class w7{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new m_(e)}get(e){const n=oc(e);return this._delegate.get(n).then(r=>new Cg(this._firestore,new ss(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=oc(e);return r?(yN("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=oc(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=oc(e);return this._delegate.delete(n),this}}class T7{constructor(e){this._delegate=e}set(e,n,r){const i=oc(e);return r?(yN("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=oc(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=oc(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class kc{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Bp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ig(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=kc.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new kc(e,new m_(e),n),i.set(n,s)),s}}kc.INSTANCES=new WeakMap;class rs{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new m_(e)}static forPath(e,n,r){if(e.length%2!==0)throw new ge("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new rs(n,new Ht(n._delegate,r,new Ce(e)))}static forKey(e,n,r){return new rs(n,new Ht(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ih(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ih(this.firestore,t7(this._delegate,e))}catch(n){throw Gr(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ke(e),e instanceof Ht?n7(this._delegate,e):!1}set(e,n){n=yN("DocumentReference.set",n);try{return n?x5(this._delegate,e,n):x5(this._delegate,e)}catch(r){throw Gr(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?b5(this._delegate,e):b5(this._delegate,e,n,...r)}catch(i){throw Gr(i,"updateDoc()","DocumentReference.update()")}}delete(){return XSe(this._delegate)}onSnapshot(...e){const n=E7(e),r=S7(e,i=>new Cg(this.firestore,new ss(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return x7(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=KSe(this._delegate):(e==null?void 0:e.source)==="server"?n=WSe(this._delegate):n=HSe(this._delegate),n.then(r=>new Cg(this.firestore,new ss(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new rs(this.firestore,e?this._delegate.withConverter(kc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Gr(t,e,n){return t.message=t.message.replace(e,n),t}function E7(t){for(const e of t)if(typeof e=="object"&&!eC(e))return e;return{}}function S7(t,e){var r,i;let n;return eC(t[0])?n=t[0]:eC(t[1])?n=t[1]:typeof t[0]=="function"?n={next:t[0],error:t[1],complete:t[2]}:n={next:t[1],error:t[2],complete:t[3]},{next:s=>{n.next&&n.next(e(s))},error:(r=n.error)==null?void 0:r.bind(n),complete:(i=n.complete)==null?void 0:i.bind(n)}}class Cg{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new rs(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return v7(this._delegate,e._delegate)}}class Ig extends Cg{data(e){const n=this._delegate.data(e);return this._delegate._converter||ewe(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}}class $r{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new m_(e)}where(e,n,r){try{return new $r(this.firestore,ul(this._delegate,VSe(e,n,r)))}catch(i){throw Gr(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new $r(this.firestore,ul(this._delegate,LSe(e,n)))}catch(r){throw Gr(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new $r(this.firestore,ul(this._delegate,USe(e)))}catch(n){throw Gr(n,"limit()","Query.limit()")}}limitToLast(e){try{return new $r(this.firestore,ul(this._delegate,FSe(e)))}catch(n){throw Gr(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new $r(this.firestore,ul(this._delegate,jSe(...e)))}catch(n){throw Gr(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new $r(this.firestore,ul(this._delegate,BSe(...e)))}catch(n){throw Gr(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new $r(this.firestore,ul(this._delegate,qSe(...e)))}catch(n){throw Gr(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new $r(this.firestore,ul(this._delegate,zSe(...e)))}catch(n){throw Gr(n,"endAt()","Query.endAt()")}}isEqual(e){return r7(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=JSe(this._delegate):(e==null?void 0:e.source)==="server"?n=QSe(this._delegate):n=YSe(this._delegate),n.then(r=>new tC(this.firestore,new Cs(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=E7(e),r=S7(e,i=>new tC(this.firestore,new Cs(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return x7(this._delegate,n,r)}withConverter(e){return new $r(this.firestore,e?this._delegate.withConverter(kc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class gAe{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Ig(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class tC{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new $r(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Ig(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new gAe(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Ig(this._firestore,r))})}isEqual(e){return v7(this._delegate,e._delegate)}}class ih extends $r{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new rs(this.firestore,e):null}doc(e){try{return e===void 0?new rs(this.firestore,Gx(this._delegate)):new rs(this.firestore,Gx(this._delegate,e))}catch(n){throw Gr(n,"doc()","CollectionReference.doc()")}}add(e){return ZSe(this._delegate,e).then(n=>new rs(this.firestore,n))}isEqual(e){return n7(this._delegate,e._delegate)}withConverter(e){return new ih(this.firestore,e?this._delegate.withConverter(kc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function oc(t){return Tt(t,Ht)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(...e){this._delegate=new Bl(...e)}static documentId(){return new vN(sn.keyField().canonicalString())}isEqual(e){return e=Ke(e),e instanceof Bl?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{static serverTimestamp(){const e=aAe();return e._methodName="FieldValue.serverTimestamp",new Yu(e)}static delete(){const e=oAe();return e._methodName="FieldValue.delete",new Yu(e)}static arrayUnion(...e){const n=lAe(...e);return n._methodName="FieldValue.arrayUnion",new Yu(n)}static arrayRemove(...e){const n=uAe(...e);return n._methodName="FieldValue.arrayRemove",new Yu(n)}static increment(e){const n=cAe(e);return n._methodName="FieldValue.increment",new Yu(n)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yAe={Firestore:_7,GeoPoint:As,Timestamp:Nt,Blob:b7,Transaction:w7,WriteBatch:T7,DocumentReference:rs,DocumentSnapshot:Cg,Query:$r,QueryDocumentSnapshot:Ig,QuerySnapshot:tC,CollectionReference:ih,FieldPath:vN,FieldValue:Yu,setLogLevel:pAe,CACHE_SIZE_UNLIMITED:wSe};function vAe(t,e){t.INTERNAL.registerComponent(new ho("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps({...yAe}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xAe(t){vAe(t,(e,n)=>new _7(e,n,new mAe)),t.registerVersion(dAe,fAe)}xAe(wt);const A7={apiKey:"AIzaSyCrM4asB5oZreqLf2zodwABKGwNeqiEAP4",authDomain:"growwithme-18ce2.firebaseapp.com",projectId:"growwithme-18ce2",storageBucket:"growwithme-18ce2.appspot.com",messagingSenderId:"889105420419",appId:"1:889105420419:web:3fa56d6876340029ee8bb6",measurementId:"G-N5NR1H01Z0"};wt.apps.length||wt.initializeApp(A7);const cl=wt.auth(),Ie=wt.firestore(),bAe=new wt.auth.GoogleAuthProvider;bAe.setCustomParameters({prompt:"select_account",client_id:"889105420419-n9vdkh7ogbqvmgu81k4tq4r1eb9voe1a.apps.googleusercontent.com"});const $e={getIdeasPaginated:async(t,e=20)=>{let n=Ie.collection("ideas").orderBy("status").limit(e);t&&(n=n.startAfter(t));const r=await n.get(),i=r.docs.map(l=>({id:l.id,...l.data()})),s=r.docs.length>0?r.docs[r.docs.length-1]:null,o=r.docs.length===e;return{ideas:i,lastDoc:s,hasMore:o}},getUserProfile:async t=>{const n=await Ie.collection("users").doc(t).get();return n.exists?{id:n.id,...n.data()}:null},createUserProfile:async(t,e)=>{await Ie.collection("users").doc(t).set(e)},getUsers:async t=>{const n=await Ie.collection("users").get(),r=[];return n.forEach(i=>{r.push({id:i.id,...i.data()})}),t?r.filter(i=>i.id!==t):r},getChats:async t=>{const n=await Ie.collection("chats").where("participants","array-contains",t).get(),r=[];for(const i of n.docs){const s=i.data(),o=s.participants.find(l=>l!==t);if(o){const l=await $e.getUserProfile(o);l&&r.push({id:i.id,...s,participantDetails:[l]})}}return r},getChatsRealtime:(t,e)=>Ie.collection("chats").where("participants","array-contains",t).onSnapshot(async r=>{const i=[];for(const s of r.docs){const o=s.data(),l=o.participants.find(u=>u!==t);if(l){const u=await $e.getUserProfile(l);u&&i.push({id:s.id,...o,participantDetails:[u]})}}e(i)}),markChatAsRead:async(t,e)=>{try{await Ie.collection("chats").doc(t).update({[`unreadCounts.${e}`]:0})}catch(n){console.error("Failed to mark chat as read:",n)}},getChatId:(t,e)=>[t,e].sort().join("_"),postIdea:async t=>{const e={...t,likes:[],comments:[]};await Ie.collection("ideas").add(e)},getIdeas:async()=>(await Ie.collection("ideas").orderBy("status").limit(20).get()).docs.map(n=>({id:n.id,...n.data()})),getIdeasByFounder:async t=>(await Ie.collection("ideas").where("founderId","==",t).get()).docs.map(r=>({id:r.id,...r.data()})),joinIdea:async(t,e)=>{await Ie.collection("ideas").doc(t).update({team:wt.firestore.FieldValue.arrayUnion(e)})},createJoinRequest:async(t,e)=>{const n={ideaId:t.id,ideaTitle:t.title,developerId:e.id,developerName:e.name,developerAvatar:e.avatarUrl,founderId:t.founderId,status:"pending",timestamp:new Date};await Ie.collection("joinRequests").add(n)},getJoinRequestsForFounder:(t,e)=>Ie.collection("joinRequests").where("founderId","==",t).where("status","==","pending").onSnapshot(i=>{const s=i.docs.map(o=>({id:o.id,...o.data()}));e(s)}),getJoinRequestsForDeveloper:(t,e)=>Ie.collection("joinRequests").where("developerId","==",t).onSnapshot(i=>{const s=i.docs.map(o=>({id:o.id,...o.data()}));e(s)}),updateJoinRequest:async(t,e)=>{const n=Ie.collection("joinRequests").doc(t);if(await n.update({status:e}),e==="approved"){const i=(await n.get()).data();await $e.joinIdea(i.ideaId,i.developerId)}},removeTeamMember:async(t,e)=>{const n=Ie.collection("ideas").doc(t),s=await Ie.collection("joinRequests").where("ideaId","==",t).where("developerId","==",e).where("status","==","approved").get(),o=Ie.batch();o.update(n,{team:wt.firestore.FieldValue.arrayRemove(e)}),s.forEach(l=>{o.update(l.ref,{status:"rejected"})}),await o.commit()},createConnectionRequest:async(t,e)=>{const n=[t.id,e].sort().join("_"),r=Ie.collection("connectionRequests").doc(n),i=await r.get();if(i.exists){const l=i.data();if(l&&l.status==="pending")throw new Error("Connection request already exists.")}const s={fromUserId:t.id,fromUserName:t.name,fromUserAvatar:t.avatarUrl,fromUserRole:t.role,toUserId:e,status:"pending",timestamp:new Date};await r.set(s),await Ie.collection("users").doc(t.id).update({pendingConnections:wt.firestore.FieldValue.arrayUnion(e)})},getPendingConnectionRequests:(t,e)=>Ie.collection("connectionRequests").where("toUserId","==",t).where("status","==","pending").onSnapshot(i=>{const s=i.docs.map(o=>({id:o.id,...o.data()}));e(s)}),updateConnectionRequest:async(t,e)=>{const n=Ie.collection("connectionRequests").doc(t);if(await n.update({status:e}),e==="approved"){const o=(await n.get()).data();o&&await $e.addConnection(o.fromUserId,o.toUserId)}const i=(await n.get()).data();i&&await Ie.collection("users").doc(i.fromUserId).update({pendingConnections:wt.firestore.FieldValue.arrayRemove(i.toUserId)})},addConnection:async(t,e)=>{const n=Ie.collection("users").doc(t),r=Ie.collection("users").doc(e),i=Ie.batch();i.update(n,{connections:wt.firestore.FieldValue.arrayUnion(e)}),i.update(r,{connections:wt.firestore.FieldValue.arrayUnion(t)}),await i.commit()},getSentConnectionRequests:(t,e)=>Ie.collection("connectionRequests").where("fromUserId","==",t).onSnapshot(i=>{const s=i.docs.map(o=>({id:o.id,...o.data()}));e(s)}),withdrawConnectionRequest:async t=>{const e=Ie.collection("connectionRequests").doc(t),r=(await e.get()).data();r&&await Ie.collection("users").doc(r.fromUserId).update({pendingConnections:wt.firestore.FieldValue.arrayRemove(r.toUserId)}),await e.delete()},getConnections:async t=>t.length===0?[]:(await Ie.collection("users").where(wt.firestore.FieldPath.documentId(),"in",t).get()).docs.map(r=>({id:r.id,...r.data()})),removeConnection:async(t,e)=>{const n=Ie.collection("users").doc(t),r=Ie.collection("users").doc(e),i=[t,e].sort().join("_"),s=Ie.collection("connectionRequests").doc(i),o=Ie.batch();o.update(n,{connections:wt.firestore.FieldValue.arrayRemove(e)}),o.update(r,{connections:wt.firestore.FieldValue.arrayRemove(t)}),o.delete(s),await o.commit()},toggleLikeIdea:async(t,e)=>{const n=Ie.collection("ideas").doc(t),r=await n.get();r.exists&&((r.data().likes||[]).includes(e)?await n.update({likes:wt.firestore.FieldValue.arrayRemove(e)}):await n.update({likes:wt.firestore.FieldValue.arrayUnion(e)}))},addCommentToIdea:async(t,e)=>{const n={...e,id:Ie.collection("ideas").doc().id};await Ie.collection("ideas").doc(t).update({comments:wt.firestore.FieldValue.arrayUnion(n)})},deleteCommentFromIdea:async(t,e)=>{await Ie.collection("ideas").doc(t).update({comments:wt.firestore.FieldValue.arrayRemove(e)})},updateIdea:async(t,e)=>{await Ie.collection("ideas").doc(t).update(e)},createNegotiationRequest:async(t,e)=>{const n=`${t.id}_${e.id}`,r=Ie.collection("negotiations").doc(n);if((await r.get()).exists)throw new Error("A negotiation for this idea with this investor already exists.");const s={ideaId:t.id,ideaTitle:t.title,investorId:e.id,investorName:e.name,investorAvatar:e.avatarUrl,founderId:t.founderId,status:"pending",timestamp:new Date,offers:[]};return await r.set(s),n},getNegotiationsForFounder:(t,e)=>Ie.collection("negotiations").where("founderId","==",t).onSnapshot(i=>{const s=i.docs.map(o=>{const l=o.data();return{id:o.id,...l,timestamp:l.timestamp.toDate?l.timestamp.toDate():l.timestamp,offers:l.offers?l.offers.map(u=>({...u,timestamp:u.timestamp.toDate?u.timestamp.toDate():u.timestamp})):[]}});e(s)}),getNegotiationsForInvestor:(t,e)=>Ie.collection("negotiations").where("investorId","==",t).onSnapshot(i=>{const s=i.docs.map(o=>{const l=o.data();return{id:o.id,...l,timestamp:l.timestamp.toDate?l.timestamp.toDate():l.timestamp,offers:l.offers?l.offers.map(u=>({...u,timestamp:u.timestamp.toDate?u.timestamp.toDate():u.timestamp})):[]}});e(s)}),updateNegotiationStatus:async(t,e,n,r)=>{const i=Ie.collection("negotiations").doc(t),s={status:e};e==="accepted"&&typeof n=="number"&&typeof r=="number"&&(s.finalInvestment=n,s.finalEquity=r),await i.update(s)},getTotalInvestedAmountForIdeas:async t=>{const e=await Ie.collection("negotiations").where("founderId","==",t).where("status","==","accepted").get();let n=0;return e.docs.forEach(r=>{const i=r.data();typeof i.finalInvestment=="number"&&(n+=i.finalInvestment)}),n},addOfferToNegotiation:async(t,e)=>{await Ie.collection("negotiations").doc(t).update({offers:wt.firestore.FieldValue.arrayUnion(e),status:"active"})},getAcceptedInvestorCountForIdeas:async()=>{const t=await Ie.collection("negotiations").where("status","==","accepted").get(),e={};return t.docs.forEach(n=>{const r=n.data();r.ideaId&&(e[r.ideaId]=(e[r.ideaId]||0)+1)}),e},getFounderIdeaEngagementAnalytics:async t=>{const e=await $e.getIdeasByFounder(t);let n=0,r=0;return e.forEach(i=>{n+=i.likes?i.likes.length:0,r+=i.comments?i.comments.length:0}),{totalLikes:n,totalComments:r}},getConnectionStatus:async(t,e)=>{const i=(await Ie.collection("users").doc(t).get()).data();if(i&&i.connections&&i.connections.includes(e))return{isConnected:!0,isPending:!1};const s=[t,e].sort().join("_"),l=await Ie.collection("connectionRequests").doc(s).get();if(l.exists){const u=l.data();if(u&&u.status==="pending"&&u.fromUserId===t)return{isConnected:!1,isPending:!0}}return{isConnected:!1,isPending:!1}},getConnectionStatusRealtime:(t,e,n)=>{const r=[],s=Ie.collection("users").doc(t).onSnapshot(m=>{var S;console.log(`FirestoreService: Current user ${t} connections changed:`,(S=m.data())==null?void 0:S.connections);const v=m.data();if(v&&v.connections&&v.connections.includes(e)){console.log("FirestoreService: Users are now connected"),n({isConnected:!0,isPending:!1});return}const _=[t,e].sort().join("_");Ie.collection("connectionRequests").doc(_).get().then(A=>{if(A.exists){const I=A.data();I&&I.status==="pending"&&I.fromUserId===t?(console.log("FirestoreService: Request is pending"),n({isConnected:!1,isPending:!0})):(console.log("FirestoreService: Request is not pending"),n({isConnected:!1,isPending:!1}))}else console.log("FirestoreService: No request exists"),n({isConnected:!1,isPending:!1})})}),o=[t,e].sort().join("_"),u=Ie.collection("connectionRequests").doc(o).onSnapshot(m=>{if(console.log(`FirestoreService: Connection request ${o} changed:`,m.data()),m.exists){const v=m.data();v&&v.status==="pending"&&v.fromUserId===t?(console.log("FirestoreService: Request is pending from current user"),n({isConnected:!1,isPending:!0})):v&&v.status==="approved"?(console.log("FirestoreService: Request was approved"),n({isConnected:!0,isPending:!1})):(console.log("FirestoreService: Request has other status:",v==null?void 0:v.status),n({isConnected:!1,isPending:!1}))}else console.log("FirestoreService: Request document deleted"),n({isConnected:!1,isPending:!1})}),f=Ie.collection("users").doc(e).onSnapshot(m=>{var _;console.log(`FirestoreService: Other user ${e} connections changed:`,(_=m.data())==null?void 0:_.connections);const v=m.data();v&&v.connections&&v.connections.includes(t)&&(console.log("FirestoreService: Other user now has current user in connections"),n({isConnected:!0,isPending:!1}))});return r.push(s,u,f),()=>{r.forEach(m=>m())}}},xN=({user:t,onClose:e,isOwnProfile:n,onMessage:r,onConnect:i,onViewConnections:s,isConnected:o,isPending:l,onStartNegotiation:u,currentUserId:d})=>{var _;const[f,m]=P.useState({isConnected:o||!1,isPending:l||!1});P.useEffect(()=>{m({isConnected:o||!1,isPending:l||!1})},[o,l]);const v=((_=t.connections)==null?void 0:_.length)||0;return P.useEffect(()=>{if(d&&i)return console.log(`ProfileCard: Setting up real-time listener for ${t.name} (${t.id})`),$e.getConnectionStatusRealtime(d,t.id,S=>{console.log(`ProfileCard: Real-time status update for ${t.name}:`,S),m(S)})},[t.id,d,i]),x.jsx(Dl,{children:x.jsx(nt.div,{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex justify-center items-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:x.jsxs(nt.div,{className:"bg-gradient-to-br from-slate-900/95 to-black/95 backdrop-blur-xl border border-slate-700/50 rounded-3xl max-w-2xl w-full mx-auto p-6 sm:p-8 relative shadow-2xl shadow-black/50",initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{duration:.3,ease:"easeOut"},children:[x.jsx("button",{onClick:e,"aria-label":"Close profile",className:"absolute top-4 right-4 p-2 rounded-full bg-slate-800/50 hover:bg-slate-700/50 text-slate-400 hover:text-white transition-all duration-200 hover:scale-110",children:x.jsx(ha,{className:"w-5 h-5"})}),x.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start text-center sm:text-left gap-6",children:[x.jsxs("div",{className:"relative",children:[x.jsx("img",{src:t.avatarUrl,alt:t.name,className:"w-28 h-28 sm:w-32 sm:h-32 rounded-full border-4 border-slate-600 shadow-2xl"}),x.jsx("div",{className:"absolute -bottom-1 -right-1 w-8 h-8 bg-gradient-to-r from-emerald-500 to-emerald-600 rounded-full border-2 border-slate-900 flex items-center justify-center",children:x.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})})]}),x.jsxs("div",{className:"flex-1",children:[x.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-2",children:t.name}),x.jsx("span",{className:bt("inline-block text-lg font-medium px-4 py-2 rounded-full mb-3",t.role==="Developer"?"bg-blue-900/30 text-blue-300 border border-blue-700/30":t.role==="Founder"?"bg-purple-900/30 text-purple-300 border border-purple-700/30":"bg-emerald-900/30 text-emerald-300 border border-emerald-700/30"),children:t.role}),x.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-4 text-slate-400",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(dne,{className:"w-4 h-4 text-slate-500"}),x.jsx("span",{className:"text-sm",children:t.location})]}),n?x.jsxs("button",{onClick:()=>s&&s(t.connections||[]),className:"flex items-center gap-2 cursor-pointer hover:text-white transition-colors text-sm",disabled:v===0,children:[x.jsx(zk,{className:"w-4 h-4 text-slate-500"}),x.jsxs("span",{children:[v," ",v===1?"Connection":"Connections"]})]}):x.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[x.jsx(zk,{className:"w-4 h-4 text-slate-500"}),x.jsxs("span",{children:[v," ",v===1?"Connection":"Connections"]})]})]})]})]}),x.jsxs("div",{className:"mt-8 space-y-6",children:[x.jsxs("div",{className:"space-y-3",children:[x.jsxs("h3",{className:"font-semibold text-lg text-white flex items-center gap-2",children:[x.jsx($C,{className:"w-5 h-5 text-emerald-400"}),"Skills"]}),x.jsx("div",{className:"flex flex-wrap gap-2",children:t.skills.map(T=>x.jsx("span",{className:"bg-slate-800/50 text-slate-300 px-3 py-1.5 rounded-full text-sm border border-slate-700/50 hover:border-slate-600/50 transition-colors",children:T},T))})]}),x.jsxs("div",{className:"space-y-3",children:[x.jsxs("h3",{className:"font-semibold text-lg text-white flex items-center gap-2",children:[x.jsx(fne,{className:"w-5 h-5 text-purple-400"}),"Interests"]}),x.jsx("div",{className:"flex flex-wrap gap-2",children:t.interests.map(T=>x.jsx("span",{className:"bg-slate-800/50 text-slate-300 px-3 py-1.5 rounded-full text-sm border border-slate-700/50 hover:border-slate-600/50 transition-colors",children:T},T))})]}),x.jsxs("div",{className:"space-y-3",children:[x.jsxs("h3",{className:"font-semibold text-lg text-white flex items-center gap-2",children:[x.jsx(hne,{className:"w-5 h-5 text-amber-400"}),"Looking For"]}),x.jsx("p",{className:"text-slate-400 text-sm leading-relaxed",children:t.lookingFor})]})]}),!n&&x.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-700/30 flex flex-col sm:flex-row justify-center gap-3",children:[f.isConnected?x.jsxs("button",{disabled:!0,className:"flex items-center justify-center gap-2 bg-emerald-600/20 text-emerald-300 border border-emerald-600/30 font-medium py-3 px-6 rounded-xl w-full sm:w-auto cursor-not-allowed",children:[x.jsx(_l,{className:"w-5 h-5"}),"Connected"]}):f.isPending?x.jsxs("button",{disabled:!0,className:"flex items-center justify-center gap-2 bg-amber-600/20 text-amber-300 border border-amber-600/30 font-medium py-3 px-6 rounded-xl w-full sm:w-auto cursor-not-allowed",children:[x.jsx(_l,{className:"w-5 h-5"}),"Pending"]}):x.jsxs("button",{onClick:async()=>{i&&(i(t),m({isConnected:!1,isPending:!0}))},className:"flex items-center justify-center gap-2 bg-gradient-to-r from-slate-600 to-slate-500 hover:from-slate-500 hover:to-slate-400 text-white font-medium py-3 px-6 rounded-xl w-full sm:w-auto transition-all duration-200 hover:shadow-lg hover:shadow-slate-500/25 transform hover:scale-105",children:[x.jsx(_l,{className:"w-5 h-5"}),"Connect"]}),x.jsxs("button",{onClick:()=>r&&r(t),className:"flex items-center justify-center gap-2 bg-slate-800/50 hover:bg-slate-700/50 text-white font-medium py-3 px-6 rounded-xl w-full sm:w-auto transition-all duration-200 hover:shadow-lg hover:shadow-slate-500/25 transform hover:scale-105",children:[x.jsx(yf,{className:"w-5 h-5"}),"Message"]})]})]})})})},_Ae=({user:t,onClose:e})=>{const[n,r]=P.useState(0),[i,s]=P.useState(""),[o,l]=P.useState(!1),u=d=>{d.preventDefault(),console.log({ratedUser:t.name,rating:n,feedback:i}),l(!0),setTimeout(()=>{e()},1500)};return x.jsx(Dl,{children:x.jsx(nt.div,{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex justify-center items-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:x.jsxs(nt.div,{className:"bg-gradient-to-br from-slate-900/95 to-black/95 backdrop-blur-xl border border-slate-700/50 rounded-3xl max-w-md w-full mx-auto p-6 sm:p-8 relative shadow-2xl shadow-black/50",initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{duration:.3,ease:"easeOut"},children:[x.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 rounded-full bg-slate-800/50 hover:bg-slate-700/50 text-slate-400 hover:text-white transition-all duration-200 hover:scale-110",children:x.jsx(ha,{className:"w-5 h-5"})}),x.jsx(Dl,{mode:"wait",children:o?x.jsxs(nt.div,{className:"text-center",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},children:[x.jsx(nt.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.1,duration:.3,type:"spring",stiffness:200},className:"w-16 h-16 bg-emerald-500/20 rounded-full mx-auto mb-4 flex items-center justify-center",children:x.jsx("div",{className:"w-8 h-8 bg-emerald-500 rounded-full flex items-center justify-center",children:x.jsx("div",{className:"w-4 h-4 bg-white rounded-full"})})}),x.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Thank You!"}),x.jsx("p",{className:"text-slate-300 text-sm",children:"Your feedback helps improve our matching algorithm."})]},"submitted"):x.jsxs(nt.form,{onSubmit:u,className:"space-y-6",initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:[x.jsxs("h2",{className:"text-2xl font-bold text-center text-white",children:["Feedback for ",t.name]}),x.jsxs("div",{className:"space-y-3",children:[x.jsx("label",{className:"block text-sm font-medium text-slate-300 text-center",children:"How would you rate this match?"}),x.jsx("div",{className:"flex justify-center gap-2",children:[1,2,3,4,5].map(d=>x.jsx(nt.button,{type:"button",className:`p-2 rounded-lg transition-all duration-200 ${n>=d?"text-amber-400 bg-amber-500/10":"text-slate-600 hover:text-slate-400"}`,onClick:()=>r(d),whileHover:{scale:1.1},whileTap:{scale:.9},children:x.jsx(aA,{className:"w-8 h-8"})},d))})]}),x.jsxs("div",{className:"space-y-3",children:[x.jsx("label",{htmlFor:"feedback",className:"block text-sm font-medium text-slate-300",children:"Additional comments (optional)"}),x.jsx("textarea",{id:"feedback",name:"feedback",rows:4,value:i,onChange:d=>s(d.target.value),className:"w-full bg-slate-800/50 border border-slate-700/50 rounded-xl p-3 text-white placeholder-slate-500 focus:ring-2 focus:ring-emerald-500/50 focus:border-emerald-500/50 transition-all backdrop-blur-sm resize-none",placeholder:"What did you think about this match suggestion?"})]}),x.jsx(nt.button,{type:"submit",disabled:n===0,className:"w-full bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-400 hover:to-emerald-500 text-white font-medium py-3 rounded-xl transition-all duration-200 disabled:from-slate-600 disabled:to-slate-700 disabled:cursor-not-allowed disabled:opacity-50 transform hover:scale-105 hover:shadow-lg hover:shadow-emerald-500/25",whileHover:{scale:n>0?1.02:1},whileTap:{scale:.98},children:"Submit Feedback"})]},"form")})]})})})},wAe=({connectionIds:t,onClose:e,onSelectUser:n})=>{const[r,i]=P.useState([]),[s,o]=P.useState(!0);return P.useEffect(()=>{const l=async()=>{o(!0);try{const u=await $e.getConnections(t);i(u)}catch(u){console.error("Failed to fetch connections:",u)}finally{o(!1)}};t.length>0?l():(i([]),o(!1))},[t]),x.jsx(Dl,{children:x.jsx(nt.div,{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex justify-center items-center z-50 p-4",onClick:e,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:x.jsxs(nt.div,{className:"bg-gradient-to-br from-slate-900/95 to-black/95 backdrop-blur-xl border border-slate-700/50 rounded-3xl shadow-2xl shadow-black/50 p-6 w-full max-w-md relative",onClick:l=>l.stopPropagation(),initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{duration:.3,ease:"easeOut"},children:[x.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 rounded-full bg-slate-800/50 hover:bg-slate-700/50 text-slate-400 hover:text-white transition-all duration-200 hover:scale-110",children:x.jsx(ha,{className:"w-5 h-5"})}),x.jsx("h2",{className:"text-2xl font-bold text-white mb-6 text-center",children:"Your Connections"}),x.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto pr-2",children:s?x.jsxs(nt.div,{className:"text-center py-8",initial:{opacity:0},animate:{opacity:1},children:[x.jsx("div",{className:"w-8 h-8 border-2 border-slate-600 border-t-emerald-500 rounded-full animate-spin mx-auto mb-3"}),x.jsx("p",{className:"text-slate-400 text-sm",children:"Loading connections..."})]}):r.length>0?r.map((l,u)=>x.jsxs(nt.div,{className:"flex items-center bg-slate-800/50 hover:bg-slate-700/50 p-4 rounded-xl cursor-pointer transition-all duration-200 border border-slate-700/30 hover:border-slate-600/50 hover:shadow-lg hover:shadow-slate-500/10",onClick:()=>n(l),initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:u*.1,duration:.3},whileHover:{scale:1.02,y:-2},children:[x.jsx("img",{src:l.avatarUrl,alt:l.name,className:"w-12 h-12 rounded-full mr-4 border-2 border-slate-600 shadow-lg"}),x.jsxs("div",{className:"flex-1",children:[x.jsx("p",{className:"font-semibold text-white text-sm",children:l.name}),x.jsx("span",{className:`${l.role==="Developer"?"text-blue-400":l.role==="Founder"?"text-purple-400":"text-emerald-400"} text-xs font-medium`,children:l.role})]}),x.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full"})]},l.id)):x.jsxs(nt.div,{className:"text-center py-8",initial:{opacity:0},animate:{opacity:1},children:[x.jsx("div",{className:"w-16 h-16 bg-slate-800/50 rounded-full mx-auto mb-4 flex items-center justify-center",children:x.jsx("div",{className:"w-8 h-8 bg-slate-600 rounded-full"})}),x.jsx("h3",{className:"text-lg font-medium text-slate-300 mb-2",children:"No connections yet"}),x.jsx("p",{className:"text-sm text-slate-500",children:"Start connecting with people to build your network!"})]})}),x.jsx(nt.button,{onClick:e,className:"mt-6 w-full bg-gradient-to-r from-slate-600 to-slate-500 hover:from-slate-500 hover:to-slate-400 text-white font-medium py-3 px-4 rounded-xl transition-all duration-200 hover:shadow-lg hover:shadow-slate-500/25 transform hover:scale-105",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Close"})]})})})},TAe=({title:t,message:e,onClose:n,type:r="success"})=>{const i=r==="success"?zC:gne,s=r==="success"?"text-emerald-400":"text-red-400",o=r==="success"?"bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-400 hover:to-emerald-500":"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-400 hover:to-red-500";return x.jsx(Dl,{children:x.jsx(nt.div,{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex justify-center items-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:x.jsxs(nt.div,{className:"bg-gradient-to-br from-slate-900/95 to-black/95 backdrop-blur-xl border border-slate-700/50 rounded-3xl max-w-sm w-full mx-auto p-6 sm:p-8 relative shadow-2xl shadow-black/50 text-center",initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{duration:.3,ease:"easeOut"},children:[x.jsx("button",{onClick:n,"aria-label":"Close",className:"absolute top-4 right-4 p-2 rounded-full bg-slate-800/50 hover:bg-slate-700/50 text-slate-400 hover:text-white transition-all duration-200 hover:scale-110",children:x.jsx(ha,{className:"w-5 h-5"})}),x.jsx(nt.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.1,duration:.3,type:"spring",stiffness:200},children:x.jsx(i,{className:`w-16 h-16 mx-auto mb-6 ${s}`})}),x.jsx(nt.h2,{className:"text-2xl font-bold text-white mb-3",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2,duration:.3},children:t}),x.jsx(nt.p,{className:"text-slate-300 mb-8 text-sm leading-relaxed",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3,duration:.3},children:e}),x.jsx(nt.button,{onClick:n,className:`${o} text-white font-medium py-3 px-8 rounded-xl transition-all duration-200 hover:shadow-lg transform hover:scale-105 w-full`,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4,duration:.3},whileHover:{scale:1.05},whileTap:{scale:.95},children:"Close"})]})})})},EAe=()=>{const[t,e]=P.useState(!1);return P.useEffect(()=>{const n=()=>{e(window.innerWidth>=1024)};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),{enterDuration:t?.5:.2,exitDuration:t?.5:.15}},SAe=()=>x.jsx("div",{className:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-sm p-4 rounded-2xl animate-pulse border border-slate-700/50 w-full",children:x.jsxs("div",{className:"flex flex-col sm:flex-row items-start space-y-4 sm:space-y-0 sm:space-x-4",children:[x.jsx("div",{className:"w-20 h-20 rounded-full bg-slate-700 mx-auto sm:mx-0"}),x.jsxs("div",{className:"flex-1 space-y-3",children:[x.jsx("div",{className:"h-5 bg-slate-700 rounded-full w-3/4"}),x.jsx("div",{className:"h-4 bg-slate-700 rounded-full w-1/2"}),x.jsx("div",{className:"h-3 bg-slate-700 rounded-full w-2/3"}),x.jsxs("div",{className:"flex gap-2",children:[x.jsx("div",{className:"flex-1 h-10 bg-slate-700 rounded-lg"}),x.jsx("div",{className:"flex-1 h-10 bg-slate-700 rounded-lg"})]})]})]})}),AAe=({match:t,onMessage:e,onConnect:n,onFeedback:r,onViewProfile:i,isConnected:s,isPending:o,index:l,hoveredIndex:u,setHoveredIndex:d})=>{const f=t.user,m=t.compatibilityScore>80?"text-emerald-400":t.compatibilityScore>60?"text-amber-400":"text-orange-400",{enterDuration:v}=EAe();return x.jsxs("div",{className:"relative group block p-2 h-full w-full",onMouseEnter:()=>d(l),onMouseLeave:()=>d(null),children:[x.jsx(Dl,{mode:"wait",children:u===l&&x.jsx(nt.span,{className:"absolute inset-0 h-full w-full bg-slate-800/[0.8] block rounded-3xl",layoutId:"hoverBackground",initial:{opacity:0},animate:{opacity:1,transition:{duration:v,ease:"easeOut"}},exit:{opacity:0,transition:{duration:.05,ease:"linear"}},style:{willChange:"opacity, transform",transformOrigin:"center"},layout:!0})}),x.jsxs("div",{className:"relative z-20 bg-gradient-to-br from-slate-900/90 to-black/90 backdrop-blur-sm border border-slate-800/50 rounded-2xl p-4 sm:p-6 transition-all duration-300 hover:border-slate-600/70 hover:shadow-2xl hover:shadow-slate-500/10 h-full",onClick:()=>i(f),children:[x.jsxs("div",{className:"sm:hidden space-y-3",children:[x.jsxs("div",{className:"flex items-start justify-between",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("img",{src:f.avatarUrl,alt:f.name,className:"w-12 h-12 rounded-full border-2 border-slate-700 shadow-lg"}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-sm font-semibold text-white",children:f.name}),x.jsx("span",{className:bt("text-xs font-medium px-2 py-1 rounded-full",f.role===ht.Developer?"bg-blue-900/30 text-blue-300 border border-blue-700/30":f.role===ht.Founder?"bg-purple-900/30 text-purple-300 border border-purple-700/30":"bg-emerald-900/30 text-emerald-300 border border-emerald-700/30"),children:f.role})]})]}),x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsx("button",{onClick:_=>{_.stopPropagation(),r(f)},className:"p-1.5 rounded-lg bg-slate-800/50 hover:bg-slate-700/50 text-slate-300 hover:text-white transition-colors",children:x.jsx(aA,{className:"w-3.5 h-3.5"})}),x.jsx("button",{onClick:_=>{_.stopPropagation(),e(f)},className:"p-1.5 rounded-lg bg-slate-800/50 hover:bg-slate-700/50 text-white transition-colors",children:x.jsx(yf,{className:"w-3.5 h-3.5"})})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("div",{className:"flex-1 bg-slate-800/50 rounded-full h-2",children:x.jsx("div",{className:"bg-gradient-to-r from-slate-600 to-slate-500 h-2 rounded-full transition-all duration-500",style:{width:`${t.compatibilityScore}%`}})}),x.jsxs("span",{className:bt("text-xs font-bold",m),children:[t.compatibilityScore,"%"]})]}),s?x.jsxs("button",{disabled:!0,className:"w-full py-2 px-3 bg-emerald-600/20 text-emerald-300 border border-emerald-600/30 rounded-lg text-xs font-medium cursor-not-allowed",children:[x.jsx(tf,{className:"w-3.5 h-3.5 inline mr-1"})," Connected"]}):o?x.jsxs("button",{disabled:!0,className:"w-full py-2 px-3 bg-amber-600/20 text-amber-300 border border-amber-600/30 rounded-lg text-xs font-medium cursor-not-allowed",children:[x.jsx(tf,{className:"w-3.5 h-3.5 inline mr-1"})," Pending"]}):x.jsxs("button",{onClick:_=>{_.stopPropagation(),n(f)},className:"w-full py-2 px-3 bg-gradient-to-r from-slate-600 to-slate-500 hover:from-slate-500 hover:to-slate-400 text-white rounded-lg text-xs font-medium transition-all duration-200 hover:shadow-lg hover:shadow-slate-500/25",children:[x.jsx(_l,{className:"w-3.5 h-3.5 inline mr-1"})," Connect"]})]})]}),x.jsxs("div",{className:"hidden sm:block space-y-4",children:[x.jsxs("div",{className:"flex items-start space-x-4",children:[x.jsx("img",{src:f.avatarUrl,alt:f.name,className:"w-20 h-20 rounded-full border-2 border-slate-700 shadow-lg"}),x.jsxs("div",{className:"flex-1",children:[x.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[x.jsx("h3",{className:"text-xl font-bold text-white",children:f.name}),x.jsx("span",{className:bt("text-sm font-medium px-3 py-1 rounded-full",f.role===ht.Developer?"bg-blue-900/30 text-blue-300 border border-blue-700/30":f.role===ht.Founder?"bg-purple-900/30 text-purple-300 border border-purple-700/30":"bg-emerald-900/30 text-emerald-300 border border-emerald-700/30"),children:f.role})]}),x.jsx("p",{className:"text-slate-400 text-sm",children:f.location})]})]}),x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"flex-1 bg-slate-800/50 rounded-full h-3",children:x.jsx("div",{className:"bg-gradient-to-r from-slate-600 to-slate-500 h-3 rounded-full transition-all duration-500",style:{width:`${t.compatibilityScore}%`}})}),x.jsxs("span",{className:bt("text-lg font-bold",m),children:[t.compatibilityScore,"%"]})]}),x.jsxs("p",{className:"text-slate-300 text-sm italic border-l-2 border-slate-600 pl-4",children:['"',t.justification,'"']}),x.jsxs("div",{className:"flex gap-2 pt-2",children:[x.jsx("button",{onClick:_=>{_.stopPropagation(),r(f)},className:"p-2 rounded-lg bg-slate-800/50 hover:bg-slate-700/50 text-slate-300 hover:text-white transition-colors",children:x.jsx(aA,{className:"w-4 h-4"})}),s?x.jsxs("button",{disabled:!0,className:"flex-1 py-2 px-4 bg-emerald-600/20 text-emerald-300 border border-emerald-600/30 rounded-lg text-sm font-medium cursor-not-allowed",children:[x.jsx(tf,{className:"w-4 h-4 inline mr-2"})," Connected"]}):o?x.jsxs("button",{disabled:!0,className:"flex-1 py-2 px-4 bg-amber-600/20 text-amber-300 border border-amber-600/30 rounded-lg text-sm font-medium cursor-not-allowed",children:[x.jsx(tf,{className:"w-4 h-4 inline mr-2"})," Pending"]}):x.jsxs("button",{onClick:_=>{_.stopPropagation(),n(f)},className:"flex-1 py-2 px-4 bg-gradient-to-r from-slate-600 to-slate-500 hover:from-slate-500 hover:to-slate-400 text-white rounded-lg text-sm font-medium transition-all duration-200 hover:shadow-lg hover:shadow-slate-500/25",children:[x.jsx(_l,{className:"w-4 h-4 inline mr-2"})," Connect"]}),x.jsxs("button",{onClick:_=>{_.stopPropagation(),e(f)},className:"py-2 px-4 bg-slate-800/50 hover:bg-slate-700/50 text-white rounded-lg text-sm font-medium transition-colors",children:[x.jsx(yf,{className:"w-4 h-4 inline mr-2"})," Message"]})]})]})]})]})]})},T5=({user:t,matches:e,isLoading:n,error:r,onFindMatches:i,searchQuery:s,setSearchQuery:o,hasActiveSearch:l,onMessage:u,onRequestsUpdated:d})=>{var Y,se;const[f,m]=P.useState(null),[v,_]=P.useState(!1),[T,S]=P.useState(null),[A,I]=P.useState(!1),[D,N]=P.useState([]),[U,O]=P.useState(null),[q,M]=P.useState("matches"),[R,k]=P.useState(0),[F,j]=P.useState(null),[G,$]=P.useState(e),de=yc.useCallback(Q=>{j(Q)},[]);P.useEffect(()=>{$(e)},[e]),P.useEffect(()=>{if(!t||e.length===0)return;const Q=[];e.forEach(ae=>{console.log(`Dashboard: Setting up real-time listener for match ${ae.user.name}`);const le=$e.getConnectionStatusRealtime(t.id,ae.user.id,ce=>{console.log(`Dashboard: Real-time status update for ${ae.user.name}:`,ce),$(Ee=>Ee.map(Me=>Me.user.id===ae.user.id?{...Me,isConnected:ce.isConnected,isPending:ce.isPending}:Me))});Q.push(le)});const H=Ie.collection("users").doc(t.id).onSnapshot(ae=>{const le=ae.data();le&&le.connections&&$(ce=>ce.map(Ee=>({...Ee,isConnected:le.connections.includes(Ee.user.id),isPending:!1})))});return Q.push(H),()=>{Q.forEach(ae=>ae())}},[t,e]),yc.useEffect(()=>{async function Q(){if(t.role===ht.Founder){const _e=await $e.getTotalInvestedAmountForIdeas(t.id);k(_e)}}Q()},[t.id,t.role]);const ve=async Q=>{if(t)try{await $e.createConnectionRequest(t,Q.id),O({title:"Request Sent",message:`Your connection request has been sent to ${Q.name}.`,type:"success"}),m(null),d(),$(_e=>_e.map(H=>H.user.id===Q.id?{...H,isConnected:!1,isPending:!0}:H))}catch(_e){console.error("Failed to send connection request:",_e),O({title:"Request Failed",message:"Could not send connection request. You may have already sent one to this user.",type:"error"})}};return x.jsxs("div",{className:"relative min-h-screen w-full overflow-hidden bg-gradient-to-br from-slate-950 via-black to-slate-950 font-sans",children:[x.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none",children:[x.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-950 via-black to-slate-950"}),x.jsx("div",{className:"absolute top-1/4 left-1/4 w-72 h-72 bg-emerald-500/5 rounded-full blur-3xl animate-pulse-slow"}),x.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl animate-pulse-slow",style:{animationDelay:"2s"}}),x.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(255,255,255,0.01)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.01)_1px,transparent_1px)] bg-[size:80px_80px]"})]}),x.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto py-8 sm:py-12 px-4 sm:px-6 lg:px-8",children:[x.jsxs(nt.div,{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center mb-8 gap-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[x.jsxs("div",{children:[x.jsx("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-light text-white mb-2",children:"Your Dashboard"}),x.jsx("p",{className:"text-slate-400 text-sm sm:text-base",children:"Discover and connect with amazing people"})]}),x.jsxs("button",{onClick:i,disabled:n,className:"flex items-center gap-3 bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-400 hover:to-emerald-500 text-white font-medium py-3 px-6 rounded-xl shadow-lg hover:shadow-emerald-500/25 transition-all duration-200 disabled:from-slate-600 disabled:to-slate-700 disabled:cursor-not-allowed disabled:shadow-none transform hover:scale-105",children:[x.jsx(vB,{className:`w-5 h-5 ${n?"animate-spin":""}`}),n?"Finding...":l?"Refresh Matches":"Find Matches"]})]}),x.jsx(nt.div,{className:"mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:x.jsxs("div",{className:"relative",children:[x.jsx(G0,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400 z-10"}),x.jsx("input",{type:"text",placeholder:"Search matches by keyword, skill, or location...",value:s,onChange:Q=>o(Q.target.value),className:"w-full bg-slate-900/50 border border-slate-700/50 rounded-xl py-4 pl-14 pr-4 text-white placeholder-slate-400 focus:ring-2 focus:ring-emerald-500/50 focus:border-emerald-500/50 transition-all backdrop-blur-sm relative z-0"})]})}),x.jsx(nt.div,{className:"mb-8 border-b border-slate-700/30",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:x.jsx("button",{onClick:()=>M("matches"),className:bt("py-3 px-6 text-sm font-medium transition-all duration-200 border-b-2",q==="matches"?"text-emerald-400 border-emerald-500":"text-slate-400 hover:text-white border-transparent hover:border-slate-600"),children:"Matches"})}),q==="matches"&&x.jsx(nt.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:n?Array.from({length:3}).map((Q,_e)=>x.jsx(SAe,{},_e)):G.length>0?G.map((Q,_e)=>x.jsx(nt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1*_e},children:x.jsx(AAe,{match:Q,onMessage:u,onConnect:ve,onFeedback:H=>{S(H),_(!0)},onViewProfile:m,isConnected:Q.isConnected,isPending:Q.isPending,index:_e,hoveredIndex:F,setHoveredIndex:de})},Q.user.id)):x.jsx(nt.div,{className:"text-slate-400 col-span-full text-center py-16",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6},children:x.jsxs("div",{className:"max-w-md mx-auto",children:[x.jsx("div",{className:"w-16 h-16 bg-slate-800/50 rounded-full mx-auto mb-4 flex items-center justify-center",children:x.jsx(G0,{className:"w-8 h-8 text-slate-600"})}),x.jsx("h3",{className:"text-lg font-medium text-slate-300 mb-2",children:"No matches found"}),x.jsx("p",{className:"text-sm text-slate-500",children:"Try refreshing or adjusting your search criteria to discover new connections."})]})})}),q==="analytics"&&t.role===ht.Founder&&x.jsx(K9,{data:{userEngagement:{dailyActiveUsers:0,monthlyActiveUsers:0,averageSessionDuration:0},matchSuccess:{totalMatchesMade:0,successfulConnections:0,successRate:0},platformPerformance:{dau_data:[],match_rate_data:[]}},totalIdeas:0,totalNegotiations:0,totalDealsAccepted:0,totalInvested:R})]}),v&&T&&x.jsx(_Ae,{user:T,onClose:()=>_(!1)}),A&&x.jsx(wAe,{userIds:D,onClose:()=>I(!1),onSelectUser:Q=>{I(!1),m(Q)}}),U&&x.jsx(TAe,{title:U.title,message:U.message,type:U.type,onClose:()=>O(null)}),f&&x.jsx(xN,{user:f,onClose:()=>m(null),isOwnProfile:!1,onMessage:u,onConnect:ve,currentUserId:t.id,isConnected:((Y=G.find(Q=>Q.user.id===f.id))==null?void 0:Y.isConnected)||!1,isPending:((se=G.find(Q=>Q.user.id===f.id))==null?void 0:se.isPending)||!1})]})},bN=({negotiation:t,currentUser:e,onClose:n,onOfferMade:r,onStatusChange:i,onBackToNegotiationList:s,isMobile:o=!1})=>{var M,R;if(!t)return x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4",children:x.jsxs("div",{className:"bg-neutral-900 text-white p-6 rounded-2xl shadow-2xl max-w-2xl w-full",children:[x.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-purple-500 mx-auto"}),x.jsx("p",{className:"text-center mt-4",children:"Loading Negotiation..."})]})});t.ideaTitle,t.investorName,(M=t.offers[0])!=null&&M.investment,(R=t.offers[0])!=null&&R.equity;const[l,u]=P.useState(t.offers||[]),[d,f]=P.useState(""),[m,v]=P.useState(""),[_,T]=P.useState(t.status==="active"||t.status==="pending"?"ongoing":t.status),S=P.useRef();P.useEffect(()=>{const k=Ie.collection("negotiations").doc(t.id);return S.current=k.onSnapshot(F=>{if(F.exists){const j=F.data();u(j.offers?j.offers.map(G=>{var $;return{...G,timestamp:($=G.timestamp)!=null&&$.toDate?G.timestamp.toDate():G.timestamp}}):[]),j.status==="accepted"||j.status==="closed"?T("accepted"):j.status==="rejected"||j.status==="declined"?T("declined"):(j.status==="pending"||j.status==="active")&&T("ongoing")}}),()=>{S.current&&S.current()}},[t.id]),P.useEffect(()=>{if(l.length===0&&e.id===t.founderId){const k={investment:5e5,equity:10,by:"founder",timestamp:new Date};r(k),u([k])}},[l.length,e.id,t.founderId,r]);const A=l[l.length-1],I=e.id===t.founderId?"founder":"investor",D=!A||A.by!==I,N=()=>{const k=Number(d),F=Number(m);if(k>0&&F>0&&F<100){const j={investment:k,equity:F,by:I,timestamp:new Date};r(j),u([...l,j]),f(""),v("")}},U=()=>{T("accepted"),i("accepted")},O=()=>{T("declined"),i("declined")},q=({offer:k,isLast:F})=>x.jsxs("div",{className:`p-4 rounded-xl ${F?"bg-purple-900/30 border border-purple-700/30 shadow-lg shadow-purple-500/20":"bg-slate-800/20 border border-slate-700/20"}`,children:[x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("span",{className:"font-bold text-lg text-white",children:k.by==="founder"?`${t.founderName}'s Offer`:`${t.investorName}'s Offer`}),x.jsx("span",{className:"text-xs text-neutral-400",children:new Date(k.timestamp).toLocaleTimeString()})]}),x.jsxs("div",{className:"mt-2 flex gap-6 text-white",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(vne,{className:"w-5 h-5 text-green-400"}),x.jsxs("span",{children:["$",k.investment.toLocaleString()]})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(xB,{className:"w-5 h-5 text-blue-400"}),x.jsxs("span",{children:[k.equity,"% Equity"]})]})]})]});return x.jsxs("div",{className:"w-full h-full bg-gradient-to-br from-slate-950 to-black flex flex-col",children:[x.jsx("div",{className:"flex-shrink-0 p-4 sm:p-6 border-b border-slate-800/30",children:x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[o&&s&&x.jsx("button",{onClick:s,className:"p-2 rounded-lg hover:bg-slate-800/50 transition-colors",children:x.jsx(TB,{className:"w-5 h-5 text-slate-400"})}),x.jsxs("div",{children:[x.jsxs("h1",{className:"text-xl sm:text-2xl font-bold text-white",children:["Negotiation for ",t.ideaTitle]}),x.jsxs("p",{className:"text-sm text-slate-400",children:["Between Founder & ",t.investorName," (Investor)"]})]})]}),!o&&x.jsx("button",{onClick:n,className:"text-slate-400 hover:text-white text-2xl",children:""})]})}),x.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto p-4 sm:p-6",children:x.jsxs("div",{className:"space-y-4",children:[l.length>0?x.jsx("div",{className:"space-y-2",children:l.map((k,F)=>x.jsx(q,{offer:k,isLast:F===l.length-1},F))}):x.jsxs("div",{className:"text-center p-8 bg-slate-800/20 border border-slate-700/20 rounded-xl",children:[x.jsx("p",{className:"font-semibold text-white",children:"Waiting for the first offer..."}),x.jsx("p",{className:"text-sm text-slate-400 mt-1",children:I==="founder"?"You can make the opening offer below.":`Waiting for ${t.founderName} to make an offer.`})]}),_==="ongoing"&&x.jsx("div",{className:"mt-6 pt-4 border-t border-slate-700/30",children:D?x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-semibold text-center mb-4 text-white",children:"Your Turn to Counter"}),x.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[x.jsxs("div",{children:[x.jsx("label",{htmlFor:"counterInvestment",className:"block text-sm font-medium text-slate-300 mb-1",children:"Investment ($)"}),x.jsx("input",{id:"counterInvestment",type:"number",value:d,onChange:k=>f(k.target.value),placeholder:"e.g., 550000",className:"w-full bg-slate-800/50 border border-slate-700/30 rounded-xl py-2 px-3 text-white focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500/50 transition-all backdrop-blur-sm"})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"counterEquity",className:"block text-sm font-medium text-slate-300 mb-1",children:"Equity (%)"}),x.jsx("input",{id:"counterEquity",type:"number",value:m,onChange:k=>v(k.target.value),placeholder:"e.g., 12",className:"w-full bg-slate-800/50 border border-slate-700/30 rounded-xl py-2 px-3 text-white focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500/50 transition-all backdrop-blur-sm"})]})]}),x.jsx("button",{onClick:N,className:"w-full bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-500 hover:to-purple-600 text-white font-bold py-2.5 px-4 rounded-xl transition-all duration-200 shadow-lg hover:shadow-purple-500/25",children:"Make Offer"}),l.length>0&&x.jsxs("div",{className:"mt-4 flex justify-center gap-4",children:[x.jsx("button",{onClick:U,className:"text-sm text-green-400 hover:text-green-300",children:"Accept Current Offer"}),x.jsx("button",{onClick:O,className:"text-sm text-red-400 hover:text-red-300",children:"Decline & End"})]})]}):x.jsxs("div",{className:"text-center p-4 bg-slate-800/20 border border-slate-700/20 rounded-xl",children:[x.jsxs("p",{className:"font-semibold text-white",children:["Waiting for ",(A==null?void 0:A.by)==="founder"?t.investorName:"the Founder"," to respond..."]}),x.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"You will be notified of their response."})]})}),_!=="ongoing"&&x.jsx("div",{className:`mt-6 p-6 rounded-xl text-center border ${_==="accepted"?"bg-green-900/30 border-green-700/30":"bg-red-900/30 border-red-700/30"}`,children:_==="accepted"?x.jsxs(x.Fragment,{children:[x.jsx(zC,{className:"w-12 h-12 mx-auto text-green-400 mb-3"}),x.jsx("h3",{className:"text-xl font-bold text-green-300 mb-2",children:"Deal Accepted!"}),x.jsxs("p",{className:"text-slate-300",children:["$",A==null?void 0:A.investment.toLocaleString()," for ",A==null?void 0:A.equity,"% equity."]})]}):x.jsxs(x.Fragment,{children:[x.jsx(wB,{className:"w-12 h-12 mx-auto text-red-400 mb-3"}),x.jsxs("h3",{className:"text-xl font-bold text-red-300 mb-2",children:["Negotiation ",t.status]}),x.jsx("p",{className:"text-slate-300",children:"This negotiation has been terminated."})]})})]})})]})},CAe=({user:t,setIsMobileNegotiationOpen:e,selectedNegotiationId:n,onNegotiationSelected:r})=>{const[i,s]=P.useState([]),[o,l]=P.useState(!0),[u,d]=P.useState(null),[f,m]=P.useState(null),[v,_]=P.useState(""),[T,S]=P.useState("active"),[A,I]=P.useState(!1);if(P.useEffect(()=>{if(t.role!==ht.Founder&&t.role!==ht.Investor&&t.role!=="founder"&&t.role!=="investor"){l(!1);return}const k=t.role===ht.Founder||t.role==="founder"?$e.getNegotiationsForFounder(t.id,F=>{s(F),l(!1)}):$e.getNegotiationsForInvestor(t.id,F=>{s(F),l(!1)});return()=>k()},[t.id,t.role]),P.useEffect(()=>{if(n&&i.length>0){const k=i.find(F=>F.id===n);k&&(m(k),I(!0),e&&e(!0),r&&r())}},[n,i,e,r]),o)return x.jsx("div",{className:"flex justify-center items-center h-64",children:x.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-purple-500"})});if(u)return x.jsx("p",{className:"text-center text-red-400",children:u});const D=i.filter(k=>{var de,ve,Y;const F=v.toLowerCase(),j=((de=k.ideaTitle)==null?void 0:de.toLowerCase())||"",G=((ve=k.investorName)==null?void 0:ve.toLowerCase())||"",$=((Y=k.founderName)==null?void 0:Y.toLowerCase())||"";return j.includes(F)||G.includes(F)||$.includes(F)}),N=D.filter(k=>k.status==="active"),U=D.filter(k=>k.status==="accepted"),O=D.filter(k=>k.status==="declined"),q=t.role===ht.Founder||t.role==="founder",M=k=>{m(k),I(!0),e&&e(!0)},R=()=>{m(null),I(!1),e&&e(!1)};return x.jsxs("div",{className:bt("w-full h-full max-h-full bg-gradient-to-br from-slate-950 to-black overflow-hidden flex",A?"pt-0 pb-0":"pt-16 pb-16 lg:pt-0 lg:pb-0"),children:[x.jsxs("div",{className:bt("flex-shrink-0 bg-gradient-to-b from-slate-900/90 to-black/90 backdrop-blur-sm flex flex-col h-full transition-all duration-300 ease-in-out",A?"hidden lg:flex lg:w-80 xl:w-96":"w-full lg:w-80 xl:w-96 lg:border-r lg:border-slate-800/30"),children:[x.jsxs("div",{className:"flex-shrink-0 p-3 sm:p-4 lg:p-6 border-b border-slate-800/30",children:[x.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-white mb-4",children:"Negotiations"}),x.jsxs("div",{className:"relative",children:[x.jsx(G0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400 z-10"}),x.jsx("input",{type:"text",placeholder:"Search deals...",value:v,onChange:k=>_(k.target.value),className:"w-full bg-slate-800/50 border border-slate-700/30 rounded-xl py-3 pl-10 pr-4 text-white placeholder-slate-400 focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500/50 transition-all backdrop-blur-sm"})]})]}),x.jsxs("div",{className:"flex-1 min-h-0 overflow-y-auto",children:[x.jsx("div",{className:"px-3 sm:px-4 lg:px-6 pt-4",children:x.jsxs("div",{className:"flex space-x-2 bg-gradient-to-r from-slate-900/90 to-black/90 backdrop-blur-xl border border-slate-700/50 rounded-2xl p-1.5 shadow-2xl shadow-black/50",children:[x.jsxs("button",{onClick:()=>S("active"),className:bt("flex-1 py-3 px-4 rounded-xl text-sm font-medium transition-all duration-300 relative overflow-hidden min-w-0",T==="active"?"bg-gradient-to-r from-slate-600 to-slate-500 text-white shadow-lg shadow-slate-500/25 border border-slate-500/30":"text-slate-400 hover:text-white hover:bg-slate-800/50 hover:border-slate-600/30 border border-transparent"),children:[x.jsxs("div",{className:"flex items-center justify-center gap-2",children:[x.jsx("span",{className:"relative z-10 truncate",children:"Active"}),x.jsx("span",{className:bt("px-2 py-0.5 rounded-full text-xs font-semibold flex-shrink-0",T==="active"?"bg-white/20 text-white":"bg-slate-700/50 text-slate-300"),children:N.length})]}),T==="active"&&x.jsx(nt.div,{className:"absolute inset-0 bg-gradient-to-r from-slate-600/20 to-slate-500/20",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3}})]}),x.jsxs("button",{onClick:()=>S("accepted"),className:bt("flex-1 py-3 px-4 rounded-xl text-sm font-medium transition-all duration-300 relative overflow-hidden min-w-0",T==="accepted"?"bg-gradient-to-r from-slate-600 to-slate-500 text-white shadow-lg shadow-slate-500/25 border border-slate-500/30":"text-slate-400 hover:text-white hover:bg-slate-800/50 hover:border-slate-600/30 border border-transparent"),children:[x.jsxs("div",{className:"flex items-center justify-center gap-2",children:[x.jsx("span",{className:"relative z-10 truncate",children:"Accepted"}),x.jsx("span",{className:bt("px-2 py-0.5 rounded-full text-xs font-semibold flex-shrink-0",T==="accepted"?"bg-white/20 text-white":"bg-slate-700/50 text-slate-300"),children:U.length})]}),T==="accepted"&&x.jsx(nt.div,{className:"absolute inset-0 bg-gradient-to-r from-slate-600/20 to-slate-500/20",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3}})]}),x.jsxs("button",{onClick:()=>S("declined"),className:bt("flex-1 py-3 px-4 rounded-xl text-sm font-medium transition-all duration-300 relative overflow-hidden min-w-0",T==="declined"?"bg-gradient-to-r from-slate-600 to-slate-500 text-white shadow-lg shadow-slate-500/25 border border-slate-500/30":"text-slate-400 hover:text-white hover:bg-slate-800/50 hover:border-slate-600/30 border border-transparent"),children:[x.jsxs("div",{className:"flex items-center justify-center gap-2",children:[x.jsx("span",{className:"relative z-10 truncate",children:"Declined"}),x.jsx("span",{className:bt("px-2 py-0.5 rounded-full text-xs font-semibold flex-shrink-0",T==="declined"?"bg-white/20 text-white":"bg-slate-700/50 text-slate-300"),children:O.length})]}),T==="declined"&&x.jsx(nt.div,{className:"absolute inset-0 bg-gradient-to-r from-slate-600/20 to-slate-500/20",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3}})]})]})}),x.jsxs("div",{className:"px-3 sm:px-4 lg:px-6 pt-6 flex-1 min-h-0 flex flex-col",children:[T==="active"&&x.jsx("div",{className:"flex-1 min-h-0 flex flex-col",children:N.length>0?x.jsx("div",{className:"space-y-2 flex-1 min-h-0 overflow-y-auto",children:N.map(k=>x.jsxs(nt.div,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>M(k),className:bt("p-2.5 sm:p-3 lg:p-4 flex items-center cursor-pointer rounded-xl transition-all duration-200","hover:bg-slate-800/50 hover:shadow-lg hover:shadow-slate-500/10",(f==null?void 0:f.id)===k.id?"bg-purple-900/30 border border-purple-700/30 shadow-lg shadow-purple-500/20":"bg-slate-800/20 border border-slate-700/20"),children:[x.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-full mr-3 sm:mr-4 bg-gradient-to-br from-slate-700/50 to-slate-800/50 border-2 border-slate-700/50 shadow-lg flex items-center justify-center",children:x.jsx(wr,{className:"w-6 h-6 sm:w-7 sm:h-7 text-slate-400"})}),x.jsxs("div",{className:"flex-grow overflow-hidden min-w-0",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("h3",{className:"font-bold text-white truncate text-base sm:text-lg",children:k.ideaTitle}),x.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-semibold rounded-full flex-shrink-0 bg-yellow-900/50 text-yellow-300",children:"Active"})]}),x.jsx("p",{className:"text-sm text-slate-400 truncate pr-2",children:q?`with ${k.investorName}`:`with ${k.founderName}`})]})]},k.id))}):x.jsx("div",{className:"flex-1 flex items-center justify-center px-6",children:x.jsxs("div",{className:"text-center max-w-sm mx-auto",children:[x.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-slate-800/50 to-slate-900/50 rounded-full flex items-center justify-center border border-slate-700/30 shadow-lg",children:x.jsx(wr,{className:"w-10 h-10 text-slate-500"})}),x.jsx("h3",{className:"text-xl sm:text-2xl font-bold mb-3 text-white",children:"No Active Deals"}),x.jsx("p",{className:"text-sm sm:text-base text-slate-400 leading-relaxed",children:q?"You don't have any active negotiations with investors.":"You don't have any active deals with founders."})]})})}),T==="accepted"&&x.jsx("div",{className:"flex-1 min-h-0 flex flex-col",children:U.length>0?x.jsx("div",{className:"space-y-2 flex-1 min-h-0 overflow-y-auto",children:U.map(k=>x.jsxs(nt.div,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>M(k),className:bt("p-2.5 sm:p-3 lg:p-4 flex items-center cursor-pointer rounded-xl transition-all duration-200","hover:bg-slate-800/50 hover:shadow-lg hover:shadow-slate-500/10",(f==null?void 0:f.id)===k.id?"bg-purple-900/30 border border-purple-700/30 shadow-lg shadow-purple-500/20":"bg-slate-800/20 border border-slate-700/20"),children:[x.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-full mr-3 sm:mr-4 bg-gradient-to-br from-slate-700/50 to-slate-800/50 border-2 border-slate-700/50 shadow-lg flex items-center justify-center",children:x.jsx(wr,{className:"w-6 h-6 sm:w-7 sm:h-7 text-slate-400"})}),x.jsxs("div",{className:"flex-grow overflow-hidden min-w-0",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("h3",{className:"font-bold text-white truncate text-base sm:text-lg",children:k.ideaTitle}),x.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-semibold rounded-full flex-shrink-0 bg-green-900/50 text-green-300",children:"Accepted"})]}),x.jsx("p",{className:"text-sm text-slate-400 truncate pr-2",children:q?`with ${k.investorName}`:`with ${k.founderName}`})]})]},k.id))}):x.jsx("div",{className:"flex-1 flex items-center justify-center px-6",children:x.jsxs("div",{className:"text-center max-w-sm mx-auto",children:[x.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-slate-800/50 to-slate-900/50 rounded-full flex items-center justify-center border border-slate-700/30 shadow-lg",children:x.jsx(wr,{className:"w-10 h-10 text-slate-500"})}),x.jsx("h3",{className:"text-xl sm:text-2xl font-bold mb-3 text-white",children:"No Accepted Deals"}),x.jsx("p",{className:"text-sm sm:text-base text-slate-400 leading-relaxed",children:q?"You don't have any accepted negotiations with investors.":"You don't have any accepted deals with founders."})]})})}),T==="declined"&&x.jsx("div",{className:"flex-1 min-h-0 flex flex-col",children:O.length>0?x.jsx("div",{className:"space-y-2 flex-1 min-h-0 overflow-y-auto",children:O.map(k=>x.jsxs(nt.div,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>M(k),className:bt("p-2.5 sm:p-3 lg:p-4 flex items-center cursor-pointer rounded-xl transition-all duration-200","hover:bg-slate-800/50 hover:shadow-lg hover:shadow-slate-500/10",(f==null?void 0:f.id)===k.id?"bg-purple-900/30 border border-purple-700/30 shadow-lg shadow-purple-500/20":"bg-slate-800/20 border border-slate-700/20"),children:[x.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-full mr-3 sm:mr-4 bg-gradient-to-br from-slate-700/50 to-slate-800/50 border-2 border-slate-700/50 shadow-lg flex items-center justify-center",children:x.jsx(wr,{className:"w-6 h-6 sm:w-7 sm:h-7 text-slate-400"})}),x.jsxs("div",{className:"flex-grow overflow-hidden min-w-0",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("h3",{className:"font-bold text-white truncate text-base sm:text-lg",children:k.ideaTitle}),x.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-semibold rounded-full flex-shrink-0 bg-red-900/50 text-red-300",children:"Declined"})]}),x.jsx("p",{className:"text-sm text-slate-400 truncate pr-2",children:q?`with ${k.investorName}`:`with ${k.founderName}`})]})]},k.id))}):x.jsx("div",{className:"flex-1 flex items-center justify-center px-6",children:x.jsxs("div",{className:"text-center max-w-sm mx-auto",children:[x.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-slate-800/50 to-slate-900/50 rounded-full flex items-center justify-center border border-slate-700/30 shadow-lg",children:x.jsx(wr,{className:"w-10 h-10 text-slate-500"})}),x.jsx("h3",{className:"text-xl sm:text-2xl font-bold mb-3 text-white",children:"No Declined Deals"}),x.jsx("p",{className:"text-sm sm:text-base text-slate-400 leading-relaxed",children:q?"You don't have any declined negotiations with investors.":"You don't have any declined deals with founders."})]})})})]})]})]}),x.jsx("div",{className:bt("min-w-0 h-full max-h-full overflow-hidden bg-gradient-to-br from-slate-950 to-black flex justify-center transition-all duration-300 ease-in-out",A?"flex-1 w-full":"flex-1"),children:x.jsx("div",{className:"w-full max-w-4xl h-full max-h-full overflow-hidden",children:f?x.jsx(bN,{negotiation:f,currentUser:t,onClose:R,onOfferMade:async k=>{await $e.addOfferToNegotiation(f.id,k),m(F=>F?{...F,offers:[...F.offers,k],status:"active"}:null)},onStatusChange:async k=>{await $e.updateNegotiationStatus(f.id,k),m(F=>F?{...F,status:k}:null)},onBackToNegotiationList:R,isMobile:A}):x.jsx("div",{className:"flex items-center justify-center h-full px-6",children:x.jsxs("div",{className:"text-center max-w-sm mx-auto",children:[x.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-slate-800/50 rounded-full flex items-center justify-center",children:x.jsx(wr,{className:"w-10 h-10 text-slate-600"})}),x.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white mb-3",children:"Select a deal to view details"}),x.jsx("p",{className:"text-sm sm:text-base text-slate-400 leading-relaxed",children:"Choose from your active, accepted, or declined deals to see the full negotiation details"})]})})})})]})},IAe=({user:t,currentUser:e,onBackToChatList:n,isMobile:r})=>{const[i,s]=P.useState([]),[o,l]=P.useState(""),[u,d]=P.useState(!1),f=P.useRef(null),m=$e.getChatId(e.id,t.id),v=()=>{f.current&&f.current.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})},_=P.useCallback(()=>{$e.markChatAsRead(m,e.id)},[m,e.id]);P.useEffect(()=>{i.length>0&&v()},[i]),P.useEffect(()=>{const I=Ie.collection("chats").doc(m).collection("messages").orderBy("timestamp","asc").onSnapshot(D=>{const N=D.docs.map(U=>{const O=U.data();return{id:U.id,senderId:O.senderId,text:O.text,timestamp:O.timestamp.toDate()}});s(N),N.length>0&&$e.markChatAsRead(m,e.id),N.length>0&&setTimeout(()=>v(),100)});return()=>I()},[m,e.id]),P.useEffect(()=>{const A=()=>{_(),_()},I=document.querySelector(".messages-container");if(I)return I.addEventListener("scroll",A),I.addEventListener("touchstart",_),I.addEventListener("click",_),()=>{I.removeEventListener("scroll",A),I.removeEventListener("touchstart",_),I.removeEventListener("click",_)}},[_]),P.useEffect(()=>{const A=()=>{_()};return window.addEventListener("focus",A),()=>window.removeEventListener("focus",A)},[_]);const T=async A=>{if(A.preventDefault(),o.trim()==="")return;d(!0);const I={senderId:e.id,text:o,timestamp:wt.firestore.FieldValue.serverTimestamp()};l("");try{const D=Ie.collection("chats").doc(m),N=D.collection("messages").doc(),U=Ie.batch();U.set(N,I);const O=wt.firestore.FieldValue.increment(1);U.set(D,{participants:[e.id,t.id],lastMessage:I,unreadCounts:{[t.id]:O,[e.id]:0}},{merge:!0}),await U.commit()}catch(D){console.error("Failed to send message:",D)}finally{d(!1),v()}},S=A=>{const I=new Date,D=new Date(A);return I.toDateString()===D.toDateString()?D.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):D.toLocaleDateString([],{month:"short",day:"numeric"})};return x.jsxs("div",{className:"flex flex-col h-full max-h-full bg-gradient-to-br from-slate-950 to-black overflow-hidden",children:[x.jsxs("div",{className:"flex-shrink-0 flex items-center gap-3 p-2 sm:p-3 border-b border-slate-800/30 bg-gradient-to-r from-slate-900/90 to-black/90 backdrop-blur-sm z-10",children:[n&&x.jsx(nt.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:n,className:"p-1.5 rounded-lg bg-slate-800/50 hover:bg-slate-700/50 transition-all duration-200 border border-slate-700/30",children:x.jsx(TB,{className:"w-4 h-4 text-white"})}),x.jsx("img",{src:t.avatarUrl,alt:t.name,className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full border-2 border-slate-700/50 shadow-lg"}),x.jsxs("div",{className:"flex-grow min-w-0",children:[x.jsx("h3",{className:"font-bold text-white text-base sm:text-lg truncate",children:t.name}),x.jsx("p",{className:"text-xs text-slate-400",children:t.role})]}),u&&x.jsxs("div",{className:"flex items-center gap-1 text-slate-400 text-xs",children:[x.jsxs("div",{className:"flex space-x-1",children:[x.jsx(nt.div,{animate:{y:[0,-5,0]},transition:{duration:.6,repeat:1/0,delay:0},className:"w-1.5 h-1.5 bg-slate-400 rounded-full"}),x.jsx(nt.div,{animate:{y:[0,-5,0]},transition:{duration:.6,repeat:1/0,delay:.2},className:"w-1.5 h-1.5 bg-slate-400 rounded-full"}),x.jsx(nt.div,{animate:{y:[0,-5,0]},transition:{duration:.6,repeat:1/0,delay:.4},className:"w-1.5 h-1.5 bg-slate-400 rounded-full"})]}),x.jsx("span",{className:"ml-1",children:"typing..."})]})]}),x.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto bg-gradient-to-br from-slate-950 to-black messages-container",children:x.jsxs("div",{className:"flex flex-col min-h-full p-3 sm:p-4",children:[x.jsx("div",{className:"flex-1"}),x.jsxs("div",{className:"space-y-3",children:[x.jsx(Dl,{children:i.map((A,I)=>x.jsxs(nt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2},className:bt("flex gap-2 sm:gap-3",A.senderId===e.id?"justify-end":"justify-start"),children:[A.senderId!==e.id&&x.jsx("img",{src:t.avatarUrl,alt:`${t.name}'s avatar`,className:"w-6 h-6 sm:w-8 sm:h-8 rounded-full border border-slate-700/50 shadow-md"}),x.jsxs("div",{className:"flex flex-col",children:[x.jsx("div",{className:bt("max-w-[200px] sm:max-w-[280px] lg:max-w-[320px] p-2.5 sm:p-3 rounded-2xl shadow-lg","transition-all duration-200 hover:shadow-xl",A.senderId===e.id?"bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-br-md border border-purple-500/30":"bg-gradient-to-r from-slate-800/80 to-slate-700/80 text-slate-200 rounded-bl-md border border-slate-600/30 backdrop-blur-sm"),children:x.jsx("p",{className:"text-sm sm:text-base leading-relaxed break-words font-normal",children:A.text})}),x.jsx("p",{className:bt("text-xs mt-1 opacity-50 font-light px-1",A.senderId===e.id?"text-right text-purple-200":"text-left text-slate-400"),children:S(A.timestamp)})]}),A.senderId===e.id&&x.jsx("img",{src:e.avatarUrl,alt:"Your avatar",className:"w-6 h-6 sm:w-8 sm:h-8 rounded-full border border-slate-700/50 shadow-md"})]},A.id))}),i.length===0&&x.jsx("div",{className:"flex items-center justify-center h-full min-h-[400px]",children:x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-slate-800/50 rounded-full flex items-center justify-center",children:x.jsx(ef,{className:"w-8 h-8 text-slate-600"})}),x.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Start a conversation"}),x.jsxs("p",{className:"text-slate-400",children:["Send your first message to ",t.name]})]})}),x.jsx("div",{ref:f})]})]})}),x.jsx("div",{className:"flex-shrink-0 p-2 sm:p-3 border-t border-slate-800/30 bg-gradient-to-r from-slate-900/90 to-black/90 backdrop-blur-sm",children:x.jsxs("form",{onSubmit:T,className:"flex items-center gap-2 bg-slate-800/50 border border-slate-700/30 rounded-xl p-1.5 transition-all duration-200 focus-within:border-purple-500/50 focus-within:ring-2 focus-within:ring-purple-500/20",children:[x.jsx("input",{type:"text",value:o,onChange:A=>l(A.target.value),placeholder:`Message ${t.name}...`,className:"flex-1 bg-transparent p-1.5 sm:p-2 text-white placeholder-slate-400 focus:outline-none text-sm sm:text-base",disabled:u}),x.jsx(nt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",title:"Send message","aria-label":"Send message",disabled:!o.trim()||u,className:bt("p-1.5 sm:p-2 rounded-lg transition-all duration-200",o.trim()&&!u?"bg-gradient-to-r from-purple-600 to-purple-700 text-white hover:from-purple-500 hover:to-purple-600 shadow-lg hover:shadow-purple-500/25":"bg-slate-700/50 text-slate-500 cursor-not-allowed"),children:x.jsx(ef,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]})})]})},RAe=({chats:t,currentUser:e,connections:n,setIsMobileChatOpen:r})=>{const[i,s]=P.useState(""),[o,l]=P.useState(null),[u,d]=P.useState(!1),[f,m]=P.useState("chats"),[v,_]=P.useState(t);P.useEffect(()=>{const M=$e.getChatsRealtime(e.id,R=>{_(R)});return()=>M()},[e.id]);const S=[...v].sort((M,R)=>{var j,G;const k=(j=M.lastMessage)!=null&&j.timestamp?new Date(M.lastMessage.timestamp.seconds*1e3).getTime():0;return((G=R.lastMessage)!=null&&G.timestamp?new Date(R.lastMessage.timestamp.seconds*1e3).getTime():0)-k}).filter(M=>{const R=M.participantDetails.find(k=>k.id!==e.id);return R&&R.name.toLowerCase().includes(i.toLowerCase())}),A=v.map(M=>M.participantDetails.find(R=>R.id!==e.id)).filter(Boolean),D=n.filter(M=>!A.some(R=>R.id===M.id)).filter(M=>M.name.toLowerCase().includes(i.toLowerCase())),N=M=>{l(M),d(!0),r(!0);const R=v.find(k=>k.participantDetails.some(F=>F.id===M.id));R&&$e.markChatAsRead(R.id,e.id)},U=()=>{d(!1),l(null),r(!1)},O=M=>{var R;return((R=M.unreadCounts)==null?void 0:R[e.id])||0},q=()=>v.reduce((M,R)=>M+O(R),0);return x.jsxs("div",{className:bt("w-full h-full max-h-full bg-gradient-to-br from-slate-950 to-black overflow-hidden flex",u?"pt-0 pb-0":"pt-16 pb-16 lg:pt-0 lg:pb-0"),children:[x.jsxs("div",{className:bt("flex-shrink-0 bg-gradient-to-b from-slate-900/90 to-black/90 backdrop-blur-sm flex flex-col h-full","w-full lg:w-80 xl:w-96 lg:border-r lg:border-slate-800/30","transition-all duration-300 ease-in-out",u?"hidden lg:flex":"flex"),children:[x.jsxs("div",{className:"flex-shrink-0 p-3 sm:p-4 lg:p-6 border-b border-slate-800/30",children:[x.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-white mb-4",children:"Messages"}),x.jsxs("div",{className:"relative",children:[x.jsx(G0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400 z-10"}),x.jsx("input",{type:"text",placeholder:"Search by name...",value:i,onChange:M=>s(M.target.value),className:"w-full bg-slate-800/50 border border-slate-700/30 rounded-xl py-3 pl-10 pr-4 text-white placeholder-slate-400 focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500/50 transition-all backdrop-blur-sm"})]})]}),x.jsxs("div",{className:"flex-1 min-h-0 overflow-y-auto",children:[x.jsx("div",{className:"px-3 sm:px-4 lg:px-6 pt-4",children:x.jsxs("div",{className:"flex space-x-2 bg-gradient-to-r from-slate-900/90 to-black/90 backdrop-blur-xl border border-slate-700/50 rounded-2xl p-1.5 shadow-2xl shadow-black/50",children:[x.jsxs("button",{onClick:()=>m("chats"),className:bt("flex-1 py-3 px-4 rounded-xl text-sm font-medium transition-all duration-300 relative overflow-hidden min-w-0",f==="chats"?"bg-gradient-to-r from-slate-600 to-slate-500 text-white shadow-lg shadow-slate-500/25 border border-slate-500/30":"text-slate-400 hover:text-white hover:bg-slate-800/50 hover:border-slate-600/30 border border-transparent"),children:[x.jsxs("div",{className:"flex items-center justify-center gap-2",children:[x.jsx("span",{className:"relative z-10 truncate",children:"Chats"}),x.jsx("span",{className:bt("px-2 py-0.5 rounded-full text-xs font-semibold flex-shrink-0",f==="chats"?"bg-white/20 text-white":"bg-slate-700/50 text-slate-300"),children:S.length}),q()>0&&x.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center animate-pulse",children:q()>99?"99+":q()})]}),f==="chats"&&x.jsx(nt.div,{className:"absolute inset-0 bg-gradient-to-r from-slate-600/20 to-slate-500/20",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3}})]}),x.jsxs("button",{onClick:()=>m("contacts"),className:bt("flex-1 py-3 px-4 rounded-xl text-sm font-medium transition-all duration-300 relative overflow-hidden min-w-0",f==="contacts"?"bg-gradient-to-r from-slate-600 to-slate-500 text-white shadow-lg shadow-slate-500/25 border border-slate-500/30":"text-slate-400 hover:text-white hover:bg-slate-800/50 hover:border-slate-600/30 border border-transparent"),children:[x.jsxs("div",{className:"flex items-center justify-center gap-2",children:[x.jsx("span",{className:"relative z-10 truncate",children:"Contacts"}),x.jsx("span",{className:bt("px-2 py-0.5 rounded-full text-xs font-semibold flex-shrink-0",f==="contacts"?"bg-white/20 text-white":"bg-slate-700/50 text-slate-300"),children:D.length})]}),f==="contacts"&&x.jsx(nt.div,{className:"absolute inset-0 bg-gradient-to-r from-slate-600/20 to-slate-500/20",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3}})]})]})}),x.jsx("div",{className:"px-3 sm:px-4 lg:px-6 pt-6 flex-1 min-h-0 flex flex-col",children:f==="chats"?x.jsx("div",{className:"flex-1 min-h-0 flex flex-col",children:S.length>0?x.jsx("div",{className:"space-y-2 flex-1 min-h-0 overflow-y-auto",children:S.map(M=>{const R=M.participantDetails.find(k=>k.id!==e.id);return R?x.jsxs(nt.div,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>N(R),className:bt("p-2.5 sm:p-3 lg:p-4 flex items-center cursor-pointer rounded-xl transition-all duration-200","hover:bg-slate-800/50 hover:shadow-lg hover:shadow-slate-500/10",(o==null?void 0:o.id)===R.id?"bg-purple-900/30 border border-purple-700/30 shadow-lg shadow-purple-500/20":"bg-slate-800/20 border border-slate-700/20"),children:[x.jsx("img",{src:R.avatarUrl,alt:R.name,className:"w-12 h-12 sm:w-14 sm:h-14 rounded-full mr-3 sm:mr-4 border-2 border-slate-700/50 shadow-lg"}),x.jsxs("div",{className:"flex-grow overflow-hidden min-w-0",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("h3",{className:"font-bold text-white truncate text-base sm:text-lg",children:R.name}),O(M)>0&&x.jsx("span",{className:"ml-2 px-2 py-1 bg-red-500 text-white text-xs font-bold rounded-full flex-shrink-0 animate-pulse",children:O(M)>99?"99+":O(M)})]}),M.lastMessage?x.jsxs("p",{className:"text-sm text-slate-400 truncate pr-2",children:[x.jsx("span",{className:"font-semibold text-purple-400",children:M.lastMessage.senderId===e.id?"You: ":""}),M.lastMessage.text]}):x.jsx("p",{className:"text-sm text-slate-500 italic",children:"No messages yet"})]})]},M.id):null})}):x.jsx("div",{className:"flex-1 flex items-center justify-center px-6",children:x.jsxs("div",{className:"text-center max-w-sm mx-auto",children:[x.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-slate-800/50 to-slate-900/50 rounded-full flex items-center justify-center border border-slate-700/30 shadow-lg",children:x.jsx(ef,{className:"w-10 h-10 text-slate-500"})}),x.jsx("h3",{className:"text-xl sm:text-2xl font-bold mb-3 text-white",children:"No Active Chats"}),x.jsx("p",{className:"text-sm sm:text-base text-slate-400 leading-relaxed",children:"Start a conversation with your connections to see them here."})]})})}):x.jsx("div",{className:"flex-1 min-h-0 flex flex-col",children:D.length>0?x.jsx("div",{className:"space-y-2 flex-1 min-h-0 overflow-y-auto",children:D.map(M=>x.jsxs(nt.div,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>N(M),className:bt("p-2.5 sm:p-3 lg:p-4 flex items-center cursor-pointer rounded-xl transition-all duration-200","hover:bg-slate-800/50 hover:shadow-lg hover:shadow-slate-500/10",(o==null?void 0:o.id)===M.id?"bg-emerald-900/30 border border-emerald-700/30 shadow-lg shadow-emerald-500/20":"bg-slate-800/20 border border-slate-700/20"),children:[x.jsx("img",{src:M.avatarUrl,alt:M.name,className:"w-12 h-12 sm:w-14 sm:h-14 rounded-full mr-3 sm:mr-4 border-2 border-slate-700/50 shadow-lg"}),x.jsxs("div",{className:"flex-grow overflow-hidden min-w-0",children:[x.jsx("h3",{className:"font-bold text-white text-base sm:text-lg",children:M.name}),x.jsx("p",{className:"text-sm text-slate-400",children:M.role})]}),x.jsx(ef,{className:"w-5 h-5 sm:w-6 sm:h-6 text-slate-500 hover:text-emerald-400 transition-colors"})]},M.id))}):x.jsx("div",{className:"flex-1 flex items-center justify-center px-6",children:x.jsxs("div",{className:"text-center max-w-sm mx-auto",children:[x.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-slate-800/50 to-slate-900/50 rounded-full flex items-center justify-center border border-slate-700/30 shadow-lg",children:x.jsx(ef,{className:"w-10 h-10 text-slate-500"})}),x.jsx("h3",{className:"text-xl sm:text-2xl font-bold mb-3 text-white",children:"No Connections Available"}),x.jsx("p",{className:"text-sm sm:text-base text-slate-400 leading-relaxed",children:"Connect with other users to start new conversations."})]})})})})]})]}),x.jsx("div",{className:bt("flex-1 min-w-0 h-full max-h-full overflow-hidden bg-gradient-to-br from-slate-950 to-black flex justify-center","transition-all duration-300 ease-in-out",u?"flex":"hidden lg:flex"),children:x.jsx("div",{className:"w-full max-w-4xl h-full max-h-full overflow-hidden",children:o?x.jsx(IAe,{user:o,currentUser:e,onBackToChatList:U,isMobile:u}):x.jsx("div",{className:"flex items-center justify-center h-full px-6",children:x.jsxs("div",{className:"text-center max-w-sm mx-auto",children:[x.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-slate-800/50 rounded-full flex items-center justify-center",children:x.jsx(ef,{className:"w-10 h-10 text-slate-600"})}),x.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white mb-3",children:"Select a chat to start messaging"}),x.jsx("p",{className:"text-sm sm:text-base text-slate-400 leading-relaxed",children:"Choose from your active conversations or start a new one"})]})})})})]})},PAe=({user:t,onRequestsUpdated:e})=>{const[n,r]=P.useState([]),[i,s]=P.useState(null);if(P.useEffect(()=>{if(t){const u=$e.getJoinRequestsForFounder(t.id,d=>{r(d),e()});return()=>u()}},[t,e]),n.length===0)return x.jsxs("div",{className:"text-center py-16 px-6 bg-neutral-900 border-2 border-dashed border-neutral-700 rounded-2xl mt-8",children:[x.jsx(io,{className:"w-12 h-12 mx-auto text-neutral-600"}),x.jsx("h3",{className:"text-xl font-semibold mt-4 text-white",children:"No Pending Requests"}),x.jsx("p",{className:"text-neutral-400 mt-2 max-w-md mx-auto",children:"You don't have any pending join requests for your ideas right now."})]});const o=async(u,d)=>{try{await $e.updateJoinRequest(u,d)}catch(f){console.error("Failed to update join request:",f)}},l=async u=>{try{const d=await $e.getUserProfile(u);d?s(d):alert("Could not load developer's profile.")}catch(d){console.error("Error fetching profile:",d),alert("An error occurred while fetching the profile.")}};return x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"bg-neutral-900 border border-neutral-800 rounded-2xl p-6 space-y-4 mt-8",children:[x.jsx("h2",{className:"text-2xl font-bold text-white",children:"Incoming Join Requests"}),x.jsx("ul",{className:"divide-y divide-neutral-800",children:n.map(u=>x.jsxs("li",{className:"py-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[x.jsxs("div",{className:"flex items-center gap-4 cursor-pointer group",onClick:()=>l(u.developerId),children:[x.jsx("img",{src:u.developerAvatar,alt:u.developerName,className:"w-12 h-12 rounded-full"}),x.jsxs("div",{children:[x.jsxs("p",{className:"text-white",children:[x.jsx("span",{className:"font-semibold group-hover:underline",children:u.developerName})," wants to join your idea: ",x.jsx("span",{className:"font-semibold text-purple-400",children:u.ideaTitle})]}),x.jsx("p",{className:"text-sm text-neutral-500",children:new Date(u.timestamp.toString()).toLocaleString()})]})]}),x.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0 self-end sm:self-center",children:[x.jsx("button",{"aria-label":`Approve ${u.developerName}`,onClick:()=>o(u.id,"approved"),className:"p-2 bg-green-600 hover:bg-green-700 rounded-full text-white transition-colors",children:x.jsx(GC,{className:"w-5 h-5"})}),x.jsx("button",{"aria-label":`Reject ${u.developerName}`,onClick:()=>o(u.id,"rejected"),className:"p-2 bg-red-600 hover:bg-red-700 rounded-full text-white transition-colors",children:x.jsx(ha,{className:"w-5 h-5"})})]})]},u.id))})]}),i&&x.jsx(xN,{user:i,onClose:()=>s(null),currentUserId:t.id})]})},NAe=({idea:t,onClose:e,onTeamUpdated:n})=>{const[r,i]=P.useState([]),[s,o]=P.useState(!0);P.useEffect(()=>{(async()=>{o(!0);const d=await Promise.all(t.team.map(f=>$e.getUserProfile(f)));i(d.filter(f=>f!==null)),o(!1)})()},[t]);const l=async u=>{if(window.confirm("Are you sure you want to remove this team member?"))try{await $e.removeTeamMember(t.id,u),n()}catch(d){console.error("Failed to remove team member:",d),alert("An error occurred. Please try again.")}};return x.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex justify-center items-center p-4 animate-fade-in",children:x.jsxs("div",{className:"bg-neutral-900 border border-neutral-800 rounded-2xl shadow-lg w-full max-w-md relative",children:[x.jsxs("div",{className:"p-6 border-b border-neutral-800",children:[x.jsxs("h2",{className:"text-xl font-bold text-white",children:['Manage Team for "',t.title,'"']}),x.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-neutral-500 hover:text-white",children:x.jsx(ha,{className:"w-6 h-6"})})]}),x.jsx("div",{className:"p-6",children:s?x.jsx("p",{className:"text-neutral-400",children:"Loading team members..."}):x.jsx("ul",{className:"space-y-3",children:r.map(u=>x.jsxs("li",{className:"flex items-center justify-between bg-neutral-800/50 p-3 rounded-lg",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("img",{src:u.avatarUrl,alt:u.name,className:"w-10 h-10 rounded-full"}),x.jsxs("div",{children:[x.jsx("p",{className:"font-semibold text-white",children:u.name}),x.jsx("p",{className:"text-sm text-neutral-400",children:u.role})]})]}),u.id!==t.founderId&&x.jsx("button",{onClick:()=>l(u.id),className:"p-2 text-red-500 hover:bg-red-500/10 rounded-full","aria-label":`Remove ${u.name}`,children:x.jsx(_B,{className:"w-5 h-5"})})]},u.id))})})]})})},MAe=({idea:t,open:e,onClose:n})=>{var r,i;return!e||!t?null:x.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60",children:x.jsxs("div",{className:"bg-neutral-900 rounded-2xl border border-neutral-800 w-full max-w-lg mx-2 p-6 relative animate-fadeInUp",children:[x.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-neutral-400 hover:text-white",title:"Close","aria-label":"Close",children:x.jsx(ha,{className:"w-6 h-6"})}),x.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[x.jsx("img",{src:t.founderAvatar,alt:t.founderName,className:"w-14 h-14 rounded-full border-2 border-neutral-700"}),x.jsxs("div",{children:[x.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:t.title}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsxs("span",{className:"text-sm text-neutral-400",children:["by ",t.founderName]}),x.jsx("span",{className:"ml-1 px-2 py-0.5 rounded-full text-xs font-semibold bg-purple-900/60 text-purple-300",children:"Founder"})]})]})]}),x.jsx("p",{className:"text-neutral-300 mb-4 whitespace-pre-line",children:t.description}),t.investmentDetails&&x.jsxs("div",{className:"mb-4 p-3 bg-purple-900/30 border border-purple-800 rounded-lg text-sm",children:[x.jsx("h4",{className:"font-bold text-purple-300 mb-2",children:"Investment Opportunity"}),x.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-neutral-400",children:"Asking:"}),x.jsxs("p",{className:"font-semibold text-white",children:["$",t.investmentDetails.targetInvestment.toLocaleString()]})]}),x.jsxs("div",{children:[x.jsx("p",{className:"text-neutral-400",children:"Equity:"}),x.jsxs("p",{className:"font-semibold text-white",children:[t.investmentDetails.equityOffered,"%"]})]})]})]}),x.jsxs("div",{className:"mb-4",children:[x.jsxs("h4",{className:"font-semibold text-white mb-2 flex items-center gap-2",children:[x.jsx($C,{className:"w-5 h-5 text-purple-400"})," Required Skills:"]}),x.jsx("div",{className:"flex flex-wrap gap-2",children:t.requiredSkills.map(s=>x.jsx("span",{className:"bg-blue-900/50 text-blue-300 text-xs font-medium px-2.5 py-1 rounded-full",children:s},s))})]}),x.jsxs("div",{className:"flex items-center gap-6 mt-4",children:[x.jsxs("div",{className:"flex items-center gap-1.5 text-neutral-400",children:[x.jsx(nf,{className:"w-5 h-5"}),x.jsx("span",{children:((r=t.likes)==null?void 0:r.length)||0})]}),x.jsxs("div",{className:"flex items-center gap-1.5 text-neutral-400",children:[x.jsx(rf,{className:"w-5 h-5"}),x.jsx("span",{children:((i=t.comments)==null?void 0:i.length)||0})]}),x.jsxs("div",{className:"flex items-center gap-1.5 text-green-400",children:[x.jsx(io,{className:"w-5 h-5"}),x.jsxs("span",{children:[t.team.length," team"]})]})]})]})})},DAe=()=>{const[t,e]=P.useState(!1);return P.useEffect(()=>{const n=()=>{e(window.innerWidth>=1024)};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),{enterDuration:t?.5:.2,exitDuration:t?.5:.15}},kAe=({user:t,onIdeaPosted:e,editingIdea:n,onCancelEdit:r})=>{const[i,s]=P.useState(""),[o,l]=P.useState(""),[u,d]=P.useState([]),[f,m]=P.useState(""),[v,_]=P.useState(""),[T,S]=P.useState(""),[A,I]=P.useState(!1),[D,N]=P.useState(null);P.useEffect(()=>{var M,R;n&&(s(n.title),l(n.description),d(n.requiredSkills),_(((M=n.investmentDetails)==null?void 0:M.targetInvestment.toString())||""),S(((R=n.investmentDetails)==null?void 0:R.equityOffered.toString())||""))},[n]);const U=M=>{M.key==="Enter"&&f.trim()&&(M.preventDefault(),u.includes(f.trim())||d([...u,f.trim()]),m(""))},O=M=>{d(u.filter(R=>R!==M))},q=async M=>{if(M.preventDefault(),!i||!o||u.length===0){N("Please fill out all fields and add at least one required skill.");return}if(N(null),I(!0),n){const R={title:i,description:o,requiredSkills:u,investmentDetails:{targetInvestment:parseInt(v,10)||0,equityOffered:parseInt(T,10)||0}};try{await $e.updateIdea(n.id,R),e()}catch(k){N("Failed to update idea. Please try again."),console.error(k)}finally{I(!1)}}else{const R={founderId:t.id,founderName:t.name,founderAvatar:t.avatarUrl,title:i,description:o,requiredSkills:u,status:"recruiting",team:[t.id],likes:[],comments:[],investmentDetails:{targetInvestment:parseInt(v,10)||0,equityOffered:parseInt(T,10)||0}};try{await $e.postIdea(R),s(""),l(""),d([]),m(""),_(""),S(""),e()}catch(k){N("Failed to post idea. Please try again."),console.error(k)}finally{I(!1)}}};return x.jsxs("form",{onSubmit:q,className:"bg-gradient-to-br from-slate-900/90 to-black/90 backdrop-blur-sm p-6 rounded-2xl border border-slate-800/50 shadow-2xl shadow-slate-500/10 space-y-4",children:[x.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[x.jsx(wr,{className:"w-6 h-6 text-amber-400"}),n?"Edit Your Startup Idea":"Post a New Startup Idea"]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-slate-300 mb-1",children:"Idea Title"}),x.jsx("input",{id:"title",type:"text",value:i,onChange:M=>s(M.target.value),placeholder:"e.g., AI-Powered Personal Chef",className:"w-full bg-slate-800/50 border border-slate-700/30 rounded-lg py-2 px-3 text-white focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500/50 transition-all backdrop-blur-sm"})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-slate-300 mb-1",children:"Detailed Description"}),x.jsx("textarea",{id:"description",value:o,onChange:M=>l(M.target.value),placeholder:"Describe your vision, the problem it solves, and your target audience.",rows:4,className:"w-full bg-slate-800/50 border border-slate-700/30 rounded-lg py-2 px-3 text-white focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500/50 transition-all backdrop-blur-sm"})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"skills",className:"block text-sm font-medium text-slate-300 mb-1",children:"Required Skills"}),x.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:u.map(M=>x.jsxs("div",{className:"flex items-center gap-1 bg-purple-900/30 text-purple-300 px-2 py-1 rounded-full text-sm border border-purple-700/30",children:[M,x.jsx("button",{type:"button",onClick:()=>O(M),className:"text-purple-300 hover:text-white",children:""})]},M))}),x.jsx("input",{id:"skills",type:"text",value:f,onChange:M=>m(M.target.value),onKeyDown:U,placeholder:"e.g., React, Python, Marketing... (Press Enter to add)",className:"w-full bg-slate-800/50 border border-slate-700/30 rounded-lg py-2 px-3 text-white focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500/50 transition-all backdrop-blur-sm"})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[x.jsxs("div",{children:[x.jsx("label",{htmlFor:"targetInvestment",className:"block text-sm font-medium text-slate-300 mb-1",children:"Target Investment ($)"}),x.jsx("input",{id:"targetInvestment",type:"number",value:v,onChange:M=>_(M.target.value),placeholder:"e.g., 50000",className:"w-full bg-slate-800/50 border border-slate-700/30 rounded-lg py-2 px-3 text-white focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500/50 transition-all backdrop-blur-sm"})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"equityOffered",className:"block text-sm font-medium text-slate-300 mb-1",children:"Equity Offered (%)"}),x.jsx("input",{id:"equityOffered",type:"number",value:T,onChange:M=>S(M.target.value),placeholder:"e.g., 10",className:"w-full bg-slate-800/50 border border-slate-700/30 rounded-lg py-2 px-3 text-white focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500/50 transition-all backdrop-blur-sm"})]})]}),D&&x.jsx("p",{className:"text-red-400 text-sm",children:D}),x.jsxs("div",{className:"flex gap-4",children:[n&&x.jsx("button",{type:"button",onClick:r,className:"w-full flex items-center justify-center gap-2 bg-slate-700/50 hover:bg-slate-600/50 text-white font-bold py-2 px-4 rounded-lg transition-all duration-200 border border-slate-600/30",children:"Cancel"}),x.jsxs("button",{type:"submit",disabled:A,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-500 hover:to-purple-600 text-white font-bold py-2 px-4 rounded-lg transition-all duration-200 hover:shadow-lg hover:shadow-purple-500/25 disabled:from-slate-600 disabled:to-slate-700 disabled:opacity-50",children:[x.jsx(bB,{className:"w-5 h-5"}),A?n?"Saving...":"Posting...":n?"Save Changes":"Post Idea"]})]})]})},OAe=({idea:t,user:e,onJoinRequest:n,hasPendingRequest:r,onManageTeam:i,joinRequests:s,onLike:o,onComment:l,onDeleteComment:u,onEdit:d,onStartNegotiation:f,negotiationStatuses:m,investorCounts:v,onNavigateToNegotiation:_})=>{var Q,_e,H,ae,le,ce,Ee,Me,je;const T=t.founderId===e.id,S=e.role===ht.Developer&&!t.team.includes(e.id),A=t.team.includes(e.id),I=s.some(xe=>xe.ideaId===t.id&&xe.developerId===e.id&&xe.status==="approved"),[D,N]=P.useState(""),[U,O]=P.useState(!1),[q,M]=P.useState(!1),[R,k]=P.useState(null),[F,j]=P.useState(!1),[G,$]=P.useState(!1),{enterDuration:de}=DAe(),ve=(Q=t.likes)==null?void 0:Q.includes(e.id),Y=xe=>{xe.preventDefault(),D.trim()&&(l(t.id,D),N(""))},se=async()=>{j(!0);try{let xe=null;xe=(await new Promise(Te=>{$e.getNegotiationsForInvestor(e.id,Te)})).find(Te=>Te.ideaId===t.id),xe||(await $e.createNegotiationRequest(t,e),xe=(await new Promise(we=>{$e.getNegotiationsForInvestor(e.id,we)})).find(we=>we.ideaId===t.id)),_&&xe&&_(xe.id)}catch{alert("Failed to open negotiation.")}finally{j(!1)}};return x.jsxs("div",{className:"relative group block p-2 h-full w-full",onMouseEnter:()=>$(!0),onMouseLeave:()=>$(!1),children:[x.jsx(Dl,{mode:"wait",children:G&&x.jsx(nt.span,{className:"absolute inset-0 h-full w-full bg-slate-800/[0.8] block rounded-3xl",layoutId:"ideaHoverBackground",initial:{opacity:0},animate:{opacity:1,transition:{duration:de,ease:"easeOut"}},exit:{opacity:0,transition:{duration:.05,ease:"linear"}},style:{willChange:"opacity, transform",transformOrigin:"center"},layout:!0})}),x.jsxs("div",{className:"relative z-20 bg-gradient-to-br from-slate-900/90 to-black/90 backdrop-blur-sm border border-slate-800/50 rounded-2xl p-4 sm:p-6 transition-all duration-300 hover:border-slate-600/70 hover:shadow-2xl hover:shadow-slate-500/10 h-full flex flex-col",children:[x.jsx("div",{className:"flex items-start justify-between gap-2 sm:gap-4 mb-2 sm:mb-4",children:x.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 min-w-0",children:[x.jsx("img",{src:t.founderAvatar,alt:t.founderName,className:"w-9 h-9 sm:w-12 sm:h-12 rounded-full border-2 border-slate-700 shrink-0 shadow-lg"}),x.jsxs("div",{className:"min-w-0",children:[x.jsx("h3",{className:"text-base sm:text-xl font-bold text-white break-words",children:t.title}),x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsx("span",{className:"text-xs sm:text-sm text-slate-400 truncate",children:t.founderName}),x.jsx("span",{className:bt("ml-1 px-2 py-0.5 rounded-full text-[10px] sm:text-xs font-semibold","bg-purple-900/30 text-purple-300 border border-purple-700/30"),children:"Founder"})]})]})]})}),x.jsxs("div",{className:"flex flex-col gap-1 sm:gap-2 flex-grow",children:[x.jsx("p",{className:"text-slate-300 text-xs sm:text-sm mb-1 sm:mb-2 line-clamp-2 sm:line-clamp-4",children:t.description}),(e.role===ht.Investor||T)&&t.investmentDetails&&x.jsxs("div",{className:"hidden sm:block mb-2 p-3 bg-purple-900/20 border border-purple-800/30 rounded-xl text-xs",children:[x.jsx("h4",{className:"font-bold text-purple-300 mb-2",children:"Investment Details"}),x.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-slate-400 text-xs",children:"Target Investment:"}),x.jsxs("p",{className:"font-semibold text-white text-sm",children:["$",t.investmentDetails.targetInvestment.toLocaleString()]})]}),x.jsxs("div",{children:[x.jsx("p",{className:"text-slate-400 text-xs",children:"Equity Offered:"}),x.jsxs("p",{className:"font-semibold text-white text-sm",children:[t.investmentDetails.equityOffered,"%"]})]})]})]}),!(e.role===ht.Investor||e.role==="investor")&&x.jsxs("div",{className:"hidden sm:block",children:[x.jsxs("h4",{className:"font-semibold text-white mb-2 flex items-center gap-1 text-xs",children:[x.jsx($C,{className:"w-4 h-4 text-emerald-400"})," Required Skills:"]}),x.jsx("div",{className:"flex flex-wrap gap-1",children:t.requiredSkills.map(xe=>x.jsx("span",{className:bt("bg-blue-900/30 text-blue-300 text-[10px] font-medium px-2 py-1 rounded-full border border-blue-700/30"),children:xe},xe))})]}),!T&&v&&v[t.id]>0&&x.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[x.jsx(io,{className:"w-4 h-4 text-emerald-400"}),x.jsxs("span",{className:"text-emerald-300 text-xs font-semibold",children:[v[t.id]," investor",v[t.id]>1?"s":""," invested"]})]})]}),T?null:x.jsx("div",{className:"sm:hidden",children:x.jsxs("div",{className:"absolute bottom-3 right-3 flex items-center gap-2 bg-slate-900/80 rounded-xl px-2 py-1 shadow-lg z-10",children:[x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsx("button",{onClick:xe=>{xe.stopPropagation(),o(t.id)},title:ve?"Unlike":"Like",className:`transition-colors ${ve?"text-red-500":"text-slate-400 hover:text-red-500"}`,children:x.jsx(nf,{className:"w-5 h-5",fill:ve?"currentColor":"none"})}),x.jsx("span",{className:"text-xs text-slate-400 min-w-[16px] text-center",children:((_e=t.likes)==null?void 0:_e.length)||0})]}),x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsx("button",{onClick:xe=>{xe.stopPropagation(),O(!U)},title:"Toggle comments",className:"text-slate-400 hover:text-blue-500 transition-colors",children:x.jsx(rf,{className:"w-5 h-5"})}),x.jsx("span",{className:"text-xs text-slate-400 min-w-[16px] text-center",children:((H=t.comments)==null?void 0:H.length)||0})]})]})}),x.jsx("div",{className:"mt-2 sm:mt-4 pt-2 sm:pt-4 border-t border-slate-700/30",children:x.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-2 sm:gap-4",children:[x.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-slate-400",children:[T?x.jsx("span",{className:"text-xs sm:text-sm font-semibold text-purple-400",children:"Your Idea"}):A||I?x.jsxs("span",{className:"flex items-center gap-1 text-xs sm:text-sm font-semibold text-emerald-400",children:[x.jsx(GC,{className:"w-5 h-5"}),"Joined"]}):r?x.jsx("span",{className:"text-xs sm:text-sm font-semibold text-amber-400",children:"Request Sent"}):S?x.jsxs("span",{className:"flex items-center gap-2",children:[x.jsx("button",{onClick:xe=>{xe.stopPropagation(),n(t)},className:"bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white font-bold py-1 px-2 sm:py-2 sm:px-4 rounded-lg transition-all duration-200 hover:shadow-lg hover:shadow-emerald-500/25 text-xs sm:text-sm",children:"Send Join Request"}),x.jsxs("span",{className:"hidden sm:inline-flex items-center gap-2 ml-2",children:[x.jsx("button",{onClick:xe=>{xe.stopPropagation(),o(t.id)},title:ve?"Unlike":"Like",className:`transition-colors ${ve?"text-red-500":"text-slate-400 hover:text-red-500"}`,children:x.jsx(nf,{className:"w-5 h-5 sm:w-6 sm:h-6",fill:ve?"currentColor":"none"})}),x.jsx("span",{className:"text-xs sm:text-sm text-slate-400 min-w-[16px] text-center",children:((ae=t.likes)==null?void 0:ae.length)||0}),x.jsx("button",{onClick:xe=>{xe.stopPropagation(),O(!U)},title:"Toggle comments",className:"text-slate-400 hover:text-blue-500 transition-colors",children:x.jsx(rf,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),x.jsx("span",{className:"text-xs sm:text-sm text-slate-400 min-w-[16px] text-center",children:((le=t.comments)==null?void 0:le.length)||0})]})]}):null,e.role===ht.Investor&&!T&&m&&x.jsxs("span",{className:"flex items-center gap-2",children:[m[t.id]&&x.jsx("span",{className:bt("text-[10px] sm:text-xs font-semibold px-1.5 py-0.5 rounded-full",m[t.id]==="accepted"?"bg-emerald-900/30 text-emerald-300 border border-emerald-700/30":m[t.id]==="declined"?"bg-red-900/30 text-red-300 border border-red-700/30":m[t.id]==="active"?"bg-amber-900/30 text-amber-300 border border-amber-700/30":"bg-slate-800 text-slate-400"),children:m[t.id].charAt(0).toUpperCase()+m[t.id].slice(1)}),x.jsx("button",{onClick:xe=>{xe.stopPropagation(),se()},className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 text-white font-bold py-1 px-2 sm:py-1 sm:px-3 rounded-lg transition-all duration-200 hover:shadow-lg hover:shadow-blue-500/25 text-xs sm:text-xs whitespace-nowrap leading-none",disabled:F,children:F?"Loading...":"Open Negotiation"}),x.jsxs("span",{className:"hidden sm:inline-flex items-center gap-2 ml-2",children:[x.jsx("button",{onClick:xe=>{xe.stopPropagation(),o(t.id)},title:ve?"Unlike":"Like",className:`transition-colors ${ve?"text-red-500":"text-slate-400 hover:text-red-500"}`,children:x.jsx(nf,{className:"w-5 h-5 sm:w-6 sm:h-6",fill:ve?"currentColor":"none"})}),x.jsx("span",{className:"text-xs sm:text-sm text-slate-400 min-w-[16px] text-center",children:((ce=t.likes)==null?void 0:ce.length)||0}),x.jsx("button",{onClick:xe=>{xe.stopPropagation(),O(!U)},title:"Toggle comments",className:"text-slate-400 hover:text-blue-500 transition-colors",children:x.jsx(rf,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),x.jsx("span",{className:"text-xs sm:text-sm text-slate-400 min-w-[16px] text-center",children:((Ee=t.comments)==null?void 0:Ee.length)||0})]})]})]}),T?x.jsxs("div",{className:"w-full sm:w-auto mt-1 sm:mt-0 flex flex-col gap-1",children:[v&&v[t.id]>0&&x.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[x.jsx(io,{className:"w-4 h-4 text-emerald-400"}),x.jsxs("span",{className:"text-emerald-300 text-xs font-semibold",children:[v[t.id]," investor",v[t.id]>1?"s":""," invested"]})]}),x.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[x.jsx("button",{onClick:xe=>{xe.stopPropagation(),i(t)},className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 text-white font-bold py-1 px-3 sm:py-2 sm:px-4 rounded-lg transition-all duration-200 hover:shadow-lg hover:shadow-blue-500/25 text-xs sm:text-sm whitespace-nowrap min-w-[90px] max-w-[120px]",children:"Manage Team"}),x.jsxs("div",{className:"flex items-center gap-1 bg-slate-800/50 rounded-xl px-2 py-1 shadow-lg z-10",children:[x.jsx("button",{onClick:xe=>{xe.stopPropagation(),o(t.id)},title:ve?"Unlike":"Like",className:`transition-colors ${ve?"text-red-500":"text-slate-400 hover:text-red-500"}`,children:x.jsx(nf,{className:"w-5 h-5",fill:ve?"currentColor":"none"})}),x.jsx("span",{className:"text-xs text-slate-400 min-w-[16px] text-center",children:((Me=t.likes)==null?void 0:Me.length)||0}),x.jsx("button",{onClick:xe=>{xe.stopPropagation(),O(!U)},title:"Toggle comments",className:"text-slate-400 hover:text-blue-500 transition-colors",children:x.jsx(rf,{className:"w-5 h-5"})}),x.jsx("span",{className:"text-xs text-slate-400 min-w-[16px] text-center",children:((je=t.comments)==null?void 0:je.length)||0}),x.jsx("button",{onClick:xe=>{xe.stopPropagation(),d(t)},title:"Edit idea",className:"text-slate-400 hover:text-purple-400",children:x.jsx(yne,{className:"w-5 h-5"})})]})]})]}):null]})}),U&&x.jsxs("div",{className:"mt-2 sm:mt-4 pt-2 sm:pt-4 border-t border-slate-700/30",children:[x.jsx("h5",{className:"font-bold text-white mb-2 text-xs sm:text-base",children:"Comments"}),x.jsx("div",{className:"space-y-2 sm:space-y-3 max-h-32 sm:max-h-48 overflow-y-auto pr-2",children:t.comments&&t.comments.length>0?t.comments.map(xe=>x.jsxs("div",{className:"flex items-start gap-2 group",children:[x.jsx("img",{src:xe.userAvatar,alt:xe.userName,className:"w-7 h-7 sm:w-8 sm:h-8 rounded-full"}),x.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-2 text-xs sm:text-sm w-full border border-slate-700/30",children:[x.jsxs("div",{className:"flex justify-between items-start",children:[x.jsx("p",{className:"font-semibold text-white truncate",children:xe.userName}),T&&x.jsx("button",{onClick:()=>u(t.id,xe),title:"Delete comment",className:"text-slate-500 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:x.jsx(_B,{className:"w-4 h-4"})})]}),x.jsx("p",{className:"text-slate-300 break-words",children:xe.text})]})]},xe.id)):x.jsx("p",{className:"text-slate-400 text-xs sm:text-sm",children:"No comments yet."})}),x.jsxs("form",{onSubmit:Y,className:"mt-2 sm:mt-3 flex gap-2",children:[x.jsx("input",{type:"text",value:D,onChange:xe=>N(xe.target.value),placeholder:"Add a comment...",className:"flex-grow bg-slate-800/50 border border-slate-700/30 rounded-lg py-1 px-2 sm:py-1.5 sm:px-3 text-white text-xs sm:text-sm focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500/50 transition-all backdrop-blur-sm"}),x.jsx("button",{type:"submit",className:"bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-500 hover:to-purple-600 text-white font-bold py-1 px-2 sm:py-1.5 sm:px-4 rounded-lg text-xs sm:text-sm transition-all duration-200 hover:shadow-lg hover:shadow-purple-500/25",children:"Post"})]})]}),q&&R&&x.jsx(bN,{negotiation:R,currentUser:e,onClose:()=>M(!1),onOfferMade:async xe=>{await $e.addOfferToNegotiation(R.id,xe);const Te=(await new Promise(we=>{$e.getNegotiationsForInvestor(e.id,we)})).find(we=>we.ideaId===t.id);k(Te)},onStatusChange:async xe=>{await $e.updateNegotiationStatus(R.id,xe);const Te=(await new Promise(we=>{$e.getNegotiationsForInvestor(e.id,we)})).find(we=>we.ideaId===t.id);k(Te)}})]})]})},VAe=({user:t,onNavigateToNegotiation:e})=>{var ot,Te;const[n,r]=P.useState([]),i=yc.useRef(null),[s,o]=P.useState(null),[l,u]=P.useState(!0),[d,f]=P.useState([]),[m,v]=P.useState(!0),[_,T]=P.useState(null),[S,A]=P.useState(!1),[I,D]=P.useState(null),[N,U]=P.useState("ideas"),[O,q]=P.useState(null),[M,R]=P.useState(null),[k,F]=P.useState({}),[j,G]=P.useState({}),[$,de]=P.useState(null),[ve,Y]=P.useState(!1),se=async()=>{if(i.current){r(i.current.ideas),o(i.current.lastDoc),u(i.current.hasMore),v(!1);return}v(!0);try{const{ideas:we,lastDoc:Pe,hasMore:ue}=await $e.getIdeasPaginated();r(we),o(Pe),u(ue),i.current={ideas:we,lastDoc:Pe,hasMore:ue}}catch(we){T("Could not load data. Please try again later."),console.error(we)}finally{v(!1)}};P.useEffect(()=>{N==="ideas"&&se()},[t,N]);const Q=async()=>{if(!(!s||!l)){v(!0);try{const{ideas:we,lastDoc:Pe,hasMore:ue}=await $e.getIdeasPaginated(s);r(It=>{const it=[...It,...we];return i.current={ideas:it,lastDoc:Pe,hasMore:ue},it}),o(Pe),u(ue)}catch{T("Could not load more ideas.")}finally{v(!1)}}};P.useEffect(()=>{if(t.role===ht.Investor||t.role==="investor")return $e.getNegotiationsForInvestor(t.id,we=>{const Pe={};we.forEach(ue=>{Pe[ue.ideaId]=ue.status}),F(Pe)})},[t.id,t.role]),P.useEffect(()=>{$e.getAcceptedInvestorCountForIdeas().then(G)},[]);const _e=()=>{A(!1),D(null),i.current=null,se()},H=we=>{D(we),A(!0)},ae=()=>{D(null),A(!1)},le=async we=>{try{await $e.createJoinRequest(we,t),f(Pe=>[...Pe,{id:"temp-id",ideaId:we.id,ideaTitle:we.title,developerId:t.id,developerName:t.name,developerAvatar:t.avatarUrl,founderId:we.founderId,status:"pending",timestamp:new Date}])}catch(Pe){console.error("Failed to send join request:",Pe),alert("Failed to send join request. Please try again.")}},ce=()=>{i.current=null,se()},Ee=async we=>{try{await $e.toggleLikeIdea(we,t.id),r(Pe=>Pe.map(ue=>{var It;if(ue.id===we){const it=(It=ue.likes)==null?void 0:It.includes(t.id),Wt=ue.likes||[];return{...ue,likes:it?Wt.filter(un=>un!==t.id):[...Wt,t.id]}}return ue}))}catch(Pe){console.error("Failed to like idea:",Pe)}},Me=async(we,Pe)=>{try{const ue={userId:t.id,userName:t.name,userAvatar:t.avatarUrl,text:Pe,timestamp:new Date};await $e.addCommentToIdea(we,ue),i.current=null,se()}catch(ue){console.error("Failed to add comment:",ue)}},je=async(we,Pe)=>{if(window.confirm("Are you sure you want to delete this comment?"))try{await $e.deleteCommentFromIdea(we,Pe),i.current=null,se()}catch(ue){console.error("Failed to delete comment:",ue)}},xe=[];return x.jsxs("div",{className:"space-y-8 mt-9",children:[x.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[x.jsx("h1",{className:"text-3xl font-bold text-white",children:"Idea Marketplace"}),t.role===ht.Founder&&!S&&x.jsxs("button",{onClick:()=>A(!0),className:"flex items-center gap-2 bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-500 hover:to-purple-600 text-white font-bold py-2 px-5 rounded-lg transition-all duration-200 hover:shadow-lg hover:shadow-purple-500/25",children:[x.jsx(bB,{className:"w-5 h-5"}),"Post New Idea"]})]}),S&&x.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:x.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-black rounded-2xl shadow-2xl p-0 w-full max-w-lg mx-2 relative border border-slate-800/50",children:[x.jsx("button",{className:"absolute top-3 right-3 text-slate-400 hover:text-white text-2xl font-bold z-10 transition-colors",onClick:ae,"aria-label":"Close edit form",children:""}),x.jsx(kAe,{user:t,onIdeaPosted:_e,editingIdea:I,onCancelEdit:ae})]})}),t.role===ht.Founder&&x.jsxs("div",{className:"border-b border-slate-700/30 flex space-x-4",children:[x.jsx("button",{onClick:()=>U("ideas"),className:`py-2 px-4 text-sm font-medium transition-colors ${N==="ideas"?"text-white border-b-2 border-purple-500":"text-slate-400 hover:text-white"}`,children:"Browse Ideas"}),x.jsx("button",{onClick:()=>U("requests"),className:`py-2 px-4 text-sm font-medium transition-colors ${N==="requests"?"text-white border-b-2 border-emerald-500":"text-slate-400 hover:text-white"}`,children:"Join Requests"})]}),N==="ideas"&&x.jsxs(x.Fragment,{children:[m&&x.jsx("div",{className:"flex justify-center items-center h-64",children:x.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-purple-500"})}),_&&x.jsx("p",{className:"text-center text-red-400",children:_}),!m&&!_&&x.jsxs(x.Fragment,{children:[n.length===0&&x.jsxs("div",{className:"text-center py-16 px-6 bg-gradient-to-br from-slate-900/50 to-black/50 border-2 border-dashed border-slate-700/30 rounded-2xl backdrop-blur-sm",children:[x.jsx(wr,{className:"w-12 h-12 mx-auto text-slate-600"}),x.jsx("h3",{className:"text-xl font-semibold mt-4 text-white",children:"No Ideas Yet"}),x.jsx("p",{className:"text-slate-400 mt-2 max-w-md mx-auto",children:t.role===ht.Founder?"Be the first to share your vision! Post a startup idea to attract talented developers.":"No ideas have been posted yet. Check back soon to find exciting projects to join."})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[n.map(we=>x.jsx("div",{className:"cursor-pointer group",tabIndex:0,role:"button","aria-label":`View details for ${we.title}`,onClick:Pe=>{const ue=Pe.target.tagName.toLowerCase();ue!=="button"&&ue!=="svg"&&ue!=="path"&&ue!=="input"&&ue!=="textarea"&&ue!=="a"&&(de(we),Y(!0))},onKeyDown:Pe=>{(Pe.key==="Enter"||Pe.key===" ")&&(de(we),Y(!0))},children:x.jsx(OAe,{idea:we,user:t,onJoinRequest:le,hasPendingRequest:xe.includes(we.id),onManageTeam:q,joinRequests:d,onLike:Ee,onComment:Me,onDeleteComment:je,onEdit:H,onStartNegotiation:R,negotiationStatuses:k,investorCounts:j,onNavigateToNegotiation:e})},we.id)),$&&x.jsx(yc.Suspense,{fallback:null,children:x.jsx(MAe,{idea:$,open:ve,onClose:()=>{Y(!1),setTimeout(()=>de(null),200)}})})]}),l&&x.jsx("div",{className:"flex justify-center mt-6",children:x.jsx("button",{onClick:Q,className:"bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-500 hover:to-purple-600 text-white font-bold py-2 px-6 rounded-lg transition-all duration-200 hover:shadow-lg hover:shadow-purple-500/25",disabled:m,children:m?"Loading...":"Load More Ideas"})}),O&&x.jsx(NAe,{idea:O,onClose:()=>q(null),onTeamUpdated:()=>{q(null),i.current=null,se()}}),M&&(t.role===ht.Investor||t.id===M.founderId)&&x.jsx(bN,{startupName:M.title,founderName:M.founderName,investorName:t.role===ht.Investor?t.name:"Investor",currentUser:t,onClose:()=>R(null),initialInvestment:(ot=M.investmentDetails)==null?void 0:ot.targetInvestment,initialEquity:(Te=M.investmentDetails)==null?void 0:Te.equityOffered})]})]}),t.role===ht.Founder&&N==="requests"&&x.jsxs("div",{className:"mt-8",children:[x.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Approve Developer Join Requests"}),x.jsx(PAe,{user:t,joinRequests:d,onRequestsUpdated:ce})]})]})},LAe=({request:t,onUpdateRequest:e})=>x.jsxs("div",{className:"bg-neutral-900 border border-neutral-800 rounded-2xl p-4 flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("img",{src:t.fromUserAvatar,alt:t.fromUserName,className:"w-16 h-16 rounded-full border-2 border-neutral-700"}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-bold text-white",children:t.fromUserName}),x.jsx("p",{className:"text-sm text-neutral-400",children:t.fromUserRole})]})]}),x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("button",{onClick:()=>e(t.id,"approved"),className:"p-3 rounded-full bg-green-600/20 hover:bg-green-600/40 text-green-400 transition-colors","aria-label":`Approve ${t.fromUserName}`,children:x.jsx(GC,{className:"w-6 h-6"})}),x.jsx("button",{onClick:()=>e(t.id,"rejected"),className:"p-3 rounded-full bg-red-600/20 hover:bg-red-600/40 text-red-400 transition-colors","aria-label":`Reject ${t.fromUserName}`,children:x.jsx(ha,{className:"w-6 h-6"})})]})]}),UAe=({request:t,onWithdrawRequest:e})=>x.jsxs("div",{className:"bg-neutral-900 border border-neutral-800 rounded-2xl p-4 flex items-center justify-between",children:[x.jsx("div",{className:"flex items-center gap-4",children:x.jsxs("div",{children:[x.jsxs("h3",{className:"text-lg font-bold text-white",children:["Request to ",t.fromUserName,"..."]}),x.jsxs("p",{className:`text-sm font-semibold ${t.status==="pending"?"text-yellow-400":t.status==="approved"?"text-green-400":"text-red-400"}`,children:["Status: ",t.status]})]})}),t.status==="pending"&&x.jsxs("button",{onClick:()=>e(t.id),className:"flex items-center gap-2 bg-neutral-700 hover:bg-neutral-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors","aria-label":`Withdraw request to ${t.fromUserName}`,children:[x.jsx(pne,{className:"w-5 h-5"}),"Withdraw"]})]}),FAe=({incomingRequests:t,sentRequests:e})=>{const[n,r]=P.useState("incoming"),i=async(l,u)=>{try{await $e.updateConnectionRequest(l,u)}catch(d){console.error(`Failed to ${u} request:`,d),alert(`Could not ${u} the request. Please try again.`)}},s=async l=>{if(window.confirm("Are you sure you want to withdraw this connection request?"))try{await $e.withdrawConnectionRequest(l)}catch(u){console.error("Failed to withdraw request:",u),alert("Could not withdraw the request. Please try again.")}},o=t.filter(l=>l.status==="pending");return x.jsxs("div",{className:"space-y-8 mt-9",children:[x.jsx("h1",{className:"text-3xl font-bold text-white",children:"Connection Requests"}),x.jsxs("div",{className:"border-b border-neutral-800 flex space-x-4",children:[x.jsxs("button",{onClick:()=>r("incoming"),className:`py-2 px-4 text-sm font-medium transition-colors relative ${n==="incoming"?"text-white border-b-2 border-purple-500":"text-neutral-400 hover:text-white"}`,children:["Incoming",o.length>0&&x.jsx("span",{className:"absolute top-1 right-0 -mt-1 -mr-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-xs text-white",children:o.length})]}),x.jsx("button",{onClick:()=>r("sent"),className:`py-2 px-4 text-sm font-medium transition-colors ${n==="sent"?"text-white border-b-2 border-purple-500":"text-neutral-400 hover:text-white"}`,children:"Sent"})]}),n==="incoming"&&x.jsx(x.Fragment,{children:o.length>0?x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:o.map(l=>x.jsx(LAe,{request:l,onUpdateRequest:i},l.id))}):x.jsxs("div",{className:"text-center py-16 px-6 bg-neutral-900 border-2 border-dashed border-neutral-700 rounded-2xl",children:[x.jsx("h3",{className:"text-xl font-semibold mt-4 text-white",children:"No Pending Incoming Requests"}),x.jsx("p",{className:"text-neutral-400 mt-2 max-w-md mx-auto",children:"You have no new connection requests right now."})]})}),n==="sent"&&x.jsx(x.Fragment,{children:e.length>0?x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.map(l=>x.jsx(UAe,{request:l,onWithdrawRequest:s},l.id))}):x.jsxs("div",{className:"text-center py-16 px-6 bg-neutral-900 border-2 border-dashed border-neutral-700 rounded-2xl",children:[x.jsx("h3",{className:"text-xl font-semibold mt-4 text-white",children:"No Sent Requests"}),x.jsx("p",{className:"text-neutral-400 mt-2 max-w-md mx-auto",children:"You haven't sent any connection requests yet."})]})})]})},jAe=({connections:t,currentUser:e,onMessage:n,onRemoveConnection:r})=>{const[i,s]=P.useState(null),[o,l]=P.useState(!1),u=m=>{o||s(m)},d=()=>{s(null)},f=(m,v)=>{m.stopPropagation(),window.confirm(`Are you sure you want to remove ${v.name} from your connections?`)&&r(v)};return x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"space-y-8 mt-10",children:[x.jsx("div",{className:"bg-neutral-900/50 border border-neutral-800 rounded-2xl p-6",children:x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsxs("div",{children:[x.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[x.jsx(io,{className:"w-8 h-8 text-purple-400"}),"Your People"]}),x.jsx("p",{className:"text-neutral-400 mt-2",children:"Browse and manage your connections."})]}),x.jsx("button",{onClick:()=>l(!o),className:"bg-neutral-800 hover:bg-neutral-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-300",children:o?"Done":"Manage"})]})}),t.length>0?x.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:t.map(m=>x.jsxs("div",{onClick:()=>u(m),className:"relative bg-neutral-900 p-5 rounded-2xl flex flex-col items-center text-center cursor-pointer hover:bg-neutral-800 transition-all duration-300 border border-neutral-800 hover:border-purple-500 transform hover:-translate-y-1",children:[o&&x.jsx("button",{onClick:v=>f(v,m),className:"absolute top-2 right-2 text-neutral-500 hover:text-red-500 transition-colors z-10","aria-label":`Remove ${m.name}`,children:x.jsx(wB,{className:"w-6 h-6"})}),x.jsx("img",{src:m.avatarUrl,alt:m.name,className:"w-24 h-24 rounded-full mb-4 border-4 border-neutral-700"}),x.jsx("h3",{className:"font-semibold text-white text-lg",children:m.name}),x.jsx("p",{className:"text-sm text-purple-400",children:m.role}),x.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:m.location})]},m.id))}):x.jsxs("div",{className:"text-center py-16 px-6 bg-neutral-900 border-2 border-dashed border-neutral-700 rounded-2xl",children:[x.jsx(io,{className:"w-12 h-12 mx-auto text-neutral-600"}),x.jsx("h3",{className:"text-xl font-semibold mt-4 text-white",children:"No Connections Yet"}),x.jsx("p",{className:"text-neutral-400 mt-2 max-w-md mx-auto",children:"You haven't made any connections. Start by finding matches on the dashboard and sending connection requests!"})]})]}),i&&x.jsx(xN,{user:i,onClose:d,isOwnProfile:i.id===e.id,onMessage:n,onConnect:()=>{},currentUserId:e.id})]})};function BAe({isDomainError:t}){return x.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mt-4",role:"alert",children:[x.jsx("strong",{className:"font-bold",children:"API Key Error: "}),t?x.jsx("span",{className:"block sm:inline",children:"Your domain is not authorized to use this API key. Please check your Firebase and Gemini API settings."}):x.jsx("span",{className:"block sm:inline",children:"API key is missing or invalid. Please set up your environment variables correctly."})]})}const ti=({currentView:t,targetView:e,setView:n,children:r,icon:i,pendingCount:s})=>{const o=t===e;return x.jsxs("div",{className:`flex items-center space-x-3 px-4 py-3 rounded-lg cursor-pointer transition-colors duration-200 ${o?"bg-purple-600 text-white font-semibold shadow-lg":"text-neutral-300 hover:bg-neutral-700/50 hover:text-white"}`,onClick:()=>n(e),children:[x.jsx(i,{className:"w-6 h-6"}),x.jsx("span",{className:"flex-grow",children:r}),s&&s>0&&x.jsx("span",{className:"bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:s})]})},qAe=({currentView:t,setView:e,userProfile:n,onLogout:r,pendingRequestCount:i,isMobileChatOpen:s=!1,isMobileNegotiationOpen:o=!1})=>{const[l,u]=P.useState(!1),[d,f]=P.useState(!1),[m,v]=P.useState(!1),_=S(),T=A=>{e(n?A:Se.AUTH)};if(P.useEffect(()=>{if(d)v(!0);else{const A=setTimeout(()=>v(!1),300);return()=>clearTimeout(A)}},[d]),!n)return x.jsx("header",{className:"fixed top-0 left-0 right-0 bg-white/5 backdrop-blur-sm z-50 border-b border-white/10 shadow-lg",children:x.jsx("nav",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:x.jsxs("div",{className:"flex items-center justify-between h-16",children:[x.jsxs("div",{className:"flex items-center space-x-2 cursor-pointer",onClick:()=>e(Se.LANDING),children:[x.jsx(Zd,{className:"h-8 w-8 text-purple-500"}),x.jsx("span",{className:"font-bold text-xl text-white",children:"Grow With Me"})]}),x.jsxs("button",{onClick:()=>e(Se.AUTH),className:"flex items-center gap-2 bg-neutral-800 hover:bg-neutral-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-300",children:[x.jsx(mne,{className:"w-5 h-5"}),"Login"]})]})})});function S(){const[A,I]=P.useState(!0),D=P.useRef(0);return P.useEffect(()=>{const N=()=>{const U=window.scrollY;if(U<10){I(!0),D.current=U;return}U>D.current&&U-D.current>10?I(!1):U<D.current&&D.current-U>10&&I(!0),D.current=U};return window.addEventListener("scroll",N,{passive:!0}),()=>window.removeEventListener("scroll",N)},[]),A}return x.jsxs(x.Fragment,{children:[!s&&!o&&x.jsxs("header",{className:"lg:hidden fixed top-0 left-0 right-0 bg-white/10 backdrop-blur-sm z-50 border-b border-white/10 shadow-lg flex items-center h-16 px-4 justify-between",children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx("button",{onClick:()=>f(!0),className:"p-2 rounded-lg hover:bg-neutral-800 focus:outline-none mr-2 sm:block hidden lg:hidden",title:"Open menu",children:x.jsx(une,{className:"w-7 h-7 text-white"})}),x.jsxs("div",{className:"flex items-center space-x-2 cursor-pointer",onClick:()=>e(Se.LANDING),children:[x.jsx(Zd,{className:"h-8 w-8 text-purple-500"}),x.jsx("span",{className:"font-bold text-xl text-white",children:"Grow With Me"})]})]}),x.jsx("div",{className:"flex items-center",children:x.jsxs("div",{className:"relative",children:[x.jsx("img",{src:n.avatarUrl,alt:n.name,className:"w-9 h-9 rounded-full border-2 border-neutral-700 cursor-pointer",onClick:()=>u(!l)}),l&&x.jsxs("div",{className:"absolute right-0 mt-2 w-44 bg-neutral-800 rounded-lg shadow-lg py-1 border border-neutral-700 animate-fade-in-scale-sm z-50",children:[x.jsx("a",{href:"#",onClick:A=>{A.preventDefault(),e(Se.ONBOARDING),u(!1),f(!1)},className:"block px-4 py-2 text-sm text-neutral-300 hover:bg-neutral-700",children:"My Profile"}),x.jsxs("a",{href:"#",onClick:A=>{A.preventDefault(),T(Se.PEOPLE),u(!1),f(!1)},className:`block px-4 py-2 text-sm hover:bg-neutral-700 flex items-center gap-2 ${t===Se.PEOPLE?"text-purple-400":"text-neutral-300"}`,children:[x.jsx(io,{className:"w-4 h-4"})," People"]}),x.jsxs("a",{href:"#",onClick:A=>{A.preventDefault(),T(Se.REQUESTS),u(!1),f(!1)},className:`block px-4 py-2 text-sm hover:bg-neutral-700 flex items-center gap-2 ${t===Se.REQUESTS?"text-purple-400":"text-neutral-300"}`,children:[i>0&&x.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full px-1 mr-1",children:i}),x.jsx(_l,{className:"w-4 h-4"})," Requests"]}),x.jsxs("a",{href:"#",onClick:A=>{A.preventDefault(),r(),u(!1),f(!1)},className:"block px-4 py-2 text-sm text-red-400 hover:bg-neutral-700 flex items-center gap-2",children:[x.jsx(LT,{className:"w-4 h-4"})," Logout"]})]})]})})]}),!s&&!o&&x.jsxs("nav",{className:`fixed bottom-0 left-0 right-0 z-50 bg-white/10 backdrop-blur-sm border-t border-white/10 shadow-lg flex justify-between items-center h-16 px-1 sm:hidden lg:hidden gap-1 transition-transform duration-300 ${_?"translate-y-0":"translate-y-full"}`,children:[x.jsxs("button",{onClick:()=>T(Se.DASHBOARD),className:`flex flex-col items-center flex-1 py-1 mx-0.5 ${t===Se.DASHBOARD?"text-purple-400":"text-neutral-300"}`,children:[" ",x.jsx(p0,{className:"w-5 h-5 mb-0.5"})," ",x.jsx("span",{className:"text-[11px] leading-tight",children:"Dashboard"})," "]}),x.jsxs("button",{onClick:()=>T(Se.ANALYTICS),className:`flex flex-col items-center flex-1 py-1 mx-0.5 ${t===Se.ANALYTICS?"text-purple-400":"text-neutral-300"}`,children:[" ",x.jsx(UT,{className:"w-5 h-5 mb-0.5"})," ",x.jsx("span",{className:"text-[11px] leading-tight",children:"Analytics"})," "]}),x.jsxs("button",{onClick:()=>T(Se.MESSAGES),className:`flex flex-col items-center flex-1 py-1 mx-0.5 ${t===Se.MESSAGES?"text-purple-400":"text-neutral-300"}`,children:[" ",x.jsx(yf,{className:"w-5 h-5 mb-0.5"})," ",x.jsx("span",{className:"text-[11px] leading-tight",children:"Messages"})," "]}),x.jsxs("button",{onClick:()=>T(Se.IDEAS),className:`flex flex-col items-center flex-1 py-1 mx-0.5 ${t===Se.IDEAS?"text-purple-400":"text-neutral-300"}`,children:[" ",x.jsx(wr,{className:"w-5 h-5 mb-0.5"})," ",x.jsx("span",{className:"text-[11px] leading-tight",children:"Ideas"})," "]}),x.jsxs("button",{onClick:()=>T(Se.NEGOTIATIONS),className:`flex flex-col items-center flex-1 py-1 mx-0.5 ${t===Se.NEGOTIATIONS?"text-purple-400":"text-neutral-300"}`,children:[" ",x.jsx(wr,{className:"w-5 h-5 mb-0.5"})," ",x.jsx("span",{className:"text-[11px] leading-tight",children:"Negotiations"})," "]})]}),(d||m)&&x.jsxs("div",{className:"fixed inset-0 z-50 lg:hidden",children:[x.jsx("div",{className:"fixed inset-0 bg-white/10 backdrop-blur-sm transition-opacity duration-300 opacity-100 pointer-events-auto",onClick:()=>f(!1)}),x.jsxs("aside",{className:`relative w-64 bg-white/5 backdrop-blur-sm border-r border-white/10 shadow-lg text-white p-4 flex flex-col h-full z-50 transform transition-transform duration-300 ${d?"translate-x-0":"-translate-x-full"} pointer-events-auto`,style:{minWidth:"16rem"},children:[x.jsxs("div",{className:"absolute inset-0 -z-10 pointer-events-none",children:[x.jsx("div",{className:"absolute top-1/4 left-1/4 w-32 h-32 bg-emerald-500/10 rounded-full blur-2xl animate-pulse-slow"}),x.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-40 h-40 bg-purple-500/10 rounded-full blur-2xl animate-pulse-slow",style:{animationDelay:"2s"}})]}),x.jsxs("div",{className:"flex items-center justify-between mb-10 px-2",children:[x.jsxs("div",{className:"flex items-center space-x-2 cursor-pointer",onClick:()=>{e(Se.LANDING),f(!1)},children:[x.jsx(Zd,{className:"h-8 w-8 text-purple-500"}),x.jsx("span",{className:"font-bold text-xl text-white",children:"Grow With Me"})]}),x.jsx("button",{onClick:()=>f(!1),className:"p-2 rounded-lg hover:bg-neutral-800 focus:outline-none",title:"Close menu",children:x.jsx(ha,{className:"w-6 h-6 text-white"})})]}),x.jsx("nav",{className:"flex-grow",children:x.jsxs("ul",{className:"space-y-2",children:[x.jsx("li",{children:x.jsx(ti,{currentView:t,targetView:Se.DASHBOARD,setView:A=>{T(A),f(!1)},icon:p0,children:"Dashboard"})}),x.jsx("li",{children:x.jsx(ti,{currentView:t,targetView:Se.ANALYTICS,setView:A=>{T(A),f(!1)},icon:UT,children:"Analytics"})}),x.jsx("li",{children:x.jsx(ti,{currentView:t,targetView:Se.MESSAGES,setView:A=>{T(A),f(!1)},icon:yf,children:"Messages"})}),x.jsx("li",{children:x.jsx(ti,{currentView:t,targetView:Se.IDEAS,setView:A=>{T(A),f(!1)},icon:wr,children:"Ideas"})}),x.jsx("li",{children:x.jsx(ti,{currentView:t,targetView:Se.PEOPLE,setView:A=>{T(A),f(!1)},icon:io,children:"People"})}),x.jsx("li",{children:x.jsx(ti,{currentView:t,targetView:Se.REQUESTS,setView:A=>{T(A),f(!1)},icon:_l,pendingCount:i,children:"Requests"})}),x.jsx("li",{children:x.jsx(ti,{currentView:t,targetView:Se.NEGOTIATIONS,setView:A=>{T(A),f(!1)},icon:wr,children:"Negotiations"})})]})}),x.jsx("div",{className:"mt-auto",children:x.jsxs("div",{className:"relative",children:[x.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg cursor-pointer hover:bg-neutral-800 transition-colors",onClick:()=>u(!l),children:[x.jsx("img",{src:n.avatarUrl,alt:n.name,className:"w-10 h-10 rounded-full border-2 border-neutral-700"}),x.jsxs("div",{className:"flex-grow overflow-hidden",children:[x.jsx("p",{className:"text-sm text-white font-semibold truncate",children:n.name}),x.jsx("p",{className:"text-xs text-neutral-400 truncate",children:n.role})]})]}),l&&x.jsxs("div",{className:"absolute bottom-full left-0 mb-2 w-full bg-neutral-800 rounded-lg shadow-lg py-1 border border-neutral-700 animate-fade-in-scale-sm",children:[x.jsx("a",{href:"#",onClick:A=>{A.preventDefault(),e(Se.ONBOARDING),u(!1)},className:"block px-4 py-2 text-sm text-neutral-300 hover:bg-neutral-700",children:"My Profile"}),x.jsxs("a",{href:"#",onClick:A=>{A.preventDefault(),r(),u(!1)},className:"block px-4 py-2 text-sm text-red-400 hover:bg-neutral-700 flex items-center gap-2",children:[x.jsx(LT,{className:"w-4 h-4"})," Logout"]})]})]})})]})]}),x.jsxs("aside",{className:"hidden lg:flex w-64 bg-white/5 backdrop-blur-sm border-r border-white/10 shadow-lg text-white p-4 flex-col h-screen fixed z-50",children:[x.jsxs("div",{className:"absolute inset-0 -z-10 pointer-events-none",children:[x.jsx("div",{className:"absolute top-1/4 left-1/4 w-32 h-32 bg-emerald-500/10 rounded-full blur-2xl animate-pulse-slow"}),x.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-40 h-40 bg-purple-500/10 rounded-full blur-2xl animate-pulse-slow",style:{animationDelay:"2s"}})]}),x.jsxs("div",{className:"flex items-center space-x-2 cursor-pointer mb-10 px-2",onClick:()=>e(Se.LANDING),children:[x.jsx(Zd,{className:"h-8 w-8 text-purple-500"}),x.jsx("span",{className:"font-bold text-xl text-white",children:"Grow With Me"})]}),x.jsx("nav",{className:"flex-grow",children:x.jsxs("ul",{className:"space-y-2",children:[x.jsx("li",{children:x.jsx(ti,{currentView:t,targetView:Se.DASHBOARD,setView:T,icon:p0,children:"Dashboard"})}),x.jsx("li",{children:x.jsx(ti,{currentView:t,targetView:Se.ANALYTICS,setView:T,icon:UT,children:"Analytics"})}),x.jsx("li",{children:x.jsx(ti,{currentView:t,targetView:Se.MESSAGES,setView:T,icon:yf,children:"Messages"})}),x.jsx("li",{children:x.jsx(ti,{currentView:t,targetView:Se.IDEAS,setView:T,icon:wr,children:"Ideas"})}),x.jsx("li",{children:x.jsx(ti,{currentView:t,targetView:Se.PEOPLE,setView:T,icon:io,children:"People"})}),x.jsx("li",{children:x.jsx(ti,{currentView:t,targetView:Se.REQUESTS,setView:T,icon:_l,pendingCount:i,children:"Requests"})}),x.jsx("li",{children:x.jsx(ti,{currentView:t,targetView:Se.NEGOTIATIONS,setView:T,icon:wr,children:"Negotiations"})})]})}),x.jsx("div",{className:"mt-auto",children:x.jsxs("div",{className:"relative",children:[x.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg cursor-pointer hover:bg-neutral-800 transition-colors",onClick:()=>u(!l),children:[x.jsx("img",{src:n.avatarUrl,alt:n.name,className:"w-10 h-10 rounded-full border-2 border-neutral-700"}),x.jsxs("div",{className:"flex-grow overflow-hidden",children:[x.jsx("p",{className:"text-sm text-white font-semibold truncate",children:n.name}),x.jsx("p",{className:"text-xs text-neutral-400 truncate",children:n.role})]})]}),l&&x.jsxs("div",{className:"absolute bottom-full left-0 mb-2 w-full bg-neutral-800 rounded-lg shadow-lg py-1 border border-neutral-700 animate-fade-in-scale-sm",children:[x.jsx("a",{href:"#",onClick:A=>{A.preventDefault(),e(Se.ONBOARDING),u(!1)},className:"block px-4 py-2 text-sm text-neutral-300 hover:bg-neutral-700",children:"My Profile"}),x.jsxs("a",{href:"#",onClick:A=>{A.preventDefault(),r(),u(!1)},className:"block px-4 py-2 text-sm text-red-400 hover:bg-neutral-700 flex items-center gap-2",children:[x.jsx(LT,{className:"w-4 h-4"})," Logout"]})]})]})})]})]})},zAe=[{id:"dev_1",name:"Alex Chen",role:ht.Developer,avatarUrl:"https://api.dicebear.com/8.x/bottts/svg?seed=alex",location:"San Francisco, CA",interests:["AI/ML","Web3","SaaS"],skills:["React","Python","Go","Kubernetes"],experience:"5+ years as a full-stack engineer at a FAANG company. Built and scaled multiple products from 0 to 1.",lookingFor:"A visionary founder with a strong product sense to build the next big thing in developer tools."},{id:"founder_1",name:"Brenda Smith",role:ht.Founder,avatarUrl:"https://api.dicebear.com/8.x/bottts/svg?seed=brenda",location:"New York, NY",interests:["FinTech","E-commerce","Marketplaces"],skills:["Product Management","Marketing","Business Strategy"],experience:"Second-time founder. Exited my first startup for $20M. Deep expertise in product-market fit and GTM strategy.",lookingFor:"A technical co-founder who is passionate about building scalable and beautiful products."},{id:"investor_1",name:"Charles Davis",role:ht.Investor,avatarUrl:"https://api.dicebear.com/8.x/bottts/svg?seed=charles",location:"Remote",interests:["AI","Future of Work","Climate Tech"],skills:["Venture Capital","Fundraising","Growth Hacking"],experience:"Partner at a Tier 1 VC firm. Led Series A rounds for several unicorns. I love working with ambitious founders.",lookingFor:"Early-stage startups with a unique insight and massive market potential. Looking to write checks from $500k to $2M."},{id:"dev_2",name:"Diana Rodriguez",role:ht.Developer,avatarUrl:"https://api.dicebear.com/8.x/bottts/svg?seed=diana",location:"Austin, TX",interests:["Cybersecurity","DevOps","Cloud Infrastructure"],skills:["AWS","Terraform","Rust","Security Audits"],experience:"Senior security engineer with a background in pentesting and cloud architecture. Love building secure and resilient systems.",lookingFor:"A co-founder who understands the security space and wants to build a product that makes the internet safer."},{id:"founder_2",name:"Ethan Wong",role:ht.Founder,avatarUrl:"https://api.dicebear.com/8.x/bottts/svg?seed=ethan",location:"Singapore",interests:["Gaming","Creator Economy","Social Platforms"],skills:["Community Building","UI/UX Design","Agile Methodology"],experience:"Former product manager at a major gaming company. Launched a social app with over 1M MAU.",lookingFor:"An investor who believes in the power of community and a lead developer to build our V2."}];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let $Ae,GAe;function HAe(){return{geminiUrl:$Ae,vertexUrl:GAe}}function KAe(t,e,n,r){var i,s;if(!(t!=null&&t.baseUrl)){const o=HAe();return e?(i=o.vertexUrl)!==null&&i!==void 0?i:n:(s=o.geminiUrl)!==null&&s!==void 0?s:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gc{}function Fe(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const s=e[i];return s!=null?String(s):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function g(t,e,n){for(let s=0;s<e.length-1;s++){const o=e[s];if(o.endsWith("[]")){const l=o.slice(0,-2);if(!(l in t))if(Array.isArray(n))t[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[l])){const u=t[l];if(Array.isArray(n))for(let d=0;d<u.length;d++){const f=u[d];g(f,e.slice(s+1),n[d])}else for(const d of u)g(d,e.slice(s+1),n)}return}else if(o.endsWith("[0]")){const l=o.slice(0,-3);l in t||(t[l]=[{}]);const u=t[l];g(u[0],e.slice(s+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else t[r]=n}function p(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const r=e[n];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in t){const s=t[i];return Array.isArray(s)?s.map(o=>p(o,e.slice(n+1))):void 0}else return}else t=t[r]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nC(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var E5;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(E5||(E5={}));var S5;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(S5||(S5={}));var Ci;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Ci||(Ci={}));var A5;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(A5||(A5={}));var C5;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(C5||(C5={}));var I5;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(I5||(I5={}));var R5;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(R5||(R5={}));var P5;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(P5||(P5={}));var N5;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(N5||(N5={}));var M5;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(M5||(M5={}));var D5;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(D5||(D5={}));var k5;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(k5||(k5={}));var O5;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(O5||(O5={}));var V5;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(V5||(V5={}));var L5;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(L5||(L5={}));var Kx;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Kx||(Kx={}));var U5;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(U5||(U5={}));var rC;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(rC||(rC={}));var F5;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(F5||(F5={}));var j5;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(j5||(j5={}));var B5;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(B5||(B5={}));var q5;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(q5||(q5={}));var z5;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(z5||(z5={}));var $5;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})($5||($5={}));var G5;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(G5||(G5={}));var H5;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(H5||(H5={}));var K5;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(K5||(K5={}));var W5;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(W5||(W5={}));var Y5;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Y5||(Y5={}));var J5;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(J5||(J5={}));var Q5;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Q5||(Q5={}));var X5;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(X5||(X5={}));var Z5;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Z5||(Z5={}));var eF;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(eF||(eF={}));var tF;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(tF||(tF={}));var nF;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(nF||(nF={}));var rF;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(rF||(rF={}));var iF;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(iF||(iF={}));var sF;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(sF||(sF={}));var oF;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(oF||(oF={}));var aF;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(aF||(aF={}));var lF;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(lF||(lF={}));var uF;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(uF||(uF={}));var cF;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(cF||(cF={}));var ff;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(ff||(ff={}));class iC{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class ap{get text(){var e,n,r,i,s,o,l,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",f=!1;const m=[];for(const v of(u=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)!==null&&u!==void 0?u:[]){for(const[_,T]of Object.entries(v))_!=="text"&&_!=="thought"&&(T!==null||T!==void 0)&&m.push(_);if(typeof v.text=="string"){if(typeof v.thought=="boolean"&&v.thought)continue;f=!0,d+=v.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?d:void 0}get data(){var e,n,r,i,s,o,l,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const f=[];for(const m of(u=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)!==null&&u!==void 0?u:[]){for(const[v,_]of Object.entries(m))v!=="inlineData"&&(_!==null||_!==void 0)&&f.push(v);m.inlineData&&typeof m.inlineData.data=="string"&&(d+=atob(m.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,r,i,s,o,l,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(u=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,n,r,i,s,o,l,u,d;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(u=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,r,i,s,o,l,u,d;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(u=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.output}}class dF{}class fF{}class WAe{}class YAe{}class JAe{}class QAe{}class hF{}class mF{}class pF{}class XAe{}class gF{}class yF{}class vF{}class xF{}class ZAe{}class e1e{}class t1e{}class bF{}class n1e{get text(){var e,n,r;let i="",s=!1;const o=[];for(const l of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[u,d]of Object.entries(l))u!=="text"&&u!=="thought"&&d!==null&&o.push(u);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;s=!0,i+=l.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?i:void 0}get data(){var e,n,r;let i="";const s=[];for(const o of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,u]of Object.entries(o))l!=="inlineData"&&u!==null&&s.push(l);o.inlineData&&typeof o.inlineData.data=="string"&&(i+=atob(o.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class Wx{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const r=new Wx;if(r.name=e.name,r.metadata=e.metadata,r.done=e.done,r.error=e.error,n){const i=e.response;if(i){const s=new gF,o=i.videos;s.generatedVideos=o==null?void 0:o.map(l=>({video:{uri:l.gcsUri,videoBytes:l.bytesBase64Encoded?nC(l.bytesBase64Encoded):void 0,mimeType:l.mimeType}})),s.raiMediaFilteredCount=i.raiMediaFilteredCount,s.raiMediaFilteredReasons=i.raiMediaFilteredReasons,r.response=s}}else{const i=e.response;if(i){const s=new gF,o=i.generateVideoResponse,l=o==null?void 0:o.generatedSamples;s.generatedVideos=l==null?void 0:l.map(u=>{const d=u.video;return{video:{uri:d==null?void 0:d.uri,videoBytes:d!=null&&d.encodedVideo?nC(d==null?void 0:d.encodedVideo):void 0,mimeType:u.encoding}}}),s.raiMediaFilteredCount=o==null?void 0:o.raiMediaFilteredCount,s.raiMediaFilteredReasons=o==null?void 0:o.raiMediaFilteredReasons,r.response=s}}return r}}class r1e{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ct(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function C7(t,e){const n=Ct(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function I7(t){return Array.isArray(t)?t.map(e=>Yx(e)):[Yx(t)]}function Yx(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function R7(t){const e=Yx(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function P7(t){const e=Yx(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function _F(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function N7(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>_F(e)):[_F(t)]}function sC(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function wF(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function TF(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Lr(t){if(t==null)throw new Error("ContentUnion is required");return sC(t)?t:{role:"user",parts:N7(t)}}function M7(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=Lr(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=Lr(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Lr(n)):[Lr(e)]}function os(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(wF(t)||TF(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Lr(t)]}const e=[],n=[],r=sC(t[0]);for(const i of t){const s=sC(i);if(s!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(i);else{if(wF(i)||TF(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:N7(n)}),e}function i1e(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(Ci).includes(n[0].toUpperCase())?n[0].toUpperCase():Ci.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(Ci).includes(r.toUpperCase())?r.toUpperCase():Ci.TYPE_UNSPECIFIED})}}function Tf(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&i1e(t.type,e);for(const[o,l]of Object.entries(t))if(l!=null)if(o=="type"){if(l==="null")throw new Error("type: null can not be the only possible type for the field.");if(l instanceof Array)continue;e.type=Object.values(Ci).includes(l.toUpperCase())?l.toUpperCase():Ci.TYPE_UNSPECIFIED}else if(n.includes(o))e[o]=Tf(l);else if(r.includes(o)){const u=[];for(const d of l){if(d.type=="null"){e.nullable=!0;continue}u.push(Tf(d))}e[o]=u}else if(i.includes(o)){const u={};for(const[d,f]of Object.entries(l))u[d]=Tf(f);e[o]=u}else{if(o==="additionalProperties")continue;e[o]=l}return e}function _N(t){return Tf(t)}function wN(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function TN(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Dh(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Tf(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Tf(e.response));return t}function kh(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function s1e(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function Ta(t,e){if(typeof e!="string")throw new Error("name must be a string");return s1e(t,e,"cachedContents")}function D7(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Hc(t){return nC(t)}function o1e(t){return t!=null&&typeof t=="object"&&"name"in t}function a1e(t){return t!=null&&typeof t=="object"&&"video"in t}function l1e(t){return t!=null&&typeof t=="object"&&"uri"in t}function k7(t){var e;let n;if(o1e(t)&&(n=t.name),!(l1e(t)&&(n=t.uri,n===void 0))&&!(a1e(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function O7(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function V7(t){for(const e of["models","tunedModels","publisherModels"])if(u1e(t,e))return t[e];return[]}function u1e(t,e){return t!==null&&typeof t=="object"&&e in t}function c1e(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function d1e(t,e={}){const n=[],r=new Set;for(const i of t){const s=i.name;if(r.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);r.add(s);const o=c1e(i,e);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}function L7(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function f1e(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Oh(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function U7(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function h1e(t){const e={},n=p(t,["fps"]);n!=null&&g(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&g(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&g(e,["startOffset"],i),e}function m1e(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["data"]);n!=null&&g(e,["data"],n);const r=p(t,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function p1e(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const r=p(t,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function g1e(t){const e={},n=p(t,["videoMetadata"]);n!=null&&g(e,["videoMetadata"],h1e(n));const r=p(t,["thought"]);r!=null&&g(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&g(e,["inlineData"],m1e(i));const s=p(t,["fileData"]);s!=null&&g(e,["fileData"],p1e(s));const o=p(t,["thoughtSignature"]);o!=null&&g(e,["thoughtSignature"],o);const l=p(t,["codeExecutionResult"]);l!=null&&g(e,["codeExecutionResult"],l);const u=p(t,["executableCode"]);u!=null&&g(e,["executableCode"],u);const d=p(t,["functionCall"]);d!=null&&g(e,["functionCall"],d);const f=p(t,["functionResponse"]);f!=null&&g(e,["functionResponse"],f);const m=p(t,["text"]);return m!=null&&g(e,["text"],m),e}function F7(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>g1e(s))),g(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&g(e,["role"],r),e}function y1e(t){const e={},n=p(t,["anyOf"]);n!=null&&g(e,["anyOf"],n);const r=p(t,["default"]);r!=null&&g(e,["default"],r);const i=p(t,["description"]);i!=null&&g(e,["description"],i);const s=p(t,["enum"]);s!=null&&g(e,["enum"],s);const o=p(t,["example"]);o!=null&&g(e,["example"],o);const l=p(t,["format"]);l!=null&&g(e,["format"],l);const u=p(t,["items"]);u!=null&&g(e,["items"],u);const d=p(t,["maxItems"]);d!=null&&g(e,["maxItems"],d);const f=p(t,["maxLength"]);f!=null&&g(e,["maxLength"],f);const m=p(t,["maxProperties"]);m!=null&&g(e,["maxProperties"],m);const v=p(t,["maximum"]);v!=null&&g(e,["maximum"],v);const _=p(t,["minItems"]);_!=null&&g(e,["minItems"],_);const T=p(t,["minLength"]);T!=null&&g(e,["minLength"],T);const S=p(t,["minProperties"]);S!=null&&g(e,["minProperties"],S);const A=p(t,["minimum"]);A!=null&&g(e,["minimum"],A);const I=p(t,["nullable"]);I!=null&&g(e,["nullable"],I);const D=p(t,["pattern"]);D!=null&&g(e,["pattern"],D);const N=p(t,["properties"]);N!=null&&g(e,["properties"],N);const U=p(t,["propertyOrdering"]);U!=null&&g(e,["propertyOrdering"],U);const O=p(t,["required"]);O!=null&&g(e,["required"],O);const q=p(t,["title"]);q!=null&&g(e,["title"],q);const M=p(t,["type"]);return M!=null&&g(e,["type"],M),e}function v1e(t){const e={};if(p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=p(t,["category"]);n!=null&&g(e,["category"],n);const r=p(t,["threshold"]);return r!=null&&g(e,["threshold"],r),e}function x1e(t){const e={},n=p(t,["behavior"]);n!=null&&g(e,["behavior"],n);const r=p(t,["description"]);r!=null&&g(e,["description"],r);const i=p(t,["name"]);i!=null&&g(e,["name"],i);const s=p(t,["parameters"]);s!=null&&g(e,["parameters"],s);const o=p(t,["parametersJsonSchema"]);o!=null&&g(e,["parametersJsonSchema"],o);const l=p(t,["response"]);l!=null&&g(e,["response"],l);const u=p(t,["responseJsonSchema"]);return u!=null&&g(e,["responseJsonSchema"],u),e}function b1e(t){const e={},n=p(t,["startTime"]);n!=null&&g(e,["startTime"],n);const r=p(t,["endTime"]);return r!=null&&g(e,["endTime"],r),e}function _1e(t){const e={},n=p(t,["timeRangeFilter"]);if(n!=null&&g(e,["timeRangeFilter"],b1e(n)),p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function w1e(t){const e={},n=p(t,["mode"]);n!=null&&g(e,["mode"],n);const r=p(t,["dynamicThreshold"]);return r!=null&&g(e,["dynamicThreshold"],r),e}function T1e(t){const e={},n=p(t,["dynamicRetrievalConfig"]);return n!=null&&g(e,["dynamicRetrievalConfig"],w1e(n)),e}function E1e(){return{}}function S1e(t){const e={},n=p(t,["environment"]);return n!=null&&g(e,["environment"],n),e}function A1e(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(d=>x1e(d))),g(e,["functionDeclarations"],u)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=p(t,["googleSearch"]);r!=null&&g(e,["googleSearch"],_1e(r));const i=p(t,["googleSearchRetrieval"]);if(i!=null&&g(e,["googleSearchRetrieval"],T1e(i)),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(p(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");p(t,["urlContext"])!=null&&g(e,["urlContext"],E1e());const o=p(t,["computerUse"]);o!=null&&g(e,["computerUse"],S1e(o));const l=p(t,["codeExecution"]);return l!=null&&g(e,["codeExecution"],l),e}function C1e(t){const e={},n=p(t,["mode"]);n!=null&&g(e,["mode"],n);const r=p(t,["allowedFunctionNames"]);return r!=null&&g(e,["allowedFunctionNames"],r),e}function I1e(t){const e={},n=p(t,["latitude"]);n!=null&&g(e,["latitude"],n);const r=p(t,["longitude"]);return r!=null&&g(e,["longitude"],r),e}function R1e(t){const e={},n=p(t,["latLng"]);n!=null&&g(e,["latLng"],I1e(n));const r=p(t,["languageCode"]);return r!=null&&g(e,["languageCode"],r),e}function P1e(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&g(e,["functionCallingConfig"],C1e(n));const r=p(t,["retrievalConfig"]);return r!=null&&g(e,["retrievalConfig"],R1e(r)),e}function N1e(t){const e={},n=p(t,["voiceName"]);return n!=null&&g(e,["voiceName"],n),e}function j7(t){const e={},n=p(t,["prebuiltVoiceConfig"]);return n!=null&&g(e,["prebuiltVoiceConfig"],N1e(n)),e}function M1e(t){const e={},n=p(t,["speaker"]);n!=null&&g(e,["speaker"],n);const r=p(t,["voiceConfig"]);return r!=null&&g(e,["voiceConfig"],j7(r)),e}function D1e(t){const e={},n=p(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>M1e(i))),g(e,["speakerVoiceConfigs"],r)}return e}function k1e(t){const e={},n=p(t,["voiceConfig"]);n!=null&&g(e,["voiceConfig"],j7(n));const r=p(t,["multiSpeakerVoiceConfig"]);r!=null&&g(e,["multiSpeakerVoiceConfig"],D1e(r));const i=p(t,["languageCode"]);return i!=null&&g(e,["languageCode"],i),e}function O1e(t){const e={},n=p(t,["includeThoughts"]);n!=null&&g(e,["includeThoughts"],n);const r=p(t,["thinkingBudget"]);return r!=null&&g(e,["thinkingBudget"],r),e}function V1e(t,e,n){const r={},i=p(e,["systemInstruction"]);n!==void 0&&i!=null&&g(n,["systemInstruction"],F7(Lr(i)));const s=p(e,["temperature"]);s!=null&&g(r,["temperature"],s);const o=p(e,["topP"]);o!=null&&g(r,["topP"],o);const l=p(e,["topK"]);l!=null&&g(r,["topK"],l);const u=p(e,["candidateCount"]);u!=null&&g(r,["candidateCount"],u);const d=p(e,["maxOutputTokens"]);d!=null&&g(r,["maxOutputTokens"],d);const f=p(e,["stopSequences"]);f!=null&&g(r,["stopSequences"],f);const m=p(e,["responseLogprobs"]);m!=null&&g(r,["responseLogprobs"],m);const v=p(e,["logprobs"]);v!=null&&g(r,["logprobs"],v);const _=p(e,["presencePenalty"]);_!=null&&g(r,["presencePenalty"],_);const T=p(e,["frequencyPenalty"]);T!=null&&g(r,["frequencyPenalty"],T);const S=p(e,["seed"]);S!=null&&g(r,["seed"],S);const A=p(e,["responseMimeType"]);A!=null&&g(r,["responseMimeType"],A);const I=p(e,["responseSchema"]);I!=null&&g(r,["responseSchema"],y1e(_N(I)));const D=p(e,["responseJsonSchema"]);if(D!=null&&g(r,["responseJsonSchema"],D),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const N=p(e,["safetySettings"]);if(n!==void 0&&N!=null){let j=N;Array.isArray(j)&&(j=j.map(G=>v1e(G))),g(n,["safetySettings"],j)}const U=p(e,["tools"]);if(n!==void 0&&U!=null){let j=kh(U);Array.isArray(j)&&(j=j.map(G=>A1e(Dh(G)))),g(n,["tools"],j)}const O=p(e,["toolConfig"]);if(n!==void 0&&O!=null&&g(n,["toolConfig"],P1e(O)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const q=p(e,["cachedContent"]);n!==void 0&&q!=null&&g(n,["cachedContent"],Ta(t,q));const M=p(e,["responseModalities"]);M!=null&&g(r,["responseModalities"],M);const R=p(e,["mediaResolution"]);R!=null&&g(r,["mediaResolution"],R);const k=p(e,["speechConfig"]);if(k!=null&&g(r,["speechConfig"],k1e(wN(k))),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const F=p(e,["thinkingConfig"]);return F!=null&&g(r,["thinkingConfig"],O1e(F)),r}function L1e(t,e){const n={},r=p(e,["model"]);r!=null&&g(n,["request","model"],Ct(t,r));const i=p(e,["contents"]);if(i!=null){let o=os(i);Array.isArray(o)&&(o=o.map(l=>F7(l))),g(n,["request","contents"],o)}const s=p(e,["config"]);return s!=null&&g(n,["request","generationConfig"],V1e(t,s,n)),n}function U1e(t,e){const n={};if(p(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(p(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=p(e,["fileName"]);r!=null&&g(n,["fileName"],r);const i=p(e,["inlinedRequests"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>L1e(t,o))),g(n,["requests","requests"],s)}return n}function F1e(t,e){const n={},r=p(t,["displayName"]);if(e!==void 0&&r!=null&&g(e,["batch","displayName"],r),p(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function EF(t,e){const n={},r=p(e,["model"]);r!=null&&g(n,["_url","model"],Ct(t,r));const i=p(e,["src"]);i!=null&&g(n,["batch","inputConfig"],U1e(t,L7(t,i)));const s=p(e,["config"]);return s!=null&&g(n,["config"],F1e(s,n)),n}function j1e(t,e){const n={},r=p(e,["name"]);r!=null&&g(n,["_url","name"],Oh(t,r));const i=p(e,["config"]);return i!=null&&g(n,["config"],i),n}function B1e(t,e){const n={},r=p(e,["name"]);r!=null&&g(n,["_url","name"],Oh(t,r));const i=p(e,["config"]);return i!=null&&g(n,["config"],i),n}function q1e(t,e){const n={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&g(e,["_query","pageSize"],r);const i=p(t,["pageToken"]);if(e!==void 0&&i!=null&&g(e,["_query","pageToken"],i),p(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function z1e(t){const e={},n=p(t,["config"]);return n!=null&&g(e,["config"],q1e(n,e)),e}function $1e(t,e){const n={},r=p(e,["name"]);r!=null&&g(n,["_url","name"],Oh(t,r));const i=p(e,["config"]);return i!=null&&g(n,["config"],i),n}function G1e(t){const e={},n=p(t,["format"]);n!=null&&g(e,["instancesFormat"],n);const r=p(t,["gcsUri"]);r!=null&&g(e,["gcsSource","uris"],r);const i=p(t,["bigqueryUri"]);if(i!=null&&g(e,["bigquerySource","inputUri"],i),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function H1e(t){const e={},n=p(t,["format"]);n!=null&&g(e,["predictionsFormat"],n);const r=p(t,["gcsUri"]);r!=null&&g(e,["gcsDestination","outputUriPrefix"],r);const i=p(t,["bigqueryUri"]);if(i!=null&&g(e,["bigqueryDestination","outputUri"],i),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function K1e(t,e){const n={},r=p(t,["displayName"]);e!==void 0&&r!=null&&g(e,["displayName"],r);const i=p(t,["dest"]);return e!==void 0&&i!=null&&g(e,["outputConfig"],H1e(f1e(i))),n}function W1e(t,e){const n={},r=p(e,["model"]);r!=null&&g(n,["model"],Ct(t,r));const i=p(e,["src"]);i!=null&&g(n,["inputConfig"],G1e(L7(t,i)));const s=p(e,["config"]);return s!=null&&g(n,["config"],K1e(s,n)),n}function Y1e(t,e){const n={},r=p(e,["name"]);r!=null&&g(n,["_url","name"],Oh(t,r));const i=p(e,["config"]);return i!=null&&g(n,["config"],i),n}function J1e(t,e){const n={},r=p(e,["name"]);r!=null&&g(n,["_url","name"],Oh(t,r));const i=p(e,["config"]);return i!=null&&g(n,["config"],i),n}function Q1e(t,e){const n={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&g(e,["_query","pageSize"],r);const i=p(t,["pageToken"]);e!==void 0&&i!=null&&g(e,["_query","pageToken"],i);const s=p(t,["filter"]);return e!==void 0&&s!=null&&g(e,["_query","filter"],s),n}function X1e(t){const e={},n=p(t,["config"]);return n!=null&&g(e,["config"],Q1e(n,e)),e}function Z1e(t,e){const n={},r=p(e,["name"]);r!=null&&g(n,["_url","name"],Oh(t,r));const i=p(e,["config"]);return i!=null&&g(n,["config"],i),n}function eCe(t){const e={},n=p(t,["fps"]);n!=null&&g(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&g(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&g(e,["startOffset"],i),e}function tCe(t){const e={},n=p(t,["data"]);n!=null&&g(e,["data"],n);const r=p(t,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function nCe(t){const e={},n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const r=p(t,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function rCe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&g(e,["videoMetadata"],eCe(n));const r=p(t,["thought"]);r!=null&&g(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&g(e,["inlineData"],tCe(i));const s=p(t,["fileData"]);s!=null&&g(e,["fileData"],nCe(s));const o=p(t,["thoughtSignature"]);o!=null&&g(e,["thoughtSignature"],o);const l=p(t,["codeExecutionResult"]);l!=null&&g(e,["codeExecutionResult"],l);const u=p(t,["executableCode"]);u!=null&&g(e,["executableCode"],u);const d=p(t,["functionCall"]);d!=null&&g(e,["functionCall"],d);const f=p(t,["functionResponse"]);f!=null&&g(e,["functionResponse"],f);const m=p(t,["text"]);return m!=null&&g(e,["text"],m),e}function iCe(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>rCe(s))),g(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&g(e,["role"],r),e}function sCe(t){const e={},n=p(t,["citationSources"]);return n!=null&&g(e,["citations"],n),e}function oCe(t){const e={},n=p(t,["retrievedUrl"]);n!=null&&g(e,["retrievedUrl"],n);const r=p(t,["urlRetrievalStatus"]);return r!=null&&g(e,["urlRetrievalStatus"],r),e}function aCe(t){const e={},n=p(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>oCe(i))),g(e,["urlMetadata"],r)}return e}function lCe(t){const e={},n=p(t,["content"]);n!=null&&g(e,["content"],iCe(n));const r=p(t,["citationMetadata"]);r!=null&&g(e,["citationMetadata"],sCe(r));const i=p(t,["tokenCount"]);i!=null&&g(e,["tokenCount"],i);const s=p(t,["finishReason"]);s!=null&&g(e,["finishReason"],s);const o=p(t,["urlContextMetadata"]);o!=null&&g(e,["urlContextMetadata"],aCe(o));const l=p(t,["avgLogprobs"]);l!=null&&g(e,["avgLogprobs"],l);const u=p(t,["groundingMetadata"]);u!=null&&g(e,["groundingMetadata"],u);const d=p(t,["index"]);d!=null&&g(e,["index"],d);const f=p(t,["logprobsResult"]);f!=null&&g(e,["logprobsResult"],f);const m=p(t,["safetyRatings"]);return m!=null&&g(e,["safetyRatings"],m),e}function uCe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const r=p(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>lCe(d))),g(e,["candidates"],u)}const i=p(t,["modelVersion"]);i!=null&&g(e,["modelVersion"],i);const s=p(t,["promptFeedback"]);s!=null&&g(e,["promptFeedback"],s);const o=p(t,["responseId"]);o!=null&&g(e,["responseId"],o);const l=p(t,["usageMetadata"]);return l!=null&&g(e,["usageMetadata"],l),e}function B7(t){const e={},n=p(t,["details"]);n!=null&&g(e,["details"],n);const r=p(t,["code"]);r!=null&&g(e,["code"],r);const i=p(t,["message"]);return i!=null&&g(e,["message"],i),e}function cCe(t){const e={},n=p(t,["response"]);n!=null&&g(e,["response"],uCe(n));const r=p(t,["error"]);return r!=null&&g(e,["error"],B7(r)),e}function dCe(t){const e={},n=p(t,["responsesFile"]);n!=null&&g(e,["fileName"],n);const r=p(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>cCe(s))),g(e,["inlinedResponses"],i)}return e}function M0(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const r=p(t,["metadata","displayName"]);r!=null&&g(e,["displayName"],r);const i=p(t,["metadata","state"]);i!=null&&g(e,["state"],U7(i));const s=p(t,["metadata","createTime"]);s!=null&&g(e,["createTime"],s);const o=p(t,["metadata","endTime"]);o!=null&&g(e,["endTime"],o);const l=p(t,["metadata","updateTime"]);l!=null&&g(e,["updateTime"],l);const u=p(t,["metadata","model"]);u!=null&&g(e,["model"],u);const d=p(t,["metadata","output"]);return d!=null&&g(e,["dest"],dCe(d)),e}function fCe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&g(e,["nextPageToken"],r);const i=p(t,["operations"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>M0(o))),g(e,["batchJobs"],s)}return e}function hCe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const r=p(t,["name"]);r!=null&&g(e,["name"],r);const i=p(t,["done"]);i!=null&&g(e,["done"],i);const s=p(t,["error"]);return s!=null&&g(e,["error"],B7(s)),e}function q7(t){const e={},n=p(t,["details"]);n!=null&&g(e,["details"],n);const r=p(t,["code"]);r!=null&&g(e,["code"],r);const i=p(t,["message"]);return i!=null&&g(e,["message"],i),e}function mCe(t){const e={},n=p(t,["instancesFormat"]);n!=null&&g(e,["format"],n);const r=p(t,["gcsSource","uris"]);r!=null&&g(e,["gcsUri"],r);const i=p(t,["bigquerySource","inputUri"]);return i!=null&&g(e,["bigqueryUri"],i),e}function pCe(t){const e={},n=p(t,["predictionsFormat"]);n!=null&&g(e,["format"],n);const r=p(t,["gcsDestination","outputUriPrefix"]);r!=null&&g(e,["gcsUri"],r);const i=p(t,["bigqueryDestination","outputUri"]);return i!=null&&g(e,["bigqueryUri"],i),e}function oC(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const r=p(t,["displayName"]);r!=null&&g(e,["displayName"],r);const i=p(t,["state"]);i!=null&&g(e,["state"],U7(i));const s=p(t,["error"]);s!=null&&g(e,["error"],q7(s));const o=p(t,["createTime"]);o!=null&&g(e,["createTime"],o);const l=p(t,["startTime"]);l!=null&&g(e,["startTime"],l);const u=p(t,["endTime"]);u!=null&&g(e,["endTime"],u);const d=p(t,["updateTime"]);d!=null&&g(e,["updateTime"],d);const f=p(t,["model"]);f!=null&&g(e,["model"],f);const m=p(t,["inputConfig"]);m!=null&&g(e,["src"],mCe(m));const v=p(t,["outputConfig"]);return v!=null&&g(e,["dest"],pCe(v)),e}function gCe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&g(e,["nextPageToken"],r);const i=p(t,["batchPredictionJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>oC(o))),g(e,["batchJobs"],s)}return e}function yCe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const r=p(t,["name"]);r!=null&&g(e,["name"],r);const i=p(t,["done"]);i!=null&&g(e,["done"],i);const s=p(t,["error"]);return s!=null&&g(e,["error"],q7(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Oc;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Oc||(Oc={}));class my{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!r||Object.keys(r).length===0?o={config:{}}:typeof r=="object"?o=Object.assign({},r):o=r,o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(s=(i=o.config)===null||i===void 0?void 0:i.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vCe extends Gc{constructor(e){super(),this.apiClient=e,this.create=async n=>{var r,i;if(this.apiClient.isVertexAI()){const o=Date.now().toString();if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_${timestampStr}"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_${o}`;else throw new Error("Unsupported source:"+n.src)}else if(Array.isArray(n.src)||typeof n.src!="string"&&n.src.inlinedRequests){let s="",o={};const l=EF(this.apiClient,n);s=Fe("{model}:batchGenerateContent",l._url),o=l._query;const f=l.batch.inputConfig.requests,m=f.requests,v=[];for(const T of m){const S=T;if(S.systemInstruction){const A=S.systemInstruction;delete S.systemInstruction;const I=S.request;I.systemInstruction=A,S.request=I}v.push(S)}return f.requests=v,delete l.config,delete l._url,delete l._query,this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(T=>T.json()).then(T=>M0(T))}return await this.createInternal(n)},this.list=async(n={})=>new my(Oc.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}async createInternal(e){var n,r,i,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=W1e(this.apiClient,e);return l=Fe("batchPredictionJobs",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>oC(f))}else{const d=EF(this.apiClient,e);return l=Fe("{model}:batchGenerateContent",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>M0(f))}}async get(e){var n,r,i,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=Y1e(this.apiClient,e);return l=Fe("batchPredictionJobs/{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>oC(f))}else{const d=j1e(this.apiClient,e);return l=Fe("batches/{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>M0(f))}}async cancel(e){var n,r,i,s;let o="",l={};if(this.apiClient.isVertexAI()){const u=J1e(this.apiClient,e);o=Fe("batchPredictionJobs/{name}:cancel",u._url),l=u._query,delete u.config,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const u=B1e(this.apiClient,e);o=Fe("batches/{name}:cancel",u._url),l=u._query,delete u.config,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,r,i,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=X1e(e);return l=Fe("batchPredictionJobs",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:f.headers},v})),o.then(f=>{const m=gCe(f),v=new bF;return Object.assign(v,m),v})}else{const d=z1e(e);return l=Fe("batches",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:f.headers},v})),o.then(f=>{const m=fCe(f),v=new bF;return Object.assign(v,m),v})}}async delete(e){var n,r,i,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=Z1e(this.apiClient,e);return l=Fe("batchPredictionJobs/{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:f.headers},v})),o.then(f=>yCe(f))}else{const d=$1e(this.apiClient,e);return l=Fe("batches/{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:f.headers},v})),o.then(f=>hCe(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xCe(t){const e={},n=p(t,["fps"]);n!=null&&g(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&g(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&g(e,["startOffset"],i),e}function bCe(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["data"]);n!=null&&g(e,["data"],n);const r=p(t,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function _Ce(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const r=p(t,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function wCe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&g(e,["videoMetadata"],xCe(n));const r=p(t,["thought"]);r!=null&&g(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&g(e,["inlineData"],bCe(i));const s=p(t,["fileData"]);s!=null&&g(e,["fileData"],_Ce(s));const o=p(t,["thoughtSignature"]);o!=null&&g(e,["thoughtSignature"],o);const l=p(t,["codeExecutionResult"]);l!=null&&g(e,["codeExecutionResult"],l);const u=p(t,["executableCode"]);u!=null&&g(e,["executableCode"],u);const d=p(t,["functionCall"]);d!=null&&g(e,["functionCall"],d);const f=p(t,["functionResponse"]);f!=null&&g(e,["functionResponse"],f);const m=p(t,["text"]);return m!=null&&g(e,["text"],m),e}function SF(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>wCe(s))),g(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&g(e,["role"],r),e}function TCe(t){const e={},n=p(t,["behavior"]);n!=null&&g(e,["behavior"],n);const r=p(t,["description"]);r!=null&&g(e,["description"],r);const i=p(t,["name"]);i!=null&&g(e,["name"],i);const s=p(t,["parameters"]);s!=null&&g(e,["parameters"],s);const o=p(t,["parametersJsonSchema"]);o!=null&&g(e,["parametersJsonSchema"],o);const l=p(t,["response"]);l!=null&&g(e,["response"],l);const u=p(t,["responseJsonSchema"]);return u!=null&&g(e,["responseJsonSchema"],u),e}function ECe(t){const e={},n=p(t,["startTime"]);n!=null&&g(e,["startTime"],n);const r=p(t,["endTime"]);return r!=null&&g(e,["endTime"],r),e}function SCe(t){const e={},n=p(t,["timeRangeFilter"]);if(n!=null&&g(e,["timeRangeFilter"],ECe(n)),p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function ACe(t){const e={},n=p(t,["mode"]);n!=null&&g(e,["mode"],n);const r=p(t,["dynamicThreshold"]);return r!=null&&g(e,["dynamicThreshold"],r),e}function CCe(t){const e={},n=p(t,["dynamicRetrievalConfig"]);return n!=null&&g(e,["dynamicRetrievalConfig"],ACe(n)),e}function ICe(){return{}}function RCe(t){const e={},n=p(t,["environment"]);return n!=null&&g(e,["environment"],n),e}function PCe(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(d=>TCe(d))),g(e,["functionDeclarations"],u)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=p(t,["googleSearch"]);r!=null&&g(e,["googleSearch"],SCe(r));const i=p(t,["googleSearchRetrieval"]);if(i!=null&&g(e,["googleSearchRetrieval"],CCe(i)),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(p(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");p(t,["urlContext"])!=null&&g(e,["urlContext"],ICe());const o=p(t,["computerUse"]);o!=null&&g(e,["computerUse"],RCe(o));const l=p(t,["codeExecution"]);return l!=null&&g(e,["codeExecution"],l),e}function NCe(t){const e={},n=p(t,["mode"]);n!=null&&g(e,["mode"],n);const r=p(t,["allowedFunctionNames"]);return r!=null&&g(e,["allowedFunctionNames"],r),e}function MCe(t){const e={},n=p(t,["latitude"]);n!=null&&g(e,["latitude"],n);const r=p(t,["longitude"]);return r!=null&&g(e,["longitude"],r),e}function DCe(t){const e={},n=p(t,["latLng"]);n!=null&&g(e,["latLng"],MCe(n));const r=p(t,["languageCode"]);return r!=null&&g(e,["languageCode"],r),e}function kCe(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&g(e,["functionCallingConfig"],NCe(n));const r=p(t,["retrievalConfig"]);return r!=null&&g(e,["retrievalConfig"],DCe(r)),e}function OCe(t,e){const n={},r=p(t,["ttl"]);e!==void 0&&r!=null&&g(e,["ttl"],r);const i=p(t,["expireTime"]);e!==void 0&&i!=null&&g(e,["expireTime"],i);const s=p(t,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const o=p(t,["contents"]);if(e!==void 0&&o!=null){let f=os(o);Array.isArray(f)&&(f=f.map(m=>SF(m))),g(e,["contents"],f)}const l=p(t,["systemInstruction"]);e!==void 0&&l!=null&&g(e,["systemInstruction"],SF(Lr(l)));const u=p(t,["tools"]);if(e!==void 0&&u!=null){let f=u;Array.isArray(f)&&(f=f.map(m=>PCe(m))),g(e,["tools"],f)}const d=p(t,["toolConfig"]);if(e!==void 0&&d!=null&&g(e,["toolConfig"],kCe(d)),p(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function VCe(t,e){const n={},r=p(e,["model"]);r!=null&&g(n,["model"],C7(t,r));const i=p(e,["config"]);return i!=null&&g(n,["config"],OCe(i,n)),n}function LCe(t,e){const n={},r=p(e,["name"]);r!=null&&g(n,["_url","name"],Ta(t,r));const i=p(e,["config"]);return i!=null&&g(n,["config"],i),n}function UCe(t,e){const n={},r=p(e,["name"]);r!=null&&g(n,["_url","name"],Ta(t,r));const i=p(e,["config"]);return i!=null&&g(n,["config"],i),n}function FCe(t,e){const n={},r=p(t,["ttl"]);e!==void 0&&r!=null&&g(e,["ttl"],r);const i=p(t,["expireTime"]);return e!==void 0&&i!=null&&g(e,["expireTime"],i),n}function jCe(t,e){const n={},r=p(e,["name"]);r!=null&&g(n,["_url","name"],Ta(t,r));const i=p(e,["config"]);return i!=null&&g(n,["config"],FCe(i,n)),n}function BCe(t,e){const n={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&g(e,["_query","pageSize"],r);const i=p(t,["pageToken"]);return e!==void 0&&i!=null&&g(e,["_query","pageToken"],i),n}function qCe(t){const e={},n=p(t,["config"]);return n!=null&&g(e,["config"],BCe(n,e)),e}function zCe(t){const e={},n=p(t,["fps"]);n!=null&&g(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&g(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&g(e,["startOffset"],i),e}function $Ce(t){const e={},n=p(t,["displayName"]);n!=null&&g(e,["displayName"],n);const r=p(t,["data"]);r!=null&&g(e,["data"],r);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function GCe(t){const e={},n=p(t,["displayName"]);n!=null&&g(e,["displayName"],n);const r=p(t,["fileUri"]);r!=null&&g(e,["fileUri"],r);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function HCe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&g(e,["videoMetadata"],zCe(n));const r=p(t,["thought"]);r!=null&&g(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&g(e,["inlineData"],$Ce(i));const s=p(t,["fileData"]);s!=null&&g(e,["fileData"],GCe(s));const o=p(t,["thoughtSignature"]);o!=null&&g(e,["thoughtSignature"],o);const l=p(t,["codeExecutionResult"]);l!=null&&g(e,["codeExecutionResult"],l);const u=p(t,["executableCode"]);u!=null&&g(e,["executableCode"],u);const d=p(t,["functionCall"]);d!=null&&g(e,["functionCall"],d);const f=p(t,["functionResponse"]);f!=null&&g(e,["functionResponse"],f);const m=p(t,["text"]);return m!=null&&g(e,["text"],m),e}function AF(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>HCe(s))),g(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&g(e,["role"],r),e}function KCe(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&g(e,["description"],n);const r=p(t,["name"]);r!=null&&g(e,["name"],r);const i=p(t,["parameters"]);i!=null&&g(e,["parameters"],i);const s=p(t,["parametersJsonSchema"]);s!=null&&g(e,["parametersJsonSchema"],s);const o=p(t,["response"]);o!=null&&g(e,["response"],o);const l=p(t,["responseJsonSchema"]);return l!=null&&g(e,["responseJsonSchema"],l),e}function WCe(t){const e={},n=p(t,["startTime"]);n!=null&&g(e,["startTime"],n);const r=p(t,["endTime"]);return r!=null&&g(e,["endTime"],r),e}function YCe(t){const e={},n=p(t,["timeRangeFilter"]);n!=null&&g(e,["timeRangeFilter"],WCe(n));const r=p(t,["excludeDomains"]);return r!=null&&g(e,["excludeDomains"],r),e}function JCe(t){const e={},n=p(t,["mode"]);n!=null&&g(e,["mode"],n);const r=p(t,["dynamicThreshold"]);return r!=null&&g(e,["dynamicThreshold"],r),e}function QCe(t){const e={},n=p(t,["dynamicRetrievalConfig"]);return n!=null&&g(e,["dynamicRetrievalConfig"],JCe(n)),e}function XCe(t){const e={},n=p(t,["excludeDomains"]);return n!=null&&g(e,["excludeDomains"],n),e}function ZCe(t){const e={},n=p(t,["apiKeyString"]);return n!=null&&g(e,["apiKeyString"],n),e}function eIe(t){const e={},n=p(t,["apiKeyConfig"]);n!=null&&g(e,["apiKeyConfig"],ZCe(n));const r=p(t,["authType"]);r!=null&&g(e,["authType"],r);const i=p(t,["googleServiceAccountConfig"]);i!=null&&g(e,["googleServiceAccountConfig"],i);const s=p(t,["httpBasicAuthConfig"]);s!=null&&g(e,["httpBasicAuthConfig"],s);const o=p(t,["oauthConfig"]);o!=null&&g(e,["oauthConfig"],o);const l=p(t,["oidcConfig"]);return l!=null&&g(e,["oidcConfig"],l),e}function tIe(t){const e={},n=p(t,["authConfig"]);return n!=null&&g(e,["authConfig"],eIe(n)),e}function nIe(){return{}}function rIe(t){const e={},n=p(t,["environment"]);return n!=null&&g(e,["environment"],n),e}function iIe(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(v=>KCe(v))),g(e,["functionDeclarations"],m)}const r=p(t,["retrieval"]);r!=null&&g(e,["retrieval"],r);const i=p(t,["googleSearch"]);i!=null&&g(e,["googleSearch"],YCe(i));const s=p(t,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],QCe(s));const o=p(t,["enterpriseWebSearch"]);o!=null&&g(e,["enterpriseWebSearch"],XCe(o));const l=p(t,["googleMaps"]);l!=null&&g(e,["googleMaps"],tIe(l)),p(t,["urlContext"])!=null&&g(e,["urlContext"],nIe());const d=p(t,["computerUse"]);d!=null&&g(e,["computerUse"],rIe(d));const f=p(t,["codeExecution"]);return f!=null&&g(e,["codeExecution"],f),e}function sIe(t){const e={},n=p(t,["mode"]);n!=null&&g(e,["mode"],n);const r=p(t,["allowedFunctionNames"]);return r!=null&&g(e,["allowedFunctionNames"],r),e}function oIe(t){const e={},n=p(t,["latitude"]);n!=null&&g(e,["latitude"],n);const r=p(t,["longitude"]);return r!=null&&g(e,["longitude"],r),e}function aIe(t){const e={},n=p(t,["latLng"]);n!=null&&g(e,["latLng"],oIe(n));const r=p(t,["languageCode"]);return r!=null&&g(e,["languageCode"],r),e}function lIe(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&g(e,["functionCallingConfig"],sIe(n));const r=p(t,["retrievalConfig"]);return r!=null&&g(e,["retrievalConfig"],aIe(r)),e}function uIe(t,e){const n={},r=p(t,["ttl"]);e!==void 0&&r!=null&&g(e,["ttl"],r);const i=p(t,["expireTime"]);e!==void 0&&i!=null&&g(e,["expireTime"],i);const s=p(t,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const o=p(t,["contents"]);if(e!==void 0&&o!=null){let m=os(o);Array.isArray(m)&&(m=m.map(v=>AF(v))),g(e,["contents"],m)}const l=p(t,["systemInstruction"]);e!==void 0&&l!=null&&g(e,["systemInstruction"],AF(Lr(l)));const u=p(t,["tools"]);if(e!==void 0&&u!=null){let m=u;Array.isArray(m)&&(m=m.map(v=>iIe(v))),g(e,["tools"],m)}const d=p(t,["toolConfig"]);e!==void 0&&d!=null&&g(e,["toolConfig"],lIe(d));const f=p(t,["kmsKeyName"]);return e!==void 0&&f!=null&&g(e,["encryption_spec","kmsKeyName"],f),n}function cIe(t,e){const n={},r=p(e,["model"]);r!=null&&g(n,["model"],C7(t,r));const i=p(e,["config"]);return i!=null&&g(n,["config"],uIe(i,n)),n}function dIe(t,e){const n={},r=p(e,["name"]);r!=null&&g(n,["_url","name"],Ta(t,r));const i=p(e,["config"]);return i!=null&&g(n,["config"],i),n}function fIe(t,e){const n={},r=p(e,["name"]);r!=null&&g(n,["_url","name"],Ta(t,r));const i=p(e,["config"]);return i!=null&&g(n,["config"],i),n}function hIe(t,e){const n={},r=p(t,["ttl"]);e!==void 0&&r!=null&&g(e,["ttl"],r);const i=p(t,["expireTime"]);return e!==void 0&&i!=null&&g(e,["expireTime"],i),n}function mIe(t,e){const n={},r=p(e,["name"]);r!=null&&g(n,["_url","name"],Ta(t,r));const i=p(e,["config"]);return i!=null&&g(n,["config"],hIe(i,n)),n}function pIe(t,e){const n={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&g(e,["_query","pageSize"],r);const i=p(t,["pageToken"]);return e!==void 0&&i!=null&&g(e,["_query","pageToken"],i),n}function gIe(t){const e={},n=p(t,["config"]);return n!=null&&g(e,["config"],pIe(n,e)),e}function D0(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const r=p(t,["displayName"]);r!=null&&g(e,["displayName"],r);const i=p(t,["model"]);i!=null&&g(e,["model"],i);const s=p(t,["createTime"]);s!=null&&g(e,["createTime"],s);const o=p(t,["updateTime"]);o!=null&&g(e,["updateTime"],o);const l=p(t,["expireTime"]);l!=null&&g(e,["expireTime"],l);const u=p(t,["usageMetadata"]);return u!=null&&g(e,["usageMetadata"],u),e}function yIe(){return{}}function vIe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&g(e,["nextPageToken"],r);const i=p(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>D0(o))),g(e,["cachedContents"],s)}return e}function k0(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const r=p(t,["displayName"]);r!=null&&g(e,["displayName"],r);const i=p(t,["model"]);i!=null&&g(e,["model"],i);const s=p(t,["createTime"]);s!=null&&g(e,["createTime"],s);const o=p(t,["updateTime"]);o!=null&&g(e,["updateTime"],o);const l=p(t,["expireTime"]);l!=null&&g(e,["expireTime"],l);const u=p(t,["usageMetadata"]);return u!=null&&g(e,["usageMetadata"],u),e}function xIe(){return{}}function bIe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&g(e,["nextPageToken"],r);const i=p(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>k0(o))),g(e,["cachedContents"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _Ie extends Gc{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new my(Oc.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=cIe(this.apiClient,e);return l=Fe("cachedContents",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>k0(f))}else{const d=VCe(this.apiClient,e);return l=Fe("cachedContents",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>D0(f))}}async get(e){var n,r,i,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=dIe(this.apiClient,e);return l=Fe("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>k0(f))}else{const d=LCe(this.apiClient,e);return l=Fe("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>D0(f))}}async delete(e){var n,r,i,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=fIe(this.apiClient,e);return l=Fe("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(()=>{const f=xIe(),m=new vF;return Object.assign(m,f),m})}else{const d=UCe(this.apiClient,e);return l=Fe("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(()=>{const f=yIe(),m=new vF;return Object.assign(m,f),m})}}async update(e){var n,r,i,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=mIe(this.apiClient,e);return l=Fe("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>k0(f))}else{const d=jCe(this.apiClient,e);return l=Fe("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>D0(f))}}async listInternal(e){var n,r,i,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=gIe(e);return l=Fe("cachedContents",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:f.headers},v})),o.then(f=>{const m=bIe(f),v=new xF;return Object.assign(v,m),v})}else{const d=qCe(e);return l=Fe("cachedContents",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:f.headers},v})),o.then(f=>{const m=vIe(f),v=new xF;return Object.assign(v,m),v})}}}function CF(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Jt(t){return this instanceof Jt?(this.v=t,this):new Jt(t)}function Ef(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(_){return function(T){return Promise.resolve(T).then(_,m)}}function l(_,T){r[_]&&(i[_]=function(S){return new Promise(function(A,I){s.push([_,S,A,I])>1||u(_,S)})},T&&(i[_]=T(i[_])))}function u(_,T){try{d(r[_](T))}catch(S){v(s[0][3],S)}}function d(_){_.value instanceof Jt?Promise.resolve(_.value.v).then(f,m):v(s[0][2],_)}function f(_){u("next",_)}function m(_){u("throw",_)}function v(_,T){_(T),s.shift(),s.length&&u(s[0][0],s[0][1])}}function qp(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof CF=="function"?CF(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(l,u){o=t[s](o),i(l,u,o.done,o.value)})}}function i(s,o,l,u){Promise.resolve(u).then(function(d){s({value:d,done:l})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wIe(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:z7(n)}function z7(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function TIe(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function IF(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let s=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),s&&!z7(t[r])&&(s=!1),r++;s?e.push(...i):e.pop()}return e}class EIe{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new SIe(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class SIe{constructor(e,n,r,i={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=s,this.sendPromise=Promise.resolve(),TIe(s)}async sendMessage(e){var n;await this.sendPromise;const r=Lr(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,o,l;const u=await i,d=(o=(s=u.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content,f=u.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let v=[];f!=null&&(v=(l=f.slice(m))!==null&&l!==void 0?l:[]);const _=d?[d]:[];this.recordHistory(r,_,v)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=Lr(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const s=await i;return this.processStreamResponse(s,r)}getHistory(e=!1){const n=e?IF(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,i;return Ef(this,arguments,function*(){var o,l,u,d;const f=[];try{for(var m=!0,v=qp(e),_;_=yield Jt(v.next()),o=_.done,!o;m=!0){d=_.value,m=!1;const T=d;if(wIe(T)){const S=(i=(r=T.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;S!==void 0&&f.push(S)}yield yield Jt(T)}}catch(T){l={error:T}}finally{try{!m&&!o&&(u=v.return)&&(yield Jt(u.call(v)))}finally{if(l)throw l.error}}this.recordHistory(n,f)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(s=>s.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...IF(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class p_ extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,p_.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AIe(t,e){const n={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&g(e,["_query","pageSize"],r);const i=p(t,["pageToken"]);return e!==void 0&&i!=null&&g(e,["_query","pageToken"],i),n}function CIe(t){const e={},n=p(t,["config"]);return n!=null&&g(e,["config"],AIe(n,e)),e}function IIe(t){const e={},n=p(t,["details"]);n!=null&&g(e,["details"],n);const r=p(t,["message"]);r!=null&&g(e,["message"],r);const i=p(t,["code"]);return i!=null&&g(e,["code"],i),e}function RIe(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const r=p(t,["displayName"]);r!=null&&g(e,["displayName"],r);const i=p(t,["mimeType"]);i!=null&&g(e,["mimeType"],i);const s=p(t,["sizeBytes"]);s!=null&&g(e,["sizeBytes"],s);const o=p(t,["createTime"]);o!=null&&g(e,["createTime"],o);const l=p(t,["expirationTime"]);l!=null&&g(e,["expirationTime"],l);const u=p(t,["updateTime"]);u!=null&&g(e,["updateTime"],u);const d=p(t,["sha256Hash"]);d!=null&&g(e,["sha256Hash"],d);const f=p(t,["uri"]);f!=null&&g(e,["uri"],f);const m=p(t,["downloadUri"]);m!=null&&g(e,["downloadUri"],m);const v=p(t,["state"]);v!=null&&g(e,["state"],v);const _=p(t,["source"]);_!=null&&g(e,["source"],_);const T=p(t,["videoMetadata"]);T!=null&&g(e,["videoMetadata"],T);const S=p(t,["error"]);return S!=null&&g(e,["error"],IIe(S)),e}function PIe(t){const e={},n=p(t,["file"]);n!=null&&g(e,["file"],RIe(n));const r=p(t,["config"]);return r!=null&&g(e,["config"],r),e}function NIe(t){const e={},n=p(t,["name"]);n!=null&&g(e,["_url","file"],k7(n));const r=p(t,["config"]);return r!=null&&g(e,["config"],r),e}function MIe(t){const e={},n=p(t,["name"]);n!=null&&g(e,["_url","file"],k7(n));const r=p(t,["config"]);return r!=null&&g(e,["config"],r),e}function DIe(t){const e={},n=p(t,["details"]);n!=null&&g(e,["details"],n);const r=p(t,["message"]);r!=null&&g(e,["message"],r);const i=p(t,["code"]);return i!=null&&g(e,["code"],i),e}function aC(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const r=p(t,["displayName"]);r!=null&&g(e,["displayName"],r);const i=p(t,["mimeType"]);i!=null&&g(e,["mimeType"],i);const s=p(t,["sizeBytes"]);s!=null&&g(e,["sizeBytes"],s);const o=p(t,["createTime"]);o!=null&&g(e,["createTime"],o);const l=p(t,["expirationTime"]);l!=null&&g(e,["expirationTime"],l);const u=p(t,["updateTime"]);u!=null&&g(e,["updateTime"],u);const d=p(t,["sha256Hash"]);d!=null&&g(e,["sha256Hash"],d);const f=p(t,["uri"]);f!=null&&g(e,["uri"],f);const m=p(t,["downloadUri"]);m!=null&&g(e,["downloadUri"],m);const v=p(t,["state"]);v!=null&&g(e,["state"],v);const _=p(t,["source"]);_!=null&&g(e,["source"],_);const T=p(t,["videoMetadata"]);T!=null&&g(e,["videoMetadata"],T);const S=p(t,["error"]);return S!=null&&g(e,["error"],DIe(S)),e}function kIe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&g(e,["nextPageToken"],r);const i=p(t,["files"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>aC(o))),g(e,["files"],s)}return e}function OIe(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function VIe(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LIe extends Gc{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new my(Oc.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>aC(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=CIe(e);return s=Fe("files",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:u.headers},f})),i.then(u=>{const d=kIe(u),f=new ZAe;return Object.assign(f,d),f})}}async createInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=PIe(e);return s=Fe("upload/v1beta/files",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const d=OIe(u),f=new e1e;return Object.assign(f,d),f})}}async get(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=NIe(e);return s=Fe("files/{file}",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>aC(u))}}async delete(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=MIe(e);return s=Fe("files/{file}",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(()=>{const u=VIe(),d=new t1e;return Object.assign(d,u),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UIe(t){const e={},n=p(t,["voiceName"]);return n!=null&&g(e,["voiceName"],n),e}function $7(t){const e={},n=p(t,["prebuiltVoiceConfig"]);return n!=null&&g(e,["prebuiltVoiceConfig"],UIe(n)),e}function FIe(t){const e={},n=p(t,["speaker"]);n!=null&&g(e,["speaker"],n);const r=p(t,["voiceConfig"]);return r!=null&&g(e,["voiceConfig"],$7(r)),e}function jIe(t){const e={},n=p(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>FIe(i))),g(e,["speakerVoiceConfigs"],r)}return e}function BIe(t){const e={},n=p(t,["voiceConfig"]);n!=null&&g(e,["voiceConfig"],$7(n));const r=p(t,["multiSpeakerVoiceConfig"]);r!=null&&g(e,["multiSpeakerVoiceConfig"],jIe(r));const i=p(t,["languageCode"]);return i!=null&&g(e,["languageCode"],i),e}function qIe(t){const e={},n=p(t,["fps"]);n!=null&&g(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&g(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&g(e,["startOffset"],i),e}function zIe(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["data"]);n!=null&&g(e,["data"],n);const r=p(t,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function $Ie(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const r=p(t,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function GIe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&g(e,["videoMetadata"],qIe(n));const r=p(t,["thought"]);r!=null&&g(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&g(e,["inlineData"],zIe(i));const s=p(t,["fileData"]);s!=null&&g(e,["fileData"],$Ie(s));const o=p(t,["thoughtSignature"]);o!=null&&g(e,["thoughtSignature"],o);const l=p(t,["codeExecutionResult"]);l!=null&&g(e,["codeExecutionResult"],l);const u=p(t,["executableCode"]);u!=null&&g(e,["executableCode"],u);const d=p(t,["functionCall"]);d!=null&&g(e,["functionCall"],d);const f=p(t,["functionResponse"]);f!=null&&g(e,["functionResponse"],f);const m=p(t,["text"]);return m!=null&&g(e,["text"],m),e}function HIe(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>GIe(s))),g(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&g(e,["role"],r),e}function KIe(t){const e={},n=p(t,["behavior"]);n!=null&&g(e,["behavior"],n);const r=p(t,["description"]);r!=null&&g(e,["description"],r);const i=p(t,["name"]);i!=null&&g(e,["name"],i);const s=p(t,["parameters"]);s!=null&&g(e,["parameters"],s);const o=p(t,["parametersJsonSchema"]);o!=null&&g(e,["parametersJsonSchema"],o);const l=p(t,["response"]);l!=null&&g(e,["response"],l);const u=p(t,["responseJsonSchema"]);return u!=null&&g(e,["responseJsonSchema"],u),e}function WIe(t){const e={},n=p(t,["startTime"]);n!=null&&g(e,["startTime"],n);const r=p(t,["endTime"]);return r!=null&&g(e,["endTime"],r),e}function YIe(t){const e={},n=p(t,["timeRangeFilter"]);if(n!=null&&g(e,["timeRangeFilter"],WIe(n)),p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function JIe(t){const e={},n=p(t,["mode"]);n!=null&&g(e,["mode"],n);const r=p(t,["dynamicThreshold"]);return r!=null&&g(e,["dynamicThreshold"],r),e}function QIe(t){const e={},n=p(t,["dynamicRetrievalConfig"]);return n!=null&&g(e,["dynamicRetrievalConfig"],JIe(n)),e}function XIe(){return{}}function ZIe(t){const e={},n=p(t,["environment"]);return n!=null&&g(e,["environment"],n),e}function eRe(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(d=>KIe(d))),g(e,["functionDeclarations"],u)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=p(t,["googleSearch"]);r!=null&&g(e,["googleSearch"],YIe(r));const i=p(t,["googleSearchRetrieval"]);if(i!=null&&g(e,["googleSearchRetrieval"],QIe(i)),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(p(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");p(t,["urlContext"])!=null&&g(e,["urlContext"],XIe());const o=p(t,["computerUse"]);o!=null&&g(e,["computerUse"],ZIe(o));const l=p(t,["codeExecution"]);return l!=null&&g(e,["codeExecution"],l),e}function tRe(t){const e={},n=p(t,["handle"]);if(n!=null&&g(e,["handle"],n),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function RF(){return{}}function nRe(t){const e={},n=p(t,["disabled"]);n!=null&&g(e,["disabled"],n);const r=p(t,["startOfSpeechSensitivity"]);r!=null&&g(e,["startOfSpeechSensitivity"],r);const i=p(t,["endOfSpeechSensitivity"]);i!=null&&g(e,["endOfSpeechSensitivity"],i);const s=p(t,["prefixPaddingMs"]);s!=null&&g(e,["prefixPaddingMs"],s);const o=p(t,["silenceDurationMs"]);return o!=null&&g(e,["silenceDurationMs"],o),e}function rRe(t){const e={},n=p(t,["automaticActivityDetection"]);n!=null&&g(e,["automaticActivityDetection"],nRe(n));const r=p(t,["activityHandling"]);r!=null&&g(e,["activityHandling"],r);const i=p(t,["turnCoverage"]);return i!=null&&g(e,["turnCoverage"],i),e}function iRe(t){const e={},n=p(t,["targetTokens"]);return n!=null&&g(e,["targetTokens"],n),e}function sRe(t){const e={},n=p(t,["triggerTokens"]);n!=null&&g(e,["triggerTokens"],n);const r=p(t,["slidingWindow"]);return r!=null&&g(e,["slidingWindow"],iRe(r)),e}function oRe(t){const e={},n=p(t,["proactiveAudio"]);return n!=null&&g(e,["proactiveAudio"],n),e}function aRe(t,e){const n={},r=p(t,["generationConfig"]);e!==void 0&&r!=null&&g(e,["setup","generationConfig"],r);const i=p(t,["responseModalities"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig","responseModalities"],i);const s=p(t,["temperature"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig","temperature"],s);const o=p(t,["topP"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","topP"],o);const l=p(t,["topK"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","topK"],l);const u=p(t,["maxOutputTokens"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","maxOutputTokens"],u);const d=p(t,["mediaResolution"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","mediaResolution"],d);const f=p(t,["seed"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","seed"],f);const m=p(t,["speechConfig"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","speechConfig"],BIe(TN(m)));const v=p(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],v);const _=p(t,["systemInstruction"]);e!==void 0&&_!=null&&g(e,["setup","systemInstruction"],HIe(Lr(_)));const T=p(t,["tools"]);if(e!==void 0&&T!=null){let O=kh(T);Array.isArray(O)&&(O=O.map(q=>eRe(Dh(q)))),g(e,["setup","tools"],O)}const S=p(t,["sessionResumption"]);e!==void 0&&S!=null&&g(e,["setup","sessionResumption"],tRe(S));const A=p(t,["inputAudioTranscription"]);e!==void 0&&A!=null&&g(e,["setup","inputAudioTranscription"],RF());const I=p(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&g(e,["setup","outputAudioTranscription"],RF());const D=p(t,["realtimeInputConfig"]);e!==void 0&&D!=null&&g(e,["setup","realtimeInputConfig"],rRe(D));const N=p(t,["contextWindowCompression"]);e!==void 0&&N!=null&&g(e,["setup","contextWindowCompression"],sRe(N));const U=p(t,["proactivity"]);return e!==void 0&&U!=null&&g(e,["setup","proactivity"],oRe(U)),n}function lRe(t,e){const n={},r=p(e,["model"]);r!=null&&g(n,["setup","model"],Ct(t,r));const i=p(e,["config"]);return i!=null&&g(n,["config"],aRe(i,n)),n}function uRe(){return{}}function cRe(){return{}}function dRe(t){const e={},n=p(t,["media"]);n!=null&&g(e,["mediaChunks"],I7(n));const r=p(t,["audio"]);r!=null&&g(e,["audio"],P7(r));const i=p(t,["audioStreamEnd"]);i!=null&&g(e,["audioStreamEnd"],i);const s=p(t,["video"]);s!=null&&g(e,["video"],R7(s));const o=p(t,["text"]);return o!=null&&g(e,["text"],o),p(t,["activityStart"])!=null&&g(e,["activityStart"],uRe()),p(t,["activityEnd"])!=null&&g(e,["activityEnd"],cRe()),e}function G7(t){const e={},n=p(t,["text"]);n!=null&&g(e,["text"],n);const r=p(t,["weight"]);return r!=null&&g(e,["weight"],r),e}function fRe(t){const e={},n=p(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>G7(i))),g(e,["weightedPrompts"],r)}return e}function H7(t){const e={},n=p(t,["temperature"]);n!=null&&g(e,["temperature"],n);const r=p(t,["topK"]);r!=null&&g(e,["topK"],r);const i=p(t,["seed"]);i!=null&&g(e,["seed"],i);const s=p(t,["guidance"]);s!=null&&g(e,["guidance"],s);const o=p(t,["bpm"]);o!=null&&g(e,["bpm"],o);const l=p(t,["density"]);l!=null&&g(e,["density"],l);const u=p(t,["brightness"]);u!=null&&g(e,["brightness"],u);const d=p(t,["scale"]);d!=null&&g(e,["scale"],d);const f=p(t,["muteBass"]);f!=null&&g(e,["muteBass"],f);const m=p(t,["muteDrums"]);m!=null&&g(e,["muteDrums"],m);const v=p(t,["onlyBassAndDrums"]);v!=null&&g(e,["onlyBassAndDrums"],v);const _=p(t,["musicGenerationMode"]);return _!=null&&g(e,["musicGenerationMode"],_),e}function hRe(t){const e={},n=p(t,["musicGenerationConfig"]);return n!=null&&g(e,["musicGenerationConfig"],H7(n)),e}function K7(t){const e={},n=p(t,["model"]);return n!=null&&g(e,["model"],n),e}function W7(t){const e={},n=p(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>G7(i))),g(e,["weightedPrompts"],r)}return e}function lC(t){const e={},n=p(t,["setup"]);n!=null&&g(e,["setup"],K7(n));const r=p(t,["clientContent"]);r!=null&&g(e,["clientContent"],W7(r));const i=p(t,["musicGenerationConfig"]);i!=null&&g(e,["musicGenerationConfig"],H7(i));const s=p(t,["playbackControl"]);return s!=null&&g(e,["playbackControl"],s),e}function mRe(t){const e={},n=p(t,["voiceName"]);return n!=null&&g(e,["voiceName"],n),e}function pRe(t){const e={},n=p(t,["prebuiltVoiceConfig"]);return n!=null&&g(e,["prebuiltVoiceConfig"],mRe(n)),e}function gRe(t){const e={},n=p(t,["voiceConfig"]);if(n!=null&&g(e,["voiceConfig"],pRe(n)),p(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=p(t,["languageCode"]);return r!=null&&g(e,["languageCode"],r),e}function yRe(t){const e={},n=p(t,["fps"]);n!=null&&g(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&g(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&g(e,["startOffset"],i),e}function vRe(t){const e={},n=p(t,["displayName"]);n!=null&&g(e,["displayName"],n);const r=p(t,["data"]);r!=null&&g(e,["data"],r);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function xRe(t){const e={},n=p(t,["displayName"]);n!=null&&g(e,["displayName"],n);const r=p(t,["fileUri"]);r!=null&&g(e,["fileUri"],r);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function bRe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&g(e,["videoMetadata"],yRe(n));const r=p(t,["thought"]);r!=null&&g(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&g(e,["inlineData"],vRe(i));const s=p(t,["fileData"]);s!=null&&g(e,["fileData"],xRe(s));const o=p(t,["thoughtSignature"]);o!=null&&g(e,["thoughtSignature"],o);const l=p(t,["codeExecutionResult"]);l!=null&&g(e,["codeExecutionResult"],l);const u=p(t,["executableCode"]);u!=null&&g(e,["executableCode"],u);const d=p(t,["functionCall"]);d!=null&&g(e,["functionCall"],d);const f=p(t,["functionResponse"]);f!=null&&g(e,["functionResponse"],f);const m=p(t,["text"]);return m!=null&&g(e,["text"],m),e}function _Re(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>bRe(s))),g(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&g(e,["role"],r),e}function wRe(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&g(e,["description"],n);const r=p(t,["name"]);r!=null&&g(e,["name"],r);const i=p(t,["parameters"]);i!=null&&g(e,["parameters"],i);const s=p(t,["parametersJsonSchema"]);s!=null&&g(e,["parametersJsonSchema"],s);const o=p(t,["response"]);o!=null&&g(e,["response"],o);const l=p(t,["responseJsonSchema"]);return l!=null&&g(e,["responseJsonSchema"],l),e}function TRe(t){const e={},n=p(t,["startTime"]);n!=null&&g(e,["startTime"],n);const r=p(t,["endTime"]);return r!=null&&g(e,["endTime"],r),e}function ERe(t){const e={},n=p(t,["timeRangeFilter"]);n!=null&&g(e,["timeRangeFilter"],TRe(n));const r=p(t,["excludeDomains"]);return r!=null&&g(e,["excludeDomains"],r),e}function SRe(t){const e={},n=p(t,["mode"]);n!=null&&g(e,["mode"],n);const r=p(t,["dynamicThreshold"]);return r!=null&&g(e,["dynamicThreshold"],r),e}function ARe(t){const e={},n=p(t,["dynamicRetrievalConfig"]);return n!=null&&g(e,["dynamicRetrievalConfig"],SRe(n)),e}function CRe(t){const e={},n=p(t,["excludeDomains"]);return n!=null&&g(e,["excludeDomains"],n),e}function IRe(t){const e={},n=p(t,["apiKeyString"]);return n!=null&&g(e,["apiKeyString"],n),e}function RRe(t){const e={},n=p(t,["apiKeyConfig"]);n!=null&&g(e,["apiKeyConfig"],IRe(n));const r=p(t,["authType"]);r!=null&&g(e,["authType"],r);const i=p(t,["googleServiceAccountConfig"]);i!=null&&g(e,["googleServiceAccountConfig"],i);const s=p(t,["httpBasicAuthConfig"]);s!=null&&g(e,["httpBasicAuthConfig"],s);const o=p(t,["oauthConfig"]);o!=null&&g(e,["oauthConfig"],o);const l=p(t,["oidcConfig"]);return l!=null&&g(e,["oidcConfig"],l),e}function PRe(t){const e={},n=p(t,["authConfig"]);return n!=null&&g(e,["authConfig"],RRe(n)),e}function NRe(){return{}}function MRe(t){const e={},n=p(t,["environment"]);return n!=null&&g(e,["environment"],n),e}function DRe(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(v=>wRe(v))),g(e,["functionDeclarations"],m)}const r=p(t,["retrieval"]);r!=null&&g(e,["retrieval"],r);const i=p(t,["googleSearch"]);i!=null&&g(e,["googleSearch"],ERe(i));const s=p(t,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],ARe(s));const o=p(t,["enterpriseWebSearch"]);o!=null&&g(e,["enterpriseWebSearch"],CRe(o));const l=p(t,["googleMaps"]);l!=null&&g(e,["googleMaps"],PRe(l)),p(t,["urlContext"])!=null&&g(e,["urlContext"],NRe());const d=p(t,["computerUse"]);d!=null&&g(e,["computerUse"],MRe(d));const f=p(t,["codeExecution"]);return f!=null&&g(e,["codeExecution"],f),e}function kRe(t){const e={},n=p(t,["handle"]);n!=null&&g(e,["handle"],n);const r=p(t,["transparent"]);return r!=null&&g(e,["transparent"],r),e}function PF(){return{}}function ORe(t){const e={},n=p(t,["disabled"]);n!=null&&g(e,["disabled"],n);const r=p(t,["startOfSpeechSensitivity"]);r!=null&&g(e,["startOfSpeechSensitivity"],r);const i=p(t,["endOfSpeechSensitivity"]);i!=null&&g(e,["endOfSpeechSensitivity"],i);const s=p(t,["prefixPaddingMs"]);s!=null&&g(e,["prefixPaddingMs"],s);const o=p(t,["silenceDurationMs"]);return o!=null&&g(e,["silenceDurationMs"],o),e}function VRe(t){const e={},n=p(t,["automaticActivityDetection"]);n!=null&&g(e,["automaticActivityDetection"],ORe(n));const r=p(t,["activityHandling"]);r!=null&&g(e,["activityHandling"],r);const i=p(t,["turnCoverage"]);return i!=null&&g(e,["turnCoverage"],i),e}function LRe(t){const e={},n=p(t,["targetTokens"]);return n!=null&&g(e,["targetTokens"],n),e}function URe(t){const e={},n=p(t,["triggerTokens"]);n!=null&&g(e,["triggerTokens"],n);const r=p(t,["slidingWindow"]);return r!=null&&g(e,["slidingWindow"],LRe(r)),e}function FRe(t){const e={},n=p(t,["proactiveAudio"]);return n!=null&&g(e,["proactiveAudio"],n),e}function jRe(t,e){const n={},r=p(t,["generationConfig"]);e!==void 0&&r!=null&&g(e,["setup","generationConfig"],r);const i=p(t,["responseModalities"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig","responseModalities"],i);const s=p(t,["temperature"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig","temperature"],s);const o=p(t,["topP"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","topP"],o);const l=p(t,["topK"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","topK"],l);const u=p(t,["maxOutputTokens"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","maxOutputTokens"],u);const d=p(t,["mediaResolution"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","mediaResolution"],d);const f=p(t,["seed"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","seed"],f);const m=p(t,["speechConfig"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","speechConfig"],gRe(TN(m)));const v=p(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],v);const _=p(t,["systemInstruction"]);e!==void 0&&_!=null&&g(e,["setup","systemInstruction"],_Re(Lr(_)));const T=p(t,["tools"]);if(e!==void 0&&T!=null){let O=kh(T);Array.isArray(O)&&(O=O.map(q=>DRe(Dh(q)))),g(e,["setup","tools"],O)}const S=p(t,["sessionResumption"]);e!==void 0&&S!=null&&g(e,["setup","sessionResumption"],kRe(S));const A=p(t,["inputAudioTranscription"]);e!==void 0&&A!=null&&g(e,["setup","inputAudioTranscription"],PF());const I=p(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&g(e,["setup","outputAudioTranscription"],PF());const D=p(t,["realtimeInputConfig"]);e!==void 0&&D!=null&&g(e,["setup","realtimeInputConfig"],VRe(D));const N=p(t,["contextWindowCompression"]);e!==void 0&&N!=null&&g(e,["setup","contextWindowCompression"],URe(N));const U=p(t,["proactivity"]);return e!==void 0&&U!=null&&g(e,["setup","proactivity"],FRe(U)),n}function BRe(t,e){const n={},r=p(e,["model"]);r!=null&&g(n,["setup","model"],Ct(t,r));const i=p(e,["config"]);return i!=null&&g(n,["config"],jRe(i,n)),n}function qRe(){return{}}function zRe(){return{}}function $Re(t){const e={},n=p(t,["media"]);n!=null&&g(e,["mediaChunks"],I7(n));const r=p(t,["audio"]);r!=null&&g(e,["audio"],P7(r));const i=p(t,["audioStreamEnd"]);i!=null&&g(e,["audioStreamEnd"],i);const s=p(t,["video"]);s!=null&&g(e,["video"],R7(s));const o=p(t,["text"]);return o!=null&&g(e,["text"],o),p(t,["activityStart"])!=null&&g(e,["activityStart"],qRe()),p(t,["activityEnd"])!=null&&g(e,["activityEnd"],zRe()),e}function GRe(){return{}}function HRe(t){const e={},n=p(t,["fps"]);n!=null&&g(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&g(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&g(e,["startOffset"],i),e}function KRe(t){const e={},n=p(t,["data"]);n!=null&&g(e,["data"],n);const r=p(t,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function WRe(t){const e={},n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const r=p(t,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function YRe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&g(e,["videoMetadata"],HRe(n));const r=p(t,["thought"]);r!=null&&g(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&g(e,["inlineData"],KRe(i));const s=p(t,["fileData"]);s!=null&&g(e,["fileData"],WRe(s));const o=p(t,["thoughtSignature"]);o!=null&&g(e,["thoughtSignature"],o);const l=p(t,["codeExecutionResult"]);l!=null&&g(e,["codeExecutionResult"],l);const u=p(t,["executableCode"]);u!=null&&g(e,["executableCode"],u);const d=p(t,["functionCall"]);d!=null&&g(e,["functionCall"],d);const f=p(t,["functionResponse"]);f!=null&&g(e,["functionResponse"],f);const m=p(t,["text"]);return m!=null&&g(e,["text"],m),e}function JRe(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>YRe(s))),g(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&g(e,["role"],r),e}function NF(t){const e={},n=p(t,["text"]);n!=null&&g(e,["text"],n);const r=p(t,["finished"]);return r!=null&&g(e,["finished"],r),e}function QRe(t){const e={},n=p(t,["retrievedUrl"]);n!=null&&g(e,["retrievedUrl"],n);const r=p(t,["urlRetrievalStatus"]);return r!=null&&g(e,["urlRetrievalStatus"],r),e}function XRe(t){const e={},n=p(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>QRe(i))),g(e,["urlMetadata"],r)}return e}function ZRe(t){const e={},n=p(t,["modelTurn"]);n!=null&&g(e,["modelTurn"],JRe(n));const r=p(t,["turnComplete"]);r!=null&&g(e,["turnComplete"],r);const i=p(t,["interrupted"]);i!=null&&g(e,["interrupted"],i);const s=p(t,["groundingMetadata"]);s!=null&&g(e,["groundingMetadata"],s);const o=p(t,["generationComplete"]);o!=null&&g(e,["generationComplete"],o);const l=p(t,["inputTranscription"]);l!=null&&g(e,["inputTranscription"],NF(l));const u=p(t,["outputTranscription"]);u!=null&&g(e,["outputTranscription"],NF(u));const d=p(t,["urlContextMetadata"]);return d!=null&&g(e,["urlContextMetadata"],XRe(d)),e}function ePe(t){const e={},n=p(t,["id"]);n!=null&&g(e,["id"],n);const r=p(t,["args"]);r!=null&&g(e,["args"],r);const i=p(t,["name"]);return i!=null&&g(e,["name"],i),e}function tPe(t){const e={},n=p(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>ePe(i))),g(e,["functionCalls"],r)}return e}function nPe(t){const e={},n=p(t,["ids"]);return n!=null&&g(e,["ids"],n),e}function u0(t){const e={},n=p(t,["modality"]);n!=null&&g(e,["modality"],n);const r=p(t,["tokenCount"]);return r!=null&&g(e,["tokenCount"],r),e}function rPe(t){const e={},n=p(t,["promptTokenCount"]);n!=null&&g(e,["promptTokenCount"],n);const r=p(t,["cachedContentTokenCount"]);r!=null&&g(e,["cachedContentTokenCount"],r);const i=p(t,["responseTokenCount"]);i!=null&&g(e,["responseTokenCount"],i);const s=p(t,["toolUsePromptTokenCount"]);s!=null&&g(e,["toolUsePromptTokenCount"],s);const o=p(t,["thoughtsTokenCount"]);o!=null&&g(e,["thoughtsTokenCount"],o);const l=p(t,["totalTokenCount"]);l!=null&&g(e,["totalTokenCount"],l);const u=p(t,["promptTokensDetails"]);if(u!=null){let v=u;Array.isArray(v)&&(v=v.map(_=>u0(_))),g(e,["promptTokensDetails"],v)}const d=p(t,["cacheTokensDetails"]);if(d!=null){let v=d;Array.isArray(v)&&(v=v.map(_=>u0(_))),g(e,["cacheTokensDetails"],v)}const f=p(t,["responseTokensDetails"]);if(f!=null){let v=f;Array.isArray(v)&&(v=v.map(_=>u0(_))),g(e,["responseTokensDetails"],v)}const m=p(t,["toolUsePromptTokensDetails"]);if(m!=null){let v=m;Array.isArray(v)&&(v=v.map(_=>u0(_))),g(e,["toolUsePromptTokensDetails"],v)}return e}function iPe(t){const e={},n=p(t,["timeLeft"]);return n!=null&&g(e,["timeLeft"],n),e}function sPe(t){const e={},n=p(t,["newHandle"]);n!=null&&g(e,["newHandle"],n);const r=p(t,["resumable"]);r!=null&&g(e,["resumable"],r);const i=p(t,["lastConsumedClientMessageIndex"]);return i!=null&&g(e,["lastConsumedClientMessageIndex"],i),e}function oPe(t){const e={};p(t,["setupComplete"])!=null&&g(e,["setupComplete"],GRe());const r=p(t,["serverContent"]);r!=null&&g(e,["serverContent"],ZRe(r));const i=p(t,["toolCall"]);i!=null&&g(e,["toolCall"],tPe(i));const s=p(t,["toolCallCancellation"]);s!=null&&g(e,["toolCallCancellation"],nPe(s));const o=p(t,["usageMetadata"]);o!=null&&g(e,["usageMetadata"],rPe(o));const l=p(t,["goAway"]);l!=null&&g(e,["goAway"],iPe(l));const u=p(t,["sessionResumptionUpdate"]);return u!=null&&g(e,["sessionResumptionUpdate"],sPe(u)),e}function aPe(){return{}}function lPe(t){const e={},n=p(t,["text"]);n!=null&&g(e,["text"],n);const r=p(t,["weight"]);return r!=null&&g(e,["weight"],r),e}function uPe(t){const e={},n=p(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>lPe(i))),g(e,["weightedPrompts"],r)}return e}function cPe(t){const e={},n=p(t,["temperature"]);n!=null&&g(e,["temperature"],n);const r=p(t,["topK"]);r!=null&&g(e,["topK"],r);const i=p(t,["seed"]);i!=null&&g(e,["seed"],i);const s=p(t,["guidance"]);s!=null&&g(e,["guidance"],s);const o=p(t,["bpm"]);o!=null&&g(e,["bpm"],o);const l=p(t,["density"]);l!=null&&g(e,["density"],l);const u=p(t,["brightness"]);u!=null&&g(e,["brightness"],u);const d=p(t,["scale"]);d!=null&&g(e,["scale"],d);const f=p(t,["muteBass"]);f!=null&&g(e,["muteBass"],f);const m=p(t,["muteDrums"]);m!=null&&g(e,["muteDrums"],m);const v=p(t,["onlyBassAndDrums"]);v!=null&&g(e,["onlyBassAndDrums"],v);const _=p(t,["musicGenerationMode"]);return _!=null&&g(e,["musicGenerationMode"],_),e}function dPe(t){const e={},n=p(t,["clientContent"]);n!=null&&g(e,["clientContent"],uPe(n));const r=p(t,["musicGenerationConfig"]);return r!=null&&g(e,["musicGenerationConfig"],cPe(r)),e}function fPe(t){const e={},n=p(t,["data"]);n!=null&&g(e,["data"],n);const r=p(t,["mimeType"]);r!=null&&g(e,["mimeType"],r);const i=p(t,["sourceMetadata"]);return i!=null&&g(e,["sourceMetadata"],dPe(i)),e}function hPe(t){const e={},n=p(t,["audioChunks"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>fPe(i))),g(e,["audioChunks"],r)}return e}function mPe(t){const e={},n=p(t,["text"]);n!=null&&g(e,["text"],n);const r=p(t,["filteredReason"]);return r!=null&&g(e,["filteredReason"],r),e}function pPe(t){const e={};p(t,["setupComplete"])!=null&&g(e,["setupComplete"],aPe());const r=p(t,["serverContent"]);r!=null&&g(e,["serverContent"],hPe(r));const i=p(t,["filteredPrompt"]);return i!=null&&g(e,["filteredPrompt"],mPe(i)),e}function gPe(t){const e={},n=p(t,["sessionId"]);return n!=null&&g(e,["sessionId"],n),e}function yPe(t){const e={},n=p(t,["fps"]);n!=null&&g(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&g(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&g(e,["startOffset"],i),e}function vPe(t){const e={},n=p(t,["displayName"]);n!=null&&g(e,["displayName"],n);const r=p(t,["data"]);r!=null&&g(e,["data"],r);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function xPe(t){const e={},n=p(t,["displayName"]);n!=null&&g(e,["displayName"],n);const r=p(t,["fileUri"]);r!=null&&g(e,["fileUri"],r);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function bPe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&g(e,["videoMetadata"],yPe(n));const r=p(t,["thought"]);r!=null&&g(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&g(e,["inlineData"],vPe(i));const s=p(t,["fileData"]);s!=null&&g(e,["fileData"],xPe(s));const o=p(t,["thoughtSignature"]);o!=null&&g(e,["thoughtSignature"],o);const l=p(t,["codeExecutionResult"]);l!=null&&g(e,["codeExecutionResult"],l);const u=p(t,["executableCode"]);u!=null&&g(e,["executableCode"],u);const d=p(t,["functionCall"]);d!=null&&g(e,["functionCall"],d);const f=p(t,["functionResponse"]);f!=null&&g(e,["functionResponse"],f);const m=p(t,["text"]);return m!=null&&g(e,["text"],m),e}function _Pe(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>bPe(s))),g(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&g(e,["role"],r),e}function MF(t){const e={},n=p(t,["text"]);n!=null&&g(e,["text"],n);const r=p(t,["finished"]);return r!=null&&g(e,["finished"],r),e}function wPe(t){const e={},n=p(t,["modelTurn"]);n!=null&&g(e,["modelTurn"],_Pe(n));const r=p(t,["turnComplete"]);r!=null&&g(e,["turnComplete"],r);const i=p(t,["interrupted"]);i!=null&&g(e,["interrupted"],i);const s=p(t,["groundingMetadata"]);s!=null&&g(e,["groundingMetadata"],s);const o=p(t,["generationComplete"]);o!=null&&g(e,["generationComplete"],o);const l=p(t,["inputTranscription"]);l!=null&&g(e,["inputTranscription"],MF(l));const u=p(t,["outputTranscription"]);return u!=null&&g(e,["outputTranscription"],MF(u)),e}function TPe(t){const e={},n=p(t,["args"]);n!=null&&g(e,["args"],n);const r=p(t,["name"]);return r!=null&&g(e,["name"],r),e}function EPe(t){const e={},n=p(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>TPe(i))),g(e,["functionCalls"],r)}return e}function SPe(t){const e={},n=p(t,["ids"]);return n!=null&&g(e,["ids"],n),e}function c0(t){const e={},n=p(t,["modality"]);n!=null&&g(e,["modality"],n);const r=p(t,["tokenCount"]);return r!=null&&g(e,["tokenCount"],r),e}function APe(t){const e={},n=p(t,["promptTokenCount"]);n!=null&&g(e,["promptTokenCount"],n);const r=p(t,["cachedContentTokenCount"]);r!=null&&g(e,["cachedContentTokenCount"],r);const i=p(t,["candidatesTokenCount"]);i!=null&&g(e,["responseTokenCount"],i);const s=p(t,["toolUsePromptTokenCount"]);s!=null&&g(e,["toolUsePromptTokenCount"],s);const o=p(t,["thoughtsTokenCount"]);o!=null&&g(e,["thoughtsTokenCount"],o);const l=p(t,["totalTokenCount"]);l!=null&&g(e,["totalTokenCount"],l);const u=p(t,["promptTokensDetails"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(T=>c0(T))),g(e,["promptTokensDetails"],_)}const d=p(t,["cacheTokensDetails"]);if(d!=null){let _=d;Array.isArray(_)&&(_=_.map(T=>c0(T))),g(e,["cacheTokensDetails"],_)}const f=p(t,["candidatesTokensDetails"]);if(f!=null){let _=f;Array.isArray(_)&&(_=_.map(T=>c0(T))),g(e,["responseTokensDetails"],_)}const m=p(t,["toolUsePromptTokensDetails"]);if(m!=null){let _=m;Array.isArray(_)&&(_=_.map(T=>c0(T))),g(e,["toolUsePromptTokensDetails"],_)}const v=p(t,["trafficType"]);return v!=null&&g(e,["trafficType"],v),e}function CPe(t){const e={},n=p(t,["timeLeft"]);return n!=null&&g(e,["timeLeft"],n),e}function IPe(t){const e={},n=p(t,["newHandle"]);n!=null&&g(e,["newHandle"],n);const r=p(t,["resumable"]);r!=null&&g(e,["resumable"],r);const i=p(t,["lastConsumedClientMessageIndex"]);return i!=null&&g(e,["lastConsumedClientMessageIndex"],i),e}function RPe(t){const e={},n=p(t,["setupComplete"]);n!=null&&g(e,["setupComplete"],gPe(n));const r=p(t,["serverContent"]);r!=null&&g(e,["serverContent"],wPe(r));const i=p(t,["toolCall"]);i!=null&&g(e,["toolCall"],EPe(i));const s=p(t,["toolCallCancellation"]);s!=null&&g(e,["toolCallCancellation"],SPe(s));const o=p(t,["usageMetadata"]);o!=null&&g(e,["usageMetadata"],APe(o));const l=p(t,["goAway"]);l!=null&&g(e,["goAway"],CPe(l));const u=p(t,["sessionResumptionUpdate"]);return u!=null&&g(e,["sessionResumptionUpdate"],IPe(u)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PPe(t){const e={},n=p(t,["fps"]);n!=null&&g(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&g(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&g(e,["startOffset"],i),e}function NPe(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["data"]);n!=null&&g(e,["data"],n);const r=p(t,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function MPe(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const r=p(t,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function DPe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&g(e,["videoMetadata"],PPe(n));const r=p(t,["thought"]);r!=null&&g(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&g(e,["inlineData"],NPe(i));const s=p(t,["fileData"]);s!=null&&g(e,["fileData"],MPe(s));const o=p(t,["thoughtSignature"]);o!=null&&g(e,["thoughtSignature"],o);const l=p(t,["codeExecutionResult"]);l!=null&&g(e,["codeExecutionResult"],l);const u=p(t,["executableCode"]);u!=null&&g(e,["executableCode"],u);const d=p(t,["functionCall"]);d!=null&&g(e,["functionCall"],d);const f=p(t,["functionResponse"]);f!=null&&g(e,["functionResponse"],f);const m=p(t,["text"]);return m!=null&&g(e,["text"],m),e}function g_(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>DPe(s))),g(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&g(e,["role"],r),e}function kPe(t){const e={},n=p(t,["anyOf"]);n!=null&&g(e,["anyOf"],n);const r=p(t,["default"]);r!=null&&g(e,["default"],r);const i=p(t,["description"]);i!=null&&g(e,["description"],i);const s=p(t,["enum"]);s!=null&&g(e,["enum"],s);const o=p(t,["example"]);o!=null&&g(e,["example"],o);const l=p(t,["format"]);l!=null&&g(e,["format"],l);const u=p(t,["items"]);u!=null&&g(e,["items"],u);const d=p(t,["maxItems"]);d!=null&&g(e,["maxItems"],d);const f=p(t,["maxLength"]);f!=null&&g(e,["maxLength"],f);const m=p(t,["maxProperties"]);m!=null&&g(e,["maxProperties"],m);const v=p(t,["maximum"]);v!=null&&g(e,["maximum"],v);const _=p(t,["minItems"]);_!=null&&g(e,["minItems"],_);const T=p(t,["minLength"]);T!=null&&g(e,["minLength"],T);const S=p(t,["minProperties"]);S!=null&&g(e,["minProperties"],S);const A=p(t,["minimum"]);A!=null&&g(e,["minimum"],A);const I=p(t,["nullable"]);I!=null&&g(e,["nullable"],I);const D=p(t,["pattern"]);D!=null&&g(e,["pattern"],D);const N=p(t,["properties"]);N!=null&&g(e,["properties"],N);const U=p(t,["propertyOrdering"]);U!=null&&g(e,["propertyOrdering"],U);const O=p(t,["required"]);O!=null&&g(e,["required"],O);const q=p(t,["title"]);q!=null&&g(e,["title"],q);const M=p(t,["type"]);return M!=null&&g(e,["type"],M),e}function OPe(t){const e={};if(p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=p(t,["category"]);n!=null&&g(e,["category"],n);const r=p(t,["threshold"]);return r!=null&&g(e,["threshold"],r),e}function VPe(t){const e={},n=p(t,["behavior"]);n!=null&&g(e,["behavior"],n);const r=p(t,["description"]);r!=null&&g(e,["description"],r);const i=p(t,["name"]);i!=null&&g(e,["name"],i);const s=p(t,["parameters"]);s!=null&&g(e,["parameters"],s);const o=p(t,["parametersJsonSchema"]);o!=null&&g(e,["parametersJsonSchema"],o);const l=p(t,["response"]);l!=null&&g(e,["response"],l);const u=p(t,["responseJsonSchema"]);return u!=null&&g(e,["responseJsonSchema"],u),e}function LPe(t){const e={},n=p(t,["startTime"]);n!=null&&g(e,["startTime"],n);const r=p(t,["endTime"]);return r!=null&&g(e,["endTime"],r),e}function UPe(t){const e={},n=p(t,["timeRangeFilter"]);if(n!=null&&g(e,["timeRangeFilter"],LPe(n)),p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function FPe(t){const e={},n=p(t,["mode"]);n!=null&&g(e,["mode"],n);const r=p(t,["dynamicThreshold"]);return r!=null&&g(e,["dynamicThreshold"],r),e}function jPe(t){const e={},n=p(t,["dynamicRetrievalConfig"]);return n!=null&&g(e,["dynamicRetrievalConfig"],FPe(n)),e}function BPe(){return{}}function qPe(t){const e={},n=p(t,["environment"]);return n!=null&&g(e,["environment"],n),e}function zPe(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(d=>VPe(d))),g(e,["functionDeclarations"],u)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=p(t,["googleSearch"]);r!=null&&g(e,["googleSearch"],UPe(r));const i=p(t,["googleSearchRetrieval"]);if(i!=null&&g(e,["googleSearchRetrieval"],jPe(i)),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(p(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");p(t,["urlContext"])!=null&&g(e,["urlContext"],BPe());const o=p(t,["computerUse"]);o!=null&&g(e,["computerUse"],qPe(o));const l=p(t,["codeExecution"]);return l!=null&&g(e,["codeExecution"],l),e}function $Pe(t){const e={},n=p(t,["mode"]);n!=null&&g(e,["mode"],n);const r=p(t,["allowedFunctionNames"]);return r!=null&&g(e,["allowedFunctionNames"],r),e}function GPe(t){const e={},n=p(t,["latitude"]);n!=null&&g(e,["latitude"],n);const r=p(t,["longitude"]);return r!=null&&g(e,["longitude"],r),e}function HPe(t){const e={},n=p(t,["latLng"]);n!=null&&g(e,["latLng"],GPe(n));const r=p(t,["languageCode"]);return r!=null&&g(e,["languageCode"],r),e}function KPe(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&g(e,["functionCallingConfig"],$Pe(n));const r=p(t,["retrievalConfig"]);return r!=null&&g(e,["retrievalConfig"],HPe(r)),e}function WPe(t){const e={},n=p(t,["voiceName"]);return n!=null&&g(e,["voiceName"],n),e}function Y7(t){const e={},n=p(t,["prebuiltVoiceConfig"]);return n!=null&&g(e,["prebuiltVoiceConfig"],WPe(n)),e}function YPe(t){const e={},n=p(t,["speaker"]);n!=null&&g(e,["speaker"],n);const r=p(t,["voiceConfig"]);return r!=null&&g(e,["voiceConfig"],Y7(r)),e}function JPe(t){const e={},n=p(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>YPe(i))),g(e,["speakerVoiceConfigs"],r)}return e}function QPe(t){const e={},n=p(t,["voiceConfig"]);n!=null&&g(e,["voiceConfig"],Y7(n));const r=p(t,["multiSpeakerVoiceConfig"]);r!=null&&g(e,["multiSpeakerVoiceConfig"],JPe(r));const i=p(t,["languageCode"]);return i!=null&&g(e,["languageCode"],i),e}function XPe(t){const e={},n=p(t,["includeThoughts"]);n!=null&&g(e,["includeThoughts"],n);const r=p(t,["thinkingBudget"]);return r!=null&&g(e,["thinkingBudget"],r),e}function ZPe(t,e,n){const r={},i=p(e,["systemInstruction"]);n!==void 0&&i!=null&&g(n,["systemInstruction"],g_(Lr(i)));const s=p(e,["temperature"]);s!=null&&g(r,["temperature"],s);const o=p(e,["topP"]);o!=null&&g(r,["topP"],o);const l=p(e,["topK"]);l!=null&&g(r,["topK"],l);const u=p(e,["candidateCount"]);u!=null&&g(r,["candidateCount"],u);const d=p(e,["maxOutputTokens"]);d!=null&&g(r,["maxOutputTokens"],d);const f=p(e,["stopSequences"]);f!=null&&g(r,["stopSequences"],f);const m=p(e,["responseLogprobs"]);m!=null&&g(r,["responseLogprobs"],m);const v=p(e,["logprobs"]);v!=null&&g(r,["logprobs"],v);const _=p(e,["presencePenalty"]);_!=null&&g(r,["presencePenalty"],_);const T=p(e,["frequencyPenalty"]);T!=null&&g(r,["frequencyPenalty"],T);const S=p(e,["seed"]);S!=null&&g(r,["seed"],S);const A=p(e,["responseMimeType"]);A!=null&&g(r,["responseMimeType"],A);const I=p(e,["responseSchema"]);I!=null&&g(r,["responseSchema"],kPe(_N(I)));const D=p(e,["responseJsonSchema"]);if(D!=null&&g(r,["responseJsonSchema"],D),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const N=p(e,["safetySettings"]);if(n!==void 0&&N!=null){let j=N;Array.isArray(j)&&(j=j.map(G=>OPe(G))),g(n,["safetySettings"],j)}const U=p(e,["tools"]);if(n!==void 0&&U!=null){let j=kh(U);Array.isArray(j)&&(j=j.map(G=>zPe(Dh(G)))),g(n,["tools"],j)}const O=p(e,["toolConfig"]);if(n!==void 0&&O!=null&&g(n,["toolConfig"],KPe(O)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const q=p(e,["cachedContent"]);n!==void 0&&q!=null&&g(n,["cachedContent"],Ta(t,q));const M=p(e,["responseModalities"]);M!=null&&g(r,["responseModalities"],M);const R=p(e,["mediaResolution"]);R!=null&&g(r,["mediaResolution"],R);const k=p(e,["speechConfig"]);if(k!=null&&g(r,["speechConfig"],QPe(wN(k))),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const F=p(e,["thinkingConfig"]);return F!=null&&g(r,["thinkingConfig"],XPe(F)),r}function DF(t,e){const n={},r=p(e,["model"]);r!=null&&g(n,["_url","model"],Ct(t,r));const i=p(e,["contents"]);if(i!=null){let o=os(i);Array.isArray(o)&&(o=o.map(l=>g_(l))),g(n,["contents"],o)}const s=p(e,["config"]);return s!=null&&g(n,["generationConfig"],ZPe(t,s,n)),n}function eNe(t,e){const n={},r=p(t,["taskType"]);e!==void 0&&r!=null&&g(e,["requests[]","taskType"],r);const i=p(t,["title"]);e!==void 0&&i!=null&&g(e,["requests[]","title"],i);const s=p(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&g(e,["requests[]","outputDimensionality"],s),p(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function tNe(t,e){const n={},r=p(e,["model"]);r!=null&&g(n,["_url","model"],Ct(t,r));const i=p(e,["contents"]);i!=null&&g(n,["requests[]","content"],M7(t,i));const s=p(e,["config"]);s!=null&&g(n,["config"],eNe(s,n));const o=p(e,["model"]);return o!==void 0&&g(n,["requests[]","model"],Ct(t,o)),n}function nNe(t,e){const n={};if(p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=p(t,["numberOfImages"]);e!==void 0&&r!=null&&g(e,["parameters","sampleCount"],r);const i=p(t,["aspectRatio"]);e!==void 0&&i!=null&&g(e,["parameters","aspectRatio"],i);const s=p(t,["guidanceScale"]);if(e!==void 0&&s!=null&&g(e,["parameters","guidanceScale"],s),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=p(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&g(e,["parameters","safetySetting"],o);const l=p(t,["personGeneration"]);e!==void 0&&l!=null&&g(e,["parameters","personGeneration"],l);const u=p(t,["includeSafetyAttributes"]);e!==void 0&&u!=null&&g(e,["parameters","includeSafetyAttributes"],u);const d=p(t,["includeRaiReason"]);e!==void 0&&d!=null&&g(e,["parameters","includeRaiReason"],d);const f=p(t,["language"]);e!==void 0&&f!=null&&g(e,["parameters","language"],f);const m=p(t,["outputMimeType"]);e!==void 0&&m!=null&&g(e,["parameters","outputOptions","mimeType"],m);const v=p(t,["outputCompressionQuality"]);if(e!==void 0&&v!=null&&g(e,["parameters","outputOptions","compressionQuality"],v),p(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const _=p(t,["imageSize"]);if(e!==void 0&&_!=null&&g(e,["parameters","sampleImageSize"],_),p(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function rNe(t,e){const n={},r=p(e,["model"]);r!=null&&g(n,["_url","model"],Ct(t,r));const i=p(e,["prompt"]);i!=null&&g(n,["instances[0]","prompt"],i);const s=p(e,["config"]);return s!=null&&g(n,["config"],nNe(s,n)),n}function iNe(t,e){const n={},r=p(e,["model"]);r!=null&&g(n,["_url","name"],Ct(t,r));const i=p(e,["config"]);return i!=null&&g(n,["config"],i),n}function sNe(t,e,n){const r={},i=p(e,["pageSize"]);n!==void 0&&i!=null&&g(n,["_query","pageSize"],i);const s=p(e,["pageToken"]);n!==void 0&&s!=null&&g(n,["_query","pageToken"],s);const o=p(e,["filter"]);n!==void 0&&o!=null&&g(n,["_query","filter"],o);const l=p(e,["queryBase"]);return n!==void 0&&l!=null&&g(n,["_url","models_url"],O7(t,l)),r}function oNe(t,e){const n={},r=p(e,["config"]);return r!=null&&g(n,["config"],sNe(t,r,n)),n}function aNe(t,e){const n={},r=p(t,["displayName"]);e!==void 0&&r!=null&&g(e,["displayName"],r);const i=p(t,["description"]);e!==void 0&&i!=null&&g(e,["description"],i);const s=p(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&g(e,["defaultCheckpointId"],s),n}function lNe(t,e){const n={},r=p(e,["model"]);r!=null&&g(n,["_url","name"],Ct(t,r));const i=p(e,["config"]);return i!=null&&g(n,["config"],aNe(i,n)),n}function uNe(t,e){const n={},r=p(e,["model"]);r!=null&&g(n,["_url","name"],Ct(t,r));const i=p(e,["config"]);return i!=null&&g(n,["config"],i),n}function cNe(t){const e={};if(p(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(p(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(p(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function dNe(t,e){const n={},r=p(e,["model"]);r!=null&&g(n,["_url","model"],Ct(t,r));const i=p(e,["contents"]);if(i!=null){let o=os(i);Array.isArray(o)&&(o=o.map(l=>g_(l))),g(n,["contents"],o)}const s=p(e,["config"]);return s!=null&&g(n,["config"],cNe(s)),n}function fNe(t){const e={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=p(t,["imageBytes"]);n!=null&&g(e,["bytesBase64Encoded"],Hc(n));const r=p(t,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function hNe(t,e){const n={},r=p(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&g(e,["parameters","sampleCount"],r),p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=p(t,["durationSeconds"]);if(e!==void 0&&i!=null&&g(e,["parameters","durationSeconds"],i),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=p(t,["aspectRatio"]);if(e!==void 0&&s!=null&&g(e,["parameters","aspectRatio"],s),p(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const o=p(t,["personGeneration"]);if(e!==void 0&&o!=null&&g(e,["parameters","personGeneration"],o),p(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=p(t,["negativePrompt"]);e!==void 0&&l!=null&&g(e,["parameters","negativePrompt"],l);const u=p(t,["enhancePrompt"]);if(e!==void 0&&u!=null&&g(e,["parameters","enhancePrompt"],u),p(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(p(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(p(t,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(p(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function mNe(t,e){const n={},r=p(e,["model"]);r!=null&&g(n,["_url","model"],Ct(t,r));const i=p(e,["prompt"]);i!=null&&g(n,["instances[0]","prompt"],i);const s=p(e,["image"]);if(s!=null&&g(n,["instances[0]","image"],fNe(s)),p(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const o=p(e,["config"]);return o!=null&&g(n,["config"],hNe(o,n)),n}function pNe(t){const e={},n=p(t,["fps"]);n!=null&&g(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&g(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&g(e,["startOffset"],i),e}function gNe(t){const e={},n=p(t,["displayName"]);n!=null&&g(e,["displayName"],n);const r=p(t,["data"]);r!=null&&g(e,["data"],r);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function yNe(t){const e={},n=p(t,["displayName"]);n!=null&&g(e,["displayName"],n);const r=p(t,["fileUri"]);r!=null&&g(e,["fileUri"],r);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function vNe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&g(e,["videoMetadata"],pNe(n));const r=p(t,["thought"]);r!=null&&g(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&g(e,["inlineData"],gNe(i));const s=p(t,["fileData"]);s!=null&&g(e,["fileData"],yNe(s));const o=p(t,["thoughtSignature"]);o!=null&&g(e,["thoughtSignature"],o);const l=p(t,["codeExecutionResult"]);l!=null&&g(e,["codeExecutionResult"],l);const u=p(t,["executableCode"]);u!=null&&g(e,["executableCode"],u);const d=p(t,["functionCall"]);d!=null&&g(e,["functionCall"],d);const f=p(t,["functionResponse"]);f!=null&&g(e,["functionResponse"],f);const m=p(t,["text"]);return m!=null&&g(e,["text"],m),e}function Vh(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>vNe(s))),g(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&g(e,["role"],r),e}function xNe(t){const e={},n=p(t,["anyOf"]);n!=null&&g(e,["anyOf"],n);const r=p(t,["default"]);r!=null&&g(e,["default"],r);const i=p(t,["description"]);i!=null&&g(e,["description"],i);const s=p(t,["enum"]);s!=null&&g(e,["enum"],s);const o=p(t,["example"]);o!=null&&g(e,["example"],o);const l=p(t,["format"]);l!=null&&g(e,["format"],l);const u=p(t,["items"]);u!=null&&g(e,["items"],u);const d=p(t,["maxItems"]);d!=null&&g(e,["maxItems"],d);const f=p(t,["maxLength"]);f!=null&&g(e,["maxLength"],f);const m=p(t,["maxProperties"]);m!=null&&g(e,["maxProperties"],m);const v=p(t,["maximum"]);v!=null&&g(e,["maximum"],v);const _=p(t,["minItems"]);_!=null&&g(e,["minItems"],_);const T=p(t,["minLength"]);T!=null&&g(e,["minLength"],T);const S=p(t,["minProperties"]);S!=null&&g(e,["minProperties"],S);const A=p(t,["minimum"]);A!=null&&g(e,["minimum"],A);const I=p(t,["nullable"]);I!=null&&g(e,["nullable"],I);const D=p(t,["pattern"]);D!=null&&g(e,["pattern"],D);const N=p(t,["properties"]);N!=null&&g(e,["properties"],N);const U=p(t,["propertyOrdering"]);U!=null&&g(e,["propertyOrdering"],U);const O=p(t,["required"]);O!=null&&g(e,["required"],O);const q=p(t,["title"]);q!=null&&g(e,["title"],q);const M=p(t,["type"]);return M!=null&&g(e,["type"],M),e}function bNe(t){const e={},n=p(t,["featureSelectionPreference"]);return n!=null&&g(e,["featureSelectionPreference"],n),e}function _Ne(t){const e={},n=p(t,["method"]);n!=null&&g(e,["method"],n);const r=p(t,["category"]);r!=null&&g(e,["category"],r);const i=p(t,["threshold"]);return i!=null&&g(e,["threshold"],i),e}function wNe(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&g(e,["description"],n);const r=p(t,["name"]);r!=null&&g(e,["name"],r);const i=p(t,["parameters"]);i!=null&&g(e,["parameters"],i);const s=p(t,["parametersJsonSchema"]);s!=null&&g(e,["parametersJsonSchema"],s);const o=p(t,["response"]);o!=null&&g(e,["response"],o);const l=p(t,["responseJsonSchema"]);return l!=null&&g(e,["responseJsonSchema"],l),e}function TNe(t){const e={},n=p(t,["startTime"]);n!=null&&g(e,["startTime"],n);const r=p(t,["endTime"]);return r!=null&&g(e,["endTime"],r),e}function ENe(t){const e={},n=p(t,["timeRangeFilter"]);n!=null&&g(e,["timeRangeFilter"],TNe(n));const r=p(t,["excludeDomains"]);return r!=null&&g(e,["excludeDomains"],r),e}function SNe(t){const e={},n=p(t,["mode"]);n!=null&&g(e,["mode"],n);const r=p(t,["dynamicThreshold"]);return r!=null&&g(e,["dynamicThreshold"],r),e}function ANe(t){const e={},n=p(t,["dynamicRetrievalConfig"]);return n!=null&&g(e,["dynamicRetrievalConfig"],SNe(n)),e}function CNe(t){const e={},n=p(t,["excludeDomains"]);return n!=null&&g(e,["excludeDomains"],n),e}function INe(t){const e={},n=p(t,["apiKeyString"]);return n!=null&&g(e,["apiKeyString"],n),e}function RNe(t){const e={},n=p(t,["apiKeyConfig"]);n!=null&&g(e,["apiKeyConfig"],INe(n));const r=p(t,["authType"]);r!=null&&g(e,["authType"],r);const i=p(t,["googleServiceAccountConfig"]);i!=null&&g(e,["googleServiceAccountConfig"],i);const s=p(t,["httpBasicAuthConfig"]);s!=null&&g(e,["httpBasicAuthConfig"],s);const o=p(t,["oauthConfig"]);o!=null&&g(e,["oauthConfig"],o);const l=p(t,["oidcConfig"]);return l!=null&&g(e,["oidcConfig"],l),e}function PNe(t){const e={},n=p(t,["authConfig"]);return n!=null&&g(e,["authConfig"],RNe(n)),e}function NNe(){return{}}function MNe(t){const e={},n=p(t,["environment"]);return n!=null&&g(e,["environment"],n),e}function J7(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(v=>wNe(v))),g(e,["functionDeclarations"],m)}const r=p(t,["retrieval"]);r!=null&&g(e,["retrieval"],r);const i=p(t,["googleSearch"]);i!=null&&g(e,["googleSearch"],ENe(i));const s=p(t,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],ANe(s));const o=p(t,["enterpriseWebSearch"]);o!=null&&g(e,["enterpriseWebSearch"],CNe(o));const l=p(t,["googleMaps"]);l!=null&&g(e,["googleMaps"],PNe(l)),p(t,["urlContext"])!=null&&g(e,["urlContext"],NNe());const d=p(t,["computerUse"]);d!=null&&g(e,["computerUse"],MNe(d));const f=p(t,["codeExecution"]);return f!=null&&g(e,["codeExecution"],f),e}function DNe(t){const e={},n=p(t,["mode"]);n!=null&&g(e,["mode"],n);const r=p(t,["allowedFunctionNames"]);return r!=null&&g(e,["allowedFunctionNames"],r),e}function kNe(t){const e={},n=p(t,["latitude"]);n!=null&&g(e,["latitude"],n);const r=p(t,["longitude"]);return r!=null&&g(e,["longitude"],r),e}function ONe(t){const e={},n=p(t,["latLng"]);n!=null&&g(e,["latLng"],kNe(n));const r=p(t,["languageCode"]);return r!=null&&g(e,["languageCode"],r),e}function VNe(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&g(e,["functionCallingConfig"],DNe(n));const r=p(t,["retrievalConfig"]);return r!=null&&g(e,["retrievalConfig"],ONe(r)),e}function LNe(t){const e={},n=p(t,["voiceName"]);return n!=null&&g(e,["voiceName"],n),e}function UNe(t){const e={},n=p(t,["prebuiltVoiceConfig"]);return n!=null&&g(e,["prebuiltVoiceConfig"],LNe(n)),e}function FNe(t){const e={},n=p(t,["voiceConfig"]);if(n!=null&&g(e,["voiceConfig"],UNe(n)),p(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=p(t,["languageCode"]);return r!=null&&g(e,["languageCode"],r),e}function jNe(t){const e={},n=p(t,["includeThoughts"]);n!=null&&g(e,["includeThoughts"],n);const r=p(t,["thinkingBudget"]);return r!=null&&g(e,["thinkingBudget"],r),e}function BNe(t,e,n){const r={},i=p(e,["systemInstruction"]);n!==void 0&&i!=null&&g(n,["systemInstruction"],Vh(Lr(i)));const s=p(e,["temperature"]);s!=null&&g(r,["temperature"],s);const o=p(e,["topP"]);o!=null&&g(r,["topP"],o);const l=p(e,["topK"]);l!=null&&g(r,["topK"],l);const u=p(e,["candidateCount"]);u!=null&&g(r,["candidateCount"],u);const d=p(e,["maxOutputTokens"]);d!=null&&g(r,["maxOutputTokens"],d);const f=p(e,["stopSequences"]);f!=null&&g(r,["stopSequences"],f);const m=p(e,["responseLogprobs"]);m!=null&&g(r,["responseLogprobs"],m);const v=p(e,["logprobs"]);v!=null&&g(r,["logprobs"],v);const _=p(e,["presencePenalty"]);_!=null&&g(r,["presencePenalty"],_);const T=p(e,["frequencyPenalty"]);T!=null&&g(r,["frequencyPenalty"],T);const S=p(e,["seed"]);S!=null&&g(r,["seed"],S);const A=p(e,["responseMimeType"]);A!=null&&g(r,["responseMimeType"],A);const I=p(e,["responseSchema"]);I!=null&&g(r,["responseSchema"],xNe(_N(I)));const D=p(e,["responseJsonSchema"]);D!=null&&g(r,["responseJsonSchema"],D);const N=p(e,["routingConfig"]);N!=null&&g(r,["routingConfig"],N);const U=p(e,["modelSelectionConfig"]);U!=null&&g(r,["modelConfig"],bNe(U));const O=p(e,["safetySettings"]);if(n!==void 0&&O!=null){let ve=O;Array.isArray(ve)&&(ve=ve.map(Y=>_Ne(Y))),g(n,["safetySettings"],ve)}const q=p(e,["tools"]);if(n!==void 0&&q!=null){let ve=kh(q);Array.isArray(ve)&&(ve=ve.map(Y=>J7(Dh(Y)))),g(n,["tools"],ve)}const M=p(e,["toolConfig"]);n!==void 0&&M!=null&&g(n,["toolConfig"],VNe(M));const R=p(e,["labels"]);n!==void 0&&R!=null&&g(n,["labels"],R);const k=p(e,["cachedContent"]);n!==void 0&&k!=null&&g(n,["cachedContent"],Ta(t,k));const F=p(e,["responseModalities"]);F!=null&&g(r,["responseModalities"],F);const j=p(e,["mediaResolution"]);j!=null&&g(r,["mediaResolution"],j);const G=p(e,["speechConfig"]);G!=null&&g(r,["speechConfig"],FNe(wN(G)));const $=p(e,["audioTimestamp"]);$!=null&&g(r,["audioTimestamp"],$);const de=p(e,["thinkingConfig"]);return de!=null&&g(r,["thinkingConfig"],jNe(de)),r}function kF(t,e){const n={},r=p(e,["model"]);r!=null&&g(n,["_url","model"],Ct(t,r));const i=p(e,["contents"]);if(i!=null){let o=os(i);Array.isArray(o)&&(o=o.map(l=>Vh(l))),g(n,["contents"],o)}const s=p(e,["config"]);return s!=null&&g(n,["generationConfig"],BNe(t,s,n)),n}function qNe(t,e){const n={},r=p(t,["taskType"]);e!==void 0&&r!=null&&g(e,["instances[]","task_type"],r);const i=p(t,["title"]);e!==void 0&&i!=null&&g(e,["instances[]","title"],i);const s=p(t,["outputDimensionality"]);e!==void 0&&s!=null&&g(e,["parameters","outputDimensionality"],s);const o=p(t,["mimeType"]);e!==void 0&&o!=null&&g(e,["instances[]","mimeType"],o);const l=p(t,["autoTruncate"]);return e!==void 0&&l!=null&&g(e,["parameters","autoTruncate"],l),n}function zNe(t,e){const n={},r=p(e,["model"]);r!=null&&g(n,["_url","model"],Ct(t,r));const i=p(e,["contents"]);i!=null&&g(n,["instances[]","content"],M7(t,i));const s=p(e,["config"]);return s!=null&&g(n,["config"],qNe(s,n)),n}function $Ne(t,e){const n={},r=p(t,["outputGcsUri"]);e!==void 0&&r!=null&&g(e,["parameters","storageUri"],r);const i=p(t,["negativePrompt"]);e!==void 0&&i!=null&&g(e,["parameters","negativePrompt"],i);const s=p(t,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const o=p(t,["aspectRatio"]);e!==void 0&&o!=null&&g(e,["parameters","aspectRatio"],o);const l=p(t,["guidanceScale"]);e!==void 0&&l!=null&&g(e,["parameters","guidanceScale"],l);const u=p(t,["seed"]);e!==void 0&&u!=null&&g(e,["parameters","seed"],u);const d=p(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&g(e,["parameters","safetySetting"],d);const f=p(t,["personGeneration"]);e!==void 0&&f!=null&&g(e,["parameters","personGeneration"],f);const m=p(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&g(e,["parameters","includeSafetyAttributes"],m);const v=p(t,["includeRaiReason"]);e!==void 0&&v!=null&&g(e,["parameters","includeRaiReason"],v);const _=p(t,["language"]);e!==void 0&&_!=null&&g(e,["parameters","language"],_);const T=p(t,["outputMimeType"]);e!==void 0&&T!=null&&g(e,["parameters","outputOptions","mimeType"],T);const S=p(t,["outputCompressionQuality"]);e!==void 0&&S!=null&&g(e,["parameters","outputOptions","compressionQuality"],S);const A=p(t,["addWatermark"]);e!==void 0&&A!=null&&g(e,["parameters","addWatermark"],A);const I=p(t,["imageSize"]);e!==void 0&&I!=null&&g(e,["parameters","sampleImageSize"],I);const D=p(t,["enhancePrompt"]);return e!==void 0&&D!=null&&g(e,["parameters","enhancePrompt"],D),n}function GNe(t,e){const n={},r=p(e,["model"]);r!=null&&g(n,["_url","model"],Ct(t,r));const i=p(e,["prompt"]);i!=null&&g(n,["instances[0]","prompt"],i);const s=p(e,["config"]);return s!=null&&g(n,["config"],$Ne(s,n)),n}function Ea(t){const e={},n=p(t,["gcsUri"]);n!=null&&g(e,["gcsUri"],n);const r=p(t,["imageBytes"]);r!=null&&g(e,["bytesBase64Encoded"],Hc(r));const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function HNe(t){const e={},n=p(t,["maskMode"]);n!=null&&g(e,["maskMode"],n);const r=p(t,["segmentationClasses"]);r!=null&&g(e,["maskClasses"],r);const i=p(t,["maskDilation"]);return i!=null&&g(e,["dilation"],i),e}function KNe(t){const e={},n=p(t,["controlType"]);n!=null&&g(e,["controlType"],n);const r=p(t,["enableControlImageComputation"]);return r!=null&&g(e,["computeControl"],r),e}function WNe(t){const e={},n=p(t,["styleDescription"]);return n!=null&&g(e,["styleDescription"],n),e}function YNe(t){const e={},n=p(t,["subjectType"]);n!=null&&g(e,["subjectType"],n);const r=p(t,["subjectDescription"]);return r!=null&&g(e,["subjectDescription"],r),e}function JNe(t){const e={},n=p(t,["referenceImage"]);n!=null&&g(e,["referenceImage"],Ea(n));const r=p(t,["referenceId"]);r!=null&&g(e,["referenceId"],r);const i=p(t,["referenceType"]);i!=null&&g(e,["referenceType"],i);const s=p(t,["maskImageConfig"]);s!=null&&g(e,["maskImageConfig"],HNe(s));const o=p(t,["controlImageConfig"]);o!=null&&g(e,["controlImageConfig"],KNe(o));const l=p(t,["styleImageConfig"]);l!=null&&g(e,["styleImageConfig"],WNe(l));const u=p(t,["subjectImageConfig"]);return u!=null&&g(e,["subjectImageConfig"],YNe(u)),e}function QNe(t,e){const n={},r=p(t,["outputGcsUri"]);e!==void 0&&r!=null&&g(e,["parameters","storageUri"],r);const i=p(t,["negativePrompt"]);e!==void 0&&i!=null&&g(e,["parameters","negativePrompt"],i);const s=p(t,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const o=p(t,["aspectRatio"]);e!==void 0&&o!=null&&g(e,["parameters","aspectRatio"],o);const l=p(t,["guidanceScale"]);e!==void 0&&l!=null&&g(e,["parameters","guidanceScale"],l);const u=p(t,["seed"]);e!==void 0&&u!=null&&g(e,["parameters","seed"],u);const d=p(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&g(e,["parameters","safetySetting"],d);const f=p(t,["personGeneration"]);e!==void 0&&f!=null&&g(e,["parameters","personGeneration"],f);const m=p(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&g(e,["parameters","includeSafetyAttributes"],m);const v=p(t,["includeRaiReason"]);e!==void 0&&v!=null&&g(e,["parameters","includeRaiReason"],v);const _=p(t,["language"]);e!==void 0&&_!=null&&g(e,["parameters","language"],_);const T=p(t,["outputMimeType"]);e!==void 0&&T!=null&&g(e,["parameters","outputOptions","mimeType"],T);const S=p(t,["outputCompressionQuality"]);e!==void 0&&S!=null&&g(e,["parameters","outputOptions","compressionQuality"],S);const A=p(t,["addWatermark"]);e!==void 0&&A!=null&&g(e,["parameters","addWatermark"],A);const I=p(t,["editMode"]);e!==void 0&&I!=null&&g(e,["parameters","editMode"],I);const D=p(t,["baseSteps"]);return e!==void 0&&D!=null&&g(e,["parameters","editConfig","baseSteps"],D),n}function XNe(t,e){const n={},r=p(e,["model"]);r!=null&&g(n,["_url","model"],Ct(t,r));const i=p(e,["prompt"]);i!=null&&g(n,["instances[0]","prompt"],i);const s=p(e,["referenceImages"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>JNe(u))),g(n,["instances[0]","referenceImages"],l)}const o=p(e,["config"]);return o!=null&&g(n,["config"],QNe(o,n)),n}function ZNe(t,e){const n={},r=p(t,["includeRaiReason"]);e!==void 0&&r!=null&&g(e,["parameters","includeRaiReason"],r);const i=p(t,["outputMimeType"]);e!==void 0&&i!=null&&g(e,["parameters","outputOptions","mimeType"],i);const s=p(t,["outputCompressionQuality"]);e!==void 0&&s!=null&&g(e,["parameters","outputOptions","compressionQuality"],s);const o=p(t,["enhanceInputImage"]);e!==void 0&&o!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],o);const l=p(t,["imagePreservationFactor"]);e!==void 0&&l!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],l);const u=p(t,["numberOfImages"]);e!==void 0&&u!=null&&g(e,["parameters","sampleCount"],u);const d=p(t,["mode"]);return e!==void 0&&d!=null&&g(e,["parameters","mode"],d),n}function eMe(t,e){const n={},r=p(e,["model"]);r!=null&&g(n,["_url","model"],Ct(t,r));const i=p(e,["image"]);i!=null&&g(n,["instances[0]","image"],Ea(i));const s=p(e,["upscaleFactor"]);s!=null&&g(n,["parameters","upscaleConfig","upscaleFactor"],s);const o=p(e,["config"]);return o!=null&&g(n,["config"],ZNe(o,n)),n}function tMe(t){const e={},n=p(t,["productImage"]);return n!=null&&g(e,["image"],Ea(n)),e}function nMe(t,e){const n={},r=p(t,["prompt"]);e!==void 0&&r!=null&&g(e,["instances[0]","prompt"],r);const i=p(t,["personImage"]);e!==void 0&&i!=null&&g(e,["instances[0]","personImage","image"],Ea(i));const s=p(t,["productImages"]);if(e!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>tMe(l))),g(e,["instances[0]","productImages"],o)}return n}function rMe(t,e){const n={},r=p(t,["numberOfImages"]);e!==void 0&&r!=null&&g(e,["parameters","sampleCount"],r);const i=p(t,["baseSteps"]);e!==void 0&&i!=null&&g(e,["parameters","editConfig","baseSteps"],i);const s=p(t,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const o=p(t,["seed"]);e!==void 0&&o!=null&&g(e,["parameters","seed"],o);const l=p(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&g(e,["parameters","safetySetting"],l);const u=p(t,["personGeneration"]);e!==void 0&&u!=null&&g(e,["parameters","personGeneration"],u);const d=p(t,["outputMimeType"]);e!==void 0&&d!=null&&g(e,["parameters","outputOptions","mimeType"],d);const f=p(t,["outputCompressionQuality"]);e!==void 0&&f!=null&&g(e,["parameters","outputOptions","compressionQuality"],f);const m=p(t,["enhancePrompt"]);return e!==void 0&&m!=null&&g(e,["parameters","enhancePrompt"],m),n}function iMe(t,e){const n={},r=p(e,["model"]);r!=null&&g(n,["_url","model"],Ct(t,r));const i=p(e,["source"]);i!=null&&g(n,["config"],nMe(i,n));const s=p(e,["config"]);return s!=null&&g(n,["config"],rMe(s,n)),n}function sMe(t){const e={},n=p(t,["image"]);return n!=null&&g(e,["image"],Ea(n)),e}function oMe(t,e){const n={},r=p(t,["prompt"]);e!==void 0&&r!=null&&g(e,["instances[0]","prompt"],r);const i=p(t,["image"]);e!==void 0&&i!=null&&g(e,["instances[0]","image"],Ea(i));const s=p(t,["scribbleImage"]);return e!==void 0&&s!=null&&g(e,["instances[0]","scribble"],sMe(s)),n}function aMe(t,e){const n={},r=p(t,["mode"]);e!==void 0&&r!=null&&g(e,["parameters","mode"],r);const i=p(t,["maxPredictions"]);e!==void 0&&i!=null&&g(e,["parameters","maxPredictions"],i);const s=p(t,["confidenceThreshold"]);e!==void 0&&s!=null&&g(e,["parameters","confidenceThreshold"],s);const o=p(t,["maskDilation"]);e!==void 0&&o!=null&&g(e,["parameters","maskDilation"],o);const l=p(t,["binaryColorThreshold"]);return e!==void 0&&l!=null&&g(e,["parameters","binaryColorThreshold"],l),n}function lMe(t,e){const n={},r=p(e,["model"]);r!=null&&g(n,["_url","model"],Ct(t,r));const i=p(e,["source"]);i!=null&&g(n,["config"],oMe(i,n));const s=p(e,["config"]);return s!=null&&g(n,["config"],aMe(s,n)),n}function uMe(t,e){const n={},r=p(e,["model"]);r!=null&&g(n,["_url","name"],Ct(t,r));const i=p(e,["config"]);return i!=null&&g(n,["config"],i),n}function cMe(t,e,n){const r={},i=p(e,["pageSize"]);n!==void 0&&i!=null&&g(n,["_query","pageSize"],i);const s=p(e,["pageToken"]);n!==void 0&&s!=null&&g(n,["_query","pageToken"],s);const o=p(e,["filter"]);n!==void 0&&o!=null&&g(n,["_query","filter"],o);const l=p(e,["queryBase"]);return n!==void 0&&l!=null&&g(n,["_url","models_url"],O7(t,l)),r}function dMe(t,e){const n={},r=p(e,["config"]);return r!=null&&g(n,["config"],cMe(t,r,n)),n}function fMe(t,e){const n={},r=p(t,["displayName"]);e!==void 0&&r!=null&&g(e,["displayName"],r);const i=p(t,["description"]);e!==void 0&&i!=null&&g(e,["description"],i);const s=p(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&g(e,["defaultCheckpointId"],s),n}function hMe(t,e){const n={},r=p(e,["model"]);r!=null&&g(n,["_url","model"],Ct(t,r));const i=p(e,["config"]);return i!=null&&g(n,["config"],fMe(i,n)),n}function mMe(t,e){const n={},r=p(e,["model"]);r!=null&&g(n,["_url","name"],Ct(t,r));const i=p(e,["config"]);return i!=null&&g(n,["config"],i),n}function pMe(t,e){const n={},r=p(t,["systemInstruction"]);e!==void 0&&r!=null&&g(e,["systemInstruction"],Vh(Lr(r)));const i=p(t,["tools"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>J7(l))),g(e,["tools"],o)}const s=p(t,["generationConfig"]);return e!==void 0&&s!=null&&g(e,["generationConfig"],s),n}function gMe(t,e){const n={},r=p(e,["model"]);r!=null&&g(n,["_url","model"],Ct(t,r));const i=p(e,["contents"]);if(i!=null){let o=os(i);Array.isArray(o)&&(o=o.map(l=>Vh(l))),g(n,["contents"],o)}const s=p(e,["config"]);return s!=null&&g(n,["config"],pMe(s,n)),n}function yMe(t,e){const n={},r=p(e,["model"]);r!=null&&g(n,["_url","model"],Ct(t,r));const i=p(e,["contents"]);if(i!=null){let o=os(i);Array.isArray(o)&&(o=o.map(l=>Vh(l))),g(n,["contents"],o)}const s=p(e,["config"]);return s!=null&&g(n,["config"],s),n}function vMe(t){const e={},n=p(t,["uri"]);n!=null&&g(e,["gcsUri"],n);const r=p(t,["videoBytes"]);r!=null&&g(e,["bytesBase64Encoded"],Hc(r));const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function xMe(t){const e={},n=p(t,["image"]);n!=null&&g(e,["image"],Ea(n));const r=p(t,["referenceType"]);return r!=null&&g(e,["referenceType"],r),e}function bMe(t,e){const n={},r=p(t,["numberOfVideos"]);e!==void 0&&r!=null&&g(e,["parameters","sampleCount"],r);const i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const s=p(t,["fps"]);e!==void 0&&s!=null&&g(e,["parameters","fps"],s);const o=p(t,["durationSeconds"]);e!==void 0&&o!=null&&g(e,["parameters","durationSeconds"],o);const l=p(t,["seed"]);e!==void 0&&l!=null&&g(e,["parameters","seed"],l);const u=p(t,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const d=p(t,["resolution"]);e!==void 0&&d!=null&&g(e,["parameters","resolution"],d);const f=p(t,["personGeneration"]);e!==void 0&&f!=null&&g(e,["parameters","personGeneration"],f);const m=p(t,["pubsubTopic"]);e!==void 0&&m!=null&&g(e,["parameters","pubsubTopic"],m);const v=p(t,["negativePrompt"]);e!==void 0&&v!=null&&g(e,["parameters","negativePrompt"],v);const _=p(t,["enhancePrompt"]);e!==void 0&&_!=null&&g(e,["parameters","enhancePrompt"],_);const T=p(t,["generateAudio"]);e!==void 0&&T!=null&&g(e,["parameters","generateAudio"],T);const S=p(t,["lastFrame"]);e!==void 0&&S!=null&&g(e,["instances[0]","lastFrame"],Ea(S));const A=p(t,["referenceImages"]);if(e!==void 0&&A!=null){let D=A;Array.isArray(D)&&(D=D.map(N=>xMe(N))),g(e,["instances[0]","referenceImages"],D)}const I=p(t,["compressionQuality"]);return e!==void 0&&I!=null&&g(e,["parameters","compressionQuality"],I),n}function _Me(t,e){const n={},r=p(e,["model"]);r!=null&&g(n,["_url","model"],Ct(t,r));const i=p(e,["prompt"]);i!=null&&g(n,["instances[0]","prompt"],i);const s=p(e,["image"]);s!=null&&g(n,["instances[0]","image"],Ea(s));const o=p(e,["video"]);o!=null&&g(n,["instances[0]","video"],vMe(o));const l=p(e,["config"]);return l!=null&&g(n,["config"],bMe(l,n)),n}function wMe(t){const e={},n=p(t,["fps"]);n!=null&&g(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&g(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&g(e,["startOffset"],i),e}function TMe(t){const e={},n=p(t,["data"]);n!=null&&g(e,["data"],n);const r=p(t,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function EMe(t){const e={},n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const r=p(t,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function SMe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&g(e,["videoMetadata"],wMe(n));const r=p(t,["thought"]);r!=null&&g(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&g(e,["inlineData"],TMe(i));const s=p(t,["fileData"]);s!=null&&g(e,["fileData"],EMe(s));const o=p(t,["thoughtSignature"]);o!=null&&g(e,["thoughtSignature"],o);const l=p(t,["codeExecutionResult"]);l!=null&&g(e,["codeExecutionResult"],l);const u=p(t,["executableCode"]);u!=null&&g(e,["executableCode"],u);const d=p(t,["functionCall"]);d!=null&&g(e,["functionCall"],d);const f=p(t,["functionResponse"]);f!=null&&g(e,["functionResponse"],f);const m=p(t,["text"]);return m!=null&&g(e,["text"],m),e}function AMe(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>SMe(s))),g(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&g(e,["role"],r),e}function CMe(t){const e={},n=p(t,["citationSources"]);return n!=null&&g(e,["citations"],n),e}function IMe(t){const e={},n=p(t,["retrievedUrl"]);n!=null&&g(e,["retrievedUrl"],n);const r=p(t,["urlRetrievalStatus"]);return r!=null&&g(e,["urlRetrievalStatus"],r),e}function RMe(t){const e={},n=p(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>IMe(i))),g(e,["urlMetadata"],r)}return e}function PMe(t){const e={},n=p(t,["content"]);n!=null&&g(e,["content"],AMe(n));const r=p(t,["citationMetadata"]);r!=null&&g(e,["citationMetadata"],CMe(r));const i=p(t,["tokenCount"]);i!=null&&g(e,["tokenCount"],i);const s=p(t,["finishReason"]);s!=null&&g(e,["finishReason"],s);const o=p(t,["urlContextMetadata"]);o!=null&&g(e,["urlContextMetadata"],RMe(o));const l=p(t,["avgLogprobs"]);l!=null&&g(e,["avgLogprobs"],l);const u=p(t,["groundingMetadata"]);u!=null&&g(e,["groundingMetadata"],u);const d=p(t,["index"]);d!=null&&g(e,["index"],d);const f=p(t,["logprobsResult"]);f!=null&&g(e,["logprobsResult"],f);const m=p(t,["safetyRatings"]);return m!=null&&g(e,["safetyRatings"],m),e}function OF(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const r=p(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>PMe(d))),g(e,["candidates"],u)}const i=p(t,["modelVersion"]);i!=null&&g(e,["modelVersion"],i);const s=p(t,["promptFeedback"]);s!=null&&g(e,["promptFeedback"],s);const o=p(t,["responseId"]);o!=null&&g(e,["responseId"],o);const l=p(t,["usageMetadata"]);return l!=null&&g(e,["usageMetadata"],l),e}function NMe(t){const e={},n=p(t,["values"]);return n!=null&&g(e,["values"],n),e}function MMe(){return{}}function DMe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const r=p(t,["embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>NMe(o))),g(e,["embeddings"],s)}return p(t,["metadata"])!=null&&g(e,["metadata"],MMe()),e}function kMe(t){const e={},n=p(t,["bytesBase64Encoded"]);n!=null&&g(e,["imageBytes"],Hc(n));const r=p(t,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function Q7(t){const e={},n=p(t,["safetyAttributes","categories"]);n!=null&&g(e,["categories"],n);const r=p(t,["safetyAttributes","scores"]);r!=null&&g(e,["scores"],r);const i=p(t,["contentType"]);return i!=null&&g(e,["contentType"],i),e}function OMe(t){const e={},n=p(t,["_self"]);n!=null&&g(e,["image"],kMe(n));const r=p(t,["raiFilteredReason"]);r!=null&&g(e,["raiFilteredReason"],r);const i=p(t,["_self"]);return i!=null&&g(e,["safetyAttributes"],Q7(i)),e}function VMe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const r=p(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>OMe(o))),g(e,["generatedImages"],s)}const i=p(t,["positivePromptSafetyAttributes"]);return i!=null&&g(e,["positivePromptSafetyAttributes"],Q7(i)),e}function LMe(t){const e={},n=p(t,["baseModel"]);n!=null&&g(e,["baseModel"],n);const r=p(t,["createTime"]);r!=null&&g(e,["createTime"],r);const i=p(t,["updateTime"]);return i!=null&&g(e,["updateTime"],i),e}function uC(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const r=p(t,["displayName"]);r!=null&&g(e,["displayName"],r);const i=p(t,["description"]);i!=null&&g(e,["description"],i);const s=p(t,["version"]);s!=null&&g(e,["version"],s);const o=p(t,["_self"]);o!=null&&g(e,["tunedModelInfo"],LMe(o));const l=p(t,["inputTokenLimit"]);l!=null&&g(e,["inputTokenLimit"],l);const u=p(t,["outputTokenLimit"]);u!=null&&g(e,["outputTokenLimit"],u);const d=p(t,["supportedGenerationMethods"]);return d!=null&&g(e,["supportedActions"],d),e}function UMe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&g(e,["nextPageToken"],r);const i=p(t,["_self"]);if(i!=null){let s=V7(i);Array.isArray(s)&&(s=s.map(o=>uC(o))),g(e,["models"],s)}return e}function FMe(){return{}}function jMe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const r=p(t,["totalTokens"]);r!=null&&g(e,["totalTokens"],r);const i=p(t,["cachedContentTokenCount"]);return i!=null&&g(e,["cachedContentTokenCount"],i),e}function BMe(t){const e={},n=p(t,["video","uri"]);n!=null&&g(e,["uri"],n);const r=p(t,["video","encodedVideo"]);r!=null&&g(e,["videoBytes"],Hc(r));const i=p(t,["encoding"]);return i!=null&&g(e,["mimeType"],i),e}function qMe(t){const e={},n=p(t,["_self"]);return n!=null&&g(e,["video"],BMe(n)),e}function zMe(t){const e={},n=p(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>qMe(o))),g(e,["generatedVideos"],s)}const r=p(t,["raiMediaFilteredCount"]);r!=null&&g(e,["raiMediaFilteredCount"],r);const i=p(t,["raiMediaFilteredReasons"]);return i!=null&&g(e,["raiMediaFilteredReasons"],i),e}function $Me(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const r=p(t,["metadata"]);r!=null&&g(e,["metadata"],r);const i=p(t,["done"]);i!=null&&g(e,["done"],i);const s=p(t,["error"]);s!=null&&g(e,["error"],s);const o=p(t,["response","generateVideoResponse"]);return o!=null&&g(e,["response"],zMe(o)),e}function GMe(t){const e={},n=p(t,["fps"]);n!=null&&g(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&g(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&g(e,["startOffset"],i),e}function HMe(t){const e={},n=p(t,["displayName"]);n!=null&&g(e,["displayName"],n);const r=p(t,["data"]);r!=null&&g(e,["data"],r);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function KMe(t){const e={},n=p(t,["displayName"]);n!=null&&g(e,["displayName"],n);const r=p(t,["fileUri"]);r!=null&&g(e,["fileUri"],r);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function WMe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&g(e,["videoMetadata"],GMe(n));const r=p(t,["thought"]);r!=null&&g(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&g(e,["inlineData"],HMe(i));const s=p(t,["fileData"]);s!=null&&g(e,["fileData"],KMe(s));const o=p(t,["thoughtSignature"]);o!=null&&g(e,["thoughtSignature"],o);const l=p(t,["codeExecutionResult"]);l!=null&&g(e,["codeExecutionResult"],l);const u=p(t,["executableCode"]);u!=null&&g(e,["executableCode"],u);const d=p(t,["functionCall"]);d!=null&&g(e,["functionCall"],d);const f=p(t,["functionResponse"]);f!=null&&g(e,["functionResponse"],f);const m=p(t,["text"]);return m!=null&&g(e,["text"],m),e}function YMe(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>WMe(s))),g(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&g(e,["role"],r),e}function JMe(t){const e={},n=p(t,["citations"]);return n!=null&&g(e,["citations"],n),e}function QMe(t){const e={},n=p(t,["retrievedUrl"]);n!=null&&g(e,["retrievedUrl"],n);const r=p(t,["urlRetrievalStatus"]);return r!=null&&g(e,["urlRetrievalStatus"],r),e}function XMe(t){const e={},n=p(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>QMe(i))),g(e,["urlMetadata"],r)}return e}function ZMe(t){const e={},n=p(t,["content"]);n!=null&&g(e,["content"],YMe(n));const r=p(t,["citationMetadata"]);r!=null&&g(e,["citationMetadata"],JMe(r));const i=p(t,["finishMessage"]);i!=null&&g(e,["finishMessage"],i);const s=p(t,["finishReason"]);s!=null&&g(e,["finishReason"],s);const o=p(t,["urlContextMetadata"]);o!=null&&g(e,["urlContextMetadata"],XMe(o));const l=p(t,["avgLogprobs"]);l!=null&&g(e,["avgLogprobs"],l);const u=p(t,["groundingMetadata"]);u!=null&&g(e,["groundingMetadata"],u);const d=p(t,["index"]);d!=null&&g(e,["index"],d);const f=p(t,["logprobsResult"]);f!=null&&g(e,["logprobsResult"],f);const m=p(t,["safetyRatings"]);return m!=null&&g(e,["safetyRatings"],m),e}function VF(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const r=p(t,["candidates"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(f=>ZMe(f))),g(e,["candidates"],d)}const i=p(t,["createTime"]);i!=null&&g(e,["createTime"],i);const s=p(t,["modelVersion"]);s!=null&&g(e,["modelVersion"],s);const o=p(t,["promptFeedback"]);o!=null&&g(e,["promptFeedback"],o);const l=p(t,["responseId"]);l!=null&&g(e,["responseId"],l);const u=p(t,["usageMetadata"]);return u!=null&&g(e,["usageMetadata"],u),e}function e2e(t){const e={},n=p(t,["truncated"]);n!=null&&g(e,["truncated"],n);const r=p(t,["token_count"]);return r!=null&&g(e,["tokenCount"],r),e}function t2e(t){const e={},n=p(t,["values"]);n!=null&&g(e,["values"],n);const r=p(t,["statistics"]);return r!=null&&g(e,["statistics"],e2e(r)),e}function n2e(t){const e={},n=p(t,["billableCharacterCount"]);return n!=null&&g(e,["billableCharacterCount"],n),e}function r2e(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const r=p(t,["predictions[]","embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>t2e(o))),g(e,["embeddings"],s)}const i=p(t,["metadata"]);return i!=null&&g(e,["metadata"],n2e(i)),e}function X7(t){const e={},n=p(t,["gcsUri"]);n!=null&&g(e,["gcsUri"],n);const r=p(t,["bytesBase64Encoded"]);r!=null&&g(e,["imageBytes"],Hc(r));const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function Z7(t){const e={},n=p(t,["safetyAttributes","categories"]);n!=null&&g(e,["categories"],n);const r=p(t,["safetyAttributes","scores"]);r!=null&&g(e,["scores"],r);const i=p(t,["contentType"]);return i!=null&&g(e,["contentType"],i),e}function y_(t){const e={},n=p(t,["_self"]);n!=null&&g(e,["image"],X7(n));const r=p(t,["raiFilteredReason"]);r!=null&&g(e,["raiFilteredReason"],r);const i=p(t,["_self"]);i!=null&&g(e,["safetyAttributes"],Z7(i));const s=p(t,["prompt"]);return s!=null&&g(e,["enhancedPrompt"],s),e}function i2e(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const r=p(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>y_(o))),g(e,["generatedImages"],s)}const i=p(t,["positivePromptSafetyAttributes"]);return i!=null&&g(e,["positivePromptSafetyAttributes"],Z7(i)),e}function s2e(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const r=p(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>y_(s))),g(e,["generatedImages"],i)}return e}function o2e(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const r=p(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>y_(s))),g(e,["generatedImages"],i)}return e}function a2e(t){const e={},n=p(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>y_(i))),g(e,["generatedImages"],r)}return e}function l2e(t){const e={},n=p(t,["label"]);n!=null&&g(e,["label"],n);const r=p(t,["score"]);return r!=null&&g(e,["score"],r),e}function u2e(t){const e={},n=p(t,["_self"]);n!=null&&g(e,["mask"],X7(n));const r=p(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>l2e(s))),g(e,["labels"],i)}return e}function c2e(t){const e={},n=p(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>u2e(i))),g(e,["generatedMasks"],r)}return e}function d2e(t){const e={},n=p(t,["endpoint"]);n!=null&&g(e,["name"],n);const r=p(t,["deployedModelId"]);return r!=null&&g(e,["deployedModelId"],r),e}function f2e(t){const e={},n=p(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&g(e,["baseModel"],n);const r=p(t,["createTime"]);r!=null&&g(e,["createTime"],r);const i=p(t,["updateTime"]);return i!=null&&g(e,["updateTime"],i),e}function h2e(t){const e={},n=p(t,["checkpointId"]);n!=null&&g(e,["checkpointId"],n);const r=p(t,["epoch"]);r!=null&&g(e,["epoch"],r);const i=p(t,["step"]);return i!=null&&g(e,["step"],i),e}function cC(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const r=p(t,["displayName"]);r!=null&&g(e,["displayName"],r);const i=p(t,["description"]);i!=null&&g(e,["description"],i);const s=p(t,["versionId"]);s!=null&&g(e,["version"],s);const o=p(t,["deployedModels"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(v=>d2e(v))),g(e,["endpoints"],m)}const l=p(t,["labels"]);l!=null&&g(e,["labels"],l);const u=p(t,["_self"]);u!=null&&g(e,["tunedModelInfo"],f2e(u));const d=p(t,["defaultCheckpointId"]);d!=null&&g(e,["defaultCheckpointId"],d);const f=p(t,["checkpoints"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(v=>h2e(v))),g(e,["checkpoints"],m)}return e}function m2e(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&g(e,["nextPageToken"],r);const i=p(t,["_self"]);if(i!=null){let s=V7(i);Array.isArray(s)&&(s=s.map(o=>cC(o))),g(e,["models"],s)}return e}function p2e(){return{}}function g2e(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const r=p(t,["totalTokens"]);return r!=null&&g(e,["totalTokens"],r),e}function y2e(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const r=p(t,["tokensInfo"]);return r!=null&&g(e,["tokensInfo"],r),e}function v2e(t){const e={},n=p(t,["gcsUri"]);n!=null&&g(e,["uri"],n);const r=p(t,["bytesBase64Encoded"]);r!=null&&g(e,["videoBytes"],Hc(r));const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function x2e(t){const e={},n=p(t,["_self"]);return n!=null&&g(e,["video"],v2e(n)),e}function b2e(t){const e={},n=p(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>x2e(o))),g(e,["generatedVideos"],s)}const r=p(t,["raiMediaFilteredCount"]);r!=null&&g(e,["raiMediaFilteredCount"],r);const i=p(t,["raiMediaFilteredReasons"]);return i!=null&&g(e,["raiMediaFilteredReasons"],i),e}function _2e(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const r=p(t,["metadata"]);r!=null&&g(e,["metadata"],r);const i=p(t,["done"]);i!=null&&g(e,["done"],i);const s=p(t,["error"]);s!=null&&g(e,["error"],s);const o=p(t,["response"]);return o!=null&&g(e,["response"],b2e(o)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const w2e="Content-Type",T2e="X-Server-Timeout",E2e="User-Agent",dC="x-goog-api-client",S2e="1.15.0",A2e=`google-genai-sdk/${S2e}`,C2e="v1beta1",I2e="v1beta",LF=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class R2e{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:C2e,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:I2e,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[o,l]of Object.entries(e.queryParams))i.searchParams.append(o,String(l));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,e.abortSignal),this.unaryApiCall(i,s,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,s]of Object.entries(n))typeof s=="object"?r[i]=Object.assign(Object.assign({},r[i]),s):s!==void 0&&(r[i]=s);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,e.abortSignal),this.streamApiCall(i,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r){if(n&&n.timeout||r){const i=new AbortController,s=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const o=setTimeout(()=>i.abort(),n.timeout);o&&typeof o.unref=="function"&&o.unref()}r&&r.addEventListener("abort",()=>{i.abort()}),e.signal=s}return n&&n.extraBody!==null&&P2e(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await UF(i),new iC(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await UF(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var n;return Ef(this,arguments,function*(){const i=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),s=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let o="";for(;;){const{done:l,value:u}=yield Jt(i.read());if(l){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=s.decode(u,{stream:!0});try{const m=JSON.parse(d);if("error"in m){const v=JSON.parse(JSON.stringify(m.error)),_=v.status,T=v.code,S=`got status: ${_}. ${JSON.stringify(m)}`;if(T>=400&&T<600)throw new p_({message:S,status:T})}}catch(m){if(m.name==="ApiError")throw m}o+=d;let f=o.match(LF);for(;f;){const m=f[1];try{const v=new Response(m,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Jt(new iC(v)),o=o.slice(f[0].length),f=o.match(LF)}catch(v){throw new Error(`exception parsing stream chunk ${m}. ${v}`)}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=A2e+" "+this.clientOptions.userAgentExtra;return e[E2e]=n,e[dC]=n,e[w2e]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[r,i]of Object.entries(e.headers))n.append(r,i);e.timeout&&e.timeout>0&&n.append(T2e,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const s=this.clientOptions.uploader,o=await s.stat(e);i.sizeBytes=String(o.size);const l=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:o.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=l;const u=await this.fetchUploadUrl(i,n);return s.upload(e,u,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var r;let i={};n!=null&&n.httpOptions?i=n.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const s={file:e},o=await this.request({path:Fe("upload/v1beta/files",s._url),body:JSON.stringify(s),httpMethod:"POST",httpOptions:i});if(!o||!(o!=null&&o.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const l=(r=o==null?void 0:o.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(l===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return l}}async function UF(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new p_({message:i,status:n}):new Error(i)}}function P2e(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(s,o){const l=Object.assign({},s);for(const u in o)if(Object.prototype.hasOwnProperty.call(o,u)){const d=o[u],f=l[u];d&&typeof d=="object"&&!Array.isArray(d)&&f&&typeof f=="object"&&!Array.isArray(f)?l[u]=r(f,d):(f&&d&&typeof f!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${u}". Original type: ${typeof f}, New type: ${typeof d}. Overwriting.`),l[u]=d)}return l}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const N2e="mcp_used/unknown";let M2e=!1;function eK(t){for(const e of t)if(D2e(e)||typeof e=="object"&&"inputSchema"in e)return!0;return M2e}function tK(t){var e;const n=(e=t[dC])!==null&&e!==void 0?e:"";t[dC]=(n+` ${N2e}`).trimStart()}function D2e(t){return t!==null&&typeof t=="object"&&t instanceof EN}function k2e(t,e=100){return Ef(this,arguments,function*(){let r,i=0;for(;i<e;){const s=yield Jt(t.listTools({cursor:r}));for(const o of s.tools)yield yield Jt(o),i++;if(!s.nextCursor)break;r=s.nextCursor}})}class EN{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new EN(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const s={},o=[];for(const f of this.mcpClients)try{for(var l=!0,u=(n=void 0,qp(k2e(f))),d;d=await u.next(),e=d.done,!e;l=!0){i=d.value,l=!1;const m=i;o.push(m);const v=m.name;if(s[v])throw new Error(`Duplicate function name ${v} found in MCP tools. Please ensure function names are unique.`);s[v]=f}}catch(m){n={error:m}}finally{try{!l&&!e&&(r=u.return)&&await r.call(u)}finally{if(n)throw n.error}}this.mcpTools=o,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),d1e(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const o=await i.callTool({name:r.name,arguments:r.args},void 0,s);n.push({functionResponse:{name:r.name,response:o.isError?{error:o}:o}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function O2e(t,e,n){const r=new r1e;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data);const s=pPe(i);Object.assign(r,s),e(r)}class V2e{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),o=F2e(this.apiClient.getDefaultHeaders()),l=this.apiClient.getApiKey(),u=`${i}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${l}`;let d=()=>{};const f=new Promise(N=>{d=N}),m=e.callbacks,v=function(){d({})},_=this.apiClient,T={onopen:v,onmessage:N=>{O2e(_,m.onmessage,N)},onerror:(n=m==null?void 0:m.onerror)!==null&&n!==void 0?n:function(N){},onclose:(r=m==null?void 0:m.onclose)!==null&&r!==void 0?r:function(N){}},S=this.webSocketFactory.create(u,U2e(o),T);S.connect(),await f;const A=Ct(this.apiClient,e.model),I=K7({model:A}),D=lC({setup:I});return S.send(JSON.stringify(D)),new L2e(S,this.apiClient)}}class L2e{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=fRe(e),r=W7(n);this.conn.send(JSON.stringify({clientContent:r}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=hRe(e),r=lC(n);this.conn.send(JSON.stringify(r))}sendPlaybackControl(e){const n=lC({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(ff.PLAY)}pause(){this.sendPlaybackControl(ff.PAUSE)}stop(){this.sendPlaybackControl(ff.STOP)}resetContext(){this.sendPlaybackControl(ff.RESET_CONTEXT)}close(){this.conn.close()}}function U2e(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function F2e(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const j2e="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function B2e(t,e,n){const r=new n1e;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const s=JSON.parse(i);if(t.isVertexAI()){const o=RPe(s);Object.assign(r,o)}else{const o=oPe(s);Object.assign(r,o)}e(r)}class q2e{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new V2e(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,s,o,l;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const u=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let f;const m=this.apiClient.getHeaders();e.config&&e.config.tools&&eK(e.config.tools)&&tK(m);const v=H2e(m);if(this.apiClient.isVertexAI())f=`${u}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(v);else{const k=this.apiClient.getApiKey();let F="BidiGenerateContent",j="key";k!=null&&k.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),F="BidiGenerateContentConstrained",j="access_token"),f=`${u}/ws/google.ai.generativelanguage.${d}.GenerativeService.${F}?${j}=${k}`}let _=()=>{};const T=new Promise(k=>{_=k}),S=e.callbacks,A=function(){var k;(k=S==null?void 0:S.onopen)===null||k===void 0||k.call(S),_({})},I=this.apiClient,D={onopen:A,onmessage:k=>{B2e(I,S.onmessage,k)},onerror:(n=S==null?void 0:S.onerror)!==null&&n!==void 0?n:function(k){},onclose:(r=S==null?void 0:S.onclose)!==null&&r!==void 0?r:function(k){}},N=this.webSocketFactory.create(f,G2e(v),D);N.connect(),await T;let U=Ct(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&U.startsWith("publishers/")){const k=this.apiClient.getProject(),F=this.apiClient.getLocation();U=`projects/${k}/locations/${F}/`+U}let O={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Kx.AUDIO]}:e.config.responseModalities=[Kx.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const q=(l=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&l!==void 0?l:[],M=[];for(const k of q)if(this.isCallableTool(k)){const F=k;M.push(await F.tool())}else M.push(k);M.length>0&&(e.config.tools=M);const R={model:U,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?O=BRe(this.apiClient,R):O=lRe(this.apiClient,R),delete O.config,N.send(JSON.stringify(O)),new $2e(N,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const z2e={turnComplete:!0};class $2e{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=os(n.turns),e.isVertexAI()?r=r.map(i=>Vh(i)):r=r.map(i=>g_(i))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const s of r){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(j2e)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},z2e),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:$Re(e)}:n={realtimeInput:dRe(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function G2e(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function H2e(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FF=10;function jF(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const o of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Sf(o)){i=!0;break}if(!i)return!0;const s=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function Sf(t){return"callTool"in t&&typeof t.callTool=="function"}function K2e(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>Sf(i)))!==null&&r!==void 0?r:!1}function W2e(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>!Sf(i)))!==null&&r!==void 0?r:!1}function BF(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Y2e extends Gc{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,s,o,l;const u=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!K2e(n)||jF(n.config))return await this.generateContentInternal(u);if(W2e(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let d,f;const m=os(u.contents),v=(s=(i=(r=u.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:FF;let _=0;for(;_<v&&(d=await this.generateContentInternal(u),!(!d.functionCalls||d.functionCalls.length===0));){const T=d.candidates[0].content,S=[];for(const A of(l=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&l!==void 0?l:[])if(Sf(A)){const D=await A.callTool(d.functionCalls);S.push(...D)}_++,f={role:"user",parts:S},u.contents=os(u.contents),u.contents.push(T),u.contents.push(f),BF(u.config)&&(m.push(T),m.push(f))}return BF(u.config)&&(d.automaticFunctionCallingHistory=m),d},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),jF(n.config)){const r=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(r)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let s;const o=[];if(r!=null&&r.generatedImages)for(const u of r.generatedImages)u&&(u!=null&&u.safetyAttributes)&&((i=u==null?void 0:u.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?s=u==null?void 0:u.safetyAttributes:o.push(u);let l;return s?l={generatedImages:o,positivePromptSafetyAttributes:s,sdkHttpResponse:r.sdkHttpResponse}:l={generatedImages:o,sdkHttpResponse:r.sdkHttpResponse},l}),this.list=async n=>{var r;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((r=o.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new my(Oc.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(o),o)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>await this.generateVideosInternal(n)}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const s=(n=e.config)===null||n===void 0?void 0:n.tools;if(!s)return e;const o=await Promise.all(s.map(async u=>Sf(u)?await u.tool():u)),l={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(l.config.tools=o,e.config&&e.config.tools&&eK(e.config.tools)){const u=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let d=Object.assign({},u);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),tK(d),l.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return l}async initAfcToolsMap(e){var n,r,i;const s=new Map;for(const o of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Sf(o)){const l=o,u=await l.tool();for(const d of(i=u.functionDeclarations)!==null&&i!==void 0?i:[]){if(!d.name)throw new Error("Function declaration name is required.");if(s.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);s.set(d.name,l)}}return s}async processAfcStream(e){var n,r,i;const s=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:FF;let o=!1,l=0;const u=await this.initAfcToolsMap(e);return(function(d,f,m){var v,_;return Ef(this,arguments,function*(){for(var T,S,A,I;l<s;){o&&(l++,o=!1);const O=yield Jt(d.processParamsMaybeAddMcpUsage(m)),q=yield Jt(d.generateContentStreamInternal(O)),M=[],R=[];try{for(var D=!0,N=(S=void 0,qp(q)),U;U=yield Jt(N.next()),T=U.done,!T;D=!0){I=U.value,D=!1;const k=I;if(yield yield Jt(k),k.candidates&&(!((v=k.candidates[0])===null||v===void 0)&&v.content)){R.push(k.candidates[0].content);for(const F of(_=k.candidates[0].content.parts)!==null&&_!==void 0?_:[])if(l<s&&F.functionCall){if(!F.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(F.functionCall.name)){const j=yield Jt(f.get(F.functionCall.name).callTool([F.functionCall]));M.push(...j)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${F.functionCall.name}`)}}}}catch(k){S={error:k}}finally{try{!D&&!T&&(A=N.return)&&(yield Jt(A.call(N)))}finally{if(S)throw S.error}}if(M.length>0){o=!0;const k=new ap;k.candidates=[{content:{role:"user",parts:M}}],yield yield Jt(k);const F=[];F.push(...R),F.push({role:"user",parts:M});const j=os(m.contents).concat(F);m.contents=j}else break}})})(this,u,e)}async generateContentInternal(e){var n,r,i,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=kF(this.apiClient,e);return l=Fe("{model}:generateContent",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:f.headers},v})),o.then(f=>{const m=VF(f),v=new ap;return Object.assign(v,m),v})}else{const d=DF(this.apiClient,e);return l=Fe("{model}:generateContent",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:f.headers},v})),o.then(f=>{const m=OF(f),v=new ap;return Object.assign(v,m),v})}}async generateContentStreamInternal(e){var n,r,i,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=kF(this.apiClient,e);return l=Fe("{model}:streamGenerateContent?alt=sse",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.requestStream({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),o.then(function(m){return Ef(this,arguments,function*(){var v,_,T,S;try{for(var A=!0,I=qp(m),D;D=yield Jt(I.next()),v=D.done,!v;A=!0){S=D.value,A=!1;const N=S,U=VF(yield Jt(N.json()));U.sdkHttpResponse={headers:N.headers};const O=new ap;Object.assign(O,U),yield yield Jt(O)}}catch(N){_={error:N}}finally{try{!A&&!v&&(T=I.return)&&(yield Jt(T.call(I)))}finally{if(_)throw _.error}}})})}else{const d=DF(this.apiClient,e);return l=Fe("{model}:streamGenerateContent?alt=sse",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.requestStream({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(m){return Ef(this,arguments,function*(){var v,_,T,S;try{for(var A=!0,I=qp(m),D;D=yield Jt(I.next()),v=D.done,!v;A=!0){S=D.value,A=!1;const N=S,U=OF(yield Jt(N.json()));U.sdkHttpResponse={headers:N.headers};const O=new ap;Object.assign(O,U),yield yield Jt(O)}}catch(N){_={error:N}}finally{try{!A&&!v&&(T=I.return)&&(yield Jt(T.call(I)))}finally{if(_)throw _.error}}})})}}async embedContent(e){var n,r,i,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=zNe(this.apiClient,e);return l=Fe("{model}:predict",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:f.headers},v})),o.then(f=>{const m=r2e(f),v=new dF;return Object.assign(v,m),v})}else{const d=tNe(this.apiClient,e);return l=Fe("{model}:batchEmbedContents",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:f.headers},v})),o.then(f=>{const m=DMe(f),v=new dF;return Object.assign(v,m),v})}}async generateImagesInternal(e){var n,r,i,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=GNe(this.apiClient,e);return l=Fe("{model}:predict",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:f.headers},v})),o.then(f=>{const m=i2e(f),v=new fF;return Object.assign(v,m),v})}else{const d=rNe(this.apiClient,e);return l=Fe("{model}:predict",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:f.headers},v})),o.then(f=>{const m=VMe(f),v=new fF;return Object.assign(v,m),v})}}async editImageInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const l=XNe(this.apiClient,e);return s=Fe("{model}:predict",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:u.headers},f})),i.then(u=>{const d=s2e(u),f=new WAe;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const l=eMe(this.apiClient,e);return s=Fe("{model}:predict",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:u.headers},f})),i.then(u=>{const d=o2e(u),f=new YAe;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const l=iMe(this.apiClient,e);return s=Fe("{model}:predict",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const d=a2e(u),f=new JAe;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const l=lMe(this.apiClient,e);return s=Fe("{model}:predict",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const d=c2e(u),f=new QAe;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=uMe(this.apiClient,e);return l=Fe("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>cC(f))}else{const d=iNe(this.apiClient,e);return l=Fe("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>uC(f))}}async listInternal(e){var n,r,i,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=dMe(this.apiClient,e);return l=Fe("{models_url}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:f.headers},v})),o.then(f=>{const m=m2e(f),v=new hF;return Object.assign(v,m),v})}else{const d=oNe(this.apiClient,e);return l=Fe("{models_url}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:f.headers},v})),o.then(f=>{const m=UMe(f),v=new hF;return Object.assign(v,m),v})}}async update(e){var n,r,i,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=hMe(this.apiClient,e);return l=Fe("{model}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>cC(f))}else{const d=lNe(this.apiClient,e);return l=Fe("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>uC(f))}}async delete(e){var n,r,i,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=mMe(this.apiClient,e);return l=Fe("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(()=>{const f=p2e(),m=new mF;return Object.assign(m,f),m})}else{const d=uNe(this.apiClient,e);return l=Fe("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(()=>{const f=FMe(),m=new mF;return Object.assign(m,f),m})}}async countTokens(e){var n,r,i,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=gMe(this.apiClient,e);return l=Fe("{model}:countTokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:f.headers},v})),o.then(f=>{const m=g2e(f),v=new pF;return Object.assign(v,m),v})}else{const d=dNe(this.apiClient,e);return l=Fe("{model}:countTokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:f.headers},v})),o.then(f=>{const m=jMe(f),v=new pF;return Object.assign(v,m),v})}}async computeTokens(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const l=yMe(this.apiClient,e);return s=Fe("{model}:computeTokens",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:u.headers},f})),i.then(u=>{const d=y2e(u),f=new XAe;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=_Me(this.apiClient,e);return l=Fe("{model}:predictLongRunning",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>{const m=_2e(f),v=new Wx;return Object.assign(v,m),v})}else{const d=mNe(this.apiClient,e);return l=Fe("{model}:predictLongRunning",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const m=$Me(f),v=new Wx;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function J2e(t){const e={},n=p(t,["operationName"]);n!=null&&g(e,["_url","operationName"],n);const r=p(t,["config"]);return r!=null&&g(e,["config"],r),e}function Q2e(t){const e={},n=p(t,["operationName"]);n!=null&&g(e,["_url","operationName"],n);const r=p(t,["config"]);return r!=null&&g(e,["config"],r),e}function X2e(t){const e={},n=p(t,["operationName"]);n!=null&&g(e,["operationName"],n);const r=p(t,["resourceName"]);r!=null&&g(e,["_url","resourceName"],r);const i=p(t,["config"]);return i!=null&&g(e,["config"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Z2e extends Gc{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:o,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:o,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=Q2e(e);return l=Fe("{operationName}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o}else{const d=J2e(e);return l=Fe("{operationName}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o}}async fetchPredictVideosOperationInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const l=X2e(e);return s=Fe("{resourceName}:fetchPredictOperation",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eDe(t){const e={},n=p(t,["voiceName"]);return n!=null&&g(e,["voiceName"],n),e}function nK(t){const e={},n=p(t,["prebuiltVoiceConfig"]);return n!=null&&g(e,["prebuiltVoiceConfig"],eDe(n)),e}function tDe(t){const e={},n=p(t,["speaker"]);n!=null&&g(e,["speaker"],n);const r=p(t,["voiceConfig"]);return r!=null&&g(e,["voiceConfig"],nK(r)),e}function nDe(t){const e={},n=p(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>tDe(i))),g(e,["speakerVoiceConfigs"],r)}return e}function rDe(t){const e={},n=p(t,["voiceConfig"]);n!=null&&g(e,["voiceConfig"],nK(n));const r=p(t,["multiSpeakerVoiceConfig"]);r!=null&&g(e,["multiSpeakerVoiceConfig"],nDe(r));const i=p(t,["languageCode"]);return i!=null&&g(e,["languageCode"],i),e}function iDe(t){const e={},n=p(t,["fps"]);n!=null&&g(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&g(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&g(e,["startOffset"],i),e}function sDe(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["data"]);n!=null&&g(e,["data"],n);const r=p(t,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function oDe(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const r=p(t,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function aDe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&g(e,["videoMetadata"],iDe(n));const r=p(t,["thought"]);r!=null&&g(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&g(e,["inlineData"],sDe(i));const s=p(t,["fileData"]);s!=null&&g(e,["fileData"],oDe(s));const o=p(t,["thoughtSignature"]);o!=null&&g(e,["thoughtSignature"],o);const l=p(t,["codeExecutionResult"]);l!=null&&g(e,["codeExecutionResult"],l);const u=p(t,["executableCode"]);u!=null&&g(e,["executableCode"],u);const d=p(t,["functionCall"]);d!=null&&g(e,["functionCall"],d);const f=p(t,["functionResponse"]);f!=null&&g(e,["functionResponse"],f);const m=p(t,["text"]);return m!=null&&g(e,["text"],m),e}function lDe(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>aDe(s))),g(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&g(e,["role"],r),e}function uDe(t){const e={},n=p(t,["behavior"]);n!=null&&g(e,["behavior"],n);const r=p(t,["description"]);r!=null&&g(e,["description"],r);const i=p(t,["name"]);i!=null&&g(e,["name"],i);const s=p(t,["parameters"]);s!=null&&g(e,["parameters"],s);const o=p(t,["parametersJsonSchema"]);o!=null&&g(e,["parametersJsonSchema"],o);const l=p(t,["response"]);l!=null&&g(e,["response"],l);const u=p(t,["responseJsonSchema"]);return u!=null&&g(e,["responseJsonSchema"],u),e}function cDe(t){const e={},n=p(t,["startTime"]);n!=null&&g(e,["startTime"],n);const r=p(t,["endTime"]);return r!=null&&g(e,["endTime"],r),e}function dDe(t){const e={},n=p(t,["timeRangeFilter"]);if(n!=null&&g(e,["timeRangeFilter"],cDe(n)),p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function fDe(t){const e={},n=p(t,["mode"]);n!=null&&g(e,["mode"],n);const r=p(t,["dynamicThreshold"]);return r!=null&&g(e,["dynamicThreshold"],r),e}function hDe(t){const e={},n=p(t,["dynamicRetrievalConfig"]);return n!=null&&g(e,["dynamicRetrievalConfig"],fDe(n)),e}function mDe(){return{}}function pDe(t){const e={},n=p(t,["environment"]);return n!=null&&g(e,["environment"],n),e}function gDe(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(d=>uDe(d))),g(e,["functionDeclarations"],u)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=p(t,["googleSearch"]);r!=null&&g(e,["googleSearch"],dDe(r));const i=p(t,["googleSearchRetrieval"]);if(i!=null&&g(e,["googleSearchRetrieval"],hDe(i)),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(p(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");p(t,["urlContext"])!=null&&g(e,["urlContext"],mDe());const o=p(t,["computerUse"]);o!=null&&g(e,["computerUse"],pDe(o));const l=p(t,["codeExecution"]);return l!=null&&g(e,["codeExecution"],l),e}function yDe(t){const e={},n=p(t,["handle"]);if(n!=null&&g(e,["handle"],n),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function qF(){return{}}function vDe(t){const e={},n=p(t,["disabled"]);n!=null&&g(e,["disabled"],n);const r=p(t,["startOfSpeechSensitivity"]);r!=null&&g(e,["startOfSpeechSensitivity"],r);const i=p(t,["endOfSpeechSensitivity"]);i!=null&&g(e,["endOfSpeechSensitivity"],i);const s=p(t,["prefixPaddingMs"]);s!=null&&g(e,["prefixPaddingMs"],s);const o=p(t,["silenceDurationMs"]);return o!=null&&g(e,["silenceDurationMs"],o),e}function xDe(t){const e={},n=p(t,["automaticActivityDetection"]);n!=null&&g(e,["automaticActivityDetection"],vDe(n));const r=p(t,["activityHandling"]);r!=null&&g(e,["activityHandling"],r);const i=p(t,["turnCoverage"]);return i!=null&&g(e,["turnCoverage"],i),e}function bDe(t){const e={},n=p(t,["targetTokens"]);return n!=null&&g(e,["targetTokens"],n),e}function _De(t){const e={},n=p(t,["triggerTokens"]);n!=null&&g(e,["triggerTokens"],n);const r=p(t,["slidingWindow"]);return r!=null&&g(e,["slidingWindow"],bDe(r)),e}function wDe(t){const e={},n=p(t,["proactiveAudio"]);return n!=null&&g(e,["proactiveAudio"],n),e}function TDe(t,e){const n={},r=p(t,["generationConfig"]);e!==void 0&&r!=null&&g(e,["setup","generationConfig"],r);const i=p(t,["responseModalities"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig","responseModalities"],i);const s=p(t,["temperature"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig","temperature"],s);const o=p(t,["topP"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","topP"],o);const l=p(t,["topK"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","topK"],l);const u=p(t,["maxOutputTokens"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","maxOutputTokens"],u);const d=p(t,["mediaResolution"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","mediaResolution"],d);const f=p(t,["seed"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","seed"],f);const m=p(t,["speechConfig"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","speechConfig"],rDe(TN(m)));const v=p(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],v);const _=p(t,["systemInstruction"]);e!==void 0&&_!=null&&g(e,["setup","systemInstruction"],lDe(Lr(_)));const T=p(t,["tools"]);if(e!==void 0&&T!=null){let O=kh(T);Array.isArray(O)&&(O=O.map(q=>gDe(Dh(q)))),g(e,["setup","tools"],O)}const S=p(t,["sessionResumption"]);e!==void 0&&S!=null&&g(e,["setup","sessionResumption"],yDe(S));const A=p(t,["inputAudioTranscription"]);e!==void 0&&A!=null&&g(e,["setup","inputAudioTranscription"],qF());const I=p(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&g(e,["setup","outputAudioTranscription"],qF());const D=p(t,["realtimeInputConfig"]);e!==void 0&&D!=null&&g(e,["setup","realtimeInputConfig"],xDe(D));const N=p(t,["contextWindowCompression"]);e!==void 0&&N!=null&&g(e,["setup","contextWindowCompression"],_De(N));const U=p(t,["proactivity"]);return e!==void 0&&U!=null&&g(e,["setup","proactivity"],wDe(U)),n}function EDe(t,e){const n={},r=p(e,["model"]);r!=null&&g(n,["setup","model"],Ct(t,r));const i=p(e,["config"]);return i!=null&&g(n,["config"],TDe(i,n)),n}function SDe(t,e,n){const r={},i=p(e,["expireTime"]);n!==void 0&&i!=null&&g(n,["expireTime"],i);const s=p(e,["newSessionExpireTime"]);n!==void 0&&s!=null&&g(n,["newSessionExpireTime"],s);const o=p(e,["uses"]);n!==void 0&&o!=null&&g(n,["uses"],o);const l=p(e,["liveConnectConstraints"]);n!==void 0&&l!=null&&g(n,["bidiGenerateContentSetup"],EDe(t,l));const u=p(e,["lockAdditionalFields"]);return n!==void 0&&u!=null&&g(n,["fieldMask"],u),r}function ADe(t,e){const n={},r=p(e,["config"]);return r!=null&&g(n,["config"],SDe(t,r,n)),n}function CDe(t){const e={},n=p(t,["name"]);return n!=null&&g(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IDe(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(s=>`${n}.${s}`);e.push(...i)}else e.push(n)}return e.join(",")}function RDe(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const s=r.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,n=s):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const s=IDe(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)s?t.fieldMask=s:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let l=[];i.length>0&&(l=i.map(d=>o.includes(d)?`generationConfig.${d}`:d));const u=[];s&&u.push(s),l.length>0&&u.push(...l),u.length>0?t.fieldMask=u.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class PDe extends Gc{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const l=ADe(this.apiClient,e);s=Fe("auth_tokens",l._url),o=l._query,delete l.config,delete l._url,delete l._query;const u=RDe(l,e.config);return i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>CDe(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NDe(t){const e={},n=p(t,["name"]);n!=null&&g(e,["_url","name"],n);const r=p(t,["config"]);return r!=null&&g(e,["config"],r),e}function MDe(t,e){const n={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&g(e,["_query","pageSize"],r);const i=p(t,["pageToken"]);e!==void 0&&i!=null&&g(e,["_query","pageToken"],i);const s=p(t,["filter"]);return e!==void 0&&s!=null&&g(e,["_query","filter"],s),n}function DDe(t){const e={},n=p(t,["config"]);return n!=null&&g(e,["config"],MDe(n,e)),e}function kDe(t){const e={},n=p(t,["textInput"]);n!=null&&g(e,["textInput"],n);const r=p(t,["output"]);return r!=null&&g(e,["output"],r),e}function ODe(t){const e={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=p(t,["examples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>kDe(i))),g(e,["examples","examples"],r)}return e}function VDe(t,e){const n={};if(p(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=p(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&g(e,["displayName"],r),p(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=p(t,["epochCount"]);e!==void 0&&i!=null&&g(e,["tuningTask","hyperparameters","epochCount"],i);const s=p(t,["learningRateMultiplier"]);if(s!=null&&g(n,["tuningTask","hyperparameters","learningRateMultiplier"],s),p(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(p(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(p(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const o=p(t,["batchSize"]);e!==void 0&&o!=null&&g(e,["tuningTask","hyperparameters","batchSize"],o);const l=p(t,["learningRate"]);return e!==void 0&&l!=null&&g(e,["tuningTask","hyperparameters","learningRate"],l),n}function LDe(t){const e={},n=p(t,["baseModel"]);n!=null&&g(e,["baseModel"],n);const r=p(t,["preTunedModel"]);r!=null&&g(e,["preTunedModel"],r);const i=p(t,["trainingDataset"]);i!=null&&g(e,["tuningTask","trainingData"],ODe(i));const s=p(t,["config"]);return s!=null&&g(e,["config"],VDe(s,e)),e}function UDe(t){const e={},n=p(t,["name"]);n!=null&&g(e,["_url","name"],n);const r=p(t,["config"]);return r!=null&&g(e,["config"],r),e}function FDe(t,e){const n={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&g(e,["_query","pageSize"],r);const i=p(t,["pageToken"]);e!==void 0&&i!=null&&g(e,["_query","pageToken"],i);const s=p(t,["filter"]);return e!==void 0&&s!=null&&g(e,["_query","filter"],s),n}function jDe(t){const e={},n=p(t,["config"]);return n!=null&&g(e,["config"],FDe(n,e)),e}function BDe(t,e){const n={},r=p(t,["gcsUri"]);e!==void 0&&r!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],r);const i=p(t,["vertexDatasetResource"]);if(e!==void 0&&i!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],i),p(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function qDe(t,e){const n={},r=p(t,["gcsUri"]);r!=null&&g(n,["validationDatasetUri"],r);const i=p(t,["vertexDatasetResource"]);return e!==void 0&&i!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],i),n}function zDe(t,e){const n={},r=p(t,["validationDataset"]);e!==void 0&&r!=null&&g(e,["supervisedTuningSpec"],qDe(r,n));const i=p(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&g(e,["tunedModelDisplayName"],i);const s=p(t,["description"]);e!==void 0&&s!=null&&g(e,["description"],s);const o=p(t,["epochCount"]);e!==void 0&&o!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],o);const l=p(t,["learningRateMultiplier"]);e!==void 0&&l!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],l);const u=p(t,["exportLastCheckpointOnly"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],u);const d=p(t,["preTunedModelCheckpointId"]);d!=null&&g(n,["preTunedModel","checkpointId"],d);const f=p(t,["adapterSize"]);if(e!==void 0&&f!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],f),p(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(p(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function $De(t){const e={},n=p(t,["baseModel"]);n!=null&&g(e,["baseModel"],n);const r=p(t,["preTunedModel"]);r!=null&&g(e,["preTunedModel"],r);const i=p(t,["trainingDataset"]);i!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],BDe(i,e));const s=p(t,["config"]);return s!=null&&g(e,["config"],zDe(s,e)),e}function GDe(t){const e={},n=p(t,["name"]);n!=null&&g(e,["model"],n);const r=p(t,["name"]);return r!=null&&g(e,["endpoint"],r),e}function rK(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const r=p(t,["name"]);r!=null&&g(e,["name"],r);const i=p(t,["state"]);i!=null&&g(e,["state"],D7(i));const s=p(t,["createTime"]);s!=null&&g(e,["createTime"],s);const o=p(t,["tuningTask","startTime"]);o!=null&&g(e,["startTime"],o);const l=p(t,["tuningTask","completeTime"]);l!=null&&g(e,["endTime"],l);const u=p(t,["updateTime"]);u!=null&&g(e,["updateTime"],u);const d=p(t,["description"]);d!=null&&g(e,["description"],d);const f=p(t,["baseModel"]);f!=null&&g(e,["baseModel"],f);const m=p(t,["_self"]);m!=null&&g(e,["tunedModel"],GDe(m));const v=p(t,["customBaseModel"]);v!=null&&g(e,["customBaseModel"],v);const _=p(t,["experiment"]);_!=null&&g(e,["experiment"],_);const T=p(t,["labels"]);T!=null&&g(e,["labels"],T);const S=p(t,["outputUri"]);S!=null&&g(e,["outputUri"],S);const A=p(t,["pipelineJob"]);A!=null&&g(e,["pipelineJob"],A);const I=p(t,["serviceAccount"]);I!=null&&g(e,["serviceAccount"],I);const D=p(t,["tunedModelDisplayName"]);return D!=null&&g(e,["tunedModelDisplayName"],D),e}function HDe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&g(e,["nextPageToken"],r);const i=p(t,["tunedModels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>rK(o))),g(e,["tuningJobs"],s)}return e}function KDe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const r=p(t,["name"]);r!=null&&g(e,["name"],r);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const s=p(t,["done"]);s!=null&&g(e,["done"],s);const o=p(t,["error"]);return o!=null&&g(e,["error"],o),e}function WDe(t){const e={},n=p(t,["checkpointId"]);n!=null&&g(e,["checkpointId"],n);const r=p(t,["epoch"]);r!=null&&g(e,["epoch"],r);const i=p(t,["step"]);i!=null&&g(e,["step"],i);const s=p(t,["endpoint"]);return s!=null&&g(e,["endpoint"],s),e}function YDe(t){const e={},n=p(t,["model"]);n!=null&&g(e,["model"],n);const r=p(t,["endpoint"]);r!=null&&g(e,["endpoint"],r);const i=p(t,["checkpoints"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>WDe(o))),g(e,["checkpoints"],s)}return e}function fC(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const r=p(t,["name"]);r!=null&&g(e,["name"],r);const i=p(t,["state"]);i!=null&&g(e,["state"],D7(i));const s=p(t,["createTime"]);s!=null&&g(e,["createTime"],s);const o=p(t,["startTime"]);o!=null&&g(e,["startTime"],o);const l=p(t,["endTime"]);l!=null&&g(e,["endTime"],l);const u=p(t,["updateTime"]);u!=null&&g(e,["updateTime"],u);const d=p(t,["error"]);d!=null&&g(e,["error"],d);const f=p(t,["description"]);f!=null&&g(e,["description"],f);const m=p(t,["baseModel"]);m!=null&&g(e,["baseModel"],m);const v=p(t,["tunedModel"]);v!=null&&g(e,["tunedModel"],YDe(v));const _=p(t,["preTunedModel"]);_!=null&&g(e,["preTunedModel"],_);const T=p(t,["supervisedTuningSpec"]);T!=null&&g(e,["supervisedTuningSpec"],T);const S=p(t,["tuningDataStats"]);S!=null&&g(e,["tuningDataStats"],S);const A=p(t,["encryptionSpec"]);A!=null&&g(e,["encryptionSpec"],A);const I=p(t,["partnerModelTuningSpec"]);I!=null&&g(e,["partnerModelTuningSpec"],I);const D=p(t,["customBaseModel"]);D!=null&&g(e,["customBaseModel"],D);const N=p(t,["experiment"]);N!=null&&g(e,["experiment"],N);const U=p(t,["labels"]);U!=null&&g(e,["labels"],U);const O=p(t,["outputUri"]);O!=null&&g(e,["outputUri"],O);const q=p(t,["pipelineJob"]);q!=null&&g(e,["pipelineJob"],q);const M=p(t,["serviceAccount"]);M!=null&&g(e,["serviceAccount"],M);const R=p(t,["tunedModelDisplayName"]);return R!=null&&g(e,["tunedModelDisplayName"],R),e}function JDe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&g(e,["nextPageToken"],r);const i=p(t,["tuningJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>fC(o))),g(e,["tuningJobs"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QDe extends Gc{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new my(Oc.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel},i=Object.assign(Object.assign({},n),{preTunedModel:r});return i.baseModel=void 0,await this.tuneInternal(i)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),i=await this.tuneMldevInternal(r);let s="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?s=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(s=i.name.split("/operations/")[0]),{name:s,state:rC.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=UDe(e);return l=Fe("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:f.headers},v})),o.then(f=>fC(f))}else{const d=NDe(e);return l=Fe("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:f.headers},v})),o.then(f=>rK(f))}}async listInternal(e){var n,r,i,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=jDe(e);return l=Fe("tuningJobs",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:f.headers},v})),o.then(f=>{const m=JDe(f),v=new yF;return Object.assign(v,m),v})}else{const d=DDe(e);return l=Fe("tunedModels",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:f.headers},v})),o.then(f=>{const m=HDe(f),v=new yF;return Object.assign(v,m),v})}}async tuneInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const l=$De(e);return s=Fe("tuningJobs",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:u.headers},f})),i.then(u=>fC(u))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=LDe(e);return s=Fe("tunedModels",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:u.headers},f})),i.then(u=>KDe(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class XDe{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const ZDe=1024*1024*8,eke=3,tke=1e3,nke=2,KS="x-goog-upload-status";async function rke(t,e,n){var r,i,s;let o=0,l=0,u=new iC(new Response),d="upload";for(o=t.size;l<o;){const m=Math.min(ZDe,o-l),v=t.slice(l,l+m);l+m>=o&&(d+=", finalize");let _=0,T=tke;for(;_<eke&&(u=await n.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(l),"Content-Length":String(m)}}}),!(!((r=u==null?void 0:u.headers)===null||r===void 0)&&r[KS]));)_++,await ske(T),T=T*nke;if(l+=m,((i=u==null?void 0:u.headers)===null||i===void 0?void 0:i[KS])!=="active")break;if(o<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const f=await(u==null?void 0:u.json());if(((s=u==null?void 0:u.headers)===null||s===void 0?void 0:s[KS])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return f.file}async function ike(t){return{size:t.size,type:t.type}}function ske(t){return new Promise(e=>setTimeout(e,t))}class oke{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await rke(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await ike(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ake{create(e,n,r){return new lke(e,n,r)}}class lke{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zF="x-goog-api-key";class uke{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(zF)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(zF,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cke="gl-node/";class dke{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=KAe(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const i=new uke(this.apiKey);this.apiClient=new R2e({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:cke+"web",uploader:new oke,downloader:new XDe}),this.models=new Y2e(this.apiClient),this.live=new q2e(this.apiClient,i,new ake),this.batches=new vCe(this.apiClient),this.chats=new EIe(this.models,this.apiClient),this.caches=new _Ie(this.apiClient),this.files=new LIe(this.apiClient),this.operations=new Z2e(this.apiClient),this.authTokens=new PDe(this.apiClient),this.tunings=new QDe(this.apiClient)}}const fke=new dke({apiKey:"AIzaSyDZh7qHA0JRGDwdR-ODtq7y6vifBBZx538"}),hke={type:Ci.ARRAY,items:{type:Ci.OBJECT,properties:{userId:{type:Ci.STRING,description:"The unique ID (string) of the matched user."},compatibilityScore:{type:Ci.NUMBER,description:"A score from 0 to 100 indicating the compatibility between the two users."},justification:{type:Ci.STRING,description:"A brief, one-sentence explanation for why this is a good match."}},required:["userId","compatibilityScore","justification"]}},mke=async(t,e)=>{var i,s,o;const n="gemini-2.5-flash",r=`
        You are an expert co-founder matching AI. Your task is to find the best possible co-founders for a given user from a list of potential partners. Analyze the profiles carefully and return the top 5 matches based on role compatibility, shared interests, complementary skills, and stated goals.

        Current User Profile:
        - User ID: ${t.id}
        - Name: ${t.name}
        - Role: ${t.role}
        - Location: ${t.location}
        - Interests: ${t.interests.join(", ")}
        - Skills: ${t.skills.join(", ")}
        - Experience: ${t.experience}
        - Looking For: ${t.lookingFor}

        List of Potential Partners:
        ${e.map(l=>`
        ---
        User ID: ${l.id}
        Name: ${l.name}
        Role: ${l.role}
        Location: ${l.location}
        Interests: ${l.interests.join(", ")}
        Skills: ${l.skills.join(", ")}
        Experience: ${l.experience}
        Looking For: ${l.lookingFor}
        `).join("")}

        Based on this information, provide a ranked list of the top 5 most compatible partners for ${t.name}. Your response must be a JSON array of objects, conforming to the provided schema. The justification should be concise and highlight the key reason for the match.
    `;try{const u=(await fke.models.generateContent({model:n,contents:r,config:{temperature:0,responseMimeType:"application/json",responseSchema:hke}})).text.trim();return{matches:JSON.parse(u).sort((f,m)=>m.compatibilityScore-f.compatibilityScore),isFallback:!1}}catch(l){if(console.error("Error calling Gemini API:",l),((i=l==null?void 0:l.error)==null?void 0:i.code)===429||(s=l==null?void 0:l.message)!=null&&s.includes("quota")||(o=l==null?void 0:l.message)!=null&&o.includes("RESOURCE_EXHAUSTED"))return console.warn("Gemini API quota exceeded. Using fallback matching algorithm."),{matches:pke(t,e),isFallback:!0};throw new Error("Failed to fetch matches from the AI. The Gemini API key may be invalid or there could be a network issue.")}},pke=(t,e)=>e.filter(s=>s.id!==t.id).map(s=>{let o=50;t.role!==s.role&&(o+=20),t.location&&s.location&&t.location.toLowerCase()===s.location.toLowerCase()&&(o+=15);const l=t.skills.filter(d=>s.skills.includes(d));o+=l.length*5;const u=t.interests.filter(d=>s.interests.includes(d));return o+=u.length*3,o=Math.min(o,100),{user:s,score:o,justification:gke(t,s)}}).sort((s,o)=>o.score-s.score).slice(0,5).map(s=>({userId:s.user.id,compatibilityScore:s.score,justification:s.justification})),gke=(t,e,n)=>{const r=[];return t.role!==e.role&&r.push("complementary roles"),t.location&&e.location&&t.location.toLowerCase()===e.location.toLowerCase()&&r.push("same location"),t.skills.filter(o=>e.skills.includes(o)).length>0&&r.push("shared skills"),t.interests.filter(o=>e.interests.includes(o)).length>0&&r.push("shared interests"),r.length===0?"Good potential match based on profile analysis.":`Strong match due to ${r.join(", ")}.`},pl={trackUserActivity:async(t,e,n)=>{try{const r={userId:t,action:e,timestamp:new Date};n!==void 0&&(r.metadata=n),await Ie.collection("user_activities").add(r)}catch(r){console.error("Error tracking user activity:",r)}},startUserSession:async t=>{try{const e={userId:t,startTime:new Date},n=await Ie.collection("user_sessions").add(e);return await pl.trackUserActivity(t,"login"),n.id}catch(e){throw console.error("Error starting user session:",e),e}},endUserSession:async(t,e)=>{try{const n=Ie.collection("user_sessions").doc(t),r=await n.get();if(r.exists){const i=r.data(),s=new Date,o=Math.round((s.getTime()-i.startTime.getTime())/(1e3*60));await n.update({endTime:s,duration:o}),await pl.trackUserActivity(e,"logout")}}catch(n){console.error("Error ending user session:",n)}},trackMatch:async(t,e,n)=>{try{const r={userId:t,matchedUserId:e,timestamp:new Date,compatibilityScore:n,status:"pending"},i=await Ie.collection("match_records").add(r);return await pl.trackUserActivity(t,"find_matches",{matchedUserId:e,compatibilityScore:n}),i.id}catch(r){throw console.error("Error tracking match:",r),r}},updateMatchStatus:async(t,e)=>{try{await Ie.collection("match_records").doc(t).update({status:e})}catch(n){console.error("Error updating match status:",n)}},getAnalyticsData:async()=>{try{const t=new Date,e=new Date(t.getFullYear(),t.getMonth(),t.getDate()),n=new Date(t.getFullYear(),t.getMonth(),1),r=new Date(t.getTime()-10080*60*1e3),s=(await Ie.collection("users").get()).size,o=await Ie.collection("user_activities").where("timestamp",">=",e).get(),l=new Set;o.forEach(M=>{l.add(M.data().userId)});const u=l.size,d=await Ie.collection("user_activities").where("timestamp",">=",n).get(),f=new Set;d.forEach(M=>{f.add(M.data().userId)});const m=f.size,v=await Ie.collection("user_sessions").where("duration",">",0).get();let _=0,T=0;v.forEach(M=>{const R=M.data();R.duration&&(_+=R.duration,T++)});const S=T>0?Math.round(_/T):0,A=await Ie.collection("match_records").get(),I=A.size;let D=0;A.forEach(M=>{M.data().status==="connected"&&D++});const N=I>0?Math.round(D/I*100*10)/10:0,U=[],O=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];for(let M=6;M>=0;M--){const R=new Date(t.getTime()-M*24*60*60*1e3),k=new Date(R.getFullYear(),R.getMonth(),R.getDate()),F=new Date(k.getTime()+1440*60*1e3),j=await Ie.collection("user_activities").where("timestamp",">=",k).where("timestamp","<",F).get(),G=new Set;j.forEach($=>{G.add($.data().userId)}),U.push({name:O[R.getDay()],users:G.size})}const q=[];for(let M=3;M>=0;M--){const R=new Date(t.getTime()-(M+1)*7*24*60*60*1e3),k=new Date(t.getTime()-M*7*24*60*60*1e3),F=await Ie.collection("match_records").where("timestamp",">=",R).where("timestamp","<",k).get();let j=0,G=0;F.forEach(de=>{const ve=de.data();G++,ve.status==="connected"&&j++});const $=G>0?Math.round(j/G*100*10)/10:0;q.push({name:`Week ${4-M}`,rate:$})}return{userEngagement:{dailyActiveUsers:u||Math.floor(s*.3),monthlyActiveUsers:m||Math.floor(s*.8),averageSessionDuration:S||15},matchSuccess:{totalMatchesMade:I,successfulConnections:D,successRate:N},platformPerformance:{dau_data:U.length>0?U:[{name:"Mon",users:Math.floor(s*.2)},{name:"Tue",users:Math.floor(s*.25)},{name:"Wed",users:Math.floor(s*.22)},{name:"Thu",users:Math.floor(s*.28)},{name:"Fri",users:Math.floor(s*.35)},{name:"Sat",users:Math.floor(s*.4)},{name:"Sun",users:Math.floor(s*.3)}],match_rate_data:q.length>0?q:[{name:"Week 1",rate:15},{name:"Week 2",rate:18},{name:"Week 3",rate:22},{name:"Week 4",rate:20}]}}}catch(t){console.error("Error getting analytics data:",t);const n=(await Ie.collection("users").get()).size;return{userEngagement:{dailyActiveUsers:Math.floor(n*.3),monthlyActiveUsers:Math.floor(n*.8),averageSessionDuration:15},matchSuccess:{totalMatchesMade:0,successfulConnections:0,successRate:0},platformPerformance:{dau_data:[{name:"Mon",users:Math.floor(n*.2)},{name:"Tue",users:Math.floor(n*.25)},{name:"Wed",users:Math.floor(n*.22)},{name:"Thu",users:Math.floor(n*.28)},{name:"Fri",users:Math.floor(n*.35)},{name:"Sat",users:Math.floor(n*.4)},{name:"Sun",users:Math.floor(n*.3)}],match_rate_data:[{name:"Week 1",rate:15},{name:"Week 2",rate:18},{name:"Week 3",rate:22},{name:"Week 4",rate:20}]}}}}};function $F(){return typeof navigator<"u"&&(/wv/.test(navigator.userAgent)||/Android/.test(navigator.userAgent)&&/Version\//.test(navigator.userAgent))}function GF(){return new URLSearchParams(window.location.search).get("token")}const yke=()=>{P.useEffect(()=>{const ke=()=>{const Ge=window.location.pathname;Ge.endsWith("/Grow-With-Me-AI/")||Ge==="/Grow-With-Me-AI/"?n(Se.LANDING):Ge.endsWith("/Grow-With-Me-AI/auth")&&n(Se.AUTH)};return window.addEventListener("popstate",ke),()=>window.removeEventListener("popstate",ke)},[]),P.useEffect(()=>{if(typeof window<"u"&&(window.navigator.userAgent.includes("Android")||window.navigator.userAgent.includes("Mobile")||window.navigator.userAgent.includes("iPhone")||window.navigator.userAgent.includes("iPad")))try{typeof window<"u"&&(window.navigator.userAgent.includes("Android")||window.navigator.userAgent.includes("Mobile"))&&console.log("Mobile environment detected, mobile features may be available")}catch(Ye){console.warn("Mobile features not available:",Ye)}const Ge=GF();if(Ge){const Ye=wt.auth.GoogleAuthProvider.credential(Ge);cl.signInWithCredential(Ye).then(tt=>{i(tt.user),ve(!1),O(!1)}).catch(tt=>{console.error("Native sign-in failed:",tt),k("Native sign-in failed: "+(tt&&tt.message?tt.message:JSON.stringify(tt))),O(!1)})}},[]);const t=(()=>{const ke=window.location.pathname;return ke==="/Grow-With-Me-AI/auth"||ke==="/Grow-With-Me-AI/auth/"?Se.AUTH:Se.LANDING})(),[e,n]=P.useState(t),[r,i]=P.useState(null),[s,o]=P.useState(null),[l,u]=P.useState(!1),[d,f]=P.useState(!1),[m,v]=P.useState(null),[_,T]=P.useState(!1),[S,A]=P.useState(null),I=P.useRef(S);P.useEffect(()=>{I.current=S},[S]),P.useEffect(()=>(window.setNativeUser=(ke,Ge,Ye,tt)=>{A({idToken:ke,name:Ge,email:Ye,avatarUrl:tt})},()=>{delete window.setNativeUser}),[]);const[D,N]=P.useState([]),[U,O]=P.useState(!0),[q,M]=P.useState(!1),[R,k]=P.useState(null),[F,j]=P.useState(""),[G,$]=P.useState(null),[de,ve]=P.useState(!1),[Y,se]=P.useState(null),[Q,_e]=P.useState(!1),[H,ae]=P.useState(0),[le,ce]=P.useState(0),[Ee,Me]=P.useState(0),[je,xe]=P.useState(null),[ot,Te]=P.useState([]),[we,Pe]=P.useState(null),[ue,It]=P.useState([]),[it,Wt]=P.useState([]),[un,cn]=P.useState([]),[Sa,ru]=P.useState(null),Oi=A7.apiKey.startsWith("REPLACE_"),dn=P.useCallback(ke=>{k(null),n(ke)},[]);P.useEffect(()=>{if(r&&!r.isAnonymous&&s){const ke={[Se.LANDING]:"logout",[Se.AUTH]:"login",[Se.ONBOARDING]:"login",[Se.DASHBOARD]:"find_matches",[Se.ANALYTICS]:"view_profile",[Se.MESSAGES]:"send_message",[Se.IDEAS]:"view_ideas",[Se.PEOPLE]:"view_profile",[Se.REQUESTS]:"view_ideas",[Se.NEGOTIATIONS]:"view_profile"};ke[e]&&pl.trackUserActivity(s.id,ke[e],{view:e}).catch(Ge=>console.error("Error tracking navigation:",Ge))}},[e,r,s]),P.useEffect(()=>{if(s!=null&&s.id&&!de){const ke=Ie.collection("users").doc(s.id).onSnapshot(async Ge=>{const Ye=Ge.data(),tt={...s,...Ye};if(o(tt),tt.connections){const Je=await $e.getConnections(tt.connections);cn(Je)}else cn([])});return()=>ke()}},[s==null?void 0:s.id,de]),P.useEffect(()=>{if(s&&!de){const ke=Ie.collection("chats").where("participants","array-contains",s.id).onSnapshot(async Ge=>{const Ye=await Promise.all(Ge.docs.map(async tt=>{const Je=tt.data(),fr=Je.participants.find(di=>di!==s.id),ci=await $e.getUserProfile(fr);return{id:tt.id,participants:Je.participants,lastMessage:Je.lastMessage,unreadCounts:Je.unreadCounts,participantDetails:[ci].filter(Boolean)}}));Te(Ye)});return()=>ke()}},[s,de]),P.useEffect(()=>{if(Oi||de){O(!1);return}if($F()&&I.current){const{idToken:Ye,name:tt,email:Je,avatarUrl:fr}=I.current,ci={id:Je,name:tt,email:Je,avatarUrl:fr||`https://api.dicebear.com/8.x/bottts/svg?seed=${Je}`,connections:[],role:ht.Founder,location:"",skills:[],interests:[],lookingFor:""};o(ci),i(null),O(!1),ci.role?dn(Se.DASHBOARD):dn(Se.ONBOARDING);return}let ke=()=>{};return(async()=>{O(!0);try{await cl.setPersistence(wt.auth.Auth.Persistence.LOCAL)}catch(Ye){console.error("Firebase Auth persistence setup error:",Ye),k("Your browser does not support authentication. This may be due to private browsing settings. Please try a different browser or continue as a guest."),O(!1);return}ke=cl.onAuthStateChanged(async Ye=>{if(O(!0),Ye&&!G){i(Ye);let tt=await $e.getUserProfile(Ye.uid);if(tt||(await $e.createUserProfile(Ye.uid,{email:Ye.email||"",name:Ye.displayName||"",avatarUrl:Ye.photoURL||"",connections:[],role:ht.Founder,location:"",skills:[],interests:[],lookingFor:""}),tt=await $e.getUserProfile(Ye.uid)),tt){if(o(tt),!Ye.isAnonymous)try{const Je=await pl.startUserSession(Ye.uid);xe(Je)}catch(Je){console.error("Error starting user session:",Je)}dn(Se.DASHBOARD)}else dn(Se.ONBOARDING)}else{if(je&&r&&!r.isAnonymous)try{await pl.endUserSession(je,r.uid)}catch(Je){console.error("Error ending user session:",Je)}i(null),o(null),N([]),j(""),xe(null);const tt=window.location.pathname;dn(tt==="/Grow-With-Me-AI/auth"||tt==="/Grow-With-Me-AI/auth/"?Se.AUTH:Se.LANDING)}O(!1)})})(),()=>ke()},[Oi,de,dn,G,S]);const Kc=async()=>{var ke;if(k(null),Oi){$("keys-missing");return}try{O(!0);let Ge;if(Ge=await Vee(),console.log("Google Sign-In response:",Ge),Ge&&Ge.idToken&&!cl.currentUser){const Ye=wt.auth.GoogleAuthProvider.credential(Ge.idToken);await cl.signInWithCredential(Ye)}}catch(Ge){console.error("Authentication error:",Ge),(ke=Ge.message)!=null&&ke.includes("cancelled")?k("The sign-in process was cancelled."):k("An error occurred during sign-in. Please try again."),O(!1)}},Aa=()=>{console.log("Entering guest mode.");const ke={uid:`guest_${Date.now()}`,photoURL:"https://api.dicebear.com/8.x/bottts/svg?seed=guest",isAnonymous:!0};ve(!0),i(ke),dn(Se.ONBOARDING),O(!1)},iu=async()=>{de?(console.log("Logging out from guest mode session."),ve(!1),i(null),o(null),N([]),j(""),window.history.pushState({},"","/Grow-With-Me-AI/"),dn(Se.LANDING)):(await cl.signOut(),typeof window<"u"&&window.AndroidBridge&&typeof window.AndroidBridge.signOutFromGoogle=="function"&&window.AndroidBridge.signOutFromGoogle())},[Wc,Yt]=P.useState(!1),St=async ke=>{var Ge;if(r){Yt(!0),k(null);try{const Ye={id:r.uid,...ke,avatarUrl:r.photoURL||`https://api.dicebear.com/8.x/bottts/svg?seed=${r.uid}`,connections:[]};if(de)console.log("Guest mode: Storing profile locally."),o(Ye),dn(Se.DASHBOARD);else{await $e.createUserProfile(r.uid,{...ke,avatarUrl:Ye.avatarUrl,connections:[]});const tt=GF();if(tt&&typeof window<"u"&&(window.location.search.includes("token")||$F())){window.location.replace(`${window.location.origin}${window.location.pathname}?token=${tt}`);return}else{await((Ge=cl.currentUser)==null?void 0:Ge.reload());const Je=cl.currentUser;if(Je){i(Je);const fr=await $e.getUserProfile(Je.uid);o(fr),dn(Se.DASHBOARD)}else k("Session lost after onboarding. Please sign in again."),dn(Se.LANDING)}}}catch(Ye){console.error("Onboarding error:",Ye),k("Failed to complete onboarding. Please try again.")}finally{Yt(!1)}}},er=P.useCallback(async()=>{if(s){M(!0),k(null),N([]);try{let ke;de?(console.log("Guest mode: Using dummy data for matches."),ke=zAe.filter(Je=>Je.id!==s.id)):ke=await $e.getUsers(s.id);const{matches:Ge,isFallback:Ye}=await mke(s,ke);Ye&&console.log("Fallback matching algorithm was used due to API quota limits.");const tt=await Promise.all(Ge.map(async Je=>{const fr=ke.find(di=>di.id===Je.userId);if(!fr)return null;const ci=await $e.getConnectionStatus(s.id,fr.id);return{...Je,user:fr,isConnected:ci.isConnected,isPending:ci.isPending}})).then(Je=>Je.filter(fr=>fr!==null));if(!de&&r&&!r.isAnonymous)try{for(const Je of Ge)await pl.trackMatch(s.id,Je.userId,Je.compatibilityScore)}catch(Je){console.error("Error tracking matches:",Je)}N(tt)}catch(ke){console.error("Error finding matches:",ke);const Ge=ke instanceof Error?ke.message:"Sorry, we couldn't find matches at the moment. Please try again later.";k(Ge)}finally{M(!1)}}},[s,de]);P.useEffect(()=>{s&&e===Se.DASHBOARD&&D.length===0&&!q&&er()},[s,e,D.length,q,er]);const tr=P.useCallback(async()=>{_e(!0);try{const ke=pl.getAnalyticsData(),Ge=Ie.collection("ideas").get({source:"cache"}),Ye=Ie.collection("negotiations").get({source:"cache"}),tt=Ie.collection("negotiations").where("status","==","accepted").get({source:"cache"});ke.then(se),Ge.then(Je=>ae(Je.size)),Ye.then(Je=>ce(Je.size)),tt.then(Je=>Me(Je.size)),Ie.collection("ideas").get().then(Je=>ae(Je.size)),Ie.collection("negotiations").get().then(Je=>ce(Je.size)),Ie.collection("negotiations").where("status","==","accepted").get().then(Je=>Me(Je.size)),await ke}catch(ke){console.error("Error loading analytics data:",ke)}finally{_e(!1)}},[]),Ca=ke=>{Pe(ke)},Lh=async ke=>{if(s)try{await $e.removeConnection(s.id,ke.id)}catch(Ge){console.error("Failed to remove connection:",Ge),k("Could not remove connection. Please try again.")}};P.useEffect(()=>{if(s&&!de){const ke=$e.getPendingConnectionRequests(s.id,Ye=>{It(Ye)}),Ge=$e.getSentConnectionRequests(s.id,Ye=>{Wt(Ye)});return()=>{ke(),Ge()}}else It([]),Wt([])},[s,de]),P.useEffect(()=>{s&&s.role==="Founder"&&$e.getFounderIdeaEngagementAnalytics(s.id).then(ru)},[s]);const Ns=D.filter(ke=>{if(!F)return!0;const Ge=ke.user,Ye=F.toLowerCase();return Ge.name.toLowerCase().includes(Ye)||Ge.skills.some(tt=>tt.toLowerCase().includes(Ye))||Ge.interests.some(tt=>tt.toLowerCase().includes(Ye))});yc.useEffect(()=>{const ke=()=>dn(Se.DASHBOARD);return window.addEventListener("navigate-dashboard",ke),()=>window.removeEventListener("navigate-dashboard",ke)},[dn]);const bo=()=>{if(U&&!Oi&&!G)return x.jsx("div",{className:"flex justify-center items-center h-screen",children:x.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-purple-500"})});switch(e){case Se.LANDING:return x.jsx(xne,{});case Se.AUTH:return x.jsx(wne,{onGoogleLogin:Kc,onGuestLogin:Aa,error:R,authUser:r});case Se.ONBOARDING:return x.jsx(Tne,{onOnboardingComplete:St,userProfile:s,loading:Wc,error:R});case Se.DASHBOARD:return s?x.jsx(T5,{user:s,matches:Ns,isLoading:q,error:R,onFindMatches:er,searchQuery:F,setSearchQuery:j,hasActiveSearch:D.length>0,onMessage:Ca,onRequestsUpdated:()=>{console.log("Requests updated")}}):null;case Se.NEGOTIATIONS:return s?x.jsx(CAe,{user:s,setIsMobileNegotiationOpen:f,selectedNegotiationId:m,onNegotiationSelected:()=>v(null)}):null;case Se.ANALYTICS:return!Y&&!Q&&tr(),Q?x.jsx("div",{className:"flex justify-center items-center h-64",children:x.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-purple-500"})}):Y?x.jsx(K9,{data:Y,founderEngagement:Sa,totalIdeas:H,totalNegotiations:le,totalDealsAccepted:Ee}):x.jsx("div",{className:"flex items-center justify-center h-64",children:x.jsx("div",{className:"text-white text-lg",children:"Unable to load analytics data"})});case Se.MESSAGES:return s?x.jsx(RAe,{chats:ot,currentUser:s,connections:un,setIsMobileChatOpen:u}):null;case Se.IDEAS:return s?x.jsx(VAe,{user:s,onNavigateToNegotiation:ke=>{v(ke),n(Se.NEGOTIATIONS)}}):null;case Se.REQUESTS:return x.jsx(FAe,{incomingRequests:ue,sentRequests:it});case Se.PEOPLE:return x.jsx(jAe,{currentUser:s,connections:un,onMessage:Ca,onRemoveConnection:Lh});default:return s?x.jsx(T5,{user:s,matches:Ns,isLoading:q,error:R,onFindMatches:er,searchQuery:F,setSearchQuery:j,hasActiveSearch:D.length>0,onMessage:Ca}):null}};return x.jsx($W,{children:x.jsxs("div",{className:`bg-black font-sans flex ${e===Se.MESSAGES||e===Se.NEGOTIATIONS?"h-screen overflow-hidden":"min-h-screen"}`,children:[(Oi||G==="unauthorized-domain")&&x.jsx(BAe,{isDomainError:G==="unauthorized-domain"}),e!==Se.LANDING&&e!==Se.AUTH&&x.jsx(qAe,{currentView:e,setView:dn,userProfile:s,onLogin:Kc,onLogout:iu,pendingRequestCount:ue.length,isMobileChatOpen:l,isMobileNegotiationOpen:d}),x.jsx("main",{className:`flex-grow transition-all duration-300 ${e!==Se.LANDING&&e!==Se.AUTH?"ml-0 lg:ml-64":""} ${e===Se.MESSAGES||e===Se.NEGOTIATIONS?"p-0 overflow-hidden":"p-4 sm:p-8 pt-16 lg:pt-8"}`,children:bo()}),_&&x.jsxs("div",{className:"fixed top-20 right-4 z-50 bg-amber-900/90 border border-amber-700/50 text-amber-100 px-4 py-3 rounded-lg shadow-lg backdrop-blur-sm max-w-sm",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("div",{className:"w-2 h-2 bg-amber-400 rounded-full animate-pulse"}),x.jsx("span",{className:"text-sm font-medium",children:"Using fallback matching due to high API usage"})]}),x.jsx("p",{className:"text-xs text-amber-200 mt-1",children:"Matches are still accurate but may be less personalized."})]})]})})},iK=document.getElementById("root");if(!iK)throw new Error("Could not find root element to mount to");const vke=qW.createRoot(iK);vke.render(x.jsx(yc.StrictMode,{children:x.jsx(yke,{})}));
